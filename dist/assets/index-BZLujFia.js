var zM=Object.defineProperty;var FM=(t,e,n)=>e in t?zM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var le=(t,e,n)=>FM(t,typeof e!="symbol"?e+"":e,n);function HM(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in t)){const r=Object.getOwnPropertyDescriptor(s,i);r&&Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function Mw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Rw={exports:{}},xh={},Dw={exports:{}},Ow={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,O){var R=D.length;D.push(O);e:for(;0<R;){var B=R-1>>>1,F=D[B];if(0<i(F,O))D[B]=O,D[R]=F,R=B;else break e}}function n(D){return D.length===0?null:D[0]}function s(D){if(D.length===0)return null;var O=D[0],R=D.pop();if(R!==O){D[0]=R;e:for(var B=0,F=D.length,Z=F>>>1;B<Z;){var V=2*(B+1)-1,q=D[V],$=V+1,H=D[$];if(0>i(q,R))$<F&&0>i(H,q)?(D[B]=H,D[$]=R,B=$):(D[B]=q,D[V]=R,B=V);else if($<F&&0>i(H,R))D[B]=H,D[$]=R,B=$;else break e}}return O}function i(D,O){var R=D.sortIndex-O.sortIndex;return R!==0?R:D.id-O.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,p=!1,m=!1,y=!1,x=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function w(D){for(var O=n(c);O!==null;){if(O.callback===null)s(c);else if(O.startTime<=D)s(c),O.sortIndex=O.expirationTime,e(l,O);else break;O=n(c)}}function S(D){if(y=!1,w(D),!m)if(n(l)!==null)m=!0,T||(T=!0,N());else{var O=n(c);O!==null&&I(S,O.startTime-D)}}var T=!1,E=-1,C=5,M=-1;function A(){return x?!0:!(t.unstable_now()-M<C)}function k(){if(x=!1,T){var D=t.unstable_now();M=D;var O=!0;try{e:{m=!1,y&&(y=!1,b(E),E=-1),p=!0;var R=h;try{t:{for(w(D),d=n(l);d!==null&&!(d.expirationTime>D&&A());){var B=d.callback;if(typeof B=="function"){d.callback=null,h=d.priorityLevel;var F=B(d.expirationTime<=D);if(D=t.unstable_now(),typeof F=="function"){d.callback=F,w(D),O=!0;break t}d===n(l)&&s(l),w(D)}else s(l);d=n(l)}if(d!==null)O=!0;else{var Z=n(c);Z!==null&&I(S,Z.startTime-D),O=!1}}break e}finally{d=null,h=R,p=!1}O=void 0}}finally{O?N():T=!1}}}var N;if(typeof _=="function")N=function(){_(k)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,j=P.port2;P.port1.onmessage=k,N=function(){j.postMessage(null)}}else N=function(){v(k,0)};function I(D,O){E=v(function(){D(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_next=function(D){switch(h){case 1:case 2:case 3:var O=3;break;default:O=h}var R=h;h=O;try{return D()}finally{h=R}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(D,O){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var R=h;h=D;try{return O()}finally{h=R}},t.unstable_scheduleCallback=function(D,O,R){var B=t.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?B+R:B):R=B,D){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=R+F,D={id:u++,callback:O,priorityLevel:D,startTime:R,expirationTime:F,sortIndex:-1},R>B?(D.sortIndex=R,e(c,D),n(l)===null&&D===n(c)&&(y?(b(E),E=-1):y=!0,I(S,R-B))):(D.sortIndex=F,e(l,D),m||p||(m=!0,T||(T=!0,N()))),D},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(D){var O=h;return function(){var R=h;h=O;try{return D.apply(this,arguments)}finally{h=R}}}})(Ow);Dw.exports=Ow;var UM=Dw.exports,jw={exports:{}},ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iy=Symbol.for("react.transitional.element"),GM=Symbol.for("react.portal"),qM=Symbol.for("react.fragment"),WM=Symbol.for("react.strict_mode"),$M=Symbol.for("react.profiler"),YM=Symbol.for("react.consumer"),KM=Symbol.for("react.context"),XM=Symbol.for("react.forward_ref"),QM=Symbol.for("react.suspense"),ZM=Symbol.for("react.memo"),Pw=Symbol.for("react.lazy"),JM=Symbol.for("react.activity"),ob=Symbol.iterator;function eR(t){return t===null||typeof t!="object"?null:(t=ob&&t[ob]||t["@@iterator"],typeof t=="function"?t:null)}var Iw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bw=Object.assign,Lw={};function ko(t,e,n){this.props=t,this.context=e,this.refs=Lw,this.updater=n||Iw}ko.prototype.isReactComponent={};ko.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ko.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Vw(){}Vw.prototype=ko.prototype;function ry(t,e,n){this.props=t,this.context=e,this.refs=Lw,this.updater=n||Iw}var ay=ry.prototype=new Vw;ay.constructor=ry;Bw(ay,ko.prototype);ay.isPureReactComponent=!0;var lb=Array.isArray;function am(){}var Ze={H:null,A:null,T:null,S:null},zw=Object.prototype.hasOwnProperty;function oy(t,e,n){var s=n.ref;return{$$typeof:iy,type:t,key:e,ref:s!==void 0?s:null,props:n}}function tR(t,e){return oy(t.type,e,t.props)}function ly(t){return typeof t=="object"&&t!==null&&t.$$typeof===iy}function nR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var cb=/\/+/g;function Lf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nR(""+t.key):e.toString(36)}function sR(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(am,am):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function xa(t,e,n,s,i){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(r){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case iy:case GM:a=!0;break;case Pw:return a=t._init,xa(a(t._payload),e,n,s,i)}}if(a)return i=i(t),a=s===""?"."+Lf(t,0):s,lb(i)?(n="",a!=null&&(n=a.replace(cb,"$&/")+"/"),xa(i,e,n,"",function(c){return c})):i!=null&&(ly(i)&&(i=tR(i,n+(i.key==null||t&&t.key===i.key?"":(""+i.key).replace(cb,"$&/")+"/")+a)),e.push(i)),1;a=0;var o=s===""?".":s+":";if(lb(t))for(var l=0;l<t.length;l++)s=t[l],r=o+Lf(s,l),a+=xa(s,e,n,r,i);else if(l=eR(t),typeof l=="function")for(t=l.call(t),l=0;!(s=t.next()).done;)s=s.value,r=o+Lf(s,l++),a+=xa(s,e,n,r,i);else if(r==="object"){if(typeof t.then=="function")return xa(sR(t),e,n,s,i);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function Jc(t,e,n){if(t==null)return t;var s=[],i=0;return xa(t,s,"","",function(r){return e.call(n,r,i++)}),s}function iR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ub=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},rR={map:Jc,forEach:function(t,e,n){Jc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Jc(t,function(){e++}),e},toArray:function(t){return Jc(t,function(e){return e})||[]},only:function(t){if(!ly(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Activity=JM;ve.Children=rR;ve.Component=ko;ve.Fragment=qM;ve.Profiler=$M;ve.PureComponent=ry;ve.StrictMode=WM;ve.Suspense=QM;ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Ze;ve.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Ze.H.useMemoCache(t)}};ve.cache=function(t){return function(){return t.apply(null,arguments)}};ve.cacheSignal=function(){return null};ve.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var s=Bw({},t.props),i=t.key;if(e!=null)for(r in e.key!==void 0&&(i=""+e.key),e)!zw.call(e,r)||r==="key"||r==="__self"||r==="__source"||r==="ref"&&e.ref===void 0||(s[r]=e[r]);var r=arguments.length-2;if(r===1)s.children=n;else if(1<r){for(var a=Array(r),o=0;o<r;o++)a[o]=arguments[o+2];s.children=a}return oy(t.type,i,s)};ve.createContext=function(t){return t={$$typeof:KM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:YM,_context:t},t};ve.createElement=function(t,e,n){var s,i={},r=null;if(e!=null)for(s in e.key!==void 0&&(r=""+e.key),e)zw.call(e,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(i[s]=e[s]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];i.children=o}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)i[s]===void 0&&(i[s]=a[s]);return oy(t,r,i)};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:XM,render:t}};ve.isValidElement=ly;ve.lazy=function(t){return{$$typeof:Pw,_payload:{_status:-1,_result:t},_init:iR}};ve.memo=function(t,e){return{$$typeof:ZM,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=Ze.T,n={};Ze.T=n;try{var s=t(),i=Ze.S;i!==null&&i(n,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(am,ub)}catch(r){ub(r)}finally{e!==null&&n.types!==null&&(e.types=n.types),Ze.T=e}};ve.unstable_useCacheRefresh=function(){return Ze.H.useCacheRefresh()};ve.use=function(t){return Ze.H.use(t)};ve.useActionState=function(t,e,n){return Ze.H.useActionState(t,e,n)};ve.useCallback=function(t,e){return Ze.H.useCallback(t,e)};ve.useContext=function(t){return Ze.H.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t,e){return Ze.H.useDeferredValue(t,e)};ve.useEffect=function(t,e){return Ze.H.useEffect(t,e)};ve.useEffectEvent=function(t){return Ze.H.useEffectEvent(t)};ve.useId=function(){return Ze.H.useId()};ve.useImperativeHandle=function(t,e,n){return Ze.H.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return Ze.H.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return Ze.H.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return Ze.H.useMemo(t,e)};ve.useOptimistic=function(t,e){return Ze.H.useOptimistic(t,e)};ve.useReducer=function(t,e,n){return Ze.H.useReducer(t,e,n)};ve.useRef=function(t){return Ze.H.useRef(t)};ve.useState=function(t){return Ze.H.useState(t)};ve.useSyncExternalStore=function(t,e,n){return Ze.H.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return Ze.H.useTransition()};ve.version="19.2.4";jw.exports=ve;var g=jw.exports;const _t=Mw(g),Fw=HM({__proto__:null,default:_t},[g]);var Hw={exports:{}},Zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aR=g;function Uw(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function bi(){}var $t={d:{f:bi,r:function(){throw Error(Uw(522))},D:bi,C:bi,L:bi,m:bi,X:bi,S:bi,M:bi},p:0,findDOMNode:null},oR=Symbol.for("react.portal");function lR(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oR,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}var xl=aR.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function _h(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$t;Zt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(Uw(299));return lR(t,e,null,n)};Zt.flushSync=function(t){var e=xl.T,n=$t.p;try{if(xl.T=null,$t.p=2,t)return t()}finally{xl.T=e,$t.p=n,$t.d.f()}};Zt.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,$t.d.C(t,e))};Zt.prefetchDNS=function(t){typeof t=="string"&&$t.d.D(t)};Zt.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,s=_h(n,e.crossOrigin),i=typeof e.integrity=="string"?e.integrity:void 0,r=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?$t.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:s,integrity:i,fetchPriority:r}):n==="script"&&$t.d.X(t,{crossOrigin:s,integrity:i,fetchPriority:r,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Zt.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=_h(e.as,e.crossOrigin);$t.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&$t.d.M(t)};Zt.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,s=_h(n,e.crossOrigin);$t.d.L(t,n,{crossOrigin:s,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Zt.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=_h(e.as,e.crossOrigin);$t.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else $t.d.m(t)};Zt.requestFormReset=function(t){$t.d.r(t)};Zt.unstable_batchedUpdates=function(t,e){return t(e)};Zt.useFormState=function(t,e,n){return xl.H.useFormState(t,e,n)};Zt.useFormStatus=function(){return xl.H.useHostTransitionStatus()};Zt.version="19.2.4";function Gw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Gw)}catch(t){console.error(t)}}Gw(),Hw.exports=Zt;var No=Hw.exports;const cR=Mw(No);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ct=UM,qw=g,uR=No;function G(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ww(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $w(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Yw(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function db(t){if(hc(t)!==t)throw Error(G(188))}function dR(t){var e=t.alternate;if(!e){if(e=hc(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,s=e;;){var i=n.return;if(i===null)break;var r=i.alternate;if(r===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===n)return db(i),t;if(r===s)return db(i),e;r=r.sibling}throw Error(G(188))}if(n.return!==s.return)n=i,s=r;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,s=r;break}if(o===s){a=!0,s=i,n=r;break}o=o.sibling}if(!a){for(o=r.child;o;){if(o===n){a=!0,n=r,s=i;break}if(o===s){a=!0,s=r,n=i;break}o=o.sibling}if(!a)throw Error(G(189))}}if(n.alternate!==s)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function Kw(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=Kw(t),e!==null)return e;t=t.sibling}return null}var et=Object.assign,hR=Symbol.for("react.element"),eu=Symbol.for("react.transitional.element"),hl=Symbol.for("react.portal"),Aa=Symbol.for("react.fragment"),Xw=Symbol.for("react.strict_mode"),om=Symbol.for("react.profiler"),Qw=Symbol.for("react.consumer"),Ks=Symbol.for("react.context"),cy=Symbol.for("react.forward_ref"),lm=Symbol.for("react.suspense"),cm=Symbol.for("react.suspense_list"),uy=Symbol.for("react.memo"),Ei=Symbol.for("react.lazy"),um=Symbol.for("react.activity"),fR=Symbol.for("react.memo_cache_sentinel"),hb=Symbol.iterator;function tl(t){return t===null||typeof t!="object"?null:(t=hb&&t[hb]||t["@@iterator"],typeof t=="function"?t:null)}var pR=Symbol.for("react.client.reference");function dm(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===pR?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Aa:return"Fragment";case om:return"Profiler";case Xw:return"StrictMode";case lm:return"Suspense";case cm:return"SuspenseList";case um:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case hl:return"Portal";case Ks:return t.displayName||"Context";case Qw:return(t._context.displayName||"Context")+".Consumer";case cy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case uy:return e=t.displayName||null,e!==null?e:dm(t.type)||"Memo";case Ei:e=t._payload,t=t._init;try{return dm(t(e))}catch{}}return null}var fl=Array.isArray,pe=qw.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Pe=uR.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ir={pending:!1,data:null,method:null,action:null},hm=[],ka=-1;function Ds(t){return{current:t}}function kt(t){0>ka||(t.current=hm[ka],hm[ka]=null,ka--)}function We(t,e){ka++,hm[ka]=t.current,t.current=e}var xs=Ds(null),Ll=Ds(null),Fi=Ds(null),ld=Ds(null);function cd(t,e){switch(We(Fi,e),We(Ll,t),We(xs,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?vx(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=vx(e),t=yT(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}kt(xs),We(xs,t)}function io(){kt(xs),kt(Ll),kt(Fi)}function fm(t){t.memoizedState!==null&&We(ld,t);var e=xs.current,n=yT(e,t.type);e!==n&&(We(Ll,t),We(xs,n))}function ud(t){Ll.current===t&&(kt(xs),kt(Ll)),ld.current===t&&(kt(ld),Kl._currentValue=Ir)}var Vf,fb;function Er(t){if(Vf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Vf=e&&e[1]||"",fb=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vf+t+fb}var zf=!1;function Ff(t,e){if(!t||zf)return"";zf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(e){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(p){var h=p}Reflect.construct(t,[],d)}else{try{d.call()}catch(p){h=p}t.call(d.prototype)}}else{try{throw Error()}catch(p){h=p}(d=t())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(p){if(p&&h&&typeof p.stack=="string")return[p.stack,h.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=s.DetermineComponentFrameRoot(),a=r[0],o=r[1];if(a&&o){var l=a.split(`
`),c=o.split(`
`);for(i=s=0;s<l.length&&!l[s].includes("DetermineComponentFrameRoot");)s++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(s===l.length||i===c.length)for(s=l.length-1,i=c.length-1;1<=s&&0<=i&&l[s]!==c[i];)i--;for(;1<=s&&0<=i;s--,i--)if(l[s]!==c[i]){if(s!==1||i!==1)do if(s--,i--,0>i||l[s]!==c[i]){var u=`
`+l[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=i);break}}}finally{zf=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Er(n):""}function mR(t,e){switch(t.tag){case 26:case 27:case 5:return Er(t.type);case 16:return Er("Lazy");case 13:return t.child!==e&&e!==null?Er("Suspense Fallback"):Er("Suspense");case 19:return Er("SuspenseList");case 0:case 15:return Ff(t.type,!1);case 11:return Ff(t.type.render,!1);case 1:return Ff(t.type,!0);case 31:return Er("Activity");default:return""}}function pb(t){try{var e="",n=null;do e+=mR(t,n),n=t,t=t.return;while(t);return e}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var pm=Object.prototype.hasOwnProperty,dy=Ct.unstable_scheduleCallback,Hf=Ct.unstable_cancelCallback,gR=Ct.unstable_shouldYield,yR=Ct.unstable_requestPaint,Cn=Ct.unstable_now,vR=Ct.unstable_getCurrentPriorityLevel,Zw=Ct.unstable_ImmediatePriority,Jw=Ct.unstable_UserBlockingPriority,dd=Ct.unstable_NormalPriority,bR=Ct.unstable_LowPriority,eS=Ct.unstable_IdlePriority,xR=Ct.log,_R=Ct.unstable_setDisableYieldValue,fc=null,Tn=null;function Pi(t){if(typeof xR=="function"&&_R(t),Tn&&typeof Tn.setStrictMode=="function")try{Tn.setStrictMode(fc,t)}catch{}}var En=Math.clz32?Math.clz32:CR,wR=Math.log,SR=Math.LN2;function CR(t){return t>>>=0,t===0?32:31-(wR(t)/SR|0)|0}var tu=256,nu=262144,su=4194304;function Ar(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function wh(t,e,n){var s=t.pendingLanes;if(s===0)return 0;var i=0,r=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var o=s&134217727;return o!==0?(s=o&~r,s!==0?i=Ar(s):(a&=o,a!==0?i=Ar(a):n||(n=o&~t,n!==0&&(i=Ar(n))))):(o=s&~r,o!==0?i=Ar(o):a!==0?i=Ar(a):n||(n=s&~t,n!==0&&(i=Ar(n)))),i===0?0:e!==0&&e!==i&&!(e&r)&&(r=i&-i,n=e&-e,r>=n||r===32&&(n&4194048)!==0)?e:i}function pc(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function TR(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tS(){var t=su;return su<<=1,!(su&62914560)&&(su=4194304),t}function Uf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function mc(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function ER(t,e,n,s,i,r){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,l=t.expirationTimes,c=t.hiddenUpdates;for(n=a&~n;0<n;){var u=31-En(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(h!==null)for(c[u]=null,u=0;u<h.length;u++){var p=h[u];p!==null&&(p.lane&=-536870913)}n&=~d}s!==0&&nS(t,s,0),r!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=r&~(a&~e))}function nS(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var s=31-En(e);t.entangledLanes|=e,t.entanglements[s]=t.entanglements[s]|1073741824|n&261930}function sS(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-En(n),i=1<<s;i&e|t[s]&e&&(t[s]|=e),n&=~i}}function iS(t,e){var n=e&-e;return n=n&42?1:hy(n),n&(t.suspendedLanes|e)?0:n}function hy(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function fy(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function rS(){var t=Pe.p;return t!==0?t:(t=window.event,t===void 0?32:kT(t.type))}function mb(t,e){var n=Pe.p;try{return Pe.p=t,e()}finally{Pe.p=n}}var hr=Math.random().toString(36).slice(2),jt="__reactFiber$"+hr,hn="__reactProps$"+hr,Mo="__reactContainer$"+hr,mm="__reactEvents$"+hr,AR="__reactListeners$"+hr,kR="__reactHandles$"+hr,gb="__reactResources$"+hr,gc="__reactMarker$"+hr;function py(t){delete t[jt],delete t[hn],delete t[mm],delete t[AR],delete t[kR]}function Na(t){var e=t[jt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mo]||n[jt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Sx(t);t!==null;){if(n=t[jt])return n;t=Sx(t)}return e}t=n,n=t.parentNode}return null}function Ro(t){if(t=t[jt]||t[Mo]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function pl(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(G(33))}function $a(t){var e=t[gb];return e||(e=t[gb]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function At(t){t[gc]=!0}var aS=new Set,oS={};function sa(t,e){ro(t,e),ro(t+"Capture",e)}function ro(t,e){for(oS[t]=e,t=0;t<e.length;t++)aS.add(e[t])}var NR=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yb={},vb={};function MR(t){return pm.call(vb,t)?!0:pm.call(yb,t)?!1:NR.test(t)?vb[t]=!0:(yb[t]=!0,!1)}function Iu(t,e,n){if(MR(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var s=e.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function iu(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Vs(t,e,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+s)}}function jn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function lS(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function RR(t,e,n){var s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,r=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,r.call(this,a)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function gm(t){if(!t._valueTracker){var e=lS(t)?"checked":"value";t._valueTracker=RR(t,e,""+t[e])}}function cS(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=lS(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function hd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var DR=/[\n"\\]/g;function Bn(t){return t.replace(DR,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function ym(t,e,n,s,i,r,a,o){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+jn(e)):t.value!==""+jn(e)&&(t.value=""+jn(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?vm(t,a,jn(e)):n!=null?vm(t,a,jn(n)):s!=null&&t.removeAttribute("value"),i==null&&r!=null&&(t.defaultChecked=!!r),i!=null&&(t.checked=i&&typeof i!="function"&&typeof i!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+jn(o):t.removeAttribute("name")}function uS(t,e,n,s,i,r,a,o){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),e!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||e!=null)){gm(t);return}n=n!=null?""+jn(n):"",e=e!=null?""+jn(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}s=s??i,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=o?t.checked:!!s,t.defaultChecked=!!s,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a),gm(t)}function vm(t,e,n){e==="number"&&hd(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Ya(t,e,n,s){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&s&&(t[n].defaultSelected=!0)}else{for(n=""+jn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,s&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function dS(t,e,n){if(e!=null&&(e=""+jn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+jn(n):""}function hS(t,e,n,s){if(e==null){if(s!=null){if(n!=null)throw Error(G(92));if(fl(s)){if(1<s.length)throw Error(G(93));s=s[0]}n=s}n==null&&(n=""),e=n}n=jn(e),t.defaultValue=n,s=t.textContent,s===n&&s!==""&&s!==null&&(t.value=s),gm(t)}function ao(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var OR=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bb(t,e,n){var s=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":s?t.setProperty(e,n):typeof n!="number"||n===0||OR.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function fS(t,e,n){if(e!=null&&typeof e!="object")throw Error(G(62));if(t=t.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||e!=null&&e.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var i in e)s=e[i],e.hasOwnProperty(i)&&n[i]!==s&&bb(t,i,s)}else for(var r in e)e.hasOwnProperty(r)&&bb(t,r,e[r])}function my(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jR=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),PR=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bu(t){return PR.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Xs(){}var bm=null;function gy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ma=null,Ka=null;function xb(t){var e=Ro(t);if(e&&(t=e.stateNode)){var n=t[hn]||null;e:switch(t=e.stateNode,e.type){case"input":if(ym(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Bn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var i=s[hn]||null;if(!i)throw Error(G(90));ym(s,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(e=0;e<n.length;e++)s=n[e],s.form===t.form&&cS(s)}break e;case"textarea":dS(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Ya(t,!!n.multiple,e,!1)}}}var Gf=!1;function pS(t,e,n){if(Gf)return t(e,n);Gf=!0;try{var s=t(e);return s}finally{if(Gf=!1,(Ma!==null||Ka!==null)&&(jh(),Ma&&(e=Ma,t=Ka,Ka=Ma=null,xb(e),t)))for(e=0;e<t.length;e++)xb(t[e])}}function Vl(t,e){var n=t.stateNode;if(n===null)return null;var s=n[hn]||null;if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xm=!1;if(ni)try{var nl={};Object.defineProperty(nl,"passive",{get:function(){xm=!0}}),window.addEventListener("test",nl,nl),window.removeEventListener("test",nl,nl)}catch{xm=!1}var Ii=null,yy=null,Lu=null;function mS(){if(Lu)return Lu;var t,e=yy,n=e.length,s,i="value"in Ii?Ii.value:Ii.textContent,r=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(s=1;s<=a&&e[n-s]===i[r-s];s++);return Lu=i.slice(t,1<s?1-s:void 0)}function Vu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ru(){return!0}function _b(){return!1}function pn(t){function e(n,s,i,r,a){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?ru:_b,this.isPropagationStopped=_b,this}return et(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ru)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ru)},persist:function(){},isPersistent:ru}),e}var ia={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sh=pn(ia),yc=et({},ia,{view:0,detail:0}),IR=pn(yc),qf,Wf,sl,Ch=et({},yc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==sl&&(sl&&t.type==="mousemove"?(qf=t.screenX-sl.screenX,Wf=t.screenY-sl.screenY):Wf=qf=0,sl=t),qf)},movementY:function(t){return"movementY"in t?t.movementY:Wf}}),wb=pn(Ch),BR=et({},Ch,{dataTransfer:0}),LR=pn(BR),VR=et({},yc,{relatedTarget:0}),$f=pn(VR),zR=et({},ia,{animationName:0,elapsedTime:0,pseudoElement:0}),FR=pn(zR),HR=et({},ia,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),UR=pn(HR),GR=et({},ia,{data:0}),Sb=pn(GR),qR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$R={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$R[t])?!!e[t]:!1}function vy(){return YR}var KR=et({},yc,{key:function(t){if(t.key){var e=qR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?WR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vy,charCode:function(t){return t.type==="keypress"?Vu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),XR=pn(KR),QR=et({},Ch,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cb=pn(QR),ZR=et({},yc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vy}),JR=pn(ZR),eD=et({},ia,{propertyName:0,elapsedTime:0,pseudoElement:0}),tD=pn(eD),nD=et({},Ch,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),sD=pn(nD),iD=et({},ia,{newState:0,oldState:0}),rD=pn(iD),aD=[9,13,27,32],by=ni&&"CompositionEvent"in window,_l=null;ni&&"documentMode"in document&&(_l=document.documentMode);var oD=ni&&"TextEvent"in window&&!_l,gS=ni&&(!by||_l&&8<_l&&11>=_l),Tb=" ",Eb=!1;function yS(t,e){switch(t){case"keyup":return aD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ra=!1;function lD(t,e){switch(t){case"compositionend":return vS(e);case"keypress":return e.which!==32?null:(Eb=!0,Tb);case"textInput":return t=e.data,t===Tb&&Eb?null:t;default:return null}}function cD(t,e){if(Ra)return t==="compositionend"||!by&&yS(t,e)?(t=mS(),Lu=yy=Ii=null,Ra=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gS&&e.locale!=="ko"?null:e.data;default:return null}}var uD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ab(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!uD[t.type]:e==="textarea"}function bS(t,e,n,s){Ma?Ka?Ka.push(s):Ka=[s]:Ma=s,e=Md(e,"onChange"),0<e.length&&(n=new Sh("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var wl=null,zl=null;function dD(t){pT(t,0)}function Th(t){var e=pl(t);if(cS(e))return t}function kb(t,e){if(t==="change")return e}var xS=!1;if(ni){var Yf;if(ni){var Kf="oninput"in document;if(!Kf){var Nb=document.createElement("div");Nb.setAttribute("oninput","return;"),Kf=typeof Nb.oninput=="function"}Yf=Kf}else Yf=!1;xS=Yf&&(!document.documentMode||9<document.documentMode)}function Mb(){wl&&(wl.detachEvent("onpropertychange",_S),zl=wl=null)}function _S(t){if(t.propertyName==="value"&&Th(zl)){var e=[];bS(e,zl,t,gy(t)),pS(dD,e)}}function hD(t,e,n){t==="focusin"?(Mb(),wl=e,zl=n,wl.attachEvent("onpropertychange",_S)):t==="focusout"&&Mb()}function fD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Th(zl)}function pD(t,e){if(t==="click")return Th(e)}function mD(t,e){if(t==="input"||t==="change")return Th(e)}function gD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mn=typeof Object.is=="function"?Object.is:gD;function Fl(t,e){if(Mn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!pm.call(e,i)||!Mn(t[i],e[i]))return!1}return!0}function Rb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Db(t,e){var n=Rb(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Rb(n)}}function wS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?wS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function SS(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=hd(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=hd(t.document)}return e}function xy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var yD=ni&&"documentMode"in document&&11>=document.documentMode,Da=null,_m=null,Sl=null,wm=!1;function Ob(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wm||Da==null||Da!==hd(s)||(s=Da,"selectionStart"in s&&xy(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Sl&&Fl(Sl,s)||(Sl=s,s=Md(_m,"onSelect"),0<s.length&&(e=new Sh("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Da)))}function wr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Oa={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionrun:wr("Transition","TransitionRun"),transitionstart:wr("Transition","TransitionStart"),transitioncancel:wr("Transition","TransitionCancel"),transitionend:wr("Transition","TransitionEnd")},Xf={},CS={};ni&&(CS=document.createElement("div").style,"AnimationEvent"in window||(delete Oa.animationend.animation,delete Oa.animationiteration.animation,delete Oa.animationstart.animation),"TransitionEvent"in window||delete Oa.transitionend.transition);function ra(t){if(Xf[t])return Xf[t];if(!Oa[t])return t;var e=Oa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in CS)return Xf[t]=e[n];return t}var TS=ra("animationend"),ES=ra("animationiteration"),AS=ra("animationstart"),vD=ra("transitionrun"),bD=ra("transitionstart"),xD=ra("transitioncancel"),kS=ra("transitionend"),NS=new Map,Sm="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sm.push("scrollEnd");function us(t,e){NS.set(t,e),sa(e,[t])}var fd=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},On=[],ja=0,_y=0;function Eh(){for(var t=ja,e=_y=ja=0;e<t;){var n=On[e];On[e++]=null;var s=On[e];On[e++]=null;var i=On[e];On[e++]=null;var r=On[e];if(On[e++]=null,s!==null&&i!==null){var a=s.pending;a===null?i.next=i:(i.next=a.next,a.next=i),s.pending=i}r!==0&&MS(n,i,r)}}function Ah(t,e,n,s){On[ja++]=t,On[ja++]=e,On[ja++]=n,On[ja++]=s,_y|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function wy(t,e,n,s){return Ah(t,e,n,s),pd(t)}function aa(t,e){return Ah(t,null,null,e),pd(t)}function MS(t,e,n){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n);for(var i=!1,r=t.return;r!==null;)r.childLanes|=n,s=r.alternate,s!==null&&(s.childLanes|=n),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(i=!0)),t=r,r=r.return;return t.tag===3?(r=t.stateNode,i&&e!==null&&(i=31-En(n),t=r.hiddenUpdates,s=t[i],s===null?t[i]=[e]:s.push(e),e.lane=n|536870912),r):null}function pd(t){if(50<Dl)throw Dl=0,Gm=null,Error(G(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Pa={};function _D(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(t,e,n,s){return new _D(t,e,n,s)}function Sy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Zs(t,e){var n=t.alternate;return n===null?(n=bn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function RS(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function zu(t,e,n,s,i,r){var a=0;if(s=t,typeof t=="function")Sy(t)&&(a=1);else if(typeof t=="string")a=EO(t,n,xs.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case um:return t=bn(31,n,e,i),t.elementType=um,t.lanes=r,t;case Aa:return Br(n.children,i,r,e);case Xw:a=8,i|=24;break;case om:return t=bn(12,n,e,i|2),t.elementType=om,t.lanes=r,t;case lm:return t=bn(13,n,e,i),t.elementType=lm,t.lanes=r,t;case cm:return t=bn(19,n,e,i),t.elementType=cm,t.lanes=r,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ks:a=10;break e;case Qw:a=9;break e;case cy:a=11;break e;case uy:a=14;break e;case Ei:a=16,s=null;break e}a=29,n=Error(G(130,t===null?"null":typeof t,"")),s=null}return e=bn(a,n,e,i),e.elementType=t,e.type=s,e.lanes=r,e}function Br(t,e,n,s){return t=bn(7,t,s,e),t.lanes=n,t}function Qf(t,e,n){return t=bn(6,t,null,e),t.lanes=n,t}function DS(t){var e=bn(18,null,null,0);return e.stateNode=t,e}function Zf(t,e,n){return e=bn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var jb=new WeakMap;function Ln(t,e){if(typeof t=="object"&&t!==null){var n=jb.get(t);return n!==void 0?n:(e={value:t,source:e,stack:pb(e)},jb.set(t,e),e)}return{value:t,source:e,stack:pb(e)}}var Ia=[],Ba=0,md=null,Hl=0,Pn=[],In=0,Ji=null,gs=1,ys="";function $s(t,e){Ia[Ba++]=Hl,Ia[Ba++]=md,md=t,Hl=e}function OS(t,e,n){Pn[In++]=gs,Pn[In++]=ys,Pn[In++]=Ji,Ji=t;var s=gs;t=ys;var i=32-En(s)-1;s&=~(1<<i),n+=1;var r=32-En(e)+i;if(30<r){var a=i-i%5;r=(s&(1<<a)-1).toString(32),s>>=a,i-=a,gs=1<<32-En(e)+i|n<<i|s,ys=r+t}else gs=1<<r|n<<i|s,ys=t}function Cy(t){t.return!==null&&($s(t,1),OS(t,1,0))}function Ty(t){for(;t===md;)md=Ia[--Ba],Ia[Ba]=null,Hl=Ia[--Ba],Ia[Ba]=null;for(;t===Ji;)Ji=Pn[--In],Pn[In]=null,ys=Pn[--In],Pn[In]=null,gs=Pn[--In],Pn[In]=null}function jS(t,e){Pn[In++]=gs,Pn[In++]=ys,Pn[In++]=Ji,gs=e.id,ys=e.overflow,Ji=t}var Pt=null,Qe=null,Ae=!1,Hi=null,Vn=!1,Cm=Error(G(519));function er(t){var e=Error(G(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ul(Ln(e,t)),Cm}function Pb(t){var e=t.stateNode,n=t.type,s=t.memoizedProps;switch(e[jt]=t,e[hn]=s,n){case"dialog":Se("cancel",e),Se("close",e);break;case"iframe":case"object":case"embed":Se("load",e);break;case"video":case"audio":for(n=0;n<$l.length;n++)Se($l[n],e);break;case"source":Se("error",e);break;case"img":case"image":case"link":Se("error",e),Se("load",e);break;case"details":Se("toggle",e);break;case"input":Se("invalid",e),uS(e,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":Se("invalid",e);break;case"textarea":Se("invalid",e),hS(e,s.value,s.defaultValue,s.children)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||s.suppressHydrationWarning===!0||gT(e.textContent,n)?(s.popover!=null&&(Se("beforetoggle",e),Se("toggle",e)),s.onScroll!=null&&Se("scroll",e),s.onScrollEnd!=null&&Se("scrollend",e),s.onClick!=null&&(e.onclick=Xs),e=!0):e=!1,e||er(t,!0)}function Ib(t){for(Pt=t.return;Pt;)switch(Pt.tag){case 5:case 31:case 13:Vn=!1;return;case 27:case 3:Vn=!0;return;default:Pt=Pt.return}}function fa(t){if(t!==Pt)return!1;if(!Ae)return Ib(t),Ae=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Km(t.type,t.memoizedProps)),n=!n),n&&Qe&&er(t),Ib(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));Qe=wx(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));Qe=wx(t)}else e===27?(e=Qe,fr(t.type)?(t=Jm,Jm=null,Qe=t):Qe=e):Qe=Pt?Un(t.stateNode.nextSibling):null;return!0}function Hr(){Qe=Pt=null,Ae=!1}function Jf(){var t=Hi;return t!==null&&(an===null?an=t:an.push.apply(an,t),Hi=null),t}function Ul(t){Hi===null?Hi=[t]:Hi.push(t)}var Tm=Ds(null),oa=null,Qs=null;function Mi(t,e,n){We(Tm,e._currentValue),e._currentValue=n}function Js(t){t._currentValue=Tm.current,kt(Tm)}function Em(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Am(t,e,n,s){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var r=i.dependencies;if(r!==null){var a=i.child;r=r.firstContext;e:for(;r!==null;){var o=r;r=i;for(var l=0;l<e.length;l++)if(o.context===e[l]){r.lanes|=n,o=r.alternate,o!==null&&(o.lanes|=n),Em(r.return,n,t),s||(a=null);break e}r=o.next}}else if(i.tag===18){if(a=i.return,a===null)throw Error(G(341));a.lanes|=n,r=a.alternate,r!==null&&(r.lanes|=n),Em(a,n,t),a=null}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}}function Do(t,e,n,s){t=null;for(var i=e,r=!1;i!==null;){if(!r){if(i.flags&524288)r=!0;else if(i.flags&262144)break}if(i.tag===10){var a=i.alternate;if(a===null)throw Error(G(387));if(a=a.memoizedProps,a!==null){var o=i.type;Mn(i.pendingProps.value,a.value)||(t!==null?t.push(o):t=[o])}}else if(i===ld.current){if(a=i.alternate,a===null)throw Error(G(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(Kl):t=[Kl])}i=i.return}t!==null&&Am(e,t,n,s),e.flags|=262144}function gd(t){for(t=t.firstContext;t!==null;){if(!Mn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ur(t){oa=t,Qs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function It(t){return PS(oa,t)}function au(t,e){return oa===null&&Ur(t),PS(t,e)}function PS(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Qs===null){if(t===null)throw Error(G(308));Qs=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Qs=Qs.next=e;return n}var wD=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,s){t.push(s)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},SD=Ct.unstable_scheduleCallback,CD=Ct.unstable_NormalPriority,yt={$$typeof:Ks,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ey(){return{controller:new wD,data:new Map,refCount:0}}function vc(t){t.refCount--,t.refCount===0&&SD(CD,function(){t.controller.abort()})}var Cl=null,km=0,oo=0,Xa=null;function TD(t,e){if(Cl===null){var n=Cl=[];km=0,oo=Qy(),Xa={status:"pending",value:void 0,then:function(s){n.push(s)}}}return km++,e.then(Bb,Bb),e}function Bb(){if(--km===0&&Cl!==null){Xa!==null&&(Xa.status="fulfilled");var t=Cl;Cl=null,oo=0,Xa=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function ED(t,e){var n=[],s={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return t.then(function(){s.status="fulfilled",s.value=e;for(var i=0;i<n.length;i++)(0,n[i])(e)},function(i){for(s.status="rejected",s.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),s}var Lb=pe.S;pe.S=function(t,e){KC=Cn(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&TD(t,e),Lb!==null&&Lb(t,e)};var Lr=Ds(null);function Ay(){var t=Lr.current;return t!==null?t:qe.pooledCache}function Fu(t,e){e===null?We(Lr,Lr.current):We(Lr,e.pool)}function IS(){var t=Ay();return t===null?null:{parent:yt._currentValue,pool:t}}var Oo=Error(G(460)),ky=Error(G(474)),kh=Error(G(542)),yd={then:function(){}};function Vb(t){return t=t.status,t==="fulfilled"||t==="rejected"}function BS(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Xs,Xs),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Fb(t),t;default:if(typeof e.status=="string")e.then(Xs,Xs);else{if(t=qe,t!==null&&100<t.shellSuspendCounter)throw Error(G(482));t=e,t.status="pending",t.then(function(s){if(e.status==="pending"){var i=e;i.status="fulfilled",i.value=s}},function(s){if(e.status==="pending"){var i=e;i.status="rejected",i.reason=s}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Fb(t),t}throw Vr=e,Oo}}function kr(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Vr=n,Oo):n}}var Vr=null;function zb(){if(Vr===null)throw Error(G(459));var t=Vr;return Vr=null,t}function Fb(t){if(t===Oo||t===kh)throw Error(G(483))}var Qa=null,Gl=0;function ou(t){var e=Gl;return Gl+=1,Qa===null&&(Qa=[]),BS(Qa,t,e)}function il(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function lu(t,e){throw e.$$typeof===hR?Error(G(525)):(t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function LS(t){function e(v,b){if(t){var _=v.deletions;_===null?(v.deletions=[b],v.flags|=16):_.push(b)}}function n(v,b){if(!t)return null;for(;b!==null;)e(v,b),b=b.sibling;return null}function s(v){for(var b=new Map;v!==null;)v.key!==null?b.set(v.key,v):b.set(v.index,v),v=v.sibling;return b}function i(v,b){return v=Zs(v,b),v.index=0,v.sibling=null,v}function r(v,b,_){return v.index=_,t?(_=v.alternate,_!==null?(_=_.index,_<b?(v.flags|=67108866,b):_):(v.flags|=67108866,b)):(v.flags|=1048576,b)}function a(v){return t&&v.alternate===null&&(v.flags|=67108866),v}function o(v,b,_,w){return b===null||b.tag!==6?(b=Qf(_,v.mode,w),b.return=v,b):(b=i(b,_),b.return=v,b)}function l(v,b,_,w){var S=_.type;return S===Aa?u(v,b,_.props.children,w,_.key):b!==null&&(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ei&&kr(S)===b.type)?(b=i(b,_.props),il(b,_),b.return=v,b):(b=zu(_.type,_.key,_.props,null,v.mode,w),il(b,_),b.return=v,b)}function c(v,b,_,w){return b===null||b.tag!==4||b.stateNode.containerInfo!==_.containerInfo||b.stateNode.implementation!==_.implementation?(b=Zf(_,v.mode,w),b.return=v,b):(b=i(b,_.children||[]),b.return=v,b)}function u(v,b,_,w,S){return b===null||b.tag!==7?(b=Br(_,v.mode,w,S),b.return=v,b):(b=i(b,_),b.return=v,b)}function d(v,b,_){if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return b=Qf(""+b,v.mode,_),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case eu:return _=zu(b.type,b.key,b.props,null,v.mode,_),il(_,b),_.return=v,_;case hl:return b=Zf(b,v.mode,_),b.return=v,b;case Ei:return b=kr(b),d(v,b,_)}if(fl(b)||tl(b))return b=Br(b,v.mode,_,null),b.return=v,b;if(typeof b.then=="function")return d(v,ou(b),_);if(b.$$typeof===Ks)return d(v,au(v,b),_);lu(v,b)}return null}function h(v,b,_,w){var S=b!==null?b.key:null;if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return S!==null?null:o(v,b,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case eu:return _.key===S?l(v,b,_,w):null;case hl:return _.key===S?c(v,b,_,w):null;case Ei:return _=kr(_),h(v,b,_,w)}if(fl(_)||tl(_))return S!==null?null:u(v,b,_,w,null);if(typeof _.then=="function")return h(v,b,ou(_),w);if(_.$$typeof===Ks)return h(v,b,au(v,_),w);lu(v,_)}return null}function p(v,b,_,w,S){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return v=v.get(_)||null,o(b,v,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case eu:return v=v.get(w.key===null?_:w.key)||null,l(b,v,w,S);case hl:return v=v.get(w.key===null?_:w.key)||null,c(b,v,w,S);case Ei:return w=kr(w),p(v,b,_,w,S)}if(fl(w)||tl(w))return v=v.get(_)||null,u(b,v,w,S,null);if(typeof w.then=="function")return p(v,b,_,ou(w),S);if(w.$$typeof===Ks)return p(v,b,_,au(b,w),S);lu(b,w)}return null}function m(v,b,_,w){for(var S=null,T=null,E=b,C=b=0,M=null;E!==null&&C<_.length;C++){E.index>C?(M=E,E=null):M=E.sibling;var A=h(v,E,_[C],w);if(A===null){E===null&&(E=M);break}t&&E&&A.alternate===null&&e(v,E),b=r(A,b,C),T===null?S=A:T.sibling=A,T=A,E=M}if(C===_.length)return n(v,E),Ae&&$s(v,C),S;if(E===null){for(;C<_.length;C++)E=d(v,_[C],w),E!==null&&(b=r(E,b,C),T===null?S=E:T.sibling=E,T=E);return Ae&&$s(v,C),S}for(E=s(E);C<_.length;C++)M=p(E,v,C,_[C],w),M!==null&&(t&&M.alternate!==null&&E.delete(M.key===null?C:M.key),b=r(M,b,C),T===null?S=M:T.sibling=M,T=M);return t&&E.forEach(function(k){return e(v,k)}),Ae&&$s(v,C),S}function y(v,b,_,w){if(_==null)throw Error(G(151));for(var S=null,T=null,E=b,C=b=0,M=null,A=_.next();E!==null&&!A.done;C++,A=_.next()){E.index>C?(M=E,E=null):M=E.sibling;var k=h(v,E,A.value,w);if(k===null){E===null&&(E=M);break}t&&E&&k.alternate===null&&e(v,E),b=r(k,b,C),T===null?S=k:T.sibling=k,T=k,E=M}if(A.done)return n(v,E),Ae&&$s(v,C),S;if(E===null){for(;!A.done;C++,A=_.next())A=d(v,A.value,w),A!==null&&(b=r(A,b,C),T===null?S=A:T.sibling=A,T=A);return Ae&&$s(v,C),S}for(E=s(E);!A.done;C++,A=_.next())A=p(E,v,C,A.value,w),A!==null&&(t&&A.alternate!==null&&E.delete(A.key===null?C:A.key),b=r(A,b,C),T===null?S=A:T.sibling=A,T=A);return t&&E.forEach(function(N){return e(v,N)}),Ae&&$s(v,C),S}function x(v,b,_,w){if(typeof _=="object"&&_!==null&&_.type===Aa&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case eu:e:{for(var S=_.key;b!==null;){if(b.key===S){if(S=_.type,S===Aa){if(b.tag===7){n(v,b.sibling),w=i(b,_.props.children),w.return=v,v=w;break e}}else if(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Ei&&kr(S)===b.type){n(v,b.sibling),w=i(b,_.props),il(w,_),w.return=v,v=w;break e}n(v,b);break}else e(v,b);b=b.sibling}_.type===Aa?(w=Br(_.props.children,v.mode,w,_.key),w.return=v,v=w):(w=zu(_.type,_.key,_.props,null,v.mode,w),il(w,_),w.return=v,v=w)}return a(v);case hl:e:{for(S=_.key;b!==null;){if(b.key===S)if(b.tag===4&&b.stateNode.containerInfo===_.containerInfo&&b.stateNode.implementation===_.implementation){n(v,b.sibling),w=i(b,_.children||[]),w.return=v,v=w;break e}else{n(v,b);break}else e(v,b);b=b.sibling}w=Zf(_,v.mode,w),w.return=v,v=w}return a(v);case Ei:return _=kr(_),x(v,b,_,w)}if(fl(_))return m(v,b,_,w);if(tl(_)){if(S=tl(_),typeof S!="function")throw Error(G(150));return _=S.call(_),y(v,b,_,w)}if(typeof _.then=="function")return x(v,b,ou(_),w);if(_.$$typeof===Ks)return x(v,b,au(v,_),w);lu(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint"?(_=""+_,b!==null&&b.tag===6?(n(v,b.sibling),w=i(b,_),w.return=v,v=w):(n(v,b),w=Qf(_,v.mode,w),w.return=v,v=w),a(v)):n(v,b)}return function(v,b,_,w){try{Gl=0;var S=x(v,b,_,w);return Qa=null,S}catch(E){if(E===Oo||E===kh)throw E;var T=bn(29,E,null,v.mode);return T.lanes=w,T.return=v,T}finally{}}}var Gr=LS(!0),VS=LS(!1),Ai=!1;function Ny(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ui(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Gi(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,je&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,e=pd(t),MS(t,null,n),e}return Ah(t,s,e,n),pd(t)}function Tl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,sS(t,n)}}function ep(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?i=r=a:r=r.next=a,n=n.next}while(n!==null);r===null?i=r=e:r=r.next=e}else i=r=e;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,callbacks:s.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var Mm=!1;function El(){if(Mm){var t=Xa;if(t!==null)throw t}}function Al(t,e,n,s){Mm=!1;var i=t.updateQueue;Ai=!1;var r=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?r=c:a.next=c,a=l;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(r!==null){var d=i.baseState;a=0,u=c=l=null,o=r;do{var h=o.lane&-536870913,p=h!==o.lane;if(p?(Ee&h)===h:(s&h)===h){h!==0&&h===oo&&(Mm=!0),u!==null&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=t,y=o;h=e;var x=n;switch(y.tag){case 1:if(m=y.payload,typeof m=="function"){d=m.call(x,d,h);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,h=typeof m=="function"?m.call(x,d,h):m,h==null)break e;d=et({},d,h);break e;case 2:Ai=!0}}h=o.callback,h!==null&&(t.flags|=64,p&&(t.flags|=8192),p=i.callbacks,p===null?i.callbacks=[h]:p.push(h))}else p={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=p,l=d):u=u.next=p,a|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;p=o,o=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,r===null&&(i.shared.lanes=0),nr|=a,t.lanes=a,t.memoizedState=d}}function zS(t,e){if(typeof t!="function")throw Error(G(191,t));t.call(e)}function FS(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)zS(n[t],e)}var lo=Ds(null),vd=Ds(0);function Hb(t,e){t=ai,We(vd,t),We(lo,e),ai=t|e.baseLanes}function Rm(){We(vd,ai),We(lo,lo.current)}function My(){ai=vd.current,kt(lo),kt(vd)}var Rn=Ds(null),Hn=null;function Ri(t){var e=t.alternate;We(ut,ut.current&1),We(Rn,t),Hn===null&&(e===null||lo.current!==null||e.memoizedState!==null)&&(Hn=t)}function Dm(t){We(ut,ut.current),We(Rn,t),Hn===null&&(Hn=t)}function HS(t){t.tag===22?(We(ut,ut.current),We(Rn,t),Hn===null&&(Hn=t)):Di()}function Di(){We(ut,ut.current),We(Rn,Rn.current)}function gn(t){kt(Rn),Hn===t&&(Hn=null),kt(ut)}var ut=Ds(0);function bd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Qm(n)||Zm(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var si=0,xe=null,He=null,mt=null,xd=!1,Za=!1,qr=!1,_d=0,ql=0,Ja=null,AD=0;function it(){throw Error(G(321))}function Ry(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Mn(t[n],e[n]))return!1;return!0}function Dy(t,e,n,s,i,r){return si=r,xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,pe.H=t===null||t.memoizedState===null?bC:Uy,qr=!1,r=n(s,i),qr=!1,Za&&(r=GS(e,n,s,i)),US(t),r}function US(t){pe.H=Wl;var e=He!==null&&He.next!==null;if(si=0,mt=He=xe=null,xd=!1,ql=0,Ja=null,e)throw Error(G(300));t===null||vt||(t=t.dependencies,t!==null&&gd(t)&&(vt=!0))}function GS(t,e,n,s){xe=t;var i=0;do{if(Za&&(Ja=null),ql=0,Za=!1,25<=i)throw Error(G(301));if(i+=1,mt=He=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}pe.H=xC,r=e(n,s)}while(Za);return r}function kD(){var t=pe.H,e=t.useState()[0];return e=typeof e.then=="function"?bc(e):e,t=t.useState()[0],(He!==null?He.memoizedState:null)!==t&&(xe.flags|=1024),e}function Oy(){var t=_d!==0;return _d=0,t}function jy(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Py(t){if(xd){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}xd=!1}si=0,mt=He=xe=null,Za=!1,ql=_d=0,Ja=null}function qt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?xe.memoizedState=mt=t:mt=mt.next=t,mt}function dt(){if(He===null){var t=xe.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=mt===null?xe.memoizedState:mt.next;if(e!==null)mt=e,He=t;else{if(t===null)throw xe.alternate===null?Error(G(467)):Error(G(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},mt===null?xe.memoizedState=mt=t:mt=mt.next=t}return mt}function Nh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bc(t){var e=ql;return ql+=1,Ja===null&&(Ja=[]),t=BS(Ja,t,e),e=xe,(mt===null?e.memoizedState:mt.next)===null&&(e=e.alternate,pe.H=e===null||e.memoizedState===null?bC:Uy),t}function Mh(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return bc(t);if(t.$$typeof===Ks)return It(t)}throw Error(G(438,String(t)))}function Iy(t){var e=null,n=xe.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var s=xe.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(e={data:s.data.map(function(i){return i.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Nh(),xe.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),s=0;s<t;s++)n[s]=fR;return e.index++,n}function ii(t,e){return typeof e=="function"?e(t):e}function Hu(t){var e=dt();return By(e,He,t)}function By(t,e,n){var s=t.queue;if(s===null)throw Error(G(311));s.lastRenderedReducer=n;var i=t.baseQueue,r=s.pending;if(r!==null){if(i!==null){var a=i.next;i.next=r.next,r.next=a}e.baseQueue=i=r,s.pending=null}if(r=t.baseState,i===null)t.memoizedState=r;else{e=i.next;var o=a=null,l=null,c=e,u=!1;do{var d=c.lane&-536870913;if(d!==c.lane?(Ee&d)===d:(si&d)===d){var h=c.revertLane;if(h===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===oo&&(u=!0);else if((si&h)===h){c=c.next,h===oo&&(u=!0);continue}else d={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=d,a=r):l=l.next=d,xe.lanes|=h,nr|=h;d=c.action,qr&&n(r,d),r=c.hasEagerState?c.eagerState:n(r,d)}else h={lane:d,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=h,a=r):l=l.next=h,xe.lanes|=d,nr|=d;c=c.next}while(c!==null&&c!==e);if(l===null?a=r:l.next=o,!Mn(r,t.memoizedState)&&(vt=!0,u&&(n=Xa,n!==null)))throw n;t.memoizedState=r,t.baseState=a,t.baseQueue=l,s.lastRenderedState=r}return i===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function tp(t){var e=dt(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var s=n.dispatch,i=n.pending,r=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do r=t(r,a.action),a=a.next;while(a!==i);Mn(r,e.memoizedState)||(vt=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,s]}function qS(t,e,n){var s=xe,i=dt(),r=Ae;if(r){if(n===void 0)throw Error(G(407));n=n()}else n=e();var a=!Mn((He||i).memoizedState,n);if(a&&(i.memoizedState=n,vt=!0),i=i.queue,Ly(YS.bind(null,s,i,t),[t]),i.getSnapshot!==e||a||mt!==null&&mt.memoizedState.tag&1){if(s.flags|=2048,co(9,{destroy:void 0},$S.bind(null,s,i,n,e),null),qe===null)throw Error(G(349));r||si&127||WS(s,e,n)}return n}function WS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=xe.updateQueue,e===null?(e=Nh(),xe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $S(t,e,n,s){e.value=n,e.getSnapshot=s,KS(e)&&XS(t)}function YS(t,e,n){return n(function(){KS(e)&&XS(t)})}function KS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Mn(t,n)}catch{return!0}}function XS(t){var e=aa(t,2);e!==null&&cn(e,t,2)}function Om(t){var e=qt();if(typeof t=="function"){var n=t;if(t=n(),qr){Pi(!0);try{n()}finally{Pi(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:t},e}function QS(t,e,n,s){return t.baseState=n,By(t,He,typeof s=="function"?s:ii)}function ND(t,e,n,s,i){if(Dh(t))throw Error(G(485));if(t=e.action,t!==null){var r={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){r.listeners.push(a)}};pe.T!==null?n(!0):r.isTransition=!1,s(r),n=e.pending,n===null?(r.next=e.pending=r,ZS(e,r)):(r.next=n.next,e.pending=n.next=r)}}function ZS(t,e){var n=e.action,s=e.payload,i=t.state;if(e.isTransition){var r=pe.T,a={};pe.T=a;try{var o=n(i,s),l=pe.S;l!==null&&l(a,o),Ub(t,e,o)}catch(c){jm(t,e,c)}finally{r!==null&&a.types!==null&&(r.types=a.types),pe.T=r}}else try{r=n(i,s),Ub(t,e,r)}catch(c){jm(t,e,c)}}function Ub(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){Gb(t,e,s)},function(s){return jm(t,e,s)}):Gb(t,e,n)}function Gb(t,e,n){e.status="fulfilled",e.value=n,JS(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,ZS(t,n)))}function jm(t,e,n){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do e.status="rejected",e.reason=n,JS(e),e=e.next;while(e!==s)}t.action=null}function JS(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function eC(t,e){return e}function qb(t,e){if(Ae){var n=qe.formState;if(n!==null){e:{var s=xe;if(Ae){if(Qe){t:{for(var i=Qe,r=Vn;i.nodeType!==8;){if(!r){i=null;break t}if(i=Un(i.nextSibling),i===null){i=null;break t}}r=i.data,i=r==="F!"||r==="F"?i:null}if(i){Qe=Un(i.nextSibling),s=i.data==="F!";break e}}er(s)}s=!1}s&&(e=n[0])}}return n=qt(),n.memoizedState=n.baseState=e,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:eC,lastRenderedState:e},n.queue=s,n=gC.bind(null,xe,s),s.dispatch=n,s=Om(!1),r=Hy.bind(null,xe,!1,s.queue),s=qt(),i={state:e,dispatch:null,action:t,pending:null},s.queue=i,n=ND.bind(null,xe,i,r,n),i.dispatch=n,s.memoizedState=t,[e,n,!1]}function Wb(t){var e=dt();return tC(e,He,t)}function tC(t,e,n){if(e=By(t,e,eC)[0],t=Hu(ii)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var s=bc(e)}catch(a){throw a===Oo?kh:a}else s=e;e=dt();var i=e.queue,r=i.dispatch;return n!==e.memoizedState&&(xe.flags|=2048,co(9,{destroy:void 0},MD.bind(null,i,n),null)),[s,r,t]}function MD(t,e){t.action=e}function $b(t){var e=dt(),n=He;if(n!==null)return tC(e,n,t);dt(),e=e.memoizedState,n=dt();var s=n.queue.dispatch;return n.memoizedState=t,[e,s,!1]}function co(t,e,n,s){return t={tag:t,create:n,deps:s,inst:e,next:null},e=xe.updateQueue,e===null&&(e=Nh(),xe.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function nC(){return dt().memoizedState}function Uu(t,e,n,s){var i=qt();xe.flags|=t,i.memoizedState=co(1|e,{destroy:void 0},n,s===void 0?null:s)}function Rh(t,e,n,s){var i=dt();s=s===void 0?null:s;var r=i.memoizedState.inst;He!==null&&s!==null&&Ry(s,He.memoizedState.deps)?i.memoizedState=co(e,r,n,s):(xe.flags|=t,i.memoizedState=co(1|e,r,n,s))}function Yb(t,e){Uu(8390656,8,t,e)}function Ly(t,e){Rh(2048,8,t,e)}function RD(t){xe.flags|=4;var e=xe.updateQueue;if(e===null)e=Nh(),xe.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function sC(t){var e=dt().memoizedState;return RD({ref:e,nextImpl:t}),function(){if(je&2)throw Error(G(440));return e.impl.apply(void 0,arguments)}}function iC(t,e){return Rh(4,2,t,e)}function rC(t,e){return Rh(4,4,t,e)}function aC(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function oC(t,e,n){n=n!=null?n.concat([t]):null,Rh(4,4,aC.bind(null,e,t),n)}function Vy(){}function lC(t,e){var n=dt();e=e===void 0?null:e;var s=n.memoizedState;return e!==null&&Ry(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function cC(t,e){var n=dt();e=e===void 0?null:e;var s=n.memoizedState;if(e!==null&&Ry(e,s[1]))return s[0];if(s=t(),qr){Pi(!0);try{t()}finally{Pi(!1)}}return n.memoizedState=[s,e],s}function zy(t,e,n){return n===void 0||si&1073741824&&!(Ee&261930)?t.memoizedState=e:(t.memoizedState=n,t=QC(),xe.lanes|=t,nr|=t,n)}function uC(t,e,n,s){return Mn(n,e)?n:lo.current!==null?(t=zy(t,n,s),Mn(t,e)||(vt=!0),t):!(si&42)||si&1073741824&&!(Ee&261930)?(vt=!0,t.memoizedState=n):(t=QC(),xe.lanes|=t,nr|=t,e)}function dC(t,e,n,s,i){var r=Pe.p;Pe.p=r!==0&&8>r?r:8;var a=pe.T,o={};pe.T=o,Hy(t,!1,e,n);try{var l=i(),c=pe.S;if(c!==null&&c(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=ED(l,s);kl(t,e,u,An(t))}else kl(t,e,s,An(t))}catch(d){kl(t,e,{then:function(){},status:"rejected",reason:d},An())}finally{Pe.p=r,a!==null&&o.types!==null&&(a.types=o.types),pe.T=a}}function DD(){}function Pm(t,e,n,s){if(t.tag!==5)throw Error(G(476));var i=hC(t).queue;dC(t,i,e,Ir,n===null?DD:function(){return fC(t),n(s)})}function hC(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Ir,baseState:Ir,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:Ir},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ii,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function fC(t){var e=hC(t);e.next===null&&(e=t.alternate.memoizedState),kl(t,e.next.queue,{},An())}function Fy(){return It(Kl)}function pC(){return dt().memoizedState}function mC(){return dt().memoizedState}function OD(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=An();t=Ui(n);var s=Gi(e,t,n);s!==null&&(cn(s,e,n),Tl(s,e,n)),e={cache:Ey()},t.payload=e;return}e=e.return}}function jD(t,e,n){var s=An();n={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Dh(t)?yC(e,n):(n=wy(t,e,n,s),n!==null&&(cn(n,t,s),vC(n,e,s)))}function gC(t,e,n){var s=An();kl(t,e,n,s)}function kl(t,e,n,s){var i={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Dh(t))yC(e,i);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,o=r(a,n);if(i.hasEagerState=!0,i.eagerState=o,Mn(o,a))return Ah(t,e,i,0),qe===null&&Eh(),!1}catch{}finally{}if(n=wy(t,e,i,s),n!==null)return cn(n,t,s),vC(n,e,s),!0}return!1}function Hy(t,e,n,s){if(s={lane:2,revertLane:Qy(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Dh(t)){if(e)throw Error(G(479))}else e=wy(t,n,s,2),e!==null&&cn(e,t,2)}function Dh(t){var e=t.alternate;return t===xe||e!==null&&e===xe}function yC(t,e){Za=xd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function vC(t,e,n){if(n&4194048){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,sS(t,n)}}var Wl={readContext:It,use:Mh,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useLayoutEffect:it,useInsertionEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useSyncExternalStore:it,useId:it,useHostTransitionStatus:it,useFormState:it,useActionState:it,useOptimistic:it,useMemoCache:it,useCacheRefresh:it};Wl.useEffectEvent=it;var bC={readContext:It,use:Mh,useCallback:function(t,e){return qt().memoizedState=[t,e===void 0?null:e],t},useContext:It,useEffect:Yb,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Uu(4194308,4,aC.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Uu(4194308,4,t,e)},useInsertionEffect:function(t,e){Uu(4,2,t,e)},useMemo:function(t,e){var n=qt();e=e===void 0?null:e;var s=t();if(qr){Pi(!0);try{t()}finally{Pi(!1)}}return n.memoizedState=[s,e],s},useReducer:function(t,e,n){var s=qt();if(n!==void 0){var i=n(e);if(qr){Pi(!0);try{n(e)}finally{Pi(!1)}}}else i=e;return s.memoizedState=s.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},s.queue=t,t=t.dispatch=jD.bind(null,xe,t),[s.memoizedState,t]},useRef:function(t){var e=qt();return t={current:t},e.memoizedState=t},useState:function(t){t=Om(t);var e=t.queue,n=gC.bind(null,xe,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Vy,useDeferredValue:function(t,e){var n=qt();return zy(n,t,e)},useTransition:function(){var t=Om(!1);return t=dC.bind(null,xe,t.queue,!0,!1),qt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var s=xe,i=qt();if(Ae){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),qe===null)throw Error(G(349));Ee&127||WS(s,e,n)}i.memoizedState=n;var r={value:n,getSnapshot:e};return i.queue=r,Yb(YS.bind(null,s,r,t),[t]),s.flags|=2048,co(9,{destroy:void 0},$S.bind(null,s,r,n,e),null),n},useId:function(){var t=qt(),e=qe.identifierPrefix;if(Ae){var n=ys,s=gs;n=(s&~(1<<32-En(s)-1)).toString(32)+n,e="_"+e+"R_"+n,n=_d++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=AD++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:Fy,useFormState:qb,useActionState:qb,useOptimistic:function(t){var e=qt();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Hy.bind(null,xe,!0,n),n.dispatch=e,[t,e]},useMemoCache:Iy,useCacheRefresh:function(){return qt().memoizedState=OD.bind(null,xe)},useEffectEvent:function(t){var e=qt(),n={impl:t};return e.memoizedState=n,function(){if(je&2)throw Error(G(440));return n.impl.apply(void 0,arguments)}}},Uy={readContext:It,use:Mh,useCallback:lC,useContext:It,useEffect:Ly,useImperativeHandle:oC,useInsertionEffect:iC,useLayoutEffect:rC,useMemo:cC,useReducer:Hu,useRef:nC,useState:function(){return Hu(ii)},useDebugValue:Vy,useDeferredValue:function(t,e){var n=dt();return uC(n,He.memoizedState,t,e)},useTransition:function(){var t=Hu(ii)[0],e=dt().memoizedState;return[typeof t=="boolean"?t:bc(t),e]},useSyncExternalStore:qS,useId:pC,useHostTransitionStatus:Fy,useFormState:Wb,useActionState:Wb,useOptimistic:function(t,e){var n=dt();return QS(n,He,t,e)},useMemoCache:Iy,useCacheRefresh:mC};Uy.useEffectEvent=sC;var xC={readContext:It,use:Mh,useCallback:lC,useContext:It,useEffect:Ly,useImperativeHandle:oC,useInsertionEffect:iC,useLayoutEffect:rC,useMemo:cC,useReducer:tp,useRef:nC,useState:function(){return tp(ii)},useDebugValue:Vy,useDeferredValue:function(t,e){var n=dt();return He===null?zy(n,t,e):uC(n,He.memoizedState,t,e)},useTransition:function(){var t=tp(ii)[0],e=dt().memoizedState;return[typeof t=="boolean"?t:bc(t),e]},useSyncExternalStore:qS,useId:pC,useHostTransitionStatus:Fy,useFormState:$b,useActionState:$b,useOptimistic:function(t,e){var n=dt();return He!==null?QS(n,He,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:Iy,useCacheRefresh:mC};xC.useEffectEvent=sC;function np(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:et({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Im={enqueueSetState:function(t,e,n){t=t._reactInternals;var s=An(),i=Ui(s);i.payload=e,n!=null&&(i.callback=n),e=Gi(t,i,s),e!==null&&(cn(e,t,s),Tl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=An(),i=Ui(s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Gi(t,i,s),e!==null&&(cn(e,t,s),Tl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=An(),s=Ui(n);s.tag=2,e!=null&&(s.callback=e),e=Gi(t,s,n),e!==null&&(cn(e,t,n),Tl(e,t,n))}};function Kb(t,e,n,s,i,r,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,r,a):e.prototype&&e.prototype.isPureReactComponent?!Fl(n,s)||!Fl(i,r):!0}function Xb(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Im.enqueueReplaceState(e,e.state,null)}function Wr(t,e){var n=e;if("ref"in e){n={};for(var s in e)s!=="ref"&&(n[s]=e[s])}if(t=t.defaultProps){n===e&&(n=et({},n));for(var i in t)n[i]===void 0&&(n[i]=t[i])}return n}function _C(t){fd(t)}function wC(t){console.error(t)}function SC(t){fd(t)}function wd(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(s){setTimeout(function(){throw s})}}function Qb(t,e,n){try{var s=t.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Bm(t,e,n){return n=Ui(n),n.tag=3,n.payload={element:null},n.callback=function(){wd(t,e)},n}function CC(t){return t=Ui(t),t.tag=3,t}function TC(t,e,n,s){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=s.value;t.payload=function(){return i(r)},t.callback=function(){Qb(e,n,s)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){Qb(e,n,s),typeof i!="function"&&(qi===null?qi=new Set([this]):qi.add(this));var o=s.stack;this.componentDidCatch(s.value,{componentStack:o!==null?o:""})})}function PD(t,e,n,s,i){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(e=n.alternate,e!==null&&Do(e,n,i,!0),n=Rn.current,n!==null){switch(n.tag){case 31:case 13:return Hn===null?Ad():n.alternate===null&&at===0&&(at=3),n.flags&=-257,n.flags|=65536,n.lanes=i,s===yd?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([s]):e.add(s),fp(t,s,i)),!1;case 22:return n.flags|=65536,s===yd?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([s]):n.add(s)),fp(t,s,i)),!1}throw Error(G(435,n.tag))}return fp(t,s,i),Ad(),!1}if(Ae)return e=Rn.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=i,s!==Cm&&(t=Error(G(422),{cause:s}),Ul(Ln(t,n)))):(s!==Cm&&(e=Error(G(423),{cause:s}),Ul(Ln(e,n))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,s=Ln(s,n),i=Bm(t.stateNode,s,i),ep(t,i),at!==4&&(at=2)),!1;var r=Error(G(520),{cause:s});if(r=Ln(r,n),Rl===null?Rl=[r]:Rl.push(r),at!==4&&(at=2),e===null)return!0;s=Ln(s,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=i&-i,n.lanes|=t,t=Bm(n.stateNode,s,t),ep(n,t),!1;case 1:if(e=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(qi===null||!qi.has(r))))return n.flags|=65536,i&=-i,n.lanes|=i,i=CC(i),TC(i,t,n,s),ep(n,i),!1}n=n.return}while(n!==null);return!1}var Gy=Error(G(461)),vt=!1;function Ot(t,e,n,s){e.child=t===null?VS(e,null,n,s):Gr(e,t.child,n,s)}function Zb(t,e,n,s,i){n=n.render;var r=e.ref;if("ref"in s){var a={};for(var o in s)o!=="ref"&&(a[o]=s[o])}else a=s;return Ur(e),s=Dy(t,e,n,a,r,i),o=Oy(),t!==null&&!vt?(jy(t,e,i),ri(t,e,i)):(Ae&&o&&Cy(e),e.flags|=1,Ot(t,e,s,i),e.child)}function Jb(t,e,n,s,i){if(t===null){var r=n.type;return typeof r=="function"&&!Sy(r)&&r.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=r,EC(t,e,r,s,i)):(t=zu(n.type,null,s,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!qy(t,i)){var a=r.memoizedProps;if(n=n.compare,n=n!==null?n:Fl,n(a,s)&&t.ref===e.ref)return ri(t,e,i)}return e.flags|=1,t=Zs(r,s),t.ref=e.ref,t.return=e,e.child=t}function EC(t,e,n,s,i){if(t!==null){var r=t.memoizedProps;if(Fl(r,s)&&t.ref===e.ref)if(vt=!1,e.pendingProps=s=r,qy(t,i))t.flags&131072&&(vt=!0);else return e.lanes=t.lanes,ri(t,e,i)}return Lm(t,e,n,s,i)}function AC(t,e,n,s){var i=s.children,r=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if(e.flags&128){if(r=r!==null?r.baseLanes|n:n,t!==null){for(s=e.child=t.child,i=0;s!==null;)i=i|s.lanes|s.childLanes,s=s.sibling;s=i&~r}else s=0,e.child=null;return ex(t,e,r,n,s)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Fu(e,r!==null?r.cachePool:null),r!==null?Hb(e,r):Rm(),HS(e);else return s=e.lanes=536870912,ex(t,e,r!==null?r.baseLanes|n:n,n,s)}else r!==null?(Fu(e,r.cachePool),Hb(e,r),Di(),e.memoizedState=null):(t!==null&&Fu(e,null),Rm(),Di());return Ot(t,e,i,n),e.child}function ml(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function ex(t,e,n,s,i){var r=Ay();return r=r===null?null:{parent:yt._currentValue,pool:r},e.memoizedState={baseLanes:n,cachePool:r},t!==null&&Fu(e,null),Rm(),HS(e),t!==null&&Do(t,e,s,!0),e.childLanes=i,null}function Gu(t,e){return e=Sd({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function tx(t,e,n){return Gr(e,t.child,null,n),t=Gu(e,e.pendingProps),t.flags|=2,gn(e),e.memoizedState=null,t}function ID(t,e,n){var s=e.pendingProps,i=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(Ae){if(s.mode==="hidden")return t=Gu(e,s),e.lanes=536870912,ml(null,t);if(Dm(e),(t=Qe)?(t=bT(t,Vn),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Ji!==null?{id:gs,overflow:ys}:null,retryLane:536870912,hydrationErrors:null},n=DS(t),n.return=e,e.child=n,Pt=e,Qe=null)):t=null,t===null)throw er(e);return e.lanes=536870912,null}return Gu(e,s)}var r=t.memoizedState;if(r!==null){var a=r.dehydrated;if(Dm(e),i)if(e.flags&256)e.flags&=-257,e=tx(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(G(558));else if(vt||Do(t,e,n,!1),i=(n&t.childLanes)!==0,vt||i){if(s=qe,s!==null&&(a=iS(s,n),a!==0&&a!==r.retryLane))throw r.retryLane=a,aa(t,a),cn(s,t,a),Gy;Ad(),e=tx(t,e,n)}else t=r.treeContext,Qe=Un(a.nextSibling),Pt=e,Ae=!0,Hi=null,Vn=!1,t!==null&&jS(e,t),e=Gu(e,s),e.flags|=4096;return e}return t=Zs(t.child,{mode:s.mode,children:s.children}),t.ref=e.ref,e.child=t,t.return=e,t}function qu(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(G(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Lm(t,e,n,s,i){return Ur(e),n=Dy(t,e,n,s,void 0,i),s=Oy(),t!==null&&!vt?(jy(t,e,i),ri(t,e,i)):(Ae&&s&&Cy(e),e.flags|=1,Ot(t,e,n,i),e.child)}function nx(t,e,n,s,i,r){return Ur(e),e.updateQueue=null,n=GS(e,s,n,i),US(t),s=Oy(),t!==null&&!vt?(jy(t,e,r),ri(t,e,r)):(Ae&&s&&Cy(e),e.flags|=1,Ot(t,e,n,r),e.child)}function sx(t,e,n,s,i){if(Ur(e),e.stateNode===null){var r=Pa,a=n.contextType;typeof a=="object"&&a!==null&&(r=It(a)),r=new n(s,r),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Im,e.stateNode=r,r._reactInternals=e,r=e.stateNode,r.props=s,r.state=e.memoizedState,r.refs={},Ny(e),a=n.contextType,r.context=typeof a=="object"&&a!==null?It(a):Pa,r.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(np(e,n,a,s),r.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(a=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),a!==r.state&&Im.enqueueReplaceState(r,r.state,null),Al(e,s,r,i),El(),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308),s=!0}else if(t===null){r=e.stateNode;var o=e.memoizedProps,l=Wr(n,o);r.props=l;var c=r.context,u=n.contextType;a=Pa,typeof u=="object"&&u!==null&&(a=It(u));var d=n.getDerivedStateFromProps;u=typeof d=="function"||typeof r.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,u||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(o||c!==a)&&Xb(e,r,s,a),Ai=!1;var h=e.memoizedState;r.state=h,Al(e,s,r,i),El(),c=e.memoizedState,o||h!==c||Ai?(typeof d=="function"&&(np(e,n,d,s),c=e.memoizedState),(l=Ai||Kb(e,n,l,s,h,c,a))?(u||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),r.props=s,r.state=c,r.context=a,s=l):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{r=e.stateNode,Nm(t,e),a=e.memoizedProps,u=Wr(n,a),r.props=u,d=e.pendingProps,h=r.context,c=n.contextType,l=Pa,typeof c=="object"&&c!==null&&(l=It(c)),o=n.getDerivedStateFromProps,(c=typeof o=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==d||h!==l)&&Xb(e,r,s,l),Ai=!1,h=e.memoizedState,r.state=h,Al(e,s,r,i),El();var p=e.memoizedState;a!==d||h!==p||Ai||t!==null&&t.dependencies!==null&&gd(t.dependencies)?(typeof o=="function"&&(np(e,n,o,s),p=e.memoizedState),(u=Ai||Kb(e,n,u,s,h,p,l)||t!==null&&t.dependencies!==null&&gd(t.dependencies))?(c||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(s,p,l),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(s,p,l)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=p),r.props=s,r.state=p,r.context=l,s=u):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),s=!1)}return r=s,qu(t,e),s=(e.flags&128)!==0,r||s?(r=e.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:r.render(),e.flags|=1,t!==null&&s?(e.child=Gr(e,t.child,null,i),e.child=Gr(e,null,n,i)):Ot(t,e,n,i),e.memoizedState=r.state,t=e.child):t=ri(t,e,i),t}function ix(t,e,n,s){return Hr(),e.flags|=256,Ot(t,e,n,s),e.child}var sp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ip(t){return{baseLanes:t,cachePool:IS()}}function rp(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=xn),t}function kC(t,e,n){var s=e.pendingProps,i=!1,r=(e.flags&128)!==0,a;if((a=r)||(a=t!==null&&t.memoizedState===null?!1:(ut.current&2)!==0),a&&(i=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(Ae){if(i?Ri(e):Di(),(t=Qe)?(t=bT(t,Vn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Ji!==null?{id:gs,overflow:ys}:null,retryLane:536870912,hydrationErrors:null},n=DS(t),n.return=e,e.child=n,Pt=e,Qe=null)):t=null,t===null)throw er(e);return Zm(t)?e.lanes=32:e.lanes=536870912,null}var o=s.children;return s=s.fallback,i?(Di(),i=e.mode,o=Sd({mode:"hidden",children:o},i),s=Br(s,i,n,null),o.return=e,s.return=e,o.sibling=s,e.child=o,s=e.child,s.memoizedState=ip(n),s.childLanes=rp(t,a,n),e.memoizedState=sp,ml(null,s)):(Ri(e),Vm(e,o))}var l=t.memoizedState;if(l!==null&&(o=l.dehydrated,o!==null)){if(r)e.flags&256?(Ri(e),e.flags&=-257,e=ap(t,e,n)):e.memoizedState!==null?(Di(),e.child=t.child,e.flags|=128,e=null):(Di(),o=s.fallback,i=e.mode,s=Sd({mode:"visible",children:s.children},i),o=Br(o,i,n,null),o.flags|=2,s.return=e,o.return=e,s.sibling=o,e.child=s,Gr(e,t.child,null,n),s=e.child,s.memoizedState=ip(n),s.childLanes=rp(t,a,n),e.memoizedState=sp,e=ml(null,s));else if(Ri(e),Zm(o)){if(a=o.nextSibling&&o.nextSibling.dataset,a)var c=a.dgst;a=c,s=Error(G(419)),s.stack="",s.digest=a,Ul({value:s,source:null,stack:null}),e=ap(t,e,n)}else if(vt||Do(t,e,n,!1),a=(n&t.childLanes)!==0,vt||a){if(a=qe,a!==null&&(s=iS(a,n),s!==0&&s!==l.retryLane))throw l.retryLane=s,aa(t,s),cn(a,t,s),Gy;Qm(o)||Ad(),e=ap(t,e,n)}else Qm(o)?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,Qe=Un(o.nextSibling),Pt=e,Ae=!0,Hi=null,Vn=!1,t!==null&&jS(e,t),e=Vm(e,s.children),e.flags|=4096);return e}return i?(Di(),o=s.fallback,i=e.mode,l=t.child,c=l.sibling,s=Zs(l,{mode:"hidden",children:s.children}),s.subtreeFlags=l.subtreeFlags&65011712,c!==null?o=Zs(c,o):(o=Br(o,i,n,null),o.flags|=2),o.return=e,s.return=e,s.sibling=o,e.child=s,ml(null,s),s=e.child,o=t.child.memoizedState,o===null?o=ip(n):(i=o.cachePool,i!==null?(l=yt._currentValue,i=i.parent!==l?{parent:l,pool:l}:i):i=IS(),o={baseLanes:o.baseLanes|n,cachePool:i}),s.memoizedState=o,s.childLanes=rp(t,a,n),e.memoizedState=sp,ml(t.child,s)):(Ri(e),n=t.child,t=n.sibling,n=Zs(n,{mode:"visible",children:s.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function Vm(t,e){return e=Sd({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Sd(t,e){return t=bn(22,t,null,e),t.lanes=0,t}function ap(t,e,n){return Gr(e,t.child,null,n),t=Vm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rx(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Em(t.return,e,n)}function op(t,e,n,s,i,r){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i,treeForkCount:r}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=i,a.treeForkCount=r)}function NC(t,e,n){var s=e.pendingProps,i=s.revealOrder,r=s.tail;s=s.children;var a=ut.current,o=(a&2)!==0;if(o?(a=a&1|2,e.flags|=128):a&=1,We(ut,a),Ot(t,e,s,n),s=Ae?Hl:0,!o&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rx(t,n,e);else if(t.tag===19)rx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&bd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),op(e,!1,i,n,r,s);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&bd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}op(e,!0,n,null,r,s);break;case"together":op(e,!1,null,null,void 0,s);break;default:e.memoizedState=null}return e.child}function ri(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),nr|=e.lanes,!(n&e.childLanes))if(t!==null){if(Do(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=Zs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Zs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function qy(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&gd(t)))}function BD(t,e,n){switch(e.tag){case 3:cd(e,e.stateNode.containerInfo),Mi(e,yt,t.memoizedState.cache),Hr();break;case 27:case 5:fm(e);break;case 4:cd(e,e.stateNode.containerInfo);break;case 10:Mi(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,Dm(e),null;break;case 13:var s=e.memoizedState;if(s!==null)return s.dehydrated!==null?(Ri(e),e.flags|=128,null):n&e.child.childLanes?kC(t,e,n):(Ri(e),t=ri(t,e,n),t!==null?t.sibling:null);Ri(e);break;case 19:var i=(t.flags&128)!==0;if(s=(n&e.childLanes)!==0,s||(Do(t,e,n,!1),s=(n&e.childLanes)!==0),i){if(s)return NC(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),We(ut,ut.current),s)break;return null;case 22:return e.lanes=0,AC(t,e,n,e.pendingProps);case 24:Mi(e,yt,t.memoizedState.cache)}return ri(t,e,n)}function MC(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)vt=!0;else{if(!qy(t,n)&&!(e.flags&128))return vt=!1,BD(t,e,n);vt=!!(t.flags&131072)}else vt=!1,Ae&&e.flags&1048576&&OS(e,Hl,e.index);switch(e.lanes=0,e.tag){case 16:e:{var s=e.pendingProps;if(t=kr(e.elementType),e.type=t,typeof t=="function")Sy(t)?(s=Wr(t,s),e.tag=1,e=sx(null,e,t,s,n)):(e.tag=0,e=Lm(null,e,t,s,n));else{if(t!=null){var i=t.$$typeof;if(i===cy){e.tag=11,e=Zb(null,e,t,s,n);break e}else if(i===uy){e.tag=14,e=Jb(null,e,t,s,n);break e}}throw e=dm(t)||t,Error(G(306,e,""))}}return e;case 0:return Lm(t,e,e.type,e.pendingProps,n);case 1:return s=e.type,i=Wr(s,e.pendingProps),sx(t,e,s,i,n);case 3:e:{if(cd(e,e.stateNode.containerInfo),t===null)throw Error(G(387));s=e.pendingProps;var r=e.memoizedState;i=r.element,Nm(t,e),Al(e,s,null,n);var a=e.memoizedState;if(s=a.cache,Mi(e,yt,s),s!==r.cache&&Am(e,[yt],n,!0),El(),s=a.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){e=ix(t,e,s,n);break e}else if(s!==i){i=Ln(Error(G(424)),e),Ul(i),e=ix(t,e,s,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Qe=Un(t.firstChild),Pt=e,Ae=!0,Hi=null,Vn=!0,n=VS(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Hr(),s===i){e=ri(t,e,n);break e}Ot(t,e,s,n)}e=e.child}return e;case 26:return qu(t,e),t===null?(n=Tx(e.type,null,e.pendingProps,null))?e.memoizedState=n:Ae||(n=e.type,t=e.pendingProps,s=Rd(Fi.current).createElement(n),s[jt]=e,s[hn]=t,Bt(s,n,t),At(s),e.stateNode=s):e.memoizedState=Tx(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return fm(e),t===null&&Ae&&(s=e.stateNode=xT(e.type,e.pendingProps,Fi.current),Pt=e,Vn=!0,i=Qe,fr(e.type)?(Jm=i,Qe=Un(s.firstChild)):Qe=i),Ot(t,e,e.pendingProps.children,n),qu(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Ae&&((i=s=Qe)&&(s=fO(s,e.type,e.pendingProps,Vn),s!==null?(e.stateNode=s,Pt=e,Qe=Un(s.firstChild),Vn=!1,i=!0):i=!1),i||er(e)),fm(e),i=e.type,r=e.pendingProps,a=t!==null?t.memoizedProps:null,s=r.children,Km(i,r)?s=null:a!==null&&Km(i,a)&&(e.flags|=32),e.memoizedState!==null&&(i=Dy(t,e,kD,null,null,n),Kl._currentValue=i),qu(t,e),Ot(t,e,s,n),e.child;case 6:return t===null&&Ae&&((t=n=Qe)&&(n=pO(n,e.pendingProps,Vn),n!==null?(e.stateNode=n,Pt=e,Qe=null,t=!0):t=!1),t||er(e)),null;case 13:return kC(t,e,n);case 4:return cd(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Gr(e,null,s,n):Ot(t,e,s,n),e.child;case 11:return Zb(t,e,e.type,e.pendingProps,n);case 7:return Ot(t,e,e.pendingProps,n),e.child;case 8:return Ot(t,e,e.pendingProps.children,n),e.child;case 12:return Ot(t,e,e.pendingProps.children,n),e.child;case 10:return s=e.pendingProps,Mi(e,e.type,s.value),Ot(t,e,s.children,n),e.child;case 9:return i=e.type._context,s=e.pendingProps.children,Ur(e),i=It(i),s=s(i),e.flags|=1,Ot(t,e,s,n),e.child;case 14:return Jb(t,e,e.type,e.pendingProps,n);case 15:return EC(t,e,e.type,e.pendingProps,n);case 19:return NC(t,e,n);case 31:return ID(t,e,n);case 22:return AC(t,e,n,e.pendingProps);case 24:return Ur(e),s=It(yt),t===null?(i=Ay(),i===null&&(i=qe,r=Ey(),i.pooledCache=r,r.refCount++,r!==null&&(i.pooledCacheLanes|=n),i=r),e.memoizedState={parent:s,cache:i},Ny(e),Mi(e,yt,i)):(t.lanes&n&&(Nm(t,e),Al(e,null,null,n),El()),i=t.memoizedState,r=e.memoizedState,i.parent!==s?(i={parent:s,cache:s},e.memoizedState=i,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=i),Mi(e,yt,s)):(s=r.cache,Mi(e,yt,s),s!==i.cache&&Am(e,[yt],n,!0))),Ot(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(G(156,e.tag))}function zs(t){t.flags|=4}function lp(t,e,n,s,i){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(i&335544128)===i)if(t.stateNode.complete)t.flags|=8192;else if(eT())t.flags|=8192;else throw Vr=yd,ky}else t.flags&=-16777217}function ax(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!ST(e))if(eT())t.flags|=8192;else throw Vr=yd,ky}function cu(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?tS():536870912,t.lanes|=e,uo|=e)}function rl(t,e){if(!Ae)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Xe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&65011712,s|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function LD(t,e,n){var s=e.pendingProps;switch(Ty(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xe(e),null;case 1:return Xe(e),null;case 3:return n=e.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),e.memoizedState.cache!==s&&(e.flags|=2048),Js(yt),io(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(fa(e)?zs(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jf())),Xe(e),null;case 26:var i=e.type,r=e.memoizedState;return t===null?(zs(e),r!==null?(Xe(e),ax(e,r)):(Xe(e),lp(e,i,null,s,n))):r?r!==t.memoizedState?(zs(e),Xe(e),ax(e,r)):(Xe(e),e.flags&=-16777217):(t=t.memoizedProps,t!==s&&zs(e),Xe(e),lp(e,i,t,s,n)),null;case 27:if(ud(e),n=Fi.current,i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&zs(e);else{if(!s){if(e.stateNode===null)throw Error(G(166));return Xe(e),null}t=xs.current,fa(e)?Pb(e):(t=xT(i,s,n),e.stateNode=t,zs(e))}return Xe(e),null;case 5:if(ud(e),i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&zs(e);else{if(!s){if(e.stateNode===null)throw Error(G(166));return Xe(e),null}if(r=xs.current,fa(e))Pb(e);else{var a=Rd(Fi.current);switch(r){case 1:r=a.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:r=a.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":r=a.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":r=a.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":r=a.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof s.is=="string"?a.createElement("select",{is:s.is}):a.createElement("select"),s.multiple?r.multiple=!0:s.size&&(r.size=s.size);break;default:r=typeof s.is=="string"?a.createElement(i,{is:s.is}):a.createElement(i)}}r[jt]=e,r[hn]=s;e:for(a=e.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}e.stateNode=r;e:switch(Bt(r,i,s),i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&zs(e)}}return Xe(e),lp(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==s&&zs(e);else{if(typeof s!="string"&&e.stateNode===null)throw Error(G(166));if(t=Fi.current,fa(e)){if(t=e.stateNode,n=e.memoizedProps,s=null,i=Pt,i!==null)switch(i.tag){case 27:case 5:s=i.memoizedProps}t[jt]=e,t=!!(t.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||gT(t.nodeValue,n)),t||er(e,!0)}else t=Rd(t).createTextNode(s),t[jt]=e,e.stateNode=t}return Xe(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(s=fa(e),n!==null){if(t===null){if(!s)throw Error(G(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(557));t[jt]=e}else Hr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xe(e),t=!1}else n=Jf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(gn(e),e):(gn(e),null);if(e.flags&128)throw Error(G(558))}return Xe(e),null;case 13:if(s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=fa(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(G(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(G(317));i[jt]=e}else Hr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xe(e),i=!1}else i=Jf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return e.flags&256?(gn(e),e):(gn(e),null)}return gn(e),e.flags&128?(e.lanes=n,e):(n=s!==null,t=t!==null&&t.memoizedState!==null,n&&(s=e.child,i=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(i=s.alternate.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==i&&(s.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),cu(e,e.updateQueue),Xe(e),null);case 4:return io(),t===null&&Zy(e.stateNode.containerInfo),Xe(e),null;case 10:return Js(e.type),Xe(e),null;case 19:if(kt(ut),s=e.memoizedState,s===null)return Xe(e),null;if(i=(e.flags&128)!==0,r=s.rendering,r===null)if(i)rl(s,!1);else{if(at!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(r=bd(t),r!==null){for(e.flags|=128,rl(s,!1),t=r.updateQueue,e.updateQueue=t,cu(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)RS(n,t),n=n.sibling;return We(ut,ut.current&1|2),Ae&&$s(e,s.treeForkCount),e.child}t=t.sibling}s.tail!==null&&Cn()>Td&&(e.flags|=128,i=!0,rl(s,!1),e.lanes=4194304)}else{if(!i)if(t=bd(r),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,cu(e,t),rl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!Ae)return Xe(e),null}else 2*Cn()-s.renderingStartTime>Td&&n!==536870912&&(e.flags|=128,i=!0,rl(s,!1),e.lanes=4194304);s.isBackwards?(r.sibling=e.child,e.child=r):(t=s.last,t!==null?t.sibling=r:e.child=r,s.last=r)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Cn(),t.sibling=null,n=ut.current,We(ut,i?n&1|2:n&1),Ae&&$s(e,s.treeForkCount),t):(Xe(e),null);case 22:case 23:return gn(e),My(),s=e.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(e.flags|=8192):s&&(e.flags|=8192),s?n&536870912&&!(e.flags&128)&&(Xe(e),e.subtreeFlags&6&&(e.flags|=8192)):Xe(e),n=e.updateQueue,n!==null&&cu(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),s=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),s!==n&&(e.flags|=2048),t!==null&&kt(Lr),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Js(yt),Xe(e),null;case 25:return null;case 30:return null}throw Error(G(156,e.tag))}function VD(t,e){switch(Ty(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Js(yt),io(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return ud(e),null;case 31:if(e.memoizedState!==null){if(gn(e),e.alternate===null)throw Error(G(340));Hr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(gn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));Hr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return kt(ut),null;case 4:return io(),null;case 10:return Js(e.type),null;case 22:case 23:return gn(e),My(),t!==null&&kt(Lr),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Js(yt),null;case 25:return null;default:return null}}function RC(t,e){switch(Ty(e),e.tag){case 3:Js(yt),io();break;case 26:case 27:case 5:ud(e);break;case 4:io();break;case 31:e.memoizedState!==null&&gn(e);break;case 13:gn(e);break;case 19:kt(ut);break;case 10:Js(e.type);break;case 22:case 23:gn(e),My(),t!==null&&kt(Lr);break;case 24:Js(yt)}}function xc(t,e){try{var n=e.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var i=s.next;n=i;do{if((n.tag&t)===t){s=void 0;var r=n.create,a=n.inst;s=r(),a.destroy=s}n=n.next}while(n!==i)}}catch(o){Ve(e,e.return,o)}}function tr(t,e,n){try{var s=e.updateQueue,i=s!==null?s.lastEffect:null;if(i!==null){var r=i.next;s=r;do{if((s.tag&t)===t){var a=s.inst,o=a.destroy;if(o!==void 0){a.destroy=void 0,i=e;var l=n,c=o;try{c()}catch(u){Ve(i,l,u)}}}s=s.next}while(s!==r)}}catch(u){Ve(e,e.return,u)}}function DC(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{FS(e,n)}catch(s){Ve(t,t.return,s)}}}function OC(t,e,n){n.props=Wr(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(s){Ve(t,e,s)}}function Nl(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof n=="function"?t.refCleanup=n(s):n.current=s}}catch(i){Ve(t,e,i)}}function vs(t,e){var n=t.ref,s=t.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(i){Ve(t,e,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){Ve(t,e,i)}else n.current=null}function jC(t){var e=t.type,n=t.memoizedProps,s=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(i){Ve(t,t.return,i)}}function cp(t,e,n){try{var s=t.stateNode;oO(s,t.type,n,e),s[hn]=e}catch(i){Ve(t,t.return,i)}}function PC(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&fr(t.type)||t.tag===4}function up(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||PC(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&fr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Xs));else if(s!==4&&(s===27&&fr(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(zm(t,e,n),t=t.sibling;t!==null;)zm(t,e,n),t=t.sibling}function Cd(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(s===27&&fr(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Cd(t,e,n),t=t.sibling;t!==null;)Cd(t,e,n),t=t.sibling}function IC(t){var e=t.stateNode,n=t.memoizedProps;try{for(var s=t.type,i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Bt(e,s,n),e[jt]=t,e[hn]=n}catch(r){Ve(t,t.return,r)}}var Ys=!1,gt=!1,dp=!1,ox=typeof WeakSet=="function"?WeakSet:Set,Et=null;function zD(t,e){if(t=t.containerInfo,$m=Pd,t=SS(t),xy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(o=a+i),d!==r||s!==0&&d.nodeType!==3||(l=a+s),d.nodeType===3&&(a+=d.nodeValue.length),(p=d.firstChild)!==null;)h=d,d=p;for(;;){if(d===t)break t;if(h===n&&++c===i&&(o=a),h===r&&++u===s&&(l=a),(p=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=p}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ym={focusedElem:t,selectionRange:n},Pd=!1,Et=e;Et!==null;)if(e=Et,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Et=t;else for(;Et!==null;){switch(e=Et,r=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)i=t[n],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&r!==null){t=void 0,n=e,i=r.memoizedProps,r=r.memoizedState,s=n.stateNode;try{var m=Wr(n.type,i);t=s.getSnapshotBeforeUpdate(m,r),s.__reactInternalSnapshotBeforeUpdate=t}catch(y){Ve(n,n.return,y)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Xm(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Xm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(G(163))}if(t=e.sibling,t!==null){t.return=e.return,Et=t;break}Et=e.return}}function BC(t,e,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:Hs(t,n),s&4&&xc(5,n);break;case 1:if(Hs(t,n),s&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){Ve(n,n.return,a)}else{var i=Wr(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){Ve(n,n.return,a)}}s&64&&DC(n),s&512&&Nl(n,n.return);break;case 3:if(Hs(t,n),s&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{FS(t,e)}catch(a){Ve(n,n.return,a)}}break;case 27:e===null&&s&4&&IC(n);case 26:case 5:Hs(t,n),e===null&&s&4&&jC(n),s&512&&Nl(n,n.return);break;case 12:Hs(t,n);break;case 31:Hs(t,n),s&4&&zC(t,n);break;case 13:Hs(t,n),s&4&&FC(t,n),s&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=KD.bind(null,n),mO(t,n))));break;case 22:if(s=n.memoizedState!==null||Ys,!s){e=e!==null&&e.memoizedState!==null||gt,i=Ys;var r=gt;Ys=s,(gt=e)&&!r?qs(t,n,(n.subtreeFlags&8772)!==0):Hs(t,n),Ys=i,gt=r}break;case 30:break;default:Hs(t,n)}}function LC(t){var e=t.alternate;e!==null&&(t.alternate=null,LC(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&py(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var tt=null,sn=!1;function Fs(t,e,n){for(n=n.child;n!==null;)VC(t,e,n),n=n.sibling}function VC(t,e,n){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(fc,n)}catch{}switch(n.tag){case 26:gt||vs(n,e),Fs(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:gt||vs(n,e);var s=tt,i=sn;fr(n.type)&&(tt=n.stateNode,sn=!1),Fs(t,e,n),Ol(n.stateNode),tt=s,sn=i;break;case 5:gt||vs(n,e);case 6:if(s=tt,i=sn,tt=null,Fs(t,e,n),tt=s,sn=i,tt!==null)if(sn)try{(tt.nodeType===9?tt.body:tt.nodeName==="HTML"?tt.ownerDocument.body:tt).removeChild(n.stateNode)}catch(r){Ve(n,e,r)}else try{tt.removeChild(n.stateNode)}catch(r){Ve(n,e,r)}break;case 18:tt!==null&&(sn?(t=tt,xx(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),mo(t)):xx(tt,n.stateNode));break;case 4:s=tt,i=sn,tt=n.stateNode.containerInfo,sn=!0,Fs(t,e,n),tt=s,sn=i;break;case 0:case 11:case 14:case 15:tr(2,n,e),gt||tr(4,n,e),Fs(t,e,n);break;case 1:gt||(vs(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"&&OC(n,e,s)),Fs(t,e,n);break;case 21:Fs(t,e,n);break;case 22:gt=(s=gt)||n.memoizedState!==null,Fs(t,e,n),gt=s;break;default:Fs(t,e,n)}}function zC(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{mo(t)}catch(n){Ve(e,e.return,n)}}}function FC(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{mo(t)}catch(n){Ve(e,e.return,n)}}function FD(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new ox),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new ox),e;default:throw Error(G(435,t.tag))}}function uu(t,e){var n=FD(t);e.forEach(function(s){if(!n.has(s)){n.add(s);var i=XD.bind(null,t,s);s.then(i,i)}})}function tn(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s],r=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 27:if(fr(o.type)){tt=o.stateNode,sn=!1;break e}break;case 5:tt=o.stateNode,sn=!1;break e;case 3:case 4:tt=o.stateNode.containerInfo,sn=!0;break e}o=o.return}if(tt===null)throw Error(G(160));VC(r,a,i),tt=null,sn=!1,r=i.alternate,r!==null&&(r.return=null),i.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)HC(e,t),e=e.sibling}var Jn=null;function HC(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:tn(e,t),nn(t),s&4&&(tr(3,t,t.return),xc(3,t),tr(5,t,t.return));break;case 1:tn(e,t),nn(t),s&512&&(gt||n===null||vs(n,n.return)),s&64&&Ys&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var i=Jn;if(tn(e,t),nn(t),s&512&&(gt||n===null||vs(n,n.return)),s&4){var r=n!==null?n.memoizedState:null;if(s=t.memoizedState,n===null)if(s===null)if(t.stateNode===null){e:{s=t.type,n=t.memoizedProps,i=i.ownerDocument||i;t:switch(s){case"title":r=i.getElementsByTagName("title")[0],(!r||r[gc]||r[jt]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=i.createElement(s),i.head.insertBefore(r,i.querySelector("head > title"))),Bt(r,s,n),r[jt]=t,At(r),s=r;break e;case"link":var a=Ax("link","href",i).get(s+(n.href||""));if(a){for(var o=0;o<a.length;o++)if(r=a[o],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(o,1);break t}}r=i.createElement(s),Bt(r,s,n),i.head.appendChild(r);break;case"meta":if(a=Ax("meta","content",i).get(s+(n.content||""))){for(o=0;o<a.length;o++)if(r=a[o],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(o,1);break t}}r=i.createElement(s),Bt(r,s,n),i.head.appendChild(r);break;default:throw Error(G(468,s))}r[jt]=t,At(r),s=r}t.stateNode=s}else kx(i,t.type,t.stateNode);else t.stateNode=Ex(i,s,t.memoizedProps);else r!==s?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,s===null?kx(i,t.type,t.stateNode):Ex(i,s,t.memoizedProps)):s===null&&t.stateNode!==null&&cp(t,t.memoizedProps,n.memoizedProps)}break;case 27:tn(e,t),nn(t),s&512&&(gt||n===null||vs(n,n.return)),n!==null&&s&4&&cp(t,t.memoizedProps,n.memoizedProps);break;case 5:if(tn(e,t),nn(t),s&512&&(gt||n===null||vs(n,n.return)),t.flags&32){i=t.stateNode;try{ao(i,"")}catch(m){Ve(t,t.return,m)}}s&4&&t.stateNode!=null&&(i=t.memoizedProps,cp(t,i,n!==null?n.memoizedProps:i)),s&1024&&(dp=!0);break;case 6:if(tn(e,t),nn(t),s&4){if(t.stateNode===null)throw Error(G(162));s=t.memoizedProps,n=t.stateNode;try{n.nodeValue=s}catch(m){Ve(t,t.return,m)}}break;case 3:if(Yu=null,i=Jn,Jn=Dd(e.containerInfo),tn(e,t),Jn=i,nn(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{mo(e.containerInfo)}catch(m){Ve(t,t.return,m)}dp&&(dp=!1,UC(t));break;case 4:s=Jn,Jn=Dd(t.stateNode.containerInfo),tn(e,t),nn(t),Jn=s;break;case 12:tn(e,t),nn(t);break;case 31:tn(e,t),nn(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,uu(t,s)));break;case 13:tn(e,t),nn(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Oh=Cn()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,uu(t,s)));break;case 22:i=t.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,c=Ys,u=gt;if(Ys=c||i,gt=u||l,tn(e,t),gt=u,Ys=c,nn(t),s&8192)e:for(e=t.stateNode,e._visibility=i?e._visibility&-2:e._visibility|1,i&&(n===null||l||Ys||gt||Nr(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){l=n=e;try{if(r=l.stateNode,i)a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{o=l.stateNode;var d=l.memoizedProps.style,h=d!=null&&d.hasOwnProperty("display")?d.display:null;o.style.display=h==null||typeof h=="boolean"?"":(""+h).trim()}}catch(m){Ve(l,l.return,m)}}}else if(e.tag===6){if(n===null){l=e;try{l.stateNode.nodeValue=i?"":l.memoizedProps}catch(m){Ve(l,l.return,m)}}}else if(e.tag===18){if(n===null){l=e;try{var p=l.stateNode;i?_x(p,!0):_x(l.stateNode,!1)}catch(m){Ve(l,l.return,m)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}s&4&&(s=t.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,uu(t,n))));break;case 19:tn(e,t),nn(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,uu(t,s)));break;case 30:break;case 21:break;default:tn(e,t),nn(t)}}function nn(t){var e=t.flags;if(e&2){try{for(var n,s=t.return;s!==null;){if(PC(s)){n=s;break}s=s.return}if(n==null)throw Error(G(160));switch(n.tag){case 27:var i=n.stateNode,r=up(t);Cd(t,r,i);break;case 5:var a=n.stateNode;n.flags&32&&(ao(a,""),n.flags&=-33);var o=up(t);Cd(t,o,a);break;case 3:case 4:var l=n.stateNode.containerInfo,c=up(t);zm(t,c,l);break;default:throw Error(G(161))}}catch(u){Ve(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function UC(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;UC(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Hs(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)BC(t,e.alternate,e),e=e.sibling}function Nr(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:tr(4,e,e.return),Nr(e);break;case 1:vs(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&OC(e,e.return,n),Nr(e);break;case 27:Ol(e.stateNode);case 26:case 5:vs(e,e.return),Nr(e);break;case 22:e.memoizedState===null&&Nr(e);break;case 30:Nr(e);break;default:Nr(e)}t=t.sibling}}function qs(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var s=e.alternate,i=t,r=e,a=r.flags;switch(r.tag){case 0:case 11:case 15:qs(i,r,n),xc(4,r);break;case 1:if(qs(i,r,n),s=r,i=s.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(c){Ve(s,s.return,c)}if(s=r,i=s.updateQueue,i!==null){var o=s.stateNode;try{var l=i.shared.hiddenCallbacks;if(l!==null)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)zS(l[i],o)}catch(c){Ve(s,s.return,c)}}n&&a&64&&DC(r),Nl(r,r.return);break;case 27:IC(r);case 26:case 5:qs(i,r,n),n&&s===null&&a&4&&jC(r),Nl(r,r.return);break;case 12:qs(i,r,n);break;case 31:qs(i,r,n),n&&a&4&&zC(i,r);break;case 13:qs(i,r,n),n&&a&4&&FC(i,r);break;case 22:r.memoizedState===null&&qs(i,r,n),Nl(r,r.return);break;case 30:break;default:qs(i,r,n)}e=e.sibling}}function Wy(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&vc(n))}function $y(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&vc(t))}function Yn(t,e,n,s){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)GC(t,e,n,s),e=e.sibling}function GC(t,e,n,s){var i=e.flags;switch(e.tag){case 0:case 11:case 15:Yn(t,e,n,s),i&2048&&xc(9,e);break;case 1:Yn(t,e,n,s);break;case 3:Yn(t,e,n,s),i&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&vc(t)));break;case 12:if(i&2048){Yn(t,e,n,s),t=e.stateNode;try{var r=e.memoizedProps,a=r.id,o=r.onPostCommit;typeof o=="function"&&o(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(l){Ve(e,e.return,l)}}else Yn(t,e,n,s);break;case 31:Yn(t,e,n,s);break;case 13:Yn(t,e,n,s);break;case 23:break;case 22:r=e.stateNode,a=e.alternate,e.memoizedState!==null?r._visibility&2?Yn(t,e,n,s):Ml(t,e):r._visibility&2?Yn(t,e,n,s):(r._visibility|=2,_a(t,e,n,s,(e.subtreeFlags&10256)!==0||!1)),i&2048&&Wy(a,e);break;case 24:Yn(t,e,n,s),i&2048&&$y(e.alternate,e);break;default:Yn(t,e,n,s)}}function _a(t,e,n,s,i){for(i=i&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var r=t,a=e,o=n,l=s,c=a.flags;switch(a.tag){case 0:case 11:case 15:_a(r,a,o,l,i),xc(8,a);break;case 23:break;case 22:var u=a.stateNode;a.memoizedState!==null?u._visibility&2?_a(r,a,o,l,i):Ml(r,a):(u._visibility|=2,_a(r,a,o,l,i)),i&&c&2048&&Wy(a.alternate,a);break;case 24:_a(r,a,o,l,i),i&&c&2048&&$y(a.alternate,a);break;default:_a(r,a,o,l,i)}e=e.sibling}}function Ml(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,s=e,i=s.flags;switch(s.tag){case 22:Ml(n,s),i&2048&&Wy(s.alternate,s);break;case 24:Ml(n,s),i&2048&&$y(s.alternate,s);break;default:Ml(n,s)}e=e.sibling}}var gl=8192;function pa(t,e,n){if(t.subtreeFlags&gl)for(t=t.child;t!==null;)qC(t,e,n),t=t.sibling}function qC(t,e,n){switch(t.tag){case 26:pa(t,e,n),t.flags&gl&&t.memoizedState!==null&&AO(n,Jn,t.memoizedState,t.memoizedProps);break;case 5:pa(t,e,n);break;case 3:case 4:var s=Jn;Jn=Dd(t.stateNode.containerInfo),pa(t,e,n),Jn=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=gl,gl=16777216,pa(t,e,n),gl=s):pa(t,e,n));break;default:pa(t,e,n)}}function WC(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function al(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Et=s,YC(s,t)}WC(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)$C(t),t=t.sibling}function $C(t){switch(t.tag){case 0:case 11:case 15:al(t),t.flags&2048&&tr(9,t,t.return);break;case 3:al(t);break;case 12:al(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Wu(t)):al(t);break;default:al(t)}}function Wu(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Et=s,YC(s,t)}WC(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:tr(8,e,e.return),Wu(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Wu(e));break;default:Wu(e)}t=t.sibling}}function YC(t,e){for(;Et!==null;){var n=Et;switch(n.tag){case 0:case 11:case 15:tr(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:vc(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,Et=s;else e:for(n=t;Et!==null;){s=Et;var i=s.sibling,r=s.return;if(LC(s),s===n){Et=null;break e}if(i!==null){i.return=r,Et=i;break e}Et=r}}}var HD={getCacheForType:function(t){var e=It(yt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return It(yt).controller.signal}},UD=typeof WeakMap=="function"?WeakMap:Map,je=0,qe=null,Ce=null,Ee=0,Le=0,mn=null,Bi=!1,jo=!1,Yy=!1,ai=0,at=0,nr=0,zr=0,Ky=0,xn=0,uo=0,Rl=null,an=null,Fm=!1,Oh=0,KC=0,Td=1/0,Ed=null,qi=null,St=0,Wi=null,ho=null,ei=0,Hm=0,Um=null,XC=null,Dl=0,Gm=null;function An(){return je&2&&Ee!==0?Ee&-Ee:pe.T!==null?Qy():rS()}function QC(){if(xn===0)if(!(Ee&536870912)||Ae){var t=nu;nu<<=1,!(nu&3932160)&&(nu=262144),xn=t}else xn=536870912;return t=Rn.current,t!==null&&(t.flags|=32),xn}function cn(t,e,n){(t===qe&&(Le===2||Le===9)||t.cancelPendingCommit!==null)&&(fo(t,0),Li(t,Ee,xn,!1)),mc(t,n),(!(je&2)||t!==qe)&&(t===qe&&(!(je&2)&&(zr|=n),at===4&&Li(t,Ee,xn,!1)),Os(t))}function ZC(t,e,n){if(je&6)throw Error(G(327));var s=!n&&(e&127)===0&&(e&t.expiredLanes)===0||pc(t,e),i=s?WD(t,e):hp(t,e,!0),r=s;do{if(i===0){jo&&!s&&Li(t,e,0,!1);break}else{if(n=t.current.alternate,r&&!GD(n)){i=hp(t,e,!1),r=!1;continue}if(i===2){if(r=e,t.errorRecoveryDisabledLanes&r)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var o=t;i=Rl;var l=o.current.memoizedState.isDehydrated;if(l&&(fo(o,a).flags|=256),a=hp(o,a,!1),a!==2){if(Yy&&!l){o.errorRecoveryDisabledLanes|=r,zr|=r,i=4;break e}r=an,an=i,r!==null&&(an===null?an=r:an.push.apply(an,r))}i=a}if(r=!1,i!==2)continue}}if(i===1){fo(t,0),Li(t,e,0,!0);break}e:{switch(s=t,r=i,r){case 0:case 1:throw Error(G(345));case 4:if((e&4194048)!==e)break;case 6:Li(s,e,xn,!Bi);break e;case 2:an=null;break;case 3:case 5:break;default:throw Error(G(329))}if((e&62914560)===e&&(i=Oh+300-Cn(),10<i)){if(Li(s,e,xn,!Bi),wh(s,0,!0)!==0)break e;ei=e,s.timeoutHandle=vT(lx.bind(null,s,n,an,Ed,Fm,e,xn,zr,uo,Bi,r,"Throttled",-0,0),i);break e}lx(s,n,an,Ed,Fm,e,xn,zr,uo,Bi,r,null,-0,0)}}break}while(!0);Os(t)}function lx(t,e,n,s,i,r,a,o,l,c,u,d,h,p){if(t.timeoutHandle=-1,d=e.subtreeFlags,d&8192||(d&16785408)===16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xs},qC(e,r,d);var m=(r&62914560)===r?Oh-Cn():(r&4194048)===r?KC-Cn():0;if(m=kO(d,m),m!==null){ei=r,t.cancelPendingCommit=m(ux.bind(null,t,e,r,n,s,i,a,o,l,u,d,null,h,p)),Li(t,r,a,!c);return}}ux(t,e,r,n,s,i,a,o,l)}function GD(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var i=n[s],r=i.getSnapshot;i=i.value;try{if(!Mn(r(),i))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Li(t,e,n,s){e&=~Ky,e&=~zr,t.suspendedLanes|=e,t.pingedLanes&=~e,s&&(t.warmLanes|=e),s=t.expirationTimes;for(var i=e;0<i;){var r=31-En(i),a=1<<r;s[r]=-1,i&=~a}n!==0&&nS(t,n,e)}function jh(){return je&6?!0:(_c(0),!1)}function Xy(){if(Ce!==null){if(Le===0)var t=Ce.return;else t=Ce,Qs=oa=null,Py(t),Qa=null,Gl=0,t=Ce;for(;t!==null;)RC(t.alternate,t),t=t.return;Ce=null}}function fo(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,uO(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),ei=0,Xy(),qe=t,Ce=n=Zs(t.current,null),Ee=e,Le=0,mn=null,Bi=!1,jo=pc(t,e),Yy=!1,uo=xn=Ky=zr=nr=at=0,an=Rl=null,Fm=!1,e&8&&(e|=e&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=e;0<s;){var i=31-En(s),r=1<<i;e|=t[i],s&=~r}return ai=e,Eh(),n}function JC(t,e){xe=null,pe.H=Wl,e===Oo||e===kh?(e=zb(),Le=3):e===ky?(e=zb(),Le=4):Le=e===Gy?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,mn=e,Ce===null&&(at=1,wd(t,Ln(e,t.current)))}function eT(){var t=Rn.current;return t===null?!0:(Ee&4194048)===Ee?Hn===null:(Ee&62914560)===Ee||Ee&536870912?t===Hn:!1}function tT(){var t=pe.H;return pe.H=Wl,t===null?Wl:t}function nT(){var t=pe.A;return pe.A=HD,t}function Ad(){at=4,Bi||(Ee&4194048)!==Ee&&Rn.current!==null||(jo=!0),!(nr&134217727)&&!(zr&134217727)||qe===null||Li(qe,Ee,xn,!1)}function hp(t,e,n){var s=je;je|=2;var i=tT(),r=nT();(qe!==t||Ee!==e)&&(Ed=null,fo(t,e)),e=!1;var a=at;e:do try{if(Le!==0&&Ce!==null){var o=Ce,l=mn;switch(Le){case 8:Xy(),a=6;break e;case 3:case 2:case 9:case 6:Rn.current===null&&(e=!0);var c=Le;if(Le=0,mn=null,La(t,o,l,c),n&&jo){a=0;break e}break;default:c=Le,Le=0,mn=null,La(t,o,l,c)}}qD(),a=at;break}catch(u){JC(t,u)}while(!0);return e&&t.shellSuspendCounter++,Qs=oa=null,je=s,pe.H=i,pe.A=r,Ce===null&&(qe=null,Ee=0,Eh()),a}function qD(){for(;Ce!==null;)sT(Ce)}function WD(t,e){var n=je;je|=2;var s=tT(),i=nT();qe!==t||Ee!==e?(Ed=null,Td=Cn()+500,fo(t,e)):jo=pc(t,e);e:do try{if(Le!==0&&Ce!==null){e=Ce;var r=mn;t:switch(Le){case 1:Le=0,mn=null,La(t,e,r,1);break;case 2:case 9:if(Vb(r)){Le=0,mn=null,cx(e);break}e=function(){Le!==2&&Le!==9||qe!==t||(Le=7),Os(t)},r.then(e,e);break e;case 3:Le=7;break e;case 4:Le=5;break e;case 7:Vb(r)?(Le=0,mn=null,cx(e)):(Le=0,mn=null,La(t,e,r,7));break;case 5:var a=null;switch(Ce.tag){case 26:a=Ce.memoizedState;case 5:case 27:var o=Ce;if(a?ST(a):o.stateNode.complete){Le=0,mn=null;var l=o.sibling;if(l!==null)Ce=l;else{var c=o.return;c!==null?(Ce=c,Ph(c)):Ce=null}break t}}Le=0,mn=null,La(t,e,r,5);break;case 6:Le=0,mn=null,La(t,e,r,6);break;case 8:Xy(),at=6;break e;default:throw Error(G(462))}}$D();break}catch(u){JC(t,u)}while(!0);return Qs=oa=null,pe.H=s,pe.A=i,je=n,Ce!==null?0:(qe=null,Ee=0,Eh(),at)}function $D(){for(;Ce!==null&&!gR();)sT(Ce)}function sT(t){var e=MC(t.alternate,t,ai);t.memoizedProps=t.pendingProps,e===null?Ph(t):Ce=e}function cx(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=nx(n,e,e.pendingProps,e.type,void 0,Ee);break;case 11:e=nx(n,e,e.pendingProps,e.type.render,e.ref,Ee);break;case 5:Py(e);default:RC(n,e),e=Ce=RS(e,ai),e=MC(n,e,ai)}t.memoizedProps=t.pendingProps,e===null?Ph(t):Ce=e}function La(t,e,n,s){Qs=oa=null,Py(e),Qa=null,Gl=0;var i=e.return;try{if(PD(t,i,e,n,Ee)){at=1,wd(t,Ln(n,t.current)),Ce=null;return}}catch(r){if(i!==null)throw Ce=i,r;at=1,wd(t,Ln(n,t.current)),Ce=null;return}e.flags&32768?(Ae||s===1?t=!0:jo||Ee&536870912?t=!1:(Bi=t=!0,(s===2||s===9||s===3||s===6)&&(s=Rn.current,s!==null&&s.tag===13&&(s.flags|=16384))),iT(e,t)):Ph(e)}function Ph(t){var e=t;do{if(e.flags&32768){iT(e,Bi);return}t=e.return;var n=LD(e.alternate,e,ai);if(n!==null){Ce=n;return}if(e=e.sibling,e!==null){Ce=e;return}Ce=e=t}while(e!==null);at===0&&(at=5)}function iT(t,e){do{var n=VD(t.alternate,t);if(n!==null){n.flags&=32767,Ce=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){Ce=t;return}Ce=t=n}while(t!==null);at=6,Ce=null}function ux(t,e,n,s,i,r,a,o,l){t.cancelPendingCommit=null;do Ih();while(St!==0);if(je&6)throw Error(G(327));if(e!==null){if(e===t.current)throw Error(G(177));if(r=e.lanes|e.childLanes,r|=_y,ER(t,n,r,a,o,l),t===qe&&(Ce=qe=null,Ee=0),ho=e,Wi=t,ei=n,Hm=r,Um=i,XC=s,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,QD(dd,function(){return cT(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(e.flags&13878)!==0,e.subtreeFlags&13878||s){s=pe.T,pe.T=null,i=Pe.p,Pe.p=2,a=je,je|=4;try{zD(t,e,n)}finally{je=a,Pe.p=i,pe.T=s}}St=1,rT(),aT(),oT()}}function rT(){if(St===1){St=0;var t=Wi,e=ho,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=pe.T,pe.T=null;var s=Pe.p;Pe.p=2;var i=je;je|=4;try{HC(e,t);var r=Ym,a=SS(t.containerInfo),o=r.focusedElem,l=r.selectionRange;if(a!==o&&o&&o.ownerDocument&&wS(o.ownerDocument.documentElement,o)){if(l!==null&&xy(o)){var c=l.start,u=l.end;if(u===void 0&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var p=h.getSelection(),m=o.textContent.length,y=Math.min(l.start,m),x=l.end===void 0?y:Math.min(l.end,m);!p.extend&&y>x&&(a=x,x=y,y=a);var v=Db(o,y),b=Db(o,x);if(v&&b&&(p.rangeCount!==1||p.anchorNode!==v.node||p.anchorOffset!==v.offset||p.focusNode!==b.node||p.focusOffset!==b.offset)){var _=d.createRange();_.setStart(v.node,v.offset),p.removeAllRanges(),y>x?(p.addRange(_),p.extend(b.node,b.offset)):(_.setEnd(b.node,b.offset),p.addRange(_))}}}}for(d=[],p=o;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<d.length;o++){var w=d[o];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}Pd=!!$m,Ym=$m=null}finally{je=i,Pe.p=s,pe.T=n}}t.current=e,St=2}}function aT(){if(St===2){St=0;var t=Wi,e=ho,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=pe.T,pe.T=null;var s=Pe.p;Pe.p=2;var i=je;je|=4;try{BC(t,e.alternate,e)}finally{je=i,Pe.p=s,pe.T=n}}St=3}}function oT(){if(St===4||St===3){St=0,yR();var t=Wi,e=ho,n=ei,s=XC;e.subtreeFlags&10256||e.flags&10256?St=5:(St=0,ho=Wi=null,lT(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(qi=null),fy(n),e=e.stateNode,Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(fc,e,void 0,(e.current.flags&128)===128)}catch{}if(s!==null){e=pe.T,i=Pe.p,Pe.p=2,pe.T=null;try{for(var r=t.onRecoverableError,a=0;a<s.length;a++){var o=s[a];r(o.value,{componentStack:o.stack})}}finally{pe.T=e,Pe.p=i}}ei&3&&Ih(),Os(t),i=t.pendingLanes,n&261930&&i&42?t===Gm?Dl++:(Dl=0,Gm=t):Dl=0,_c(0)}}function lT(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,vc(e)))}function Ih(){return rT(),aT(),oT(),cT()}function cT(){if(St!==5)return!1;var t=Wi,e=Hm;Hm=0;var n=fy(ei),s=pe.T,i=Pe.p;try{Pe.p=32>n?32:n,pe.T=null,n=Um,Um=null;var r=Wi,a=ei;if(St=0,ho=Wi=null,ei=0,je&6)throw Error(G(331));var o=je;if(je|=4,$C(r.current),GC(r,r.current,a,n),je=o,_c(0,!1),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(fc,r)}catch{}return!0}finally{Pe.p=i,pe.T=s,lT(t,e)}}function dx(t,e,n){e=Ln(n,e),e=Bm(t.stateNode,e,2),t=Gi(t,e,2),t!==null&&(mc(t,2),Os(t))}function Ve(t,e,n){if(t.tag===3)dx(t,t,n);else for(;e!==null;){if(e.tag===3){dx(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(qi===null||!qi.has(s))){t=Ln(n,t),n=CC(2),s=Gi(e,n,2),s!==null&&(TC(n,s,e,t),mc(s,2),Os(s));break}}e=e.return}}function fp(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new UD;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(n)||(Yy=!0,i.add(n),t=YD.bind(null,t,e,n),e.then(t,t))}function YD(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,qe===t&&(Ee&n)===n&&(at===4||at===3&&(Ee&62914560)===Ee&&300>Cn()-Oh?!(je&2)&&fo(t,0):Ky|=n,uo===Ee&&(uo=0)),Os(t)}function uT(t,e){e===0&&(e=tS()),t=aa(t,e),t!==null&&(mc(t,e),Os(t))}function KD(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),uT(t,n)}function XD(t,e){var n=0;switch(t.tag){case 31:case 13:var s=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(G(314))}s!==null&&s.delete(e),uT(t,n)}function QD(t,e){return dy(t,e)}var kd=null,wa=null,qm=!1,Nd=!1,pp=!1,Vi=0;function Os(t){t!==wa&&t.next===null&&(wa===null?kd=wa=t:wa=wa.next=t),Nd=!0,qm||(qm=!0,JD())}function _c(t,e){if(!pp&&Nd){pp=!0;do for(var n=!1,s=kd;s!==null;){if(t!==0){var i=s.pendingLanes;if(i===0)var r=0;else{var a=s.suspendedLanes,o=s.pingedLanes;r=(1<<31-En(42|t)+1)-1,r&=i&~(a&~o),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,hx(s,r))}else r=Ee,r=wh(s,s===qe?r:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(r&3)||pc(s,r)||(n=!0,hx(s,r));s=s.next}while(n);pp=!1}}function ZD(){dT()}function dT(){Nd=qm=!1;var t=0;Vi!==0&&cO()&&(t=Vi);for(var e=Cn(),n=null,s=kd;s!==null;){var i=s.next,r=hT(s,e);r===0?(s.next=null,n===null?kd=i:n.next=i,i===null&&(wa=n)):(n=s,(t!==0||r&3)&&(Nd=!0)),s=i}St!==0&&St!==5||_c(t),Vi!==0&&(Vi=0)}function hT(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,i=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var a=31-En(r),o=1<<a,l=i[a];l===-1?(!(o&n)||o&s)&&(i[a]=TR(o,e)):l<=e&&(t.expiredLanes|=o),r&=~o}if(e=qe,n=Ee,n=wh(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s=t.callbackNode,n===0||t===e&&(Le===2||Le===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&Hf(s),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||pc(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(s!==null&&Hf(s),fy(n)){case 2:case 8:n=Jw;break;case 32:n=dd;break;case 268435456:n=eS;break;default:n=dd}return s=fT.bind(null,t),n=dy(n,s),t.callbackPriority=e,t.callbackNode=n,e}return s!==null&&s!==null&&Hf(s),t.callbackPriority=2,t.callbackNode=null,2}function fT(t,e){if(St!==0&&St!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(Ih()&&t.callbackNode!==n)return null;var s=Ee;return s=wh(t,t===qe?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s===0?null:(ZC(t,s,e),hT(t,Cn()),t.callbackNode!=null&&t.callbackNode===n?fT.bind(null,t):null)}function hx(t,e){if(Ih())return null;ZC(t,e,!0)}function JD(){dO(function(){je&6?dy(Zw,ZD):dT()})}function Qy(){if(Vi===0){var t=oo;t===0&&(t=tu,tu<<=1,!(tu&261888)&&(tu=256)),Vi=t}return Vi}function fx(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Bu(""+t)}function px(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function eO(t,e,n,s,i){if(e==="submit"&&n&&n.stateNode===i){var r=fx((i[hn]||null).action),a=s.submitter;a&&(e=(e=a[hn]||null)?fx(e.formAction):a.getAttribute("formAction"),e!==null&&(r=e,a=null));var o=new Sh("action","action",null,s,i);t.push({event:o,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Vi!==0){var l=a?px(i,a):new FormData(i);Pm(n,{pending:!0,data:l,method:i.method,action:r},null,l)}}else typeof r=="function"&&(o.preventDefault(),l=a?px(i,a):new FormData(i),Pm(n,{pending:!0,data:l,method:i.method,action:r},r,l))},currentTarget:i}]})}}for(var mp=0;mp<Sm.length;mp++){var gp=Sm[mp],tO=gp.toLowerCase(),nO=gp[0].toUpperCase()+gp.slice(1);us(tO,"on"+nO)}us(TS,"onAnimationEnd");us(ES,"onAnimationIteration");us(AS,"onAnimationStart");us("dblclick","onDoubleClick");us("focusin","onFocus");us("focusout","onBlur");us(vD,"onTransitionRun");us(bD,"onTransitionStart");us(xD,"onTransitionCancel");us(kS,"onTransitionEnd");ro("onMouseEnter",["mouseout","mouseover"]);ro("onMouseLeave",["mouseout","mouseover"]);ro("onPointerEnter",["pointerout","pointerover"]);ro("onPointerLeave",["pointerout","pointerover"]);sa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));sa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));sa("onBeforeInput",["compositionend","keypress","textInput","paste"]);sa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));sa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));sa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $l="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sO=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($l));function pT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],i=s.event;s=s.listeners;e:{var r=void 0;if(e)for(var a=s.length-1;0<=a;a--){var o=s[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==r&&i.isPropagationStopped())break e;r=o,i.currentTarget=c;try{r(i)}catch(u){fd(u)}i.currentTarget=null,r=l}else for(a=0;a<s.length;a++){if(o=s[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==r&&i.isPropagationStopped())break e;r=o,i.currentTarget=c;try{r(i)}catch(u){fd(u)}i.currentTarget=null,r=l}}}}function Se(t,e){var n=e[mm];n===void 0&&(n=e[mm]=new Set);var s=t+"__bubble";n.has(s)||(mT(e,t,2,!1),n.add(s))}function yp(t,e,n){var s=0;e&&(s|=4),mT(n,t,s,e)}var du="_reactListening"+Math.random().toString(36).slice(2);function Zy(t){if(!t[du]){t[du]=!0,aS.forEach(function(n){n!=="selectionchange"&&(sO.has(n)||yp(n,!1,t),yp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[du]||(e[du]=!0,yp("selectionchange",!1,e))}}function mT(t,e,n,s){switch(kT(e)){case 2:var i=RO;break;case 8:i=DO;break;default:i=nv}n=i.bind(null,e,n,t),i=void 0,!xm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function vp(t,e,n,s,i){var r=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var o=s.stateNode.containerInfo;if(o===i)break;if(a===4)for(a=s.return;a!==null;){var l=a.tag;if((l===3||l===4)&&a.stateNode.containerInfo===i)return;a=a.return}for(;o!==null;){if(a=Na(o),a===null)return;if(l=a.tag,l===5||l===6||l===26||l===27){s=r=a;continue e}o=o.parentNode}}s=s.return}pS(function(){var c=r,u=gy(n),d=[];e:{var h=NS.get(t);if(h!==void 0){var p=Sh,m=t;switch(t){case"keypress":if(Vu(n)===0)break e;case"keydown":case"keyup":p=XR;break;case"focusin":m="focus",p=$f;break;case"focusout":m="blur",p=$f;break;case"beforeblur":case"afterblur":p=$f;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=wb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=LR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=JR;break;case TS:case ES:case AS:p=FR;break;case kS:p=tD;break;case"scroll":case"scrollend":p=IR;break;case"wheel":p=sD;break;case"copy":case"cut":case"paste":p=UR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Cb;break;case"toggle":case"beforetoggle":p=rD}var y=(e&4)!==0,x=!y&&(t==="scroll"||t==="scrollend"),v=y?h!==null?h+"Capture":null:h;y=[];for(var b=c,_;b!==null;){var w=b;if(_=w.stateNode,w=w.tag,w!==5&&w!==26&&w!==27||_===null||v===null||(w=Vl(b,v),w!=null&&y.push(Yl(b,w,_))),x)break;b=b.return}0<y.length&&(h=new p(h,m,null,n,u),d.push({event:h,listeners:y}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&n!==bm&&(m=n.relatedTarget||n.fromElement)&&(Na(m)||m[Mo]))break e;if((p||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=c,m=m?Na(m):null,m!==null&&(x=hc(m),y=m.tag,m!==x||y!==5&&y!==27&&y!==6)&&(m=null)):(p=null,m=c),p!==m)){if(y=wb,w="onMouseLeave",v="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(y=Cb,w="onPointerLeave",v="onPointerEnter",b="pointer"),x=p==null?h:pl(p),_=m==null?h:pl(m),h=new y(w,b+"leave",p,n,u),h.target=x,h.relatedTarget=_,w=null,Na(u)===c&&(y=new y(v,b+"enter",m,n,u),y.target=_,y.relatedTarget=x,w=y),x=w,p&&m)t:{for(y=iO,v=p,b=m,_=0,w=v;w;w=y(w))_++;w=0;for(var S=b;S;S=y(S))w++;for(;0<_-w;)v=y(v),_--;for(;0<w-_;)b=y(b),w--;for(;_--;){if(v===b||b!==null&&v===b.alternate){y=v;break t}v=y(v),b=y(b)}y=null}else y=null;p!==null&&mx(d,h,p,y,!1),m!==null&&x!==null&&mx(d,x,m,y,!0)}}e:{if(h=c?pl(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var T=kb;else if(Ab(h))if(xS)T=mD;else{T=fD;var E=hD}else p=h.nodeName,!p||p.toLowerCase()!=="input"||h.type!=="checkbox"&&h.type!=="radio"?c&&my(c.elementType)&&(T=kb):T=pD;if(T&&(T=T(t,c))){bS(d,T,n,u);break e}E&&E(t,h,c),t==="focusout"&&c&&h.type==="number"&&c.memoizedProps.value!=null&&vm(h,"number",h.value)}switch(E=c?pl(c):window,t){case"focusin":(Ab(E)||E.contentEditable==="true")&&(Da=E,_m=c,Sl=null);break;case"focusout":Sl=_m=Da=null;break;case"mousedown":wm=!0;break;case"contextmenu":case"mouseup":case"dragend":wm=!1,Ob(d,n,u);break;case"selectionchange":if(yD)break;case"keydown":case"keyup":Ob(d,n,u)}var C;if(by)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Ra?yS(t,n)&&(M="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(gS&&n.locale!=="ko"&&(Ra||M!=="onCompositionStart"?M==="onCompositionEnd"&&Ra&&(C=mS()):(Ii=u,yy="value"in Ii?Ii.value:Ii.textContent,Ra=!0)),E=Md(c,M),0<E.length&&(M=new Sb(M,t,null,n,u),d.push({event:M,listeners:E}),C?M.data=C:(C=vS(n),C!==null&&(M.data=C)))),(C=oD?lD(t,n):cD(t,n))&&(M=Md(c,"onBeforeInput"),0<M.length&&(E=new Sb("onBeforeInput","beforeinput",null,n,u),d.push({event:E,listeners:M}),E.data=C)),eO(d,t,c,n,u)}pT(d,e)})}function Yl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Md(t,e){for(var n=e+"Capture",s=[];t!==null;){var i=t,r=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||r===null||(i=Vl(t,n),i!=null&&s.unshift(Yl(t,i,r)),i=Vl(t,e),i!=null&&s.push(Yl(t,i,r))),t.tag===3)return s;t=t.return}return[]}function iO(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function mx(t,e,n,s,i){for(var r=e._reactName,a=[];n!==null&&n!==s;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,l!==null&&l===s)break;o!==5&&o!==26&&o!==27||c===null||(l=c,i?(c=Vl(n,r),c!=null&&a.unshift(Yl(n,c,l))):i||(c=Vl(n,r),c!=null&&a.push(Yl(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var rO=/\r\n?/g,aO=/\u0000|\uFFFD/g;function gx(t){return(typeof t=="string"?t:""+t).replace(rO,`
`).replace(aO,"")}function gT(t,e){return e=gx(e),gx(t)===e}function Fe(t,e,n,s,i,r){switch(n){case"children":typeof s=="string"?e==="body"||e==="textarea"&&s===""||ao(t,s):(typeof s=="number"||typeof s=="bigint")&&e!=="body"&&ao(t,""+s);break;case"className":iu(t,"class",s);break;case"tabIndex":iu(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":iu(t,n,s);break;case"style":fS(t,s,r);break;case"data":if(e!=="object"){iu(t,"data",s);break}case"src":case"href":if(s===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=Bu(""+s),t.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(e!=="input"&&Fe(t,e,"name",i.name,i,null),Fe(t,e,"formEncType",i.formEncType,i,null),Fe(t,e,"formMethod",i.formMethod,i,null),Fe(t,e,"formTarget",i.formTarget,i,null)):(Fe(t,e,"encType",i.encType,i,null),Fe(t,e,"method",i.method,i,null),Fe(t,e,"target",i.target,i,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=Bu(""+s),t.setAttribute(n,s);break;case"onClick":s!=null&&(t.onclick=Xs);break;case"onScroll":s!=null&&Se("scroll",t);break;case"onScrollEnd":s!=null&&Se("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(G(61));if(n=s.__html,n!=null){if(i.children!=null)throw Error(G(60));t.innerHTML=n}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}n=Bu(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""+s):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":s===!0?t.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,s):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(n,s):t.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(n):t.setAttribute(n,s);break;case"popover":Se("beforetoggle",t),Se("toggle",t),Iu(t,"popover",s);break;case"xlinkActuate":Vs(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Vs(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Vs(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Vs(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Vs(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Vs(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Vs(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Vs(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Vs(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Iu(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=jR.get(n)||n,Iu(t,n,s))}}function Wm(t,e,n,s,i,r){switch(n){case"style":fS(t,s,r);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(G(61));if(n=s.__html,n!=null){if(i.children!=null)throw Error(G(60));t.innerHTML=n}}break;case"children":typeof s=="string"?ao(t,s):(typeof s=="number"||typeof s=="bigint")&&ao(t,""+s);break;case"onScroll":s!=null&&Se("scroll",t);break;case"onScrollEnd":s!=null&&Se("scrollend",t);break;case"onClick":s!=null&&(t.onclick=Xs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!oS.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),e=n.slice(2,i?n.length-7:void 0),r=t[hn]||null,r=r!=null?r[n]:null,typeof r=="function"&&t.removeEventListener(e,r,i),typeof s=="function")){typeof r!="function"&&r!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,s,i);break e}n in t?t[n]=s:s===!0?t.setAttribute(n,""):Iu(t,n,s)}}}function Bt(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Se("error",t),Se("load",t);var s=!1,i=!1,r;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(a!=null)switch(r){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(G(137,e));default:Fe(t,e,r,a,n,null)}}i&&Fe(t,e,"srcSet",n.srcSet,n,null),s&&Fe(t,e,"src",n.src,n,null);return;case"input":Se("invalid",t);var o=r=a=i=null,l=null,c=null;for(s in n)if(n.hasOwnProperty(s)){var u=n[s];if(u!=null)switch(s){case"name":i=u;break;case"type":a=u;break;case"checked":l=u;break;case"defaultChecked":c=u;break;case"value":r=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(G(137,e));break;default:Fe(t,e,s,u,n,null)}}uS(t,r,o,l,c,a,i,!1);return;case"select":Se("invalid",t),s=a=r=null;for(i in n)if(n.hasOwnProperty(i)&&(o=n[i],o!=null))switch(i){case"value":r=o;break;case"defaultValue":a=o;break;case"multiple":s=o;default:Fe(t,e,i,o,n,null)}e=r,n=a,t.multiple=!!s,e!=null?Ya(t,!!s,e,!1):n!=null&&Ya(t,!!s,n,!0);return;case"textarea":Se("invalid",t),r=i=s=null;for(a in n)if(n.hasOwnProperty(a)&&(o=n[a],o!=null))switch(a){case"value":s=o;break;case"defaultValue":i=o;break;case"children":r=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(G(91));break;default:Fe(t,e,a,o,n,null)}hS(t,s,i,r);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(s=n[l],s!=null))switch(l){case"selected":t.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Fe(t,e,l,s,n,null)}return;case"dialog":Se("beforetoggle",t),Se("toggle",t),Se("cancel",t),Se("close",t);break;case"iframe":case"object":Se("load",t);break;case"video":case"audio":for(s=0;s<$l.length;s++)Se($l[s],t);break;case"image":Se("error",t),Se("load",t);break;case"details":Se("toggle",t);break;case"embed":case"source":case"link":Se("error",t),Se("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(s=n[c],s!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(G(137,e));default:Fe(t,e,c,s,n,null)}return;default:if(my(e)){for(u in n)n.hasOwnProperty(u)&&(s=n[u],s!==void 0&&Wm(t,e,u,s,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(s=n[o],s!=null&&Fe(t,e,o,s,n,null))}function oO(t,e,n,s){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,r=null,a=null,o=null,l=null,c=null,u=null;for(p in n){var d=n[p];if(n.hasOwnProperty(p)&&d!=null)switch(p){case"checked":break;case"value":break;case"defaultValue":l=d;default:s.hasOwnProperty(p)||Fe(t,e,p,null,s,d)}}for(var h in s){var p=s[h];if(d=n[h],s.hasOwnProperty(h)&&(p!=null||d!=null))switch(h){case"type":r=p;break;case"name":i=p;break;case"checked":c=p;break;case"defaultChecked":u=p;break;case"value":a=p;break;case"defaultValue":o=p;break;case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(G(137,e));break;default:p!==d&&Fe(t,e,h,p,s,d)}}ym(t,a,o,l,c,u,r,i);return;case"select":p=a=o=h=null;for(r in n)if(l=n[r],n.hasOwnProperty(r)&&l!=null)switch(r){case"value":break;case"multiple":p=l;default:s.hasOwnProperty(r)||Fe(t,e,r,null,s,l)}for(i in s)if(r=s[i],l=n[i],s.hasOwnProperty(i)&&(r!=null||l!=null))switch(i){case"value":h=r;break;case"defaultValue":o=r;break;case"multiple":a=r;default:r!==l&&Fe(t,e,i,r,s,l)}e=o,n=a,s=p,h!=null?Ya(t,!!n,h,!1):!!s!=!!n&&(e!=null?Ya(t,!!n,e,!0):Ya(t,!!n,n?[]:"",!1));return;case"textarea":p=h=null;for(o in n)if(i=n[o],n.hasOwnProperty(o)&&i!=null&&!s.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:Fe(t,e,o,null,s,i)}for(a in s)if(i=s[a],r=n[a],s.hasOwnProperty(a)&&(i!=null||r!=null))switch(a){case"value":h=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(G(91));break;default:i!==r&&Fe(t,e,a,i,s,r)}dS(t,h,p);return;case"option":for(var m in n)if(h=n[m],n.hasOwnProperty(m)&&h!=null&&!s.hasOwnProperty(m))switch(m){case"selected":t.selected=!1;break;default:Fe(t,e,m,null,s,h)}for(l in s)if(h=s[l],p=n[l],s.hasOwnProperty(l)&&h!==p&&(h!=null||p!=null))switch(l){case"selected":t.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Fe(t,e,l,h,s,p)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var y in n)h=n[y],n.hasOwnProperty(y)&&h!=null&&!s.hasOwnProperty(y)&&Fe(t,e,y,null,s,h);for(c in s)if(h=s[c],p=n[c],s.hasOwnProperty(c)&&h!==p&&(h!=null||p!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(G(137,e));break;default:Fe(t,e,c,h,s,p)}return;default:if(my(e)){for(var x in n)h=n[x],n.hasOwnProperty(x)&&h!==void 0&&!s.hasOwnProperty(x)&&Wm(t,e,x,void 0,s,h);for(u in s)h=s[u],p=n[u],!s.hasOwnProperty(u)||h===p||h===void 0&&p===void 0||Wm(t,e,u,h,s,p);return}}for(var v in n)h=n[v],n.hasOwnProperty(v)&&h!=null&&!s.hasOwnProperty(v)&&Fe(t,e,v,null,s,h);for(d in s)h=s[d],p=n[d],!s.hasOwnProperty(d)||h===p||h==null&&p==null||Fe(t,e,d,h,s,p)}function yx(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function lO(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),s=0;s<n.length;s++){var i=n[s],r=i.transferSize,a=i.initiatorType,o=i.duration;if(r&&o&&yx(a)){for(a=0,o=i.responseEnd,s+=1;s<n.length;s++){var l=n[s],c=l.startTime;if(c>o)break;var u=l.transferSize,d=l.initiatorType;u&&yx(d)&&(l=l.responseEnd,a+=u*(l<o?1:(o-c)/(l-c)))}if(--s,e+=8*(r+a)/(i.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var $m=null,Ym=null;function Rd(t){return t.nodeType===9?t:t.ownerDocument}function vx(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function yT(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Km(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bp=null;function cO(){var t=window.event;return t&&t.type==="popstate"?t===bp?!1:(bp=t,!0):(bp=null,!1)}var vT=typeof setTimeout=="function"?setTimeout:void 0,uO=typeof clearTimeout=="function"?clearTimeout:void 0,bx=typeof Promise=="function"?Promise:void 0,dO=typeof queueMicrotask=="function"?queueMicrotask:typeof bx<"u"?function(t){return bx.resolve(null).then(t).catch(hO)}:vT;function hO(t){setTimeout(function(){throw t})}function fr(t){return t==="head"}function xx(t,e){var n=e,s=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"||n==="/&"){if(s===0){t.removeChild(i),mo(e);return}s--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")s++;else if(n==="html")Ol(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Ol(n);for(var r=n.firstChild;r;){var a=r.nextSibling,o=r.nodeName;r[gc]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&r.rel.toLowerCase()==="stylesheet"||n.removeChild(r),r=a}}else n==="body"&&Ol(t.ownerDocument.body);n=i}while(n);mo(e)}function _x(t,e){var n=t;t=0;do{var s=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=s}while(n)}function Xm(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Xm(n),py(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function fO(t,e,n,s){for(;t.nodeType===1;){var i=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[gc])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==i.rel||t.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute("title")!==(i.title==null?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(i.src==null?null:i.src)||t.getAttribute("type")!==(i.type==null?null:i.type)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var r=i.name==null?null:""+i.name;if(i.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=Un(t.nextSibling),t===null)break}return null}function pO(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Un(t.nextSibling),t===null))return null;return t}function bT(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Un(t.nextSibling),t===null))return null;return t}function Qm(t){return t.data==="$?"||t.data==="$~"}function Zm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function mO(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var s=function(){e(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}function Un(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Jm=null;function wx(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return Un(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function Sx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function xT(t,e,n){switch(e=Rd(n),t){case"html":if(t=e.documentElement,!t)throw Error(G(452));return t;case"head":if(t=e.head,!t)throw Error(G(453));return t;case"body":if(t=e.body,!t)throw Error(G(454));return t;default:throw Error(G(451))}}function Ol(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);py(t)}var $n=new Map,Cx=new Set;function Dd(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var fi=Pe.d;Pe.d={f:gO,r:yO,D:vO,C:bO,L:xO,m:_O,X:SO,S:wO,M:CO};function gO(){var t=fi.f(),e=jh();return t||e}function yO(t){var e=Ro(t);e!==null&&e.tag===5&&e.type==="form"?fC(e):fi.r(t)}var Po=typeof document>"u"?null:document;function _T(t,e,n){var s=Po;if(s&&typeof e=="string"&&e){var i=Bn(e);i='link[rel="'+t+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),Cx.has(i)||(Cx.add(i),t={rel:t,crossOrigin:n,href:e},s.querySelector(i)===null&&(e=s.createElement("link"),Bt(e,"link",t),At(e),s.head.appendChild(e)))}}function vO(t){fi.D(t),_T("dns-prefetch",t,null)}function bO(t,e){fi.C(t,e),_T("preconnect",t,e)}function xO(t,e,n){fi.L(t,e,n);var s=Po;if(s&&t&&e){var i='link[rel="preload"][as="'+Bn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+Bn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+Bn(n.imageSizes)+'"]')):i+='[href="'+Bn(t)+'"]';var r=i;switch(e){case"style":r=po(t);break;case"script":r=Io(t)}$n.has(r)||(t=et({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),$n.set(r,t),s.querySelector(i)!==null||e==="style"&&s.querySelector(wc(r))||e==="script"&&s.querySelector(Sc(r))||(e=s.createElement("link"),Bt(e,"link",t),At(e),s.head.appendChild(e)))}}function _O(t,e){fi.m(t,e);var n=Po;if(n&&t){var s=e&&typeof e.as=="string"?e.as:"script",i='link[rel="modulepreload"][as="'+Bn(s)+'"][href="'+Bn(t)+'"]',r=i;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Io(t)}if(!$n.has(r)&&(t=et({rel:"modulepreload",href:t},e),$n.set(r,t),n.querySelector(i)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Sc(r)))return}s=n.createElement("link"),Bt(s,"link",t),At(s),n.head.appendChild(s)}}}function wO(t,e,n){fi.S(t,e,n);var s=Po;if(s&&t){var i=$a(s).hoistableStyles,r=po(t);e=e||"default";var a=i.get(r);if(!a){var o={loading:0,preload:null};if(a=s.querySelector(wc(r)))o.loading=5;else{t=et({rel:"stylesheet",href:t,"data-precedence":e},n),(n=$n.get(r))&&Jy(t,n);var l=a=s.createElement("link");At(l),Bt(l,"link",t),l._p=new Promise(function(c,u){l.onload=c,l.onerror=u}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,$u(a,e,s)}a={type:"stylesheet",instance:a,count:1,state:o},i.set(r,a)}}}function SO(t,e){fi.X(t,e);var n=Po;if(n&&t){var s=$a(n).hoistableScripts,i=Io(t),r=s.get(i);r||(r=n.querySelector(Sc(i)),r||(t=et({src:t,async:!0},e),(e=$n.get(i))&&ev(t,e),r=n.createElement("script"),At(r),Bt(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(i,r))}}function CO(t,e){fi.M(t,e);var n=Po;if(n&&t){var s=$a(n).hoistableScripts,i=Io(t),r=s.get(i);r||(r=n.querySelector(Sc(i)),r||(t=et({src:t,async:!0,type:"module"},e),(e=$n.get(i))&&ev(t,e),r=n.createElement("script"),At(r),Bt(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(i,r))}}function Tx(t,e,n,s){var i=(i=Fi.current)?Dd(i):null;if(!i)throw Error(G(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=po(n.href),n=$a(i).hoistableStyles,s=n.get(e),s||(s={type:"style",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=po(n.href);var r=$a(i).hoistableStyles,a=r.get(t);if(a||(i=i.ownerDocument||i,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,a),(r=i.querySelector(wc(t)))&&!r._p&&(a.instance=r,a.state.loading=5),$n.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},$n.set(t,n),r||TO(i,t,n,a.state))),e&&s===null)throw Error(G(528,""));return a}if(e&&s!==null)throw Error(G(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Io(n),n=$a(i).hoistableScripts,s=n.get(e),s||(s={type:"script",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(G(444,t))}}function po(t){return'href="'+Bn(t)+'"'}function wc(t){return'link[rel="stylesheet"]['+t+"]"}function wT(t){return et({},t,{"data-precedence":t.precedence,precedence:null})}function TO(t,e,n,s){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?s.loading=1:(e=t.createElement("link"),s.preload=e,e.addEventListener("load",function(){return s.loading|=1}),e.addEventListener("error",function(){return s.loading|=2}),Bt(e,"link",n),At(e),t.head.appendChild(e))}function Io(t){return'[src="'+Bn(t)+'"]'}function Sc(t){return"script[async]"+t}function Ex(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var s=t.querySelector('style[data-href~="'+Bn(n.href)+'"]');if(s)return e.instance=s,At(s),s;var i=et({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),At(s),Bt(s,"style",i),$u(s,n.precedence,t),e.instance=s;case"stylesheet":i=po(n.href);var r=t.querySelector(wc(i));if(r)return e.state.loading|=4,e.instance=r,At(r),r;s=wT(n),(i=$n.get(i))&&Jy(s,i),r=(t.ownerDocument||t).createElement("link"),At(r);var a=r;return a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),Bt(r,"link",s),e.state.loading|=4,$u(r,n.precedence,t),e.instance=r;case"script":return r=Io(n.src),(i=t.querySelector(Sc(r)))?(e.instance=i,At(i),i):(s=n,(i=$n.get(r))&&(s=et({},n),ev(s,i)),t=t.ownerDocument||t,i=t.createElement("script"),At(i),Bt(i,"link",s),t.head.appendChild(i),e.instance=i);case"void":return null;default:throw Error(G(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(s=e.instance,e.state.loading|=4,$u(s,n.precedence,t));return e.instance}function $u(t,e,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=s.length?s[s.length-1]:null,r=i,a=0;a<s.length;a++){var o=s[a];if(o.dataset.precedence===e)r=o;else if(r!==i)break}r?r.parentNode.insertBefore(t,r.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Jy(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function ev(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Yu=null;function Ax(t,e,n){if(Yu===null){var s=new Map,i=Yu=new Map;i.set(n,s)}else i=Yu,s=i.get(n),s||(s=new Map,i.set(n,s));if(s.has(t))return s;for(s.set(t,null),n=n.getElementsByTagName(t),i=0;i<n.length;i++){var r=n[i];if(!(r[gc]||r[jt]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var a=r.getAttribute(e)||"";a=t+a;var o=s.get(a);o?o.push(r):s.set(a,[r])}}return s}function kx(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function EO(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function ST(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function AO(t,e,n,s){if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var i=po(s.href),r=e.querySelector(wc(i));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Od.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=r,At(r);return}r=e.ownerDocument||e,s=wT(s),(i=$n.get(i))&&Jy(s,i),r=r.createElement("link"),At(r);var a=r;a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),Bt(r,"link",s),n.instance=r}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=Od.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var xp=0;function kO(t,e){return t.stylesheets&&t.count===0&&Ku(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var s=setTimeout(function(){if(t.stylesheets&&Ku(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4+e);0<t.imgBytes&&xp===0&&(xp=62500*lO());var i=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Ku(t,t.stylesheets),t.unsuspend)){var r=t.unsuspend;t.unsuspend=null,r()}},(t.imgBytes>xp?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s),clearTimeout(i)}}:null}function Od(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ku(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var jd=null;function Ku(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,jd=new Map,e.forEach(NO,t),jd=null,Od.call(t))}function NO(t,e){if(!(e.state.loading&4)){var n=jd.get(t);if(n)var s=n.get(null);else{n=new Map,jd.set(t,n);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<i.length;r++){var a=i[r];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),s=a)}s&&n.set(null,s)}i=e.instance,a=i.getAttribute("data-precedence"),r=n.get(a)||s,r===s&&n.set(null,i),n.set(a,i),this.count++,s=Od.bind(this),i.addEventListener("load",s),i.addEventListener("error",s),r?r.parentNode.insertBefore(i,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),e.state.loading|=4}}var Kl={$$typeof:Ks,Provider:null,Consumer:null,_currentValue:Ir,_currentValue2:Ir,_threadCount:0};function MO(t,e,n,s,i,r,a,o,l){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Uf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uf(0),this.hiddenUpdates=Uf(null),this.identifierPrefix=s,this.onUncaughtError=i,this.onCaughtError=r,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function CT(t,e,n,s,i,r,a,o,l,c,u,d){return t=new MO(t,e,n,a,l,c,u,d,o),e=1,r===!0&&(e|=24),r=bn(3,null,null,e),t.current=r,r.stateNode=t,e=Ey(),e.refCount++,t.pooledCache=e,e.refCount++,r.memoizedState={element:s,isDehydrated:n,cache:e},Ny(r),t}function TT(t){return t?(t=Pa,t):Pa}function ET(t,e,n,s,i,r){i=TT(i),s.context===null?s.context=i:s.pendingContext=i,s=Ui(e),s.payload={element:n},r=r===void 0?null:r,r!==null&&(s.callback=r),n=Gi(t,s,e),n!==null&&(cn(n,t,e),Tl(n,t,e))}function Nx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function tv(t,e){Nx(t,e),(t=t.alternate)&&Nx(t,e)}function AT(t){if(t.tag===13||t.tag===31){var e=aa(t,67108864);e!==null&&cn(e,t,67108864),tv(t,67108864)}}function Mx(t){if(t.tag===13||t.tag===31){var e=An();e=hy(e);var n=aa(t,e);n!==null&&cn(n,t,e),tv(t,e)}}var Pd=!0;function RO(t,e,n,s){var i=pe.T;pe.T=null;var r=Pe.p;try{Pe.p=2,nv(t,e,n,s)}finally{Pe.p=r,pe.T=i}}function DO(t,e,n,s){var i=pe.T;pe.T=null;var r=Pe.p;try{Pe.p=8,nv(t,e,n,s)}finally{Pe.p=r,pe.T=i}}function nv(t,e,n,s){if(Pd){var i=eg(s);if(i===null)vp(t,e,s,Id,n),Rx(t,s);else if(jO(i,t,e,n,s))s.stopPropagation();else if(Rx(t,s),e&4&&-1<OO.indexOf(t)){for(;i!==null;){var r=Ro(i);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var a=Ar(r.pendingLanes);if(a!==0){var o=r;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-En(a);o.entanglements[1]|=l,a&=~l}Os(r),!(je&6)&&(Td=Cn()+500,_c(0))}}break;case 31:case 13:o=aa(r,2),o!==null&&cn(o,r,2),jh(),tv(r,2)}if(r=eg(s),r===null&&vp(t,e,s,Id,n),r===i)break;i=r}i!==null&&s.stopPropagation()}else vp(t,e,s,null,n)}}function eg(t){return t=gy(t),sv(t)}var Id=null;function sv(t){if(Id=null,t=Na(t),t!==null){var e=hc(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=$w(e),t!==null)return t;t=null}else if(n===31){if(t=Yw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return Id=t,null}function kT(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vR()){case Zw:return 2;case Jw:return 8;case dd:case bR:return 32;case eS:return 268435456;default:return 32}default:return 32}}var tg=!1,$i=null,Yi=null,Ki=null,Xl=new Map,Ql=new Map,Oi=[],OO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rx(t,e){switch(t){case"focusin":case"focusout":$i=null;break;case"dragenter":case"dragleave":Yi=null;break;case"mouseover":case"mouseout":Ki=null;break;case"pointerover":case"pointerout":Xl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ql.delete(e.pointerId)}}function ol(t,e,n,s,i,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:r,targetContainers:[i]},e!==null&&(e=Ro(e),e!==null&&AT(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function jO(t,e,n,s,i){switch(e){case"focusin":return $i=ol($i,t,e,n,s,i),!0;case"dragenter":return Yi=ol(Yi,t,e,n,s,i),!0;case"mouseover":return Ki=ol(Ki,t,e,n,s,i),!0;case"pointerover":var r=i.pointerId;return Xl.set(r,ol(Xl.get(r)||null,t,e,n,s,i)),!0;case"gotpointercapture":return r=i.pointerId,Ql.set(r,ol(Ql.get(r)||null,t,e,n,s,i)),!0}return!1}function NT(t){var e=Na(t.target);if(e!==null){var n=hc(e);if(n!==null){if(e=n.tag,e===13){if(e=$w(n),e!==null){t.blockedOn=e,mb(t.priority,function(){Mx(n)});return}}else if(e===31){if(e=Yw(n),e!==null){t.blockedOn=e,mb(t.priority,function(){Mx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=eg(t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);bm=s,n.target.dispatchEvent(s),bm=null}else return e=Ro(n),e!==null&&AT(e),t.blockedOn=n,!1;e.shift()}return!0}function Dx(t,e,n){Xu(t)&&n.delete(e)}function PO(){tg=!1,$i!==null&&Xu($i)&&($i=null),Yi!==null&&Xu(Yi)&&(Yi=null),Ki!==null&&Xu(Ki)&&(Ki=null),Xl.forEach(Dx),Ql.forEach(Dx)}function hu(t,e){t.blockedOn===e&&(t.blockedOn=null,tg||(tg=!0,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,PO)))}var fu=null;function Ox(t){fu!==t&&(fu=t,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,function(){fu===t&&(fu=null);for(var e=0;e<t.length;e+=3){var n=t[e],s=t[e+1],i=t[e+2];if(typeof s!="function"){if(sv(s||n)===null)continue;break}var r=Ro(n);r!==null&&(t.splice(e,3),e-=3,Pm(r,{pending:!0,data:i,method:n.method,action:s},s,i))}}))}function mo(t){function e(l){return hu(l,t)}$i!==null&&hu($i,t),Yi!==null&&hu(Yi,t),Ki!==null&&hu(Ki,t),Xl.forEach(e),Ql.forEach(e);for(var n=0;n<Oi.length;n++){var s=Oi[n];s.blockedOn===t&&(s.blockedOn=null)}for(;0<Oi.length&&(n=Oi[0],n.blockedOn===null);)NT(n),n.blockedOn===null&&Oi.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var i=n[s],r=n[s+1],a=i[hn]||null;if(typeof r=="function")a||Ox(n);else if(a){var o=null;if(r&&r.hasAttribute("formAction")){if(i=r,a=r[hn]||null)o=a.formAction;else if(sv(i)!==null)continue}else o=a.action;typeof o=="function"?n[s+1]=o:(n.splice(s,3),s-=3),Ox(n)}}}function MT(){function t(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(a){return i=a})},focusReset:"manual",scroll:"manual"})}function e(){i!==null&&(i(),i=null),s||setTimeout(n,20)}function n(){if(!s&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,i=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){s=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),i!==null&&(i(),i=null)}}}function iv(t){this._internalRoot=t}Bh.prototype.render=iv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));var n=e.current,s=An();ET(n,s,t,e,null,null)};Bh.prototype.unmount=iv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ET(t.current,2,null,t,null,null),jh(),e[Mo]=null}};function Bh(t){this._internalRoot=t}Bh.prototype.unstable_scheduleHydration=function(t){if(t){var e=rS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Oi.length&&e!==0&&e<Oi[n].priority;n++);Oi.splice(n,0,t),n===0&&NT(t)}};var jx=qw.version;if(jx!=="19.2.4")throw Error(G(527,jx,"19.2.4"));Pe.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=dR(e),t=t!==null?Kw(t):null,t=t===null?null:t.stateNode,t};var IO={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:pe,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pu.isDisabled&&pu.supportsFiber)try{fc=pu.inject(IO),Tn=pu}catch{}}xh.createRoot=function(t,e){if(!Ww(t))throw Error(G(299));var n=!1,s="",i=_C,r=wC,a=SC;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(i=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=CT(t,1,!1,null,null,n,s,null,i,r,a,MT),t[Mo]=e.current,Zy(t),new iv(e)};xh.hydrateRoot=function(t,e,n){if(!Ww(t))throw Error(G(299));var s=!1,i="",r=_C,a=wC,o=SC,l=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.formState!==void 0&&(l=n.formState)),e=CT(t,1,!0,e,n??null,s,i,l,r,a,o,MT),e.context=TT(null),n=e.current,s=An(),s=hy(s),i=Ui(s),i.callback=null,Gi(n,i,s),n=s,e.current.lanes=n,mc(e,n),Os(e),t[Mo]=e.current,Zy(t),new Bh(e)};xh.version="19.2.4";function RT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(RT)}catch(t){console.error(t)}}RT(),Rw.exports=xh;var BO=Rw.exports,DT={exports:{}},Lh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LO=Symbol.for("react.transitional.element"),VO=Symbol.for("react.fragment");function OT(t,e,n){var s=null;if(n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),"key"in e){n={};for(var i in e)i!=="key"&&(n[i]=e[i])}else n=e;return e=n.ref,{$$typeof:LO,type:t,key:s,ref:e!==void 0?e:null,props:n}}Lh.Fragment=VO;Lh.jsx=OT;Lh.jsxs=OT;DT.exports=Lh;var f=DT.exports;const jT=g.createContext({});function zO(t){const e=g.useRef(null);return e.current===null&&(e.current=t()),e.current}const PT=typeof window<"u",FO=PT?g.useLayoutEffect:g.useEffect,rv=g.createContext(null);function av(t,e){t.indexOf(e)===-1&&t.push(e)}function ov(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Es=(t,e,n)=>n>e?e:n<t?t:n;let lv=()=>{};const oi={},IT=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function BT(t){return typeof t=="object"&&t!==null}const LT=t=>/^0[^.\s]+$/u.test(t);function cv(t){let e;return()=>(e===void 0&&(e=t()),e)}const Gn=t=>t,HO=(t,e)=>n=>e(t(n)),Cc=(...t)=>t.reduce(HO),Zl=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class uv{constructor(){this.subscriptions=[]}add(e){return av(this.subscriptions,e),()=>ov(this.subscriptions,e)}notify(e,n,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,s);else for(let r=0;r<i;r++){const a=this.subscriptions[r];a&&a(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const _s=t=>t*1e3,zn=t=>t/1e3;function VT(t,e){return e?t*(1e3/e):0}const zT=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,UO=1e-7,GO=12;function qO(t,e,n,s,i){let r,a,o=0;do a=e+(n-e)/2,r=zT(a,s,i)-t,r>0?n=a:e=a;while(Math.abs(r)>UO&&++o<GO);return a}function Tc(t,e,n,s){if(t===e&&n===s)return Gn;const i=r=>qO(r,0,1,t,n);return r=>r===0||r===1?r:zT(i(r),e,s)}const FT=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,HT=t=>e=>1-t(1-e),UT=Tc(.33,1.53,.69,.99),dv=HT(UT),GT=FT(dv),qT=t=>(t*=2)<1?.5*dv(t):.5*(2-Math.pow(2,-10*(t-1))),hv=t=>1-Math.sin(Math.acos(t)),WT=HT(hv),$T=FT(hv),WO=Tc(.42,0,1,1),$O=Tc(0,0,.58,1),YT=Tc(.42,0,.58,1),YO=t=>Array.isArray(t)&&typeof t[0]!="number",KT=t=>Array.isArray(t)&&typeof t[0]=="number",KO={linear:Gn,easeIn:WO,easeInOut:YT,easeOut:$O,circIn:hv,circInOut:$T,circOut:WT,backIn:dv,backInOut:GT,backOut:UT,anticipate:qT},XO=t=>typeof t=="string",Px=t=>{if(KT(t)){lv(t.length===4);const[e,n,s,i]=t;return Tc(e,n,s,i)}else if(XO(t))return KO[t];return t},mu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function QO(t,e){let n=new Set,s=new Set,i=!1,r=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(u){a.has(u)&&(c.schedule(u),t()),u(o)}const c={schedule:(u,d=!1,h=!1)=>{const m=h&&i?n:s;return d&&a.add(u),m.has(u)||m.add(u),u},cancel:u=>{s.delete(u),a.delete(u)},process:u=>{if(o=u,i){r=!0;return}i=!0,[n,s]=[s,n],n.forEach(l),n.clear(),i=!1,r&&(r=!1,c.process(u))}};return c}const ZO=40;function XT(t,e){let n=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,a=mu.reduce((_,w)=>(_[w]=QO(r),_),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:u,update:d,preRender:h,render:p,postRender:m}=a,y=()=>{const _=oi.useManualTiming?i.timestamp:performance.now();n=!1,oi.useManualTiming||(i.delta=s?1e3/60:Math.max(Math.min(_-i.timestamp,ZO),1)),i.timestamp=_,i.isProcessing=!0,o.process(i),l.process(i),c.process(i),u.process(i),d.process(i),h.process(i),p.process(i),m.process(i),i.isProcessing=!1,n&&e&&(s=!1,t(y))},x=()=>{n=!0,s=!0,i.isProcessing||t(y)};return{schedule:mu.reduce((_,w)=>{const S=a[w];return _[w]=(T,E=!1,C=!1)=>(n||x(),S.schedule(T,E,C)),_},{}),cancel:_=>{for(let w=0;w<mu.length;w++)a[mu[w]].cancel(_)},state:i,steps:a}}const{schedule:$e,cancel:sr,state:Dt,steps:_p}=XT(typeof requestAnimationFrame<"u"?requestAnimationFrame:Gn,!0);let Qu;function JO(){Qu=void 0}const Yt={now:()=>(Qu===void 0&&Yt.set(Dt.isProcessing||oi.useManualTiming?Dt.timestamp:performance.now()),Qu),set:t=>{Qu=t,queueMicrotask(JO)}},QT=t=>e=>typeof e=="string"&&e.startsWith(t),ZT=QT("--"),ej=QT("var(--"),fv=t=>ej(t)?tj.test(t.split("/*")[0].trim()):!1,tj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Ix(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const Bo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Jl={...Bo,transform:t=>Es(0,1,t)},gu={...Bo,default:1},jl=t=>Math.round(t*1e5)/1e5,pv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function nj(t){return t==null}const sj=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,mv=(t,e)=>n=>!!(typeof n=="string"&&sj.test(n)&&n.startsWith(t)||e&&!nj(n)&&Object.prototype.hasOwnProperty.call(n,e)),JT=(t,e,n)=>s=>{if(typeof s!="string")return s;const[i,r,a,o]=s.match(pv);return{[t]:parseFloat(i),[e]:parseFloat(r),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},ij=t=>Es(0,255,t),wp={...Bo,transform:t=>Math.round(ij(t))},Rr={test:mv("rgb","red"),parse:JT("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+wp.transform(t)+", "+wp.transform(e)+", "+wp.transform(n)+", "+jl(Jl.transform(s))+")"};function rj(t){let e="",n="",s="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,s+=s,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const ng={test:mv("#"),parse:rj,transform:Rr.transform},Ec=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Si=Ec("deg"),ws=Ec("%"),ie=Ec("px"),aj=Ec("vh"),oj=Ec("vw"),Bx={...ws,parse:t=>ws.parse(t)/100,transform:t=>ws.transform(t*100)},Va={test:mv("hsl","hue"),parse:JT("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+ws.transform(jl(e))+", "+ws.transform(jl(n))+", "+jl(Jl.transform(s))+")"},pt={test:t=>Rr.test(t)||ng.test(t)||Va.test(t),parse:t=>Rr.test(t)?Rr.parse(t):Va.test(t)?Va.parse(t):ng.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Rr.transform(t):Va.transform(t),getAnimatableNone:t=>{const e=pt.parse(t);return e.alpha=0,pt.transform(e)}},lj=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function cj(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(pv))==null?void 0:e.length)||0)+(((n=t.match(lj))==null?void 0:n.length)||0)>0}const eE="number",tE="color",uj="var",dj="var(",Lx="${}",hj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ec(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},i=[];let r=0;const o=e.replace(hj,l=>(pt.test(l)?(s.color.push(r),i.push(tE),n.push(pt.parse(l))):l.startsWith(dj)?(s.var.push(r),i.push(uj),n.push(l)):(s.number.push(r),i.push(eE),n.push(parseFloat(l))),++r,Lx)).split(Lx);return{values:n,split:o,indexes:s,types:i}}function nE(t){return ec(t).values}function sE(t){const{split:e,types:n}=ec(t),s=e.length;return i=>{let r="";for(let a=0;a<s;a++)if(r+=e[a],i[a]!==void 0){const o=n[a];o===eE?r+=jl(i[a]):o===tE?r+=pt.transform(i[a]):r+=i[a]}return r}}const fj=t=>typeof t=="number"?0:pt.test(t)?pt.getAnimatableNone(t):t;function pj(t){const e=nE(t);return sE(t)(e.map(fj))}const ir={test:cj,parse:nE,createTransformer:sE,getAnimatableNone:pj};function Sp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function mj({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let i=0,r=0,a=0;if(!e)i=r=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;i=Sp(l,o,t+1/3),r=Sp(l,o,t),a=Sp(l,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(r*255),blue:Math.round(a*255),alpha:s}}function Bd(t,e){return n=>n>0?e:t}const st=(t,e,n)=>t+(e-t)*n,Cp=(t,e,n)=>{const s=t*t,i=n*(e*e-s)+s;return i<0?0:Math.sqrt(i)},gj=[ng,Rr,Va],yj=t=>gj.find(e=>e.test(t));function Vx(t){const e=yj(t);if(!e)return!1;let n=e.parse(t);return e===Va&&(n=mj(n)),n}const zx=(t,e)=>{const n=Vx(t),s=Vx(e);if(!n||!s)return Bd(t,e);const i={...n};return r=>(i.red=Cp(n.red,s.red,r),i.green=Cp(n.green,s.green,r),i.blue=Cp(n.blue,s.blue,r),i.alpha=st(n.alpha,s.alpha,r),Rr.transform(i))},sg=new Set(["none","hidden"]);function vj(t,e){return sg.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function bj(t,e){return n=>st(t,e,n)}function gv(t){return typeof t=="number"?bj:typeof t=="string"?fv(t)?Bd:pt.test(t)?zx:wj:Array.isArray(t)?iE:typeof t=="object"?pt.test(t)?zx:xj:Bd}function iE(t,e){const n=[...t],s=n.length,i=t.map((r,a)=>gv(r)(r,e[a]));return r=>{for(let a=0;a<s;a++)n[a]=i[a](r);return n}}function xj(t,e){const n={...t,...e},s={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(s[i]=gv(t[i])(t[i],e[i]));return i=>{for(const r in s)n[r]=s[r](i);return n}}function _j(t,e){const n=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const r=e.types[i],a=t.indexes[r][s[r]],o=t.values[a]??0;n[i]=o,s[r]++}return n}const wj=(t,e)=>{const n=ir.createTransformer(e),s=ec(t),i=ec(e);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?sg.has(t)&&!i.values.length||sg.has(e)&&!s.values.length?vj(t,e):Cc(iE(_j(s,i),i.values),n):Bd(t,e)};function rE(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?st(t,e,n):gv(t)(t,e)}const Sj=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>$e.update(e,n),stop:()=>sr(e),now:()=>Dt.isProcessing?Dt.timestamp:Yt.now()}},aE=(t,e,n=10)=>{let s="";const i=Math.max(Math.round(e/n),2);for(let r=0;r<i;r++)s+=Math.round(t(r/(i-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},Ld=2e4;function yv(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<Ld;)e+=n,s=t.next(e);return e>=Ld?1/0:e}function Cj(t,e=100,n){const s=n({...t,keyframes:[0,e]}),i=Math.min(yv(s),Ld);return{type:"keyframes",ease:r=>s.next(i*r).value/e,duration:zn(i)}}const Tj=5;function oE(t,e,n){const s=Math.max(e-Tj,0);return VT(n-t(s),e-s)}const rt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Tp=.001;function Ej({duration:t=rt.duration,bounce:e=rt.bounce,velocity:n=rt.velocity,mass:s=rt.mass}){let i,r,a=1-e;a=Es(rt.minDamping,rt.maxDamping,a),t=Es(rt.minDuration,rt.maxDuration,zn(t)),a<1?(i=c=>{const u=c*a,d=u*t,h=u-n,p=ig(c,a),m=Math.exp(-d);return Tp-h/p*m},r=c=>{const d=c*a*t,h=d*n+n,p=Math.pow(a,2)*Math.pow(c,2)*t,m=Math.exp(-d),y=ig(Math.pow(c,2),a);return(-i(c)+Tp>0?-1:1)*((h-p)*m)/y}):(i=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-Tp+u*d},r=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const o=5/t,l=kj(i,r,o);if(t=_s(t),isNaN(l))return{stiffness:rt.stiffness,damping:rt.damping,duration:t};{const c=Math.pow(l,2)*s;return{stiffness:c,damping:a*2*Math.sqrt(s*c),duration:t}}}const Aj=12;function kj(t,e,n){let s=n;for(let i=1;i<Aj;i++)s=s-t(s)/e(s);return s}function ig(t,e){return t*Math.sqrt(1-e*e)}const Nj=["duration","bounce"],Mj=["stiffness","damping","mass"];function Fx(t,e){return e.some(n=>t[n]!==void 0)}function Rj(t){let e={velocity:rt.velocity,stiffness:rt.stiffness,damping:rt.damping,mass:rt.mass,isResolvedFromDuration:!1,...t};if(!Fx(t,Mj)&&Fx(t,Nj))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),i=s*s,r=2*Es(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:rt.mass,stiffness:i,damping:r}}else{const n=Ej(t);e={...e,...n,mass:rt.mass},e.isResolvedFromDuration=!0}return e}function Vd(t=rt.visualDuration,e=rt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:i}=n;const r=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:r},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:p}=Rj({...n,velocity:-zn(n.velocity||0)}),m=h||0,y=c/(2*Math.sqrt(l*u)),x=a-r,v=zn(Math.sqrt(l/u)),b=Math.abs(x)<5;s||(s=b?rt.restSpeed.granular:rt.restSpeed.default),i||(i=b?rt.restDelta.granular:rt.restDelta.default);let _;if(y<1){const S=ig(v,y);_=T=>{const E=Math.exp(-y*v*T);return a-E*((m+y*v*x)/S*Math.sin(S*T)+x*Math.cos(S*T))}}else if(y===1)_=S=>a-Math.exp(-v*S)*(x+(m+v*x)*S);else{const S=v*Math.sqrt(y*y-1);_=T=>{const E=Math.exp(-y*v*T),C=Math.min(S*T,300);return a-E*((m+y*v*x)*Math.sinh(C)+S*x*Math.cosh(C))/S}}const w={calculatedDuration:p&&d||null,next:S=>{const T=_(S);if(p)o.done=S>=d;else{let E=S===0?m:0;y<1&&(E=S===0?_s(m):oE(_,S,T));const C=Math.abs(E)<=s,M=Math.abs(a-T)<=i;o.done=C&&M}return o.value=o.done?a:T,o},toString:()=>{const S=Math.min(yv(w),Ld),T=aE(E=>w.next(S*E).value,S,30);return S+"ms "+T},toTransition:()=>{}};return w}Vd.applyToOptions=t=>{const e=Cj(t,100,Vd);return t.ease=e.ease,t.duration=_s(e.duration),t.type="keyframes",t};function rg({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:r=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],h={done:!1,value:d},p=C=>o!==void 0&&C<o||l!==void 0&&C>l,m=C=>o===void 0?l:l===void 0||Math.abs(o-C)<Math.abs(l-C)?o:l;let y=n*e;const x=d+y,v=a===void 0?x:a(x);v!==x&&(y=v-d);const b=C=>-y*Math.exp(-C/s),_=C=>v+b(C),w=C=>{const M=b(C),A=_(C);h.done=Math.abs(M)<=c,h.value=h.done?v:A};let S,T;const E=C=>{p(h.value)&&(S=C,T=Vd({keyframes:[h.value,m(h.value)],velocity:oE(_,C,h.value),damping:i,stiffness:r,restDelta:c,restSpeed:u}))};return E(0),{calculatedDuration:null,next:C=>{let M=!1;return!T&&S===void 0&&(M=!0,w(C),E(C)),S!==void 0&&C>=S?T.next(C-S):(!M&&w(C),h)}}}function Dj(t,e,n){const s=[],i=n||oi.mix||rE,r=t.length-1;for(let a=0;a<r;a++){let o=i(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||Gn:e;o=Cc(l,o)}s.push(o)}return s}function Oj(t,e,{clamp:n=!0,ease:s,mixer:i}={}){const r=t.length;if(lv(r===e.length),r===1)return()=>e[0];if(r===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[r-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=Dj(e,s,i),l=o.length,c=u=>{if(a&&u<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const h=Zl(t[d],t[d+1],u);return o[d](h)};return n?u=>c(Es(t[0],t[r-1],u)):c}function jj(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const i=Zl(0,e,s);t.push(st(n,1,i))}}function Pj(t){const e=[0];return jj(e,t.length-1),e}function Ij(t,e){return t.map(n=>n*e)}function Bj(t,e){return t.map(()=>e||YT).splice(0,t.length-1)}function Pl({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const i=YO(s)?s.map(Px):Px(s),r={done:!1,value:e[0]},a=Ij(n&&n.length===e.length?n:Pj(e),t),o=Oj(a,e,{ease:Array.isArray(i)?i:Bj(e,i)});return{calculatedDuration:t,next:l=>(r.value=o(l),r.done=l>=t,r)}}const Lj=t=>t!==null;function vv(t,{repeat:e,repeatType:n="loop"},s,i=1){const r=t.filter(Lj),o=i<0||e&&n!=="loop"&&e%2===1?0:r.length-1;return!o||s===void 0?r[o]:s}const Vj={decay:rg,inertia:rg,tween:Pl,keyframes:Pl,spring:Vd};function lE(t){typeof t.type=="string"&&(t.type=Vj[t.type])}class bv{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const zj=t=>t/100;class xv extends bv{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var s,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Yt.now()&&this.tick(Yt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(s=this.options).onStop)==null||i.call(s))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;lE(e);const{type:n=Pl,repeat:s=0,repeatDelay:i=0,repeatType:r,velocity:a=0}=e;let{keyframes:o}=e;const l=n||Pl;l!==Pl&&typeof o[0]!="number"&&(this.mixKeyframes=Cc(zj,rE(o[0],o[1])),o=[0,100]);const c=l({...e,keyframes:o});r==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=yv(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+i,this.totalDuration=this.resolvedDuration*(s+1)-i,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:i,mixKeyframes:r,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return s.next(0);const{delay:c=0,keyframes:u,repeat:d,repeatType:h,repeatDelay:p,type:m,onUpdate:y,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const v=this.currentTime-c*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?v<0:v>i;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let _=this.currentTime,w=s;if(d){const C=Math.min(this.currentTime,i)/o;let M=Math.floor(C),A=C%1;!A&&C>=1&&(A=1),A===1&&M--,M=Math.min(M,d+1),!!(M%2)&&(h==="reverse"?(A=1-A,p&&(A-=p/o)):h==="mirror"&&(w=a)),_=Es(0,1,A)*o}const S=b?{done:!1,value:u[0]}:w.next(_);r&&(S.value=r(S.value));let{done:T}=S;!b&&l!==null&&(T=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&T);return E&&m!==rg&&(S.value=vv(u,this.options,x,this.speed)),y&&y(S.value),E&&this.finish(),S}then(e,n){return this.finished.then(e,n)}get duration(){return zn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+zn(e)}get time(){return zn(this.currentTime)}set time(e){var n;e=_s(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Yt.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=zn(this.currentTime))}play(){var i,r;if(this.isStopped)return;const{driver:e=Sj,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(r=(i=this.options).onPlay)==null||r.call(i);const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Yt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function Fj(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Dr=t=>t*180/Math.PI,ag=t=>{const e=Dr(Math.atan2(t[1],t[0]));return og(e)},Hj={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:ag,rotateZ:ag,skewX:t=>Dr(Math.atan(t[1])),skewY:t=>Dr(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},og=t=>(t=t%360,t<0&&(t+=360),t),Hx=ag,Ux=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Gx=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Uj={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Ux,scaleY:Gx,scale:t=>(Ux(t)+Gx(t))/2,rotateX:t=>og(Dr(Math.atan2(t[6],t[5]))),rotateY:t=>og(Dr(Math.atan2(-t[2],t[0]))),rotateZ:Hx,rotate:Hx,skewX:t=>Dr(Math.atan(t[4])),skewY:t=>Dr(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function lg(t){return t.includes("scale")?1:0}function cg(t,e){if(!t||t==="none")return lg(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,i;if(n)s=Uj,i=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=Hj,i=o}if(!i)return lg(e);const r=s[e],a=i[1].split(",").map(qj);return typeof r=="function"?r(a):a[r]}const Gj=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return cg(n,e)};function qj(t){return parseFloat(t.trim())}const Lo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Vo=new Set(Lo),qx=t=>t===Bo||t===ie,Wj=new Set(["x","y","z"]),$j=Lo.filter(t=>!Wj.has(t));function Yj(t){const e=[];return $j.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const zi={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>cg(e,"x"),y:(t,{transform:e})=>cg(e,"y")};zi.translateX=zi.x;zi.translateY=zi.y;const Fr=new Set;let ug=!1,dg=!1,hg=!1;function cE(){if(dg){const t=Array.from(Fr).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const i=Yj(s);i.length&&(n.set(s,i),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const i=n.get(s);i&&i.forEach(([r,a])=>{var o;(o=s.getValue(r))==null||o.set(a)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}dg=!1,ug=!1,Fr.forEach(t=>t.complete(hg)),Fr.clear()}function uE(){Fr.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(dg=!0)})}function Kj(){hg=!0,uE(),cE(),hg=!1}class _v{constructor(e,n,s,i,r,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=i,this.element=r,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Fr.add(this),ug||(ug=!0,$e.read(uE),$e.resolveKeyframes(cE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:i}=this;if(e[0]===null){const r=i==null?void 0:i.get(),a=e[e.length-1];if(r!==void 0)e[0]=r;else if(s&&n){const o=s.readValue(n,a);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=a),i&&r===void 0&&i.set(e[0])}Fj(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Fr.delete(this)}cancel(){this.state==="scheduled"&&(Fr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Xj=t=>t.startsWith("--");function Qj(t,e,n){Xj(e)?t.style.setProperty(e,n):t.style[e]=n}const Zj=cv(()=>window.ScrollTimeline!==void 0),Jj={};function e5(t,e){const n=cv(t);return()=>Jj[e]??n()}const dE=e5(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),yl=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,Wx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:yl([0,.65,.55,1]),circOut:yl([.55,0,1,.45]),backIn:yl([.31,.01,.66,-.59]),backOut:yl([.33,1.53,.69,.99])};function hE(t,e){if(t)return typeof t=="function"?dE()?aE(t,e):"ease-out":KT(t)?yl(t):Array.isArray(t)?t.map(n=>hE(n,e)||Wx.easeOut):Wx[t]}function t5(t,e,n,{delay:s=0,duration:i=300,repeat:r=0,repeatType:a="loop",ease:o="easeOut",times:l}={},c=void 0){const u={[e]:n};l&&(u.offset=l);const d=hE(o,i);Array.isArray(d)&&(u.easing=d);const h={delay:s,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:r+1,direction:a==="reverse"?"alternate":"normal"};return c&&(h.pseudoElement=c),t.animate(u,h)}function fE(t){return typeof t=="function"&&"applyToOptions"in t}function n5({type:t,...e}){return fE(t)&&dE()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class s5 extends bv{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:s,keyframes:i,pseudoElement:r,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!r,this.allowFlatten=a,this.options=e,lv(typeof e.type!="string");const c=n5(e);this.animation=t5(n,s,i,c,r),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const u=vv(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(u):Qj(n,s,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,s,i;const e=(n=this.options)==null?void 0:n.element;!this.isPseudoElement&&(e!=null&&e.isConnected)&&((i=(s=this.animation).commitStyles)==null||i.call(s))}get duration(){var n,s;const e=((s=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:s.call(n).duration)||0;return zn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+zn(e)}get time(){return zn(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=_s(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var s;return this.allowFlatten&&((s=this.animation.effect)==null||s.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Zj()?(this.animation.timeline=e,Gn):n(this)}}const pE={anticipate:qT,backInOut:GT,circInOut:$T};function i5(t){return t in pE}function r5(t){typeof t.ease=="string"&&i5(t.ease)&&(t.ease=pE[t.ease])}const Ep=10;class a5 extends s5{constructor(e){r5(e),lE(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:i,element:r,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new xv({...a,autoplay:!1}),l=Math.max(Ep,Yt.now()-this.startTime),c=Es(0,Ep,l-Ep);n.setWithVelocity(o.sample(Math.max(0,l-c)).value,o.sample(l).value,c),o.stop()}}const $x=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ir.test(t)||t==="0")&&!t.startsWith("url("));function o5(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function l5(t,e,n,s){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const r=t[t.length-1],a=$x(i,e),o=$x(r,e);return!a||!o?!1:o5(t)||(n==="spring"||fE(n))&&s}function fg(t){t.duration=0,t.type="keyframes"}const c5=new Set(["opacity","clipPath","filter","transform"]),u5=cv(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function d5(t){var u;const{motionValue:e,name:n,repeatDelay:s,repeatType:i,damping:r,type:a}=t;if(!(((u=e==null?void 0:e.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return u5()&&n&&c5.has(n)&&(n!=="transform"||!c)&&!l&&!s&&i!=="mirror"&&r!==0&&a!=="inertia"}const h5=40;class f5 extends bv{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:a="loop",keyframes:o,name:l,motionValue:c,element:u,...d}){var m;super(),this.stop=()=>{var y,x;this._animation&&(this._animation.stop(),(y=this.stopTimeline)==null||y.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=Yt.now();const h={autoplay:e,delay:n,type:s,repeat:i,repeatDelay:r,repeatType:a,name:l,motionValue:c,element:u,...d},p=(u==null?void 0:u.KeyframeResolver)||_v;this.keyframeResolver=new p(o,(y,x,v)=>this.onKeyframesResolved(y,x,h,!v),l,c,u),(m=this.keyframeResolver)==null||m.scheduleResolve()}onKeyframesResolved(e,n,s,i){var x,v;this.keyframeResolver=void 0;const{name:r,type:a,velocity:o,delay:l,isHandoff:c,onUpdate:u}=s;this.resolvedAt=Yt.now(),l5(e,r,a,o)||((oi.instantAnimations||!l)&&(u==null||u(vv(e,s,n))),e[0]=e[e.length-1],fg(s),s.repeat=0);const h={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>h5?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},p=!c&&d5(h),m=(v=(x=h.motionValue)==null?void 0:x.owner)==null?void 0:v.current,y=p?new a5({...h,element:m}):new xv(h);y.finished.then(()=>{this.notifyFinished()}).catch(Gn),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Kj()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function mE(t,e,n,s=0,i=1){const r=Array.from(t).sort((c,u)=>c.sortNodePosition(u)).indexOf(e),a=t.size,o=(a-1)*s;return typeof n=="function"?n(r,a):i===1?r*s:o-r*s}const p5=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function m5(t){const e=p5.exec(t);if(!e)return[,];const[,n,s,i]=e;return[`--${n??s}`,i]}function gE(t,e,n=1){const[s,i]=m5(t);if(!s)return;const r=window.getComputedStyle(e).getPropertyValue(s);if(r){const a=r.trim();return IT(a)?parseFloat(a):a}return fv(i)?gE(i,e,n+1):i}const g5={type:"spring",stiffness:500,damping:25,restSpeed:10},y5=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),v5={type:"keyframes",duration:.8},b5={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},x5=(t,{keyframes:e})=>e.length>2?v5:Vo.has(t)?t.startsWith("scale")?y5(e[1]):g5:b5,_5=t=>t!==null;function w5(t,{repeat:e,repeatType:n="loop"},s){const i=t.filter(_5),r=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[r]}function yE(t,e){if(t!=null&&t.inherit&&e){const{inherit:n,...s}=t;return{...e,...s}}return t}function wv(t,e){const n=(t==null?void 0:t[e])??(t==null?void 0:t.default)??t;return n!==t?yE(n,t):n}function S5({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:i,repeat:r,repeatType:a,repeatDelay:o,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const Sv=(t,e,n,s={},i,r)=>a=>{const o=wv(s,t)||{},l=o.delay||s.delay||0;let{elapsed:c=0}=s;c=c-_s(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-c,onUpdate:h=>{e.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:r?void 0:i};S5(o)||Object.assign(u,x5(t,u)),u.duration&&(u.duration=_s(u.duration)),u.repeatDelay&&(u.repeatDelay=_s(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(fg(u),u.delay===0&&(d=!0)),(oi.instantAnimations||oi.skipAnimations||i!=null&&i.shouldSkipAnimations)&&(d=!0,fg(u),u.delay=0),u.allowFlatten=!o.type&&!o.ease,d&&!r&&e.get()!==void 0){const h=w5(u.keyframes,o);if(h!==void 0){$e.update(()=>{u.onUpdate(h),u.onComplete()});return}}return o.isSync?new xv(u):new f5(u)};function Yx(t){const e=[{},{}];return t==null||t.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function Cv(t,e,n,s){if(typeof e=="function"){const[i,r]=Yx(s);e=e(n!==void 0?n:t.custom,i,r)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,r]=Yx(s);e=e(n!==void 0?n:t.custom,i,r)}return e}function eo(t,e,n){const s=t.getProps();return Cv(s,e,n!==void 0?n:s.custom,t)}const vE=new Set(["width","height","top","left","right","bottom",...Lo]),Kx=30,C5=t=>!isNaN(parseFloat(t));class T5{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{var r;const i=Yt.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&((r=this.events.change)==null||r.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Yt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=C5(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new uv);const s=this.events[e].add(n);return e==="change"?()=>{s(),$e.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Yt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Kx)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Kx);return VT(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function go(t,e){return new T5(t,e)}const pg=t=>Array.isArray(t);function E5(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,go(n))}function A5(t){return pg(t)?t[t.length-1]||0:t}function k5(t,e){const n=eo(t,e);let{transitionEnd:s={},transition:i={},...r}=n||{};r={...r,...s};for(const a in r){const o=A5(r[a]);E5(t,a,o)}}const Ft=t=>!!(t&&t.getVelocity);function N5(t){return!!(Ft(t)&&t.add)}function mg(t,e){const n=t.getValue("willChange");if(N5(n))return n.add(e);if(!n&&oi.WillChange){const s=new oi.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function Tv(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const M5="framerAppearId",bE="data-"+Tv(M5);function xE(t){return t.props[bE]}function R5({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function _E(t,e,{delay:n=0,transitionOverride:s,type:i}={}){let{transition:r,transitionEnd:a,...o}=e;const l=t.getDefaultTransition();r=r?yE(r,l):l;const c=r==null?void 0:r.reduceMotion;s&&(r=s);const u=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in o){const p=t.getValue(h,t.latestValues[h]??null),m=o[h];if(m===void 0||d&&R5(d,h))continue;const y={delay:n,...wv(r||{},h)},x=p.get();if(x!==void 0&&!p.isAnimating&&!Array.isArray(m)&&m===x&&!y.velocity)continue;let v=!1;if(window.MotionHandoffAnimation){const w=xE(t);if(w){const S=window.MotionHandoffAnimation(w,h,$e);S!==null&&(y.startTime=S,v=!0)}}mg(t,h);const b=c??t.shouldReduceMotion;p.start(Sv(h,p,m,b&&vE.has(h)?{type:!1}:y,t,v));const _=p.animation;_&&u.push(_)}if(a){const h=()=>$e.update(()=>{a&&k5(t,a)});u.length?Promise.all(u).then(h):h()}return u}function gg(t,e,n={}){var l;const s=eo(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const r=s?()=>Promise.all(_E(t,s,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=i;return D5(t,e,c,u,d,h,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[c,u]=o==="beforeChildren"?[r,a]:[a,r];return c().then(()=>u())}else return Promise.all([r(),a(n.delay)])}function D5(t,e,n=0,s=0,i=0,r=1,a){const o=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),o.push(gg(l,e,{...a,delay:n+(typeof s=="function"?0:s)+mE(t.variantChildren,l,s,i,r)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(o)}function O5(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const i=e.map(r=>gg(t,r,n));s=Promise.all(i)}else if(typeof e=="string")s=gg(t,e,n);else{const i=typeof e=="function"?eo(t,e,n.custom):e;s=Promise.all(_E(t,i,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}const j5={test:t=>t==="auto",parse:t=>t},wE=t=>e=>e.test(t),SE=[Bo,ie,ws,Si,oj,aj,j5],Xx=t=>SE.find(wE(t));function P5(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||LT(t):!0}const I5=new Set(["brightness","contrast","saturate","opacity"]);function B5(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(pv)||[];if(!s)return t;const i=n.replace(s,"");let r=I5.has(e)?1:0;return s!==n&&(r*=100),e+"("+r+i+")"}const L5=/\b([a-z-]*)\(.*?\)/gu,yg={...ir,getAnimatableNone:t=>{const e=t.match(L5);return e?e.map(B5).join(" "):t}},Qx={...Bo,transform:Math.round},V5={rotate:Si,rotateX:Si,rotateY:Si,rotateZ:Si,scale:gu,scaleX:gu,scaleY:gu,scaleZ:gu,skew:Si,skewX:Si,skewY:Si,distance:ie,translateX:ie,translateY:ie,translateZ:ie,x:ie,y:ie,z:ie,perspective:ie,transformPerspective:ie,opacity:Jl,originX:Bx,originY:Bx,originZ:ie},Ev={borderWidth:ie,borderTopWidth:ie,borderRightWidth:ie,borderBottomWidth:ie,borderLeftWidth:ie,borderRadius:ie,borderTopLeftRadius:ie,borderTopRightRadius:ie,borderBottomRightRadius:ie,borderBottomLeftRadius:ie,width:ie,maxWidth:ie,height:ie,maxHeight:ie,top:ie,right:ie,bottom:ie,left:ie,inset:ie,insetBlock:ie,insetBlockStart:ie,insetBlockEnd:ie,insetInline:ie,insetInlineStart:ie,insetInlineEnd:ie,padding:ie,paddingTop:ie,paddingRight:ie,paddingBottom:ie,paddingLeft:ie,paddingBlock:ie,paddingBlockStart:ie,paddingBlockEnd:ie,paddingInline:ie,paddingInlineStart:ie,paddingInlineEnd:ie,margin:ie,marginTop:ie,marginRight:ie,marginBottom:ie,marginLeft:ie,marginBlock:ie,marginBlockStart:ie,marginBlockEnd:ie,marginInline:ie,marginInlineStart:ie,marginInlineEnd:ie,fontSize:ie,backgroundPositionX:ie,backgroundPositionY:ie,...V5,zIndex:Qx,fillOpacity:Jl,strokeOpacity:Jl,numOctaves:Qx},z5={...Ev,color:pt,backgroundColor:pt,outlineColor:pt,fill:pt,stroke:pt,borderColor:pt,borderTopColor:pt,borderRightColor:pt,borderBottomColor:pt,borderLeftColor:pt,filter:yg,WebkitFilter:yg},CE=t=>z5[t];function TE(t,e){let n=CE(t);return n!==yg&&(n=ir),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const F5=new Set(["auto","none","0"]);function H5(t,e,n){let s=0,i;for(;s<t.length&&!i;){const r=t[s];typeof r=="string"&&!F5.has(r)&&ec(r).values.length&&(i=t[s]),s++}if(i&&n)for(const r of e)t[r]=TE(n,i)}class U5 extends _v{constructor(e,n,s,i,r){super(e,n,s,i,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let d=e[u];if(typeof d=="string"&&(d=d.trim(),fv(d))){const h=gE(d,n.current);h!==void 0&&(e[u]=h),u===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!vE.has(s)||e.length!==2)return;const[i,r]=e,a=Xx(i),o=Xx(r),l=Ix(i),c=Ix(r);if(l!==c&&zi[s]){this.needsMeasurement=!0;return}if(a!==o)if(qx(a)&&qx(o))for(let u=0;u<e.length;u++){const d=e[u];typeof d=="string"&&(e[u]=parseFloat(d))}else zi[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let i=0;i<e.length;i++)(e[i]===null||P5(e[i]))&&s.push(i);s.length&&H5(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=zi[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(s,i).jump(i,!1)}measureEndState(){var o;const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const r=s.length-1,a=s[r];s[r]=zi[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function EE(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const i=(n==null?void 0:n[t])??s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t).filter(s=>s!=null)}const AE=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function G5(t){return BT(t)&&"offsetHeight"in t}const{schedule:Av}=XT(queueMicrotask,!1),Xn={x:!1,y:!1};function kE(){return Xn.x||Xn.y}function q5(t){return t==="x"||t==="y"?Xn[t]?null:(Xn[t]=!0,()=>{Xn[t]=!1}):Xn.x||Xn.y?null:(Xn.x=Xn.y=!0,()=>{Xn.x=Xn.y=!1})}function NE(t,e){const n=EE(t),s=new AbortController,i={passive:!0,...e,signal:s.signal};return[n,i,()=>s.abort()]}function W5(t){return!(t.pointerType==="touch"||kE())}function $5(t,e,n={}){const[s,i,r]=NE(t,n);return s.forEach(a=>{let o=!1,l=!1,c;const u=()=>{a.removeEventListener("pointerleave",m)},d=x=>{c&&(c(x),c=void 0),u()},h=x=>{o=!1,window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",h),l&&(l=!1,d(x))},p=()=>{o=!0,window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",h,i)},m=x=>{if(x.pointerType!=="touch"){if(o){l=!0;return}d(x)}},y=x=>{if(!W5(x))return;l=!1;const v=e(a,x);typeof v=="function"&&(c=v,a.addEventListener("pointerleave",m,i))};a.addEventListener("pointerenter",y,i),a.addEventListener("pointerdown",p,i)}),r}const ME=(t,e)=>e?t===e?!0:ME(t,e.parentElement):!1,kv=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Y5=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function K5(t){return Y5.has(t.tagName)||t.isContentEditable===!0}const X5=new Set(["INPUT","SELECT","TEXTAREA"]);function Q5(t){return X5.has(t.tagName)||t.isContentEditable===!0}const Zu=new WeakSet;function Zx(t){return e=>{e.key==="Enter"&&t(e)}}function Ap(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Z5=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=Zx(()=>{if(Zu.has(n))return;Ap(n,"down");const i=Zx(()=>{Ap(n,"up")}),r=()=>Ap(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",r,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function Jx(t){return kv(t)&&!kE()}const e1=new WeakSet;function J5(t,e,n={}){const[s,i,r]=NE(t,n),a=o=>{const l=o.currentTarget;if(!Jx(o)||e1.has(o))return;Zu.add(l),n.stopPropagation&&e1.add(o);const c=e(l,o),u=(p,m)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),Zu.has(l)&&Zu.delete(l),Jx(p)&&typeof c=="function"&&c(p,{success:m})},d=p=>{u(p,l===window||l===document||n.useGlobalTarget||ME(l,p.target))},h=p=>{u(p,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",h,i)};return s.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),G5(o)&&(o.addEventListener("focus",c=>Z5(c,i)),!K5(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),r}function Nv(t){return BT(t)&&"ownerSVGElement"in t}const Ju=new WeakMap;let Ci;const RE=(t,e,n)=>(s,i)=>i&&i[0]?i[0][t+"Size"]:Nv(s)&&"getBBox"in s?s.getBBox()[e]:s[n],eP=RE("inline","width","offsetWidth"),tP=RE("block","height","offsetHeight");function nP({target:t,borderBoxSize:e}){var n;(n=Ju.get(t))==null||n.forEach(s=>{s(t,{get width(){return eP(t,e)},get height(){return tP(t,e)}})})}function sP(t){t.forEach(nP)}function iP(){typeof ResizeObserver>"u"||(Ci=new ResizeObserver(sP))}function rP(t,e){Ci||iP();const n=EE(t);return n.forEach(s=>{let i=Ju.get(s);i||(i=new Set,Ju.set(s,i)),i.add(e),Ci==null||Ci.observe(s)}),()=>{n.forEach(s=>{const i=Ju.get(s);i==null||i.delete(e),i!=null&&i.size||Ci==null||Ci.unobserve(s)})}}const ed=new Set;let za;function aP(){za=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};ed.forEach(e=>e(t))},window.addEventListener("resize",za)}function oP(t){return ed.add(t),za||aP(),()=>{ed.delete(t),!ed.size&&typeof za=="function"&&(window.removeEventListener("resize",za),za=void 0)}}function t1(t,e){return typeof t=="function"?oP(t):rP(t,e)}function lP(t){return Nv(t)&&t.tagName==="svg"}const cP=[...SE,pt,ir],uP=t=>cP.find(wE(t)),n1=()=>({translate:0,scale:1,origin:0,originPoint:0}),Fa=()=>({x:n1(),y:n1()}),s1=()=>({min:0,max:0}),xt=()=>({x:s1(),y:s1()}),vg={current:null},DE={current:!1},dP=typeof window<"u";function hP(){if(DE.current=!0,!!dP)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>vg.current=t.matches;t.addEventListener("change",e),e()}else vg.current=!1}const fP=new WeakMap;function Vh(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function tc(t){return typeof t=="string"||Array.isArray(t)}const Mv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Rv=["initial",...Mv];function zh(t){return Vh(t.animate)||Rv.some(e=>tc(t[e]))}function OE(t){return!!(zh(t)||t.variants)}function pP(t,e,n){for(const s in e){const i=e[s],r=n[s];if(Ft(i))t.addValue(s,i);else if(Ft(r))t.addValue(s,go(i,{owner:t}));else if(r!==i)if(t.hasValue(s)){const a=t.getValue(s);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(s);t.addValue(s,go(a!==void 0?a:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const i1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let zd={};function jE(t){zd=t}function mP(){return zd}class gP{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:i,skipAnimations:r,blockInitialAnimation:a,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=_v,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Yt.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,$e.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.skipAnimationsConfig=r,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=zh(n),this.isVariantNode=OE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in h){const m=h[p];c[p]!==void 0&&Ft(m)&&m.set(c[p])}}mount(e){var n,s;if(this.hasBeenMounted)for(const i in this.initialValues)(n=this.values.get(i))==null||n.jump(this.initialValues[i]),this.latestValues[i]=this.initialValues[i];this.current=e,fP.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,r)=>this.bindToMotionValue(r,i)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(DE.current||hP(),this.shouldReduceMotion=vg.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(s=this.parent)==null||s.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var e;this.projection&&this.projection.unmount(),sr(this.notifyUpdate),sr(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const s=this.features[n];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=Vo.has(e);s&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&$e.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;typeof window<"u"&&window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),r&&r(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in zd){const n=zd[e];if(!n)continue;const{isEnabled:s,Feature:i}=n;if(!this.features[e]&&i&&s(this.props)&&(this.features[e]=new i(this)),this.features[e]){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):xt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<i1.length;s++){const i=i1[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const r="on"+i,a=e[r];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=pP(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=go(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(IT(s)||LT(s))?s=parseFloat(s):!uP(s)&&ir.test(n)&&(s=TE(e,n)),this.setBaseTarget(e,Ft(s)?s.get():s)),Ft(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var r;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const a=Cv(this.props,n,(r=this.presenceContext)==null?void 0:r.custom);a&&(s=a[e])}if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Ft(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new uv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Av.render(this.render)}}class PE extends gP{constructor(){super(...arguments),this.KeyframeResolver=U5}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const s=e.style;return s?s[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ft(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class pr{constructor(e){this.isMounted=!1,this.node=e}update(){}}function IE({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function yP({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function vP(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function kp(t){return t===void 0||t===1}function bg({scale:t,scaleX:e,scaleY:n}){return!kp(t)||!kp(e)||!kp(n)}function Mr(t){return bg(t)||BE(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function BE(t){return r1(t.x)||r1(t.y)}function r1(t){return t&&t!=="0%"}function Fd(t,e,n){const s=t-n,i=e*s;return n+i}function a1(t,e,n,s,i){return i!==void 0&&(t=Fd(t,i,s)),Fd(t,n,s)+e}function xg(t,e=0,n=1,s,i){t.min=a1(t.min,e,n,s,i),t.max=a1(t.max,e,n,s,i)}function LE(t,{x:e,y:n}){xg(t.x,e.translate,e.scale,e.originPoint),xg(t.y,n.translate,n.scale,n.originPoint)}const o1=.999999999999,l1=1.0000000000001;function bP(t,e,n,s=!1){const i=n.length;if(!i)return;e.x=e.y=1;let r,a;for(let o=0;o<i;o++){r=n[o],a=r.projectionDelta;const{visualElement:l}=r.options;l&&l.props.style&&l.props.style.display==="contents"||(s&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Ua(t,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,LE(t,a)),s&&Mr(r.latestValues)&&Ua(t,r.latestValues))}e.x<l1&&e.x>o1&&(e.x=1),e.y<l1&&e.y>o1&&(e.y=1)}function Ha(t,e){t.min=t.min+e,t.max=t.max+e}function c1(t,e,n,s,i=.5){const r=st(t.min,t.max,i);xg(t,e,n,r,s)}function Ua(t,e){c1(t.x,e.x,e.scaleX,e.scale,e.originX),c1(t.y,e.y,e.scaleY,e.scale,e.originY)}function VE(t,e){return IE(vP(t.getBoundingClientRect(),e))}function xP(t,e,n){const s=VE(t,n),{scroll:i}=e;return i&&(Ha(s.x,i.offset.x),Ha(s.y,i.offset.y)),s}const _P={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},wP=Lo.length;function SP(t,e,n){let s="",i=!0;for(let r=0;r<wP;r++){const a=Lo[r],o=t[a];if(o===void 0)continue;let l=!0;if(typeof o=="number")l=o===(a.startsWith("scale")?1:0);else{const c=parseFloat(o);l=a.startsWith("scale")?c===1:c===0}if(!l||n){const c=AE(o,Ev[a]);if(!l){i=!1;const u=_P[a]||a;s+=`${u}(${c}) `}n&&(e[a]=c)}}return s=s.trim(),n?s=n(e,i?"":s):i&&(s="none"),s}function Dv(t,e,n){const{style:s,vars:i,transformOrigin:r}=t;let a=!1,o=!1;for(const l in e){const c=e[l];if(Vo.has(l)){a=!0;continue}else if(ZT(l)){i[l]=c;continue}else{const u=AE(c,Ev[l]);l.startsWith("origin")?(o=!0,r[l]=u):s[l]=u}}if(e.transform||(a||n?s.transform=SP(e,t.transform,n):s.transform&&(s.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:u=0}=r;s.transformOrigin=`${l} ${c} ${u}`}}function zE(t,{style:e,vars:n},s,i){const r=t.style;let a;for(a in e)r[a]=e[a];i==null||i.applyProjectionStyles(r,s);for(a in n)r.setProperty(a,n[a])}function u1(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ll={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ie.test(t))t=parseFloat(t);else return t;const n=u1(t,e.target.x),s=u1(t,e.target.y);return`${n}% ${s}%`}},CP={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,i=ir.parse(t);if(i.length>5)return s;const r=ir.createTransformer(t),a=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;i[0+a]/=o,i[1+a]/=l;const c=st(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=c),typeof i[3+a]=="number"&&(i[3+a]/=c),r(i)}},_g={borderRadius:{...ll,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ll,borderTopRightRadius:ll,borderBottomLeftRadius:ll,borderBottomRightRadius:ll,boxShadow:CP};function FE(t,{layout:e,layoutId:n}){return Vo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!_g[t]||t==="opacity")}function Ov(t,e,n){var a;const s=t.style,i=e==null?void 0:e.style,r={};if(!s)return r;for(const o in s)(Ft(s[o])||i&&Ft(i[o])||FE(o,t)||((a=n==null?void 0:n.getValue(o))==null?void 0:a.liveStyle)!==void 0)&&(r[o]=s[o]);return r}function TP(t){return window.getComputedStyle(t)}class EP extends PE{constructor(){super(...arguments),this.type="html",this.renderInstance=zE}readValueFromInstance(e,n){var s;if(Vo.has(n))return(s=this.projection)!=null&&s.isProjecting?lg(n):Gj(e,n);{const i=TP(e),r=(ZT(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return VE(e,n)}build(e,n,s){Dv(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return Ov(e,n,s)}}const AP={offset:"stroke-dashoffset",array:"stroke-dasharray"},kP={offset:"strokeDashoffset",array:"strokeDasharray"};function NP(t,e,n=1,s=0,i=!0){t.pathLength=1;const r=i?AP:kP;t[r.offset]=`${-s}`,t[r.array]=`${e} ${n}`}const MP=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function HE(t,{attrX:e,attrY:n,attrScale:s,pathLength:i,pathSpacing:r=1,pathOffset:a=0,...o},l,c,u){if(Dv(t,o,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:h}=t;d.transform&&(h.transform=d.transform,delete d.transform),(h.transform||d.transformOrigin)&&(h.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),h.transform&&(h.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete d.transformBox);for(const p of MP)d[p]!==void 0&&(h[p]=d[p],delete d[p]);e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),s!==void 0&&(d.scale=s),i!==void 0&&NP(d,i,r,a,!1)}const UE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),GE=t=>typeof t=="string"&&t.toLowerCase()==="svg";function RP(t,e,n,s){zE(t,e,void 0,s);for(const i in e.attrs)t.setAttribute(UE.has(i)?i:Tv(i),e.attrs[i])}function qE(t,e,n){const s=Ov(t,e,n);for(const i in t)if(Ft(t[i])||Ft(e[i])){const r=Lo.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[r]=t[i]}return s}class DP extends PE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=xt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Vo.has(n)){const s=CE(n);return s&&s.default||0}return n=UE.has(n)?n:Tv(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return qE(e,n,s)}build(e,n,s){HE(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,i){RP(e,n,s,i)}mount(e){this.isSVGTag=GE(e.tagName),super.mount(e)}}const OP=Rv.length;function WE(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?WE(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<OP;n++){const s=Rv[n],i=t.props[s];(tc(i)||i===!1)&&(e[s]=i)}return e}function $E(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const jP=[...Mv].reverse(),PP=Mv.length;function IP(t){return e=>Promise.all(e.map(({animation:n,options:s})=>O5(t,n,s)))}function BP(t){let e=IP(t),n=d1(),s=!0;const i=l=>(c,u)=>{var h;const d=eo(t,u,l==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);if(d){const{transition:p,transitionEnd:m,...y}=d;c={...c,...y,...m}}return c};function r(l){e=l(t)}function a(l){const{props:c}=t,u=WE(t.parent)||{},d=[],h=new Set;let p={},m=1/0;for(let x=0;x<PP;x++){const v=jP[x],b=n[v],_=c[v]!==void 0?c[v]:u[v],w=tc(_),S=v===l?b.isActive:null;S===!1&&(m=x);let T=_===u[v]&&_!==c[v]&&w;if(T&&s&&t.manuallyAnimateOnMount&&(T=!1),b.protectedKeys={...p},!b.isActive&&S===null||!_&&!b.prevProp||Vh(_)||typeof _=="boolean")continue;const E=LP(b.prevProp,_);let C=E||v===l&&b.isActive&&!T&&w||x>m&&w,M=!1;const A=Array.isArray(_)?_:[_];let k=A.reduce(i(v),{});S===!1&&(k={});const{prevResolvedValues:N={}}=b,P={...N,...k},j=O=>{C=!0,h.has(O)&&(M=!0,h.delete(O)),b.needsAnimating[O]=!0;const R=t.getValue(O);R&&(R.liveStyle=!1)};for(const O in P){const R=k[O],B=N[O];if(p.hasOwnProperty(O))continue;let F=!1;pg(R)&&pg(B)?F=!$E(R,B):F=R!==B,F?R!=null?j(O):h.add(O):R!==void 0&&h.has(O)?j(O):b.protectedKeys[O]=!0}b.prevProp=_,b.prevResolvedValues=k,b.isActive&&(p={...p,...k}),s&&t.blockInitialAnimation&&(C=!1);const I=T&&E;C&&(!I||M)&&d.push(...A.map(O=>{const R={type:v};if(typeof O=="string"&&s&&!I&&t.manuallyAnimateOnMount&&t.parent){const{parent:B}=t,F=eo(B,O);if(B.enteringChildren&&F){const{delayChildren:Z}=F.transition||{};R.delay=mE(B.enteringChildren,t,Z)}}return{animation:O,options:R}}))}if(h.size){const x={};if(typeof c.initial!="boolean"){const v=eo(t,Array.isArray(c.initial)?c.initial[0]:c.initial);v&&v.transition&&(x.transition=v.transition)}h.forEach(v=>{const b=t.getBaseTarget(v),_=t.getValue(v);_&&(_.liveStyle=!0),x[v]=b??null}),d.push({animation:x})}let y=!!d.length;return s&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(y=!1),s=!1,y?e(d):Promise.resolve()}function o(l,c){var d;if(n[l].isActive===c)return Promise.resolve();(d=t.variantChildren)==null||d.forEach(h=>{var p;return(p=h.animationState)==null?void 0:p.setActive(l,c)}),n[l].isActive=c;const u=a(l);for(const h in n)n[h].protectedKeys={};return u}return{animateChanges:a,setActive:o,setAnimateFunction:r,getState:()=>n,reset:()=>{n=d1()}}}function LP(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!$E(e,t):!1}function Sr(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function d1(){return{animate:Sr(!0),whileInView:Sr(),whileHover:Sr(),whileTap:Sr(),whileDrag:Sr(),whileFocus:Sr(),exit:Sr()}}function h1(t,e){t.min=e.min,t.max=e.max}function Kn(t,e){h1(t.x,e.x),h1(t.y,e.y)}function f1(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const YE=1e-4,VP=1-YE,zP=1+YE,KE=.01,FP=0-KE,HP=0+KE;function Kt(t){return t.max-t.min}function UP(t,e,n){return Math.abs(t-e)<=n}function p1(t,e,n,s=.5){t.origin=s,t.originPoint=st(e.min,e.max,t.origin),t.scale=Kt(n)/Kt(e),t.translate=st(n.min,n.max,t.origin)-t.originPoint,(t.scale>=VP&&t.scale<=zP||isNaN(t.scale))&&(t.scale=1),(t.translate>=FP&&t.translate<=HP||isNaN(t.translate))&&(t.translate=0)}function Il(t,e,n,s){p1(t.x,e.x,n.x,s?s.originX:void 0),p1(t.y,e.y,n.y,s?s.originY:void 0)}function m1(t,e,n){t.min=n.min+e.min,t.max=t.min+Kt(e)}function GP(t,e,n){m1(t.x,e.x,n.x),m1(t.y,e.y,n.y)}function g1(t,e,n){t.min=e.min-n.min,t.max=t.min+Kt(e)}function Hd(t,e,n){g1(t.x,e.x,n.x),g1(t.y,e.y,n.y)}function y1(t,e,n,s,i){return t-=e,t=Fd(t,1/n,s),i!==void 0&&(t=Fd(t,1/i,s)),t}function qP(t,e=0,n=1,s=.5,i,r=t,a=t){if(ws.test(e)&&(e=parseFloat(e),e=st(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=st(r.min,r.max,s);t===r&&(o-=e),t.min=y1(t.min,e,n,o,i),t.max=y1(t.max,e,n,o,i)}function v1(t,e,[n,s,i],r,a){qP(t,e[n],e[s],e[i],e.scale,r,a)}const WP=["x","scaleX","originX"],$P=["y","scaleY","originY"];function b1(t,e,n,s){v1(t.x,e,WP,n?n.x:void 0,s?s.x:void 0),v1(t.y,e,$P,n?n.y:void 0,s?s.y:void 0)}function x1(t){return t.translate===0&&t.scale===1}function XE(t){return x1(t.x)&&x1(t.y)}function _1(t,e){return t.min===e.min&&t.max===e.max}function YP(t,e){return _1(t.x,e.x)&&_1(t.y,e.y)}function w1(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function QE(t,e){return w1(t.x,e.x)&&w1(t.y,e.y)}function S1(t){return Kt(t.x)/Kt(t.y)}function C1(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function ms(t){return[t("x"),t("y")]}function KP(t,e,n){let s="";const i=t.x.translate/e.x,r=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((i||r||a)&&(s=`translate3d(${i}px, ${r}px, ${a}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:h,skewX:p,skewY:m}=n;c&&(s=`perspective(${c}px) ${s}`),u&&(s+=`rotate(${u}deg) `),d&&(s+=`rotateX(${d}deg) `),h&&(s+=`rotateY(${h}deg) `),p&&(s+=`skewX(${p}deg) `),m&&(s+=`skewY(${m}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(s+=`scale(${o}, ${l})`),s||"none"}const ZE=["TopLeft","TopRight","BottomLeft","BottomRight"],XP=ZE.length,T1=t=>typeof t=="string"?parseFloat(t):t,E1=t=>typeof t=="number"||ie.test(t);function QP(t,e,n,s,i,r){i?(t.opacity=st(0,n.opacity??1,ZP(s)),t.opacityExit=st(e.opacity??1,0,JP(s))):r&&(t.opacity=st(e.opacity??1,n.opacity??1,s));for(let a=0;a<XP;a++){const o=`border${ZE[a]}Radius`;let l=A1(e,o),c=A1(n,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||E1(l)===E1(c)?(t[o]=Math.max(st(T1(l),T1(c),s),0),(ws.test(c)||ws.test(l))&&(t[o]+="%")):t[o]=c}(e.rotate||n.rotate)&&(t.rotate=st(e.rotate||0,n.rotate||0,s))}function A1(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const ZP=JE(0,.5,WT),JP=JE(.5,.95,Gn);function JE(t,e,n){return s=>s<t?0:s>e?1:n(Zl(t,e,s))}function e3(t,e,n){const s=Ft(t)?t:go(t);return s.start(Sv("",s,e,n)),s.animation}function nc(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}const t3=(t,e)=>t.depth-e.depth;class n3{constructor(){this.children=[],this.isDirty=!1}add(e){av(this.children,e),this.isDirty=!0}remove(e){ov(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(t3),this.isDirty=!1,this.children.forEach(e)}}function s3(t,e){const n=Yt.now(),s=({timestamp:i})=>{const r=i-n;r>=e&&(sr(s),t(r-e))};return $e.setup(s,!0),()=>sr(s)}function td(t){return Ft(t)?t.get():t}class i3{constructor(){this.members=[]}add(e){av(this.members,e),e.scheduleRender()}remove(e){if(ov(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let s;for(let i=n;i>=0;i--){const r=this.members[i];if(r.isPresent!==!1){s=r;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender();const i=s.options.layoutDependency,r=e.options.layoutDependency;i!==void 0&&r!==void 0&&i===r||(e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0));const{crossfade:o}=e.options;o===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const nd={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Np=["","X","Y","Z"],r3=1e3;let a3=0;function Mp(t,e,n,s){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),s&&(s[t]=0))}function eA(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=xE(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",$e,!(i||r))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&eA(s)}function tA({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(a={},o=e==null?void 0:e()){this.id=a3++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(c3),this.nodes.forEach(f3),this.nodes.forEach(p3),this.nodes.forEach(u3)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new n3)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new uv),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=Nv(a)&&!lP(a),this.instance=a;const{layoutId:o,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),t){let u,d=0;const h=()=>this.root.updateBlockedByResize=!1;$e.read(()=>{d=window.innerWidth}),t(a,()=>{const p=window.innerWidth;p!==d&&(d=p,this.root.updateBlockedByResize=!0,u&&u(),u=s3(h,250),nd.hasAnimatedSinceResize&&(nd.hasAnimatedSinceResize=!1,this.nodes.forEach(M1)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&c&&(o||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d,hasRelativeLayoutChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||c.getDefaultTransition()||b3,{onLayoutAnimationStart:y,onLayoutAnimationComplete:x}=c.getProps(),v=!this.targetLayout||!QE(this.targetLayout,p),b=!d&&h;if(this.options.layoutRoot||this.resumeFrom||b||d&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...wv(m,"layout"),onPlay:y,onComplete:x};(c.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(u,b)}else d||M1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),sr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(m3),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&eA(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(k1);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(N1);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(h3),this.nodes.forEach(o3),this.nodes.forEach(l3)):this.nodes.forEach(N1),this.clearAllSnapshots();const o=Yt.now();Dt.delta=Es(0,1e3/60,o-Dt.timestamp),Dt.timestamp=o,Dt.isProcessing=!0,_p.update.process(Dt),_p.preRender.process(Dt),_p.render.process(Dt),Dt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Av.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(d3),this.sharedNodes.forEach(g3)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,$e.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){$e.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Kt(this.snapshot.measuredBox.x)&&!Kt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=xt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=s(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!XE(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;a&&this.instance&&(o||Mr(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),x3(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:a}=this.options;if(!a)return xt();const o=a.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(_3))){const{scroll:u}=this.root;u&&(Ha(o.x,u.offset.x),Ha(o.y,u.offset.y))}return o}removeElementScroll(a){var l;const o=xt();if(Kn(o,a),(l=this.scroll)!=null&&l.wasRoot)return o;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;u!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&Kn(o,a),Ha(o.x,d.offset.x),Ha(o.y,d.offset.y))}return o}applyTransform(a,o=!1){const l=xt();Kn(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];!o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Ua(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Mr(u.latestValues)&&Ua(l,u.latestValues)}return Mr(this.latestValues)&&Ua(l,this.latestValues),l}removeTransform(a){const o=xt();Kn(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Mr(c.latestValues))continue;bg(c.latestValues)&&c.updateSnapshot();const u=xt(),d=c.measurePageBox();Kn(u,d),b1(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Mr(this.latestValues)&&b1(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Dt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var p;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:d}=this.options;if(!this.layout||!(u||d))return;this.resolvedRelativeTargetAt=Dt.timestamp;const h=this.getClosestProjectingParent();h&&this.linkedParentVersion!==h.layoutVersion&&!h.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(h&&h.layout?this.createRelativeTarget(h,this.layout.layoutBox,h.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=xt(),this.targetWithTransforms=xt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),GP(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Kn(this.target,this.layout.layoutBox),LE(this.target,this.targetDelta)):Kn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?this.createRelativeTarget(h,this.target,h.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||bg(this.parent.latestValues)||BE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,o,l){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xt(),this.relativeTargetOrigin=xt(),Hd(this.relativeTargetOrigin,o,l),Kn(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var m;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Dt.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;Kn(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,h=this.treeScale.y;bP(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=xt());const{target:p}=a;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(f1(this.prevProjectionDelta.x,this.projectionDelta.x),f1(this.prevProjectionDelta.y,this.projectionDelta.y)),Il(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==h||!C1(this.projectionDelta.x,this.prevProjectionDelta.x)||!C1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Fa(),this.projectionDelta=Fa(),this.projectionDeltaWithTransform=Fa()}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=Fa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=xt(),p=l?l.source:void 0,m=this.layout?this.layout.source:void 0,y=p!==m,x=this.getStack(),v=!x||x.members.length<=1,b=!!(y&&!v&&this.options.crossfade===!0&&!this.path.some(v3));this.animationProgress=0;let _;this.mixTargetDelta=w=>{const S=w/1e3;R1(d.x,a.x,S),R1(d.y,a.y,S),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Hd(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),y3(this.relativeTarget,this.relativeTargetOrigin,h,S),_&&YP(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=xt()),Kn(_,this.relativeTarget)),y&&(this.animationValues=u,QP(u,c,this.latestValues,S,b,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var o,l,c;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(sr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=$e.update(()=>{nd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=go(0)),this.currentAnimation=e3(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(r3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:u}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&nA(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||xt();const d=Kt(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const h=Kt(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+h}Kn(o,l),Ua(o,u),Il(this.projectionDeltaWithTransform,this.layoutCorrected,o,u)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new i3),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&Mp("z",a,c,this.animationValues);for(let u=0;u<Np.length;u++)Mp(`rotate${Np[u]}`,a,c,this.animationValues),Mp(`skew${Np[u]}`,a,c,this.animationValues);a.render();for(const u in c)a.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=td(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=td(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Mr(this.latestValues)&&(a.transform=l?l({},""):"none",this.hasProjected=!1);return}a.visibility="";const u=c.animationValues||c.latestValues;this.applyTransformsToTarget();let d=KP(this.projectionDeltaWithTransform,this.treeScale,u);l&&(d=l(u,d)),a.transform=d;const{x:h,y:p}=this.projectionDelta;a.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,c.animationValues?a.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:a.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const m in _g){if(u[m]===void 0)continue;const{correct:y,applyTo:x,isCSSVariable:v}=_g[m],b=d==="none"?u[m]:y(u[m],c);if(x){const _=x.length;for(let w=0;w<_;w++)a[x[w]]=b}else v?this.options.visualElement.renderState.vars[m]=b:a[m]=b}this.options.layoutId&&(a.pointerEvents=c===this?td(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(k1),this.root.sharedNodes.clear()}}}function o3(t){t.updateLayout()}function l3(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=t.layout,{animationType:r}=t.options,a=e.source!==t.layout.source;r==="size"?ms(d=>{const h=a?e.measuredBox[d]:e.layoutBox[d],p=Kt(h);h.min=s[d].min,h.max=h.min+p}):nA(r,e.layoutBox,s)&&ms(d=>{const h=a?e.measuredBox[d]:e.layoutBox[d],p=Kt(s[d]);h.max=h.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+p)});const o=Fa();Il(o,s,e.layoutBox);const l=Fa();a?Il(l,t.applyTransform(i,!0),e.measuredBox):Il(l,s,e.layoutBox);const c=!XE(o);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:p}=d;if(h&&p){const m=xt();Hd(m,e.layoutBox,h.layoutBox);const y=xt();Hd(y,s,p.layoutBox),QE(m,y)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=m,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function c3(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function u3(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function d3(t){t.clearSnapshot()}function k1(t){t.clearMeasurements()}function N1(t){t.isLayoutDirty=!1}function h3(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function M1(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function f3(t){t.resolveTargetDelta()}function p3(t){t.calcProjection()}function m3(t){t.resetSkewAndRotation()}function g3(t){t.removeLeadSnapshot()}function R1(t,e,n){t.translate=st(e.translate,0,n),t.scale=st(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function D1(t,e,n,s){t.min=st(e.min,n.min,s),t.max=st(e.max,n.max,s)}function y3(t,e,n,s){D1(t.x,e.x,n.x,s),D1(t.y,e.y,n.y,s)}function v3(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const b3={duration:.45,ease:[.4,0,.1,1]},O1=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),j1=O1("applewebkit/")&&!O1("chrome/")?Math.round:Gn;function P1(t){t.min=j1(t.min),t.max=j1(t.max)}function x3(t){P1(t.x),P1(t.y)}function nA(t,e,n){return t==="position"||t==="preserve-aspect"&&!UP(S1(e),S1(n),.2)}function _3(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const w3=tA({attachResizeListener:(t,e)=>nc(t,"resize",e),measureScroll:()=>{var t,e;return{x:document.documentElement.scrollLeft||((t=document.body)==null?void 0:t.scrollLeft)||0,y:document.documentElement.scrollTop||((e=document.body)==null?void 0:e.scrollTop)||0}},checkIsScrollRoot:()=>!0}),Rp={current:void 0},sA=tA({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Rp.current){const t=new w3({});t.mount(window),t.setOptions({layoutScroll:!0}),Rp.current=t}return Rp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),iA=g.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function S3(t=!0){const e=g.useContext(rv);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:i}=e,r=g.useId();g.useEffect(()=>{if(t)return i(r)},[t]);const a=g.useCallback(()=>t&&s&&s(r),[r,s,t]);return!n&&s?[!1,a]:[!0]}const rA=g.createContext({strict:!1}),I1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let B1=!1;function C3(){if(B1)return;const t={};for(const e in I1)t[e]={isEnabled:n=>I1[e].some(s=>!!n[s])};jE(t),B1=!0}function aA(){return C3(),mP()}function T3(t){const e=aA();for(const n in t)e[n]={...e[n],...t[n]};jE(e)}const E3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function Ud(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||E3.has(t)}let oA=t=>!Ud(t);function A3(t){typeof t=="function"&&(oA=e=>e.startsWith("on")?!Ud(e):t(e))}try{A3(require("@emotion/is-prop-valid").default)}catch{}function k3(t,e,n){const s={};for(const i in t)i==="values"&&typeof t.values=="object"||(oA(i)||n===!0&&Ud(i)||!e&&!Ud(i)||t.draggable&&i.startsWith("onDrag"))&&(s[i]=t[i]);return s}const Fh=g.createContext({});function N3(t,e){if(zh(t)){const{initial:n,animate:s}=t;return{initial:n===!1||tc(n)?n:void 0,animate:tc(s)?s:void 0}}return t.inherit!==!1?e:{}}function M3(t){const{initial:e,animate:n}=N3(t,g.useContext(Fh));return g.useMemo(()=>({initial:e,animate:n}),[L1(e),L1(n)])}function L1(t){return Array.isArray(t)?t.join(" "):t}const jv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function lA(t,e,n){for(const s in e)!Ft(e[s])&&!FE(s,n)&&(t[s]=e[s])}function R3({transformTemplate:t},e){return g.useMemo(()=>{const n=jv();return Dv(n,e,t),Object.assign({},n.vars,n.style)},[e])}function D3(t,e){const n=t.style||{},s={};return lA(s,n,t),Object.assign(s,R3(t,e)),s}function O3(t,e){const n={},s=D3(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const cA=()=>({...jv(),attrs:{}});function j3(t,e,n,s){const i=g.useMemo(()=>{const r=cA();return HE(r,e,GE(s),t.transformTemplate,t.style),{...r.attrs,style:{...r.style}}},[e]);if(t.style){const r={};lA(r,t.style,t),i.style={...r,...i.style}}return i}const P3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Pv(t){return typeof t!="string"||t.includes("-")?!1:!!(P3.indexOf(t)>-1||/[A-Z]/u.test(t))}function I3(t,e,n,{latestValues:s},i,r=!1,a){const l=(a??Pv(t)?j3:O3)(e,s,i,t),c=k3(e,typeof t=="string",r),u=t!==g.Fragment?{...c,...l,ref:n}:{},{children:d}=e,h=g.useMemo(()=>Ft(d)?d.get():d,[d]);return g.createElement(t,{...u,children:h})}function B3({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,i){return{latestValues:L3(n,s,i,t),renderState:e()}}function L3(t,e,n,s){const i={},r=s(t,{});for(const h in r)i[h]=td(r[h]);let{initial:a,animate:o}=t;const l=zh(t),c=OE(t);e&&c&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let u=n?n.initial===!1:!1;u=u||a===!1;const d=u?o:a;if(d&&typeof d!="boolean"&&!Vh(d)){const h=Array.isArray(d)?d:[d];for(let p=0;p<h.length;p++){const m=Cv(t,h[p]);if(m){const{transitionEnd:y,transition:x,...v}=m;for(const b in v){let _=v[b];if(Array.isArray(_)){const w=u?_.length-1:0;_=_[w]}_!==null&&(i[b]=_)}for(const b in y)i[b]=y[b]}}}return i}const uA=t=>(e,n)=>{const s=g.useContext(Fh),i=g.useContext(rv),r=()=>B3(t,e,s,i);return n?r():zO(r)},V3=uA({scrapeMotionValuesFromProps:Ov,createRenderState:jv}),z3=uA({scrapeMotionValuesFromProps:qE,createRenderState:cA}),F3=Symbol.for("motionComponentSymbol");function H3(t,e,n){const s=g.useRef(n);g.useInsertionEffect(()=>{s.current=n});const i=g.useRef(null);return g.useCallback(r=>{var o;r&&((o=t.onMount)==null||o.call(t,r)),e&&(r?e.mount(r):e.unmount());const a=s.current;if(typeof a=="function")if(r){const l=a(r);typeof l=="function"&&(i.current=l)}else i.current?(i.current(),i.current=null):a(r);else a&&(a.current=r)},[e])}const dA=g.createContext({});function Sa(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function U3(t,e,n,s,i,r){var _,w;const{visualElement:a}=g.useContext(Fh),o=g.useContext(rA),l=g.useContext(rv),c=g.useContext(iA),u=c.reducedMotion,d=c.skipAnimations,h=g.useRef(null),p=g.useRef(!1);s=s||o.renderer,!h.current&&s&&(h.current=s(t,{visualState:e,parent:a,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u,skipAnimations:d,isSVG:r}),p.current&&h.current&&(h.current.manuallyAnimateOnMount=!0));const m=h.current,y=g.useContext(dA);m&&!m.projection&&i&&(m.type==="html"||m.type==="svg")&&G3(h.current,n,i,y);const x=g.useRef(!1);g.useInsertionEffect(()=>{m&&x.current&&m.update(n,l)});const v=n[bE],b=g.useRef(!!v&&!((_=window.MotionHandoffIsComplete)!=null&&_.call(window,v))&&((w=window.MotionHasOptimisedAnimation)==null?void 0:w.call(window,v)));return FO(()=>{p.current=!0,m&&(x.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),b.current&&m.animationState&&m.animationState.animateChanges())}),g.useEffect(()=>{m&&(!b.current&&m.animationState&&m.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{var S;(S=window.MotionHandoffMarkAsComplete)==null||S.call(window,v)}),b.current=!1),m.enteringChildren=void 0)}),m}function G3(t,e,n,s){const{layoutId:i,layout:r,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:hA(t.parent)),t.projection.setOptions({layoutId:i,layout:r,alwaysMeasureLayout:!!a||o&&Sa(o),visualElement:t,animationType:typeof r=="string"?r:"both",initialPromotionConfig:s,crossfade:u,layoutScroll:l,layoutRoot:c})}function hA(t){if(t)return t.options.allowProjection!==!1?t.projection:hA(t.parent)}function Dp(t,{forwardMotionProps:e=!1,type:n}={},s,i){s&&T3(s);const r=n?n==="svg":Pv(t),a=r?z3:V3;function o(c,u){let d;const h={...g.useContext(iA),...c,layoutId:q3(c)},{isStatic:p}=h,m=M3(c),y=a(c,p);if(!p&&PT){W3();const x=$3(h);d=x.MeasureLayout,m.visualElement=U3(t,y,h,i,x.ProjectionNode,r)}return f.jsxs(Fh.Provider,{value:m,children:[d&&m.visualElement?f.jsx(d,{visualElement:m.visualElement,...h}):null,I3(t,c,H3(y,m.visualElement,u),y,p,e,r)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const l=g.forwardRef(o);return l[F3]=t,l}function q3({layoutId:t}){const e=g.useContext(jT).id;return e&&t!==void 0?e+"-"+t:t}function W3(t,e){g.useContext(rA).strict}function $3(t){const e=aA(),{drag:n,layout:s}=e;if(!n&&!s)return{};const i={...n,...s};return{MeasureLayout:n!=null&&n.isEnabled(t)||s!=null&&s.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function Y3(t,e){if(typeof Proxy>"u")return Dp;const n=new Map,s=(r,a)=>Dp(r,a,t,e),i=(r,a)=>s(r,a);return new Proxy(i,{get:(r,a)=>a==="create"?s:(n.has(a)||n.set(a,Dp(a,void 0,t,e)),n.get(a))})}const K3=(t,e)=>e.isSVG??Pv(t)?new DP(e):new EP(e,{allowProjection:t!==g.Fragment});class X3 extends pr{constructor(e){super(e),e.animationState||(e.animationState=BP(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Vh(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let Q3=0;class Z3 extends pr{constructor(){super(...arguments),this.id=Q3++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const J3={animation:{Feature:X3},exit:{Feature:Z3}};function Ac(t){return{point:{x:t.pageX,y:t.pageY}}}const e4=t=>e=>kv(e)&&t(e,Ac(e));function Bl(t,e,n,s){return nc(t,e,e4(n),s)}const fA=({current:t})=>t?t.ownerDocument.defaultView:null,V1=(t,e)=>Math.abs(t-e);function t4(t,e){const n=V1(t.x,e.x),s=V1(t.y,e.y);return Math.sqrt(n**2+s**2)}const z1=new Set(["auto","scroll"]);class pA{constructor(e,n,{transformPagePoint:s,contextWindow:i=window,dragSnapToOrigin:r=!1,distanceThreshold:a=3,element:o}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=p=>{this.handleScroll(p.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=jp(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,y=t4(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!y)return;const{point:x}=p,{timestamp:v}=Dt;this.history.push({...x,timestamp:v});const{onStart:b,onMove:_}=this.handlers;m||(b&&b(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,p)},this.handlePointerMove=(p,m)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=Op(m,this.transformPagePoint),$e.update(this.updatePoint,!0)},this.handlePointerUp=(p,m)=>{this.end();const{onEnd:y,onSessionEnd:x,resumeAnimation:v}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=jp(p.type==="pointercancel"?this.lastMoveEventInfo:Op(m,this.transformPagePoint),this.history);this.startEvent&&y&&y(p,b),x&&x(p,b)},!kv(e))return;this.dragSnapToOrigin=r,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=a,this.contextWindow=i||window;const l=Ac(e),c=Op(l,this.transformPagePoint),{point:u}=c,{timestamp:d}=Dt;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=n;h&&h(e,jp(c,this.history)),this.removeListeners=Cc(Bl(this.contextWindow,"pointermove",this.handlePointerMove),Bl(this.contextWindow,"pointerup",this.handlePointerUp),Bl(this.contextWindow,"pointercancel",this.handlePointerUp)),o&&this.startScrollTracking(o)}startScrollTracking(e){let n=e.parentElement;for(;n;){const s=getComputedStyle(n);(z1.has(s.overflowX)||z1.has(s.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const s=e===window,i=s?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},r={x:i.x-n.x,y:i.y-n.y};r.x===0&&r.y===0||(s?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=r.x,this.lastMoveEventInfo.point.y+=r.y):this.history.length>0&&(this.history[0].x-=r.x,this.history[0].y-=r.y),this.scrollPositions.set(e,i),$e.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),sr(this.updatePoint)}}function Op(t,e){return e?{point:e(t.point)}:t}function F1(t,e){return{x:t.x-e.x,y:t.y-e.y}}function jp({point:t},e){return{point:t,delta:F1(t,mA(e)),offset:F1(t,n4(e)),velocity:s4(e,.1)}}function n4(t){return t[0]}function mA(t){return t[t.length-1]}function s4(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const i=mA(t);for(;n>=0&&(s=t[n],!(i.timestamp-s.timestamp>_s(e)));)n--;if(!s)return{x:0,y:0};s===t[0]&&t.length>2&&i.timestamp-s.timestamp>_s(e)*2&&(s=t[1]);const r=zn(i.timestamp-s.timestamp);if(r===0)return{x:0,y:0};const a={x:(i.x-s.x)/r,y:(i.y-s.y)/r};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function i4(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?st(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?st(n,t,s.max):Math.min(t,n)),t}function H1(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function r4(t,{top:e,left:n,bottom:s,right:i}){return{x:H1(t.x,n,i),y:H1(t.y,e,s)}}function U1(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function a4(t,e){return{x:U1(t.x,e.x),y:U1(t.y,e.y)}}function o4(t,e){let n=.5;const s=Kt(t),i=Kt(e);return i>s?n=Zl(e.min,e.max-s,t.min):s>i&&(n=Zl(t.min,t.max-i,e.min)),Es(0,1,n)}function l4(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const wg=.35;function c4(t=wg){return t===!1?t=0:t===!0&&(t=wg),{x:G1(t,"left","right"),y:G1(t,"top","bottom")}}function G1(t,e,n){return{min:q1(t,e),max:q1(t,n)}}function q1(t,e){return typeof t=="number"?t:t[e]||0}const u4=new WeakMap;class d4{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=xt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=d=>{n&&this.snapToCursor(Ac(d).point),this.stopAnimation()},a=(d,h)=>{const{drag:p,dragPropagation:m,onDragStart:y}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=q5(p),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ms(v=>{let b=this.getAxisMotionValue(v).get()||0;if(ws.test(b)){const{projection:_}=this.visualElement;if(_&&_.layout){const w=_.layout.layoutBox[v];w&&(b=Kt(w)*(parseFloat(b)/100))}}this.originPoint[v]=b}),y&&$e.update(()=>y(d,h),!1,!0),mg(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(d,h)=>{this.latestPointerEvent=d,this.latestPanInfo=h;const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:y,onDrag:x}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:v}=h;if(m&&this.currentDirection===null){this.currentDirection=f4(v),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,v),this.updateAxis("y",h.point,v),this.visualElement.render(),x&&$e.update(()=>x(d,h),!1,!0)},l=(d,h)=>{this.latestPointerEvent=d,this.latestPanInfo=h,this.stop(d,h),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>{const{dragSnapToOrigin:d}=this.getProps();(d||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:u}=this.getProps();this.panSession=new pA(e,{onSessionStart:r,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:s,contextWindow:fA(this.visualElement),element:this.visualElement.current})}stop(e,n){const s=e||this.latestPointerEvent,i=n||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!i||!s)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&$e.postRender(()=>o(s,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,s){const{drag:i}=this.getProps();if(!s||!yu(e,i,this.currentDirection))return;const r=this.getAxisMotionValue(e);let a=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(a=i4(a,this.constraints[e],this.elastic[e])),r.set(a)}resolveConstraints(){var r;const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,i=this.constraints;e&&Sa(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=r4(s.layoutBox,e):this.constraints=!1,this.elastic=c4(n),i!==this.constraints&&!Sa(e)&&s&&this.constraints&&!this.hasMutatedConstraints&&ms(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=l4(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Sa(e))return!1;const s=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const r=xP(s,i.root,this.visualElement.getTransformPagePoint());let a=a4(i.layout.layoutBox,r);if(n){const o=n(yP(a));this.hasMutatedConstraints=!!o,o&&(a=IE(o))}return a}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:i,dragTransition:r,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=ms(u=>{if(!yu(u,n,this.currentDirection))return;let d=l&&l[u]||{};a&&(d={min:0,max:0});const h=i?200:1e6,p=i?40:1e7,m={type:"inertia",velocity:s?e[u]:0,bounceStiffness:h,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...r,...d};return this.startAxisValueAnimation(u,m)});return Promise.all(c).then(o)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return mg(this.visualElement,e),s.start(Sv(e,s,0,n,this.visualElement,!1))}stopAnimation(){ms(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),i=s[n];return i||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){ms(n=>{const{drag:s}=this.getProps();if(!yu(n,s,this.currentDirection))return;const{projection:i}=this.visualElement,r=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[n],l=r.get()||0;r.set(e[n]-st(a,o,.5)+l)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!Sa(n)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ms(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=o4({min:l,max:l},this.constraints[a])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.constraints=!1,this.resolveConstraints(),ms(a=>{if(!yu(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(st(l,c,i[a]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;u4.set(this.visualElement,this);const e=this.visualElement.current,n=Bl(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps(),h=c.target,p=h!==e&&Q5(h);u&&d&&!p&&this.start(c)});let s;const i=()=>{const{dragConstraints:c}=this.getProps();Sa(c)&&c.current&&(this.constraints=this.resolveRefConstraints(),s||(s=h4(e,c.current,()=>this.scalePositionWithinConstraints())))},{projection:r}=this.visualElement,a=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),$e.read(i);const o=nc(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(ms(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),n(),a(),l&&l(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:a=wg,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:i,dragConstraints:r,dragElastic:a,dragMomentum:o}}}function W1(t){let e=!0;return()=>{if(e){e=!1;return}t()}}function h4(t,e,n){const s=t1(t,W1(n)),i=t1(e,W1(n));return()=>{s(),i()}}function yu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function f4(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class p4 extends pr{constructor(e){super(e),this.removeGroupControls=Gn,this.removeListeners=Gn,this.controls=new d4(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Gn}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const Pp=t=>(e,n)=>{t&&$e.update(()=>t(e,n),!1,!0)};class m4 extends pr{constructor(){super(...arguments),this.removePointerDownListener=Gn}onPointerDown(e){this.session=new pA(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:fA(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:Pp(e),onStart:Pp(n),onMove:Pp(s),onEnd:(r,a)=>{delete this.session,i&&$e.postRender(()=>i(r,a))}}}mount(){this.removePointerDownListener=Bl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let Ip=!1;class g4 extends g.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:i}=this.props,{projection:r}=e;r&&(n.group&&n.group.add(r),s&&s.register&&i&&s.register(r),Ip&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),nd.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:i,isPresent:r}=this.props,{projection:a}=s;return a&&(a.isPresent=r,e.layoutDependency!==n&&a.setOptions({...a.options,layoutDependency:n}),Ip=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==r?a.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?a.promote():a.relegate()||$e.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Av.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:i}=e;Ip=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function gA(t){const[e,n]=S3(),s=g.useContext(jT);return f.jsx(g4,{...t,layoutGroup:s,switchLayoutGroup:g.useContext(dA),isPresent:e,safeToRemove:n})}const y4={pan:{Feature:m4},drag:{Feature:p4,ProjectionNode:sA,MeasureLayout:gA}};function $1(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,r=s[i];r&&$e.postRender(()=>r(e,Ac(e)))}class v4 extends pr{mount(){const{current:e}=this.node;e&&(this.unmount=$5(e,(n,s)=>($1(this.node,s,"Start"),i=>$1(this.node,i,"End"))))}unmount(){}}class b4 extends pr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Cc(nc(this.node.current,"focus",()=>this.onFocus()),nc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Y1(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),r=s[i];r&&$e.postRender(()=>r(e,Ac(e)))}class x4 extends pr{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:n,propagate:s}=this.node.props;this.unmount=J5(e,(i,r)=>(Y1(this.node,r,"Start"),(a,{success:o})=>Y1(this.node,a,o?"End":"Cancel")),{useGlobalTarget:n,stopPropagation:(s==null?void 0:s.tap)===!1})}unmount(){}}const Sg=new WeakMap,Bp=new WeakMap,_4=t=>{const e=Sg.get(t.target);e&&e(t)},w4=t=>{t.forEach(_4)};function S4({root:t,...e}){const n=t||document;Bp.has(n)||Bp.set(n,{});const s=Bp.get(n),i=JSON.stringify(e);return s[i]||(s[i]=new IntersectionObserver(w4,{root:t,...e})),s[i]}function C4(t,e,n){const s=S4(e);return Sg.set(t,n),s.observe(t),()=>{Sg.delete(t),s.unobserve(t)}}const T4={some:0,all:1};class E4 extends pr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:i="some",once:r}=e,a={root:n?n.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:T4[i]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,r&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),h=c?u:d;h&&h(l)};return C4(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(A4(e,n))&&this.startObserver()}unmount(){}}function A4({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const k4={inView:{Feature:E4},tap:{Feature:x4},focus:{Feature:b4},hover:{Feature:v4}},N4={layout:{ProjectionNode:sA,MeasureLayout:gA}},M4={...J3,...k4,...y4,...N4},xi=Y3(M4,K3);function R4(){const t=[.6,1,.45,.85,.35,.7,1,.5,.8,.4,.95,.55];return f.jsx("div",{className:"flex items-end gap-[3px] h-10",children:t.map((e,n)=>f.jsx("div",{className:"start-anim-bar w-[3px] rounded-full",style:{height:`${e*100}%`,background:"linear-gradient(to top, oklch(0.65 0.22 265), oklch(0.75 0.18 290))",animationDelay:`${n*.12}s`,animationDuration:`${1.2+n%3*.2}s`}},n))})}const D4=[{color:"oklch(0.45 0.18 265 / 0.30)",size:500,x:["10%","55%","25%","65%","10%"],y:["15%","40%","60%","20%","15%"],duration:22},{color:"oklch(0.40 0.16 290 / 0.25)",size:450,x:["70%","30%","50%","20%","70%"],y:["60%","25%","45%","70%","60%"],duration:26},{color:"oklch(0.35 0.14 230 / 0.22)",size:400,x:["40%","75%","15%","60%","40%"],y:["70%","50%","30%","55%","70%"],duration:30},{color:"oklch(0.38 0.20 310 / 0.15)",size:350,x:["55%","20%","70%","35%","55%"],y:["30%","65%","45%","15%","30%"],duration:24},{color:"oklch(0.42 0.15 200 / 0.18)",size:380,x:["25%","60%","40%","75%","25%"],y:["50%","15%","70%","40%","50%"],duration:28}];function O4(){const t=g.useRef(null);return g.useEffect(()=>{const e=t.current;if(!e)return;const n=e.getContext("2d");if(!n)return;const s=256,i=256;e.width=s,e.height=i;let r;const a=()=>{const o=n.createImageData(s,i),l=o.data;for(let c=0;c<l.length;c+=4){const u=Math.random()*255;l[c]=u,l[c+1]=u,l[c+2]=u,l[c+3]=18}n.putImageData(o,0,0),r=requestAnimationFrame(a)};return a(),()=>cancelAnimationFrame(r)},[]),f.jsx("canvas",{ref:t,className:"pointer-events-none absolute inset-0 h-full w-full",style:{opacity:.55,mixBlendMode:"overlay",objectFit:"cover",width:"100%",height:"100%"}})}function j4(){const t=g.useMemo(()=>Array.from({length:14},(e,n)=>({x:10+(n*37+n*n*7)%80,y:10+(n*53+n*11)%80,size:2+n%3*1.5,delay:n*.4,duration:4+n%4})),[]);return f.jsx(f.Fragment,{children:t.map((e,n)=>f.jsx("div",{className:"start-anim-dot absolute rounded-full",style:{left:`${e.x}%`,top:`${e.y}%`,width:e.size,height:e.size,background:n%3===0?"oklch(0.65 0.22 265 / 0.5)":n%3===1?"oklch(0.70 0.15 290 / 0.4)":"oklch(0.60 0.12 230 / 0.35)",animationDelay:`${e.delay}s`,animationDuration:`${e.duration}s`}},n))})}const P4={hidden:{},show:{transition:{staggerChildren:.12,delayChildren:.2}}},vu={hidden:{opacity:0,y:24,filter:"blur(6px)"},show:{opacity:1,y:0,filter:"blur(0px)",transition:{duration:.7,ease:[.16,1,.3,1]}}};function I4({onStart:t}){const[e,n]=g.useState(!1),[s,i]=g.useState(!1),r=async()=>{n(!0);try{await t()}catch(a){console.error("Failed to start:",a),n(!1)}};return f.jsxs("div",{className:"relative flex flex-1 flex-col items-center justify-center overflow-hidden",style:{background:"oklch(0.06 0.015 270)"},children:[f.jsx("div",{className:"pointer-events-none absolute inset-0 overflow-hidden",children:D4.map((a,o)=>f.jsx(xi.div,{className:"absolute rounded-full",style:{width:a.size,height:a.size,background:`radial-gradient(circle, ${a.color}, transparent 70%)`,filter:"blur(80px)"},animate:{left:a.x,top:a.y},transition:{duration:a.duration,repeat:1/0,ease:"easeInOut"}},o))}),f.jsx("div",{className:"start-anim-grid pointer-events-none absolute inset-0",style:{backgroundImage:`
            linear-gradient(oklch(0.65 0.22 265 / 0.08) 1px, transparent 1px),
            linear-gradient(90deg, oklch(0.65 0.22 265 / 0.08) 1px, transparent 1px)
          `,backgroundSize:"48px 48px",maskImage:"radial-gradient(ellipse 55% 55% at 50% 50%, black 0%, transparent 70%)",WebkitMaskImage:"radial-gradient(ellipse 55% 55% at 50% 50%, black 0%, transparent 70%)"}}),f.jsx(j4,{}),f.jsx(O4,{}),f.jsx(xi.div,{className:"start-anim-ring absolute",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:1,delay:.3},style:{width:160,height:160,borderRadius:"50%",border:"1px solid oklch(0.65 0.22 265 / 0.12)",borderTopColor:"oklch(0.65 0.22 265 / 0.4)"}}),f.jsx("div",{className:"start-anim-breathe absolute rounded-full",style:{width:120,height:120,background:"radial-gradient(circle, oklch(0.65 0.22 265 / 0.10) 0%, transparent 70%)"}}),f.jsxs(xi.div,{className:"relative z-10 flex flex-col items-center gap-8",variants:P4,initial:"hidden",animate:"show",children:[f.jsx(xi.div,{variants:vu,className:"flex items-center justify-center rounded-2xl",style:{width:88,height:88,background:"linear-gradient(135deg, oklch(0.14 0.03 265 / 0.7), oklch(0.10 0.02 270 / 0.5))",backdropFilter:"blur(16px)",border:"1px solid oklch(0.65 0.22 265 / 0.12)",boxShadow:"0 8px 32px oklch(0 0 0 / 0.5), inset 0 1px 0 oklch(1 0 0 / 0.04)"},children:f.jsx(R4,{})}),f.jsxs(xi.div,{variants:vu,className:"flex flex-col items-center gap-2.5",children:[f.jsx("h1",{style:{fontFamily:"'Syne', sans-serif",fontWeight:800,fontSize:"2.75rem",letterSpacing:"-0.03em",lineHeight:1,background:"linear-gradient(135deg, oklch(0.96 0.01 270) 0%, oklch(0.72 0.15 265) 45%, oklch(0.60 0.22 290) 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",filter:"drop-shadow(0 2px 12px oklch(0.65 0.22 265 / 0.3))"},children:"MICRO DAW"}),f.jsx("p",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:"0.65rem",letterSpacing:"0.22em",textTransform:"uppercase",color:"oklch(0.50 0.08 265)"},children:"Create  Compose  Perform"})]}),f.jsxs(xi.button,{variants:vu,onClick:r,disabled:e,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),whileHover:e?{}:{scale:1.04},whileTap:e?{}:{scale:.97},className:"start-anim-glow-btn relative overflow-hidden rounded-xl px-10 py-3 font-semibold tracking-wide disabled:opacity-50 disabled:cursor-not-allowed",style:{background:e?"oklch(0.20 0.03 265)":"linear-gradient(135deg, oklch(0.50 0.22 265), oklch(0.45 0.20 280))",color:"oklch(0.95 0.01 270)",fontSize:"0.9rem",fontFamily:"'Manrope', sans-serif",border:"1px solid oklch(0.55 0.18 265 / 0.3)",cursor:e?void 0:"pointer"},children:[!e&&f.jsx("div",{className:"pointer-events-none absolute inset-0",style:{background:"linear-gradient(105deg, transparent 40%, oklch(1 0 0 / 0.07) 50%, transparent 60%)",transform:s?"translateX(100%)":"translateX(-100%)",transition:"transform 0.6s ease"}}),e?f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",fill:"none",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Initializing..."]}):"Start Session"]}),f.jsxs(xi.p,{variants:vu,className:"max-w-xs text-center",style:{fontSize:"0.65rem",lineHeight:1.7,color:"oklch(0.35 0.02 270)"},children:["Initializes the audio engine and MIDI system.",f.jsx("br",{}),"Connect a controller for the best experience."]})]}),f.jsx("div",{className:"pointer-events-none absolute bottom-0 left-0 right-0 h-32",style:{background:"linear-gradient(to top, oklch(0.06 0.015 270), transparent)"}}),f.jsx("div",{className:"pointer-events-none absolute top-0 left-0 right-0 h-24",style:{background:"linear-gradient(to bottom, oklch(0.06 0.015 270 / 0.6), transparent)"}}),f.jsx(xi.div,{className:"absolute bottom-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2,duration:.8},style:{fontFamily:"'JetBrains Mono', monospace",fontSize:"0.55rem",color:"oklch(0.25 0.02 270)",letterSpacing:"0.12em"},children:"v1.0.0"})]})}/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=t=>{const e=L4(t);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var V4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=g.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:i="",children:r,iconNode:a,...o},l)=>g.createElement("svg",{ref:l,...V4,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:yA("lucide",i),...!r&&!z4(o)&&{"aria-hidden":"true"},...o},[...a.map(([c,u])=>g.createElement(c,u)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=(t,e)=>{const n=g.forwardRef(({className:s,...i},r)=>g.createElement(F4,{ref:r,iconNode:e,className:yA(`lucide-${B4(K1(t))}`,`lucide-${t}`,s),...i}));return n.displayName=K1(t),n};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],yo=me("arrow-left",H4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],G4=me("arrow-right",U4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],W4=me("book-open",q4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Y4=me("check",$4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],vA=me("chevron-down",K4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Q4=me("chevron-up",X4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],bA=me("circle-check",Z4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],eI=me("circle-dot",J4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],nI=me("circle",tI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],xA=me("clock",sI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Cg=me("download",iI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=[["path",{d:"m2 2 8 8",key:"1v6059"}],["path",{d:"m22 2-8 8",key:"173r8a"}],["ellipse",{cx:"12",cy:"9",rx:"10",ry:"5",key:"liohsx"}],["path",{d:"M7 13.4v7.9",key:"1yi6u9"}],["path",{d:"M12 14v8",key:"1tn2tj"}],["path",{d:"M17 13.4v7.9",key:"eqz2v3"}],["path",{d:"M2 9v8a10 5 0 0 0 20 0V9",key:"1750ul"}]],Iv=me("drum",rI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],oI=me("eraser",aI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lI=[["path",{d:"M4 6.835V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2h-.343",key:"1vfytu"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M2 19a2 2 0 0 1 4 0v1a2 2 0 0 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 0 1-4 0v-1a2 2 0 0 1 4 0",key:"1etmh7"}]],cI=me("file-headphone",lI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],dI=me("file-plus",uI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],fI=me("file-up",hI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],_A=me("folder-open",pI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Bv=me("graduation-cap",mI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gI=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],X1=me("loader-circle",gI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],wA=me("maximize-2",yI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],bI=me("minimize-2",vI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],SA=me("mouse-pointer-2",xI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _I=[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]],CA=me("music-2",_I);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Lv=me("music",wI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],CI=me("panel-left",SI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],EI=me("pencil",TI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AI=[["path",{d:"M18.5 8c-1.4 0-2.6-.8-3.2-2A6.87 6.87 0 0 0 2 9v11a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-8.5C22 9.6 20.4 8 18.5 8",key:"lag0yf"}],["path",{d:"M2 14h20",key:"myj16y"}],["path",{d:"M6 14v4",key:"9ng0ue"}],["path",{d:"M10 14v4",key:"1v8uk5"}],["path",{d:"M14 14v4",key:"1tqops"}],["path",{d:"M18 14v4",key:"18uqwm"}]],Hh=me("piano",AI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Uh=me("play",kI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],sc=me("plus",NI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],Vv=me("redo-2",MI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],DI=me("rotate-ccw",RI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Q1=me("save",OI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jI=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],PI=me("scissors",jI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],BI=me("search",II);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],zv=me("square",LI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],TA=me("star",VI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Fv=me("target",zI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Hv=me("timer",FI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],UI=me("trash-2",HI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Z1=me("triangle-alert",GI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],Uv=me("undo-2",qI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=[["circle",{cx:"10",cy:"7",r:"1",key:"dypaad"}],["circle",{cx:"4",cy:"20",r:"1",key:"22iqad"}],["path",{d:"M4.7 19.3 19 5",key:"1enqfc"}],["path",{d:"m21 3-3 1 2 2Z",key:"d3ov82"}],["path",{d:"M9.26 7.68 5 12l2 5",key:"1esawj"}],["path",{d:"m10 14 5 2 3.5-3.5",key:"v8oal5"}],["path",{d:"m18 12 1-1 1 1-1 1Z",key:"1bh22v"}]],$I=me("usb",WI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],Gv=me("volume-2",YI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],qv=me("volume-x",KI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],EA=me("waves",XI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Gh=me("x",QI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],JI=me("zoom-in",ZI);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],t6=me("zoom-out",e6);function J1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function $r(...t){return e=>{let n=!1;const s=t.map(i=>{const r=J1(i,e);return!n&&typeof r=="function"&&(n=!0),r});if(n)return()=>{for(let i=0;i<s.length;i++){const r=s[i];typeof r=="function"?r():J1(t[i],null)}}}}function De(...t){return g.useCallback($r(...t),t)}function vo(t){const e=n6(t),n=g.forwardRef((s,i)=>{const{children:r,...a}=s,o=g.Children.toArray(r),l=o.find(i6);if(l){const c=l.props.children,u=o.map(d=>d===l?g.Children.count(c)>1?g.Children.only(null):g.isValidElement(c)?c.props.children:null:d);return f.jsx(e,{...a,ref:i,children:g.isValidElement(c)?g.cloneElement(c,void 0,u):null})}return f.jsx(e,{...a,ref:i,children:r})});return n.displayName=`${t}.Slot`,n}var qh=vo("Slot");function n6(t){const e=g.forwardRef((n,s)=>{const{children:i,...r}=n;if(g.isValidElement(i)){const a=a6(i),o=r6(r,i.props);return i.type!==g.Fragment&&(o.ref=s?$r(s,a):a),g.cloneElement(i,o)}return g.Children.count(i)>1?g.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var AA=Symbol("radix.slottable");function s6(t){const e=({children:n})=>f.jsx(f.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=AA,e}function i6(t){return g.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===AA}function r6(t,e){const n={...e};for(const s in e){const i=t[s],r=e[s];/^on[A-Z]/.test(s)?i&&r?n[s]=(...o)=>{const l=r(...o);return i(...o),l}:i&&(n[s]=i):s==="style"?n[s]={...i,...r}:s==="className"&&(n[s]=[i,r].filter(Boolean).join(" "))}return{...t,...n}}function a6(t){var s,i;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var o6=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],he=o6.reduce((t,e)=>{const n=vo(`Primitive.${e}`),s=g.forwardRef((i,r)=>{const{asChild:a,...o}=i,l=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(l,{...o,ref:r})});return s.displayName=`Primitive.${e}`,{...t,[e]:s}},{});function l6(t,e){t&&No.flushSync(()=>t.dispatchEvent(e))}var kA=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),c6="VisuallyHidden",NA=g.forwardRef((t,e)=>f.jsx(he.span,{...t,ref:e,style:{...kA,...t.style}}));NA.displayName=c6;var u6=NA;function d6(t,e){const n=g.createContext(e),s=r=>{const{children:a,...o}=r,l=g.useMemo(()=>o,Object.values(o));return f.jsx(n.Provider,{value:l,children:a})};s.displayName=t+"Provider";function i(r){const a=g.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${r}\` must be used within \`${t}\``)}return[s,i]}function pi(t,e=[]){let n=[];function s(r,a){const o=g.createContext(a),l=n.length;n=[...n,a];const c=d=>{var v;const{scope:h,children:p,...m}=d,y=((v=h==null?void 0:h[t])==null?void 0:v[l])||o,x=g.useMemo(()=>m,Object.values(m));return f.jsx(y.Provider,{value:x,children:p})};c.displayName=r+"Provider";function u(d,h){var y;const p=((y=h==null?void 0:h[t])==null?void 0:y[l])||o,m=g.useContext(p);if(m)return m;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${r}\``)}return[c,u]}const i=()=>{const r=n.map(a=>g.createContext(a));return function(o){const l=(o==null?void 0:o[t])||r;return g.useMemo(()=>({[`__scope${t}`]:{...o,[t]:l}}),[o,l])}};return i.scopeName=t,[s,h6(i,...e)]}function h6(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const s=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(r){const a=s.reduce((o,{useScope:l,scopeName:c})=>{const d=l(r)[`__scope${c}`];return{...o,...d}},{});return g.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function Wv(t){const e=t+"CollectionProvider",[n,s]=pi(e),[i,r]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=y=>{const{scope:x,children:v}=y,b=_t.useRef(null),_=_t.useRef(new Map).current;return f.jsx(i,{scope:x,itemMap:_,collectionRef:b,children:v})};a.displayName=e;const o=t+"CollectionSlot",l=vo(o),c=_t.forwardRef((y,x)=>{const{scope:v,children:b}=y,_=r(o,v),w=De(x,_.collectionRef);return f.jsx(l,{ref:w,children:b})});c.displayName=o;const u=t+"CollectionItemSlot",d="data-radix-collection-item",h=vo(u),p=_t.forwardRef((y,x)=>{const{scope:v,children:b,..._}=y,w=_t.useRef(null),S=De(x,w),T=r(u,v);return _t.useEffect(()=>(T.itemMap.set(w,{ref:w,..._}),()=>void T.itemMap.delete(w))),f.jsx(h,{[d]:"",ref:S,children:b})});p.displayName=u;function m(y){const x=r(t+"CollectionConsumer",y);return _t.useCallback(()=>{const b=x.collectionRef.current;if(!b)return[];const _=Array.from(b.querySelectorAll(`[${d}]`));return Array.from(x.itemMap.values()).sort((T,E)=>_.indexOf(T.ref.current)-_.indexOf(E.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:a,Slot:c,ItemSlot:p},m,s]}function ye(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}var Ht=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},f6=Fw[" useInsertionEffect ".trim().toString()]||Ht;function As({prop:t,defaultProp:e,onChange:n=()=>{},caller:s}){const[i,r,a]=p6({defaultProp:e,onChange:n}),o=t!==void 0,l=o?t:i;{const u=g.useRef(t!==void 0);g.useEffect(()=>{const d=u.current;d!==o&&console.warn(`${s} is changing from ${d?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=o},[o,s])}const c=g.useCallback(u=>{var d;if(o){const h=m6(u)?u(t):u;h!==t&&((d=a.current)==null||d.call(a,h))}else r(u)},[o,t,r,a]);return[l,c]}function p6({defaultProp:t,onChange:e}){const[n,s]=g.useState(t),i=g.useRef(n),r=g.useRef(e);return f6(()=>{r.current=e},[e]),g.useEffect(()=>{var a;i.current!==n&&((a=r.current)==null||a.call(r,n),i.current=n)},[n,i]),[n,s,r]}function m6(t){return typeof t=="function"}function g6(t,e){return g.useReducer((n,s)=>e[n][s]??n,t)}var zo=t=>{const{present:e,children:n}=t,s=y6(e),i=typeof n=="function"?n({present:s.isPresent}):g.Children.only(n),r=De(s.ref,v6(i));return typeof n=="function"||s.isPresent?g.cloneElement(i,{ref:r}):null};zo.displayName="Presence";function y6(t){const[e,n]=g.useState(),s=g.useRef(null),i=g.useRef(t),r=g.useRef("none"),a=t?"mounted":"unmounted",[o,l]=g6(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const c=bu(s.current);r.current=o==="mounted"?c:"none"},[o]),Ht(()=>{const c=s.current,u=i.current;if(u!==t){const h=r.current,p=bu(c);t?l("MOUNT"):p==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(u&&h!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Ht(()=>{if(e){let c;const u=e.ownerDocument.defaultView??window,d=p=>{const y=bu(s.current).includes(CSS.escape(p.animationName));if(p.target===e&&y&&(l("ANIMATION_END"),!i.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",c=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},h=p=>{p.target===e&&(r.current=bu(s.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(c),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:g.useCallback(c=>{s.current=c?getComputedStyle(c):null,n(c)},[])}}function bu(t){return(t==null?void 0:t.animationName)||"none"}function v6(t){var s,i;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var b6=Fw[" useId ".trim().toString()]||(()=>{}),x6=0;function un(t){const[e,n]=g.useState(b6());return Ht(()=>{n(s=>s??String(x6++))},[t]),t||(e?`radix-${e}`:"")}var _6=g.createContext(void 0);function Wh(t){const e=g.useContext(_6);return t||e||"ltr"}function rr(t){const e=g.useRef(t);return g.useEffect(()=>{e.current=t}),g.useMemo(()=>(...n)=>{var s;return(s=e.current)==null?void 0:s.call(e,...n)},[])}function w6(t,e=globalThis==null?void 0:globalThis.document){const n=rr(t);g.useEffect(()=>{const s=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[n,e])}var S6="DismissableLayer",Tg="dismissableLayer.update",C6="dismissableLayer.pointerDownOutside",T6="dismissableLayer.focusOutside",e_,MA=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$h=g.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:r,onInteractOutside:a,onDismiss:o,...l}=t,c=g.useContext(MA),[u,d]=g.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=g.useState({}),m=De(e,E=>d(E)),y=Array.from(c.layers),[x]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=y.indexOf(x),b=u?y.indexOf(u):-1,_=c.layersWithOutsidePointerEventsDisabled.size>0,w=b>=v,S=k6(E=>{const C=E.target,M=[...c.branches].some(A=>A.contains(C));!w||M||(i==null||i(E),a==null||a(E),E.defaultPrevented||o==null||o())},h),T=N6(E=>{const C=E.target;[...c.branches].some(A=>A.contains(C))||(r==null||r(E),a==null||a(E),E.defaultPrevented||o==null||o())},h);return w6(E=>{b===c.layers.size-1&&(s==null||s(E),!E.defaultPrevented&&o&&(E.preventDefault(),o()))},h),g.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(e_=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),t_(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=e_)}},[u,h,n,c]),g.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),t_())},[u,c]),g.useEffect(()=>{const E=()=>p({});return document.addEventListener(Tg,E),()=>document.removeEventListener(Tg,E)},[]),f.jsx(he.div,{...l,ref:m,style:{pointerEvents:_?w?"auto":"none":void 0,...t.style},onFocusCapture:ye(t.onFocusCapture,T.onFocusCapture),onBlurCapture:ye(t.onBlurCapture,T.onBlurCapture),onPointerDownCapture:ye(t.onPointerDownCapture,S.onPointerDownCapture)})});$h.displayName=S6;var E6="DismissableLayerBranch",A6=g.forwardRef((t,e)=>{const n=g.useContext(MA),s=g.useRef(null),i=De(e,s);return g.useEffect(()=>{const r=s.current;if(r)return n.branches.add(r),()=>{n.branches.delete(r)}},[n.branches]),f.jsx(he.div,{...t,ref:i})});A6.displayName=E6;function k6(t,e=globalThis==null?void 0:globalThis.document){const n=rr(t),s=g.useRef(!1),i=g.useRef(()=>{});return g.useEffect(()=>{const r=o=>{if(o.target&&!s.current){let l=function(){RA(C6,n,c,{discrete:!0})};const c={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);s.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",r)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",r),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>s.current=!0}}function N6(t,e=globalThis==null?void 0:globalThis.document){const n=rr(t),s=g.useRef(!1);return g.useEffect(()=>{const i=r=>{r.target&&!s.current&&RA(T6,n,{originalEvent:r},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function t_(){const t=new CustomEvent(Tg);document.dispatchEvent(t)}function RA(t,e,n,{discrete:s}){const i=n.originalEvent.target,r=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),s?l6(i,r):i.dispatchEvent(r)}var Lp="focusScope.autoFocusOnMount",Vp="focusScope.autoFocusOnUnmount",n_={bubbles:!1,cancelable:!0},M6="FocusScope",$v=g.forwardRef((t,e)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:i,onUnmountAutoFocus:r,...a}=t,[o,l]=g.useState(null),c=rr(i),u=rr(r),d=g.useRef(null),h=De(e,y=>l(y)),p=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(s){let y=function(_){if(p.paused||!o)return;const w=_.target;o.contains(w)?d.current=w:Ti(d.current,{select:!0})},x=function(_){if(p.paused||!o)return;const w=_.relatedTarget;w!==null&&(o.contains(w)||Ti(d.current,{select:!0}))},v=function(_){if(document.activeElement===document.body)for(const S of _)S.removedNodes.length>0&&Ti(o)};document.addEventListener("focusin",y),document.addEventListener("focusout",x);const b=new MutationObserver(v);return o&&b.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",x),b.disconnect()}}},[s,o,p.paused]),g.useEffect(()=>{if(o){i_.add(p);const y=document.activeElement;if(!o.contains(y)){const v=new CustomEvent(Lp,n_);o.addEventListener(Lp,c),o.dispatchEvent(v),v.defaultPrevented||(R6(I6(DA(o)),{select:!0}),document.activeElement===y&&Ti(o))}return()=>{o.removeEventListener(Lp,c),setTimeout(()=>{const v=new CustomEvent(Vp,n_);o.addEventListener(Vp,u),o.dispatchEvent(v),v.defaultPrevented||Ti(y??document.body,{select:!0}),o.removeEventListener(Vp,u),i_.remove(p)},0)}}},[o,c,u,p]);const m=g.useCallback(y=>{if(!n&&!s||p.paused)return;const x=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,v=document.activeElement;if(x&&v){const b=y.currentTarget,[_,w]=D6(b);_&&w?!y.shiftKey&&v===w?(y.preventDefault(),n&&Ti(_,{select:!0})):y.shiftKey&&v===_&&(y.preventDefault(),n&&Ti(w,{select:!0})):v===b&&y.preventDefault()}},[n,s,p.paused]);return f.jsx(he.div,{tabIndex:-1,...a,ref:h,onKeyDown:m})});$v.displayName=M6;function R6(t,{select:e=!1}={}){const n=document.activeElement;for(const s of t)if(Ti(s,{select:e}),document.activeElement!==n)return}function D6(t){const e=DA(t),n=s_(e,t),s=s_(e.reverse(),t);return[n,s]}function DA(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function s_(t,e){for(const n of t)if(!O6(n,{upTo:e}))return n}function O6(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function j6(t){return t instanceof HTMLInputElement&&"select"in t}function Ti(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&j6(t)&&e&&t.select()}}var i_=P6();function P6(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=r_(t,e),t.unshift(e)},remove(e){var n;t=r_(t,e),(n=t[0])==null||n.resume()}}}function r_(t,e){const n=[...t],s=n.indexOf(e);return s!==-1&&n.splice(s,1),n}function I6(t){return t.filter(e=>e.tagName!=="A")}var B6="Portal",Yh=g.forwardRef((t,e)=>{var o;const{container:n,...s}=t,[i,r]=g.useState(!1);Ht(()=>r(!0),[]);const a=n||i&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?cR.createPortal(f.jsx(he.div,{...s,ref:e}),a):null});Yh.displayName=B6;var zp=0;function OA(){g.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??a_()),document.body.insertAdjacentElement("beforeend",t[1]??a_()),zp++,()=>{zp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),zp--}},[])}function a_(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var ji=function(){return ji=Object.assign||function(e){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ji.apply(this,arguments)};function L6(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n}function V6(t,e,n){if(n||arguments.length===2)for(var s=0,i=e.length,r;s<i;s++)(r||!(s in e))&&(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return t.concat(r||Array.prototype.slice.call(e))}var sd="right-scroll-bar-position",id="width-before-scroll-bar",z6="with-scroll-bars-hidden",F6="--removed-body-scroll-bar-size";function Fp(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function H6(t,e){var n=g.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(s){var i=n.value;i!==s&&(n.value=s,n.callback(s,i))}}}})[0];return n.callback=e,n.facade}var U6=typeof window<"u"?g.useLayoutEffect:g.useEffect,o_=new WeakMap;function G6(t,e){var n=H6(null,function(s){return t.forEach(function(i){return Fp(i,s)})});return U6(function(){var s=o_.get(n);if(s){var i=new Set(s),r=new Set(t),a=n.current;i.forEach(function(o){r.has(o)||Fp(o,null)}),r.forEach(function(o){i.has(o)||Fp(o,a)})}o_.set(n,t)},[t]),n}var Gd=function(){return Gd=Object.assign||function(e){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gd.apply(this,arguments)};function q6(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n}function W6(t){return t}function $6(t,e){e===void 0&&(e=W6);var n=[],s=!1,i={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(r){var a=e(r,s);return n.push(a),function(){n=n.filter(function(o){return o!==a})}},assignSyncMedium:function(r){for(s=!0;n.length;){var a=n;n=[],a.forEach(r)}n={push:function(o){return r(o)},filter:function(){return n}}},assignMedium:function(r){s=!0;var a=[];if(n.length){var o=n;n=[],o.forEach(r),a=n}var l=function(){var u=a;a=[],u.forEach(r)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){a.push(u),c()},filter:function(u){return a=a.filter(u),n}}}};return i}function Y6(t){t===void 0&&(t={});var e=$6(null);return e.options=Gd({async:!0,ssr:!1},t),e}var jA=function(t){var e=t.sideCar,n=q6(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return g.createElement(s,Gd({},n))};jA.isSideCarExport=!0;function K6(t,e){return t.useMedium(e),jA}var PA=Y6(),Hp=function(){},Kh=g.forwardRef(function(t,e){var n=g.useRef(null),s=g.useState({onScrollCapture:Hp,onWheelCapture:Hp,onTouchMoveCapture:Hp}),i=s[0],r=s[1],a=t.forwardProps,o=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,h=t.sideCar,p=t.noRelative,m=t.noIsolation,y=t.inert,x=t.allowPinchZoom,v=t.as,b=v===void 0?"div":v,_=t.gapMode,w=L6(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),S=h,T=G6([n,e]),E=ji(ji({},w),i);return g.createElement(g.Fragment,null,u&&g.createElement(S,{sideCar:PA,removeScrollBar:c,shards:d,noRelative:p,noIsolation:m,inert:y,setCallbacks:r,allowPinchZoom:!!x,lockRef:n,gapMode:_}),a?g.cloneElement(g.Children.only(o),ji(ji({},E),{ref:T})):g.createElement(b,ji({},E,{className:l,ref:T}),o))});Kh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Kh.classNames={fullWidth:id,zeroRight:sd};var X6=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Q6(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=X6();return e&&t.setAttribute("nonce",e),t}function Z6(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function J6(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var eB=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Q6())&&(Z6(e,n),J6(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},tB=function(){var t=eB();return function(e,n){g.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},IA=function(){var t=tB(),e=function(n){var s=n.styles,i=n.dynamic;return t(s,i),null};return e},nB={left:0,top:0,right:0,gap:0},Up=function(t){return parseInt(t||"",10)||0},sB=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],s=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[Up(n),Up(s),Up(i)]},iB=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return nB;var e=sB(t),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-n+e[2]-e[0])}},rB=IA(),to="data-scroll-locked",aB=function(t,e,n,s){var i=t.left,r=t.top,a=t.right,o=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(z6,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(o,"px ").concat(s,`;
  }
  body[`).concat(to,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(r,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(sd,` {
    right: `).concat(o,"px ").concat(s,`;
  }
  
  .`).concat(id,` {
    margin-right: `).concat(o,"px ").concat(s,`;
  }
  
  .`).concat(sd," .").concat(sd,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(id," .").concat(id,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(to,`] {
    `).concat(F6,": ").concat(o,`px;
  }
`)},l_=function(){var t=parseInt(document.body.getAttribute(to)||"0",10);return isFinite(t)?t:0},oB=function(){g.useEffect(function(){return document.body.setAttribute(to,(l_()+1).toString()),function(){var t=l_()-1;t<=0?document.body.removeAttribute(to):document.body.setAttribute(to,t.toString())}},[])},lB=function(t){var e=t.noRelative,n=t.noImportant,s=t.gapMode,i=s===void 0?"margin":s;oB();var r=g.useMemo(function(){return iB(i)},[i]);return g.createElement(rB,{styles:aB(r,!e,i,n?"":"!important")})},Eg=!1;if(typeof window<"u")try{var xu=Object.defineProperty({},"passive",{get:function(){return Eg=!0,!0}});window.addEventListener("test",xu,xu),window.removeEventListener("test",xu,xu)}catch{Eg=!1}var ma=Eg?{passive:!1}:!1,cB=function(t){return t.tagName==="TEXTAREA"},BA=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!cB(t)&&n[e]==="visible")},uB=function(t){return BA(t,"overflowY")},dB=function(t){return BA(t,"overflowX")},c_=function(t,e){var n=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var i=LA(t,s);if(i){var r=VA(t,s),a=r[1],o=r[2];if(a>o)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},hB=function(t){var e=t.scrollTop,n=t.scrollHeight,s=t.clientHeight;return[e,n,s]},fB=function(t){var e=t.scrollLeft,n=t.scrollWidth,s=t.clientWidth;return[e,n,s]},LA=function(t,e){return t==="v"?uB(e):dB(e)},VA=function(t,e){return t==="v"?hB(e):fB(e)},pB=function(t,e){return t==="h"&&e==="rtl"?-1:1},mB=function(t,e,n,s,i){var r=pB(t,window.getComputedStyle(e).direction),a=r*s,o=n.target,l=e.contains(o),c=!1,u=a>0,d=0,h=0;do{if(!o)break;var p=VA(t,o),m=p[0],y=p[1],x=p[2],v=y-x-r*m;(m||v)&&LA(t,o)&&(d+=v,h+=m);var b=o.parentNode;o=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!l&&o!==document.body||l&&(e.contains(o)||e===o));return(u&&Math.abs(d)<1||!u&&Math.abs(h)<1)&&(c=!0),c},_u=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},u_=function(t){return[t.deltaX,t.deltaY]},d_=function(t){return t&&"current"in t?t.current:t},gB=function(t,e){return t[0]===e[0]&&t[1]===e[1]},yB=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},vB=0,ga=[];function bB(t){var e=g.useRef([]),n=g.useRef([0,0]),s=g.useRef(),i=g.useState(vB++)[0],r=g.useState(IA)[0],a=g.useRef(t);g.useEffect(function(){a.current=t},[t]),g.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var y=V6([t.lockRef.current],(t.shards||[]).map(d_),!0).filter(Boolean);return y.forEach(function(x){return x.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var o=g.useCallback(function(y,x){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!a.current.allowPinchZoom;var v=_u(y),b=n.current,_="deltaX"in y?y.deltaX:b[0]-v[0],w="deltaY"in y?y.deltaY:b[1]-v[1],S,T=y.target,E=Math.abs(_)>Math.abs(w)?"h":"v";if("touches"in y&&E==="h"&&T.type==="range")return!1;var C=window.getSelection(),M=C&&C.anchorNode,A=M?M===T||M.contains(T):!1;if(A)return!1;var k=c_(E,T);if(!k)return!0;if(k?S=E:(S=E==="v"?"h":"v",k=c_(E,T)),!k)return!1;if(!s.current&&"changedTouches"in y&&(_||w)&&(s.current=S),!S)return!0;var N=s.current||S;return mB(N,x,y,N==="h"?_:w)},[]),l=g.useCallback(function(y){var x=y;if(!(!ga.length||ga[ga.length-1]!==r)){var v="deltaY"in x?u_(x):_u(x),b=e.current.filter(function(S){return S.name===x.type&&(S.target===x.target||x.target===S.shadowParent)&&gB(S.delta,v)})[0];if(b&&b.should){x.cancelable&&x.preventDefault();return}if(!b){var _=(a.current.shards||[]).map(d_).filter(Boolean).filter(function(S){return S.contains(x.target)}),w=_.length>0?o(x,_[0]):!a.current.noIsolation;w&&x.cancelable&&x.preventDefault()}}},[]),c=g.useCallback(function(y,x,v,b){var _={name:y,delta:x,target:v,should:b,shadowParent:xB(v)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(w){return w!==_})},1)},[]),u=g.useCallback(function(y){n.current=_u(y),s.current=void 0},[]),d=g.useCallback(function(y){c(y.type,u_(y),y.target,o(y,t.lockRef.current))},[]),h=g.useCallback(function(y){c(y.type,_u(y),y.target,o(y,t.lockRef.current))},[]);g.useEffect(function(){return ga.push(r),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,ma),document.addEventListener("touchmove",l,ma),document.addEventListener("touchstart",u,ma),function(){ga=ga.filter(function(y){return y!==r}),document.removeEventListener("wheel",l,ma),document.removeEventListener("touchmove",l,ma),document.removeEventListener("touchstart",u,ma)}},[]);var p=t.removeScrollBar,m=t.inert;return g.createElement(g.Fragment,null,m?g.createElement(r,{styles:yB(i)}):null,p?g.createElement(lB,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function xB(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const _B=K6(PA,bB);var Yv=g.forwardRef(function(t,e){return g.createElement(Kh,ji({},t,{ref:e,sideCar:_B}))});Yv.classNames=Kh.classNames;var wB=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ya=new WeakMap,wu=new WeakMap,Su={},Gp=0,zA=function(t){return t&&(t.host||zA(t.parentNode))},SB=function(t,e){return e.map(function(n){if(t.contains(n))return n;var s=zA(n);return s&&t.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},CB=function(t,e,n,s){var i=SB(e,Array.isArray(t)?t:[t]);Su[n]||(Su[n]=new WeakMap);var r=Su[n],a=[],o=new Set,l=new Set(i),c=function(d){!d||o.has(d)||(o.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(o.has(h))u(h);else try{var p=h.getAttribute(s),m=p!==null&&p!=="false",y=(ya.get(h)||0)+1,x=(r.get(h)||0)+1;ya.set(h,y),r.set(h,x),a.push(h),y===1&&m&&wu.set(h,!0),x===1&&h.setAttribute(n,"true"),m||h.setAttribute(s,"true")}catch(v){console.error("aria-hidden: cannot operate on ",h,v)}})};return u(e),o.clear(),Gp++,function(){a.forEach(function(d){var h=ya.get(d)-1,p=r.get(d)-1;ya.set(d,h),r.set(d,p),h||(wu.has(d)||d.removeAttribute(s),wu.delete(d)),p||d.removeAttribute(n)}),Gp--,Gp||(ya=new WeakMap,ya=new WeakMap,wu=new WeakMap,Su={})}},FA=function(t,e,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(t)?t:[t]),i=wB(t);return i?(s.push.apply(s,Array.from(i.querySelectorAll("[aria-live], script"))),CB(s,i,n,"aria-hidden")):function(){return null}},Xh="Dialog",[HA]=pi(Xh),[TB,ds]=HA(Xh),UA=t=>{const{__scopeDialog:e,children:n,open:s,defaultOpen:i,onOpenChange:r,modal:a=!0}=t,o=g.useRef(null),l=g.useRef(null),[c,u]=As({prop:s,defaultProp:i??!1,onChange:r,caller:Xh});return f.jsx(TB,{scope:e,triggerRef:o,contentRef:l,contentId:un(),titleId:un(),descriptionId:un(),open:c,onOpenChange:u,onOpenToggle:g.useCallback(()=>u(d=>!d),[u]),modal:a,children:n})};UA.displayName=Xh;var GA="DialogTrigger",EB=g.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,i=ds(GA,n),r=De(e,i.triggerRef);return f.jsx(he.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Qv(i.open),...s,ref:r,onClick:ye(t.onClick,i.onOpenToggle)})});EB.displayName=GA;var Kv="DialogPortal",[AB,qA]=HA(Kv,{forceMount:void 0}),WA=t=>{const{__scopeDialog:e,forceMount:n,children:s,container:i}=t,r=ds(Kv,e);return f.jsx(AB,{scope:e,forceMount:n,children:g.Children.map(s,a=>f.jsx(zo,{present:n||r.open,children:f.jsx(Yh,{asChild:!0,container:i,children:a})}))})};WA.displayName=Kv;var qd="DialogOverlay",$A=g.forwardRef((t,e)=>{const n=qA(qd,t.__scopeDialog),{forceMount:s=n.forceMount,...i}=t,r=ds(qd,t.__scopeDialog);return r.modal?f.jsx(zo,{present:s||r.open,children:f.jsx(NB,{...i,ref:e})}):null});$A.displayName=qd;var kB=vo("DialogOverlay.RemoveScroll"),NB=g.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,i=ds(qd,n);return f.jsx(Yv,{as:kB,allowPinchZoom:!0,shards:[i.contentRef],children:f.jsx(he.div,{"data-state":Qv(i.open),...s,ref:e,style:{pointerEvents:"auto",...s.style}})})}),Yr="DialogContent",YA=g.forwardRef((t,e)=>{const n=qA(Yr,t.__scopeDialog),{forceMount:s=n.forceMount,...i}=t,r=ds(Yr,t.__scopeDialog);return f.jsx(zo,{present:s||r.open,children:r.modal?f.jsx(MB,{...i,ref:e}):f.jsx(RB,{...i,ref:e})})});YA.displayName=Yr;var MB=g.forwardRef((t,e)=>{const n=ds(Yr,t.__scopeDialog),s=g.useRef(null),i=De(e,n.contentRef,s);return g.useEffect(()=>{const r=s.current;if(r)return FA(r)},[]),f.jsx(KA,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ye(t.onCloseAutoFocus,r=>{var a;r.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:ye(t.onPointerDownOutside,r=>{const a=r.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&r.preventDefault()}),onFocusOutside:ye(t.onFocusOutside,r=>r.preventDefault())})}),RB=g.forwardRef((t,e)=>{const n=ds(Yr,t.__scopeDialog),s=g.useRef(!1),i=g.useRef(!1);return f.jsx(KA,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{var a,o;(a=t.onCloseAutoFocus)==null||a.call(t,r),r.defaultPrevented||(s.current||(o=n.triggerRef.current)==null||o.focus(),r.preventDefault()),s.current=!1,i.current=!1},onInteractOutside:r=>{var l,c;(l=t.onInteractOutside)==null||l.call(t,r),r.defaultPrevented||(s.current=!0,r.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const a=r.target;((c=n.triggerRef.current)==null?void 0:c.contains(a))&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&i.current&&r.preventDefault()}})}),KA=g.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:r,...a}=t,o=ds(Yr,n),l=g.useRef(null),c=De(e,l);return OA(),f.jsxs(f.Fragment,{children:[f.jsx($v,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:r,children:f.jsx($h,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":Qv(o.open),...a,ref:c,onDismiss:()=>o.onOpenChange(!1)})}),f.jsxs(f.Fragment,{children:[f.jsx(DB,{titleId:o.titleId}),f.jsx(jB,{contentRef:l,descriptionId:o.descriptionId})]})]})}),Xv="DialogTitle",XA=g.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,i=ds(Xv,n);return f.jsx(he.h2,{id:i.titleId,...s,ref:e})});XA.displayName=Xv;var QA="DialogDescription",ZA=g.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,i=ds(QA,n);return f.jsx(he.p,{id:i.descriptionId,...s,ref:e})});ZA.displayName=QA;var JA="DialogClose",ek=g.forwardRef((t,e)=>{const{__scopeDialog:n,...s}=t,i=ds(JA,n);return f.jsx(he.button,{type:"button",...s,ref:e,onClick:ye(t.onClick,()=>i.onOpenChange(!1))})});ek.displayName=JA;function Qv(t){return t?"open":"closed"}var tk="DialogTitleWarning",[BJ,nk]=d6(tk,{contentName:Yr,titleName:Xv,docsSlug:"dialog"}),DB=({titleId:t})=>{const e=nk(tk),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return g.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},OB="DialogDescriptionWarning",jB=({contentRef:t,descriptionId:e})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${nk(OB).contentName}}.`;return g.useEffect(()=>{var r;const i=(r=t.current)==null?void 0:r.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(s))},[s,t,e]),null},Zv=UA,Jv=WA,e0=$A,t0=YA,sk=XA,PB=ZA,ik=ek;function n0(t){const e=g.useRef({value:t,previous:t});return g.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function s0(t){const[e,n]=g.useState(void 0);return Ht(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const r=i[0];let a,o;if("borderBoxSize"in r){const l=r.borderBoxSize,c=Array.isArray(l)?l[0]:l;a=c.inlineSize,o=c.blockSize}else a=t.offsetWidth,o=t.offsetHeight;n({width:a,height:o})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else n(void 0)},[t]),e}const IB=["top","right","bottom","left"],ar=Math.min,yn=Math.max,Wd=Math.round,Cu=Math.floor,Ss=t=>({x:t,y:t}),BB={left:"right",right:"left",bottom:"top",top:"bottom"},LB={start:"end",end:"start"};function Ag(t,e,n){return yn(t,ar(e,n))}function li(t,e){return typeof t=="function"?t(e):t}function ci(t){return t.split("-")[0]}function Fo(t){return t.split("-")[1]}function i0(t){return t==="x"?"y":"x"}function r0(t){return t==="y"?"height":"width"}const VB=new Set(["top","bottom"]);function bs(t){return VB.has(ci(t))?"y":"x"}function a0(t){return i0(bs(t))}function zB(t,e,n){n===void 0&&(n=!1);const s=Fo(t),i=a0(t),r=r0(i);let a=i==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(a=$d(a)),[a,$d(a)]}function FB(t){const e=$d(t);return[kg(t),e,kg(e)]}function kg(t){return t.replace(/start|end/g,e=>LB[e])}const h_=["left","right"],f_=["right","left"],HB=["top","bottom"],UB=["bottom","top"];function GB(t,e,n){switch(t){case"top":case"bottom":return n?e?f_:h_:e?h_:f_;case"left":case"right":return e?HB:UB;default:return[]}}function qB(t,e,n,s){const i=Fo(t);let r=GB(ci(t),n==="start",s);return i&&(r=r.map(a=>a+"-"+i),e&&(r=r.concat(r.map(kg)))),r}function $d(t){return t.replace(/left|right|bottom|top/g,e=>BB[e])}function WB(t){return{top:0,right:0,bottom:0,left:0,...t}}function rk(t){return typeof t!="number"?WB(t):{top:t,right:t,bottom:t,left:t}}function Yd(t){const{x:e,y:n,width:s,height:i}=t;return{width:s,height:i,top:n,left:e,right:e+s,bottom:n+i,x:e,y:n}}function p_(t,e,n){let{reference:s,floating:i}=t;const r=bs(e),a=a0(e),o=r0(a),l=ci(e),c=r==="y",u=s.x+s.width/2-i.width/2,d=s.y+s.height/2-i.height/2,h=s[o]/2-i[o]/2;let p;switch(l){case"top":p={x:u,y:s.y-i.height};break;case"bottom":p={x:u,y:s.y+s.height};break;case"right":p={x:s.x+s.width,y:d};break;case"left":p={x:s.x-i.width,y:d};break;default:p={x:s.x,y:s.y}}switch(Fo(e)){case"start":p[a]-=h*(n&&c?-1:1);break;case"end":p[a]+=h*(n&&c?-1:1);break}return p}async function $B(t,e){var n;e===void 0&&(e={});const{x:s,y:i,platform:r,rects:a,elements:o,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=li(e,t),m=rk(p),x=o[h?d==="floating"?"reference":"floating":d],v=Yd(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(x)))==null||n?x:x.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),b=d==="floating"?{x:s,y:i,width:a.floating.width,height:a.floating.height}:a.reference,_=await(r.getOffsetParent==null?void 0:r.getOffsetParent(o.floating)),w=await(r.isElement==null?void 0:r.isElement(_))?await(r.getScale==null?void 0:r.getScale(_))||{x:1,y:1}:{x:1,y:1},S=Yd(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:b,offsetParent:_,strategy:l}):b);return{top:(v.top-S.top+m.top)/w.y,bottom:(S.bottom-v.bottom+m.bottom)/w.y,left:(v.left-S.left+m.left)/w.x,right:(S.right-v.right+m.right)/w.x}}const YB=async(t,e,n)=>{const{placement:s="bottom",strategy:i="absolute",middleware:r=[],platform:a}=n,o=r.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let c=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=p_(c,s,l),h=s,p={},m=0;for(let x=0;x<o.length;x++){var y;const{name:v,fn:b}=o[x],{x:_,y:w,data:S,reset:T}=await b({x:u,y:d,initialPlacement:s,placement:h,strategy:i,middlewareData:p,rects:c,platform:{...a,detectOverflow:(y=a.detectOverflow)!=null?y:$B},elements:{reference:t,floating:e}});u=_??u,d=w??d,p={...p,[v]:{...p[v],...S}},T&&m<=50&&(m++,typeof T=="object"&&(T.placement&&(h=T.placement),T.rects&&(c=T.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:i}):T.rects),{x:u,y:d}=p_(c,h,l)),x=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:p}},KB=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:s,placement:i,rects:r,platform:a,elements:o,middlewareData:l}=e,{element:c,padding:u=0}=li(t,e)||{};if(c==null)return{};const d=rk(u),h={x:n,y:s},p=a0(i),m=r0(p),y=await a.getDimensions(c),x=p==="y",v=x?"top":"left",b=x?"bottom":"right",_=x?"clientHeight":"clientWidth",w=r.reference[m]+r.reference[p]-h[p]-r.floating[m],S=h[p]-r.reference[p],T=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c));let E=T?T[_]:0;(!E||!await(a.isElement==null?void 0:a.isElement(T)))&&(E=o.floating[_]||r.floating[m]);const C=w/2-S/2,M=E/2-y[m]/2-1,A=ar(d[v],M),k=ar(d[b],M),N=A,P=E-y[m]-k,j=E/2-y[m]/2+C,I=Ag(N,j,P),D=!l.arrow&&Fo(i)!=null&&j!==I&&r.reference[m]/2-(j<N?A:k)-y[m]/2<0,O=D?j<N?j-N:j-P:0;return{[p]:h[p]+O,data:{[p]:I,centerOffset:j-I-O,...D&&{alignmentOffset:O}},reset:D}}}),XB=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,s;const{placement:i,middlewareData:r,rects:a,initialPlacement:o,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:y=!0,...x}=li(t,e);if((n=r.arrow)!=null&&n.alignmentOffset)return{};const v=ci(i),b=bs(o),_=ci(o)===o,w=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=h||(_||!y?[$d(o)]:FB(o)),T=m!=="none";!h&&T&&S.push(...qB(o,y,m,w));const E=[o,...S],C=await l.detectOverflow(e,x),M=[];let A=((s=r.flip)==null?void 0:s.overflows)||[];if(u&&M.push(C[v]),d){const j=zB(i,a,w);M.push(C[j[0]],C[j[1]])}if(A=[...A,{placement:i,overflows:M}],!M.every(j=>j<=0)){var k,N;const j=(((k=r.flip)==null?void 0:k.index)||0)+1,I=E[j];if(I&&(!(d==="alignment"?b!==bs(I):!1)||A.every(R=>bs(R.placement)===b?R.overflows[0]>0:!0)))return{data:{index:j,overflows:A},reset:{placement:I}};let D=(N=A.filter(O=>O.overflows[0]<=0).sort((O,R)=>O.overflows[1]-R.overflows[1])[0])==null?void 0:N.placement;if(!D)switch(p){case"bestFit":{var P;const O=(P=A.filter(R=>{if(T){const B=bs(R.placement);return B===b||B==="y"}return!0}).map(R=>[R.placement,R.overflows.filter(B=>B>0).reduce((B,F)=>B+F,0)]).sort((R,B)=>R[1]-B[1])[0])==null?void 0:P[0];O&&(D=O);break}case"initialPlacement":D=o;break}if(i!==D)return{reset:{placement:D}}}return{}}}};function m_(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function g_(t){return IB.some(e=>t[e]>=0)}const QB=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n,platform:s}=e,{strategy:i="referenceHidden",...r}=li(t,e);switch(i){case"referenceHidden":{const a=await s.detectOverflow(e,{...r,elementContext:"reference"}),o=m_(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:g_(o)}}}case"escaped":{const a=await s.detectOverflow(e,{...r,altBoundary:!0}),o=m_(a,n.floating);return{data:{escapedOffsets:o,escaped:g_(o)}}}default:return{}}}}},ak=new Set(["left","top"]);async function ZB(t,e){const{placement:n,platform:s,elements:i}=t,r=await(s.isRTL==null?void 0:s.isRTL(i.floating)),a=ci(n),o=Fo(n),l=bs(n)==="y",c=ak.has(a)?-1:1,u=r&&l?-1:1,d=li(e,t);let{mainAxis:h,crossAxis:p,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&typeof m=="number"&&(p=o==="end"?m*-1:m),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}const JB=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,s;const{x:i,y:r,placement:a,middlewareData:o}=e,l=await ZB(e,t);return a===((n=o.offset)==null?void 0:n.placement)&&(s=o.arrow)!=null&&s.alignmentOffset?{}:{x:i+l.x,y:r+l.y,data:{...l,placement:a}}}}},eL=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:s,placement:i,platform:r}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:v=>{let{x:b,y:_}=v;return{x:b,y:_}}},...c}=li(t,e),u={x:n,y:s},d=await r.detectOverflow(e,c),h=bs(ci(i)),p=i0(h);let m=u[p],y=u[h];if(a){const v=p==="y"?"top":"left",b=p==="y"?"bottom":"right",_=m+d[v],w=m-d[b];m=Ag(_,m,w)}if(o){const v=h==="y"?"top":"left",b=h==="y"?"bottom":"right",_=y+d[v],w=y-d[b];y=Ag(_,y,w)}const x=l.fn({...e,[p]:m,[h]:y});return{...x,data:{x:x.x-n,y:x.y-s,enabled:{[p]:a,[h]:o}}}}}},tL=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:s,placement:i,rects:r,middlewareData:a}=e,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=li(t,e),u={x:n,y:s},d=bs(i),h=i0(d);let p=u[h],m=u[d];const y=li(o,e),x=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const _=h==="y"?"height":"width",w=r.reference[h]-r.floating[_]+x.mainAxis,S=r.reference[h]+r.reference[_]-x.mainAxis;p<w?p=w:p>S&&(p=S)}if(c){var v,b;const _=h==="y"?"width":"height",w=ak.has(ci(i)),S=r.reference[d]-r.floating[_]+(w&&((v=a.offset)==null?void 0:v[d])||0)+(w?0:x.crossAxis),T=r.reference[d]+r.reference[_]+(w?0:((b=a.offset)==null?void 0:b[d])||0)-(w?x.crossAxis:0);m<S?m=S:m>T&&(m=T)}return{[h]:p,[d]:m}}}},nL=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,s;const{placement:i,rects:r,platform:a,elements:o}=e,{apply:l=()=>{},...c}=li(t,e),u=await a.detectOverflow(e,c),d=ci(i),h=Fo(i),p=bs(i)==="y",{width:m,height:y}=r.floating;let x,v;d==="top"||d==="bottom"?(x=d,v=h===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(v=d,x=h==="end"?"top":"bottom");const b=y-u.top-u.bottom,_=m-u.left-u.right,w=ar(y-u[x],b),S=ar(m-u[v],_),T=!e.middlewareData.shift;let E=w,C=S;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(C=_),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(E=b),T&&!h){const A=yn(u.left,0),k=yn(u.right,0),N=yn(u.top,0),P=yn(u.bottom,0);p?C=m-2*(A!==0||k!==0?A+k:yn(u.left,u.right)):E=y-2*(N!==0||P!==0?N+P:yn(u.top,u.bottom))}await l({...e,availableWidth:C,availableHeight:E});const M=await a.getDimensions(o.floating);return m!==M.width||y!==M.height?{reset:{rects:!0}}:{}}}};function Qh(){return typeof window<"u"}function Ho(t){return ok(t)?(t.nodeName||"").toLowerCase():"#document"}function kn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function js(t){var e;return(e=(ok(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function ok(t){return Qh()?t instanceof Node||t instanceof kn(t).Node:!1}function is(t){return Qh()?t instanceof Element||t instanceof kn(t).Element:!1}function ks(t){return Qh()?t instanceof HTMLElement||t instanceof kn(t).HTMLElement:!1}function y_(t){return!Qh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof kn(t).ShadowRoot}const sL=new Set(["inline","contents"]);function kc(t){const{overflow:e,overflowX:n,overflowY:s,display:i}=rs(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+n)&&!sL.has(i)}const iL=new Set(["table","td","th"]);function rL(t){return iL.has(Ho(t))}const aL=[":popover-open",":modal"];function Zh(t){return aL.some(e=>{try{return t.matches(e)}catch{return!1}})}const oL=["transform","translate","scale","rotate","perspective"],lL=["transform","translate","scale","rotate","perspective","filter"],cL=["paint","layout","strict","content"];function o0(t){const e=l0(),n=is(t)?rs(t):t;return oL.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||lL.some(s=>(n.willChange||"").includes(s))||cL.some(s=>(n.contain||"").includes(s))}function uL(t){let e=or(t);for(;ks(e)&&!bo(e);){if(o0(e))return e;if(Zh(e))return null;e=or(e)}return null}function l0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const dL=new Set(["html","body","#document"]);function bo(t){return dL.has(Ho(t))}function rs(t){return kn(t).getComputedStyle(t)}function Jh(t){return is(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function or(t){if(Ho(t)==="html")return t;const e=t.assignedSlot||t.parentNode||y_(t)&&t.host||js(t);return y_(e)?e.host:e}function lk(t){const e=or(t);return bo(e)?t.ownerDocument?t.ownerDocument.body:t.body:ks(e)&&kc(e)?e:lk(e)}function ic(t,e,n){var s;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=lk(t),r=i===((s=t.ownerDocument)==null?void 0:s.body),a=kn(i);if(r){const o=Ng(a);return e.concat(a,a.visualViewport||[],kc(i)?i:[],o&&n?ic(o):[])}return e.concat(i,ic(i,[],n))}function Ng(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function ck(t){const e=rs(t);let n=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const i=ks(t),r=i?t.offsetWidth:n,a=i?t.offsetHeight:s,o=Wd(n)!==r||Wd(s)!==a;return o&&(n=r,s=a),{width:n,height:s,$:o}}function c0(t){return is(t)?t:t.contextElement}function no(t){const e=c0(t);if(!ks(e))return Ss(1);const n=e.getBoundingClientRect(),{width:s,height:i,$:r}=ck(e);let a=(r?Wd(n.width):n.width)/s,o=(r?Wd(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const hL=Ss(0);function uk(t){const e=kn(t);return!l0()||!e.visualViewport?hL:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function fL(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==kn(t)?!1:e}function Kr(t,e,n,s){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),r=c0(t);let a=Ss(1);e&&(s?is(s)&&(a=no(s)):a=no(t));const o=fL(r,n,s)?uk(r):Ss(0);let l=(i.left+o.x)/a.x,c=(i.top+o.y)/a.y,u=i.width/a.x,d=i.height/a.y;if(r){const h=kn(r),p=s&&is(s)?kn(s):s;let m=h,y=Ng(m);for(;y&&s&&p!==m;){const x=no(y),v=y.getBoundingClientRect(),b=rs(y),_=v.left+(y.clientLeft+parseFloat(b.paddingLeft))*x.x,w=v.top+(y.clientTop+parseFloat(b.paddingTop))*x.y;l*=x.x,c*=x.y,u*=x.x,d*=x.y,l+=_,c+=w,m=kn(y),y=Ng(m)}}return Yd({width:u,height:d,x:l,y:c})}function ef(t,e){const n=Jh(t).scrollLeft;return e?e.left+n:Kr(js(t)).left+n}function dk(t,e){const n=t.getBoundingClientRect(),s=n.left+e.scrollLeft-ef(t,n),i=n.top+e.scrollTop;return{x:s,y:i}}function pL(t){let{elements:e,rect:n,offsetParent:s,strategy:i}=t;const r=i==="fixed",a=js(s),o=e?Zh(e.floating):!1;if(s===a||o&&r)return n;let l={scrollLeft:0,scrollTop:0},c=Ss(1);const u=Ss(0),d=ks(s);if((d||!d&&!r)&&((Ho(s)!=="body"||kc(a))&&(l=Jh(s)),ks(s))){const p=Kr(s);c=no(s),u.x=p.x+s.clientLeft,u.y=p.y+s.clientTop}const h=a&&!d&&!r?dk(a,l):Ss(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}}function mL(t){return Array.from(t.getClientRects())}function gL(t){const e=js(t),n=Jh(t),s=t.ownerDocument.body,i=yn(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),r=yn(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let a=-n.scrollLeft+ef(t);const o=-n.scrollTop;return rs(s).direction==="rtl"&&(a+=yn(e.clientWidth,s.clientWidth)-i),{width:i,height:r,x:a,y:o}}const v_=25;function yL(t,e){const n=kn(t),s=js(t),i=n.visualViewport;let r=s.clientWidth,a=s.clientHeight,o=0,l=0;if(i){r=i.width,a=i.height;const u=l0();(!u||u&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}const c=ef(s);if(c<=0){const u=s.ownerDocument,d=u.body,h=getComputedStyle(d),p=u.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,m=Math.abs(s.clientWidth-d.clientWidth-p);m<=v_&&(r-=m)}else c<=v_&&(r+=c);return{width:r,height:a,x:o,y:l}}const vL=new Set(["absolute","fixed"]);function bL(t,e){const n=Kr(t,!0,e==="fixed"),s=n.top+t.clientTop,i=n.left+t.clientLeft,r=ks(t)?no(t):Ss(1),a=t.clientWidth*r.x,o=t.clientHeight*r.y,l=i*r.x,c=s*r.y;return{width:a,height:o,x:l,y:c}}function b_(t,e,n){let s;if(e==="viewport")s=yL(t,n);else if(e==="document")s=gL(js(t));else if(is(e))s=bL(e,n);else{const i=uk(t);s={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Yd(s)}function hk(t,e){const n=or(t);return n===e||!is(n)||bo(n)?!1:rs(n).position==="fixed"||hk(n,e)}function xL(t,e){const n=e.get(t);if(n)return n;let s=ic(t,[],!1).filter(o=>is(o)&&Ho(o)!=="body"),i=null;const r=rs(t).position==="fixed";let a=r?or(t):t;for(;is(a)&&!bo(a);){const o=rs(a),l=o0(a);!l&&o.position==="fixed"&&(i=null),(r?!l&&!i:!l&&o.position==="static"&&!!i&&vL.has(i.position)||kc(a)&&!l&&hk(t,a))?s=s.filter(u=>u!==a):i=o,a=or(a)}return e.set(t,s),s}function _L(t){let{element:e,boundary:n,rootBoundary:s,strategy:i}=t;const a=[...n==="clippingAncestors"?Zh(e)?[]:xL(e,this._c):[].concat(n),s],o=a[0],l=a.reduce((c,u)=>{const d=b_(e,u,i);return c.top=yn(d.top,c.top),c.right=ar(d.right,c.right),c.bottom=ar(d.bottom,c.bottom),c.left=yn(d.left,c.left),c},b_(e,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function wL(t){const{width:e,height:n}=ck(t);return{width:e,height:n}}function SL(t,e,n){const s=ks(e),i=js(e),r=n==="fixed",a=Kr(t,!0,r,e);let o={scrollLeft:0,scrollTop:0};const l=Ss(0);function c(){l.x=ef(i)}if(s||!s&&!r)if((Ho(e)!=="body"||kc(i))&&(o=Jh(e)),s){const p=Kr(e,!0,r,e);l.x=p.x+e.clientLeft,l.y=p.y+e.clientTop}else i&&c();r&&!s&&i&&c();const u=i&&!s&&!r?dk(i,o):Ss(0),d=a.left+o.scrollLeft-l.x-u.x,h=a.top+o.scrollTop-l.y-u.y;return{x:d,y:h,width:a.width,height:a.height}}function qp(t){return rs(t).position==="static"}function x_(t,e){if(!ks(t)||rs(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return js(t)===n&&(n=n.ownerDocument.body),n}function fk(t,e){const n=kn(t);if(Zh(t))return n;if(!ks(t)){let i=or(t);for(;i&&!bo(i);){if(is(i)&&!qp(i))return i;i=or(i)}return n}let s=x_(t,e);for(;s&&rL(s)&&qp(s);)s=x_(s,e);return s&&bo(s)&&qp(s)&&!o0(s)?n:s||uL(t)||n}const CL=async function(t){const e=this.getOffsetParent||fk,n=this.getDimensions,s=await n(t.floating);return{reference:SL(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function TL(t){return rs(t).direction==="rtl"}const EL={convertOffsetParentRelativeRectToViewportRelativeRect:pL,getDocumentElement:js,getClippingRect:_L,getOffsetParent:fk,getElementRects:CL,getClientRects:mL,getDimensions:wL,getScale:no,isElement:is,isRTL:TL};function pk(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function AL(t,e){let n=null,s;const i=js(t);function r(){var o;clearTimeout(s),(o=n)==null||o.disconnect(),n=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),r();const c=t.getBoundingClientRect(),{left:u,top:d,width:h,height:p}=c;if(o||e(),!h||!p)return;const m=Cu(d),y=Cu(i.clientWidth-(u+h)),x=Cu(i.clientHeight-(d+p)),v=Cu(u),_={rootMargin:-m+"px "+-y+"px "+-x+"px "+-v+"px",threshold:yn(0,ar(1,l))||1};let w=!0;function S(T){const E=T[0].intersectionRatio;if(E!==l){if(!w)return a();E?a(!1,E):s=setTimeout(()=>{a(!1,1e-7)},1e3)}E===1&&!pk(c,t.getBoundingClientRect())&&a(),w=!1}try{n=new IntersectionObserver(S,{..._,root:i.ownerDocument})}catch{n=new IntersectionObserver(S,_)}n.observe(t)}return a(!0),r}function kL(t,e,n,s){s===void 0&&(s={});const{ancestorScroll:i=!0,ancestorResize:r=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=s,c=c0(t),u=i||r?[...c?ic(c):[],...ic(e)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),r&&v.addEventListener("resize",n)});const d=c&&o?AL(c,n):null;let h=-1,p=null;a&&(p=new ResizeObserver(v=>{let[b]=v;b&&b.target===c&&p&&(p.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var _;(_=p)==null||_.observe(e)})),n()}),c&&!l&&p.observe(c),p.observe(e));let m,y=l?Kr(t):null;l&&x();function x(){const v=Kr(t);y&&!pk(y,v)&&n(),y=v,m=requestAnimationFrame(x)}return n(),()=>{var v;u.forEach(b=>{i&&b.removeEventListener("scroll",n),r&&b.removeEventListener("resize",n)}),d==null||d(),(v=p)==null||v.disconnect(),p=null,l&&cancelAnimationFrame(m)}}const NL=JB,ML=eL,RL=XB,DL=nL,OL=QB,__=KB,jL=tL,PL=(t,e,n)=>{const s=new Map,i={platform:EL,...n},r={...i.platform,_c:s};return YB(t,e,{...i,platform:r})};var IL=typeof document<"u",BL=function(){},rd=IL?g.useLayoutEffect:BL;function Kd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,s,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(!Kd(t[s],e[s]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(e,i[s]))return!1;for(s=n;s--!==0;){const r=i[s];if(!(r==="_owner"&&t.$$typeof)&&!Kd(t[r],e[r]))return!1}return!0}return t!==t&&e!==e}function mk(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function w_(t,e){const n=mk(t);return Math.round(e*n)/n}function Wp(t){const e=g.useRef(t);return rd(()=>{e.current=t}),e}function LL(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:s=[],platform:i,elements:{reference:r,floating:a}={},transform:o=!0,whileElementsMounted:l,open:c}=t,[u,d]=g.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,p]=g.useState(s);Kd(h,s)||p(s);const[m,y]=g.useState(null),[x,v]=g.useState(null),b=g.useCallback(R=>{R!==T.current&&(T.current=R,y(R))},[]),_=g.useCallback(R=>{R!==E.current&&(E.current=R,v(R))},[]),w=r||m,S=a||x,T=g.useRef(null),E=g.useRef(null),C=g.useRef(u),M=l!=null,A=Wp(l),k=Wp(i),N=Wp(c),P=g.useCallback(()=>{if(!T.current||!E.current)return;const R={placement:e,strategy:n,middleware:h};k.current&&(R.platform=k.current),PL(T.current,E.current,R).then(B=>{const F={...B,isPositioned:N.current!==!1};j.current&&!Kd(C.current,F)&&(C.current=F,No.flushSync(()=>{d(F)}))})},[h,e,n,k,N]);rd(()=>{c===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,d(R=>({...R,isPositioned:!1})))},[c]);const j=g.useRef(!1);rd(()=>(j.current=!0,()=>{j.current=!1}),[]),rd(()=>{if(w&&(T.current=w),S&&(E.current=S),w&&S){if(A.current)return A.current(w,S,P);P()}},[w,S,P,A,M]);const I=g.useMemo(()=>({reference:T,floating:E,setReference:b,setFloating:_}),[b,_]),D=g.useMemo(()=>({reference:w,floating:S}),[w,S]),O=g.useMemo(()=>{const R={position:n,left:0,top:0};if(!D.floating)return R;const B=w_(D.floating,u.x),F=w_(D.floating,u.y);return o?{...R,transform:"translate("+B+"px, "+F+"px)",...mk(D.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:F}},[n,o,D.floating,u.x,u.y]);return g.useMemo(()=>({...u,update:P,refs:I,elements:D,floatingStyles:O}),[u,P,I,D,O])}const VL=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:s,padding:i}=typeof t=="function"?t(n):t;return s&&e(s)?s.current!=null?__({element:s.current,padding:i}).fn(n):{}:s?__({element:s,padding:i}).fn(n):{}}}},zL=(t,e)=>({...NL(t),options:[t,e]}),FL=(t,e)=>({...ML(t),options:[t,e]}),HL=(t,e)=>({...jL(t),options:[t,e]}),UL=(t,e)=>({...RL(t),options:[t,e]}),GL=(t,e)=>({...DL(t),options:[t,e]}),qL=(t,e)=>({...OL(t),options:[t,e]}),WL=(t,e)=>({...VL(t),options:[t,e]});var $L="Arrow",gk=g.forwardRef((t,e)=>{const{children:n,width:s=10,height:i=5,...r}=t;return f.jsx(he.svg,{...r,ref:e,width:s,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:f.jsx("polygon",{points:"0,0 30,0 15,10"})})});gk.displayName=$L;var YL=gk,u0="Popper",[yk,tf]=pi(u0),[KL,vk]=yk(u0),bk=t=>{const{__scopePopper:e,children:n}=t,[s,i]=g.useState(null);return f.jsx(KL,{scope:e,anchor:s,onAnchorChange:i,children:n})};bk.displayName=u0;var xk="PopperAnchor",_k=g.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:s,...i}=t,r=vk(xk,n),a=g.useRef(null),o=De(e,a),l=g.useRef(null);return g.useEffect(()=>{const c=l.current;l.current=(s==null?void 0:s.current)||a.current,c!==l.current&&r.onAnchorChange(l.current)}),s?null:f.jsx(he.div,{...i,ref:o})});_k.displayName=xk;var d0="PopperContent",[XL,QL]=yk(d0),wk=g.forwardRef((t,e)=>{var L,z,te,fe,ge,be;const{__scopePopper:n,side:s="bottom",sideOffset:i=0,align:r="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:m,...y}=t,x=vk(d0,n),[v,b]=g.useState(null),_=De(e,Rt=>b(Rt)),[w,S]=g.useState(null),T=s0(w),E=(T==null?void 0:T.width)??0,C=(T==null?void 0:T.height)??0,M=s+(r!=="center"?"-"+r:""),A=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},k=Array.isArray(c)?c:[c],N=k.length>0,P={padding:A,boundary:k.filter(JL),altBoundary:N},{refs:j,floatingStyles:I,placement:D,isPositioned:O,middlewareData:R}=LL({strategy:"fixed",placement:M,whileElementsMounted:(...Rt)=>kL(...Rt,{animationFrame:p==="always"}),elements:{reference:x.anchor},middleware:[zL({mainAxis:i+C,alignmentAxis:a}),l&&FL({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?HL():void 0,...P}),l&&UL({...P}),GL({...P,apply:({elements:Rt,rects:en,availableWidth:J,availableHeight:ae})=>{const{width:Ge,height:K}=en.reference,Q=Rt.floating.style;Q.setProperty("--radix-popper-available-width",`${J}px`),Q.setProperty("--radix-popper-available-height",`${ae}px`),Q.setProperty("--radix-popper-anchor-width",`${Ge}px`),Q.setProperty("--radix-popper-anchor-height",`${K}px`)}}),w&&WL({element:w,padding:o}),eV({arrowWidth:E,arrowHeight:C}),h&&qL({strategy:"referenceHidden",...P})]}),[B,F]=Tk(D),Z=rr(m);Ht(()=>{O&&(Z==null||Z())},[O,Z]);const V=(L=R.arrow)==null?void 0:L.x,q=(z=R.arrow)==null?void 0:z.y,$=((te=R.arrow)==null?void 0:te.centerOffset)!==0,[H,Y]=g.useState();return Ht(()=>{v&&Y(window.getComputedStyle(v).zIndex)},[v]),f.jsx("div",{ref:j.setFloating,"data-radix-popper-content-wrapper":"",style:{...I,transform:O?I.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:H,"--radix-popper-transform-origin":[(fe=R.transformOrigin)==null?void 0:fe.x,(ge=R.transformOrigin)==null?void 0:ge.y].join(" "),...((be=R.hide)==null?void 0:be.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:f.jsx(XL,{scope:n,placedSide:B,onArrowChange:S,arrowX:V,arrowY:q,shouldHideArrow:$,children:f.jsx(he.div,{"data-side":B,"data-align":F,...y,ref:_,style:{...y.style,animation:O?void 0:"none"}})})})});wk.displayName=d0;var Sk="PopperArrow",ZL={top:"bottom",right:"left",bottom:"top",left:"right"},Ck=g.forwardRef(function(e,n){const{__scopePopper:s,...i}=e,r=QL(Sk,s),a=ZL[r.placedSide];return f.jsx("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:f.jsx(YL,{...i,ref:n,style:{...i.style,display:"block"}})})});Ck.displayName=Sk;function JL(t){return t!==null}var eV=t=>({name:"transformOrigin",options:t,fn(e){var x,v,b;const{placement:n,rects:s,middlewareData:i}=e,a=((x=i.arrow)==null?void 0:x.centerOffset)!==0,o=a?0:t.arrowWidth,l=a?0:t.arrowHeight,[c,u]=Tk(n),d={start:"0%",center:"50%",end:"100%"}[u],h=(((v=i.arrow)==null?void 0:v.x)??0)+o/2,p=(((b=i.arrow)==null?void 0:b.y)??0)+l/2;let m="",y="";return c==="bottom"?(m=a?d:`${h}px`,y=`${-l}px`):c==="top"?(m=a?d:`${h}px`,y=`${s.floating.height+l}px`):c==="right"?(m=`${-l}px`,y=a?d:`${p}px`):c==="left"&&(m=`${s.floating.width+l}px`,y=a?d:`${p}px`),{data:{x:m,y}}}});function Tk(t){const[e,n="center"]=t.split("-");return[e,n]}var Ek=bk,Ak=_k,kk=wk,Nk=Ck,$p="rovingFocusGroup.onEntryFocus",tV={bubbles:!1,cancelable:!0},Nc="RovingFocusGroup",[Mg,Mk,nV]=Wv(Nc),[sV,Rk]=pi(Nc,[nV]),[iV,rV]=sV(Nc),Dk=g.forwardRef((t,e)=>f.jsx(Mg.Provider,{scope:t.__scopeRovingFocusGroup,children:f.jsx(Mg.Slot,{scope:t.__scopeRovingFocusGroup,children:f.jsx(aV,{...t,ref:e})})}));Dk.displayName=Nc;var aV=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:i=!1,dir:r,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,h=g.useRef(null),p=De(e,h),m=Wh(r),[y,x]=As({prop:a,defaultProp:o??null,onChange:l,caller:Nc}),[v,b]=g.useState(!1),_=rr(c),w=Mk(n),S=g.useRef(!1),[T,E]=g.useState(0);return g.useEffect(()=>{const C=h.current;if(C)return C.addEventListener($p,_),()=>C.removeEventListener($p,_)},[_]),f.jsx(iV,{scope:n,orientation:s,dir:m,loop:i,currentTabStopId:y,onItemFocus:g.useCallback(C=>x(C),[x]),onItemShiftTab:g.useCallback(()=>b(!0),[]),onFocusableItemAdd:g.useCallback(()=>E(C=>C+1),[]),onFocusableItemRemove:g.useCallback(()=>E(C=>C-1),[]),children:f.jsx(he.div,{tabIndex:v||T===0?-1:0,"data-orientation":s,...d,ref:p,style:{outline:"none",...t.style},onMouseDown:ye(t.onMouseDown,()=>{S.current=!0}),onFocus:ye(t.onFocus,C=>{const M=!S.current;if(C.target===C.currentTarget&&M&&!v){const A=new CustomEvent($p,tV);if(C.currentTarget.dispatchEvent(A),!A.defaultPrevented){const k=w().filter(D=>D.focusable),N=k.find(D=>D.active),P=k.find(D=>D.id===y),I=[N,P,...k].filter(Boolean).map(D=>D.ref.current);Pk(I,u)}}S.current=!1}),onBlur:ye(t.onBlur,()=>b(!1))})})}),Ok="RovingFocusGroupItem",jk=g.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:i=!1,tabStopId:r,children:a,...o}=t,l=un(),c=r||l,u=rV(Ok,n),d=u.currentTabStopId===c,h=Mk(n),{onFocusableItemAdd:p,onFocusableItemRemove:m,currentTabStopId:y}=u;return g.useEffect(()=>{if(s)return p(),()=>m()},[s,p,m]),f.jsx(Mg.ItemSlot,{scope:n,id:c,focusable:s,active:i,children:f.jsx(he.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:ye(t.onMouseDown,x=>{s?u.onItemFocus(c):x.preventDefault()}),onFocus:ye(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:ye(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){u.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const v=cV(x,u.orientation,u.dir);if(v!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let _=h().filter(w=>w.focusable).map(w=>w.ref.current);if(v==="last")_.reverse();else if(v==="prev"||v==="next"){v==="prev"&&_.reverse();const w=_.indexOf(x.currentTarget);_=u.loop?uV(_,w+1):_.slice(w+1)}setTimeout(()=>Pk(_))}}),children:typeof a=="function"?a({isCurrentTabStop:d,hasTabStop:y!=null}):a})})});jk.displayName=Ok;var oV={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function lV(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function cV(t,e,n){const s=lV(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return oV[s]}function Pk(t,e=!1){const n=document.activeElement;for(const s of t)if(s===n||(s.focus({preventScroll:e}),document.activeElement!==n))return}function uV(t,e){return t.map((n,s)=>t[(e+s)%t.length])}var dV=Dk,hV=jk,fV="Label",Ik=g.forwardRef((t,e)=>f.jsx(he.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));Ik.displayName=fV;var pV=Ik;function Xd(t,[e,n]){return Math.min(n,Math.max(e,t))}var mV=[" ","Enter","ArrowUp","ArrowDown"],gV=[" ","Enter"],Xr="Select",[nf,sf,yV]=Wv(Xr),[Uo]=pi(Xr,[yV,tf]),rf=tf(),[vV,mr]=Uo(Xr),[bV,xV]=Uo(Xr),Bk=t=>{const{__scopeSelect:e,children:n,open:s,defaultOpen:i,onOpenChange:r,value:a,defaultValue:o,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:h,required:p,form:m}=t,y=rf(e),[x,v]=g.useState(null),[b,_]=g.useState(null),[w,S]=g.useState(!1),T=Wh(c),[E,C]=As({prop:s,defaultProp:i??!1,onChange:r,caller:Xr}),[M,A]=As({prop:a,defaultProp:o,onChange:l,caller:Xr}),k=g.useRef(null),N=x?m||!!x.closest("form"):!0,[P,j]=g.useState(new Set),I=Array.from(P).map(D=>D.props.value).join(";");return f.jsx(Ek,{...y,children:f.jsxs(vV,{required:p,scope:e,trigger:x,onTriggerChange:v,valueNode:b,onValueNodeChange:_,valueNodeHasChildren:w,onValueNodeHasChildrenChange:S,contentId:un(),value:M,onValueChange:A,open:E,onOpenChange:C,dir:T,triggerPointerDownPosRef:k,disabled:h,children:[f.jsx(nf.Provider,{scope:e,children:f.jsx(bV,{scope:t.__scopeSelect,onNativeOptionAdd:g.useCallback(D=>{j(O=>new Set(O).add(D))},[]),onNativeOptionRemove:g.useCallback(D=>{j(O=>{const R=new Set(O);return R.delete(D),R})},[]),children:n})}),N?f.jsxs(rN,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:d,value:M,onChange:D=>A(D.target.value),disabled:h,form:m,children:[M===void 0?f.jsx("option",{value:""}):null,Array.from(P)]},I):null]})})};Bk.displayName=Xr;var Lk="SelectTrigger",Vk=g.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:s=!1,...i}=t,r=rf(n),a=mr(Lk,n),o=a.disabled||s,l=De(e,a.onTriggerChange),c=sf(n),u=g.useRef("touch"),[d,h,p]=oN(y=>{const x=c().filter(_=>!_.disabled),v=x.find(_=>_.value===a.value),b=lN(x,y,v);b!==void 0&&a.onValueChange(b.value)}),m=y=>{o||(a.onOpenChange(!0),p()),y&&(a.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return f.jsx(Ak,{asChild:!0,...r,children:f.jsx(he.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":aN(a.value)?"":void 0,...i,ref:l,onClick:ye(i.onClick,y=>{y.currentTarget.focus(),u.current!=="mouse"&&m(y)}),onPointerDown:ye(i.onPointerDown,y=>{u.current=y.pointerType;const x=y.target;x.hasPointerCapture(y.pointerId)&&x.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(m(y),y.preventDefault())}),onKeyDown:ye(i.onKeyDown,y=>{const x=d.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&h(y.key),!(x&&y.key===" ")&&mV.includes(y.key)&&(m(),y.preventDefault())})})})});Vk.displayName=Lk;var zk="SelectValue",Fk=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:s,style:i,children:r,placeholder:a="",...o}=t,l=mr(zk,n),{onValueNodeHasChildrenChange:c}=l,u=r!==void 0,d=De(e,l.onValueNodeChange);return Ht(()=>{c(u)},[c,u]),f.jsx(he.span,{...o,ref:d,style:{pointerEvents:"none"},children:aN(l.value)?f.jsx(f.Fragment,{children:a}):r})});Fk.displayName=zk;var _V="SelectIcon",Hk=g.forwardRef((t,e)=>{const{__scopeSelect:n,children:s,...i}=t;return f.jsx(he.span,{"aria-hidden":!0,...i,ref:e,children:s||""})});Hk.displayName=_V;var wV="SelectPortal",Uk=t=>f.jsx(Yh,{asChild:!0,...t});Uk.displayName=wV;var Qr="SelectContent",Gk=g.forwardRef((t,e)=>{const n=mr(Qr,t.__scopeSelect),[s,i]=g.useState();if(Ht(()=>{i(new DocumentFragment)},[]),!n.open){const r=s;return r?No.createPortal(f.jsx(qk,{scope:t.__scopeSelect,children:f.jsx(nf.Slot,{scope:t.__scopeSelect,children:f.jsx("div",{children:t.children})})}),r):null}return f.jsx(Wk,{...t,ref:e})});Gk.displayName=Qr;var Qn=10,[qk,gr]=Uo(Qr),SV="SelectContentImpl",CV=vo("SelectContent.RemoveScroll"),Wk=g.forwardRef((t,e)=>{const{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:r,onPointerDownOutside:a,side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:p,sticky:m,hideWhenDetached:y,avoidCollisions:x,...v}=t,b=mr(Qr,n),[_,w]=g.useState(null),[S,T]=g.useState(null),E=De(e,L=>w(L)),[C,M]=g.useState(null),[A,k]=g.useState(null),N=sf(n),[P,j]=g.useState(!1),I=g.useRef(!1);g.useEffect(()=>{if(_)return FA(_)},[_]),OA();const D=g.useCallback(L=>{const[z,...te]=N().map(be=>be.ref.current),[fe]=te.slice(-1),ge=document.activeElement;for(const be of L)if(be===ge||(be==null||be.scrollIntoView({block:"nearest"}),be===z&&S&&(S.scrollTop=0),be===fe&&S&&(S.scrollTop=S.scrollHeight),be==null||be.focus(),document.activeElement!==ge))return},[N,S]),O=g.useCallback(()=>D([C,_]),[D,C,_]);g.useEffect(()=>{P&&O()},[P,O]);const{onOpenChange:R,triggerPointerDownPosRef:B}=b;g.useEffect(()=>{if(_){let L={x:0,y:0};const z=fe=>{var ge,be;L={x:Math.abs(Math.round(fe.pageX)-(((ge=B.current)==null?void 0:ge.x)??0)),y:Math.abs(Math.round(fe.pageY)-(((be=B.current)==null?void 0:be.y)??0))}},te=fe=>{L.x<=10&&L.y<=10?fe.preventDefault():_.contains(fe.target)||R(!1),document.removeEventListener("pointermove",z),B.current=null};return B.current!==null&&(document.addEventListener("pointermove",z),document.addEventListener("pointerup",te,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",z),document.removeEventListener("pointerup",te,{capture:!0})}}},[_,R,B]),g.useEffect(()=>{const L=()=>R(!1);return window.addEventListener("blur",L),window.addEventListener("resize",L),()=>{window.removeEventListener("blur",L),window.removeEventListener("resize",L)}},[R]);const[F,Z]=oN(L=>{const z=N().filter(ge=>!ge.disabled),te=z.find(ge=>ge.ref.current===document.activeElement),fe=lN(z,L,te);fe&&setTimeout(()=>fe.ref.current.focus())}),V=g.useCallback((L,z,te)=>{const fe=!I.current&&!te;(b.value!==void 0&&b.value===z||fe)&&(M(L),fe&&(I.current=!0))},[b.value]),q=g.useCallback(()=>_==null?void 0:_.focus(),[_]),$=g.useCallback((L,z,te)=>{const fe=!I.current&&!te;(b.value!==void 0&&b.value===z||fe)&&k(L)},[b.value]),H=s==="popper"?Rg:$k,Y=H===Rg?{side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:p,sticky:m,hideWhenDetached:y,avoidCollisions:x}:{};return f.jsx(qk,{scope:n,content:_,viewport:S,onViewportChange:T,itemRefCallback:V,selectedItem:C,onItemLeave:q,itemTextRefCallback:$,focusSelectedItem:O,selectedItemText:A,position:s,isPositioned:P,searchRef:F,children:f.jsx(Yv,{as:CV,allowPinchZoom:!0,children:f.jsx($v,{asChild:!0,trapped:b.open,onMountAutoFocus:L=>{L.preventDefault()},onUnmountAutoFocus:ye(i,L=>{var z;(z=b.trigger)==null||z.focus({preventScroll:!0}),L.preventDefault()}),children:f.jsx($h,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:L=>L.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:f.jsx(H,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:L=>L.preventDefault(),...v,...Y,onPlaced:()=>j(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:ye(v.onKeyDown,L=>{const z=L.ctrlKey||L.altKey||L.metaKey;if(L.key==="Tab"&&L.preventDefault(),!z&&L.key.length===1&&Z(L.key),["ArrowUp","ArrowDown","Home","End"].includes(L.key)){let fe=N().filter(ge=>!ge.disabled).map(ge=>ge.ref.current);if(["ArrowUp","End"].includes(L.key)&&(fe=fe.slice().reverse()),["ArrowUp","ArrowDown"].includes(L.key)){const ge=L.target,be=fe.indexOf(ge);fe=fe.slice(be+1)}setTimeout(()=>D(fe)),L.preventDefault()}})})})})})})});Wk.displayName=SV;var TV="SelectItemAlignedPosition",$k=g.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:s,...i}=t,r=mr(Qr,n),a=gr(Qr,n),[o,l]=g.useState(null),[c,u]=g.useState(null),d=De(e,E=>u(E)),h=sf(n),p=g.useRef(!1),m=g.useRef(!0),{viewport:y,selectedItem:x,selectedItemText:v,focusSelectedItem:b}=a,_=g.useCallback(()=>{if(r.trigger&&r.valueNode&&o&&c&&y&&x&&v){const E=r.trigger.getBoundingClientRect(),C=c.getBoundingClientRect(),M=r.valueNode.getBoundingClientRect(),A=v.getBoundingClientRect();if(r.dir!=="rtl"){const ge=A.left-C.left,be=M.left-ge,Rt=E.left-be,en=E.width+Rt,J=Math.max(en,C.width),ae=window.innerWidth-Qn,Ge=Xd(be,[Qn,Math.max(Qn,ae-J)]);o.style.minWidth=en+"px",o.style.left=Ge+"px"}else{const ge=C.right-A.right,be=window.innerWidth-M.right-ge,Rt=window.innerWidth-E.right-be,en=E.width+Rt,J=Math.max(en,C.width),ae=window.innerWidth-Qn,Ge=Xd(be,[Qn,Math.max(Qn,ae-J)]);o.style.minWidth=en+"px",o.style.right=Ge+"px"}const k=h(),N=window.innerHeight-Qn*2,P=y.scrollHeight,j=window.getComputedStyle(c),I=parseInt(j.borderTopWidth,10),D=parseInt(j.paddingTop,10),O=parseInt(j.borderBottomWidth,10),R=parseInt(j.paddingBottom,10),B=I+D+P+R+O,F=Math.min(x.offsetHeight*5,B),Z=window.getComputedStyle(y),V=parseInt(Z.paddingTop,10),q=parseInt(Z.paddingBottom,10),$=E.top+E.height/2-Qn,H=N-$,Y=x.offsetHeight/2,L=x.offsetTop+Y,z=I+D+L,te=B-z;if(z<=$){const ge=k.length>0&&x===k[k.length-1].ref.current;o.style.bottom="0px";const be=c.clientHeight-y.offsetTop-y.offsetHeight,Rt=Math.max(H,Y+(ge?q:0)+be+O),en=z+Rt;o.style.height=en+"px"}else{const ge=k.length>0&&x===k[0].ref.current;o.style.top="0px";const Rt=Math.max($,I+y.offsetTop+(ge?V:0)+Y)+te;o.style.height=Rt+"px",y.scrollTop=z-$+y.offsetTop}o.style.margin=`${Qn}px 0`,o.style.minHeight=F+"px",o.style.maxHeight=N+"px",s==null||s(),requestAnimationFrame(()=>p.current=!0)}},[h,r.trigger,r.valueNode,o,c,y,x,v,r.dir,s]);Ht(()=>_(),[_]);const[w,S]=g.useState();Ht(()=>{c&&S(window.getComputedStyle(c).zIndex)},[c]);const T=g.useCallback(E=>{E&&m.current===!0&&(_(),b==null||b(),m.current=!1)},[_,b]);return f.jsx(AV,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:p,onScrollButtonChange:T,children:f.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:w},children:f.jsx(he.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});$k.displayName=TV;var EV="SelectPopperPosition",Rg=g.forwardRef((t,e)=>{const{__scopeSelect:n,align:s="start",collisionPadding:i=Qn,...r}=t,a=rf(n);return f.jsx(kk,{...a,...r,ref:e,align:s,collisionPadding:i,style:{boxSizing:"border-box",...r.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Rg.displayName=EV;var[AV,h0]=Uo(Qr,{}),Dg="SelectViewport",Yk=g.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:s,...i}=t,r=gr(Dg,n),a=h0(Dg,n),o=De(e,r.onViewportChange),l=g.useRef(0);return f.jsxs(f.Fragment,{children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),f.jsx(nf.Slot,{scope:n,children:f.jsx(he.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:ye(i.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=a;if(h!=null&&h.current&&d){const p=Math.abs(l.current-u.scrollTop);if(p>0){const m=window.innerHeight-Qn*2,y=parseFloat(d.style.minHeight),x=parseFloat(d.style.height),v=Math.max(y,x);if(v<m){const b=v+p,_=Math.min(m,b),w=b-_;d.style.height=_+"px",d.style.bottom==="0px"&&(u.scrollTop=w>0?w:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});Yk.displayName=Dg;var Kk="SelectGroup",[kV,NV]=Uo(Kk),MV=g.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t,i=un();return f.jsx(kV,{scope:n,id:i,children:f.jsx(he.div,{role:"group","aria-labelledby":i,...s,ref:e})})});MV.displayName=Kk;var Xk="SelectLabel",RV=g.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t,i=NV(Xk,n);return f.jsx(he.div,{id:i.id,...s,ref:e})});RV.displayName=Xk;var Qd="SelectItem",[DV,Qk]=Uo(Qd),Zk=g.forwardRef((t,e)=>{const{__scopeSelect:n,value:s,disabled:i=!1,textValue:r,...a}=t,o=mr(Qd,n),l=gr(Qd,n),c=o.value===s,[u,d]=g.useState(r??""),[h,p]=g.useState(!1),m=De(e,b=>{var _;return(_=l.itemRefCallback)==null?void 0:_.call(l,b,s,i)}),y=un(),x=g.useRef("touch"),v=()=>{i||(o.onValueChange(s),o.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return f.jsx(DV,{scope:n,value:s,disabled:i,textId:y,isSelected:c,onItemTextChange:g.useCallback(b=>{d(_=>_||((b==null?void 0:b.textContent)??"").trim())},[]),children:f.jsx(nf.ItemSlot,{scope:n,value:s,disabled:i,textValue:u,children:f.jsx(he.div,{role:"option","aria-labelledby":y,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:m,onFocus:ye(a.onFocus,()=>p(!0)),onBlur:ye(a.onBlur,()=>p(!1)),onClick:ye(a.onClick,()=>{x.current!=="mouse"&&v()}),onPointerUp:ye(a.onPointerUp,()=>{x.current==="mouse"&&v()}),onPointerDown:ye(a.onPointerDown,b=>{x.current=b.pointerType}),onPointerMove:ye(a.onPointerMove,b=>{var _;x.current=b.pointerType,i?(_=l.onItemLeave)==null||_.call(l):x.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ye(a.onPointerLeave,b=>{var _;b.currentTarget===document.activeElement&&((_=l.onItemLeave)==null||_.call(l))}),onKeyDown:ye(a.onKeyDown,b=>{var w;((w=l.searchRef)==null?void 0:w.current)!==""&&b.key===" "||(gV.includes(b.key)&&v(),b.key===" "&&b.preventDefault())})})})})});Zk.displayName=Qd;var vl="SelectItemText",Jk=g.forwardRef((t,e)=>{const{__scopeSelect:n,className:s,style:i,...r}=t,a=mr(vl,n),o=gr(vl,n),l=Qk(vl,n),c=xV(vl,n),[u,d]=g.useState(null),h=De(e,v=>d(v),l.onItemTextChange,v=>{var b;return(b=o.itemTextRefCallback)==null?void 0:b.call(o,v,l.value,l.disabled)}),p=u==null?void 0:u.textContent,m=g.useMemo(()=>f.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:y,onNativeOptionRemove:x}=c;return Ht(()=>(y(m),()=>x(m)),[y,x,m]),f.jsxs(f.Fragment,{children:[f.jsx(he.span,{id:l.textId,...r,ref:h}),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?No.createPortal(r.children,a.valueNode):null]})});Jk.displayName=vl;var eN="SelectItemIndicator",tN=g.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t;return Qk(eN,n).isSelected?f.jsx(he.span,{"aria-hidden":!0,...s,ref:e}):null});tN.displayName=eN;var Og="SelectScrollUpButton",nN=g.forwardRef((t,e)=>{const n=gr(Og,t.__scopeSelect),s=h0(Og,t.__scopeSelect),[i,r]=g.useState(!1),a=De(e,s.onScrollButtonChange);return Ht(()=>{if(n.viewport&&n.isPositioned){let o=function(){const c=l.scrollTop>0;r(c)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?f.jsx(iN,{...t,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});nN.displayName=Og;var jg="SelectScrollDownButton",sN=g.forwardRef((t,e)=>{const n=gr(jg,t.__scopeSelect),s=h0(jg,t.__scopeSelect),[i,r]=g.useState(!1),a=De(e,s.onScrollButtonChange);return Ht(()=>{if(n.viewport&&n.isPositioned){let o=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;r(u)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?f.jsx(iN,{...t,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});sN.displayName=jg;var iN=g.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:s,...i}=t,r=gr("SelectScrollButton",n),a=g.useRef(null),o=sf(n),l=g.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return g.useEffect(()=>()=>l(),[l]),Ht(()=>{var u;const c=o().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[o]),f.jsx(he.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:ye(i.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(s,50))}),onPointerMove:ye(i.onPointerMove,()=>{var c;(c=r.onItemLeave)==null||c.call(r),a.current===null&&(a.current=window.setInterval(s,50))}),onPointerLeave:ye(i.onPointerLeave,()=>{l()})})}),OV="SelectSeparator",jV=g.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t;return f.jsx(he.div,{"aria-hidden":!0,...s,ref:e})});jV.displayName=OV;var Pg="SelectArrow",PV=g.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t,i=rf(n),r=mr(Pg,n),a=gr(Pg,n);return r.open&&a.position==="popper"?f.jsx(Nk,{...i,...s,ref:e}):null});PV.displayName=Pg;var IV="SelectBubbleInput",rN=g.forwardRef(({__scopeSelect:t,value:e,...n},s)=>{const i=g.useRef(null),r=De(s,i),a=n0(e);return g.useEffect(()=>{const o=i.current;if(!o)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==e&&u){const d=new Event("change",{bubbles:!0});u.call(o,e),o.dispatchEvent(d)}},[a,e]),f.jsx(he.select,{...n,style:{...kA,...n.style},ref:r,defaultValue:e})});rN.displayName=IV;function aN(t){return t===""||t===void 0}function oN(t){const e=rr(t),n=g.useRef(""),s=g.useRef(0),i=g.useCallback(a=>{const o=n.current+a;e(o),function l(c){n.current=c,window.clearTimeout(s.current),c!==""&&(s.current=window.setTimeout(()=>l(""),1e3))}(o)},[e]),r=g.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return g.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,i,r]}function lN(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,r=n?t.indexOf(n):-1;let a=BV(t,Math.max(r,0));i.length===1&&(a=a.filter(c=>c!==n));const l=a.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function BV(t,e){return t.map((n,s)=>t[(e+s)%t.length])}var LV=Bk,VV=Vk,zV=Fk,FV=Hk,HV=Uk,UV=Gk,GV=Yk,qV=Zk,WV=Jk,$V=tN,YV=nN,KV=sN,XV="Separator",S_="horizontal",QV=["horizontal","vertical"],cN=g.forwardRef((t,e)=>{const{decorative:n,orientation:s=S_,...i}=t,r=ZV(s)?s:S_,o=n?{role:"none"}:{"aria-orientation":r==="vertical"?r:void 0,role:"separator"};return f.jsx(he.div,{"data-orientation":r,...o,...i,ref:e})});cN.displayName=XV;function ZV(t){return QV.includes(t)}var JV=cN,uN=["PageUp","PageDown"],dN=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],hN={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Go="Slider",[Ig,ez,tz]=Wv(Go),[fN]=pi(Go,[tz]),[nz,af]=fN(Go),pN=g.forwardRef((t,e)=>{const{name:n,min:s=0,max:i=100,step:r=1,orientation:a="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[s],value:u,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:p=!1,form:m,...y}=t,x=g.useRef(new Set),v=g.useRef(0),_=a==="horizontal"?sz:iz,[w=[],S]=As({prop:u,defaultProp:c,onChange:k=>{var P;(P=[...x.current][v.current])==null||P.focus(),d(k)}}),T=g.useRef(w);function E(k){const N=cz(w,k);A(k,N)}function C(k){A(k,v.current)}function M(){const k=T.current[v.current];w[v.current]!==k&&h(w)}function A(k,N,{commit:P}={commit:!1}){const j=fz(r),I=pz(Math.round((k-s)/r)*r+s,j),D=Xd(I,[s,i]);S((O=[])=>{const R=oz(O,D,N);if(hz(R,l*r)){v.current=R.indexOf(D);const B=String(R)!==String(O);return B&&P&&h(R),B?R:O}else return O})}return f.jsx(nz,{scope:t.__scopeSlider,name:n,disabled:o,min:s,max:i,valueIndexToChangeRef:v,thumbs:x.current,values:w,orientation:a,form:m,children:f.jsx(Ig.Provider,{scope:t.__scopeSlider,children:f.jsx(Ig.Slot,{scope:t.__scopeSlider,children:f.jsx(_,{"aria-disabled":o,"data-disabled":o?"":void 0,...y,ref:e,onPointerDown:ye(y.onPointerDown,()=>{o||(T.current=w)}),min:s,max:i,inverted:p,onSlideStart:o?void 0:E,onSlideMove:o?void 0:C,onSlideEnd:o?void 0:M,onHomeKeyDown:()=>!o&&A(s,0,{commit:!0}),onEndKeyDown:()=>!o&&A(i,w.length-1,{commit:!0}),onStepKeyDown:({event:k,direction:N})=>{if(!o){const I=uN.includes(k.key)||k.shiftKey&&dN.includes(k.key)?10:1,D=v.current,O=w[D],R=r*I*N;A(O+R,D,{commit:!0})}}})})})})});pN.displayName=Go;var[mN,gN]=fN(Go,{startEdge:"left",endEdge:"right",size:"width",direction:1}),sz=g.forwardRef((t,e)=>{const{min:n,max:s,dir:i,inverted:r,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,h]=g.useState(null),p=De(e,_=>h(_)),m=g.useRef(void 0),y=Wh(i),x=y==="ltr",v=x&&!r||!x&&r;function b(_){const w=m.current||d.getBoundingClientRect(),S=[0,w.width],E=f0(S,v?[n,s]:[s,n]);return m.current=w,E(_-w.left)}return f.jsx(mN,{scope:t.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:f.jsx(yN,{dir:y,"data-orientation":"horizontal",...u,ref:p,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:_=>{const w=b(_.clientX);a==null||a(w)},onSlideMove:_=>{const w=b(_.clientX);o==null||o(w)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:_=>{const S=hN[v?"from-left":"from-right"].includes(_.key);c==null||c({event:_,direction:S?-1:1})}})})}),iz=g.forwardRef((t,e)=>{const{min:n,max:s,inverted:i,onSlideStart:r,onSlideMove:a,onSlideEnd:o,onStepKeyDown:l,...c}=t,u=g.useRef(null),d=De(e,u),h=g.useRef(void 0),p=!i;function m(y){const x=h.current||u.current.getBoundingClientRect(),v=[0,x.height],_=f0(v,p?[s,n]:[n,s]);return h.current=x,_(y-x.top)}return f.jsx(mN,{scope:t.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:f.jsx(yN,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:y=>{const x=m(y.clientY);r==null||r(x)},onSlideMove:y=>{const x=m(y.clientY);a==null||a(x)},onSlideEnd:()=>{h.current=void 0,o==null||o()},onStepKeyDown:y=>{const v=hN[p?"from-bottom":"from-top"].includes(y.key);l==null||l({event:y,direction:v?-1:1})}})})}),yN=g.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:s,onSlideMove:i,onSlideEnd:r,onHomeKeyDown:a,onEndKeyDown:o,onStepKeyDown:l,...c}=t,u=af(Go,n);return f.jsx(he.span,{...c,ref:e,onKeyDown:ye(t.onKeyDown,d=>{d.key==="Home"?(a(d),d.preventDefault()):d.key==="End"?(o(d),d.preventDefault()):uN.concat(dN).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:ye(t.onPointerDown,d=>{const h=d.target;h.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(h)?h.focus():s(d)}),onPointerMove:ye(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&i(d)}),onPointerUp:ye(t.onPointerUp,d=>{const h=d.target;h.hasPointerCapture(d.pointerId)&&(h.releasePointerCapture(d.pointerId),r(d))})})}),vN="SliderTrack",bN=g.forwardRef((t,e)=>{const{__scopeSlider:n,...s}=t,i=af(vN,n);return f.jsx(he.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...s,ref:e})});bN.displayName=vN;var Bg="SliderRange",xN=g.forwardRef((t,e)=>{const{__scopeSlider:n,...s}=t,i=af(Bg,n),r=gN(Bg,n),a=g.useRef(null),o=De(e,a),l=i.values.length,c=i.values.map(h=>SN(h,i.min,i.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return f.jsx(he.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...s,ref:o,style:{...t.style,[r.startEdge]:u+"%",[r.endEdge]:d+"%"}})});xN.displayName=Bg;var Lg="SliderThumb",_N=g.forwardRef((t,e)=>{const n=ez(t.__scopeSlider),[s,i]=g.useState(null),r=De(e,o=>i(o)),a=g.useMemo(()=>s?n().findIndex(o=>o.ref.current===s):-1,[n,s]);return f.jsx(rz,{...t,ref:r,index:a})}),rz=g.forwardRef((t,e)=>{const{__scopeSlider:n,index:s,name:i,...r}=t,a=af(Lg,n),o=gN(Lg,n),[l,c]=g.useState(null),u=De(e,b=>c(b)),d=l?a.form||!!l.closest("form"):!0,h=s0(l),p=a.values[s],m=p===void 0?0:SN(p,a.min,a.max),y=lz(s,a.values.length),x=h==null?void 0:h[o.size],v=x?uz(x,m,o.direction):0;return g.useEffect(()=>{if(l)return a.thumbs.add(l),()=>{a.thumbs.delete(l)}},[l,a.thumbs]),f.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${m}% + ${v}px)`},children:[f.jsx(Ig.ItemSlot,{scope:t.__scopeSlider,children:f.jsx(he.span,{role:"slider","aria-label":t["aria-label"]||y,"aria-valuemin":a.min,"aria-valuenow":p,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...r,ref:u,style:p===void 0?{display:"none"}:t.style,onFocus:ye(t.onFocus,()=>{a.valueIndexToChangeRef.current=s})})}),d&&f.jsx(wN,{name:i??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:p},s)]})});_N.displayName=Lg;var az="RadioBubbleInput",wN=g.forwardRef(({__scopeSlider:t,value:e,...n},s)=>{const i=g.useRef(null),r=De(i,s),a=n0(e);return g.useEffect(()=>{const o=i.current;if(!o)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==e&&u){const d=new Event("input",{bubbles:!0});u.call(o,e),o.dispatchEvent(d)}},[a,e]),f.jsx(he.input,{style:{display:"none"},...n,ref:r,defaultValue:e})});wN.displayName=az;function oz(t=[],e,n){const s=[...t];return s[n]=e,s.sort((i,r)=>i-r)}function SN(t,e,n){const r=100/(n-e)*(t-e);return Xd(r,[0,100])}function lz(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function cz(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),s=Math.min(...n);return n.indexOf(s)}function uz(t,e,n){const s=t/2,r=f0([0,50],[0,s]);return(s-r(e)*n)*n}function dz(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function hz(t,e){if(e>0){const n=dz(t);return Math.min(...n)>=e}return!0}function f0(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(t[1]-t[0]);return e[0]+s*(n-t[0])}}function fz(t){return(String(t).split(".")[1]||"").length}function pz(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var mz=pN,gz=bN,yz=xN,vz=_N,of="Switch",[bz]=pi(of),[xz,_z]=bz(of),CN=g.forwardRef((t,e)=>{const{__scopeSwitch:n,name:s,checked:i,defaultChecked:r,required:a,disabled:o,value:l="on",onCheckedChange:c,form:u,...d}=t,[h,p]=g.useState(null),m=De(e,_=>p(_)),y=g.useRef(!1),x=h?u||!!h.closest("form"):!0,[v,b]=As({prop:i,defaultProp:r??!1,onChange:c,caller:of});return f.jsxs(xz,{scope:n,checked:v,disabled:o,children:[f.jsx(he.button,{type:"button",role:"switch","aria-checked":v,"aria-required":a,"data-state":kN(v),"data-disabled":o?"":void 0,disabled:o,value:l,...d,ref:m,onClick:ye(t.onClick,_=>{b(w=>!w),x&&(y.current=_.isPropagationStopped(),y.current||_.stopPropagation())})}),x&&f.jsx(AN,{control:h,bubbles:!y.current,name:s,value:l,checked:v,required:a,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});CN.displayName=of;var TN="SwitchThumb",EN=g.forwardRef((t,e)=>{const{__scopeSwitch:n,...s}=t,i=_z(TN,n);return f.jsx(he.span,{"data-state":kN(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e})});EN.displayName=TN;var wz="SwitchBubbleInput",AN=g.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:s=!0,...i},r)=>{const a=g.useRef(null),o=De(a,r),l=n0(n),c=s0(e);return g.useEffect(()=>{const u=a.current;if(!u)return;const d=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&p){const m=new Event("click",{bubbles:s});p.call(u,n),u.dispatchEvent(m)}},[l,n,s]),f.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:o,style:{...i.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});AN.displayName=wz;function kN(t){return t?"checked":"unchecked"}var Sz=CN,Cz=EN,NN="Toggle",MN=g.forwardRef((t,e)=>{const{pressed:n,defaultPressed:s,onPressedChange:i,...r}=t,[a,o]=As({prop:n,onChange:i,defaultProp:s??!1,caller:NN});return f.jsx(he.button,{type:"button","aria-pressed":a,"data-state":a?"on":"off","data-disabled":t.disabled?"":void 0,...r,ref:e,onClick:ye(t.onClick,()=>{t.disabled||o(!a)})})});MN.displayName=NN;var yr="ToggleGroup",[RN]=pi(yr,[Rk]),DN=Rk(),p0=_t.forwardRef((t,e)=>{const{type:n,...s}=t;if(n==="single"){const i=s;return f.jsx(Tz,{...i,ref:e})}if(n==="multiple"){const i=s;return f.jsx(Ez,{...i,ref:e})}throw new Error(`Missing prop \`type\` expected on \`${yr}\``)});p0.displayName=yr;var[ON,jN]=RN(yr),Tz=_t.forwardRef((t,e)=>{const{value:n,defaultValue:s,onValueChange:i=()=>{},...r}=t,[a,o]=As({prop:n,defaultProp:s??"",onChange:i,caller:yr});return f.jsx(ON,{scope:t.__scopeToggleGroup,type:"single",value:_t.useMemo(()=>a?[a]:[],[a]),onItemActivate:o,onItemDeactivate:_t.useCallback(()=>o(""),[o]),children:f.jsx(PN,{...r,ref:e})})}),Ez=_t.forwardRef((t,e)=>{const{value:n,defaultValue:s,onValueChange:i=()=>{},...r}=t,[a,o]=As({prop:n,defaultProp:s??[],onChange:i,caller:yr}),l=_t.useCallback(u=>o((d=[])=>[...d,u]),[o]),c=_t.useCallback(u=>o((d=[])=>d.filter(h=>h!==u)),[o]);return f.jsx(ON,{scope:t.__scopeToggleGroup,type:"multiple",value:a,onItemActivate:l,onItemDeactivate:c,children:f.jsx(PN,{...r,ref:e})})});p0.displayName=yr;var[Az,kz]=RN(yr),PN=_t.forwardRef((t,e)=>{const{__scopeToggleGroup:n,disabled:s=!1,rovingFocus:i=!0,orientation:r,dir:a,loop:o=!0,...l}=t,c=DN(n),u=Wh(a),d={role:"group",dir:u,...l};return f.jsx(Az,{scope:n,rovingFocus:i,disabled:s,children:i?f.jsx(dV,{asChild:!0,...c,orientation:r,dir:u,loop:o,children:f.jsx(he.div,{...d,ref:e})}):f.jsx(he.div,{...d,ref:e})})}),Zd="ToggleGroupItem",IN=_t.forwardRef((t,e)=>{const n=jN(Zd,t.__scopeToggleGroup),s=kz(Zd,t.__scopeToggleGroup),i=DN(t.__scopeToggleGroup),r=n.value.includes(t.value),a=s.disabled||t.disabled,o={...t,pressed:r,disabled:a},l=_t.useRef(null);return s.rovingFocus?f.jsx(hV,{asChild:!0,...i,focusable:!a,active:r,ref:l,children:f.jsx(C_,{...o,ref:e})}):f.jsx(C_,{...o,ref:e})});IN.displayName=Zd;var C_=_t.forwardRef((t,e)=>{const{__scopeToggleGroup:n,value:s,...i}=t,r=jN(Zd,n),a={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},o=r.type==="single"?a:void 0;return f.jsx(MN,{...o,...i,ref:e,onPressedChange:l=>{l?r.onItemActivate(s):r.onItemDeactivate(s)}})}),Nz=p0,Mz=IN,[lf]=pi("Tooltip",[tf]),cf=tf(),BN="TooltipProvider",Rz=700,Vg="tooltip.open",[Dz,m0]=lf(BN),LN=t=>{const{__scopeTooltip:e,delayDuration:n=Rz,skipDelayDuration:s=300,disableHoverableContent:i=!1,children:r}=t,a=g.useRef(!0),o=g.useRef(!1),l=g.useRef(0);return g.useEffect(()=>{const c=l.current;return()=>window.clearTimeout(c)},[]),f.jsx(Dz,{scope:e,isOpenDelayedRef:a,delayDuration:n,onOpen:g.useCallback(()=>{window.clearTimeout(l.current),a.current=!1},[]),onClose:g.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.current=!0,s)},[s]),isPointerInTransitRef:o,onPointerInTransitChange:g.useCallback(c=>{o.current=c},[]),disableHoverableContent:i,children:r})};LN.displayName=BN;var rc="Tooltip",[Oz,Mc]=lf(rc),VN=t=>{const{__scopeTooltip:e,children:n,open:s,defaultOpen:i,onOpenChange:r,disableHoverableContent:a,delayDuration:o}=t,l=m0(rc,t.__scopeTooltip),c=cf(e),[u,d]=g.useState(null),h=un(),p=g.useRef(0),m=a??l.disableHoverableContent,y=o??l.delayDuration,x=g.useRef(!1),[v,b]=As({prop:s,defaultProp:i??!1,onChange:E=>{E?(l.onOpen(),document.dispatchEvent(new CustomEvent(Vg))):l.onClose(),r==null||r(E)},caller:rc}),_=g.useMemo(()=>v?x.current?"delayed-open":"instant-open":"closed",[v]),w=g.useCallback(()=>{window.clearTimeout(p.current),p.current=0,x.current=!1,b(!0)},[b]),S=g.useCallback(()=>{window.clearTimeout(p.current),p.current=0,b(!1)},[b]),T=g.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{x.current=!0,b(!0),p.current=0},y)},[y,b]);return g.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),f.jsx(Ek,{...c,children:f.jsx(Oz,{scope:e,contentId:h,open:v,stateAttribute:_,trigger:u,onTriggerChange:d,onTriggerEnter:g.useCallback(()=>{l.isOpenDelayedRef.current?T():w()},[l.isOpenDelayedRef,T,w]),onTriggerLeave:g.useCallback(()=>{m?S():(window.clearTimeout(p.current),p.current=0)},[S,m]),onOpen:w,onClose:S,disableHoverableContent:m,children:n})})};VN.displayName=rc;var zg="TooltipTrigger",zN=g.forwardRef((t,e)=>{const{__scopeTooltip:n,...s}=t,i=Mc(zg,n),r=m0(zg,n),a=cf(n),o=g.useRef(null),l=De(e,o,i.onTriggerChange),c=g.useRef(!1),u=g.useRef(!1),d=g.useCallback(()=>c.current=!1,[]);return g.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),f.jsx(Ak,{asChild:!0,...a,children:f.jsx(he.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...s,ref:l,onPointerMove:ye(t.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!r.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:ye(t.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:ye(t.onPointerDown,()=>{i.open&&i.onClose(),c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:ye(t.onFocus,()=>{c.current||i.onOpen()}),onBlur:ye(t.onBlur,i.onClose),onClick:ye(t.onClick,i.onClose)})})});zN.displayName=zg;var g0="TooltipPortal",[jz,Pz]=lf(g0,{forceMount:void 0}),FN=t=>{const{__scopeTooltip:e,forceMount:n,children:s,container:i}=t,r=Mc(g0,e);return f.jsx(jz,{scope:e,forceMount:n,children:f.jsx(zo,{present:n||r.open,children:f.jsx(Yh,{asChild:!0,container:i,children:s})})})};FN.displayName=g0;var xo="TooltipContent",HN=g.forwardRef((t,e)=>{const n=Pz(xo,t.__scopeTooltip),{forceMount:s=n.forceMount,side:i="top",...r}=t,a=Mc(xo,t.__scopeTooltip);return f.jsx(zo,{present:s||a.open,children:a.disableHoverableContent?f.jsx(UN,{side:i,...r,ref:e}):f.jsx(Iz,{side:i,...r,ref:e})})}),Iz=g.forwardRef((t,e)=>{const n=Mc(xo,t.__scopeTooltip),s=m0(xo,t.__scopeTooltip),i=g.useRef(null),r=De(e,i),[a,o]=g.useState(null),{trigger:l,onClose:c}=n,u=i.current,{onPointerInTransitChange:d}=s,h=g.useCallback(()=>{o(null),d(!1)},[d]),p=g.useCallback((m,y)=>{const x=m.currentTarget,v={x:m.clientX,y:m.clientY},b=zz(v,x.getBoundingClientRect()),_=Fz(v,b),w=Hz(y.getBoundingClientRect()),S=Gz([..._,...w]);o(S),d(!0)},[d]);return g.useEffect(()=>()=>h(),[h]),g.useEffect(()=>{if(l&&u){const m=x=>p(x,u),y=x=>p(x,l);return l.addEventListener("pointerleave",m),u.addEventListener("pointerleave",y),()=>{l.removeEventListener("pointerleave",m),u.removeEventListener("pointerleave",y)}}},[l,u,p,h]),g.useEffect(()=>{if(a){const m=y=>{const x=y.target,v={x:y.clientX,y:y.clientY},b=(l==null?void 0:l.contains(x))||(u==null?void 0:u.contains(x)),_=!Uz(v,a);b?h():_&&(h(),c())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[l,u,a,c,h]),f.jsx(UN,{...t,ref:r})}),[Bz,Lz]=lf(rc,{isInside:!1}),Vz=s6("TooltipContent"),UN=g.forwardRef((t,e)=>{const{__scopeTooltip:n,children:s,"aria-label":i,onEscapeKeyDown:r,onPointerDownOutside:a,...o}=t,l=Mc(xo,n),c=cf(n),{onClose:u}=l;return g.useEffect(()=>(document.addEventListener(Vg,u),()=>document.removeEventListener(Vg,u)),[u]),g.useEffect(()=>{if(l.trigger){const d=h=>{const p=h.target;p!=null&&p.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),f.jsx($h,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:f.jsxs(kk,{"data-state":l.stateAttribute,...c,...o,ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[f.jsx(Vz,{children:s}),f.jsx(Bz,{scope:n,isInside:!0,children:f.jsx(u6,{id:l.contentId,role:"tooltip",children:i||s})})]})})});HN.displayName=xo;var GN="TooltipArrow",qN=g.forwardRef((t,e)=>{const{__scopeTooltip:n,...s}=t,i=cf(n);return Lz(GN,n).isInside?null:f.jsx(Nk,{...i,...s,ref:e})});qN.displayName=GN;function zz(t,e){const n=Math.abs(e.top-t.y),s=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),r=Math.abs(e.left-t.x);switch(Math.min(n,s,i,r)){case r:return"left";case i:return"right";case n:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function Fz(t,e,n=5){const s=[];switch(e){case"top":s.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":s.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":s.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":s.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return s}function Hz(t){const{top:e,right:n,bottom:s,left:i}=t;return[{x:i,y:e},{x:n,y:e},{x:n,y:s},{x:i,y:s}]}function Uz(t,e){const{x:n,y:s}=t;let i=!1;for(let r=0,a=e.length-1;r<e.length;a=r++){const o=e[r],l=e[a],c=o.x,u=o.y,d=l.x,h=l.y;u>s!=h>s&&n<(d-c)*(s-u)/(h-u)+c&&(i=!i)}return i}function Gz(t){const e=t.slice();return e.sort((n,s)=>n.x<s.x?-1:n.x>s.x?1:n.y<s.y?-1:n.y>s.y?1:0),qz(e)}function qz(t){if(t.length<=1)return t.slice();const e=[];for(let s=0;s<t.length;s++){const i=t[s];for(;e.length>=2;){const r=e[e.length-1],a=e[e.length-2];if((r.x-a.x)*(i.y-a.y)>=(r.y-a.y)*(i.x-a.x))e.pop();else break}e.push(i)}e.pop();const n=[];for(let s=t.length-1;s>=0;s--){const i=t[s];for(;n.length>=2;){const r=n[n.length-1],a=n[n.length-2];if((r.x-a.x)*(i.y-a.y)>=(r.y-a.y)*(i.x-a.x))n.pop();else break}n.push(i)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Wz=LN,$z=VN,Yz=zN,Kz=FN,Xz=HN,Qz=qN;function WN(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=WN(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function $N(){for(var t,e,n=0,s="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=WN(t))&&(s&&(s+=" "),s+=e);return s}const Zz=(t,e)=>{const n=new Array(t.length+e.length);for(let s=0;s<t.length;s++)n[s]=t[s];for(let s=0;s<e.length;s++)n[t.length+s]=e[s];return n},Jz=(t,e)=>({classGroupId:t,validator:e}),YN=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),Jd="-",T_=[],e7="arbitrary..",t7=t=>{const e=s7(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:a=>{if(a.startsWith("[")&&a.endsWith("]"))return n7(a);const o=a.split(Jd),l=o[0]===""&&o.length>1?1:0;return KN(o,l,e)},getConflictingClassGroupIds:(a,o)=>{if(o){const l=s[a],c=n[a];return l?c?Zz(c,l):l:c||T_}return n[a]||T_}}},KN=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const i=t[e],r=n.nextPart.get(i);if(r){const c=KN(t,e+1,r);if(c)return c}const a=n.validators;if(a===null)return;const o=e===0?t.join(Jd):t.slice(e).join(Jd),l=a.length;for(let c=0;c<l;c++){const u=a[c];if(u.validator(o))return u.classGroupId}},n7=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),s=e.slice(0,n);return s?e7+s:void 0})(),s7=t=>{const{theme:e,classGroups:n}=t;return i7(n,e)},i7=(t,e)=>{const n=YN();for(const s in t){const i=t[s];y0(i,n,s,e)}return n},y0=(t,e,n,s)=>{const i=t.length;for(let r=0;r<i;r++){const a=t[r];r7(a,e,n,s)}},r7=(t,e,n,s)=>{if(typeof t=="string"){a7(t,e,n);return}if(typeof t=="function"){o7(t,e,n,s);return}l7(t,e,n,s)},a7=(t,e,n)=>{const s=t===""?e:XN(e,t);s.classGroupId=n},o7=(t,e,n,s)=>{if(c7(t)){y0(t(s),e,n,s);return}e.validators===null&&(e.validators=[]),e.validators.push(Jz(n,t))},l7=(t,e,n,s)=>{const i=Object.entries(t),r=i.length;for(let a=0;a<r;a++){const[o,l]=i[a];y0(l,XN(e,o),n,s)}},XN=(t,e)=>{let n=t;const s=e.split(Jd),i=s.length;for(let r=0;r<i;r++){const a=s[r];let o=n.nextPart.get(a);o||(o=YN(),n.nextPart.set(a,o)),n=o}return n},c7=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,u7=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),s=Object.create(null);const i=(r,a)=>{n[r]=a,e++,e>t&&(e=0,s=n,n=Object.create(null))};return{get(r){let a=n[r];if(a!==void 0)return a;if((a=s[r])!==void 0)return i(r,a),a},set(r,a){r in n?n[r]=a:i(r,a)}}},Fg="!",E_=":",d7=[],A_=(t,e,n,s,i)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:s,isExternal:i}),h7=t=>{const{prefix:e,experimentalParseClassName:n}=t;let s=i=>{const r=[];let a=0,o=0,l=0,c;const u=i.length;for(let y=0;y<u;y++){const x=i[y];if(a===0&&o===0){if(x===E_){r.push(i.slice(l,y)),l=y+1;continue}if(x==="/"){c=y;continue}}x==="["?a++:x==="]"?a--:x==="("?o++:x===")"&&o--}const d=r.length===0?i:i.slice(l);let h=d,p=!1;d.endsWith(Fg)?(h=d.slice(0,-1),p=!0):d.startsWith(Fg)&&(h=d.slice(1),p=!0);const m=c&&c>l?c-l:void 0;return A_(r,p,h,m)};if(e){const i=e+E_,r=s;s=a=>a.startsWith(i)?r(a.slice(i.length)):A_(d7,!1,a,void 0,!0)}if(n){const i=s;s=r=>n({className:r,parseClassName:i})}return s},f7=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,s)=>{e.set(n,1e6+s)}),n=>{const s=[];let i=[];for(let r=0;r<n.length;r++){const a=n[r],o=a[0]==="[",l=e.has(a);o||l?(i.length>0&&(i.sort(),s.push(...i),i=[]),s.push(a)):i.push(a)}return i.length>0&&(i.sort(),s.push(...i)),s}},p7=t=>({cache:u7(t.cacheSize),parseClassName:h7(t),sortModifiers:f7(t),...t7(t)}),m7=/\s+/,g7=(t,e)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:i,sortModifiers:r}=e,a=[],o=t.trim().split(m7);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{isExternal:d,modifiers:h,hasImportantModifier:p,baseClassName:m,maybePostfixModifierPosition:y}=n(u);if(d){l=u+(l.length>0?" "+l:l);continue}let x=!!y,v=s(x?m.substring(0,y):m);if(!v){if(!x){l=u+(l.length>0?" "+l:l);continue}if(v=s(m),!v){l=u+(l.length>0?" "+l:l);continue}x=!1}const b=h.length===0?"":h.length===1?h[0]:r(h).join(":"),_=p?b+Fg:b,w=_+v;if(a.indexOf(w)>-1)continue;a.push(w);const S=i(v,x);for(let T=0;T<S.length;++T){const E=S[T];a.push(_+E)}l=u+(l.length>0?" "+l:l)}return l},y7=(...t)=>{let e=0,n,s,i="";for(;e<t.length;)(n=t[e++])&&(s=QN(n))&&(i&&(i+=" "),i+=s);return i},QN=t=>{if(typeof t=="string")return t;let e,n="";for(let s=0;s<t.length;s++)t[s]&&(e=QN(t[s]))&&(n&&(n+=" "),n+=e);return n},v7=(t,...e)=>{let n,s,i,r;const a=l=>{const c=e.reduce((u,d)=>d(u),t());return n=p7(c),s=n.cache.get,i=n.cache.set,r=o,o(l)},o=l=>{const c=s(l);if(c)return c;const u=g7(l,n);return i(l,u),u};return r=a,(...l)=>r(y7(...l))},b7=[],bt=t=>{const e=n=>n[t]||b7;return e.isThemeGetter=!0,e},ZN=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,JN=/^\((?:(\w[\w-]*):)?(.+)\)$/i,x7=/^\d+\/\d+$/,_7=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,w7=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,S7=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,C7=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,T7=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,va=t=>x7.test(t),_e=t=>!!t&&!Number.isNaN(Number(t)),_i=t=>!!t&&Number.isInteger(Number(t)),Yp=t=>t.endsWith("%")&&_e(t.slice(0,-1)),Us=t=>_7.test(t),E7=()=>!0,A7=t=>w7.test(t)&&!S7.test(t),e2=()=>!1,k7=t=>C7.test(t),N7=t=>T7.test(t),M7=t=>!ne(t)&&!se(t),R7=t=>qo(t,s2,e2),ne=t=>ZN.test(t),Cr=t=>qo(t,i2,A7),Kp=t=>qo(t,I7,_e),k_=t=>qo(t,t2,e2),D7=t=>qo(t,n2,N7),Tu=t=>qo(t,r2,k7),se=t=>JN.test(t),cl=t=>Wo(t,i2),O7=t=>Wo(t,B7),N_=t=>Wo(t,t2),j7=t=>Wo(t,s2),P7=t=>Wo(t,n2),Eu=t=>Wo(t,r2,!0),qo=(t,e,n)=>{const s=ZN.exec(t);return s?s[1]?e(s[1]):n(s[2]):!1},Wo=(t,e,n=!1)=>{const s=JN.exec(t);return s?s[1]?e(s[1]):n:!1},t2=t=>t==="position"||t==="percentage",n2=t=>t==="image"||t==="url",s2=t=>t==="length"||t==="size"||t==="bg-size",i2=t=>t==="length",I7=t=>t==="number",B7=t=>t==="family-name",r2=t=>t==="shadow",L7=()=>{const t=bt("color"),e=bt("font"),n=bt("text"),s=bt("font-weight"),i=bt("tracking"),r=bt("leading"),a=bt("breakpoint"),o=bt("container"),l=bt("spacing"),c=bt("radius"),u=bt("shadow"),d=bt("inset-shadow"),h=bt("text-shadow"),p=bt("drop-shadow"),m=bt("blur"),y=bt("perspective"),x=bt("aspect"),v=bt("ease"),b=bt("animate"),_=()=>["auto","avoid","all","avoid-page","page","left","right","column"],w=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],S=()=>[...w(),se,ne],T=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto","contain","none"],C=()=>[se,ne,l],M=()=>[va,"full","auto",...C()],A=()=>[_i,"none","subgrid",se,ne],k=()=>["auto",{span:["full",_i,se,ne]},_i,se,ne],N=()=>[_i,"auto",se,ne],P=()=>["auto","min","max","fr",se,ne],j=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],I=()=>["start","end","center","stretch","center-safe","end-safe"],D=()=>["auto",...C()],O=()=>[va,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],R=()=>[t,se,ne],B=()=>[...w(),N_,k_,{position:[se,ne]}],F=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Z=()=>["auto","cover","contain",j7,R7,{size:[se,ne]}],V=()=>[Yp,cl,Cr],q=()=>["","none","full",c,se,ne],$=()=>["",_e,cl,Cr],H=()=>["solid","dashed","dotted","double"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>[_e,Yp,N_,k_],z=()=>["","none",m,se,ne],te=()=>["none",_e,se,ne],fe=()=>["none",_e,se,ne],ge=()=>[_e,se,ne],be=()=>[va,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Us],breakpoint:[Us],color:[E7],container:[Us],"drop-shadow":[Us],ease:["in","out","in-out"],font:[M7],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Us],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Us],shadow:[Us],spacing:["px",_e],text:[Us],"text-shadow":[Us],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",va,ne,se,x]}],container:["container"],columns:[{columns:[_e,ne,se,o]}],"break-after":[{"break-after":_()}],"break-before":[{"break-before":_()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:S()}],overflow:[{overflow:T()}],"overflow-x":[{"overflow-x":T()}],"overflow-y":[{"overflow-y":T()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:M()}],"inset-x":[{"inset-x":M()}],"inset-y":[{"inset-y":M()}],start:[{start:M()}],end:[{end:M()}],top:[{top:M()}],right:[{right:M()}],bottom:[{bottom:M()}],left:[{left:M()}],visibility:["visible","invisible","collapse"],z:[{z:[_i,"auto",se,ne]}],basis:[{basis:[va,"full","auto",o,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[_e,va,"auto","initial","none",ne]}],grow:[{grow:["",_e,se,ne]}],shrink:[{shrink:["",_e,se,ne]}],order:[{order:[_i,"first","last","none",se,ne]}],"grid-cols":[{"grid-cols":A()}],"col-start-end":[{col:k()}],"col-start":[{"col-start":N()}],"col-end":[{"col-end":N()}],"grid-rows":[{"grid-rows":A()}],"row-start-end":[{row:k()}],"row-start":[{"row-start":N()}],"row-end":[{"row-end":N()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":P()}],"auto-rows":[{"auto-rows":P()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...j(),"normal"]}],"justify-items":[{"justify-items":[...I(),"normal"]}],"justify-self":[{"justify-self":["auto",...I()]}],"align-content":[{content:["normal",...j()]}],"align-items":[{items:[...I(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...I(),{baseline:["","last"]}]}],"place-content":[{"place-content":j()}],"place-items":[{"place-items":[...I(),"baseline"]}],"place-self":[{"place-self":["auto",...I()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:D()}],mx:[{mx:D()}],my:[{my:D()}],ms:[{ms:D()}],me:[{me:D()}],mt:[{mt:D()}],mr:[{mr:D()}],mb:[{mb:D()}],ml:[{ml:D()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:O()}],w:[{w:[o,"screen",...O()]}],"min-w":[{"min-w":[o,"screen","none",...O()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},...O()]}],h:[{h:["screen","lh",...O()]}],"min-h":[{"min-h":["screen","lh","none",...O()]}],"max-h":[{"max-h":["screen","lh",...O()]}],"font-size":[{text:["base",n,cl,Cr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,se,Kp]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Yp,ne]}],"font-family":[{font:[O7,ne,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,se,ne]}],"line-clamp":[{"line-clamp":[_e,"none",se,Kp]}],leading:[{leading:[r,...C()]}],"list-image":[{"list-image":["none",se,ne]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",se,ne]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:R()}],"text-color":[{text:R()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:[_e,"from-font","auto",se,Cr]}],"text-decoration-color":[{decoration:R()}],"underline-offset":[{"underline-offset":[_e,"auto",se,ne]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",se,ne]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",se,ne]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:B()}],"bg-repeat":[{bg:F()}],"bg-size":[{bg:Z()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},_i,se,ne],radial:["",se,ne],conic:[_i,se,ne]},P7,D7]}],"bg-color":[{bg:R()}],"gradient-from-pos":[{from:V()}],"gradient-via-pos":[{via:V()}],"gradient-to-pos":[{to:V()}],"gradient-from":[{from:R()}],"gradient-via":[{via:R()}],"gradient-to":[{to:R()}],rounded:[{rounded:q()}],"rounded-s":[{"rounded-s":q()}],"rounded-e":[{"rounded-e":q()}],"rounded-t":[{"rounded-t":q()}],"rounded-r":[{"rounded-r":q()}],"rounded-b":[{"rounded-b":q()}],"rounded-l":[{"rounded-l":q()}],"rounded-ss":[{"rounded-ss":q()}],"rounded-se":[{"rounded-se":q()}],"rounded-ee":[{"rounded-ee":q()}],"rounded-es":[{"rounded-es":q()}],"rounded-tl":[{"rounded-tl":q()}],"rounded-tr":[{"rounded-tr":q()}],"rounded-br":[{"rounded-br":q()}],"rounded-bl":[{"rounded-bl":q()}],"border-w":[{border:$()}],"border-w-x":[{"border-x":$()}],"border-w-y":[{"border-y":$()}],"border-w-s":[{"border-s":$()}],"border-w-e":[{"border-e":$()}],"border-w-t":[{"border-t":$()}],"border-w-r":[{"border-r":$()}],"border-w-b":[{"border-b":$()}],"border-w-l":[{"border-l":$()}],"divide-x":[{"divide-x":$()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":$()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...H(),"hidden","none"]}],"divide-style":[{divide:[...H(),"hidden","none"]}],"border-color":[{border:R()}],"border-color-x":[{"border-x":R()}],"border-color-y":[{"border-y":R()}],"border-color-s":[{"border-s":R()}],"border-color-e":[{"border-e":R()}],"border-color-t":[{"border-t":R()}],"border-color-r":[{"border-r":R()}],"border-color-b":[{"border-b":R()}],"border-color-l":[{"border-l":R()}],"divide-color":[{divide:R()}],"outline-style":[{outline:[...H(),"none","hidden"]}],"outline-offset":[{"outline-offset":[_e,se,ne]}],"outline-w":[{outline:["",_e,cl,Cr]}],"outline-color":[{outline:R()}],shadow:[{shadow:["","none",u,Eu,Tu]}],"shadow-color":[{shadow:R()}],"inset-shadow":[{"inset-shadow":["none",d,Eu,Tu]}],"inset-shadow-color":[{"inset-shadow":R()}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:R()}],"ring-offset-w":[{"ring-offset":[_e,Cr]}],"ring-offset-color":[{"ring-offset":R()}],"inset-ring-w":[{"inset-ring":$()}],"inset-ring-color":[{"inset-ring":R()}],"text-shadow":[{"text-shadow":["none",h,Eu,Tu]}],"text-shadow-color":[{"text-shadow":R()}],opacity:[{opacity:[_e,se,ne]}],"mix-blend":[{"mix-blend":[...Y(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Y()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[_e]}],"mask-image-linear-from-pos":[{"mask-linear-from":L()}],"mask-image-linear-to-pos":[{"mask-linear-to":L()}],"mask-image-linear-from-color":[{"mask-linear-from":R()}],"mask-image-linear-to-color":[{"mask-linear-to":R()}],"mask-image-t-from-pos":[{"mask-t-from":L()}],"mask-image-t-to-pos":[{"mask-t-to":L()}],"mask-image-t-from-color":[{"mask-t-from":R()}],"mask-image-t-to-color":[{"mask-t-to":R()}],"mask-image-r-from-pos":[{"mask-r-from":L()}],"mask-image-r-to-pos":[{"mask-r-to":L()}],"mask-image-r-from-color":[{"mask-r-from":R()}],"mask-image-r-to-color":[{"mask-r-to":R()}],"mask-image-b-from-pos":[{"mask-b-from":L()}],"mask-image-b-to-pos":[{"mask-b-to":L()}],"mask-image-b-from-color":[{"mask-b-from":R()}],"mask-image-b-to-color":[{"mask-b-to":R()}],"mask-image-l-from-pos":[{"mask-l-from":L()}],"mask-image-l-to-pos":[{"mask-l-to":L()}],"mask-image-l-from-color":[{"mask-l-from":R()}],"mask-image-l-to-color":[{"mask-l-to":R()}],"mask-image-x-from-pos":[{"mask-x-from":L()}],"mask-image-x-to-pos":[{"mask-x-to":L()}],"mask-image-x-from-color":[{"mask-x-from":R()}],"mask-image-x-to-color":[{"mask-x-to":R()}],"mask-image-y-from-pos":[{"mask-y-from":L()}],"mask-image-y-to-pos":[{"mask-y-to":L()}],"mask-image-y-from-color":[{"mask-y-from":R()}],"mask-image-y-to-color":[{"mask-y-to":R()}],"mask-image-radial":[{"mask-radial":[se,ne]}],"mask-image-radial-from-pos":[{"mask-radial-from":L()}],"mask-image-radial-to-pos":[{"mask-radial-to":L()}],"mask-image-radial-from-color":[{"mask-radial-from":R()}],"mask-image-radial-to-color":[{"mask-radial-to":R()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":w()}],"mask-image-conic-pos":[{"mask-conic":[_e]}],"mask-image-conic-from-pos":[{"mask-conic-from":L()}],"mask-image-conic-to-pos":[{"mask-conic-to":L()}],"mask-image-conic-from-color":[{"mask-conic-from":R()}],"mask-image-conic-to-color":[{"mask-conic-to":R()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:B()}],"mask-repeat":[{mask:F()}],"mask-size":[{mask:Z()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",se,ne]}],filter:[{filter:["","none",se,ne]}],blur:[{blur:z()}],brightness:[{brightness:[_e,se,ne]}],contrast:[{contrast:[_e,se,ne]}],"drop-shadow":[{"drop-shadow":["","none",p,Eu,Tu]}],"drop-shadow-color":[{"drop-shadow":R()}],grayscale:[{grayscale:["",_e,se,ne]}],"hue-rotate":[{"hue-rotate":[_e,se,ne]}],invert:[{invert:["",_e,se,ne]}],saturate:[{saturate:[_e,se,ne]}],sepia:[{sepia:["",_e,se,ne]}],"backdrop-filter":[{"backdrop-filter":["","none",se,ne]}],"backdrop-blur":[{"backdrop-blur":z()}],"backdrop-brightness":[{"backdrop-brightness":[_e,se,ne]}],"backdrop-contrast":[{"backdrop-contrast":[_e,se,ne]}],"backdrop-grayscale":[{"backdrop-grayscale":["",_e,se,ne]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[_e,se,ne]}],"backdrop-invert":[{"backdrop-invert":["",_e,se,ne]}],"backdrop-opacity":[{"backdrop-opacity":[_e,se,ne]}],"backdrop-saturate":[{"backdrop-saturate":[_e,se,ne]}],"backdrop-sepia":[{"backdrop-sepia":["",_e,se,ne]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",se,ne]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[_e,"initial",se,ne]}],ease:[{ease:["linear","initial",v,se,ne]}],delay:[{delay:[_e,se,ne]}],animate:[{animate:["none",b,se,ne]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,se,ne]}],"perspective-origin":[{"perspective-origin":S()}],rotate:[{rotate:te()}],"rotate-x":[{"rotate-x":te()}],"rotate-y":[{"rotate-y":te()}],"rotate-z":[{"rotate-z":te()}],scale:[{scale:fe()}],"scale-x":[{"scale-x":fe()}],"scale-y":[{"scale-y":fe()}],"scale-z":[{"scale-z":fe()}],"scale-3d":["scale-3d"],skew:[{skew:ge()}],"skew-x":[{"skew-x":ge()}],"skew-y":[{"skew-y":ge()}],transform:[{transform:[se,ne,"","none","gpu","cpu"]}],"transform-origin":[{origin:S()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:be()}],"translate-x":[{"translate-x":be()}],"translate-y":[{"translate-y":be()}],"translate-z":[{"translate-z":be()}],"translate-none":["translate-none"],accent:[{accent:R()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:R()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",se,ne]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",se,ne]}],fill:[{fill:["none",...R()]}],"stroke-w":[{stroke:[_e,cl,Cr,Kp]}],stroke:[{stroke:["none",...R()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},V7=v7(L7);function ee(...t){return V7($N(t))}function Rc({...t}){return f.jsx(LV,{"data-slot":"select",...t})}function Dc({...t}){return f.jsx(zV,{"data-slot":"select-value",...t})}function Oc({className:t,size:e="default",children:n,...s}){return f.jsxs(VV,{"data-slot":"select-trigger","data-size":e,className:ee("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s,children:[n,f.jsx(FV,{asChild:!0,children:f.jsx(vA,{className:"size-4 opacity-50"})})]})}function jc({className:t,children:e,position:n="item-aligned",align:s="center",...i}){return f.jsx(HV,{children:f.jsxs(UV,{"data-slot":"select-content",className:ee("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,align:s,...i,children:[f.jsx(z7,{}),f.jsx(GV,{className:ee("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),f.jsx(F7,{})]})})}function Zr({className:t,children:e,...n}){return f.jsxs(qV,{"data-slot":"select-item",className:ee("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[f.jsx("span",{"data-slot":"select-item-indicator",className:"absolute right-2 flex size-3.5 items-center justify-center",children:f.jsx($V,{children:f.jsx(Y4,{className:"size-4"})})}),f.jsx(WV,{children:e})]})}function z7({className:t,...e}){return f.jsx(YV,{"data-slot":"select-scroll-up-button",className:ee("flex cursor-default items-center justify-center py-1",t),...e,children:f.jsx(Q4,{className:"size-4"})})}function F7({className:t,...e}){return f.jsx(KV,{"data-slot":"select-scroll-down-button",className:ee("flex cursor-default items-center justify-center py-1",t),...e,children:f.jsx(vA,{className:"size-4"})})}function H7({devices:t,activeDeviceId:e,onSelect:n}){return f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx($I,{className:"size-4 text-muted-foreground"}),f.jsxs(Rc,{value:e??"",onValueChange:n,children:[f.jsx(Oc,{size:"sm",className:"w-[180px]",children:f.jsx(Dc,{placeholder:"No MIDI device"})}),f.jsx(jc,{children:t.length===0?f.jsx(Zr,{value:"none",disabled:!0,children:"No devices found"}):t.map(s=>f.jsx(Zr,{value:s.id,children:s.name},s.id))})]}),f.jsx("div",{className:"size-2 rounded-full transition-colors",style:{backgroundColor:e?"oklch(0.65 0.20 155)":"var(--muted-foreground)",opacity:e?1:.3,boxShadow:e?"0 0 6px 1px oklch(0.65 0.20 155 / 0.5)":"none"}})]})}const U7=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function lr(t){const e=Math.floor(t/12)-1;return`${U7[t%12]}${e}`}function ac(t){const e=t%12;return e===1||e===3||e===6||e===8||e===10}function G7(t){return Math.max(0,Math.min(1,t/127))}function q7({activeNotes:t}){const e=Array.from(t.keys()).sort((n,s)=>n-s).map(lr);return f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-muted-foreground text-[11px] font-semibold uppercase tracking-wider",children:"Notes"}),f.jsx("div",{className:"flex min-w-[120px] items-center gap-1.5 rounded-md bg-secondary/50 px-3 py-1.5",children:e.length>0?e.map((n,s)=>f.jsx("span",{className:"animate-note-pop rounded bg-primary/20 px-1.5 py-0.5 font-mono text-xs font-semibold text-primary",children:n},s)):f.jsx("span",{className:"text-muted-foreground/50 font-mono text-xs",children:"---"})})]})}function uf({className:t,defaultValue:e,value:n,min:s=0,max:i=100,...r}){const a=g.useMemo(()=>Array.isArray(n)?n:Array.isArray(e)?e:[s,i],[n,e,s,i]);return f.jsxs(mz,{"data-slot":"slider",defaultValue:e,value:n,min:s,max:i,className:ee("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",t),...r,children:[f.jsx(gz,{"data-slot":"slider-track",className:ee("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:f.jsx(yz,{"data-slot":"slider-range",className:ee("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:a.length},(o,l)=>f.jsx(vz,{"data-slot":"slider-thumb",className:"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},l))]})}const _n=[{name:"Classic",oscillator:{type:"triangle"},envelope:{attack:.01,decay:.3,sustain:.4,release:.8}},{name:"Bright",oscillator:{type:"sawtooth"},envelope:{attack:.005,decay:.2,sustain:.3,release:.5}},{name:"FM",oscillator:{type:"fmsquare",modulationType:"sine",modulationIndex:3,harmonicity:2},envelope:{attack:.01,decay:.4,sustain:.2,release:.6}},{name:"Warm",oscillator:{type:"sine"},envelope:{attack:.05,decay:.5,sustain:.6,release:1.2}},{name:"AM",oscillator:{type:"amsquare",modulationType:"sine",harmonicity:1.5},envelope:{attack:.01,decay:.3,sustain:.35,release:.7}},{name:"Pluck",oscillator:{type:"fmtriangle",modulationIndex:2,harmonicity:3},envelope:{attack:.001,decay:.25,sustain:0,release:.3}},{name:"Pad",oscillator:{type:"fatsawtooth",spread:30},envelope:{attack:.4,decay:.8,sustain:.7,release:2}},{name:"Bass",oscillator:{type:"fatsawtooth",spread:15},envelope:{attack:.005,decay:.3,sustain:.5,release:.3}},{name:"Sub Bass",oscillator:{type:"sine"},envelope:{attack:.005,decay:.1,sustain:.9,release:.4}},{name:"Organ",oscillator:{type:"fatsine",spread:20},envelope:{attack:.005,decay:.1,sustain:1,release:.05}},{name:"Lead",oscillator:{type:"fatsquare",spread:20},envelope:{attack:.01,decay:.2,sustain:.6,release:.4}},{name:"Bell",oscillator:{type:"fmsine",modulationIndex:8,harmonicity:5.4},envelope:{attack:.001,decay:1.5,sustain:0,release:2}},{name:"Strings",oscillator:{type:"fatsawtooth",spread:40},envelope:{attack:.3,decay:.5,sustain:.8,release:1}},{name:"Electric Piano",oscillator:{type:"fmtriangle",modulationIndex:1.5,harmonicity:3.5},envelope:{attack:.005,decay:.6,sustain:.3,release:.8}},{name:"Brass",oscillator:{type:"fatsquare",spread:25},envelope:{attack:.08,decay:.3,sustain:.7,release:.3}}],oc=36,W7=84,Hg=-12,Ug=-40,a2=0,v0=16,$7=/mpk\s*mini/i,Y7=[{cc:1,effect:"filterCutoff",label:"Filter"},{cc:2,effect:"filterResonance",label:"Resonance"},{cc:3,effect:"reverbWet",label:"Reverb"},{cc:4,effect:"chorusDepth",label:"Chorus"},{cc:70,effect:"filterCutoff",label:"Filter"},{cc:71,effect:"filterResonance",label:"Resonance"},{cc:72,effect:"reverbWet",label:"Reverb"},{cc:73,effect:"chorusDepth",label:"Chorus"}],K7=[5,74],df=[{id:0,name:"Kick",shortName:"KCK",midiNote:36,color:"oklch(0.62 0.22 25)"},{id:1,name:"Snare",shortName:"SNR",midiNote:38,color:"oklch(0.70 0.18 65)"},{id:2,name:"Closed HH",shortName:"CHH",midiNote:42,color:"oklch(0.70 0.20 150)"},{id:3,name:"Open HH",shortName:"OHH",midiNote:46,color:"oklch(0.65 0.18 180)"},{id:4,name:"Clap",shortName:"CLP",midiNote:39,color:"oklch(0.62 0.22 310)"},{id:5,name:"Tom",shortName:"TOM",midiNote:45,color:"oklch(0.65 0.20 265)"},{id:6,name:"Crash",shortName:"CRS",midiNote:49,color:"oklch(0.75 0.17 90)"},{id:7,name:"Ride",shortName:"RDE",midiNote:51,color:"oklch(0.65 0.18 210)"}],eh=new Map(df.map(t=>[t.midiNote,t.id])),X7=10,o2=120,Q7=40,Z7=240,M_="micro-daw-arrangement",R_=["oklch(0.65 0.20 250)","oklch(0.65 0.20 155)","oklch(0.62 0.22 25)","oklch(0.70 0.18 65)","oklch(0.62 0.22 310)","oklch(0.75 0.17 90)","oklch(0.62 0.16 195)","oklch(0.65 0.20 345)"],J7=30,b0=10,x0=80,l2=[.25,.5,1,2,4],D_=64;function eF({volume:t,onChange:e}){return f.jsxs("div",{className:"flex items-center gap-2",children:[t<=Ug?f.jsx(qv,{className:"size-4 text-muted-foreground"}):f.jsx(Gv,{className:"size-4 text-muted-foreground"}),f.jsx(uf,{value:[t],onValueChange:([n])=>e(n),min:Ug,max:a2,step:1,className:"w-28"}),f.jsxs("span",{className:"whitespace-nowrap text-right font-mono text-xs text-muted-foreground",children:[t," dB"]})]})}function tF({presetIndex:t,onChange:e}){return f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-muted-foreground text-[11px] font-semibold uppercase tracking-wider",children:"Synth"}),f.jsxs(Rc,{value:String(t),onValueChange:n=>e(Number(n)),children:[f.jsx(Oc,{size:"sm",className:"w-[130px]",children:f.jsx(Dc,{})}),f.jsx(jc,{children:_n.map((n,s)=>f.jsx(Zr,{value:String(s),children:n.name},s))})]})]})}const O_=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,j_=$N,hf=(t,e)=>n=>{var s;if((e==null?void 0:e.variants)==null)return j_(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:r}=e,a=Object.keys(i).map(c=>{const u=n==null?void 0:n[c],d=r==null?void 0:r[c];if(u===null)return null;const h=O_(u)||O_(d);return i[c][h]}),o=n&&Object.entries(n).reduce((c,u)=>{let[d,h]=u;return h===void 0||(c[d]=h),c},{}),l=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((c,u)=>{let{class:d,className:h,...p}=u;return Object.entries(p).every(m=>{let[y,x]=m;return Array.isArray(x)?x.includes({...r,...o}[y]):{...r,...o}[y]===x})?[...c,d,h]:c},[]);return j_(t,a,l,n==null?void 0:n.class,n==null?void 0:n.className)},nF=hf("inline-flex items-center justify-center rounded-full border border-transparent px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border-border text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",ghost:"[a&]:hover:bg-accent [a&]:hover:text-accent-foreground",link:"text-primary underline-offset-4 [a&]:hover:underline"}},defaultVariants:{variant:"default"}});function th({className:t,variant:e="default",asChild:n=!1,...s}){const i=n?qh:"span";return f.jsx(i,{"data-slot":"badge","data-variant":e,className:ee(nF({variant:e}),t),...s})}function sF({chord:t}){return f.jsx(th,{variant:t?"default":"secondary",className:"min-w-[48px] justify-center font-mono text-xs",children:t?t.display:"---"})}const iF=hf("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),c2=g.createContext({size:"default",variant:"default",spacing:0});function rF({className:t,variant:e,size:n,spacing:s=0,children:i,...r}){return f.jsx(Nz,{"data-slot":"toggle-group","data-variant":e,"data-size":n,"data-spacing":s,style:{"--gap":s},className:ee("group/toggle-group flex w-fit items-center gap-[--spacing(var(--gap))] rounded-md data-[spacing=default]:data-[variant=outline]:shadow-xs",t),...r,children:f.jsx(c2.Provider,{value:{variant:e,size:n,spacing:s},children:i})})}function Xp({className:t,children:e,variant:n,size:s,...i}){const r=g.useContext(c2);return f.jsx(Mz,{"data-slot":"toggle-group-item","data-variant":r.variant||n,"data-size":r.size||s,"data-spacing":r.spacing,className:ee(iF({variant:r.variant||n,size:r.size||s}),"w-auto min-w-0 shrink-0 px-3 focus:z-10 focus-visible:z-10","data-[spacing=0]:rounded-none data-[spacing=0]:shadow-none data-[spacing=0]:first:rounded-l-md data-[spacing=0]:last:rounded-r-md data-[spacing=0]:data-[variant=outline]:border-l-0 data-[spacing=0]:data-[variant=outline]:first:border-l",t),...i,children:e})}function aF({mode:t,onChange:e}){return f.jsxs(rF,{type:"single",value:t,onValueChange:n=>{n&&e(n)},size:"sm",className:"gap-0",children:[f.jsx(Xp,{value:"auto",className:"rounded-r-none text-[11px] font-semibold px-2 h-7",children:"Auto"}),f.jsx(Xp,{value:"keys",className:"rounded-none text-[11px] font-semibold px-2 h-7",children:"Keys"}),f.jsx(Xp,{value:"split",className:"rounded-l-none text-[11px] font-semibold px-2 h-7",children:"Split"})]})}const oF=hf("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",xs:"h-6 gap-1 rounded-md px-2 text-xs has-[>svg]:px-1.5 [&_svg:not([class*='size-'])]:size-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-xs":"size-6 rounded-md [&_svg:not([class*='size-'])]:size-3","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function Te({className:t,variant:e="default",size:n="default",asChild:s=!1,...i}){const r=s?qh:"button";return f.jsx(r,{"data-slot":"button","data-variant":e,"data-size":n,className:ee(oF({variant:e,size:n,className:t})),...i})}function lF({mode:t,devices:e,activeDeviceId:n,onSelectDevice:s,activeNotes:i,volume:r,onVolumeChange:a,presetIndex:o,onPresetChange:l,detectedChord:c,routingMode:u,onRoutingModeChange:d,canUndo:h,canRedo:p,onUndo:m,onRedo:y,muted:x,onToggleMute:v,projectName:b,isDirty:_,onSave:w,sidebarTrigger:S}){const[T,E]=g.useState(!1);g.useEffect(()=>{if(window.electronAPI)return window.electronAPI.isFullscreen().then(E),window.electronAPI.onFullscreenChanged(E)},[]);const C=g.useCallback(()=>{var M;(M=window.electronAPI)==null||M.toggleFullscreen()},[]);return f.jsxs("div",{className:"flex items-center justify-between border-b border-border bg-card/80 backdrop-blur-md pl-20 pr-4 py-2",style:{WebkitAppRegion:"drag"},children:[f.jsxs("div",{className:"flex items-center gap-3",style:{WebkitAppRegion:"no-drag"},children:[S,f.jsxs("button",{onClick:w,className:"flex items-center gap-1.5 rounded px-2 py-1 text-xs font-medium text-foreground/80 transition-colors hover:bg-muted hover:text-foreground",title:_?"Save (Ctrl+S)":b,children:[_&&f.jsx("span",{className:"inline-block h-2 w-2 shrink-0 rounded-full",style:{backgroundColor:"oklch(0.75 0.18 60)"}}),f.jsx("span",{className:"max-w-[120px] truncate",children:b})]}),f.jsx("div",{className:"h-4 w-px bg-border/60"}),t==="daw"&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex items-center gap-0.5",children:[f.jsx(Te,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",disabled:!h,onClick:m,title:"Undo (Ctrl+Z)",children:f.jsx(Uv,{className:"h-3.5 w-3.5"})}),f.jsx(Te,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",disabled:!p,onClick:y,title:"Redo (Ctrl+Shift+Z)",children:f.jsx(Vv,{className:"h-3.5 w-3.5"})})]}),f.jsx("div",{className:"h-4 w-px bg-border/60"})]}),f.jsx(H7,{devices:e,activeDeviceId:n,onSelect:s}),f.jsx("div",{className:"h-4 w-px bg-border/60"}),f.jsx(sF,{chord:c})]}),f.jsxs("div",{className:"flex items-center gap-4",style:{WebkitAppRegion:"no-drag"},children:[f.jsx(q7,{activeNotes:i}),f.jsx("div",{className:"h-4 w-px bg-border/60"}),f.jsx(Te,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:v,title:x?"Unmute (M)":"Mute (M)",children:x?f.jsx(qv,{className:"h-3.5 w-3.5"}):f.jsx(Gv,{className:"h-3.5 w-3.5"})}),f.jsx("div",{className:"h-4 w-px bg-border/60"}),f.jsx(aF,{mode:u,onChange:d}),f.jsx("div",{className:"h-4 w-px bg-border/60"}),f.jsx(tF,{presetIndex:o,onChange:l}),f.jsx("div",{className:"h-4 w-px bg-border/60"}),f.jsx(eF,{volume:r,onChange:a}),f.jsx("div",{className:"h-4 w-px bg-border/60"}),f.jsx(Te,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:C,title:T?"Exit Fullscreen":"Fullscreen",children:T?f.jsx(bI,{className:"h-3.5 w-3.5"}):f.jsx(wA,{className:"h-3.5 w-3.5"})})]})]})}function cF({className:t,...e}){return f.jsx("div",{"data-slot":"card",className:ee("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...e})}const u2="15.1.22",P_=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),I_=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),Gg=(t,e)=>({startTime:e,type:"setValue",value:t}),d2=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),h2=(t,e,{startTime:n,target:s,timeConstant:i})=>s+(e-s)*Math.exp((n-t)/i),Ga=t=>t.type==="exponentialRampToValue",nh=t=>t.type==="linearRampToValue",ki=t=>Ga(t)||nh(t),_0=t=>t.type==="setValue",Ws=t=>t.type==="setValueCurve",sh=(t,e,n,s)=>{const i=t[e];return i===void 0?s:ki(i)||_0(i)?i.value:Ws(i)?i.values[i.values.length-1]:h2(n,sh(t,e-1,i.startTime,s),i)},B_=(t,e,n,s,i)=>n===void 0?[s.insertTime,i]:ki(n)?[n.endTime,n.value]:_0(n)?[n.startTime,n.value]:Ws(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,sh(t,e-1,n.startTime,i)],qg=t=>t.type==="cancelAndHold",Wg=t=>t.type==="cancelScheduledValues",wi=t=>qg(t)||Wg(t)?t.cancelTime:Ga(t)||nh(t)?t.endTime:t.startTime,L_=(t,e,n,{endTime:s,value:i})=>n===i?i:0<n&&0<i||n<0&&i<0?n*(i/n)**((t-e)/(s-e)):0,V_=(t,e,n,{endTime:s,value:i})=>n+(t-e)/(s-e)*(i-n),uF=(t,e)=>{const n=Math.floor(e),s=Math.ceil(e);return n===s?t[n]:(1-(e-n))*t[n]+(1-(s-e))*t[s]},dF=(t,{duration:e,startTime:n,values:s})=>{const i=(t-n)/e*(s.length-1);return uF(s,i)},Au=t=>t.type==="setTarget";class hF{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=wi(e);if(qg(e)||Wg(e)){const s=this._automationEvents.findIndex(r=>Wg(e)&&Ws(r)?r.startTime+r.duration>=n:wi(r)>=n),i=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),qg(e)){const r=this._automationEvents[this._automationEvents.length-1];if(i!==void 0&&ki(i)){if(r!==void 0&&Au(r))throw new Error("The internal list is malformed.");const a=r===void 0?i.insertTime:Ws(r)?r.startTime+r.duration:wi(r),o=r===void 0?this._defaultValue:Ws(r)?r.values[r.values.length-1]:r.value,l=Ga(i)?L_(n,a,o,i):V_(n,a,o,i),c=Ga(i)?P_(l,n,this._currenTime):I_(l,n,this._currenTime);this._automationEvents.push(c)}if(r!==void 0&&Au(r)&&this._automationEvents.push(Gg(this.getValue(n),n)),r!==void 0&&Ws(r)&&r.startTime+r.duration>n){const a=n-r.startTime,o=(r.values.length-1)/r.duration,l=Math.max(2,1+Math.ceil(a*o)),c=a/(l-1)*o,u=r.values.slice(0,l);if(c<1)for(let d=1;d<l;d+=1){const h=c*d%1;u[d]=r.values[d-1]*(1-h)+r.values[d]*h}this._automationEvents[this._automationEvents.length-1]=d2(u,r.startTime,a)}}}else{const s=this._automationEvents.findIndex(a=>wi(a)>n),i=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(i!==void 0&&Ws(i)&&wi(i)+i.duration>n)return!1;const r=Ga(e)?P_(e.value,e.endTime,this._currenTime):nh(e)?I_(e.value,n,this._currenTime):e;if(s===-1)this._automationEvents.push(r);else{if(Ws(e)&&n+e.duration>wi(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,r)}}return!0}flush(e){const n=this._automationEvents.findIndex(s=>wi(s)>e);if(n>1){const s=this._automationEvents.slice(n-1),i=s[0];Au(i)&&s.unshift(Gg(sh(this._automationEvents,n-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=s}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(a=>wi(a)>e),s=this._automationEvents[n],i=(n===-1?this._automationEvents.length:n)-1,r=this._automationEvents[i];if(r!==void 0&&Au(r)&&(s===void 0||!ki(s)||s.insertTime>e))return h2(e,sh(this._automationEvents,i-1,r.startTime,this._defaultValue),r);if(r!==void 0&&_0(r)&&(s===void 0||!ki(s)))return r.value;if(r!==void 0&&Ws(r)&&(s===void 0||!ki(s)||r.startTime+r.duration>e))return e<r.startTime+r.duration?dF(e,r):r.values[r.values.length-1];if(r!==void 0&&ki(r)&&(s===void 0||!ki(s)))return r.value;if(s!==void 0&&Ga(s)){const[a,o]=B_(this._automationEvents,i,r,s,this._defaultValue);return L_(e,a,o,s)}if(s!==void 0&&nh(s)){const[a,o]=B_(this._automationEvents,i,r,s,this._defaultValue);return V_(e,a,o,s)}return this._defaultValue}}const fF=t=>({cancelTime:t,type:"cancelAndHold"}),pF=t=>({cancelTime:t,type:"cancelScheduledValues"}),mF=(t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}),gF=(t,e)=>({endTime:e,type:"linearRampToValue",value:t}),yF=(t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"}),vF=()=>new DOMException("","AbortError"),bF=t=>(e,n,[s,i,r],a)=>{t(e[i],[n,s,r],o=>o[0]===n&&o[1]===s,a)},xF=t=>(e,n,s)=>{const i=[];for(let r=0;r<s.numberOfInputs;r+=1)i.push(new Set);t.set(e,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},_F=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},_o=new WeakSet,f2=new WeakMap,w0=new WeakMap,p2=new WeakMap,S0=new WeakMap,ff=new WeakMap,m2=new WeakMap,$g=new WeakMap,Yg=new WeakMap,Kg=new WeakMap,g2={construct(){return g2}},wF=t=>{try{const e=new Proxy(t,g2);new e}catch{return!1}return!0},z_=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,F_=(t,e)=>{const n=[];let s=t.replace(/^[\s]+/,""),i=s.match(z_);for(;i!==null;){const r=i[1].slice(1,-1),a=i[0].replace(/([\s]+)?;?$/,"").replace(r,new URL(r,e).toString());n.push(a),s=s.slice(i[0].length).replace(/^[\s]+/,""),i=s.match(z_)}return[n.join(";"),s]},H_=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},U_=t=>{if(!wF(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},SF=(t,e,n,s,i,r,a,o,l,c,u,d,h)=>{let p=0;return(m,y,x={credentials:"omit"})=>{const v=u.get(m);if(v!==void 0&&v.has(y))return Promise.resolve();const b=c.get(m);if(b!==void 0){const S=b.get(y);if(S!==void 0)return S}const _=r(m),w=_.audioWorklet===void 0?i(y).then(([S,T])=>{const[E,C]=F_(S,T),M=`${E};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${C}
})})(window,'_AWGS')`;return n(M)}).then(()=>{const S=h._AWGS.pop();if(S===void 0)throw new SyntaxError;s(_.currentTime,_.sampleRate,()=>S(class{},void 0,(T,E)=>{if(T.trim()==="")throw e();const C=Yg.get(_);if(C!==void 0){if(C.has(T))throw e();U_(E),H_(E.parameterDescriptors),C.set(T,E)}else U_(E),H_(E.parameterDescriptors),Yg.set(_,new Map([[T,E]]))},_.sampleRate,void 0,void 0))}):Promise.all([i(y),Promise.resolve(t(d,d))]).then(([[S,T],E])=>{const C=p+1;p=C;const[M,A]=F_(S,T),j=`${M};((AudioWorkletProcessor,registerProcessor)=>{${A}
})(${E?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${E?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${E?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${C}',class extends AudioWorkletProcessor{process(){return !1}})`,I=new Blob([j],{type:"application/javascript; charset=utf-8"}),D=URL.createObjectURL(I);return _.audioWorklet.addModule(D,x).then(()=>{if(o(_))return _;const O=a(_);return O.audioWorklet.addModule(D,x).then(()=>O)}).then(O=>{if(l===null)throw new SyntaxError;try{new l(O,`__sac${C}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(D))});return b===void 0?c.set(m,new Map([[y,w]])):b.set(y,w),w.then(()=>{const S=u.get(m);S===void 0?u.set(m,new Set([y])):S.add(y)}).finally(()=>{const S=c.get(m);S!==void 0&&S.delete(y)}),w}},as=(t,e)=>{const n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},pf=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[s]=n;return t.delete(s),s},y2=(t,e,n,s)=>{const i=as(t,e),r=pf(i,a=>a[0]===n&&a[1]===s);return i.size===0&&t.delete(e),r},Pc=t=>as(m2,t),wo=t=>{if(_o.has(t))throw new Error("The AudioNode is already stored.");_o.add(t),Pc(t).forEach(e=>e(!0))},v2=t=>"port"in t,Ic=t=>{if(!_o.has(t))throw new Error("The AudioNode is not stored.");_o.delete(t),Pc(t).forEach(e=>e(!1))},Xg=(t,e)=>{!v2(t)&&e.every(n=>n.size===0)&&Ic(t)},CF=(t,e,n,s,i,r,a,o,l,c,u,d,h)=>{const p=new WeakMap;return(m,y,x,v,b)=>{const{activeInputs:_,passiveInputs:w}=r(y),{outputs:S}=r(m),T=o(m),E=C=>{const M=l(y),A=l(m);if(C){const k=y2(w,m,x,v);t(_,m,k,!1),!b&&!d(m)&&n(A,M,x,v),h(y)&&wo(y)}else{const k=s(_,m,x,v);e(w,v,k,!1),!b&&!d(m)&&i(A,M,x,v);const N=a(y);if(N===0)u(y)&&Xg(y,_);else{const P=p.get(y);P!==void 0&&clearTimeout(P),p.set(y,setTimeout(()=>{u(y)&&Xg(y,_)},N*1e3))}}};return c(S,[y,x,v],C=>C[0]===y&&C[1]===x&&C[2]===v,!0)?(T.add(E),u(m)?t(_,m,[x,v,E],!0):e(w,v,[m,x,E],!0),!0):!1}},TF=t=>(e,n,[s,i,r],a)=>{const o=e.get(s);o===void 0?e.set(s,new Set([[i,n,r]])):t(o,[i,n,r],l=>l[0]===i&&l[1]===n,a)},EF=t=>(e,n)=>{const s=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(s).connect(e.destination);const i=()=>{n.removeEventListener("ended",i),n.disconnect(s),s.disconnect()};n.addEventListener("ended",i)},AF=t=>(e,n)=>{t(e).add(n)},kF={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},NF=(t,e,n,s,i,r)=>class extends t{constructor(o,l){const c=i(o),u={...kF,...l},d=s(c,u),h=r(c)?e():null;super(o,!1,d,h),this._nativeAnalyserNode=d}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(o){this._nativeAnalyserNode.fftSize=o}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(o){const l=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=o,!(o>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=l,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(o){const l=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=o,!(this._nativeAnalyserNode.maxDecibels>o))throw this._nativeAnalyserNode.minDecibels=l,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(o){this._nativeAnalyserNode.smoothingTimeConstant=o}getByteFrequencyData(o){this._nativeAnalyserNode.getByteFrequencyData(o)}getByteTimeDomainData(o){this._nativeAnalyserNode.getByteTimeDomainData(o)}getFloatFrequencyData(o){this._nativeAnalyserNode.getFloatFrequencyData(o)}getFloatTimeDomainData(o){this._nativeAnalyserNode.getFloatTimeDomainData(o)}},Gt=(t,e)=>t.context===e,MF=(t,e,n)=>()=>{const s=new WeakMap,i=async(r,a)=>{let o=e(r);if(!Gt(o,a)){const c={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,fftSize:o.fftSize,maxDecibels:o.maxDecibels,minDecibels:o.minDecibels,smoothingTimeConstant:o.smoothingTimeConstant};o=t(a,c)}return s.set(a,o),await n(r,a,o),o};return{render(r,a){const o=s.get(a);return o!==void 0?Promise.resolve(o):i(r,a)}}},ih=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Ps=()=>new DOMException("","IndexSizeError"),C0=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(s){throw s.code===12?Ps():s}})(t.getChannelData)},RF={numberOfChannels:1},DF=(t,e,n,s,i,r,a,o)=>{let l=null;return class b2{constructor(u){if(i===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:d,numberOfChannels:h,sampleRate:p}={...RF,...u};l===null&&(l=new i(1,1,44100));const m=s!==null&&e(r,r)?new s({length:d,numberOfChannels:h,sampleRate:p}):l.createBuffer(h,d,p);if(m.numberOfChannels===0)throw n();return typeof m.copyFromChannel!="function"?(a(m),C0(m)):e(ih,()=>ih(m))||o(m),t.add(m),m}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===b2.prototype||t.has(u)}}},ln=-34028234663852886e22,Wt=-ln,ti=t=>_o.has(t),OF={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},jF=(t,e,n,s,i,r,a,o)=>class extends t{constructor(c,u){const d=r(c),h={...OF,...u},p=i(d,h),m=a(d),y=m?e():null;super(c,!1,p,y),this._audioBufferSourceNodeRenderer=y,this._isBufferNullified=!1,this._isBufferSet=h.buffer!==null,this._nativeAudioBufferSourceNode=p,this._onended=null,this._playbackRate=n(this,m,p.playbackRate,Wt,ln)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(c){if(this._nativeAudioBufferSourceNode.buffer=c,c!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(c){this._nativeAudioBufferSourceNode.loop=c}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(c){this._nativeAudioBufferSourceNode.loopEnd=c}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(c){this._nativeAudioBufferSourceNode.loopStart=c}get onended(){return this._onended}set onended(c){const u=typeof c=="function"?o(this,c):null;this._nativeAudioBufferSourceNode.onended=u;const d=this._nativeAudioBufferSourceNode.onended;this._onended=d!==null&&d===u?c:d}get playbackRate(){return this._playbackRate}start(c=0,u=0,d){if(this._nativeAudioBufferSourceNode.start(c,u,d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=d===void 0?[c,u]:[c,u,d]),this.context.state!=="closed"){wo(this);const h=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",h),ti(this)&&Ic(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",h)}}stop(c=0){this._nativeAudioBufferSourceNode.stop(c),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=c)}},PF=(t,e,n,s,i)=>()=>{const r=new WeakMap;let a=null,o=null;const l=async(c,u)=>{let d=n(c);const h=Gt(d,u);if(!h){const p={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,loop:d.loop,loopEnd:d.loopEnd,loopStart:d.loopStart,playbackRate:d.playbackRate.value};d=e(u,p),a!==null&&d.start(...a),o!==null&&d.stop(o)}return r.set(u,d),h?await t(u,c.playbackRate,d.playbackRate):await s(u,c.playbackRate,d.playbackRate),await i(c,u,d),d};return{set start(c){a=c},set stop(c){o=c},render(c,u){const d=r.get(u);return d!==void 0?Promise.resolve(d):l(c,u)}}},IF=t=>"playbackRate"in t,BF=t=>"frequency"in t&&"gain"in t,LF=t=>"offset"in t,VF=t=>!("frequency"in t)&&"gain"in t,zF=t=>"detune"in t&&"frequency"in t&&!("gain"in t),FF=t=>"pan"in t,Xt=t=>as(f2,t),Bc=t=>as(p2,t),Qg=(t,e)=>{const{activeInputs:n}=Xt(t);n.forEach(i=>i.forEach(([r])=>{e.includes(t)||Qg(r,[...e,t])}));const s=IF(t)?[t.playbackRate]:v2(t)?Array.from(t.parameters.values()):BF(t)?[t.Q,t.detune,t.frequency,t.gain]:LF(t)?[t.offset]:VF(t)?[t.gain]:zF(t)?[t.detune,t.frequency]:FF(t)?[t.pan]:[];for(const i of s){const r=Bc(i);r!==void 0&&r.activeInputs.forEach(([a])=>Qg(a,e))}ti(t)&&Ic(t)},x2=t=>{Qg(t.destination,[])},HF=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback"),UF=(t,e,n,s,i,r,a,o,l)=>class extends t{constructor(u={}){if(l===null)throw new Error("Missing the native AudioContext constructor.");let d;try{d=new l(u)}catch(m){throw m.code===12&&m.message==="sampleRate is not in range"?n():m}if(d===null)throw s();if(!HF(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&d.sampleRate!==u.sampleRate)throw n();super(d,2);const{latencyHint:h}=u,{sampleRate:p}=d;if(this._baseLatency=typeof d.baseLatency=="number"?d.baseLatency:h==="balanced"?512/p:h==="interactive"||h===void 0?256/p:h==="playback"?1024/p:Math.max(2,Math.min(128,Math.round(h*p/128)))*128/p,this._nativeAudioContext=d,l.name==="webkitAudioContext"?(this._nativeGainNode=d.createGain(),this._nativeOscillatorNode=d.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(d.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,d.state==="running"){this._state="suspended";const m=()=>{this._state==="suspended"&&(this._state=null),d.removeEventListener("statechange",m)};d.addEventListener("statechange",m)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),x2(this)}))}createMediaElementSource(u){return new i(this,{mediaElement:u})}createMediaStreamDestination(){return new r(this)}createMediaStreamSource(u){return new a(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new o(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,d)=>{const h=()=>{this._nativeAudioContext.removeEventListener("statechange",h),this._nativeAudioContext.state==="running"?u():this.resume().then(u,d)};this._nativeAudioContext.addEventListener("statechange",h)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},GF=(t,e,n,s,i,r,a,o)=>class extends t{constructor(c,u){const d=r(c),h=a(d),p=i(d,u,h),m=h?e(o):null;super(c,!1,p,m),this._isNodeOfNativeOfflineAudioContext=h,this._nativeAudioDestinationNode=p}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(c){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(c>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=c}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(c){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=c}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},qF=t=>{const e=new WeakMap,n=async(s,i)=>{const r=i.destination;return e.set(i,r),await t(s,i,r),r};return{render(s,i){const r=e.get(i);return r!==void 0?Promise.resolve(r):n(s,i)}}},WF=(t,e,n,s,i,r,a,o)=>(l,c)=>{const u=c.listener,d=()=>{const S=new Float32Array(1),T=e(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),E=a(c);let C=!1,M=[0,0,-1,0,1,0],A=[0,0,0];const k=()=>{if(C)return;C=!0;const I=s(c,256,9,0);I.onaudioprocess=({inputBuffer:D})=>{const O=[r(D,S,0),r(D,S,1),r(D,S,2),r(D,S,3),r(D,S,4),r(D,S,5)];O.some((B,F)=>B!==M[F])&&(u.setOrientation(...O),M=O);const R=[r(D,S,6),r(D,S,7),r(D,S,8)];R.some((B,F)=>B!==A[F])&&(u.setPosition(...R),A=R)},T.connect(I)},N=I=>D=>{D!==M[I]&&(M[I]=D,u.setOrientation(...M))},P=I=>D=>{D!==A[I]&&(A[I]=D,u.setPosition(...A))},j=(I,D,O)=>{const R=n(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:D});R.connect(T,0,I),R.start(),Object.defineProperty(R.offset,"defaultValue",{get(){return D}});const B=t({context:l},E,R.offset,Wt,ln);return o(B,"value",F=>()=>F.call(B),F=>Z=>{try{F.call(B,Z)}catch(V){if(V.code!==9)throw V}k(),E&&O(Z)}),B.cancelAndHoldAtTime=(F=>E?()=>{throw i()}:(...Z)=>{const V=F.apply(B,Z);return k(),V})(B.cancelAndHoldAtTime),B.cancelScheduledValues=(F=>E?()=>{throw i()}:(...Z)=>{const V=F.apply(B,Z);return k(),V})(B.cancelScheduledValues),B.exponentialRampToValueAtTime=(F=>E?()=>{throw i()}:(...Z)=>{const V=F.apply(B,Z);return k(),V})(B.exponentialRampToValueAtTime),B.linearRampToValueAtTime=(F=>E?()=>{throw i()}:(...Z)=>{const V=F.apply(B,Z);return k(),V})(B.linearRampToValueAtTime),B.setTargetAtTime=(F=>E?()=>{throw i()}:(...Z)=>{const V=F.apply(B,Z);return k(),V})(B.setTargetAtTime),B.setValueAtTime=(F=>E?()=>{throw i()}:(...Z)=>{const V=F.apply(B,Z);return k(),V})(B.setValueAtTime),B.setValueCurveAtTime=(F=>E?()=>{throw i()}:(...Z)=>{const V=F.apply(B,Z);return k(),V})(B.setValueCurveAtTime),B};return{forwardX:j(0,0,N(0)),forwardY:j(1,0,N(1)),forwardZ:j(2,-1,N(2)),positionX:j(6,0,P(0)),positionY:j(7,0,P(1)),positionZ:j(8,0,P(2)),upX:j(3,0,N(3)),upY:j(4,1,N(4)),upZ:j(5,0,N(5))}},{forwardX:h,forwardY:p,forwardZ:m,positionX:y,positionY:x,positionZ:v,upX:b,upY:_,upZ:w}=u.forwardX===void 0?d():u;return{get forwardX(){return h},get forwardY(){return p},get forwardZ(){return m},get positionX(){return y},get positionY(){return x},get positionZ(){return v},get upX(){return b},get upY(){return _},get upZ(){return w}}},rh=t=>"context"in t,Lc=t=>rh(t[0]),la=(t,e,n,s)=>{for(const i of t)if(n(i)){if(s)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},G_=(t,e,[n,s],i)=>{la(t,[e,n,s],r=>r[0]===e&&r[1]===n,i)},q_=(t,[e,n,s],i)=>{const r=t.get(e);r===void 0?t.set(e,new Set([[n,s]])):la(r,[n,s],a=>a[0]===n,i)},$o=t=>"inputs"in t,ah=(t,e,n,s)=>{if($o(e)){const i=e.inputs[s];return t.connect(i,n,0),[i,n,0]}return t.connect(e,n,s),[e,n,s]},_2=(t,e,n)=>{for(const s of t)if(s[0]===e&&s[1]===n)return t.delete(s),s;return null},$F=(t,e,n)=>pf(t,s=>s[0]===e&&s[1]===n),w2=(t,e)=>{if(!Pc(t).delete(e))throw new Error("Missing the expected event listener.")},S2=(t,e,n)=>{const s=as(t,e),i=pf(s,r=>r[0]===n);return s.size===0&&t.delete(e),i},oh=(t,e,n,s)=>{$o(e)?t.disconnect(e.inputs[s],n,0):t.disconnect(e,n,s)},Je=t=>as(w0,t),lc=t=>as(S0,t),Jr=t=>$g.has(t),ad=t=>!_o.has(t),W_=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{const s=t.createScriptProcessor(256,1,1),i=t.createGain(),r=t.createBuffer(1,2,44100),a=r.getChannelData(0);a[0]=1,a[1]=1;const o=t.createBufferSource();o.buffer=r,o.loop=!0,o.connect(s).connect(t.destination),o.connect(i),o.disconnect(i),s.onaudioprocess=l=>{const c=l.inputBuffer.getChannelData(0);Array.prototype.some.call(c,u=>u===1)?n(!0):n(!1),o.stop(),s.onaudioprocess=null,o.disconnect(s),s.disconnect(t.destination)},o.start()}}),Qp=(t,e)=>{const n=new Map;for(const s of t)for(const i of s){const r=n.get(i);n.set(i,r===void 0?1:r+1)}n.forEach((s,i)=>e(i,s))},lh=t=>"context"in t,YF=t=>{const e=new Map;t.connect=(n=>(s,i=0,r=0)=>{const a=lh(s)?n(s,i,r):n(s,i),o=e.get(s);return o===void 0?e.set(s,[{input:r,output:i}]):o.every(l=>l.input!==r||l.output!==i)&&o.push({input:r,output:i}),a})(t.connect.bind(t)),t.disconnect=(n=>(s,i,r)=>{if(n.apply(t),s===void 0)e.clear();else if(typeof s=="number")for(const[a,o]of e){const l=o.filter(c=>c.output!==s);l.length===0?e.delete(a):e.set(a,l)}else if(e.has(s))if(i===void 0)e.delete(s);else{const a=e.get(s);if(a!==void 0){const o=a.filter(l=>l.output!==i&&(l.input!==r||r===void 0));o.length===0?e.delete(s):e.set(s,o)}}for(const[a,o]of e)o.forEach(l=>{lh(a)?t.connect(a,l.output,l.input):t.connect(a,l.output)})})(t.disconnect)},KF=(t,e,n,s)=>{const{activeInputs:i,passiveInputs:r}=Bc(e),{outputs:a}=Xt(t),o=Pc(t),l=c=>{const u=Je(t),d=lc(e);if(c){const h=S2(r,t,n);G_(i,t,h,!1),!s&&!Jr(t)&&u.connect(d,n)}else{const h=$F(i,t,n);q_(r,h,!1),!s&&!Jr(t)&&u.disconnect(d,n)}};return la(a,[e,n],c=>c[0]===e&&c[1]===n,!0)?(o.add(l),ti(t)?G_(i,t,[n,l],!0):q_(r,[t,n,l],!0),!0):!1},XF=(t,e,n,s)=>{const{activeInputs:i,passiveInputs:r}=Xt(e),a=_2(i[s],t,n);return a===null?[y2(r,t,n,s)[2],!1]:[a[2],!0]},QF=(t,e,n)=>{const{activeInputs:s,passiveInputs:i}=Bc(e),r=_2(s,t,n);return r===null?[S2(i,t,n)[1],!1]:[r[2],!0]},T0=(t,e,n,s,i)=>{const[r,a]=XF(t,n,s,i);if(r!==null&&(w2(t,r),a&&!e&&!Jr(t)&&oh(Je(t),Je(n),s,i)),ti(n)){const{activeInputs:o}=Xt(n);Xg(n,o)}},E0=(t,e,n,s)=>{const[i,r]=QF(t,n,s);i!==null&&(w2(t,i),r&&!e&&!Jr(t)&&Je(t).disconnect(lc(n),s))},ZF=(t,e)=>{const n=Xt(t),s=[];for(const i of n.outputs)Lc(i)?T0(t,e,...i):E0(t,e,...i),s.push(i[0]);return n.outputs.clear(),s},JF=(t,e,n)=>{const s=Xt(t),i=[];for(const r of s.outputs)r[1]===n&&(Lc(r)?T0(t,e,...r):E0(t,e,...r),i.push(r[0]),s.outputs.delete(r));return i},eH=(t,e,n,s,i)=>{const r=Xt(t);return Array.from(r.outputs).filter(a=>a[0]===n&&(s===void 0||a[1]===s)&&(i===void 0||a[2]===i)).map(a=>(Lc(a)?T0(t,e,...a):E0(t,e,...a),r.outputs.delete(a),a[0]))},tH=(t,e,n,s,i,r,a,o,l,c,u,d,h,p,m,y)=>class extends c{constructor(v,b,_,w){super(_),this._context=v,this._nativeAudioNode=_;const S=u(v);d(S)&&n(W_,()=>W_(S,y))!==!0&&YF(_),w0.set(this,_),m2.set(this,new Set),v.state!=="closed"&&b&&wo(this),t(this,w,_)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(v){this._nativeAudioNode.channelCount=v}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(v){this._nativeAudioNode.channelCountMode=v}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(v){this._nativeAudioNode.channelInterpretation=v}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(v,b=0,_=0){if(b<0||b>=this._nativeAudioNode.numberOfOutputs)throw i();const w=u(this._context),S=m(w);if(h(v)||p(v))throw r();if(rh(v)){const C=Je(v);try{const A=ah(this._nativeAudioNode,C,b,_),k=ad(this);(S||k)&&this._nativeAudioNode.disconnect(...A),this.context.state!=="closed"&&!k&&ad(v)&&wo(v)}catch(A){throw A.code===12?r():A}if(e(this,v,b,_,S)){const A=l([this],v);Qp(A,s(S))}return v}const T=lc(v);if(T.name==="playbackRate"&&T.maxValue===1024)throw a();try{this._nativeAudioNode.connect(T,b),(S||ad(this))&&this._nativeAudioNode.disconnect(T,b)}catch(C){throw C.code===12?r():C}if(KF(this,v,b,S)){const C=l([this],v);Qp(C,s(S))}}disconnect(v,b,_){let w;const S=u(this._context),T=m(S);if(v===void 0)w=ZF(this,T);else if(typeof v=="number"){if(v<0||v>=this.numberOfOutputs)throw i();w=JF(this,T,v)}else{if(b!==void 0&&(b<0||b>=this.numberOfOutputs)||rh(v)&&_!==void 0&&(_<0||_>=v.numberOfInputs))throw i();if(w=eH(this,T,v,b,_),w.length===0)throw r()}for(const E of w){const C=l([this],E);Qp(C,o)}}},nH=(t,e,n,s,i,r,a,o,l,c,u,d,h)=>(p,m,y,x=null,v=null)=>{const b=y.value,_=new hF(b),w=m?s(_):null,S={get defaultValue(){return b},get maxValue(){return x===null?y.maxValue:x},get minValue(){return v===null?y.minValue:v},get value(){return y.value},set value(T){y.value=T,S.setValueAtTime(T,p.context.currentTime)},cancelAndHoldAtTime(T){if(typeof y.cancelAndHoldAtTime=="function")w===null&&_.flush(p.context.currentTime),_.add(i(T)),y.cancelAndHoldAtTime(T);else{const E=Array.from(_).pop();w===null&&_.flush(p.context.currentTime),_.add(i(T));const C=Array.from(_).pop();y.cancelScheduledValues(T),E!==C&&C!==void 0&&(C.type==="exponentialRampToValue"?y.exponentialRampToValueAtTime(C.value,C.endTime):C.type==="linearRampToValue"?y.linearRampToValueAtTime(C.value,C.endTime):C.type==="setValue"?y.setValueAtTime(C.value,C.startTime):C.type==="setValueCurve"&&y.setValueCurveAtTime(C.values,C.startTime,C.duration))}return S},cancelScheduledValues(T){return w===null&&_.flush(p.context.currentTime),_.add(r(T)),y.cancelScheduledValues(T),S},exponentialRampToValueAtTime(T,E){if(T===0)throw new RangeError;if(!Number.isFinite(E)||E<0)throw new RangeError;const C=p.context.currentTime;return w===null&&_.flush(C),Array.from(_).length===0&&(_.add(c(b,C)),y.setValueAtTime(b,C)),_.add(a(T,E)),y.exponentialRampToValueAtTime(T,E),S},linearRampToValueAtTime(T,E){const C=p.context.currentTime;return w===null&&_.flush(C),Array.from(_).length===0&&(_.add(c(b,C)),y.setValueAtTime(b,C)),_.add(o(T,E)),y.linearRampToValueAtTime(T,E),S},setTargetAtTime(T,E,C){return w===null&&_.flush(p.context.currentTime),_.add(l(T,E,C)),y.setTargetAtTime(T,E,C),S},setValueAtTime(T,E){return w===null&&_.flush(p.context.currentTime),_.add(c(T,E)),y.setValueAtTime(T,E),S},setValueCurveAtTime(T,E,C){const M=T instanceof Float32Array?T:new Float32Array(T);if(d!==null&&d.name==="webkitAudioContext"){const A=E+C,k=p.context.sampleRate,N=Math.ceil(E*k),P=Math.floor(A*k),j=P-N,I=new Float32Array(j);for(let O=0;O<j;O+=1){const R=(M.length-1)/C*((N+O)/k-E),B=Math.floor(R),F=Math.ceil(R);I[O]=B===F?M[B]:(1-(R-B))*M[B]+(1-(F-R))*M[F]}w===null&&_.flush(p.context.currentTime),_.add(u(I,E,C)),y.setValueCurveAtTime(I,E,C);const D=P/k;D<A&&h(S,I[I.length-1],D),h(S,M[M.length-1],A)}else w===null&&_.flush(p.context.currentTime),_.add(u(M,E,C)),y.setValueCurveAtTime(M,E,C);return S}};return n.set(S,y),e.set(S,p),t(S,w),S},sH=t=>({replay(e){for(const n of t)if(n.type==="exponentialRampToValue"){const{endTime:s,value:i}=n;e.exponentialRampToValueAtTime(i,s)}else if(n.type==="linearRampToValue"){const{endTime:s,value:i}=n;e.linearRampToValueAtTime(i,s)}else if(n.type==="setTarget"){const{startTime:s,target:i,timeConstant:r}=n;e.setTargetAtTime(i,s,r)}else if(n.type==="setValue"){const{startTime:s,value:i}=n;e.setValueAtTime(i,s)}else if(n.type==="setValueCurve"){const{duration:s,startTime:i,values:r}=n;e.setValueCurveAtTime(r,i,s)}else throw new Error("Can't apply an unknown automation.")}});class C2{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((s,i)=>e.call(n,s,i,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const iH={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},rH=(t,e,n,s,i,r,a,o,l,c,u,d,h,p)=>class extends e{constructor(y,x,v){var b;const _=o(y),w=l(_),S=u({...iH,...v});h(S);const T=Yg.get(_),E=T==null?void 0:T.get(x),C=w||_.state!=="closed"?_:(b=a(_))!==null&&b!==void 0?b:_,M=i(C,w?null:y.baseLatency,c,x,E,S),A=w?s(x,S,E):null;super(y,!0,M,A);const k=[];M.parameters.forEach((P,j)=>{const I=n(this,w,P);k.push([j,I])}),this._nativeAudioWorkletNode=M,this._onprocessorerror=null,this._parameters=new C2(k),w&&t(_,this);const{activeInputs:N}=r(this);d(M,N)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(y){const x=typeof y=="function"?p(this,y):null;this._nativeAudioWorkletNode.onprocessorerror=x;const v=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=v!==null&&v===x?y:v}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function ch(t,e,n,s,i){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],s,i);else{const r=t.getChannelData(s);if(e[n].byteLength===0)e[n]=r.slice(i,i+128);else{const a=new Float32Array(r.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(a)}}}const T2=(t,e,n,s,i)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],s,i):e[n].byteLength!==0&&t.getChannelData(s).set(e[n],i)},uh=(t,e)=>{const n=[];for(let s=0;s<t;s+=1){const i=[],r=typeof e=="number"?e:e[s];for(let a=0;a<r;a+=1)i.push(new Float32Array(128));n.push(i)}return n},aH=(t,e)=>{const n=as(Kg,t),s=Je(e);return as(n,s)},oH=async(t,e,n,s,i,r,a)=>{const o=e===null?Math.ceil(t.context.length/128)*128:e.length,l=s.channelCount*s.numberOfInputs,c=i.reduce((x,v)=>x+v,0),u=c===0?null:n.createBuffer(c,o,n.sampleRate);if(r===void 0)throw new Error("Missing the processor constructor.");const d=Xt(t),h=await aH(n,t),p=uh(s.numberOfInputs,s.channelCount),m=uh(s.numberOfOutputs,i),y=Array.from(t.parameters.keys()).reduce((x,v)=>({...x,[v]:new Float32Array(128)}),{});for(let x=0;x<o;x+=128){if(s.numberOfInputs>0&&e!==null)for(let v=0;v<s.numberOfInputs;v+=1)for(let b=0;b<s.channelCount;b+=1)ch(e,p[v],b,b,x);r.parameterDescriptors!==void 0&&e!==null&&r.parameterDescriptors.forEach(({name:v},b)=>{ch(e,y,v,l+b,x)});for(let v=0;v<s.numberOfInputs;v+=1)for(let b=0;b<i[v];b+=1)m[v][b].byteLength===0&&(m[v][b]=new Float32Array(128));try{const v=p.map((_,w)=>d.activeInputs[w].size===0?[]:_),b=a(x/n.sampleRate,n.sampleRate,()=>h.process(v,m,y));if(u!==null)for(let _=0,w=0;_<s.numberOfOutputs;_+=1){for(let S=0;S<i[_];S+=1)T2(u,m[_],S,w+S,x);w+=i[_]}if(!b)break}catch(v){t.dispatchEvent(new ErrorEvent("processorerror",{colno:v.colno,filename:v.filename,lineno:v.lineno,message:v.message}));break}}return u},lH=(t,e,n,s,i,r,a,o,l,c,u,d,h,p,m,y)=>(x,v,b)=>{const _=new WeakMap;let w=null;const S=async(T,E)=>{let C=u(T),M=null;const A=Gt(C,E),k=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(d===null){const N=k.reduce((D,O)=>D+O,0),P=i(E,{channelCount:Math.max(1,N),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,N)}),j=[];for(let D=0;D<T.numberOfOutputs;D+=1)j.push(s(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:k[D]}));const I=a(E,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1});I.connect=e.bind(null,j),I.disconnect=l.bind(null,j),M=[P,j,I]}else A||(C=new d(E,x));if(_.set(E,M===null?C:M[2]),M!==null){if(w===null){if(b===void 0)throw new Error("Missing the processor constructor.");if(h===null)throw new Error("Missing the native OfflineAudioContext constructor.");const O=T.channelCount*T.numberOfInputs,R=b.parameterDescriptors===void 0?0:b.parameterDescriptors.length,B=O+R;w=oH(T,B===0?null:await(async()=>{const Z=new h(B,Math.ceil(T.context.length/128)*128,E.sampleRate),V=[],q=[];for(let Y=0;Y<v.numberOfInputs;Y+=1)V.push(a(Z,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),q.push(i(Z,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const $=await Promise.all(Array.from(T.parameters.values()).map(async Y=>{const L=r(Z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Y.value});return await p(Z,Y,L.offset),L})),H=s(Z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,O+R)});for(let Y=0;Y<v.numberOfInputs;Y+=1){V[Y].connect(q[Y]);for(let L=0;L<v.channelCount;L+=1)q[Y].connect(H,L,Y*v.channelCount+L)}for(const[Y,L]of $.entries())L.connect(H,0,O+Y),L.start(0);return H.connect(Z.destination),await Promise.all(V.map(Y=>m(T,Z,Y))),y(Z)})(),E,v,k,b,c)}const N=await w,P=n(E,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[j,I,D]=M;N!==null&&(P.buffer=N,P.start(0)),P.connect(j);for(let O=0,R=0;O<T.numberOfOutputs;O+=1){const B=I[O];for(let F=0;F<k[O];F+=1)j.connect(B,R+F,F);R+=k[O]}return D}if(A)for(const[N,P]of T.parameters.entries())await t(E,P,C.parameters.get(N));else for(const[N,P]of T.parameters.entries())await p(E,P,C.parameters.get(N));return await m(T,E,C),C};return{render(T,E){o(E,T);const C=_.get(E);return C!==void 0?Promise.resolve(C):S(T,E)}}},cH=(t,e,n,s,i,r,a,o,l,c,u,d,h,p,m,y,x,v,b,_)=>class extends m{constructor(S,T){super(S,T),this._nativeContext=S,this._audioWorklet=t===void 0?void 0:{addModule:(E,C)=>t(this,E,C)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new i(this)}createBuffer(S,T,E){return new n({length:T,numberOfChannels:S,sampleRate:E})}createBufferSource(){return new s(this)}createChannelMerger(S=6){return new r(this,{numberOfInputs:S})}createChannelSplitter(S=6){return new a(this,{numberOfOutputs:S})}createConstantSource(){return new o(this)}createConvolver(){return new l(this)}createDelay(S=1){return new u(this,{maxDelayTime:S})}createDynamicsCompressor(){return new d(this)}createGain(){return new h(this)}createIIRFilter(S,T){return new p(this,{feedback:T,feedforward:S})}createOscillator(){return new y(this)}createPanner(){return new x(this)}createPeriodicWave(S,T,E={disableNormalization:!1}){return new v(this,{...E,imag:T,real:S})}createStereoPanner(){return new b(this)}createWaveShaper(){return new _(this)}decodeAudioData(S,T,E){return c(this._nativeContext,S).then(C=>(typeof T=="function"&&T(C),C),C=>{throw typeof E=="function"&&E(C),C})}},uH={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},dH=(t,e,n,s,i,r,a,o)=>class extends t{constructor(c,u){const d=r(c),h={...uH,...u},p=i(d,h),m=a(d),y=m?n():null;super(c,!1,p,y),this._Q=e(this,m,p.Q,Wt,ln),this._detune=e(this,m,p.detune,1200*Math.log2(Wt),-1200*Math.log2(Wt)),this._frequency=e(this,m,p.frequency,c.sampleRate/2,0),this._gain=e(this,m,p.gain,40*Math.log10(Wt),ln),this._nativeBiquadFilterNode=p,o(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(c){this._nativeBiquadFilterNode.type=c}getFrequencyResponse(c,u,d){try{this._nativeBiquadFilterNode.getFrequencyResponse(c,u,d)}catch(h){throw h.code===11?s():h}if(c.length!==u.length||u.length!==d.length)throw s()}},hH=(t,e,n,s,i)=>()=>{const r=new WeakMap,a=async(o,l)=>{let c=n(o);const u=Gt(c,l);if(!u){const d={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type};c=e(l,d)}return r.set(l,c),u?(await t(l,o.Q,c.Q),await t(l,o.detune,c.detune),await t(l,o.frequency,c.frequency),await t(l,o.gain,c.gain)):(await s(l,o.Q,c.Q),await s(l,o.detune,c.detune),await s(l,o.frequency,c.frequency),await s(l,o.gain,c.gain)),await i(o,l,c),c};return{render(o,l){const c=r.get(l);return c!==void 0?Promise.resolve(c):a(o,l)}}},fH=(t,e)=>(n,s)=>{const i=e.get(n);if(i!==void 0)return i;const r=t.get(n);if(r!==void 0)return r;try{const a=s();return a instanceof Promise?(t.set(n,a),a.catch(()=>!1).then(o=>(t.delete(n),e.set(n,o),o))):(e.set(n,a),a)}catch{return e.set(n,!1),!1}},pH={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},mH=(t,e,n,s,i)=>class extends t{constructor(a,o){const l=s(a),c={...pH,...o},u=n(l,c),d=i(l)?e():null;super(a,!1,u,d)}},gH=(t,e,n)=>()=>{const s=new WeakMap,i=async(r,a)=>{let o=e(r);if(!Gt(o,a)){const c={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfInputs:o.numberOfInputs};o=t(a,c)}return s.set(a,o),await n(r,a,o),o};return{render(r,a){const o=s.get(a);return o!==void 0?Promise.resolve(o):i(r,a)}}},yH={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},vH=(t,e,n,s,i,r)=>class extends t{constructor(o,l){const c=s(o),u=r({...yH,...l}),d=n(c,u),h=i(c)?e():null;super(o,!1,d,h)}},bH=(t,e,n)=>()=>{const s=new WeakMap,i=async(r,a)=>{let o=e(r);if(!Gt(o,a)){const c={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfOutputs:o.numberOfOutputs};o=t(a,c)}return s.set(a,o),await n(r,a,o),o};return{render(r,a){const o=s.get(a);return o!==void 0?Promise.resolve(o):i(r,a)}}},xH=t=>(e,n,s)=>t(n,e,s),_H=t=>(e,n,s=0,i=0)=>{const r=e[s];if(r===void 0)throw t();return lh(n)?r.connect(n,0,i):r.connect(n,0)},wH=t=>(e,n)=>{const s=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=e.createBuffer(1,2,44100);return s.buffer=i,s.loop=!0,s.connect(n),s.start(),()=>{s.stop(),s.disconnect(n)}},SH={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},CH=(t,e,n,s,i,r,a)=>class extends t{constructor(l,c){const u=i(l),d={...SH,...c},h=s(u,d),p=r(u),m=p?n():null;super(l,!1,h,m),this._constantSourceNodeRenderer=m,this._nativeConstantSourceNode=h,this._offset=e(this,p,h.offset,Wt,ln),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(l){const c=typeof l=="function"?a(this,l):null;this._nativeConstantSourceNode.onended=c;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===c?l:u}start(l=0){if(this._nativeConstantSourceNode.start(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=l),this.context.state!=="closed"){wo(this);const c=()=>{this._nativeConstantSourceNode.removeEventListener("ended",c),ti(this)&&Ic(this)};this._nativeConstantSourceNode.addEventListener("ended",c)}}stop(l=0){this._nativeConstantSourceNode.stop(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=l)}},TH=(t,e,n,s,i)=>()=>{const r=new WeakMap;let a=null,o=null;const l=async(c,u)=>{let d=n(c);const h=Gt(d,u);if(!h){const p={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,offset:d.offset.value};d=e(u,p),a!==null&&d.start(a),o!==null&&d.stop(o)}return r.set(u,d),h?await t(u,c.offset,d.offset):await s(u,c.offset,d.offset),await i(c,u,d),d};return{set start(c){a=c},set stop(c){o=c},render(c,u){const d=r.get(u);return d!==void 0?Promise.resolve(d):l(c,u)}}},EH=t=>e=>(t[0]=e,t[0]),AH={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},kH=(t,e,n,s,i,r)=>class extends t{constructor(o,l){const c=s(o),u={...AH,...l},d=n(c,u),p=i(c)?e():null;super(o,!1,d,p),this._isBufferNullified=!1,this._nativeConvolverNode=d,u.buffer!==null&&r(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(o){if(this._nativeConvolverNode.buffer=o,o===null&&this._nativeConvolverNode.buffer!==null){const l=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=l.createBuffer(1,1,l.sampleRate),this._isBufferNullified=!0,r(this,0)}else this._isBufferNullified=!1,r(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(o){this._nativeConvolverNode.normalize=o}},NH=(t,e,n)=>()=>{const s=new WeakMap,i=async(r,a)=>{let o=e(r);if(!Gt(o,a)){const c={buffer:o.buffer,channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,disableNormalization:!o.normalize};o=t(a,c)}return s.set(a,o),$o(o)?await n(r,a,o.inputs[0]):await n(r,a,o),o};return{render(r,a){const o=s.get(a);return o!==void 0?Promise.resolve(o):i(r,a)}}},MH=(t,e)=>(n,s,i)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,s,i)}catch(r){throw r.name==="SyntaxError"?t():r}},RH=()=>new DOMException("","DataCloneError"),$_=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(s=>{const i=()=>{n.onmessage=null,e.close(),n.close(),s()};n.onmessage=()=>i();try{e.postMessage(t,[t])}catch{}finally{i()}})},DH=(t,e,n,s,i,r,a,o,l,c,u)=>(d,h)=>{const p=a(d)?d:r(d);if(i.has(h)){const m=n();return Promise.reject(m)}try{i.add(h)}catch{}return e(l,()=>l(p))?p.decodeAudioData(h).then(m=>($_(h).catch(()=>{}),e(o,()=>o(m))||u(m),t.add(m),m)):new Promise((m,y)=>{const x=async()=>{try{await $_(h)}catch{}},v=b=>{y(b),x()};try{p.decodeAudioData(h,b=>{typeof b.copyFromChannel!="function"&&(c(b),C0(b)),t.add(b),x().then(()=>m(b))},b=>{v(b===null?s():b)})}catch(b){v(b)}})},OH=(t,e,n,s,i,r,a,o)=>(l,c)=>{const u=e.get(l);if(u===void 0)throw new Error("Missing the expected cycle count.");const d=r(l.context),h=o(d);if(u===c){if(e.delete(l),!h&&a(l)){const p=s(l),{outputs:m}=n(l);for(const y of m)if(Lc(y)){const x=s(y[0]);t(p,x,y[1],y[2])}else{const x=i(y[0]);p.connect(x,y[1])}}}else e.set(l,u-c)},jH={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},PH=(t,e,n,s,i,r,a)=>class extends t{constructor(l,c){const u=i(l),d={...jH,...c},h=s(u,d),p=r(u),m=p?n(d.maxDelayTime):null;super(l,!1,h,m),this._delayTime=e(this,p,h.delayTime),a(this,d.maxDelayTime)}get delayTime(){return this._delayTime}},IH=(t,e,n,s,i)=>r=>{const a=new WeakMap,o=async(l,c)=>{let u=n(l);const d=Gt(u,c);if(!d){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:r};u=e(c,h)}return a.set(c,u),d?await t(c,l.delayTime,u.delayTime):await s(c,l.delayTime,u.delayTime),await i(l,c,u),u};return{render(l,c){const u=a.get(c);return u!==void 0?Promise.resolve(u):o(l,c)}}},BH=t=>(e,n,s,i)=>t(e[i],r=>r[0]===n&&r[1]===s),LH=t=>(e,n)=>{t(e).delete(n)},VH=t=>"delayTime"in t,zH=(t,e,n)=>function s(i,r){const a=rh(r)?r:n(t,r);if(VH(a))return[];if(i[0]===a)return[i];if(i.includes(a))return[];const{outputs:o}=e(a);return Array.from(o).map(l=>s([...i,a],l[0])).reduce((l,c)=>l.concat(c),[])},ku=(t,e,n)=>{const s=e[n];if(s===void 0)throw t();return s},FH=t=>(e,n=void 0,s=void 0,i=0)=>n===void 0?e.forEach(r=>r.disconnect()):typeof n=="number"?ku(t,e,n).disconnect():lh(n)?s===void 0?e.forEach(r=>r.disconnect(n)):i===void 0?ku(t,e,s).disconnect(n,0):ku(t,e,s).disconnect(n,0,i):s===void 0?e.forEach(r=>r.disconnect(n)):ku(t,e,s).disconnect(n,0),HH={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},UH=(t,e,n,s,i,r,a,o)=>class extends t{constructor(c,u){const d=r(c),h={...HH,...u},p=s(d,h),m=a(d),y=m?n():null;super(c,!1,p,y),this._attack=e(this,m,p.attack),this._knee=e(this,m,p.knee),this._nativeDynamicsCompressorNode=p,this._ratio=e(this,m,p.ratio),this._release=e(this,m,p.release),this._threshold=e(this,m,p.threshold),o(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(c){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=c,c>2)throw this._nativeDynamicsCompressorNode.channelCount=u,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(c){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=c,c==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},GH=(t,e,n,s,i)=>()=>{const r=new WeakMap,a=async(o,l)=>{let c=n(o);const u=Gt(c,l);if(!u){const d={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value};c=e(l,d)}return r.set(l,c),u?(await t(l,o.attack,c.attack),await t(l,o.knee,c.knee),await t(l,o.ratio,c.ratio),await t(l,o.release,c.release),await t(l,o.threshold,c.threshold)):(await s(l,o.attack,c.attack),await s(l,o.knee,c.knee),await s(l,o.ratio,c.ratio),await s(l,o.release,c.release),await s(l,o.threshold,c.threshold)),await i(o,l,c),c};return{render(o,l){const c=r.get(l);return c!==void 0?Promise.resolve(c):a(o,l)}}},qH=()=>new DOMException("","EncodingError"),WH=t=>e=>new Promise((n,s)=>{if(t===null){s(new SyntaxError);return}const i=t.document.head;if(i===null)s(new SyntaxError);else{const r=t.document.createElement("script"),a=new Blob([e],{type:"application/javascript"}),o=URL.createObjectURL(a),l=t.onerror,c=()=>{t.onerror=l,URL.revokeObjectURL(o)};t.onerror=(u,d,h,p,m)=>{if(d===o||d===t.location.href&&h===1&&p===1)return c(),s(m),!1;if(l!==null)return l(u,d,h,p,m)},r.onerror=()=>{c(),s(new SyntaxError)},r.onload=()=>{c(),n()},r.src=o,r.type="module",i.appendChild(r)}}),$H=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,s,i){if(s!==null){let r=this._listeners.get(s);r===void 0&&(r=t(this,s),typeof s=="function"&&this._listeners.set(s,r)),this._nativeEventTarget.addEventListener(n,r,i)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,s,i){const r=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(n,r===void 0?null:r,i)}},YH=t=>(e,n,s)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return s()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}},KH=t=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw t()},XH={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},QH=(t,e,n,s,i,r)=>class extends t{constructor(o,l){const c=i(o),u={...XH,...l},d=s(c,u),h=r(c),p=h?n():null;super(o,!1,d,p),this._gain=e(this,h,d.gain,Wt,ln)}get gain(){return this._gain}},ZH=(t,e,n,s,i)=>()=>{const r=new WeakMap,a=async(o,l)=>{let c=n(o);const u=Gt(c,l);if(!u){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value};c=e(l,d)}return r.set(l,c),u?await t(l,o.gain,c.gain):await s(l,o.gain,c.gain),await i(o,l,c),c};return{render(o,l){const c=r.get(l);return c!==void 0?Promise.resolve(c):a(o,l)}}},JH=(t,e)=>n=>e(t,n),e8=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},t8=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0},n8=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},s8=t=>e=>t.get(e),Nt=()=>new DOMException("","InvalidStateError"),i8=t=>e=>{const n=t.get(e);if(n===void 0)throw Nt();return n},r8=(t,e)=>n=>{let s=t.get(n);if(s!==void 0)return s;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),t.set(n,s),s},a8=t=>e=>{const n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},mf=()=>new DOMException("","InvalidAccessError"),o8=t=>{t.getFrequencyResponse=(e=>(n,s,i)=>{if(n.length!==s.length||s.length!==i.length)throw mf();return e.call(t,n,s,i)})(t.getFrequencyResponse)},l8={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},c8=(t,e,n,s,i,r)=>class extends t{constructor(o,l){const c=s(o),u=i(c),d={...l8,...l},h=e(c,u?null:o.baseLatency,d),p=u?n(d.feedback,d.feedforward):null;super(o,!1,h,p),o8(h),this._nativeIIRFilterNode=h,r(this,1)}getFrequencyResponse(o,l,c){return this._nativeIIRFilterNode.getFrequencyResponse(o,l,c)}},E2=(t,e,n,s,i,r,a,o,l,c,u)=>{const d=c.length;let h=o;for(let p=0;p<d;p+=1){let m=n[0]*c[p];for(let y=1;y<i;y+=1){const x=h-y&l-1;m+=n[y]*r[x],m-=t[y]*a[x]}for(let y=i;y<s;y+=1)m+=n[y]*r[h-y&l-1];for(let y=i;y<e;y+=1)m-=t[y]*a[h-y&l-1];r[h]=c[p],a[h]=m,h=h+1&l-1,u[p]=m}return h},u8=(t,e,n,s)=>{const i=n instanceof Float64Array?n:new Float64Array(n),r=s instanceof Float64Array?s:new Float64Array(s),a=i.length,o=r.length,l=Math.min(a,o);if(i[0]!==1){for(let m=0;m<a;m+=1)r[m]/=i[0];for(let m=1;m<o;m+=1)i[m]/=i[0]}const c=32,u=new Float32Array(c),d=new Float32Array(c),h=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),p=t.numberOfChannels;for(let m=0;m<p;m+=1){const y=t.getChannelData(m),x=h.getChannelData(m);u.fill(0),d.fill(0),E2(i,a,r,o,l,u,d,0,c,y,x)}return h},d8=(t,e,n,s,i)=>(r,a)=>{const o=new WeakMap;let l=null;const c=async(u,d)=>{let h=null,p=e(u);const m=Gt(p,d);if(d.createIIRFilter===void 0?h=t(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):m||(p=d.createIIRFilter(a,r)),o.set(d,h===null?p:h),h!==null){if(l===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const x=new n(u.context.destination.channelCount,u.context.length,d.sampleRate);l=(async()=>{await s(u,x,x.destination);const v=await i(x);return u8(v,d,r,a)})()}const y=await l;return h.buffer=y,h.start(0),h}return await s(u,d,p),p};return{render(u,d){const h=o.get(d);return h!==void 0?Promise.resolve(h):c(u,d)}}},h8=(t,e,n,s,i,r)=>a=>(o,l)=>{const c=t.get(o);if(c===void 0){if(!a&&r(o)){const u=s(o),{outputs:d}=n(o);for(const h of d)if(Lc(h)){const p=s(h[0]);e(u,p,h[1],h[2])}else{const p=i(h[0]);u.disconnect(p,h[1])}}t.set(o,l)}else t.set(o,c+l)},f8=(t,e)=>n=>{const s=t.get(n);return e(s)||e(n)},p8=(t,e)=>n=>t.has(n)||e(n),m8=(t,e)=>n=>t.has(n)||e(n),g8=(t,e)=>n=>{const s=t.get(n);return e(s)||e(n)},y8=t=>e=>t!==null&&e instanceof t,v8=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode,b8=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam,x8=(t,e)=>n=>t(n)||e(n),_8=t=>e=>t!==null&&e instanceof t,w8=t=>t!==null&&t.isSecureContext,S8=(t,e,n,s)=>class extends t{constructor(r,a){const o=n(r),l=e(o,a);if(s(o))throw TypeError();super(r,!0,l,null),this._nativeMediaElementAudioSourceNode=l}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},C8={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},T8=(t,e,n,s)=>class extends t{constructor(r,a){const o=n(r);if(s(o))throw new TypeError;const l={...C8,...a},c=e(o,l);super(r,!1,c,null),this._nativeMediaStreamAudioDestinationNode=c}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},E8=(t,e,n,s)=>class extends t{constructor(r,a){const o=n(r),l=e(o,a);if(s(o))throw new TypeError;super(r,!0,l,null),this._nativeMediaStreamAudioSourceNode=l}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},A8=(t,e,n)=>class extends t{constructor(i,r){const a=n(i),o=e(a,r);super(i,!0,o,null)}},k8=(t,e,n,s,i,r)=>class extends n{constructor(o,l){super(o),this._nativeContext=o,ff.set(this,o),s(o)&&i.set(o,new Set),this._destination=new t(this,l),this._listener=e(this,o),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(o){const l=typeof o=="function"?r(this,o):null;this._nativeContext.onstatechange=l;const c=this._nativeContext.onstatechange;this._onstatechange=c!==null&&c===l?o:c}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},cc=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},N8=(t,e)=>(n,s,i)=>{const r=new Set;return n.connect=(a=>(o,l=0,c=0)=>{const u=r.size===0;if(e(o))return a.call(n,o,l,c),t(r,[o,l,c],d=>d[0]===o&&d[1]===l&&d[2]===c,!0),u&&s(),o;a.call(n,o,l),t(r,[o,l],d=>d[0]===o&&d[1]===l,!0),u&&s()})(n.connect),n.disconnect=(a=>(o,l,c)=>{const u=r.size>0;if(o===void 0)a.apply(n),r.clear();else if(typeof o=="number"){a.call(n,o);for(const h of r)h[1]===o&&r.delete(h)}else{e(o)?a.call(n,o,l,c):a.call(n,o,l);for(const h of r)h[0]===o&&(l===void 0||h[1]===l)&&(c===void 0||h[2]===c)&&r.delete(h)}const d=r.size===0;u&&d&&i()})(n.disconnect),n},nt=(t,e,n)=>{const s=e[n];s!==void 0&&s!==t[n]&&(t[n]=s)},Tt=(t,e)=>{nt(t,e,"channelCount"),nt(t,e,"channelCountMode"),nt(t,e,"channelInterpretation")},Y_=t=>typeof t.getFloatTimeDomainData=="function",M8=t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const s=Math.max(n.length,t.fftSize);for(let i=0;i<s;i+=1)e[i]=(n[i]-128)*.0078125;return e}},R8=(t,e)=>(n,s)=>{const i=n.createAnalyser();if(Tt(i,s),!(s.maxDecibels>s.minDecibels))throw e();return nt(i,s,"fftSize"),nt(i,s,"maxDecibels"),nt(i,s,"minDecibels"),nt(i,s,"smoothingTimeConstant"),t(Y_,()=>Y_(i))||M8(i),i},D8=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,ot=(t,e,n)=>{const s=e[n];s!==void 0&&s!==t[n].value&&(t[n].value=s)},O8=t=>{t.start=(e=>{let n=!1;return(s=0,i=0,r)=>{if(n)throw Nt();e.call(t,s,i,r),n=!0}})(t.start)},A0=t=>{t.start=(e=>(n=0,s=0,i)=>{if(typeof i=="number"&&i<0||s<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,s,i)})(t.start)},k0=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},j8=(t,e,n,s,i,r,a,o,l,c,u)=>(d,h)=>{const p=d.createBufferSource();return Tt(p,h),ot(p,h,"playbackRate"),nt(p,h,"buffer"),nt(p,h,"loop"),nt(p,h,"loopEnd"),nt(p,h,"loopStart"),e(n,()=>n(d))||O8(p),e(s,()=>s(d))||l(p),e(i,()=>i(d))||c(p,d),e(r,()=>r(d))||A0(p),e(a,()=>a(d))||u(p,d),e(o,()=>o(d))||k0(p),t(d,p),p},P8=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,I8=(t,e)=>(n,s,i)=>{const r=n.destination;if(r.channelCount!==s)try{r.channelCount=s}catch{}i&&r.channelCountMode!=="explicit"&&(r.channelCountMode="explicit"),r.maxChannelCount===0&&Object.defineProperty(r,"maxChannelCount",{value:s});const a=t(n,{channelCount:s,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,gain:1});return e(a,"channelCount",o=>()=>o.call(a),o=>l=>{o.call(a,l);try{r.channelCount=l}catch(c){if(l>r.maxChannelCount)throw c}}),e(a,"channelCountMode",o=>()=>o.call(a),o=>l=>{o.call(a,l),r.channelCountMode=l}),e(a,"channelInterpretation",o=>()=>o.call(a),o=>l=>{o.call(a,l),r.channelInterpretation=l}),Object.defineProperty(a,"maxChannelCount",{get:()=>r.maxChannelCount}),a.connect(r),a},B8=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,L8=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},V8=(t,e,n,s,i)=>(r,a,o,l,c,u)=>{if(o!==null)try{const d=new o(r,l,u),h=new Map;let p=null;if(Object.defineProperties(d,{channelCount:{get:()=>u.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>p,set:m=>{typeof p=="function"&&d.removeEventListener("processorerror",p),p=typeof m=="function"?m:null,typeof p=="function"&&d.addEventListener("processorerror",p)}}}),d.addEventListener=(m=>(...y)=>{if(y[0]==="processorerror"){const x=typeof y[1]=="function"?y[1]:typeof y[1]=="object"&&y[1]!==null&&typeof y[1].handleEvent=="function"?y[1].handleEvent:null;if(x!==null){const v=h.get(y[1]);v!==void 0?y[1]=v:(y[1]=b=>{b.type==="error"?(Object.defineProperties(b,{type:{value:"processorerror"}}),x(b)):x(new ErrorEvent(y[0],{...b}))},h.set(x,y[1]))}}return m.call(d,"error",y[1],y[2]),m.call(d,...y)})(d.addEventListener),d.removeEventListener=(m=>(...y)=>{if(y[0]==="processorerror"){const x=h.get(y[1]);x!==void 0&&(h.delete(y[1]),y[1]=x)}return m.call(d,"error",y[1],y[2]),m.call(d,y[0],y[1],y[2])})(d.removeEventListener),u.numberOfOutputs!==0){const m=n(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return d.connect(m).connect(r.destination),i(d,()=>m.disconnect(),()=>m.connect(r.destination))}return d}catch(d){throw d.code===11?s():d}if(c===void 0)throw s();return L8(u),e(r,a,c,u)},A2=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),z8=t=>new Promise((e,n)=>{const{port1:s,port2:i}=new MessageChannel;s.onmessage=({data:r})=>{s.close(),i.close(),e(r)},s.onmessageerror=({data:r})=>{s.close(),i.close(),n(r)},i.postMessage(t)}),F8=async(t,e)=>{const n=await z8(e);return new t(n)},H8=(t,e,n,s)=>{let i=Kg.get(t);i===void 0&&(i=new WeakMap,Kg.set(t,i));const r=F8(n,s);return i.set(e,r),r},U8=(t,e,n,s,i,r,a,o,l,c,u,d,h)=>(p,m,y,x)=>{if(x.numberOfInputs===0&&x.numberOfOutputs===0)throw l();const v=Array.isArray(x.outputChannelCount)?x.outputChannelCount:Array.from(x.outputChannelCount);if(v.some(J=>J<1))throw l();if(v.length!==x.numberOfOutputs)throw e();if(x.channelCountMode!=="explicit")throw l();const b=x.channelCount*x.numberOfInputs,_=v.reduce((J,ae)=>J+ae,0),w=y.parameterDescriptors===void 0?0:y.parameterDescriptors.length;if(b+w>6||_>6)throw l();const S=new MessageChannel,T=[],E=[];for(let J=0;J<x.numberOfInputs;J+=1)T.push(a(p,{channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation,gain:1})),E.push(i(p,{channelCount:x.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:x.channelCount}));const C=[];if(y.parameterDescriptors!==void 0)for(const{defaultValue:J,maxValue:ae,minValue:Ge,name:K}of y.parameterDescriptors){const Q=r(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:x.parameterData[K]!==void 0?x.parameterData[K]:J===void 0?0:J});Object.defineProperties(Q.offset,{defaultValue:{get:()=>J===void 0?0:J},maxValue:{get:()=>ae===void 0?Wt:ae},minValue:{get:()=>Ge===void 0?ln:Ge}}),C.push(Q)}const M=s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,b+w)}),A=A2(m,p.sampleRate),k=o(p,A,b+w,Math.max(1,_)),N=i(p,{channelCount:Math.max(1,_),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,_)}),P=[];for(let J=0;J<x.numberOfOutputs;J+=1)P.push(s(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:v[J]}));for(let J=0;J<x.numberOfInputs;J+=1){T[J].connect(E[J]);for(let ae=0;ae<x.channelCount;ae+=1)E[J].connect(M,ae,J*x.channelCount+ae)}const j=new C2(y.parameterDescriptors===void 0?[]:y.parameterDescriptors.map(({name:J},ae)=>{const Ge=C[ae];return Ge.connect(M,0,b+ae),Ge.start(0),[J,Ge.offset]}));M.connect(k);let I=x.channelInterpretation,D=null;const O=x.numberOfOutputs===0?[k]:P,R={get bufferSize(){return A},get channelCount(){return x.channelCount},set channelCount(J){throw n()},get channelCountMode(){return x.channelCountMode},set channelCountMode(J){throw n()},get channelInterpretation(){return I},set channelInterpretation(J){for(const ae of T)ae.channelInterpretation=J;I=J},get context(){return k.context},get inputs(){return T},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},get onprocessorerror(){return D},set onprocessorerror(J){typeof D=="function"&&R.removeEventListener("processorerror",D),D=typeof J=="function"?J:null,typeof D=="function"&&R.addEventListener("processorerror",D)},get parameters(){return j},get port(){return S.port2},addEventListener(...J){return k.addEventListener(J[0],J[1],J[2])},connect:t.bind(null,O),disconnect:c.bind(null,O),dispatchEvent(...J){return k.dispatchEvent(J[0])},removeEventListener(...J){return k.removeEventListener(J[0],J[1],J[2])}},B=new Map;S.port1.addEventListener=(J=>(...ae)=>{if(ae[0]==="message"){const Ge=typeof ae[1]=="function"?ae[1]:typeof ae[1]=="object"&&ae[1]!==null&&typeof ae[1].handleEvent=="function"?ae[1].handleEvent:null;if(Ge!==null){const K=B.get(ae[1]);K!==void 0?ae[1]=K:(ae[1]=Q=>{u(p.currentTime,p.sampleRate,()=>Ge(Q))},B.set(Ge,ae[1]))}}return J.call(S.port1,ae[0],ae[1],ae[2])})(S.port1.addEventListener),S.port1.removeEventListener=(J=>(...ae)=>{if(ae[0]==="message"){const Ge=B.get(ae[1]);Ge!==void 0&&(B.delete(ae[1]),ae[1]=Ge)}return J.call(S.port1,ae[0],ae[1],ae[2])})(S.port1.removeEventListener);let F=null;Object.defineProperty(S.port1,"onmessage",{get:()=>F,set:J=>{typeof F=="function"&&S.port1.removeEventListener("message",F),F=typeof J=="function"?J:null,typeof F=="function"&&(S.port1.addEventListener("message",F),S.port1.start())}}),y.prototype.port=S.port1;let Z=null;H8(p,R,y,x).then(J=>Z=J);const q=uh(x.numberOfInputs,x.channelCount),$=uh(x.numberOfOutputs,v),H=y.parameterDescriptors===void 0?[]:y.parameterDescriptors.reduce((J,{name:ae})=>({...J,[ae]:new Float32Array(128)}),{});let Y=!0;const L=()=>{x.numberOfOutputs>0&&k.disconnect(N);for(let J=0,ae=0;J<x.numberOfOutputs;J+=1){const Ge=P[J];for(let K=0;K<v[J];K+=1)N.disconnect(Ge,ae+K,K);ae+=v[J]}},z=new Map;k.onaudioprocess=({inputBuffer:J,outputBuffer:ae})=>{if(Z!==null){const Ge=d(R);for(let K=0;K<A;K+=128){for(let Q=0;Q<x.numberOfInputs;Q+=1)for(let ue=0;ue<x.channelCount;ue+=1)ch(J,q[Q],ue,ue,K);y.parameterDescriptors!==void 0&&y.parameterDescriptors.forEach(({name:Q},ue)=>{ch(J,H,Q,b+ue,K)});for(let Q=0;Q<x.numberOfInputs;Q+=1)for(let ue=0;ue<v[Q];ue+=1)$[Q][ue].byteLength===0&&($[Q][ue]=new Float32Array(128));try{const Q=q.map((ke,Ke)=>{if(Ge[Ke].size>0)return z.set(Ke,A/128),ke;const vi=z.get(Ke);return vi===void 0?[]:(ke.every(_r=>_r.every(ha=>ha===0))&&(vi===1?z.delete(Ke):z.set(Ke,vi-1)),ke)});Y=u(p.currentTime+K/p.sampleRate,p.sampleRate,()=>Z.process(Q,$,H));for(let ke=0,Ke=0;ke<x.numberOfOutputs;ke+=1){for(let Dn=0;Dn<v[ke];Dn+=1)T2(ae,$[ke],Dn,Ke+Dn,K);Ke+=v[ke]}}catch(Q){Y=!1,R.dispatchEvent(new ErrorEvent("processorerror",{colno:Q.colno,filename:Q.filename,lineno:Q.lineno,message:Q.message}))}if(!Y){for(let Q=0;Q<x.numberOfInputs;Q+=1){T[Q].disconnect(E[Q]);for(let ue=0;ue<x.channelCount;ue+=1)E[K].disconnect(M,ue,Q*x.channelCount+ue)}if(y.parameterDescriptors!==void 0){const Q=y.parameterDescriptors.length;for(let ue=0;ue<Q;ue+=1){const ke=C[ue];ke.disconnect(M,0,b+ue),ke.stop()}}M.disconnect(k),k.onaudioprocess=null,te?L():be();break}}}};let te=!1;const fe=a(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),ge=()=>k.connect(fe).connect(p.destination),be=()=>{k.disconnect(fe),fe.disconnect()},Rt=()=>{if(Y){be(),x.numberOfOutputs>0&&k.connect(N);for(let J=0,ae=0;J<x.numberOfOutputs;J+=1){const Ge=P[J];for(let K=0;K<v[J];K+=1)N.connect(Ge,ae+K,K);ae+=v[J]}}te=!0},en=()=>{Y&&(ge(),L()),te=!1};return ge(),h(R,Rt,en)},k2=(t,e)=>{const n=t.createBiquadFilter();return Tt(n,e),ot(n,e,"Q"),ot(n,e,"detune"),ot(n,e,"frequency"),ot(n,e,"gain"),nt(n,e,"type"),n},G8=(t,e)=>(n,s)=>{const i=n.createChannelMerger(s.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,i),Tt(i,s),i},q8=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw Nt()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw Nt()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw Nt()}})},Vc=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return Tt(n,e),q8(n),n},W8=(t,e,n,s,i)=>(r,a)=>{if(r.createConstantSource===void 0)return n(r,a);const o=r.createConstantSource();return Tt(o,a),ot(o,a,"offset"),e(s,()=>s(r))||A0(o),e(i,()=>i(r))||k0(o),t(r,o),o},Yo=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),$8=(t,e,n,s)=>(i,{offset:r,...a})=>{const o=i.createBuffer(1,2,44100),l=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),c=n(i,{...a,gain:r}),u=o.getChannelData(0);u[0]=1,u[1]=1,l.buffer=o,l.loop=!0;const d={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(m){c.channelCount=m},get channelCountMode(){return c.channelCountMode},set channelCountMode(m){c.channelCountMode=m},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(m){c.channelInterpretation=m},get context(){return c.context},get inputs(){return[]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get offset(){return c.gain},get onended(){return l.onended},set onended(m){l.onended=m},addEventListener(...m){return l.addEventListener(m[0],m[1],m[2])},dispatchEvent(...m){return l.dispatchEvent(m[0])},removeEventListener(...m){return l.removeEventListener(m[0],m[1],m[2])},start(m=0){l.start.call(l,m)},stop(m=0){l.stop.call(l,m)}},h=()=>l.connect(c),p=()=>l.disconnect(c);return t(i,l),s(Yo(d,c),h,p)},Y8=(t,e)=>(n,s)=>{const i=n.createConvolver();if(Tt(i,s),s.disableNormalization===i.normalize&&(i.normalize=!s.disableNormalization),nt(i,s,"buffer"),s.channelCount>2||(e(i,"channelCount",r=>()=>r.call(i),r=>a=>{if(a>2)throw t();return r.call(i,a)}),s.channelCountMode==="max"))throw t();return e(i,"channelCountMode",r=>()=>r.call(i),r=>a=>{if(a==="max")throw t();return r.call(i,a)}),i},N2=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return Tt(n,e),ot(n,e,"delayTime"),n},K8=t=>(e,n)=>{const s=e.createDynamicsCompressor();if(Tt(s,n),n.channelCount>2||n.channelCountMode==="max")throw t();return ot(s,n,"attack"),ot(s,n,"knee"),ot(s,n,"ratio"),ot(s,n,"release"),ot(s,n,"threshold"),s},fn=(t,e)=>{const n=t.createGain();return Tt(n,e),ot(n,e,"gain"),n},X8=t=>(e,n,s)=>{if(e.createIIRFilter===void 0)return t(e,n,s);const i=e.createIIRFilter(s.feedforward,s.feedback);return Tt(i,s),i};function Q8(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function Z8(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function K_(t,e){let n=[0,0];for(let s=t.length-1;s>=0;s-=1)n=Z8(n,e),n[0]+=t[s];return n}const J8=(t,e,n,s)=>(i,r,{channelCount:a,channelCountMode:o,channelInterpretation:l,feedback:c,feedforward:u})=>{const d=A2(r,i.sampleRate),h=c instanceof Float64Array?c:new Float64Array(c),p=u instanceof Float64Array?u:new Float64Array(u),m=h.length,y=p.length,x=Math.min(m,y);if(m===0||m>20)throw s();if(h[0]===0)throw e();if(y===0||y>20)throw s();if(p[0]===0)throw e();if(h[0]!==1){for(let C=0;C<y;C+=1)p[C]/=h[0];for(let C=1;C<m;C+=1)h[C]/=h[0]}const v=n(i,d,a,a);v.channelCount=a,v.channelCountMode=o,v.channelInterpretation=l;const b=32,_=[],w=[],S=[];for(let C=0;C<a;C+=1){_.push(0);const M=new Float32Array(b),A=new Float32Array(b);M.fill(0),A.fill(0),w.push(M),S.push(A)}v.onaudioprocess=C=>{const M=C.inputBuffer,A=C.outputBuffer,k=M.numberOfChannels;for(let N=0;N<k;N+=1){const P=M.getChannelData(N),j=A.getChannelData(N);_[N]=E2(h,m,p,y,x,w[N],S[N],_[N],b,P,j)}};const T=i.sampleRate/2;return Yo({get bufferSize(){return d},get channelCount(){return v.channelCount},set channelCount(C){v.channelCount=C},get channelCountMode(){return v.channelCountMode},set channelCountMode(C){v.channelCountMode=C},get channelInterpretation(){return v.channelInterpretation},set channelInterpretation(C){v.channelInterpretation=C},get context(){return v.context},get inputs(){return[v]},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},addEventListener(...C){return v.addEventListener(C[0],C[1],C[2])},dispatchEvent(...C){return v.dispatchEvent(C[0])},getFrequencyResponse(C,M,A){if(C.length!==M.length||M.length!==A.length)throw t();const k=C.length;for(let N=0;N<k;N+=1){const P=-Math.PI*(C[N]/T),j=[Math.cos(P),Math.sin(P)],I=K_(p,j),D=K_(h,j),O=Q8(I,D);M[N]=Math.sqrt(O[0]*O[0]+O[1]*O[1]),A[N]=Math.atan2(O[1],O[0])}},removeEventListener(...C){return v.removeEventListener(C[0],C[1],C[2])}},v)},eU=(t,e)=>t.createMediaElementSource(e.mediaElement),tU=(t,e)=>{const n=t.createMediaStreamDestination();return Tt(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},nU=(t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((r,a)=>r.id<a.id?-1:r.id>a.id?1:0);const s=n.slice(0,1),i=t.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(i,"mediaStream",{value:e}),i},sU=(t,e)=>(n,{mediaStreamTrack:s})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(s);const i=new MediaStream([s]),r=n.createMediaStreamSource(i);if(s.kind!=="audio")throw t();if(e(n))throw new TypeError;return r},iU=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,rU=(t,e,n,s,i,r)=>(a,o)=>{const l=a.createOscillator();return Tt(l,o),ot(l,o,"detune"),ot(l,o,"frequency"),o.periodicWave!==void 0?l.setPeriodicWave(o.periodicWave):nt(l,o,"type"),e(n,()=>n(a))||A0(l),e(s,()=>s(a))||r(l,a),e(i,()=>i(a))||k0(l),t(a,l),l},aU=t=>(e,n)=>{const s=e.createPanner();return s.orientationX===void 0?t(e,n):(Tt(s,n),ot(s,n,"orientationX"),ot(s,n,"orientationY"),ot(s,n,"orientationZ"),ot(s,n,"positionX"),ot(s,n,"positionY"),ot(s,n,"positionZ"),nt(s,n,"coneInnerAngle"),nt(s,n,"coneOuterAngle"),nt(s,n,"coneOuterGain"),nt(s,n,"distanceModel"),nt(s,n,"maxDistance"),nt(s,n,"panningModel"),nt(s,n,"refDistance"),nt(s,n,"rolloffFactor"),s)},oU=(t,e,n,s,i,r,a,o,l,c)=>(u,{coneInnerAngle:d,coneOuterAngle:h,coneOuterGain:p,distanceModel:m,maxDistance:y,orientationX:x,orientationY:v,orientationZ:b,panningModel:_,positionX:w,positionY:S,positionZ:T,refDistance:E,rolloffFactor:C,...M})=>{const A=u.createPanner();if(M.channelCount>2||M.channelCountMode==="max")throw a();Tt(A,M);const k={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},N=n(u,{...k,channelInterpretation:"speakers",numberOfInputs:6}),P=s(u,{...M,gain:1}),j=s(u,{...k,gain:1}),I=s(u,{...k,gain:0}),D=s(u,{...k,gain:0}),O=s(u,{...k,gain:0}),R=s(u,{...k,gain:0}),B=s(u,{...k,gain:0}),F=i(u,256,6,1),Z=r(u,{...k,curve:new Float32Array([1,1]),oversample:"none"});let V=[x,v,b],q=[w,S,T];const $=new Float32Array(1);F.onaudioprocess=({inputBuffer:z})=>{const te=[l(z,$,0),l(z,$,1),l(z,$,2)];te.some((ge,be)=>ge!==V[be])&&(A.setOrientation(...te),V=te);const fe=[l(z,$,3),l(z,$,4),l(z,$,5)];fe.some((ge,be)=>ge!==q[be])&&(A.setPosition(...fe),q=fe)},Object.defineProperty(I.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(O.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(B.gain,"defaultValue",{get:()=>0});const H={get bufferSize(){},get channelCount(){return A.channelCount},set channelCount(z){if(z>2)throw a();P.channelCount=z,A.channelCount=z},get channelCountMode(){return A.channelCountMode},set channelCountMode(z){if(z==="max")throw a();P.channelCountMode=z,A.channelCountMode=z},get channelInterpretation(){return A.channelInterpretation},set channelInterpretation(z){P.channelInterpretation=z,A.channelInterpretation=z},get coneInnerAngle(){return A.coneInnerAngle},set coneInnerAngle(z){A.coneInnerAngle=z},get coneOuterAngle(){return A.coneOuterAngle},set coneOuterAngle(z){A.coneOuterAngle=z},get coneOuterGain(){return A.coneOuterGain},set coneOuterGain(z){if(z<0||z>1)throw e();A.coneOuterGain=z},get context(){return A.context},get distanceModel(){return A.distanceModel},set distanceModel(z){A.distanceModel=z},get inputs(){return[P]},get maxDistance(){return A.maxDistance},set maxDistance(z){if(z<0)throw new RangeError;A.maxDistance=z},get numberOfInputs(){return A.numberOfInputs},get numberOfOutputs(){return A.numberOfOutputs},get orientationX(){return j.gain},get orientationY(){return I.gain},get orientationZ(){return D.gain},get panningModel(){return A.panningModel},set panningModel(z){A.panningModel=z},get positionX(){return O.gain},get positionY(){return R.gain},get positionZ(){return B.gain},get refDistance(){return A.refDistance},set refDistance(z){if(z<0)throw new RangeError;A.refDistance=z},get rolloffFactor(){return A.rolloffFactor},set rolloffFactor(z){if(z<0)throw new RangeError;A.rolloffFactor=z},addEventListener(...z){return P.addEventListener(z[0],z[1],z[2])},dispatchEvent(...z){return P.dispatchEvent(z[0])},removeEventListener(...z){return P.removeEventListener(z[0],z[1],z[2])}};d!==H.coneInnerAngle&&(H.coneInnerAngle=d),h!==H.coneOuterAngle&&(H.coneOuterAngle=h),p!==H.coneOuterGain&&(H.coneOuterGain=p),m!==H.distanceModel&&(H.distanceModel=m),y!==H.maxDistance&&(H.maxDistance=y),x!==H.orientationX.value&&(H.orientationX.value=x),v!==H.orientationY.value&&(H.orientationY.value=v),b!==H.orientationZ.value&&(H.orientationZ.value=b),_!==H.panningModel&&(H.panningModel=_),w!==H.positionX.value&&(H.positionX.value=w),S!==H.positionY.value&&(H.positionY.value=S),T!==H.positionZ.value&&(H.positionZ.value=T),E!==H.refDistance&&(H.refDistance=E),C!==H.rolloffFactor&&(H.rolloffFactor=C),(V[0]!==1||V[1]!==0||V[2]!==0)&&A.setOrientation(...V),(q[0]!==0||q[1]!==0||q[2]!==0)&&A.setPosition(...q);const Y=()=>{P.connect(A),t(P,Z,0,0),Z.connect(j).connect(N,0,0),Z.connect(I).connect(N,0,1),Z.connect(D).connect(N,0,2),Z.connect(O).connect(N,0,3),Z.connect(R).connect(N,0,4),Z.connect(B).connect(N,0,5),N.connect(F).connect(u.destination)},L=()=>{P.disconnect(A),o(P,Z,0,0),Z.disconnect(j),j.disconnect(N),Z.disconnect(I),I.disconnect(N),Z.disconnect(D),D.disconnect(N),Z.disconnect(O),O.disconnect(N),Z.disconnect(R),R.disconnect(N),Z.disconnect(B),B.disconnect(N),N.disconnect(F),F.disconnect(u.destination)};return c(Yo(H,A),Y,L)},lU=t=>(e,{disableNormalization:n,imag:s,real:i})=>{const r=s instanceof Float32Array?s:new Float32Array(s),a=i instanceof Float32Array?i:new Float32Array(i),o=e.createPeriodicWave(a,r,{disableNormalization:n});if(Array.from(s).length<2)throw t();return o},zc=(t,e,n,s)=>t.createScriptProcessor(e,n,s),cU=(t,e)=>(n,s)=>{const i=s.channelCountMode;if(i==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,s);const r=n.createStereoPanner();return Tt(r,s),ot(r,s,"pan"),Object.defineProperty(r,"channelCountMode",{get:()=>i,set:a=>{if(a!==i)throw e()}}),r},uU=(t,e,n,s,i,r)=>{const o=new Float32Array([1,1]),l=Math.PI/2,c={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...c,oversample:"none"},d=(m,y,x,v)=>{const b=new Float32Array(16385),_=new Float32Array(16385);for(let M=0;M<16385;M+=1){const A=M/16384*l;b[M]=Math.cos(A),_[M]=Math.sin(A)}const w=n(m,{...c,gain:0}),S=s(m,{...u,curve:b}),T=s(m,{...u,curve:o}),E=n(m,{...c,gain:0}),C=s(m,{...u,curve:_});return{connectGraph(){y.connect(w),y.connect(T.inputs===void 0?T:T.inputs[0]),y.connect(E),T.connect(x),x.connect(S.inputs===void 0?S:S.inputs[0]),x.connect(C.inputs===void 0?C:C.inputs[0]),S.connect(w.gain),C.connect(E.gain),w.connect(v,0,0),E.connect(v,0,1)},disconnectGraph(){y.disconnect(w),y.disconnect(T.inputs===void 0?T:T.inputs[0]),y.disconnect(E),T.disconnect(x),x.disconnect(S.inputs===void 0?S:S.inputs[0]),x.disconnect(C.inputs===void 0?C:C.inputs[0]),S.disconnect(w.gain),C.disconnect(E.gain),w.disconnect(v,0,0),E.disconnect(v,0,1)}}},h=(m,y,x,v)=>{const b=new Float32Array(16385),_=new Float32Array(16385),w=new Float32Array(16385),S=new Float32Array(16385),T=Math.floor(16385/2);for(let O=0;O<16385;O+=1)if(O>T){const R=(O-T)/(16384-T)*l;b[O]=Math.cos(R),_[O]=Math.sin(R),w[O]=0,S[O]=1}else{const R=O/(16384-T)*l;b[O]=1,_[O]=0,w[O]=Math.cos(R),S[O]=Math.sin(R)}const E=e(m,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),C=n(m,{...c,gain:0}),M=s(m,{...u,curve:b}),A=n(m,{...c,gain:0}),k=s(m,{...u,curve:_}),N=s(m,{...u,curve:o}),P=n(m,{...c,gain:0}),j=s(m,{...u,curve:w}),I=n(m,{...c,gain:0}),D=s(m,{...u,curve:S});return{connectGraph(){y.connect(E),y.connect(N.inputs===void 0?N:N.inputs[0]),E.connect(C,0),E.connect(A,0),E.connect(P,1),E.connect(I,1),N.connect(x),x.connect(M.inputs===void 0?M:M.inputs[0]),x.connect(k.inputs===void 0?k:k.inputs[0]),x.connect(j.inputs===void 0?j:j.inputs[0]),x.connect(D.inputs===void 0?D:D.inputs[0]),M.connect(C.gain),k.connect(A.gain),j.connect(P.gain),D.connect(I.gain),C.connect(v,0,0),P.connect(v,0,0),A.connect(v,0,1),I.connect(v,0,1)},disconnectGraph(){y.disconnect(E),y.disconnect(N.inputs===void 0?N:N.inputs[0]),E.disconnect(C,0),E.disconnect(A,0),E.disconnect(P,1),E.disconnect(I,1),N.disconnect(x),x.disconnect(M.inputs===void 0?M:M.inputs[0]),x.disconnect(k.inputs===void 0?k:k.inputs[0]),x.disconnect(j.inputs===void 0?j:j.inputs[0]),x.disconnect(D.inputs===void 0?D:D.inputs[0]),M.disconnect(C.gain),k.disconnect(A.gain),j.disconnect(P.gain),D.disconnect(I.gain),C.disconnect(v,0,0),P.disconnect(v,0,0),A.disconnect(v,0,1),I.disconnect(v,0,1)}}},p=(m,y,x,v,b)=>{if(y===1)return d(m,x,v,b);if(y===2)return h(m,x,v,b);throw i()};return(m,{channelCount:y,channelCountMode:x,pan:v,...b})=>{if(x==="max")throw i();const _=t(m,{...b,channelCount:1,channelCountMode:x,numberOfInputs:2}),w=n(m,{...b,channelCount:y,channelCountMode:x,gain:1}),S=n(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:v});let{connectGraph:T,disconnectGraph:E}=p(m,y,w,S,_);Object.defineProperty(S.gain,"defaultValue",{get:()=>0}),Object.defineProperty(S.gain,"maxValue",{get:()=>1}),Object.defineProperty(S.gain,"minValue",{get:()=>-1});const C={get bufferSize(){},get channelCount(){return w.channelCount},set channelCount(N){w.channelCount!==N&&(M&&E(),{connectGraph:T,disconnectGraph:E}=p(m,N,w,S,_),M&&T()),w.channelCount=N},get channelCountMode(){return w.channelCountMode},set channelCountMode(N){if(N==="clamped-max"||N==="max")throw i();w.channelCountMode=N},get channelInterpretation(){return w.channelInterpretation},set channelInterpretation(N){w.channelInterpretation=N},get context(){return w.context},get inputs(){return[w]},get numberOfInputs(){return w.numberOfInputs},get numberOfOutputs(){return w.numberOfOutputs},get pan(){return S.gain},addEventListener(...N){return w.addEventListener(N[0],N[1],N[2])},dispatchEvent(...N){return w.dispatchEvent(N[0])},removeEventListener(...N){return w.removeEventListener(N[0],N[1],N[2])}};let M=!1;const A=()=>{T(),M=!0},k=()=>{E(),M=!1};return r(Yo(C,_),A,k)}},dU=(t,e,n,s,i,r,a)=>(o,l)=>{const c=o.createWaveShaper();if(r!==null&&r.name==="webkitAudioContext"&&o.createGain().gain.automationRate===void 0)return n(o,l);Tt(c,l);const u=l.curve===null||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(u!==null&&u.length<2)throw e();nt(c,{curve:u},"curve"),nt(c,l,"oversample");let d=null,h=!1;return a(c,"curve",y=>()=>y.call(c),y=>x=>(y.call(c,x),h&&(s(x)&&d===null?d=t(o,c):!s(x)&&d!==null&&(d(),d=null)),x)),i(c,()=>{h=!0,s(c.curve)&&(d=t(o,c))},()=>{h=!1,d!==null&&(d(),d=null)})},hU=(t,e,n,s,i)=>(r,{curve:a,oversample:o,...l})=>{const c=r.createWaveShaper(),u=r.createWaveShaper();Tt(c,l),Tt(u,l);const d=n(r,{...l,gain:1}),h=n(r,{...l,gain:-1}),p=n(r,{...l,gain:1}),m=n(r,{...l,gain:-1});let y=null,x=!1,v=null;const b={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(S){d.channelCount=S,h.channelCount=S,c.channelCount=S,p.channelCount=S,u.channelCount=S,m.channelCount=S},get channelCountMode(){return c.channelCountMode},set channelCountMode(S){d.channelCountMode=S,h.channelCountMode=S,c.channelCountMode=S,p.channelCountMode=S,u.channelCountMode=S,m.channelCountMode=S},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(S){d.channelInterpretation=S,h.channelInterpretation=S,c.channelInterpretation=S,p.channelInterpretation=S,u.channelInterpretation=S,m.channelInterpretation=S},get context(){return c.context},get curve(){return v},set curve(S){if(S!==null&&S.length<2)throw e();if(S===null)c.curve=S,u.curve=S;else{const T=S.length,E=new Float32Array(T+2-T%2),C=new Float32Array(T+2-T%2);E[0]=S[0],C[0]=-S[T-1];const M=Math.ceil((T+1)/2),A=(T+1)/2-1;for(let k=1;k<M;k+=1){const N=k/M*A,P=Math.floor(N),j=Math.ceil(N);E[k]=P===j?S[P]:(1-(N-P))*S[P]+(1-(j-N))*S[j],C[k]=P===j?-S[T-1-P]:-((1-(N-P))*S[T-1-P])-(1-(j-N))*S[T-1-j]}E[M]=T%2===1?S[M-1]:(S[M-2]+S[M-1])/2,c.curve=E,u.curve=C}v=S,x&&(s(v)&&y===null?y=t(r,d):y!==null&&(y(),y=null))},get inputs(){return[d]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get oversample(){return c.oversample},set oversample(S){c.oversample=S,u.oversample=S},addEventListener(...S){return d.addEventListener(S[0],S[1],S[2])},dispatchEvent(...S){return d.dispatchEvent(S[0])},removeEventListener(...S){return d.removeEventListener(S[0],S[1],S[2])}};a!==null&&(b.curve=a instanceof Float32Array?a:new Float32Array(a)),o!==b.oversample&&(b.oversample=o);const _=()=>{d.connect(c).connect(p),d.connect(h).connect(u).connect(m).connect(p),x=!0,s(v)&&(y=t(r,d))},w=()=>{d.disconnect(c),c.disconnect(p),d.disconnect(h),h.disconnect(u),u.disconnect(m),m.disconnect(p),x=!1,y!==null&&(y(),y=null)};return i(Yo(b,p),_,w)},Jt=()=>new DOMException("","NotSupportedError"),fU={numberOfChannels:1},pU=(t,e,n,s,i)=>class extends t{constructor(a,o,l){let c;if(typeof a=="number"&&o!==void 0&&l!==void 0)c={length:o,numberOfChannels:a,sampleRate:l};else if(typeof a=="object")c=a;else throw new Error("The given parameters are not valid.");const{length:u,numberOfChannels:d,sampleRate:h}={...fU,...c},p=s(d,u,h);e(cc,()=>cc(p))||p.addEventListener("statechange",(()=>{let m=0;const y=x=>{this._state==="running"&&(m>0?(p.removeEventListener("statechange",y),x.stopImmediatePropagation(),this._waitForThePromiseToSettle(x)):m+=1)};return y})()),super(p,d),this._length=u,this._nativeOfflineAudioContext=p,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,x2(this)}))}_waitForThePromiseToSettle(a){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(a):setTimeout(()=>this._waitForThePromiseToSettle(a))}},mU={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},gU=(t,e,n,s,i,r,a)=>class extends t{constructor(l,c){const u=i(l),d={...mU,...c},h=n(u,d),p=r(u),m=p?s():null,y=l.sampleRate/2;super(l,!1,h,m),this._detune=e(this,p,h.detune,153600,-153600),this._frequency=e(this,p,h.frequency,y,-y),this._nativeOscillatorNode=h,this._onended=null,this._oscillatorNodeRenderer=m,this._oscillatorNodeRenderer!==null&&d.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=d.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(l){const c=typeof l=="function"?a(this,l):null;this._nativeOscillatorNode.onended=c;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===c?l:u}get type(){return this._nativeOscillatorNode.type}set type(l){this._nativeOscillatorNode.type=l,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(l){this._nativeOscillatorNode.setPeriodicWave(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=l)}start(l=0){if(this._nativeOscillatorNode.start(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=l),this.context.state!=="closed"){wo(this);const c=()=>{this._nativeOscillatorNode.removeEventListener("ended",c),ti(this)&&Ic(this)};this._nativeOscillatorNode.addEventListener("ended",c)}}stop(l=0){this._nativeOscillatorNode.stop(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=l)}},yU=(t,e,n,s,i)=>()=>{const r=new WeakMap;let a=null,o=null,l=null;const c=async(u,d)=>{let h=n(u);const p=Gt(h,d);if(!p){const m={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,periodicWave:a===null?void 0:a,type:h.type};h=e(d,m),o!==null&&h.start(o),l!==null&&h.stop(l)}return r.set(d,h),p?(await t(d,u.detune,h.detune),await t(d,u.frequency,h.frequency)):(await s(d,u.detune,h.detune),await s(d,u.frequency,h.frequency)),await i(u,d,h),h};return{set periodicWave(u){a=u},set start(u){o=u},set stop(u){l=u},render(u,d){const h=r.get(d);return h!==void 0?Promise.resolve(h):c(u,d)}}},vU={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},bU=(t,e,n,s,i,r,a)=>class extends t{constructor(l,c){const u=i(l),d={...vU,...c},h=n(u,d),p=r(u),m=p?s():null;super(l,!1,h,m),this._nativePannerNode=h,this._orientationX=e(this,p,h.orientationX,Wt,ln),this._orientationY=e(this,p,h.orientationY,Wt,ln),this._orientationZ=e(this,p,h.orientationZ,Wt,ln),this._positionX=e(this,p,h.positionX,Wt,ln),this._positionY=e(this,p,h.positionY,Wt,ln),this._positionZ=e(this,p,h.positionZ,Wt,ln),a(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(l){this._nativePannerNode.coneInnerAngle=l}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(l){this._nativePannerNode.coneOuterAngle=l}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(l){this._nativePannerNode.coneOuterGain=l}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(l){this._nativePannerNode.distanceModel=l}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(l){this._nativePannerNode.maxDistance=l}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(l){this._nativePannerNode.panningModel=l}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(l){this._nativePannerNode.refDistance=l}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(l){this._nativePannerNode.rolloffFactor=l}},xU=(t,e,n,s,i,r,a,o,l,c)=>()=>{const u=new WeakMap;let d=null;const h=async(p,m)=>{let y=null,x=r(p);const v={channelCount:x.channelCount,channelCountMode:x.channelCountMode,channelInterpretation:x.channelInterpretation},b={...v,coneInnerAngle:x.coneInnerAngle,coneOuterAngle:x.coneOuterAngle,coneOuterGain:x.coneOuterGain,distanceModel:x.distanceModel,maxDistance:x.maxDistance,panningModel:x.panningModel,refDistance:x.refDistance,rolloffFactor:x.rolloffFactor},_=Gt(x,m);if("bufferSize"in x)y=s(m,{...v,gain:1});else if(!_){const w={...b,orientationX:x.orientationX.value,orientationY:x.orientationY.value,orientationZ:x.orientationZ.value,positionX:x.positionX.value,positionY:x.positionY.value,positionZ:x.positionZ.value};x=i(m,w)}if(u.set(m,y===null?x:y),y!==null){if(d===null){if(a===null)throw new Error("Missing the native OfflineAudioContext constructor.");const k=new a(6,p.context.length,m.sampleRate),N=e(k,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});N.connect(k.destination),d=(async()=>{const P=await Promise.all([p.orientationX,p.orientationY,p.orientationZ,p.positionX,p.positionY,p.positionZ].map(async(j,I)=>{const D=n(k,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:I===0?1:0});return await o(k,j,D.offset),D}));for(let j=0;j<6;j+=1)P[j].connect(N,0,j),P[j].start(0);return c(k)})()}const w=await d,S=s(m,{...v,gain:1});await l(p,m,S);const T=[];for(let k=0;k<w.numberOfChannels;k+=1)T.push(w.getChannelData(k));let E=[T[0][0],T[1][0],T[2][0]],C=[T[3][0],T[4][0],T[5][0]],M=s(m,{...v,gain:1}),A=i(m,{...b,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:C[0],positionY:C[1],positionZ:C[2]});S.connect(M).connect(A.inputs[0]),A.connect(y);for(let k=128;k<w.length;k+=128){const N=[T[0][k],T[1][k],T[2][k]],P=[T[3][k],T[4][k],T[5][k]];if(N.some((j,I)=>j!==E[I])||P.some((j,I)=>j!==C[I])){E=N,C=P;const j=k/m.sampleRate;M.gain.setValueAtTime(0,j),M=s(m,{...v,gain:0}),A=i(m,{...b,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:C[0],positionY:C[1],positionZ:C[2]}),M.gain.setValueAtTime(1,j),S.connect(M).connect(A.inputs[0]),A.connect(y)}}return y}return _?(await t(m,p.orientationX,x.orientationX),await t(m,p.orientationY,x.orientationY),await t(m,p.orientationZ,x.orientationZ),await t(m,p.positionX,x.positionX),await t(m,p.positionY,x.positionY),await t(m,p.positionZ,x.positionZ)):(await o(m,p.orientationX,x.orientationX),await o(m,p.orientationY,x.orientationY),await o(m,p.orientationZ,x.orientationZ),await o(m,p.positionX,x.positionX),await o(m,p.positionY,x.positionY),await o(m,p.positionZ,x.positionZ)),$o(x)?await l(p,m,x.inputs[0]):await l(p,m,x),x};return{render(p,m){const y=u.get(m);return y!==void 0?Promise.resolve(y):h(p,m)}}},_U={disableNormalization:!1},wU=(t,e,n,s)=>class M2{constructor(r,a){const o=e(r),l=s({..._U,...a}),c=t(o,l);return n.add(c),c}static[Symbol.hasInstance](r){return r!==null&&typeof r=="object"&&Object.getPrototypeOf(r)===M2.prototype||n.has(r)}},SU=(t,e)=>(n,s,i)=>(t(s).replay(i),e(s,n,i)),CU=(t,e,n)=>async(s,i,r)=>{const a=t(s);await Promise.all(a.activeInputs.map((o,l)=>Array.from(o).map(async([c,u])=>{const h=await e(c).render(c,i),p=s.context.destination;!n(c)&&(s!==p||!n(s))&&h.connect(r,u,l)})).reduce((o,l)=>[...o,...l],[]))},TU=(t,e,n)=>async(s,i,r)=>{const a=e(s);await Promise.all(Array.from(a.activeInputs).map(async([o,l])=>{const u=await t(o).render(o,i);n(o)||u.connect(r,l)}))},EU=(t,e,n,s)=>i=>t(cc,()=>cc(i))?Promise.resolve(t(s,s)).then(r=>{if(!r){const a=n(i,512,0,1);i.oncomplete=()=>{a.onaudioprocess=null,a.disconnect()},a.onaudioprocess=()=>i.currentTime,a.connect(i.destination)}return i.startRendering()}):new Promise(r=>{const a=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=o=>{a.disconnect(),r(o.renderedBuffer)},a.connect(i.destination),i.startRendering()}),AU=t=>(e,n)=>{t.set(e,n)},kU=t=>(e,n)=>t.set(e,n),NU=(t,e,n,s,i,r,a,o)=>(l,c)=>n(l).render(l,c).then(()=>Promise.all(Array.from(s(c)).map(u=>n(u).render(u,c)))).then(()=>i(c)).then(u=>(typeof u.copyFromChannel!="function"?(a(u),C0(u)):e(r,()=>r(u))||o(u),t.add(u),u)),MU={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},RU=(t,e,n,s,i,r)=>class extends t{constructor(o,l){const c=i(o),u={...MU,...l},d=n(c,u),h=r(c),p=h?s():null;super(o,!1,d,p),this._pan=e(this,h,d.pan)}get pan(){return this._pan}},DU=(t,e,n,s,i)=>()=>{const r=new WeakMap,a=async(o,l)=>{let c=n(o);const u=Gt(c,l);if(!u){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value};c=e(l,d)}return r.set(l,c),u?await t(l,o.pan,c.pan):await s(l,o.pan,c.pan),$o(c)?await i(o,l,c.inputs[0]):await i(o,l,c),c};return{render(o,l){const c=r.get(l);return c!==void 0?Promise.resolve(c):a(o,l)}}},OU=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},jU=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),i=URL.createObjectURL(n);let r=!1,a=!1;try{await s.audioWorklet.addModule(i);const o=new t(s,"a",{numberOfOutputs:0}),l=s.createOscillator();o.port.onmessage=()=>r=!0,o.onprocessorerror=()=>a=!0,l.connect(o),l.start(0),await s.startRendering(),await new Promise(c=>setTimeout(c))}catch{}finally{URL.revokeObjectURL(i)}return r&&!a},PU=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),s=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(i=>{n.oncomplete=()=>{s.disconnect(),i(n.currentTime!==0)},n.startRendering()})},IU=()=>new DOMException("","UnknownError"),BU={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},LU=(t,e,n,s,i,r,a)=>class extends t{constructor(l,c){const u=i(l),d={...BU,...c},h=n(u,d),m=r(u)?s():null;super(l,!0,h,m),this._isCurveNullified=!1,this._nativeWaveShaperNode=h,a(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(l){if(l===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(l.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=l}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(l){this._nativeWaveShaperNode.oversample=l}},VU=(t,e,n)=>()=>{const s=new WeakMap,i=async(r,a)=>{let o=e(r);if(!Gt(o,a)){const c={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,curve:o.curve,oversample:o.oversample};o=t(a,c)}return s.set(a,o),$o(o)?await n(r,a,o.inputs[0]):await n(r,a,o),o};return{render(r,a){const o=s.get(a);return o!==void 0?Promise.resolve(o):i(r,a)}}},zU=()=>typeof window>"u"?null:window,FU=(t,e)=>n=>{n.copyFromChannel=(s,i,r=0)=>{const a=t(r),o=t(i);if(o>=n.numberOfChannels)throw e();const l=n.length,c=n.getChannelData(o),u=s.length;for(let d=a<0?-a:0;d+a<l&&d<u;d+=1)s[d]=c[d+a]},n.copyToChannel=(s,i,r=0)=>{const a=t(r),o=t(i);if(o>=n.numberOfChannels)throw e();const l=n.length,c=n.getChannelData(o),u=s.length;for(let d=a<0?-a:0;d+a<l&&d<u;d+=1)c[d+a]=s[d]}},HU=t=>e=>{e.copyFromChannel=(n=>(s,i,r=0)=>{const a=t(r),o=t(i);if(a<e.length)return n.call(e,s,o,a)})(e.copyFromChannel),e.copyToChannel=(n=>(s,i,r=0)=>{const a=t(r),o=t(i);if(a<e.length)return n.call(e,s,o,a)})(e.copyToChannel)},UU=t=>(e,n)=>{const s=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=s),t(e,"buffer",i=>()=>{const r=i.call(e);return r===s?null:r},i=>r=>i.call(e,r===null?s:r))},GU=(t,e)=>(n,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const i=n.createBufferSource();e(s,()=>{const o=s.numberOfInputs;for(let l=0;l<o;l+=1)i.connect(s,0,l)},()=>i.disconnect(s))},R2=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),D2=t=>{if(t===null)return!1;const e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0},Fc=(t,e,n,s)=>{let i=t;for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);const{get:r,set:a}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(t,e,{get:n(r),set:s(a)})},qU=t=>({...t,outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),WU=t=>({...t,channelCount:t.numberOfOutputs}),$U=t=>{const{imag:e,real:n}=t;return e===void 0?n===void 0?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:n===void 0?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}},O2=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(s){if(s.code!==9)throw s;O2(t,e,n+1e-7)}},YU=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},KU=t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},XU=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},N0=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},j2=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},M0=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},QU=t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},ZU=t=>{t.start=(e=>(n=0,s=0,i)=>{const r=t.buffer,a=r===null?s:Math.min(r.duration,s);r!==null&&a>r.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,a,i)})(t.start)},P2=(t,e)=>{const n=e.createGain();t.connect(n);const s=(i=>()=>{i.call(t,n),t.removeEventListener("ended",s)})(t.disconnect);t.addEventListener("ended",s),Yo(t,n),t.stop=(i=>{let r=!1;return(a=0)=>{if(r)try{i.call(t,a)}catch{n.gain.setValueAtTime(0,a)}else i.call(t,a),r=!0}})(t.stop)},Ko=(t,e)=>n=>{const s={value:t};return Object.defineProperties(n,{currentTarget:s,target:s}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)},JU=bF(la),eG=TF(la),tG=BH(pf),I2=new WeakMap,nG=t8(I2),hs=fH(new Map,new WeakMap),Ns=zU(),B2=R8(hs,Ps),R0=e8(Xt),Lt=CU(Xt,R0,Jr),sG=MF(B2,Je,Lt),Ye=i8(ff),mi=iU(Ns),Ue=_8(mi),L2=new WeakMap,V2=$H(Ko),Hc=P8(Ns),D0=y8(Hc),O0=v8(Ns),z2=b8(Ns),uc=B8(Ns),ht=tH(xF(f2),CF(JU,eG,ah,tG,oh,Xt,nG,Pc,Je,la,ti,Jr,ad),hs,h8($g,oh,Xt,Je,lc,ti),Ps,mf,Jt,OH(ah,$g,Xt,Je,lc,Ye,ti,Ue),zH(L2,Xt,as),V2,Ye,D0,O0,z2,Ue,uc),iG=NF(ht,sG,Ps,B2,Ye,Ue),j0=new WeakSet,X_=D8(Ns),F2=EH(new Uint32Array(1)),P0=FU(F2,Ps),I0=HU(F2),H2=DF(j0,hs,Jt,X_,mi,OU(X_),P0,I0),gf=EF(fn),U2=TU(R0,Bc,Jr),Is=xH(U2),Xo=j8(gf,hs,YU,KU,XU,N0,j2,M0,ZU,UU(Fc),P2),Bs=SU(n8(Bc),U2),rG=PF(Is,Xo,Je,Bs,Lt),fs=nH(_F(p2),L2,S0,sH,fF,pF,mF,gF,yF,Gg,d2,Hc,O2),aG=jF(ht,rG,fs,Nt,Xo,Ye,Ue,Ko),oG=GF(ht,qF,Ps,Nt,I8(fn,Fc),Ye,Ue,Lt),lG=hH(Is,k2,Je,Bs,Lt),ca=kU(I2),cG=dH(ht,fs,lG,mf,k2,Ye,Ue,ca),vr=N8(la,O0),uG=GU(Nt,vr),br=G8(Hc,uG),dG=gH(br,Je,Lt),hG=mH(ht,dG,br,Ye,Ue),fG=bH(Vc,Je,Lt),pG=vH(ht,fG,Vc,Ye,Ue,WU),mG=$8(gf,Xo,fn,vr),Qo=W8(gf,hs,mG,N0,M0),gG=TH(Is,Qo,Je,Bs,Lt),yG=CH(ht,fs,gG,Qo,Ye,Ue,Ko),G2=Y8(Jt,Fc),vG=NH(G2,Je,Lt),bG=kH(ht,vG,G2,Ye,Ue,ca),xG=IH(Is,N2,Je,Bs,Lt),_G=PH(ht,fs,xG,N2,Ye,Ue,ca),q2=K8(Jt),wG=GH(Is,q2,Je,Bs,Lt),SG=UH(ht,fs,wG,q2,Jt,Ye,Ue,ca),CG=ZH(Is,fn,Je,Bs,Lt),TG=QH(ht,fs,CG,fn,Ye,Ue),EG=J8(mf,Nt,zc,Jt),yf=EU(hs,fn,zc,PU(fn,mi)),AG=d8(Xo,Je,mi,Lt,yf),kG=X8(EG),NG=c8(ht,kG,AG,Ye,Ue,ca),MG=WF(fs,br,Qo,zc,Jt,R2,Ue,Fc),W2=new WeakMap,RG=k8(oG,MG,V2,Ue,W2,Ko),$2=rU(gf,hs,N0,j2,M0,P2),DG=yU(Is,$2,Je,Bs,Lt),OG=gU(ht,fs,$2,DG,Ye,Ue,Ko),Y2=wH(Xo),jG=hU(Y2,Nt,fn,D2,vr),vf=dU(Y2,Nt,jG,D2,vr,Hc,Fc),PG=oU(ah,Nt,br,fn,zc,vf,Jt,oh,R2,vr),K2=aU(PG),IG=xU(Is,br,Qo,fn,K2,Je,mi,Bs,Lt,yf),BG=bU(ht,fs,K2,IG,Ye,Ue,ca),LG=lU(Ps),VG=wU(LG,Ye,new WeakSet,$U),zG=uU(br,Vc,fn,vf,Jt,vr),X2=cU(zG,Jt),FG=DU(Is,X2,Je,Bs,Lt),HG=RU(ht,fs,X2,FG,Ye,Ue),UG=VU(vf,Je,Lt),GG=LU(ht,Nt,vf,UG,Ye,Ue,ca),Q2=w8(Ns),B0=YH(Ns),Z2=new WeakMap,qG=r8(Z2,mi),WG=Q2?SF(hs,Jt,WH(Ns),B0,KH(vF),Ye,qG,Ue,uc,new WeakMap,new WeakMap,jU(uc,mi),Ns):void 0,$G=x8(D0,Ue),YG=DH(j0,hs,RH,qH,new WeakSet,Ye,$G,ih,cc,P0,I0),J2=cH(WG,iG,H2,aG,cG,hG,pG,yG,bG,YG,_G,SG,TG,NG,RG,OG,BG,VG,HG,GG),KG=S8(ht,eU,Ye,Ue),XG=T8(ht,tU,Ye,Ue),QG=E8(ht,nU,Ye,Ue),ZG=sU(Nt,Ue),JG=A8(ht,ZG,Ye),eq=UF(J2,Nt,Jt,IU,KG,XG,QG,JG,Hc),L0=a8(W2),tq=AF(L0),eM=_H(Ps),nq=LH(L0),tM=FH(Ps),nM=new WeakMap,sq=JH(nM,as),iq=U8(eM,Ps,Nt,br,Vc,Qo,fn,zc,Jt,tM,B0,sq,vr),rq=V8(Nt,iq,fn,Jt,vr),aq=lH(Is,eM,Xo,br,Vc,Qo,fn,nq,tM,B0,Je,uc,mi,Bs,Lt,yf),oq=s8(Z2),lq=AU(nM),Q_=Q2?rH(tq,ht,fs,aq,rq,Xt,oq,Ye,Ue,uc,qU,lq,QU,Ko):void 0,cq=MH(Jt,mi),uq=NU(j0,hs,R0,L0,yf,ih,P0,I0),dq=pU(J2,hs,Nt,cq,uq),hq=f8(ff,D0),fq=p8(w0,O0),pq=m8(S0,z2),mq=g8(ff,Ue);function Nn(t){return t===void 0}function we(t){return t!==void 0}function gq(t){return typeof t=="function"}function os(t){return typeof t=="number"}function Xi(t){return Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object}function sM(t){return typeof t=="boolean"}function dn(t){return Array.isArray(t)}function ui(t){return typeof t=="string"}function Nu(t){return ui(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function de(t,e){if(!t)throw new Error(e)}function Fn(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function iM(t){!t.isOffline&&t.state!=="running"&&bf('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let rM=!1,Z_=!1;function J_(t){rM=t}function yq(t){Nn(t)&&rM&&!Z_&&(Z_=!0,bf("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let aM=console;function vq(...t){aM.log(...t)}function bf(...t){aM.warn(...t)}function bq(t){return new eq(t)}function xq(t,e,n){return new dq(t,e,n)}const vn=typeof self=="object"?self:null,_q=vn&&(vn.hasOwnProperty("AudioContext")||vn.hasOwnProperty("webkitAudioContext"));function wq(t,e,n){return de(we(Q_),"AudioWorkletNode only works in a secure context (https or localhost)"),new(t instanceof(vn==null?void 0:vn.BaseAudioContext)?vn==null?void 0:vn.AudioWorkletNode:Q_)(t,e,n)}function ps(t,e,n,s){var i=arguments.length,r=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,e,n,s);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r}function ct(t,e,n,s){function i(r){return r instanceof n?r:new n(function(a){a(r)})}return new(n||(n=Promise))(function(r,a){function o(u){try{c(s.next(u))}catch(d){a(d)}}function l(u){try{c(s.throw(u))}catch(d){a(d)}}function c(u){u.done?r(u.value):i(u.value).then(o,l)}c((s=s.apply(t,e||[])).next())})}class Sq{constructor(e,n,s,i){this._callback=e,this._type=n,this._minimumUpdateInterval=Math.max(128/(i||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(e),s=new Worker(n);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var n;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((n=this._worker)===null||n===void 0||n.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function ea(t){return pq(t)}function Qi(t){return fq(t)}function od(t){return mq(t)}function Ca(t){return hq(t)}function Cq(t){return t instanceof H2}function Tq(t,e){return t==="value"||ea(e)||Qi(e)||Cq(e)}function Zi(t,...e){if(!e.length)return t;const n=e.shift();if(Xi(t)&&Xi(n))for(const s in n)Tq(s,n[s])?t[s]=n[s]:Xi(n[s])?(t[s]||Object.assign(t,{[s]:{}}),Zi(t[s],n[s])):Object.assign(t,{[s]:n[s]});return Zi(t,...e)}function Eq(t,e){return t.length===e.length&&t.every((n,s)=>e[s]===n)}function re(t,e,n=[],s){const i={},r=Array.from(e);if(Xi(r[0])&&s&&!Reflect.has(r[0],s)&&(Object.keys(r[0]).some(o=>Reflect.has(t,o))||(Zi(i,{[s]:r[0]}),n.splice(n.indexOf(s),1),r.shift())),r.length===1&&Xi(r[0]))Zi(i,r[0]);else for(let a=0;a<n.length;a++)we(r[a])&&(i[n[a]]=r[a]);return Zi(t,i)}function Aq(t){return t.constructor.getDefaults()}function Cs(t,e){return Nn(t)?e:t}function So(t,e){return e.forEach(n=>{Reflect.has(t,n)&&delete t[n]}),t}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class gi{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||vn&&this.toString()===vn.TONE_DEBUG_CLASS)&&vq(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}gi.version=u2;const V0=1e-6;function Co(t,e){return t>e+V0}function Zg(t,e){return Co(t,e)||es(t,e)}function dh(t,e){return t+V0<e}function es(t,e){return Math.abs(t-e)<V0}function kq(t,e,n){return Math.max(Math.min(t,n),e)}class qn extends gi{constructor(){super(),this.name="Timeline",this._timeline=[];const e=re(qn.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(de(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];de(Zg(e.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const n=this._search(e.time);this._timeline.splice(n+1,0,e)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(e){const n=this._timeline.indexOf(e);return n!==-1&&this._timeline.splice(n,1),this}get(e,n="time"){const s=this._search(e,n);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,n="time"){const s=this._search(e,n);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(e){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<e)return this._timeline[n-1];const s=this._search(e);return s-1>=0?this._timeline[s-1]:null}cancel(e){if(this._timeline.length>1){let n=this._search(e);if(n>=0)if(es(this._timeline[n].time,e)){for(let s=n;s>=0&&es(this._timeline[s].time,e);s--)n=s;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&Zg(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const n=this._search(e);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(e){const n=this._timeline.indexOf(e);return n>0?this._timeline[n-1]:null}_search(e,n="time"){if(this._timeline.length===0)return-1;let s=0;const i=this._timeline.length;let r=i;if(i>0&&this._timeline[i-1][n]<=e)return i-1;for(;s<r;){let a=Math.floor(s+(r-s)/2);const o=this._timeline[a],l=this._timeline[a+1];if(es(o[n],e)){for(let c=a;c<this._timeline.length;c++){const u=this._timeline[c];if(es(u[n],e))a=c;else break}return a}else{if(dh(o[n],e)&&Co(l[n],e))return a;Co(o[n],e)?r=a:s=a+1}}return-1}_iterate(e,n=0,s=this._timeline.length-1){this._timeline.slice(n,s+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,n){const s=this._search(e);return s!==-1&&this._iterate(n,0,s),this}forEachAfter(e,n){const s=this._search(e);return this._iterate(n,s+1),this}forEachBetween(e,n,s){let i=this._search(e),r=this._search(n);return i!==-1&&r!==-1?(this._timeline[i].time!==e&&(i+=1),this._timeline[r].time===n&&(r-=1),this._iterate(s,i,r)):i===-1&&this._iterate(s,0,r),this}forEachFrom(e,n){let s=this._search(e);for(;s>=0&&this._timeline[s].time>=e;)s--;return this._iterate(n,s+1),this}forEachAtTime(e,n){const s=this._search(e);if(s!==-1&&es(this._timeline[s].time,e)){let i=s;for(let r=s;r>=0&&es(this._timeline[r].time,e);r--)i=r;this._iterate(r=>{n(r)},i,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const oM=[];function xf(t){oM.push(t)}function Nq(t){oM.forEach(e=>e(t))}const lM=[];function _f(t){lM.push(t)}function Mq(t){lM.forEach(e=>e(t))}class Uc extends gi{constructor(){super(...arguments),this.name="Emitter"}on(e,n){return e.split(/\W+/).forEach(i=>{Nn(this._events)&&(this._events={}),this._events.hasOwnProperty(i)||(this._events[i]=[]),this._events[i].push(n)}),this}once(e,n){const s=(...i)=>{n(...i),this.off(e,s)};return this.on(e,s),this}off(e,n){return e.split(/\W+/).forEach(i=>{if(Nn(this._events)&&(this._events={}),this._events.hasOwnProperty(i))if(Nn(n))this._events[i]=[];else{const r=this._events[i];for(let a=r.length-1;a>=0;a--)r[a]===n&&r.splice(a,1)}}),this}emit(e,...n){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(let i=0,r=s.length;i<r;i++)s[i].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(n=>{const s=Object.getOwnPropertyDescriptor(Uc.prototype,n);Object.defineProperty(e.prototype,n,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class cM extends Uc{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Gc extends cM{constructor(){var e,n;super(),this.name="Context",this._constants=new Map,this._timeouts=new qn,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const s=re(Gc.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=bq({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new Sq(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((n=arguments[0])===null||n===void 0)&&n.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(Nq(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,n,s){return this._context.createBuffer(e,n,s)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,n){return this._context.createIIRFilter(e,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,n,s){return this._context.createPeriodicWave(e,n,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return de(Ca(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return de(Ca(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return de(Ca(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){de(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){de(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){de(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){de(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,n){return wq(this.rawContext,e,n)}addAudioWorkletModule(e){return ct(this,void 0,void 0,function*(){de(we(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return ct(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return Ca(this._context)?this._context.resume():Promise.resolve()}close(){return ct(this,void 0,void 0,function*(){Ca(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&Mq(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const n=this._context.createBuffer(1,128,this._context.sampleRate),s=n.getChannelData(0);for(let r=0;r<s.length;r++)s[r]=e;const i=this._context.createBufferSource();return i.channelCount=1,i.channelCountMode="explicit",i.buffer=n,i.loop=!0,i.start(0),this._constants.set(e,i),i}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,n=>{n.callback(),this._timeouts.remove(n)})}setTimeout(e,n){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:s+n}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(n=>{n.id===e&&this._timeouts.remove(n)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,n){const s=++this._timeoutIds,i=()=>{const r=this.now();this._timeouts.add({callback:()=>{e(),i()},id:s,time:r+n})};return i(),s}}class Rq extends cM{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,n,s){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,n){return{}}createPanner(){return{}}createPeriodicWave(e,n,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,n){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return ct(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,n){return 0}clearTimeout(e){return this}setInterval(e,n){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Be(t,e){dn(e)?e.forEach(n=>Be(t,n)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function z0(t,e){dn(e)?e.forEach(n=>z0(t,n)):Object.defineProperty(t,e,{writable:!0})}const Me=()=>{};class ze extends gi{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Me;const e=re(ze.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,ui(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:Me,onload:Me,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Qt().sampleRate}set(e){return e instanceof ze?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return ct(this,void 0,void 0,function*(){const n=ze.load(e).then(s=>{this.set(s),this.onload(this)});ze.downloads.push(n);try{yield n}finally{const s=ze.downloads.indexOf(n);ze.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const n=dn(e)&&e[0].length>0,s=n?e.length:1,i=n?e[0].length:e.length,r=Qt(),a=r.createBuffer(s,i,r.sampleRate),o=!n&&s===1?[e]:e;for(let l=0;l<s;l++)a.copyToChannel(o[l],l);return this._buffer=a,this}toMono(e){if(os(e))this.fromArray(this.toArray(e));else{let n=new Float32Array(this.length);const s=this.numberOfChannels;for(let i=0;i<s;i++){const r=this.toArray(i);for(let a=0;a<r.length;a++)n[a]+=r[a]}n=n.map(i=>i/s),this.fromArray(n)}return this}toArray(e){if(os(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let s=0;s<this.numberOfChannels;s++)n[s]=this.getChannelData(s);return n}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,n=this.duration){de(this.loaded,"Buffer is not loaded");const s=Math.floor(e*this.sampleRate),i=Math.floor(n*this.sampleRate);de(s<i,"The start time must be less than the end time");const r=i-s,a=Qt().createBuffer(this.numberOfChannels,r,this.sampleRate);for(let o=0;o<this.numberOfChannels;o++)a.copyToChannel(this.getChannelData(o).subarray(s,i),o);return new ze(a)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new ze().fromArray(e)}static fromUrl(e){return ct(this,void 0,void 0,function*(){return yield new ze().load(e)})}static load(e){return ct(this,void 0,void 0,function*(){const n=ze.baseUrl===""||ze.baseUrl.endsWith("/")?ze.baseUrl:ze.baseUrl+"/",s=yield fetch(n+e);if(!s.ok)throw new Error(`could not load url: ${e}`);const i=yield s.arrayBuffer();return yield Qt().decodeAudioData(i)})}static supportsType(e){const n=e.split("."),s=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return ct(this,void 0,void 0,function*(){for(yield Promise.resolve();ze.downloads.length;)yield ze.downloads[0]})}}ze.baseUrl="";ze.downloads=[];class qc extends Gc{constructor(){super({clockSource:"offline",context:od(arguments[0])?arguments[0]:xq(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:od(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=od(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return ct(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const s=Math.floor(this.sampleRate/128);e&&n%s===0&&(yield new Promise(i=>setTimeout(i,1)))}})}render(){return ct(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const n=yield this._context.startRendering();return new ze(n)})}close(){return Promise.resolve()}}const uM=new Rq;let Or=uM;function Qt(){return Or===uM&&_q&&Jg(new Gc),Or}function Jg(t,e=!1){e&&Or.dispose(),Ca(t)?Or=new Gc(t):od(t)?Or=new qc(t):Or=t}function Dq(){return Or.resume()}if(vn&&!vn.TONE_SILENCE_LOGGING){const e=` * Tone.js v${u2} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function Oq(t){return Math.pow(10,t/20)}function jq(t){return 20*(Math.log(t)/Math.LN10)}function dM(t){return Math.pow(2,t/12)}let wf=440;function Pq(){return wf}function Iq(t){wf=t}function jr(t){return Math.round(hM(t))}function hM(t){return 69+12*Math.log2(t/wf)}function fM(t){return wf*Math.pow(2,(t-69)/12)}class F0 extends gi{constructor(e,n,s){super(),this.defaultUnits="s",this._val=n,this._units=s,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,n)=>{const s=parseInt(e,10),i=n==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*i:this._beatsToUnits(4/s)*i},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const n=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,n,s)=>{let i=0;return e&&e!=="0"&&(i+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(i+=this._beatsToUnits(parseFloat(n))),s&&s!=="0"&&(i+=this._beatsToUnits(parseFloat(s)/4)),i},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof F0&&this.fromType(this._val),Nn(this._val))return this._noArg();if(ui(this._val)&&Nn(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(Xi(this._val)){let e=0;for(const n in this._val)if(we(this._val[n])){const s=this._val[n],i=new this.constructor(this.context,n).valueOf()*s;e+=i}return e}if(we(this._units)){const e=this._expressions[this._units],n=this._val.toString().trim().match(e.regexp);return n?e.method.apply(this,n.slice(1)):e.method.call(this,this._val)}else return ui(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class ns extends F0{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const n=new ns(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(e,n=1){const s=new this.constructor(this.context,e).valueOf(),i=this.valueOf(),o=Math.round(i/s)*s-i;return i+o*n}toNotation(){const e=this.toSeconds(),n=["1m"];for(let r=1;r<9;r++){const a=Math.pow(2,r);n.push(a+"n."),n.push(a+"n"),n.push(a+"t")}n.push("0");let s=n[0],i=new ns(this.context,n[0]).toSeconds();return n.forEach(r=>{const a=new ns(this.context,r).toSeconds();Math.abs(a-e)<Math.abs(i-e)&&(s=r,i=a)}),s}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let n=this.valueOf()/e;n=parseFloat(n.toFixed(4));const s=Math.floor(n/this._getTimeSignature());let i=n%1*4;n=Math.floor(n)%this._getTimeSignature();const r=i.toString();return r.length>3&&(i=parseFloat(parseFloat(r).toFixed(3))),[s,n,i].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return jr(this.toFrequency())}_now(){return this.context.now()}}class wn extends ns{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return Pq()}static set A4(e){Iq(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:wn.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,n){const i=Bq[e.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?i:wn.mtof(i)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,n,s){let i=1;return e&&e!=="0"&&(i*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(i*=this._beatsToUnits(parseFloat(n))),s&&s!=="0"&&(i*=this._beatsToUnits(parseFloat(s)/4)),i}}})}transpose(e){return new wn(this.context,this.valueOf()*dM(e))}harmonize(e){return e.map(n=>this.transpose(n))}toMidi(){return jr(this.valueOf())}toNote(){const e=this.toFrequency(),n=Math.log2(e/wn.A4);let s=Math.round(12*n)+57;const i=Math.floor(s/12);return i<0&&(s+=-12*i),Lq[s%12]+i.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return fM(e)}static ftom(e){return jr(e)}}const Bq={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},Lq=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class so extends ns{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Mt extends gi{constructor(){super();const e=re(Mt.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:Qt()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return yq(e),new ns(this.context,e).toSeconds()}toFrequency(e){return new wn(this.context,e).toFrequency()}toTicks(e){return new so(this.context,e).toTicks()}_getPartialProperties(e){const n=this.get();return Object.keys(n).forEach(s=>{Nn(e[s])&&delete n[s]}),n}get(){const e=Aq(this);return Object.keys(e).forEach(n=>{if(Reflect.has(this,n)){const s=this[n];we(s)&&we(s.value)&&we(s.setValueAtTime)?e[n]=s.value:s instanceof Mt?e[n]=s._getPartialProperties(e[n]):dn(s)||os(s)||ui(s)||sM(s)?e[n]=s:delete e[n]}}),e}set(e){return Object.keys(e).forEach(n=>{Reflect.has(this,n)&&we(this[n])&&(this[n]&&we(this[n].value)&&we(this[n].setValueAtTime)?this[n].value!==e[n]&&(this[n].value=e[n]):this[n]instanceof Mt?this[n].set(e[n]):this[n]=e[n])}),this}}class Wc extends qn{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const n=this.get(e);return n!==null?n.state:this._initial}setStateAtTime(e,n,s){return Fn(n,0),this.add(Object.assign({},s,{state:e,time:n})),this}getLastState(e,n){const s=this._search(n);for(let i=s;i>=0;i--){const r=this._timeline[i];if(r.state===e)return r}}getNextState(e,n){const s=this._search(n);if(s!==-1)for(let i=s;i<this._timeline.length;i++){const r=this._timeline[i];if(r.state===e)return r}}}class Ne extends Mt{constructor(){const e=re(Ne.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,de(we(e.param)&&(ea(e.param)||e.param instanceof Ne),"param must be an AudioParam");!ea(e.param);)e.param=e.param._param;this._swappable=we(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new qn(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,we(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Mt.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return we(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return we(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,n){return this.units===n}_assertRange(e){return we(this.maxValue)&&we(this.minValue)&&Fn(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?Oq(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?jq(e):e}setValueAtTime(e,n){const s=this.toSeconds(n),i=this._fromType(e);return de(isFinite(i)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(i),this.log(this.units,"setValueAtTime",e,s),this._events.add({time:s,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,s),this}getValueAtTime(e){const n=Math.max(this.toSeconds(e),0),s=this._events.getAfter(n),i=this._events.get(n);let r=this._initialValue;if(i===null)r=this._initialValue;else if(i.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const a=this._events.getBefore(i.time);let o;a===null?o=this._initialValue:o=a.value,i.type==="setTargetAtTime"&&(r=this._exponentialApproach(i.time,o,i.value,i.constant,n))}else if(s===null)r=i.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let a=i.value;if(i.type==="setTargetAtTime"){const o=this._events.getBefore(i.time);o===null?a=this._initialValue:a=o.value}s.type==="linearRampToValueAtTime"?r=this._linearInterpolate(i.time,a,s.time,s.value,n):r=this._exponentialInterpolate(i.time,a,s.time,s.value,n)}else r=i.value;return this._toType(r)}setRampPoint(e){e=this.toSeconds(e);let n=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,e),this}linearRampToValueAtTime(e,n){const s=this._fromType(e),i=this.toSeconds(n);return de(isFinite(s)&&isFinite(i),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(s),this._events.add({time:i,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",e,i),this._param.linearRampToValueAtTime(s,i),this}exponentialRampToValueAtTime(e,n){let s=this._fromType(e);s=es(s,0)?this._minOutput:s,this._assertRange(s);const i=this.toSeconds(n);return de(isFinite(s)&&isFinite(i),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({time:i,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",e,i),this._param.exponentialRampToValueAtTime(s,i),this}exponentialRampTo(e,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(e,s+this.toSeconds(n)),this}linearRampTo(e,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(e,s+this.toSeconds(n)),this}targetRampTo(e,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(e,s,n),this}exponentialApproachValueAtTime(e,n,s){n=this.toSeconds(n),s=this.toSeconds(s);const i=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(e,n,i),this.cancelAndHoldAtTime(n+s*.9),this.linearRampToValueAtTime(e,n+s),this}setTargetAtTime(e,n,s){const i=this._fromType(e);de(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const r=this.toSeconds(n);return this._assertRange(i),de(isFinite(i)&&isFinite(r),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({constant:s,time:r,type:"setTargetAtTime",value:i}),this.log(this.units,"setTargetAtTime",e,r,s),this._param.setTargetAtTime(i,r,s),this}setValueCurveAtTime(e,n,s,i=1){s=this.toSeconds(s),n=this.toSeconds(n);const r=this._fromType(e[0])*i;this.setValueAtTime(this._toType(r),n);const a=s/(e.length-1);for(let o=1;o<e.length;o++){const l=this._fromType(e[o])*i;this.linearRampToValueAtTime(this._toType(l),n+o*a)}return this}cancelScheduledValues(e){const n=this.toSeconds(e);return de(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(e){const n=this.toSeconds(e),s=this._fromType(this.getValueAtTime(n));de(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+s);const i=this._events.get(n),r=this._events.getAfter(n);return i&&es(i.time,n)?r?(this._param.cancelScheduledValues(r.time),this._events.cancel(r.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):r&&(this._param.cancelScheduledValues(r.time),this._events.cancel(r.time),r.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),n):r.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),n)),this._events.add({time:n,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,n),this}rampTo(e,n=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,n,s):this.linearRampTo(e,n,s),this}apply(e){const n=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(n),n);const s=this._events.get(n);if(s&&s.type==="setTargetAtTime"){const i=this._events.getAfter(s.time),r=i?i.time:n+2,a=(r-n)/10;for(let o=n;o<r;o+=a)e.linearRampToValueAtTime(this.getValueAtTime(o),o)}return this._events.forEachAfter(this.context.currentTime,i=>{i.type==="cancelScheduledValues"?e.cancelScheduledValues(i.time):i.type==="setTargetAtTime"?e.setTargetAtTime(i.value,i.time,i.constant):e[i.type](i.value,i.time)}),this}setParam(e){de(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(e),this._param=e,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,n,s,i,r){return s+(n-s)*Math.exp(-(r-e)/i)}_linearInterpolate(e,n,s,i,r){return n+(i-n)*((r-e)/(s-e))}_exponentialInterpolate(e,n,s,i,r){return n*Math.pow(i/n,(r-e)/(s-e))}}class oe extends Mt{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return we(this.input)?ea(this.input)||this.input instanceof Ne?1:this.input.numberOfInputs:0}get numberOfOutputs(){return we(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return we(e)&&(e instanceof oe||Qi(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(s=>{s.channelCount=e.channelCount,s.channelCountMode=e.channelCountMode,s.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();de(e.length>0,"ToneAudioNode does not have any internal nodes");const n=e[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:e}))}connect(e,n=0,s=0){return ls(this,e,n,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return bf("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,n=0,s=0){return pM(this,e,n,s),this}chain(...e){return ta(this,...e),this}fan(...e){return e.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),we(this.input)&&(this.input instanceof oe?this.input.dispose():Qi(this.input)&&this.input.disconnect()),we(this.output)&&(this.output instanceof oe?this.output.dispose():Qi(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function ta(...t){const e=t.shift();t.reduce((n,s)=>(n instanceof oe?n.connect(s):Qi(n)&&ls(n,s),s),e)}function ls(t,e,n=0,s=0){for(de(we(t),"Cannot connect from undefined node"),de(we(e),"Cannot connect to undefined node"),(e instanceof oe||Qi(e))&&de(e.numberOfInputs>0,"Cannot connect to node with no inputs"),de(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof oe||e instanceof Ne;)we(e.input)&&(e=e.input);for(;t instanceof oe;)we(t.output)&&(t=t.output);ea(e)?t.connect(e,n):t.connect(e,n,s)}function pM(t,e,n=0,s=0){if(we(e))for(;e instanceof oe;)e=e.input;for(;!Qi(t);)we(t.output)&&(t=t.output);ea(e)?t.disconnect(e,n):Qi(e)?t.disconnect(e,n,s):t.disconnect()}class Re extends oe{constructor(){const e=re(Re.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new Ne({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Be(this,"gain")}static getDefaults(){return Object.assign(oe.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class To extends oe{constructor(e){super(e),this.onended=Me,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Re({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const s=this.toSeconds(n);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(oe.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Me})}_startGain(e,n=1){de(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=e+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,e+s):this._gainNode.gain.exponentialApproachValueAtTime(n,e,s)):this._gainNode.gain.setValueAtTime(n,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){de(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.now()),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Me&&(this.onended(this),this.onended=Me,!this.context.isOffline)){const e=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),de(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Me,this}}class H0 extends To{constructor(){const e=re(H0.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),ls(this._source,this._gainNode),this.offset=new Ne({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(To.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Ie extends oe{constructor(){const e=re(Ie.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new H0({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(oe.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,n=0,s=0){return Sf(this,e,n,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,n){return this._param.setValueAtTime(e,n),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,n){return this._param.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,n){return this._param.exponentialRampToValueAtTime(e,n),this}exponentialRampTo(e,n,s){return this._param.exponentialRampTo(e,n,s),this}linearRampTo(e,n,s){return this._param.linearRampTo(e,n,s),this}targetRampTo(e,n,s){return this._param.targetRampTo(e,n,s),this}exponentialApproachValueAtTime(e,n,s){return this._param.exponentialApproachValueAtTime(e,n,s),this}setTargetAtTime(e,n,s){return this._param.setTargetAtTime(e,n,s),this}setValueCurveAtTime(e,n,s,i){return this._param.setValueCurveAtTime(e,n,s,i),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,n,s){return this._param.rampTo(e,n,s),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function Sf(t,e,n,s){(e instanceof Ne||ea(e)||e instanceof Ie&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof Ie&&(e.overridden=!0)),ls(t,e,n,s)}class U0 extends Ne{constructor(){const e=re(U0.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new qn(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Ne.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,n,s){n=this.toSeconds(n),this.setRampPoint(n);const i=this._fromType(e),r=this._events.get(n),a=Math.round(Math.max(1/s,1));for(let o=0;o<=a;o++){const l=s*o+n,c=this._exponentialApproach(r.time,r.value,i,s,l);this.linearRampToValueAtTime(this._toType(c),l)}return this}setValueAtTime(e,n){const s=this.toSeconds(n);super.setValueAtTime(e,n);const i=this._events.get(s),r=this._events.previousEvent(i),a=this._getTicksUntilEvent(r,s);return i.ticks=Math.max(a,0),this}linearRampToValueAtTime(e,n){const s=this.toSeconds(n);super.linearRampToValueAtTime(e,n);const i=this._events.get(s),r=this._events.previousEvent(i),a=this._getTicksUntilEvent(r,s);return i.ticks=Math.max(a,0),this}exponentialRampToValueAtTime(e,n){n=this.toSeconds(n);const s=this._fromType(e),i=this._events.get(n),r=Math.round(Math.max((n-i.time)*10,1)),a=(n-i.time)/r;for(let o=0;o<=r;o++){const l=a*o+i.time,c=this._exponentialInterpolate(i.time,i.value,n,s,l);this.linearRampToValueAtTime(this._toType(c),l)}return this}_getTicksUntilEvent(e,n){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Nn(e.ticks)){const a=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(a,e.time)}const s=this._fromType(this.getValueAtTime(e.time));let i=this._fromType(this.getValueAtTime(n));const r=this._events.get(n);return r&&r.time===n&&r.type==="setValueAtTime"&&(i=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-e.time)*(s+i)+e.ticks}getTicksAtTime(e){const n=this.toSeconds(e),s=this._events.get(n);return Math.max(this._getTicksUntilEvent(s,n),0)}getDurationOfTicks(e,n){const s=this.toSeconds(n),i=this.getTicksAtTime(n);return this.getTimeOfTick(i+e)-s}getTimeOfTick(e){const n=this._events.get(e,"ticks"),s=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&s&&s.type==="linearRampToValueAtTime"&&n.value!==s.value){const i=this._fromType(this.getValueAtTime(n.time)),a=(this._fromType(this.getValueAtTime(s.time))-i)/(s.time-n.time),o=Math.sqrt(Math.pow(i,2)-2*a*(n.ticks-e)),l=(-i+o)/a,c=(-i-o)/a;return(l>0?l:c)+n.time}else return n?n.value===0?1/0:n.time+(e-n.ticks)/n.value:e/this._initialValue}ticksToTime(e,n){return this.getDurationOfTicks(e,n)}timeToTicks(e,n){const s=this.toSeconds(n),i=this.toSeconds(e),r=this.getTicksAtTime(s);return this.getTicksAtTime(s+i)-r}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const n=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class G0 extends Ie{constructor(){const e=re(G0.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new U0({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(Ie.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,n){return this._param.ticksToTime(e,n)}timeToTicks(e,n){return this._param.timeToTicks(e,n)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,n){return this._param.getDurationOfTicks(e,n)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class q0 extends Mt{constructor(){const e=re(q0.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new Wc,this._tickOffset=new qn,this._ticksAtTime=new qn,this._secondsAtTime=new qn,this.frequency=new G0({context:this.context,units:e.units,value:e.frequency}),Be(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Mt.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,n){const s=this.toSeconds(e);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),we(n)&&this.setTicksAtTime(n,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(e){const n=this.toSeconds(e);if(this._state.getValueAtTime(n)==="stopped"){const s=this._state.get(n);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const n=this.toSeconds(e),s=this._state.getLastState("stopped",n),i=this._ticksAtTime.get(n),r={state:"paused",time:n};this._state.add(r);let a=i||s,o=i?i.ticks:0,l=null;return this._state.forEachBetween(a.time,n+this.sampleTime,c=>{let u=a.time;const d=this._tickOffset.get(c.time);d&&d.time>=a.time&&(o=d.ticks,u=d.time),a.state==="started"&&c.state!=="started"&&(o+=this.frequency.getTicksAtTime(c.time)-this.frequency.getTicksAtTime(u),c.time!==r.time&&(l={state:c.state,time:c.time,ticks:o})),a=c}),this._state.remove(r),l&&this._ticksAtTime.add(l),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const n=this.now(),s=this.frequency.timeToTicks(e,n);this.setTicksAtTime(s,n)}getSecondsAtTime(e){e=this.toSeconds(e);const n=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);const i=this._secondsAtTime.get(e);let r=i||n,a=i?i.seconds:0,o=null;return this._state.forEachBetween(r.time,e+this.sampleTime,l=>{let c=r.time;const u=this._tickOffset.get(l.time);u&&u.time>=r.time&&(a=u.seconds,c=u.time),r.state==="started"&&l.state!=="started"&&(a+=l.time-c,l.time!==s.time&&(o={state:l.state,time:l.time,seconds:a})),r=l}),this._state.remove(s),o&&this._secondsAtTime.add(o),a}setTicksAtTime(e,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,n),ticks:e,time:n}),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,n=this.now()){const s=this._tickOffset.get(n),i=this._state.get(n),r=Math.max(s.time,i.time),a=this.frequency.getTicksAtTime(r)+e-s.ticks;return this.frequency.getTimeOfTick(a)}forEachTickBetween(e,n,s){let i=this._state.get(e);this._state.forEachBetween(e,n,a=>{i&&i.state==="started"&&a.state!=="started"&&this.forEachTickBetween(Math.max(i.time,e),a.time-this.sampleTime,s),i=a});let r=null;if(i&&i.state==="started"){const a=Math.max(i.time,e),o=this.frequency.getTicksAtTime(a),l=this.frequency.getTicksAtTime(i.time),c=o-l;let u=Math.ceil(c)-c;u=es(u,1)?0:u;let d=this.frequency.getTimeOfTick(o+u);for(;d<n;){try{s(d,Math.round(this.getTicksAtTime(d)))}catch(h){r=h;break}d+=this.frequency.getDurationOfTicks(1,d)}}if(r)throw r;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Cf extends Mt{constructor(){const e=re(Cf.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=Me,this._lastUpdate=0,this._state=new Wc("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new q0({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Be(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Mt.getDefaults(),{callback:Me,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,n){iM(this.context);const s=this.toSeconds(e);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,n),s<this._lastUpdate&&this.emit("start",s,n)),this}stop(e){const n=this.toSeconds(e);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,n){return this._tickSource.setTicksAtTime(e,n),this}getTimeOfTick(e,n=this.now()){return this._tickSource.getTimeOfTick(e,n)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,n){const s=this.toSeconds(n),i=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(i+e,s)}_loop(){const e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,s=>{switch(s.state){case"started":const i=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,i);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(e,n,(s,i)=>{this.callback(s,i)}))}getStateAtTime(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Uc.mixin(Cf);class hh extends oe{constructor(){const e=re(hh.getDefaults(),arguments,["delayTime","maxDelay"]);super(e),this.name="Delay";const n=this.toSeconds(e.maxDelay);this._maxDelay=Math.max(n,this.toSeconds(e.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(n),this.delayTime=new Ne({context:this.context,param:this._delayNode.delayTime,units:"time",value:e.delayTime,minValue:0,maxValue:this.maxDelay}),Be(this,"delayTime")}static getDefaults(){return Object.assign(oe.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class Ls extends oe{constructor(){const e=re(Ls.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new Re({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Be(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(oe.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class W0 extends oe{constructor(){const e=re(W0.getDefaults(),arguments);super(e),this.name="Destination",this.input=new Ls({context:this.context}),this.output=new Re({context:this.context}),this.volume=this.input.volume,ta(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(oe.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),ta(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}xf(t=>{t.destination=new W0({context:t})});_f(t=>{t.destination.dispose()});class Vq extends oe{constructor(){super(...arguments),this.name="Listener",this.positionX=new Ne({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Ne({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Ne({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Ne({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Ne({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Ne({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Ne({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Ne({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Ne({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(oe.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}xf(t=>{t.listener=new Vq({context:t})});_f(t=>{t.listener.dispose()});function zq(t,e){return ct(this,arguments,void 0,function*(n,s,i=2,r=Qt().sampleRate){const a=Qt(),o=new qc(i,s,r);Jg(o),yield n(o);const l=o.render();Jg(a);const c=yield l;return new ze(c)})}class $0 extends gi{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=re($0.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(n=>{this._loadingCount++;const s=e.urls[n];this.add(n,s,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Me,onload:Me,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return de(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,n])=>n.loaded)}add(e,n,s=Me,i=Me){return ui(n)?(this.baseUrl&&n.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new ze(this.baseUrl+n,s,i))):this._buffers.set(e.toString(),new ze(n,s,i)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class fh extends wn{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return jr(super._frequencyToUnits(e))}_ticksToUnits(e){return jr(super._ticksToUnits(e))}_beatsToUnits(e){return jr(super._beatsToUnits(e))}_secondsToUnits(e){return jr(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return fM(this.toMidi())}transpose(e){return new fh(this.context,this.toMidi()+e)}}class wt extends so{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class Fq extends Mt{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new qn,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,n){return this._events.add({callback:e,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,n=>{e-n.time<=this.expiration&&n.callback(),this._events.remove(n)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}xf(t=>{t.draw=new Fq({context:t})});_f(t=>{t.draw.dispose()});class Hq extends gi{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){de(we(e.time),"Events must have a time property"),de(we(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let n=new Uq(e.time,e.time+e.duration,e);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(e){if(this._root!==null){const n=[];this._root.search(e.time,n);for(const s of n)if(s.event===e){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,n=>this.remove(n)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,n){e.parent!==null?(e.isLeftChild()?e.parent.left=n:e.parent.right=n,this._rebalance(e.parent)):this._setRoot(n)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const n=e.getBalance();let s,i=null;if(n>0)if(e.left.right===null)s=e.left,s.right=e.right,i=s;else{for(s=e.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,i=s.parent,s.left=e.left,s.right=e.right)}else if(e.right.left===null)s=e.right,s.left=e.left,i=s;else{for(s=e.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,i=s.parent,s.left=e.left,s.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=s:e.parent.right=s:this._setRoot(s),i&&this._rebalance(i)}e.dispose()}_rotateLeft(e){const n=e.parent,s=e.isLeftChild(),i=e.right;i&&(e.right=i.left,i.left=e),n!==null?s?n.left=i:n.right=i:this._setRoot(i)}_rotateRight(e){const n=e.parent,s=e.isLeftChild(),i=e.left;i&&(e.left=i.right,i.right=e),n!==null?s?n.left=i:n.right=i:this._setRoot(i)}_rebalance(e){const n=e.getBalance();n>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):n<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const n=[];if(this._root.search(e,n),n.length>0){let s=n[0];for(let i=1;i<n.length;i++)n[i].low>s.low&&(s=n[i]);return s.event}}return null}forEach(e){if(this._root!==null){const n=[];this._root.traverse(s=>n.push(s)),n.forEach(s=>{s.event&&e(s.event)})}return this}forEachAtTime(e,n){if(this._root!==null){const s=[];this._root.search(e,s),s.forEach(i=>{i.event&&n(i.event)})}return this}forEachFrom(e,n){if(this._root!==null){const s=[];this._root.searchAfter(e,s),s.forEach(i=>{i.event&&n(i.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class Uq{constructor(e,n,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=e,this.high=n,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,n){e>this.max||(this.left!==null&&this.left.search(e,n),this.low<=e&&this.high>e&&n.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,n))}searchAfter(e,n){this.low>=e&&(n.push(this),this.left!==null&&this.left.searchAfter(e,n)),this.right!==null&&this.right.searchAfter(e,n)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Gq extends gi{constructor(e){super(),this.name="TimelineValue",this._timeline=new qn({memory:10}),this._initialValue=e}set(e,n){return this._timeline.add({value:e,time:n}),this}get(e){const n=this._timeline.get(e);return n?n.value:this._initialValue}}class Ms extends oe{constructor(){super(re(Ms.getDefaults(),arguments,["context"]))}connect(e,n=0,s=0){return Sf(this,e,n,s),this}}class Zo extends Ms{constructor(){const e=re(Zo.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,dn(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):gq(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(Ie.getDefaults(),{length:1024})}setMap(e,n=1024){const s=new Float32Array(n);for(let i=0,r=n;i<r;i++){const a=i/(r-1)*2-1;s[i]=e(a,i)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const n=["none","2x","4x"].some(s=>s.includes(e));de(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Y0 extends Ms{constructor(){const e=re(Y0.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new Zo({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Ms.getDefaults(),{value:1})}_expFunc(e){return n=>Math.pow(Math.abs(n),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class cr{constructor(e,n){this.id=cr._eventId++,this._remainderTime=0;const s=Object.assign(cr.getDefaults(),n);this.transport=e,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:Me,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const n=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*n),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}cr._eventId=0;class K0 extends cr{constructor(e,n){super(e,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(K0.getDefaults(),n);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},cr.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return dh(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new wt(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){dh(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new wt(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const n=this.transport.getTicksAtTime(e);Co(n,this.time)&&(this._nextTick=this.floatTime+Math.ceil((n-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Tf extends Mt{constructor(){const e=re(Tf.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new Gq(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new qn,this._repeatedEvents=new Hq,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new Cf({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Be(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Mt.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,n){if(this._loop.get(e)&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),n=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const s=n%(this._swingTicks*2)/(this._swingTicks*2),i=Math.sin(s*Math.PI)*this._swingAmount;e+=new wt(this.context,this._swingTicks*2/3).toSeconds()*i}J_(!0),this._timeline.forEachAtTime(n,s=>s.invoke(e)),J_(!1)}schedule(e,n){const s=new cr(this,{callback:e,time:new so(this.context,n).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(e,n,s,i=1/0){const r=new K0(this,{callback:e,duration:new ns(this.context,i).toTicks(),interval:new ns(this.context,n).toTicks(),time:new so(this.context,s).toTicks()});return this._addEvent(r,this._repeatedEvents)}scheduleOnce(e,n){const s=new cr(this,{callback:e,once:!0,time:new so(this.context,n).toTicks()});return this._addEvent(s,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const n=this._scheduledEvents[e.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,n){return this._scheduledEvents[e.id.toString()]={event:e,timeline:n},n.add(e),e.id}cancel(e=0){const n=this.toTicks(e);return this._timeline.forEachFrom(n,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(n,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(e,n)=>{n=new wt(this.context,n).toSeconds(),this.emit("start",e,n)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,n){this.context.resume();let s;return we(n)&&(s=this.toTicks(n)),this._clock.start(e,s),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){dn(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new ns(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new ns(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new wt(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),n=this._clock.getTicksAtTime(e);return new wt(this.context,n).toBarsBeatsSixteenths()}set position(e){const n=this.toTicks(e);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(e){const n=this.now(),s=this._clock.frequency.timeToTicks(e,n);this.ticks=s}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const n=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(n),i=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,n),r=n+i;this.emit("stop",r),this._clock.setTicksAtTime(e,r),this.emit("start",r,this._clock.getSecondsAtTime(r))}else this.emit("ticks",n),this._clock.setTicksAtTime(e,n)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const n=this.now(),s=this.getTicksAtTime(n),i=e-s%e;return this._clock.nextTickTime(i,n)}}syncSignal(e,n){const s=this.now();let i=this.bpm,r=1/(60/i.getValueAtTime(s)/this.PPQ),a=[];if(e.units==="time"){const l=.015625/r,c=new Re(l),u=new Y0(-1),d=new Re(l);i.chain(c,u,d),i=d,r=1/r,a=[c,u,d]}n||(e.getValueAtTime(s)!==0?n=e.getValueAtTime(s)/r:n=0);const o=new Re(n);return i.connect(o),o.connect(e._param),a.push(o),this._syncedSignals.push({initial:e.value,nodes:a,signal:e}),e.value=0,this}unsyncSignal(e){for(let n=this._syncedSignals.length-1;n>=0;n--){const s=this._syncedSignals[n];s.signal===e&&(s.nodes.forEach(i=>i.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),z0(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Uc.mixin(Tf);xf(t=>{t.transport=new Tf({context:t})});_f(t=>{t.transport.dispose()});class Ut extends oe{constructor(e){super(e),this.input=void 0,this._state=new Wc("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Me,this._syncedStop=Me,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Ls({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Be(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(oe.getDefaults(),{mute:!1,onstop:Me,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,n,s){let i=Nn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(i=this._clampToCurrentTime(i),!this._synced&&this._state.getValueAtTime(i)==="started")de(Co(i,this._state.get(i).time),"Start time must be strictly greater than previous start time"),this._state.cancel(i),this._state.setStateAtTime("started",i),this.log("restart",i),this.restart(i,n,s);else if(this.log("start",i),this._state.setStateAtTime("started",i),this._synced){const r=this._state.get(i);r&&(r.offset=this.toSeconds(Cs(n,0)),r.duration=s?this.toSeconds(s):void 0);const a=this.context.transport.schedule(o=>{this._start(o,n,s)},i);this._scheduled.push(a),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>i&&this._syncedStart(this.now(),this.context.transport.seconds)}else iM(this.context),this._start(i,n,s);return this}stop(e){let n=Nn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||we(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const s=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(s)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(e,n,s){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,n,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,n)=>{if(Co(n,0)){const s=this._state.get(n);if(s&&s.state==="started"&&s.time!==n){const i=n-this.toSeconds(s.time);let r;s.duration&&(r=this.toSeconds(s.duration)-i),this._start(e,this.toSeconds(s.offset)+i,r)}}},this._syncedStop=e=>{const n=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Me,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class $c extends To{constructor(){const e=re($c.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,ls(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Ne({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new ze(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(To.getDefaults(),{url:new ze,loop:!1,loopEnd:0,loopStart:0,onload:Me,onerror:Me,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,n,s,i=1){de(this.buffer.loaded,"buffer is either not set or not loaded");const r=this.toSeconds(e);this._startGain(r,i),this.loop?n=Cs(n,this.loopStart):n=Cs(n,0);let a=Math.max(this.toSeconds(n),0);if(this.loop){const o=this.toSeconds(this.loopEnd)||this.buffer.duration,l=this.toSeconds(this.loopStart),c=o-l;Zg(a,o)&&(a=(a-l)%c+l),es(a,this.buffer.duration)&&(a=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,dh(a,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(r,a)),we(s)){let o=this.toSeconds(s);o=Math.max(o,0),this.stop(r+o)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class Eo extends Ut{constructor(){const e=re(Eo.getDefaults(),arguments,["type"]);super(e),this.name="Noise",this._source=null,this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Ut.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(de(e in ew,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const n=this.now();this._stop(n),this._start(n)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const n=ew[this._type];this._source=new $c({url:n,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(n.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const ba=44100*5,Zp=2,Gs={brown:null,pink:null,white:null},ew={get brown(){if(!Gs.brown){const t=[];for(let e=0;e<Zp;e++){const n=new Float32Array(ba);t[e]=n;let s=0;for(let i=0;i<ba;i++){const r=Math.random()*2-1;n[i]=(s+.02*r)/1.02,s=n[i],n[i]*=3.5}}Gs.brown=new ze().fromArray(t)}return Gs.brown},get pink(){if(!Gs.pink){const t=[];for(let e=0;e<Zp;e++){const n=new Float32Array(ba);t[e]=n;let s,i,r,a,o,l,c;s=i=r=a=o=l=c=0;for(let u=0;u<ba;u++){const d=Math.random()*2-1;s=.99886*s+d*.0555179,i=.99332*i+d*.0750759,r=.969*r+d*.153852,a=.8665*a+d*.3104856,o=.55*o+d*.5329522,l=-.7616*l-d*.016898,n[u]=s+i+r+a+o+l+c+d*.5362,n[u]*=.11,c=d*.115926}}Gs.pink=new ze().fromArray(t)}return Gs.pink},get white(){if(!Gs.white){const t=[];for(let e=0;e<Zp;e++){const n=new Float32Array(ba);t[e]=n;for(let s=0;s<ba;s++)n[s]=Math.random()*2-1}Gs.white=new ze().fromArray(t)}return Gs.white}};function ua(t,e){return ct(this,void 0,void 0,function*(){const n=e/t.context.sampleRate,s=new qc(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class X0 extends To{constructor(){const e=re(X0.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],ls(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Ne({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Ne({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Be(this,["frequency","detune"])}static getDefaults(){return Object.assign(To.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class lt extends Ut{constructor(){const e=re(lt.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new Ie({context:this.context,units:"frequency",value:e.frequency}),Be(this,"frequency"),this.detune=new Ie({context:this.context,units:"cents",value:e.detune}),Be(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Ut.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const n=this.toSeconds(e),s=new X0({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(e){const n=this.toSeconds(e);this._oscillator&&this._oscillator.stop(n)}_restart(e){const n=this.toSeconds(e);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return lt._periodicWaveCache.find(n=>n.phase===this._phase&&Eq(n.partials,this._partials));{const e=lt._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const n=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const s=this._getCachedPeriodicWave();if(we(s)){const{partials:i,wave:r}=s;this._wave=r,this._partials=i,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[i,r]=this._getRealImaginary(e,this._phase),a=this.context.createPeriodicWave(i,r);this._wave=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),lt._periodicWaveCache.push({imag:r,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:i,type:this._type,wave:this._wave}),lt._periodicWaveCache.length>100&&lt._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){Fn(e,0);let n=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(n=s[1]),this._type!=="custom")e===0?this.type=n:this.type=n+e.toString();else{const i=new Float32Array(e);this._partials.forEach((r,a)=>i[a]=r),this._partials=Array.from(i),this.type=this._type}}_getRealImaginary(e,n){let i=2048;const r=new Float32Array(i),a=new Float32Array(i);let o=1;if(e==="custom"){if(o=this._partials.length+1,this._partialCount=this._partials.length,i=o,this._partials.length===0)return[r,a]}else{const l=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);l?(o=parseInt(l[2],10)+1,this._partialCount=parseInt(l[2],10),e=l[1],o=Math.max(o,2),i=o):this._partialCount=0,this._partials=[]}for(let l=1;l<i;++l){const c=2/(l*Math.PI);let u;switch(e){case"sine":u=l<=o?1:0,this._partials[l-1]=u;break;case"square":u=l&1?2*c:0,this._partials[l-1]=u;break;case"sawtooth":u=c*(l&1?1:-1),this._partials[l-1]=u;break;case"triangle":l&1?u=2*(c*c)*(l-1>>1&1?-1:1):u=0,this._partials[l-1]=u;break;case"custom":u=this._partials[l-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}u!==0?(r[l]=-u*Math.sin(n*l),a[l]=u*Math.cos(n*l)):(r[l]=0,a[l]=0)}return[r,a]}_inverseFFT(e,n,s){let i=0;const r=e.length;for(let a=0;a<r;a++)i+=e[a]*Math.cos(a*s)+n[a]*Math.sin(a*s);return i}getInitialValue(){const[e,n]=this._getRealImaginary(this._type,0);let s=0;const i=Math.PI*2,r=32;for(let a=0;a<r;a++)s=Math.max(this._inverseFFT(e,n,a/r*i),s);return kq(-this._inverseFFT(e,n,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return ct(this,arguments,void 0,function*(e=1024){return ua(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}lt._periodicWaveCache=[];class mM extends Ms{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Zo({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class ur extends Ie{constructor(){const e=re(ur.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Re({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Ie.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Ef extends Ut{constructor(){const e=re(Ef.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new mM({context:this.context}),this._modulationNode=new Re({context:this.context}),this._carrier=new lt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new lt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new ur({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Be(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(lt.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return ct(this,arguments,void 0,function*(e=1024){return ua(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Yc extends Ut{constructor(){const e=re(Yc.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new Re({context:this.context,gain:0}),this._carrier=new lt({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new Ie({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new lt({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new ur({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new ur({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Be(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(lt.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return ct(this,arguments,void 0,function*(e=1024){return ua(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Kc extends Ut{constructor(){const e=re(Kc.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new Re({context:this.context,gain:0}),this._thresh=new Zo({context:this.context,mapping:n=>n<=0?-1:1}),this.width=new Ie({context:this.context,units:"audioRange",value:e.width}),this._triangle=new lt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Be(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Ut.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return ct(this,arguments,void 0,function*(e=1024){return ua(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Af extends Ut{constructor(){const e=re(Af.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new Ie({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Ie({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Be(this,["frequency","detune"])}static getDefaults(){return Object.assign(lt.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(n=>n.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(n=>n.stop(e))}_restart(e){this._forEach(n=>n.restart(e))}_forEach(e){for(let n=0;n<this._oscillators.length;n++)e(this._oscillators[n],n)}get type(){return this._type}set type(e){this._type=e,this._forEach(n=>n.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const n=-e/2,s=e/(this._oscillators.length-1);this._forEach((i,r)=>i.detune.value=n+s*r)}}get count(){return this._oscillators.length}set count(e){if(Fn(e,1),this._oscillators.length!==e){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<e;n++){const s=new lt({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):Me});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[n]=s}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((n,s)=>n.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(n=>n.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(n=>n.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(n=>n.partialCount=e),this._type=this._oscillators[0].type}asArray(){return ct(this,arguments,void 0,function*(e=1024){return ua(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class kf extends Ut{constructor(){const e=re(kf.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new ur({context:this.context,value:2}),this._pulse=new Kc({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new lt({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Be(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Ut.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return ct(this,arguments,void 0,function*(e=1024){return ua(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const tw={am:Ef,fat:Af,fm:Yc,oscillator:lt,pulse:Kc,pwm:kf};class ph extends Ut{constructor(){const e=re(ph.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new Ie({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Ie({context:this.context,units:"cents",value:e.detune}),Be(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(lt.getDefaults(),Yc.getDefaults(),Ef.getDefaults(),Af.getDefaults(),Kc.getDefaults(),kf.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const n=tw[e],s=this.now();if(this._oscillator){const i=this._oscillator;i.stop(s),this.context.setTimeout(()=>i.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),e==="fm"?this.type="fm"+n:e==="am"?this.type="am"+n:e==="fat"?this.type="fat"+n:e==="oscillator"?this.type=n:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,n){return e instanceof tw[n]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&os(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&os(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&ui(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return ct(this,arguments,void 0,function*(e=1024){return ua(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Q0 extends Ie{constructor(){super(re(Q0.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new Re({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,ta(this._constantSource,this._sum)}static getDefaults(){return Object.assign(Ie.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Nf extends Ms{constructor(){const e=re(Nf.getDefaults(),arguments,["min","max"]);super(e),this.name="Scale",this._mult=this.input=new ur({context:this.context,value:e.max-e.min}),this._add=this.output=new Q0({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Ms.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class Z0 extends Ms{constructor(){super(re(Z0.getDefaults(),arguments)),this.name="Zero",this._gain=new Re({context:this.context}),this.output=this._gain,this.input=void 0,ls(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),pM(this.context.getConstant(0),this._gain),this}}class mh extends oe{constructor(){const e=re(mh.getDefaults(),arguments,["frequency","min","max"]);super(e),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=Ne.prototype._fromType,this._toType=Ne.prototype._toType,this._is=Ne.prototype._is,this._clampValue=Ne.prototype._clampValue,this._oscillator=new lt(e),this.frequency=this._oscillator.frequency,this._amplitudeGain=new Re({context:this.context,gain:e.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new Ie({context:this.context,units:"audioRange",value:0}),this._zeros=new Z0({context:this.context}),this._a2g=new mM({context:this.context}),this._scaler=this.output=new Nf({context:this.context,max:e.max,min:e.min}),this.units=e.units,this.min=e.min,this.max=e.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),Be(this,["amplitude","frequency"]),this.phase=e.phase}static getDefaults(){return Object.assign(lt.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this}stop(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(e){e=this._fromType(e),this._scaler.min=e}get max(){return this._toType(this._scaler.max)}set max(e){e=this._fromType(e),this._scaler.max=e}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(e){this._oscillator.partials=e,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e,this._setStoppedValue()}get units(){return this._units}set units(e){const n=this.min,s=this.max;this._units=e,this.min=n,this.max=s}get state(){return this._oscillator.state}connect(e,n,s){return(e instanceof Ne||e instanceof Ie)&&(this.convert=e.convert,this.units=e.units),Sf(this,e,n,s),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function gM(t,e=1/0){const n=new WeakMap;return function(s,i){Reflect.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(r){Fn(r,t,e),n.set(this,r)}})}}function yi(t,e=1/0){const n=new WeakMap;return function(s,i){Reflect.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(r){Fn(this.toSeconds(r),t,e),n.set(this,r)}})}}class Mf extends Ut{constructor(){const e=re(Mf.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new ze({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Ut.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Me,onerror:Me,playbackRate:1,reverse:!1})}load(e){return ct(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=Me){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,n,s){return super.start(e,n,s),this}_start(e,n,s){this._loop?n=Cs(n,this._loopStart):n=Cs(n,0);const i=this.toSeconds(n),r=s;s=Cs(s,Math.max(this._buffer.duration-i,0));let a=this.toSeconds(s);a=a/this._playbackRate,e=this.toSeconds(e);const o=new $c({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+a),this._state.setStateAtTime("stopped",e+a,{implicitEnd:!0})),this._activeSources.add(o),this._loop&&Nn(r)?o.start(e,i):o.start(e,i,a-this.toSeconds(this.fadeOut))}_stop(e){const n=this.toSeconds(e);this._activeSources.forEach(s=>s.stop(n))}restart(e,n,s){return super.restart(e,n,s),this}_restart(e,n,s){var i;(i=[...this._activeSources].pop())===null||i===void 0||i.stop(e),this._start(e,n,s)}seek(e,n){const s=this.toSeconds(n);if(this._state.getValueAtTime(s)==="started"){const i=this.toSeconds(e);this._stop(s),this._start(s,i)}return this}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Fn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Fn(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(n=>{n.loop=e}),e)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const n=this.now(),s=this._state.getNextState("stopped",n);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(i=>i.cancelStop())),this._activeSources.forEach(i=>{i.playbackRate.setValueAtTime(e,n)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}ps([yi(0)],Mf.prototype,"fadeIn",void 0);ps([yi(0)],Mf.prototype,"fadeOut",void 0);class qq extends Ms{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new Zo({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class cs extends oe{constructor(){const e=re(cs.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new Ie({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(oe.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,n){if(ui(e))return e;{let s;for(s in Mu)if(Mu[s][n]===e)return s;return e}}_setCurve(e,n,s){if(ui(s)&&Reflect.has(Mu,s)){const i=Mu[s];Xi(i)?e!=="_decayCurve"&&(this[e]=i[n]):this[e]=i}else if(dn(s)&&e!=="_decayCurve")this[e]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,n=1){this.log("triggerAttack",e,n),e=this.toSeconds(e);let i=this.toSeconds(this.attack);const r=this.toSeconds(this.decay),a=this.getValueAtTime(e);if(a>0){const o=1/i;i=(1-a)/o}if(i<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(n,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,i,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,i,e);else{this._sig.cancelAndHoldAtTime(e);let o=this._attackCurve;for(let l=1;l<o.length;l++)if(o[l-1]<=a&&a<=o[l]){o=this._attackCurve.slice(l),o[0]=a;break}this._sig.setValueCurveAtTime(o,e,i,n)}if(r&&this.sustain<1){const o=n*this.sustain,l=e+i;this.log("decay",l),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(o,r+l):this._sig.exponentialApproachValueAtTime(o,l,r)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const n=this.getValueAtTime(e);if(n>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,e):(de(dn(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,n))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,n,s=1){return n=this.toSeconds(n),this.triggerAttack(n,s),this.triggerRelease(n+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,n=0,s=0){return Sf(this,e,n,s),this}asArray(){return ct(this,arguments,void 0,function*(e=1024){const n=e/this.context.sampleRate,s=new qc(1,n,this.context.sampleRate),i=this.toSeconds(this.attack)+this.toSeconds(this.decay),r=i+this.toSeconds(this.release),a=r*.1,o=r+a,l=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/o,decay:n*this.toSeconds(this.decay)/o,release:n*this.toSeconds(this.release)/o,context:s}));return l._sig.toDestination(),l.triggerAttackRelease(n*(i+a)/o,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}ps([yi(0)],cs.prototype,"attack",void 0);ps([yi(0)],cs.prototype,"decay",void 0);ps([gM(0,1)],cs.prototype,"sustain",void 0);ps([yi(0)],cs.prototype,"release",void 0);const Mu=(()=>{let e,n;const s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/127*(Math.PI/2));const i=[],r=6.4;for(e=0;e<127;e++){n=e/127;const h=Math.sin(n*(Math.PI*2)*r-Math.PI/2)+1;i[e]=h/10+n*.83}i[127]=1;const a=[],o=5;for(e=0;e<128;e++)a[e]=Math.ceil(e/127*o)/o;const l=[];for(e=0;e<128;e++)n=e/127,l[e]=.5*(1-Math.cos(Math.PI*n));const c=[];for(e=0;e<128;e++){n=e/127;const h=Math.pow(n,3)*4+.2,p=Math.cos(h*Math.PI*2*n);c[e]=Math.abs(p*(1-n))}function u(h){const p=new Array(h.length);for(let m=0;m<h.length;m++)p[m]=1-h[m];return p}function d(h){return h.slice(0).reverse()}return{bounce:{In:u(c),Out:c},cosine:{In:s,Out:d(s)},exponential:"exponential",linear:"linear",ripple:{In:i,Out:u(i)},sine:{In:l,Out:u(l)},step:{In:a,Out:u(a)}}})();class Rs extends oe{constructor(){const e=re(Rs.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=n=>this._original_triggerRelease(n),this._volume=this.output=new Ls({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Be(this,"volume")}static getDefaults(){return Object.assign(oe.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,n){const s=this["_original_"+e]=this[e];this[e]=(...i)=>{const r=i[n],a=this.context.transport.schedule(o=>{i[n]=o,s.apply(this,i)},r);this._scheduledEvents.push(a)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,n,s,i){const r=this.toSeconds(s),a=this.toSeconds(n);return this.triggerAttack(e,r,i),this.triggerRelease(r+a),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class di extends Rs{constructor(){const e=re(di.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Rs.getDefaults(),{detune:0,onsilence:Me,portamento:0})}triggerAttack(e,n,s=1){this.log("triggerAttack",e,n,s);const i=this.toSeconds(n);return this._triggerEnvelopeAttack(i,s),this.setNote(e,i),this}triggerRelease(e){this.log("triggerRelease",e);const n=this.toSeconds(e);return this._triggerEnvelopeRelease(n),this}setNote(e,n){const s=this.toSeconds(n),i=e instanceof wn?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const r=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(i,r,s)}else this.frequency.setValueAtTime(i,s);return this}}ps([yi(0)],di.prototype,"portamento",void 0);class Rf extends cs{constructor(){super(re(Rf.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Re({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class hi extends di{constructor(){const e=re(hi.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new ph(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Rf(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Be(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(di.getDefaults(),{envelope:Object.assign(So(cs.getDefaults(),Object.keys(oe.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(So(ph.getDefaults(),[...Object.keys(Ut.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,n){if(this.envelope.triggerAttack(e,n),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),i=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+i)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class gh extends oe{constructor(){const e=re(gh.getDefaults(),arguments,["frequency","type"]);super(e),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Ne({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new Ne({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new Ne({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new Ne({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(oe.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){de(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const n=new Float32Array(e);for(let a=0;a<e;a++){const l=Math.pow(a/e,2)*19980+20;n[a]=l}const s=new Float32Array(e),i=new Float32Array(e),r=this.context.createBiquadFilter();return r.type=this.type,r.Q.value=this.Q.value,r.frequency.value=this.frequency.value,r.gain.value=this.gain.value,r.getFrequencyResponse(n,s,i),s}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class da extends oe{constructor(){const e=re(da.getDefaults(),arguments,["frequency","type","rolloff"]);super(e),this.name="Filter",this.input=new Re({context:this.context}),this.output=new Re({context:this.context}),this._filters=[],this._filters=[],this.Q=new Ie({context:this.context,units:"positive",value:e.Q}),this.frequency=new Ie({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Ie({context:this.context,units:"cents",value:e.detune}),this.gain=new Ie({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,Be(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(oe.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){de(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(s=>s.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const n=os(e)?e:parseInt(e,10),s=[-12,-24,-48,-96];let i=s.indexOf(n);de(i!==-1,`rolloff can only be ${s.join(", ")}`),i+=1,this._rolloff=n,this.input.disconnect(),this._filters.forEach(r=>r.disconnect()),this._filters=new Array(i);for(let r=0;r<i;r++){const a=new gh({context:this.context});a.type=this._type,this.frequency.connect(a.frequency),this.detune.connect(a.detune),this.Q.connect(a.Q),this.gain.connect(a.gain),this._filters[r]=a}this._internalChannels=this._filters,ta(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const n=new gh({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),s=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{n.getFrequencyResponse(e).forEach((r,a)=>s[a]*=r)}),n.dispose(),s}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),z0(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}const nw=[1,1.483,1.932,2.546,2.63,3.897];class Ts extends di{constructor(){const e=re(Ts.getDefaults(),arguments);super(e),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[],this.detune=new Ie({context:this.context,units:"cents",value:e.detune}),this.frequency=new Ie({context:this.context,units:"frequency"}),this._amplitude=new Re({context:this.context,gain:0}).connect(this.output),this._highpass=new da({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let n=0;n<nw.length;n++){const s=new Yc({context:this.context,harmonicity:e.harmonicity,modulationIndex:e.modulationIndex,modulationType:"square",onstop:n===0?()=>this.onsilence(this):Me,type:"square"});s.connect(this._highpass),this._oscillators[n]=s;const i=new ur({context:this.context,value:nw[n]});this._freqMultipliers[n]=i,this.frequency.chain(i,s.frequency),this.detune.connect(s.detune)}this._filterFreqScaler=new Nf({context:this.context,max:7e3,min:this.toFrequency(e.resonance)}),this.envelope=new cs({attack:e.envelope.attack,attackCurve:"linear",context:this.context,decay:e.envelope.decay,release:e.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=e.octaves,this.octaves=e.octaves}static getDefaults(){return Zi(di.getDefaults(),{envelope:Object.assign(So(cs.getDefaults(),Object.keys(oe.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(e,n=1){return this.envelope.triggerAttack(e,n),this._oscillators.forEach(s=>s.start(e)),this.envelope.sustain===0&&this._oscillators.forEach(s=>{s.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))}),this}_triggerEnvelopeRelease(e){return this.envelope.triggerRelease(e),this._oscillators.forEach(n=>n.stop(e+this.toSeconds(this.envelope.release))),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(e){this._oscillators.forEach(n=>n.modulationIndex.value=e)}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(e){this._oscillators.forEach(n=>n.harmonicity.value=e)}get resonance(){return this._filterFreqScaler.min}set resonance(e){this._filterFreqScaler.min=this.toFrequency(e),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,e)}dispose(){return super.dispose(),this._oscillators.forEach(e=>e.dispose()),this._freqMultipliers.forEach(e=>e.dispose()),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class Wn extends hi{constructor(){const e=re(Wn.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Be(this,["oscillator","envelope"])}static getDefaults(){return Zi(di.getDefaults(),hi.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,n){const s=this.toSeconds(n),i=this.toFrequency(e instanceof wn?e.toFrequency():e),r=i*this.octaves;return this.oscillator.frequency.setValueAtTime(r,s),this.oscillator.frequency.exponentialRampToValueAtTime(i,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}ps([gM(0)],Wn.prototype,"octaves",void 0);ps([yi(0)],Wn.prototype,"pitchDecay",void 0);class zt extends Rs{constructor(){const e=re(zt.getDefaults(),arguments);super(e),this.name="NoiseSynth",this.noise=new Eo(Object.assign({context:this.context},e.noise)),this.envelope=new Rf(Object.assign({context:this.context},e.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(Rs.getDefaults(),{envelope:Object.assign(So(cs.getDefaults(),Object.keys(oe.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(So(Eo.getDefaults(),Object.keys(Ut.getDefaults())),{type:"white"})})}triggerAttack(e,n=1){return e=this.toSeconds(e),this.envelope.triggerAttack(e,n),this.noise.start(e),this.envelope.sustain===0&&this.noise.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(e){return e=this.toSeconds(e),this.envelope.triggerRelease(e),this.noise.stop(e+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(e,n,s=1){return n=this.toSeconds(n),e=this.toSeconds(e),this.triggerAttack(n,s),this.triggerRelease(n+e),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const yM=new Set;function J0(t){yM.add(t)}function vM(t,e){const n=`registerProcessor("${t}", ${e})`;yM.add(n)}const Wq=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;J0(Wq);const $q=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;J0($q);const Yq=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;J0(Yq);const Kq="feedback-comb-filter",Xq=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;vM(Kq,Xq);class Xc extends Rs{constructor(){const e=re(Xc.getDefaults(),arguments,["voice","options"]);super(e),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=i=>this.releaseAll(i),de(!os(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const n=e.voice.getDefaults();this.options=Object.assign(n,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const s=this._voices.indexOf(this._dummyVoice);this._voices.splice(s,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Rs.getDefaults(),{maxPolyphony:32,options:{},voice:hi})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const n=this._activeVoices.findIndex(s=>s.voice===e);this._activeVoices.splice(n,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return de(e instanceof di,"Voice must extend Monophonic class"),e.connect(this.output),this._voices.push(e),e}else bf("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),n=this._voices.indexOf(e);this._voices.splice(n,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,n,s){e.forEach(i=>{const r=new fh(this.context,i).toMidi(),a=this._getNextAvailableVoice();a&&(a.triggerAttack(i,n,s),this._activeVoices.push({midi:r,voice:a,released:!1}),this.log("triggerAttack",i,n))})}_triggerRelease(e,n){e.forEach(s=>{const i=new fh(this.context,s).toMidi(),r=this._activeVoices.find(({midi:a,released:o})=>a===i&&!o);r&&(r.voice.triggerRelease(n),r.released=!0,this.log("triggerRelease",s,n))})}_scheduleEvent(e,n,s,i){de(!this.disposed,"Synth was already disposed"),s<=this.now()?e==="attack"?this._triggerAttack(n,s,i):this._triggerRelease(n,s):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(e,n,s,i)},s-this.now())}triggerAttack(e,n,s){Array.isArray(e)||(e=[e]);const i=this.toSeconds(n);return this._scheduleEvent("attack",e,i,s),this}triggerRelease(e,n){Array.isArray(e)||(e=[e]);const s=this.toSeconds(n);return this._scheduleEvent("release",e,s),this}triggerAttackRelease(e,n,s,i){const r=this.toSeconds(s);if(this.triggerAttack(e,r,i),dn(n)){de(dn(e),"If the duration is an array, the notes must also be an array"),e=e;for(let a=0;a<e.length;a++){const o=n[Math.min(a,n.length-1)],l=this.toSeconds(o);de(l>0,"The duration must be greater than 0"),this.triggerRelease(e[a],r+l)}}else{const a=this.toSeconds(n);de(a>0,"The duration must be greater than 0"),this.triggerRelease(e,r+a)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(e){const n=So(e,["onsilence","context"]);return this.options=Zi(this.options,n),this._voices.forEach(s=>s.set(n)),this._dummyVoice.set(n),this}get(){return this._dummyVoice.get()}releaseAll(e){const n=this.toSeconds(e);return this._activeVoices.forEach(({voice:s})=>{s.triggerRelease(n)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Df extends Rs{constructor(){const e=re(Df.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const n={};Object.keys(e.urls).forEach(s=>{const i=parseInt(s,10);if(de(Nu(s)||os(i)&&isFinite(i),`url key is neither a note or midi pitch: ${s}`),Nu(s)){const r=new wn(this.context,s).toMidi();n[r]=e.urls[s]}else os(i)&&isFinite(i)&&(n[i]=e.urls[i])}),this._buffers=new $0({urls:n,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Rs.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Me,onerror:Me,release:.1,urls:{}})}_findClosest(e){let s=0;for(;s<96;){if(this._buffers.has(e+s))return-s;if(this._buffers.has(e-s))return s;s++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,n,s=1){return this.log("triggerAttack",e,n,s),Array.isArray(e)||(e=[e]),e.forEach(i=>{const r=hM(new wn(this.context,i).toFrequency()),a=Math.round(r),o=r-a,l=this._findClosest(a),c=a-l,u=this._buffers.get(c),d=dM(l+o),h=new $c({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:d}).connect(this.output);h.start(n,0,u.duration/d,s),dn(this._activeSources.get(a))||this._activeSources.set(a,[]),this._activeSources.get(a).push(h),h.onended=()=>{if(this._activeSources&&this._activeSources.has(a)){const p=this._activeSources.get(a),m=p.indexOf(h);m!==-1&&p.splice(m,1)}}}),this}triggerRelease(e,n){return this.log("triggerRelease",e,n),Array.isArray(e)||(e=[e]),e.forEach(s=>{const i=new wn(this.context,s).toMidi();if(this._activeSources.has(i)&&this._activeSources.get(i).length){const r=this._activeSources.get(i);n=this.toSeconds(n),r.forEach(a=>{a.stop(n)}),this._activeSources.set(i,[])}}),this}releaseAll(e){const n=this.toSeconds(e);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,n,s,i=1){const r=this.toSeconds(s);return this.triggerAttack(e,r,i),dn(n)?(de(dn(e),"notes must be an array when duration is array"),e.forEach((a,o)=>{const l=n[Math.min(o,n.length-1)];this.triggerRelease(a,r+this.toSeconds(l))})):this.triggerRelease(e,r+this.toSeconds(n)),this}add(e,n,s){if(de(Nu(e)||isFinite(e),`note must be a pitch or midi: ${e}`),Nu(e)){const i=new wn(this.context,e).toMidi();this._buffers.add(i,n,s)}else this._buffers.add(e,n,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}ps([yi(0)],Df.prototype,"attack",void 0);ps([yi(0)],Df.prototype,"release",void 0);class Pr extends Mt{constructor(){const e=re(Pr.getDefaults(),arguments,["callback","value"]);super(e),this.name="ToneEvent",this._state=new Wc("stopped"),this._startOffset=0,this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._playbackRate=e.playbackRate,this._probability=e.probability,this._humanize=e.humanize,this.mute=e.mute,this._playbackRate=e.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(Mt.getDefaults(),{callback:Me,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(e=-1){this._state.forEachFrom(e,n=>{let s;if(n.state==="started"){n.id!==-1&&this.context.transport.clear(n.id);const i=n.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||os(this._loop)&&this._loop>1){s=1/0,os(this._loop)&&(s=this._loop*this._getLoopDuration());const r=this._state.getAfter(i);r!==null&&(s=Math.min(s,r.time-i)),s!==1/0&&(s=new wt(this.context,s));const a=new wt(this.context,this._getLoopDuration());n.id=this.context.transport.scheduleRepeat(this._tick.bind(this),a,new wt(this.context,i),s)}else n.id=this.context.transport.schedule(this._tick.bind(this),new wt(this.context,i))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e}get probability(){return this._probability}set probability(e){this._probability=e}get humanize(){return this._humanize}set humanize(e){this._humanize=e}start(e){const n=this.toTicks(e);return this._state.getValueAtTime(n)==="stopped"&&(this._state.add({id:-1,state:"started",time:n}),this._rescheduleEvents(n)),this}stop(e){this.cancel(e);const n=this.toTicks(e);if(this._state.getValueAtTime(n)==="started"){this._state.setStateAtTime("stopped",n,{id:-1});const s=this._state.getBefore(n);let i=n;s!==null&&(i=s.time),this._rescheduleEvents(i)}return this}cancel(e){e=Cs(e,-1/0);const n=this.toTicks(e);return this._state.forEachFrom(n,s=>{this.context.transport.clear(s.id)}),this._state.cancel(n),this}_tick(e){const n=this.context.transport.getTicksAtTime(e);if(!this.mute&&this._state.getValueAtTime(n)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let s=.02;sM(this.humanize)||(s=this.toSeconds(this.humanize)),e+=(Math.random()*2-1)*s}this.callback(e,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(e){this._loop=e,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._rescheduleEvents()}get loopEnd(){return new wt(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._rescheduleEvents()}get loopStart(){return new wt(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const e=this.context.transport.ticks,n=this._state.get(e);if(n!==null&&n.state==="started"){const s=this._getLoopDuration();return(e-n.time)%s/s}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class Of extends Mt{constructor(){const e=re(Of.getDefaults(),arguments,["callback","interval"]);super(e),this.name="Loop",this._event=new Pr({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:e.interval,playbackRate:e.playbackRate,probability:e.probability,humanize:e.humanize}),this.callback=e.callback,this.iterations=e.iterations}static getDefaults(){return Object.assign(Mt.getDefaults(),{interval:"4n",callback:Me,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(e){return this._event.start(e),this}stop(e){return this._event.stop(e),this}cancel(e){return this._event.cancel(e),this}_tick(e){this.callback(e)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(e){this._event.loopEnd=e}get playbackRate(){return this._event.playbackRate}set playbackRate(e){this._event.playbackRate=e}get humanize(){return this._event.humanize}set humanize(e){this._event.humanize=e}get probability(){return this._event.probability}set probability(e){this._event.probability=e}get mute(){return this._event.mute}set mute(e){this._event.mute=e}get iterations(){return this._event.loop===!0?1/0:this._event.loop}set iterations(e){e===1/0?this._event.loop=!0:this._event.loop=e}dispose(){return super.dispose(),this._event.dispose(),this}}class dc extends Pr{constructor(){const e=re(dc.getDefaults(),arguments,["callback","events"]);super(e),this.name="Part",this._state=new Wc("stopped"),this._events=new Set,this._state.increasing=!0,e.events.forEach(n=>{dn(n)?this.add(n[0],n[1]):this.add(n)})}static getDefaults(){return Object.assign(Pr.getDefaults(),{events:[]})}start(e,n){const s=this.toTicks(e);if(this._state.getValueAtTime(s)!=="started"){n=Cs(n,this._loop?this._loopStart:0),this._loop?n=Cs(n,this._loopStart):n=Cs(n,0);const i=this.toTicks(n);this._state.add({id:-1,offset:i,state:"started",time:s}),this._forEach(r=>{this._startNote(r,s,i)})}return this}_startNote(e,n,s){n-=s,this._loop?e.startOffset>=this._loopStart&&e.startOffset<this._loopEnd?(e.startOffset<s&&(n+=this._getLoopDuration()),e.start(new wt(this.context,n))):e.startOffset<this._loopStart&&e.startOffset>=s&&(e.loop=!1,e.start(new wt(this.context,n))):e.startOffset>=s&&e.start(new wt(this.context,n))}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e,this._forEach(n=>{n.startOffset+=this._startOffset})}stop(e){const n=this.toTicks(e);return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._forEach(s=>{s.stop(e)}),this}at(e,n){const s=new so(this.context,e).toTicks(),i=new wt(this.context,1).toSeconds(),r=this._events.values();let a=r.next();for(;!a.done;){const o=a.value;if(Math.abs(s-o.startOffset)<i)return we(n)&&(o.value=n),o;a=r.next()}return we(n)?(this.add(e,n),this.at(e)):null}add(e,n){e instanceof Object&&Reflect.has(e,"time")&&(n=e,e=n.time);const s=this.toTicks(e);let i;return n instanceof Pr?(i=n,i.callback=this._tick.bind(this)):i=new Pr({callback:this._tick.bind(this),context:this.context,value:n}),i.startOffset=s,i.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(i),this._restartEvent(i),this}_restartEvent(e){this._state.forEach(n=>{n.state==="started"?this._startNote(e,n.time,n.offset):e.stop(new wt(this.context,n.time))})}remove(e,n){return Xi(e)&&e.hasOwnProperty("time")&&(n=e,e=n.time),e=this.toTicks(e),this._events.forEach(s=>{s.startOffset===e&&(Nn(n)||we(n)&&s.value===n)&&(this._events.delete(s),s.dispose())}),this}clear(){return this._forEach(e=>e.dispose()),this._events.clear(),this}cancel(e){return this._forEach(n=>n.cancel(e)),this._state.cancel(this.toTicks(e)),this}_forEach(e){return this._events&&this._events.forEach(n=>{n instanceof dc?n._forEach(e):e(n)}),this}_setAll(e,n){this._forEach(s=>{s[e]=n})}_tick(e,n){this.mute||this.callback(e,n)}_testLoopBoundries(e){this._loop&&(e.startOffset<this._loopStart||e.startOffset>=this._loopEnd)?e.cancel(0):e.state==="stopped"&&this._restartEvent(e)}get probability(){return this._probability}set probability(e){this._probability=e,this._setAll("probability",e)}get humanize(){return this._humanize}set humanize(e){this._humanize=e,this._setAll("humanize",e)}get loop(){return this._loop}set loop(e){this._loop=e,this._forEach(n=>{n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.loop=e,this._testLoopBoundries(n)})}get loopEnd(){return new wt(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._forEach(n=>{n.loopEnd=e,this._testLoopBoundries(n)})}get loopStart(){return new wt(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._forEach(n=>{n.loopStart=this.loopStart,this._testLoopBoundries(n)})}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._setAll("playbackRate",e)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}class jf extends oe{constructor(){const e=re(jf.getDefaults(),arguments,["fade"]);super(e),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new qq({context:this.context}),this.a=new Re({context:this.context,gain:0}),this.b=new Re({context:this.context,gain:0}),this.output=new Re({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new Ie({context:this.context,units:"normalRange",value:e.fade}),Be(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",ls(this._split,this.a.gain,0),ls(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(oe.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class sw extends oe{constructor(e){super(e),this.name="Effect",this._dryWet=new jf({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Re({context:this.context}),this.effectReturn=new Re({context:this.context}),this.input=new Re({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],Be(this,"wet")}static getDefaults(){return Object.assign(oe.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class eb extends oe{constructor(){const e=re(eb.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new Ne({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Be(this,"pan")}static getDefaults(){return Object.assign(oe.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const Qq="bit-crusher",Zq=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;vM(Qq,Zq);class Pf extends oe{constructor(){const e=re(Pf.getDefaults(),arguments,["channels"]);super(e),this.name="Split",this._splitter=this.input=this.output=this.context.createChannelSplitter(e.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(oe.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class Qc extends oe{constructor(){const e=re(Qc.getDefaults(),arguments,["channels"]);super(e),this.name="Merge",this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(oe.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class iw extends oe{constructor(e){super(e),this.name="StereoEffect",this.input=new Re({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new jf({context:this.context,fade:e.wet}),this.wet=this._dryWet.fade,this._split=new Pf({context:this.context,channels:2}),this._merge=new Qc({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),Be(this,["wet"])}connectEffectLeft(...e){this._split.connect(e[0],0,0),ta(...e),ls(e[e.length-1],this._merge,0,0)}connectEffectRight(...e){this._split.connect(e[0],1,0),ta(...e),ls(e[e.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(oe.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class rw extends iw{constructor(e){super(e),this.feedback=new Ie({context:this.context,value:e.feedback,units:"normalRange"}),this._feedbackL=new Re({context:this.context}),this._feedbackR=new Re({context:this.context}),this._feedbackSplit=new Pf({context:this.context,channels:2}),this._feedbackMerge=new Qc({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),Be(this,["feedback"])}static getDefaults(){return Object.assign(iw.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class tb extends rw{constructor(){const e=re(tb.getDefaults(),arguments,["frequency","delayTime","depth"]);super(e),this.name="Chorus",this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfoL=new mh({context:this.context,frequency:e.frequency,min:0,max:1}),this._lfoR=new mh({context:this.context,frequency:e.frequency,min:0,max:1,phase:180}),this._delayNodeL=new hh({context:this.context}),this._delayNodeR=new hh({context:this.context}),this.frequency=this._lfoL.frequency,Be(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=e.type,this.spread=e.spread}static getDefaults(){return Object.assign(rw.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(e){this._depth=e;const n=this._delayTime*e;this._lfoL.min=Math.max(this._delayTime-n,0),this._lfoL.max=this._delayTime+n,this._lfoR.min=Math.max(this._delayTime-n,0),this._lfoR.max=this._delayTime+n}get delayTime(){return this._delayTime*1e3}set delayTime(e){this._delayTime=e/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(e){this._lfoL.type=e,this._lfoR.type=e}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(e){this._lfoL.phase=90-e/2,this._lfoR.phase=e/2+90}start(e){return this._lfoL.start(e),this._lfoR.start(e),this}stop(e){return this._lfoL.stop(e),this._lfoR.stop(e),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class nb extends sw{constructor(){const e=re(nb.getDefaults(),arguments,["decay"]);super(e),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const n=this.toSeconds(e.decay);Fn(n,.001),this._decay=n;const s=this.toSeconds(e.preDelay);Fn(s,0),this._preDelay=s,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(sw.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){e=this.toSeconds(e),Fn(e,.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){e=this.toSeconds(e),Fn(e,0),this._preDelay=e,this.generate()}generate(){return ct(this,void 0,void 0,function*(){const e=this.ready,n=new qc(2,this._decay+this._preDelay,this.context.sampleRate),s=new Eo({context:n}),i=new Eo({context:n}),r=new Qc({context:n});s.connect(r,0,0),i.connect(r,0,1);const a=new Re({context:n}).toDestination();r.connect(a),s.start(0),i.start(0),a.gain.setValueAtTime(0,0),a.gain.setValueAtTime(1,this._preDelay),a.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const o=n.render();return this.ready=o.then(Me),yield e,this._convolver.buffer=(yield o).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class ft extends oe{constructor(){const e=re(ft.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new Re({context:this.context}),ft._allSolos.has(this.context)||ft._allSolos.set(this.context,new Set),ft._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(oe.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),ft._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){ft._soloed.has(this.context)||ft._soloed.set(this.context,new Set),ft._soloed.get(this.context).add(this)}_removeSolo(){ft._soloed.has(this.context)&&ft._soloed.get(this.context).delete(this)}_isSoloed(){return ft._soloed.has(this.context)&&ft._soloed.get(this.context).has(this)}_noSolos(){return!ft._soloed.has(this.context)||ft._soloed.has(this.context)&&ft._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),ft._allSolos.get(this.context).delete(this),this._removeSolo(),this}}ft._allSolos=new Map;ft._soloed=new Map;class sb extends oe{constructor(){const e=re(sb.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new eb({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Ls({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Be(this,["pan","volume"])}static getDefaults(){return Object.assign(oe.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class qa extends oe{constructor(){const e=re(qa.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new ft({solo:e.solo,context:this.context}),this._panVol=this.output=new sb({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Be(this,["pan","volume"])}static getDefaults(){return Object.assign(oe.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return qa.buses.has(e)||qa.buses.set(e,new Re({context:this.context})),qa.buses.get(e)}send(e,n=0){const s=this._getBus(e),i=new Re({context:this.context,units:"decibels",gain:n});return this.connect(i),i.connect(s),i}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}qa.buses=new Map;function Zn(){return Qt().now()}Qt().transport;function rn(){return Qt().transport}Qt().destination;Qt().destination;Qt().listener;Qt().draw;Qt();class Jq{constructor(){le(this,"synth",null);le(this,"volume",null);le(this,"filter",null);le(this,"chorus",null);le(this,"reverb",null);le(this,"started",!1);le(this,"currentPresetIndex",0);le(this,"effectParams",{reverbWet:0,chorusDepth:0,filterCutoff:18e3,filterResonance:1})}async start(){this.started||(await Dq(),this.volume=new Ls(Hg).toDestination(),this.reverb=new nb({decay:2.5,wet:0}),this.chorus=new tb({frequency:1.5,delayTime:3.5,depth:0,wet:0}).start(),this.filter=new da({frequency:18e3,type:"lowpass",Q:1}),this.filter.connect(this.chorus),this.chorus.connect(this.reverb),this.reverb.connect(this.volume),this.createSynth(_n[0]),this.started=!0)}createSynth(e){this.synth&&(this.synth.releaseAll(),this.synth.dispose()),this.synth=new Xc(hi,{maxPolyphony:v0,oscillator:e.oscillator,envelope:e.envelope}),this.synth.connect(this.filter)}noteOn(e,n){if(!this.synth||!this.started)return;const s=lr(e);this.synth.triggerAttack(s,Zn(),n)}noteOff(e){if(!this.synth||!this.started)return;const n=lr(e);this.synth.triggerRelease(n,Zn())}releaseAll(){var e;(e=this.synth)==null||e.releaseAll()}mute(){this.volume&&(this.volume.mute=!0)}unmute(){this.volume&&(this.volume.mute=!1)}setVolume(e){this.volume&&(this.volume.volume.value=e)}setPreset(e){e<0||e>=_n.length||(this.currentPresetIndex=e,this.started&&this.createSynth(_n[e]))}setReverbWet(e){this.reverb&&(this.reverb.wet.value=e,this.effectParams.reverbWet=e)}setChorusDepth(e){this.chorus&&(this.chorus.depth=e,this.chorus.wet.value=e>0?.5:0,this.effectParams.chorusDepth=e)}setFilterCutoff(e){this.filter&&(this.filter.frequency.value=e,this.effectParams.filterCutoff=e)}setFilterResonance(e){this.filter&&(this.filter.Q.value=e,this.effectParams.filterResonance=e)}getVolume(){var e;return((e=this.volume)==null?void 0:e.volume.value)??Hg}getEffectParams(){return{...this.effectParams}}getPresetIndex(){return this.currentPresetIndex}isStarted(){return this.started}dispose(){var e,n,s,i,r,a;(e=this.synth)==null||e.releaseAll(),(n=this.synth)==null||n.dispose(),(s=this.filter)==null||s.dispose(),(i=this.chorus)==null||i.dispose(),(r=this.reverb)==null||r.dispose(),(a=this.volume)==null||a.dispose(),this.synth=null,this.filter=null,this.chorus=null,this.reverb=null,this.volume=null,this.started=!1}}const Oe=new Jq;function e9({effectParams:t,onEffectChange:e}){const n=(s,i)=>{switch(s){case"reverbWet":Oe.setReverbWet(i);break;case"chorusDepth":Oe.setChorusDepth(i);break;case"filterCutoff":Oe.setFilterCutoff(i);break;case"filterResonance":Oe.setFilterResonance(i);break}e(Oe.getEffectParams())};return f.jsxs(cF,{className:"flex flex-row items-center gap-6 border-border bg-card/60 backdrop-blur-sm px-4 py-2",children:[f.jsx(Ru,{label:"Reverb",value:t.reverbWet,min:0,max:1,step:.01,displayValue:`${Math.round(t.reverbWet*100)}%`,onChange:s=>n("reverbWet",s)}),f.jsx(Ru,{label:"Chorus",value:t.chorusDepth,min:0,max:1,step:.01,displayValue:`${Math.round(t.chorusDepth*100)}%`,onChange:s=>n("chorusDepth",s)}),f.jsx(Ru,{label:"Filter",value:t.filterCutoff,min:60,max:18e3,step:1,displayValue:t.filterCutoff>=1e3?`${(t.filterCutoff/1e3).toFixed(1)}k`:`${Math.round(t.filterCutoff)}`,onChange:s=>n("filterCutoff",s)}),f.jsx(Ru,{label:"Resonance",value:t.filterResonance,min:0,max:20,step:.1,displayValue:t.filterResonance.toFixed(1),onChange:s=>n("filterResonance",s)})]})}function Ru({label:t,value:e,min:n,max:s,step:i,displayValue:r,onChange:a}){return f.jsxs("div",{className:"flex flex-1 items-center gap-2",children:[f.jsx("span",{className:"w-16 text-[11px] font-semibold uppercase tracking-wider text-muted-foreground",children:t}),f.jsx(uf,{min:n,max:s,step:i,value:[e],onValueChange:([o])=>a(o),className:"flex-1"}),f.jsx(th,{variant:"secondary",className:"w-12 justify-center font-mono text-[10px]",children:r})]})}function t9({className:t,size:e="default",...n}){return f.jsx(Sz,{"data-slot":"switch","data-size":e,className:ee("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 group/switch inline-flex shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-[1.15rem] data-[size=default]:w-8 data-[size=sm]:h-3.5 data-[size=sm]:w-6",t),...n,children:f.jsx(Cz,{"data-slot":"switch-thumb",className:ee("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block rounded-full ring-0 transition-transform group-data-[size=default]/switch:size-4 group-data-[size=sm]/switch:size-3 data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function yh({className:t,...e}){return f.jsx(pV,{"data-slot":"label",className:ee("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}function n9(t){const e=Math.floor(t/4)+1,n=Math.floor(t%4)+1;return`${e}:${n}`}function s9({state:t,bpm:e,metronomeOn:n,positionBeats:s,recordDisabled:i,onRecord:r,onStopRecording:a,onPlay:o,onStop:l,onBpmChange:c,onMetronomeToggle:u}){const d=t==="recording",h=t==="playing";return f.jsxs("div",{className:"flex items-center gap-4 border-b border-border bg-card/60 backdrop-blur-sm px-4 py-2",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Te,{variant:d?"destructive":"ghost",size:"sm",className:ee("h-8 w-8 p-0",d&&"animate-rec-pulse"),onClick:d?a:r,disabled:!d&&i,children:f.jsx(nI,{className:ee("h-4 w-4",d?"fill-current":"")})}),f.jsx(Te,{variant:h?"default":"ghost",size:"sm",className:"h-8 w-8 p-0",style:h?{backgroundColor:"oklch(0.65 0.20 155)",boxShadow:"0 0 12px 2px oklch(0.65 0.20 155 / 0.35)"}:void 0,onClick:o,disabled:d,children:f.jsx(Uh,{className:ee("h-4 w-4",h&&"fill-current")})}),f.jsx(Te,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:d?a:l,disabled:t==="stopped",children:f.jsx(zv,{className:"h-4 w-4"})})]}),f.jsx(th,{variant:"secondary",className:"min-w-[52px] justify-center font-mono text-xs",style:{backgroundColor:"oklch(0.14 0.01 270)",border:"1px solid oklch(0.30 0.02 270)",boxShadow:"inset 0 1px 3px oklch(0 0 0 / 0.3)"},children:n9(s)}),d&&f.jsx(th,{variant:"destructive",className:"text-[10px]",children:"REC"}),f.jsx("div",{className:"h-4 w-px bg-border/60"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(yh,{className:"text-[11px] font-semibold text-muted-foreground",children:"BPM"}),f.jsx(uf,{min:Q7,max:Z7,step:1,value:[e],onValueChange:([p])=>c(p),className:"w-20"}),f.jsx("span",{className:"w-7 text-center font-mono text-xs text-primary",children:e})]}),f.jsx("div",{className:"h-4 w-px bg-border/60"}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(yh,{htmlFor:"metronome",className:"text-[11px] font-semibold text-muted-foreground",children:"Metro"}),f.jsx(t9,{id:"metronome",checked:n,onCheckedChange:u})]})]})}function If({activePads:t,onHit:e,compact:n,highlightedPads:s}){return f.jsx("div",{className:ee("grid grid-cols-4 grid-rows-2",n?"gap-1":"gap-2"),children:df.map(i=>f.jsx(i9,{id:i.id,name:i.name,shortName:i.shortName,color:i.color,isActive:t.has(i.id),isHighlighted:(s==null?void 0:s.has(i.id))??!1,onHit:e,compact:n},i.id))})}function i9({id:t,name:e,shortName:n,color:s,isActive:i,isHighlighted:r,onHit:a,compact:o}){const[l,c]=g.useState(!1),u=g.useCallback(d=>{d.preventDefault(),c(!0),a(t,.8),setTimeout(()=>c(!1),120)},[t,a]);return f.jsxs("button",{className:ee("flex flex-col items-center justify-center rounded-xl border border-border/50","select-none transition-all duration-75",o?"h-10":"h-16",l&&"animate-pad-hit",!i&&"hover:brightness-110"),style:{backgroundColor:i?s:`color-mix(in oklch, ${s} 20%, var(--secondary))`,boxShadow:i?`0 0 16px 3px ${s}`:r?`0 0 12px 2px ${s}, inset 0 2px 4px rgba(0,0,0,0.3)`:"inset 0 2px 4px rgba(0,0,0,0.3)",outline:r&&!i?`2px solid ${s}`:void 0,outlineOffset:"1px"},onPointerDown:u,children:[f.jsx("span",{className:ee("font-bold text-foreground",o?"text-[10px]":"text-xs"),children:n}),!o&&f.jsx("span",{className:"text-[9px] text-muted-foreground",children:e})]})}function aw({midiNote:t,isActive:e,isHighlighted:n,onNoteOn:s,onNoteOff:i,showLabel:r,compact:a}){const o=g.useRef(!1),l=ac(t),c=lr(t),u=g.useCallback(p=>{p.preventDefault(),p.target.setPointerCapture(p.pointerId),o.current=!0,s(t,.7)},[t,s]),d=g.useCallback(p=>{p.preventDefault(),o.current&&(o.current=!1,i(t))},[t,i]),h=g.useCallback(p=>{o.current&&(o.current=!1,i(t))},[t,i]);return f.jsx("button",{className:ee("relative flex flex-col items-center justify-end select-none transition-colors duration-75",l?ee("z-10 rounded-b-md border border-border/50",a?"h-[60px] w-[24px]":"h-[100px] w-[30px]",e?"shadow-[0_0_12px_2px] shadow-primary/40":n?"ring-1 ring-primary/40":"hover:brightness-125"):ee("rounded-b-lg border border-border/30",a?"h-[100px] w-[32px]":"h-[160px] w-[40px]",e?"shadow-[0_0_12px_2px] shadow-primary/30":n?"ring-1 ring-primary/30":"")),style:{backgroundColor:l?e?"var(--primary)":n?"oklch(0.20 0.04 265)":"oklch(0.15 0.02 270)":e?"oklch(0.75 0.12 265)":n?"oklch(0.85 0.03 265)":"oklch(0.90 0.008 270)"},onPointerDown:u,onPointerUp:d,onPointerLeave:h,children:r&&!l&&f.jsx("span",{className:ee("mb-2 font-mono text-[10px] font-medium",e?"text-primary-foreground":"text-muted-foreground"),children:c})})}function xr({activeNotes:t,onNoteOn:e,onNoteOff:n,highlightedNotes:s,compact:i}){const r=g.useMemo(()=>{const h=[];for(let p=oc;p<=W7;p++)h.push(p);return h},[]),a=r.filter(h=>!ac(h)),o=r.filter(h=>ac(h)),l=i?32:40,c=1,u=l+c,d=i?12:15;return f.jsxs("div",{className:ee("flex flex-col items-center justify-end",i?"pb-2":"flex-1 pb-6"),children:[f.jsx("div",{className:"relative mb-2 flex",children:f.jsx("div",{className:"flex",style:{gap:`${c}px`},children:a.map(h=>f.jsx("div",{className:"flex items-center justify-center",style:{width:l},children:h%12===0&&f.jsx("span",{className:"font-mono text-[10px] font-medium text-muted-foreground",children:lr(h)})},h))})}),f.jsxs("div",{className:"relative flex",style:{gap:`${c}px`},children:[a.map(h=>f.jsx(aw,{midiNote:h,isActive:t.has(h),isHighlighted:s?s.has(h%12):!1,onNoteOn:e,onNoteOff:n,showLabel:!i,compact:i},h)),o.map(h=>{const m=a.filter(y=>y<h).length*u-d;return f.jsx("div",{className:"absolute top-0",style:{left:`${m}px`},children:f.jsx(aw,{midiNote:h,isActive:t.has(h),isHighlighted:s?s.has(h%12):!1,onNoteOn:e,onNoteOff:n,showLabel:!1,compact:i})},h)})]})]})}function r9({activeNotes:t,onNoteOn:e,onNoteOff:n,highlightedNotes:s,activePads:i,onDrumHit:r}){return f.jsxs("div",{className:"flex h-[140px] shrink-0 items-end gap-3 border-t px-3 py-2",style:{backgroundColor:"oklch(0.15 0.012 270 / 0.6)",backdropFilter:"blur(12px)",borderColor:"oklch(0.28 0.02 270)"},children:[f.jsx("div",{className:"w-[200px] shrink-0",children:f.jsx(If,{activePads:i,onHit:r,compact:!0})}),f.jsx("div",{className:"flex-1 overflow-x-auto overflow-y-hidden",children:f.jsx(xr,{activeNotes:t,onNoteOn:e,onNoteOff:n,highlightedNotes:s,compact:!0})})]})}const a9={.25:"1/16",.5:"1/8",1:"1/4",2:"1/2",4:"Bar"};function o9({snapValue:t,pxPerBeat:e,canUndo:n,canRedo:s,onSnapChange:i,onZoomChange:r,onAddSynthTrack:a,onAddDrumTrack:o,onUndo:l,onRedo:c,onExport:u,tool:d,onToolChange:h}){return f.jsxs("div",{className:"flex items-center gap-3 border-b border-border bg-card/60 backdrop-blur-sm px-3 py-1.5",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsxs(Te,{variant:"outline",size:"sm",className:"h-6 gap-1 px-2 text-[11px] font-semibold",style:{borderColor:"var(--primary)",color:"var(--primary)"},onClick:a,children:[f.jsx(sc,{className:"h-3 w-3"})," Synth"]}),f.jsxs(Te,{variant:"outline",size:"sm",className:"h-6 gap-1 px-2 text-[11px] font-semibold",onClick:o,children:[f.jsx(sc,{className:"h-3 w-3"})," Drums"]})]}),f.jsx("div",{className:"h-4 w-px bg-border/60"}),f.jsxs("div",{className:"flex items-center gap-0.5",children:[f.jsx(Te,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",disabled:!n,onClick:l,title:"Undo (Ctrl+Z)",children:f.jsx(Uv,{className:"h-3.5 w-3.5"})}),f.jsx(Te,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",disabled:!s,onClick:c,title:"Redo (Ctrl+Shift+Z)",children:f.jsx(Vv,{className:"h-3.5 w-3.5"})})]}),f.jsx("div",{className:"h-4 w-px bg-border/60"}),f.jsxs("div",{className:"flex items-center gap-0.5",children:[f.jsx(Te,{variant:d==="pointer"?"default":"ghost",size:"sm",className:`h-6 w-6 p-0 ${d==="pointer"?"ring-1 ring-primary/50 shadow-sm shadow-primary/30":""}`,onClick:()=>h("pointer"),title:"Pointer (V)",children:f.jsx(SA,{className:"h-3.5 w-3.5"})}),f.jsx(Te,{variant:d==="cut"?"default":"ghost",size:"sm",className:`h-6 w-6 p-0 ${d==="cut"?"ring-1 ring-primary/50 shadow-sm shadow-primary/30":""}`,onClick:()=>h("cut"),title:"Cut (C)",children:f.jsx(PI,{className:"h-3.5 w-3.5"})})]}),f.jsx("div",{className:"h-4 w-px bg-border/60"}),f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(yh,{className:"text-[11px] font-semibold text-muted-foreground",children:"Snap"}),f.jsxs(Rc,{value:String(t),onValueChange:p=>i(Number(p)),children:[f.jsx(Oc,{className:"h-6 w-16 border-0 bg-transparent text-[11px]",children:f.jsx(Dc,{})}),f.jsx(jc,{children:l2.map(p=>f.jsx(Zr,{value:String(p),children:a9[p]},p))})]})]}),f.jsx("div",{className:"h-4 w-px bg-border/60"}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx(Te,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>r(Math.max(b0,e-10)),children:f.jsx(t6,{className:"h-3 w-3"})}),f.jsx("span",{className:"w-6 text-center font-mono text-[10px] text-muted-foreground",children:e}),f.jsx(Te,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>r(Math.min(x0,e+10)),children:f.jsx(JI,{className:"h-3 w-3"})})]}),f.jsx("div",{className:"flex-1"}),f.jsxs(Te,{variant:"outline",size:"sm",className:"h-6 gap-1 px-2 text-[11px] font-semibold",onClick:u,children:[f.jsx(Cg,{className:"h-3 w-3"})," Export"]})]})}function Sn(t,e){return t*e}function ey(t,e){return t/e}function bl(t,e){return e<=0?t:Math.round(t/e)*e}function l9({lengthBeats:t,pxPerBeat:e,snapValue:n,onSeek:s}){const i=Sn(t,e),r=[];for(let o=0;o<=t;o++)o%4===0?r.push({beat:o,isBar:!0,label:`${o/4+1}`}):e>=20&&r.push({beat:o,isBar:!1,label:""});const a=o=>{const l=o.currentTarget.getBoundingClientRect(),c=o.clientX-l.left,u=bl(ey(c,e),n);s(Math.max(0,u))};return f.jsx("div",{className:"relative h-6 cursor-pointer border-b border-border bg-card/80",style:{width:i},onClick:a,children:r.map(o=>f.jsxs("div",{className:"absolute top-0",style:{left:Sn(o.beat,e)},children:[f.jsx("div",{className:`w-px ${o.isBar?"h-6 bg-border":"h-3 bg-border/50"}`}),o.isBar&&f.jsx("span",{className:"absolute left-1 top-0 select-none font-mono text-[10px] text-muted-foreground",children:o.label})]},o.beat))})}function c9({track:t,isArmed:e,isRecording:n,onMuteToggle:s,onSoloToggle:i,onVolumeChange:r,onInstrumentChange:a,onDelete:o,onArmToggle:l}){return f.jsxs("div",{className:"flex h-16 shrink-0 flex-col justify-center border-b border-border px-2",style:{borderLeft:`3px solid ${t.color}`,boxShadow:`inset 4px 0 12px -4px ${t.color}33`},children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("button",{className:ee("h-4 w-4 rounded-full border-2 transition-colors",n?"border-red-500 bg-red-500 animate-pulse":e?"border-red-500 bg-red-500":"border-muted-foreground/50 bg-transparent"),onClick:l,title:e?"Disarm track":"Arm track for recording"}),f.jsxs(Rc,{value:`${t.instrument.type}-${t.instrument.presetIndex}`,onValueChange:c=>{const[u,d]=c.split("-");a({type:u,presetIndex:Number(d)})},children:[f.jsx(Oc,{className:"h-5 flex-1 border-0 bg-transparent px-1 text-[11px] font-semibold",children:f.jsx(Dc,{})}),f.jsxs(jc,{children:[_n.map((c,u)=>f.jsx(Zr,{value:`synth-${u}`,children:c.name},`synth-${u}`)),f.jsx(Zr,{value:"drums-0",children:"Drums"})]})]}),f.jsx(Te,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:o,children:f.jsx(UI,{className:"h-3 w-3 text-muted-foreground"})})]}),f.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[f.jsx(Te,{variant:"ghost",size:"sm",className:ee("h-5 w-5 p-0",t.muted&&"text-red-500"),onClick:s,title:"Mute",children:t.muted?f.jsx(qv,{className:"h-3 w-3"}):f.jsx(Gv,{className:"h-3 w-3"})}),f.jsx(Te,{variant:"ghost",size:"sm",className:ee("h-5 w-5 p-0 text-[10px] font-bold",t.solo&&"text-yellow-500"),onClick:i,title:"Solo",children:"S"}),f.jsx(uf,{min:Ug,max:a2,step:1,value:[t.volume],onValueChange:([c])=>r(c),className:"w-16"})]})]})}function u9({notes:t,lengthBeats:e,isDrum:n}){if(t.length===0)return null;const s=n?36:Math.min(...t.map(a=>a.note),oc),i=n?43:Math.max(...t.map(a=>a.note),oc+12),r=Math.max(i-s+1,4);return f.jsx("div",{className:"absolute inset-0.5 overflow-hidden",children:t.map((a,o)=>{const l=`${a.startBeat/e*100}%`,c=`${Math.max(a.durationBeats/e*100,1)}%`,u=`${(a.note-s)/r*100}%`,d=`${Math.max(100/r,4)}%`;return f.jsx("div",{className:"absolute rounded-[1px] bg-white/60",style:{left:l,width:c,bottom:u,height:Math.max(2,parseFloat(d))}},o)})})}function d9({region:t,trackColor:e,pxPerBeat:n,snapValue:s,selected:i,onMove:r,onResize:a,onCut:o,onSelect:l,onContextMenu:c,onDoubleClick:u,tool:d}){const[h,p]=g.useState(null),m=g.useRef({x:0,startBeat:0,lengthBeats:0}),y=Sn(t.startBeat,n),x=Sn(t.lengthBeats,n),v=t.color||e,b=t.notes.some(C=>C.isDrum),_=6,w=C=>{const M=C.currentTarget.getBoundingClientRect(),A=C.clientX-M.left;return A<_&&a?"resize-left":A>M.width-_&&a?"resize-right":"move"},S=g.useCallback(C=>{if(C.button!==0)return;if(C.stopPropagation(),d==="cut"&&o){const A=C.currentTarget.getBoundingClientRect(),k=C.clientX-A.left,N=ey(k,n),P=bl(N,s),j=t.startBeat+P;o(t.id,j);return}l==null||l(t.id,C.shiftKey),C.currentTarget.setPointerCapture(C.pointerId);const M=w(C);m.current={x:C.clientX,startBeat:t.startBeat,lengthBeats:t.lengthBeats},p(M)},[t.startBeat,t.lengthBeats,a,d,o,l,n,s]),T=g.useCallback(C=>{if(!h){const k=C.currentTarget;if(d==="cut")k.style.cursor="crosshair";else{const N=w(C);N==="resize-left"||N==="resize-right"?k.style.cursor="col-resize":k.style.cursor="grab"}return}const M=C.clientX-m.current.x,A=ey(M,n);if(h==="move"){const k=bl(m.current.startBeat+A,s);r(t.id,Math.max(0,k))}else if(h==="resize-right"&&a){const k=bl(m.current.lengthBeats+A,s);a(t.id,t.startBeat,Math.max(s||.25,k))}else if(h==="resize-left"&&a){const k=bl(m.current.startBeat+A,s),N=Math.max(0,k),P=m.current.startBeat-N,j=m.current.lengthBeats+P;j>=(s||.25)&&a(t.id,N,j)}},[h,n,s,r,a,t.id,t.startBeat]),E=g.useCallback(()=>{p(null)},[]);return f.jsxs("div",{className:"absolute top-0.5 bottom-0.5 select-none rounded-md transition-[filter] hover:brightness-110",style:{left:y,width:Math.max(x,4),background:`linear-gradient(to bottom, ${v}, color-mix(in oklch, ${v} 80%, black))`,opacity:h?.7:1,border:i?"2px solid white":"1px solid rgba(255,255,255,0.2)",boxShadow:i?"0 0 8px rgba(255,255,255,0.3)":void 0},onPointerDown:S,onPointerMove:T,onPointerUp:E,onDoubleClick:()=>u==null?void 0:u(t.id),onContextMenu:C=>{C.preventDefault(),c(C,t.id)},children:[t.name&&f.jsx("span",{className:"absolute left-1 top-0 truncate text-[9px] font-medium text-white/80",children:t.name}),f.jsx(u9,{notes:t.notes,lengthBeats:t.lengthBeats,isDrum:b})]})}function h9({notes:t,lengthBeats:e,isDrum:n}){if(t.length===0)return null;const s=n?36:Math.min(...t.map(a=>a.note),oc),i=n?43:Math.max(...t.map(a=>a.note),oc+12),r=Math.max(i-s+1,4);return f.jsx("div",{className:"absolute inset-0.5 overflow-hidden",children:t.map((a,o)=>{const l=`${a.startBeat/e*100}%`,c=`${Math.max(a.durationBeats/e*100,1)}%`,u=`${(a.note-s)/r*100}%`,d=`${Math.max(100/r,4)}%`;return f.jsx("div",{className:"absolute rounded-[1px] bg-white/70",style:{left:l,width:c,bottom:u,height:Math.max(2,parseFloat(d))}},o)})})}function f9({region:t,trackColor:e,pxPerBeat:n}){const s=Sn(t.startBeat,n),i=Sn(t.lengthBeats,n),r=t.color||e,a=t.notes.some(o=>o.isDrum);return f.jsxs("div",{className:"absolute top-0.5 bottom-0.5 select-none rounded-sm border border-white/30",style:{left:s,width:Math.max(i,4),backgroundColor:r,opacity:.75,boxShadow:`0 0 8px 1px ${r}80`},children:[f.jsx("span",{className:"absolute left-1 top-0 truncate text-[9px] font-medium text-white/90",children:"REC"}),f.jsx(h9,{notes:t.notes,lengthBeats:t.lengthBeats,isDrum:a})]})}function p9({track:t,lengthBeats:e,pxPerBeat:n,snapValue:s,selectedRegionIds:i,liveRegion:r,onMoveRegion:a,onResizeRegion:o,onSplitRegion:l,onSelectRegion:c,onRegionContextMenu:u,onEditRegion:d,tool:h}){const p=Sn(e,n),m=[];for(let y=0;y<=e;y++)y%4===0&&m.push(y);return f.jsxs("div",{className:"relative h-16 border-b border-border bg-background/50",style:{width:p},children:[m.map(y=>f.jsx("div",{className:"absolute top-0 h-full w-px bg-border/30",style:{left:Sn(y,n)}},y)),t.regions.map(y=>f.jsx(d9,{region:y,trackColor:t.color,pxPerBeat:n,snapValue:s,tool:h,selected:(i==null?void 0:i.has(y.id))??!1,onMove:(x,v)=>a(t.id,x,v),onResize:o?(x,v,b)=>o(t.id,x,v,b):void 0,onCut:(x,v)=>l(t.id,x,v),onSelect:c?(x,v)=>c(t.id,x,v):void 0,onContextMenu:(x,v)=>u(x,t.id,v),onDoubleClick:d?x=>d(t.id,x):void 0},y.id)),r&&f.jsx(f9,{region:r,trackColor:t.color,pxPerBeat:n})]})}function m9({position:t,pxPerBeat:e,height:n}){const s=Sn(t,e);return f.jsx("div",{className:"pointer-events-none absolute top-0 z-30 w-px bg-red-500",style:{left:s,height:n,boxShadow:"0 0 6px 2px oklch(0.58 0.22 25 / 0.30)"},children:f.jsx("div",{className:"absolute -left-1 -top-0.5 h-2 w-2 rotate-45 bg-red-500"})})}function g9({x:t,y:e,onSplit:n,onDuplicate:s,onDelete:i,onClose:r,onCopy:a,onPaste:o,canPaste:l}){const c=g.useRef(null);g.useEffect(()=>{const d=p=>{c.current&&!c.current.contains(p.target)&&r()},h=p=>{p.key==="Escape"&&r()};return window.addEventListener("mousedown",d),window.addEventListener("keydown",h),()=>{window.removeEventListener("mousedown",d),window.removeEventListener("keydown",h)}},[r]);const u=[{label:"Split at playhead",action:n},{label:"Duplicate",action:s},...a?[{label:"Copy",action:a}]:[],...o&&l?[{label:"Paste",action:o}]:[],{label:"Delete",action:i,destructive:!0}];return f.jsx("div",{ref:c,className:"fixed z-50 min-w-[140px] rounded-md border border-border bg-popover py-1 shadow-lg",style:{left:t,top:e},children:u.map(d=>f.jsx("button",{className:`w-full px-3 py-1.5 text-left text-xs hover:bg-accent ${d.destructive?"text-red-500":"text-popover-foreground"}`,onClick:()=>{d.action(),r()},children:d.label},d.label))})}const ow=50;class y9{constructor(){le(this,"undoStack",[]);le(this,"redoStack",[]);le(this,"callbacks",[]);le(this,"groupLabel",null);le(this,"groupSnapshot",null)}pushUndo(e,n){if(this.groupLabel!==null){this.groupSnapshot===null&&(this.groupSnapshot=n);return}this.undoStack.push({label:e,snapshot:n}),this.undoStack.length>ow&&this.undoStack.shift(),this.redoStack=[],this.emit()}beginUndoGroup(e,n){this.groupLabel=e,this.groupSnapshot=n}endUndoGroup(){this.groupLabel!==null&&this.groupSnapshot!==null&&(this.undoStack.push({label:this.groupLabel,snapshot:this.groupSnapshot}),this.undoStack.length>ow&&this.undoStack.shift(),this.redoStack=[],this.emit()),this.groupLabel=null,this.groupSnapshot=null}undo(){const e=this.undoStack.pop();return e?e.snapshot:null}redo(){const e=this.redoStack.pop();return e?e.snapshot:null}pushRedo(e,n){this.redoStack.push({label:e,snapshot:n}),this.emit()}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}undoLabel(){var e;return(e=this.undoStack[this.undoStack.length-1])==null?void 0:e.label}redoLabel(){var e;return(e=this.redoStack[this.redoStack.length-1])==null?void 0:e.label}clear(){this.undoStack=[],this.redoStack=[],this.groupLabel=null,this.groupSnapshot=null,this.emit()}onStateChange(e){return this.callbacks.push(e),()=>{this.callbacks=this.callbacks.filter(n=>n!==e)}}emit(){for(const e of this.callbacks)e()}}const on=new y9;class v9{constructor(){le(this,"arrangement");le(this,"transportState","stopped");le(this,"trackAudio",new Map);le(this,"stateCallbacks",[]);le(this,"positionCallbacks",[]);le(this,"positionRAF",0);le(this,"metronomeSynth",null);le(this,"metronomeLoop",null);le(this,"metronomeEnabled",!1);le(this,"armedTrackId",null);le(this,"recordingTrackId",null);le(this,"recordingStartBeat",0);le(this,"recordingOpenNotes",new Map);le(this,"capturedNotes",[]);le(this,"colorIndex",0);le(this,"clipboard",null);this.arrangement=this.createDefaultArrangement()}createDefaultArrangement(){return{id:crypto.randomUUID(),name:"Untitled",bpm:o2,lengthBeats:D_,tracks:[]}}getArrangement(){return this.arrangement}getTracks(){return this.arrangement.tracks}getState(){return this.transportState}getBpm(){return this.arrangement.bpm}getPosition(){return this.transportState==="stopped"?0:rn().seconds*(this.arrangement.bpm/60)}isMetronomeEnabled(){return this.metronomeEnabled}getArmedTrackId(){return this.armedTrackId}getRecordingTrackId(){return this.recordingTrackId}getLiveRegion(){if(this.transportState!=="recording"||!this.recordingTrackId)return null;const n=rn().seconds*(this.arrangement.bpm/60),s=Math.max(.25,n-this.recordingStartBeat),i=[...this.capturedNotes];for(const[a,o]of this.recordingOpenNotes)i.push({note:a,velocity:o.velocity,startBeat:o.startBeat,durationBeats:Math.max(.125,n-this.recordingStartBeat-o.startBeat),isDrum:o.isDrum});const r=this.findTrack(this.recordingTrackId);return{id:"__live__",startBeat:this.recordingStartBeat,lengthBeats:s,notes:i,color:r==null?void 0:r.color}}addTrack(e="synth",n=0){var r;this.pushUndoSnapshot("Add Track");const s=R_[this.colorIndex%R_.length];this.colorIndex++;const i={id:crypto.randomUUID(),name:e==="drums"?"Drums":((r=_n[n])==null?void 0:r.name)??"Synth",instrument:{type:e,presetIndex:n},regions:[],volume:-6,muted:!1,solo:!1,color:s};return this.arrangement.tracks.push(i),this.createTrackAudio(i),this.emitStateChange(),i}removeTrack(e){this.pushUndoSnapshot("Remove Track"),this.disposeTrackAudio(e),this.arrangement.tracks=this.arrangement.tracks.filter(n=>n.id!==e),this.armedTrackId===e&&(this.armedTrackId=null),this.emitStateChange()}setTrackInstrument(e,n){var i;this.pushUndoSnapshot("Change Instrument");const s=this.findTrack(e);s&&(s.instrument=n,s.name=n.type==="drums"?"Drums":((i=_n[n.presetIndex])==null?void 0:i.name)??"Synth",this.disposeTrackAudio(e),this.createTrackAudio(s),this.emitStateChange())}setTrackVolume(e,n){const s=this.findTrack(e);if(!s)return;s.volume=n;const i=this.trackAudio.get(e);i&&(i.volume.volume.value=n),this.emitStateChange()}setTrackMute(e,n){const s=this.findTrack(e);if(!s)return;s.muted=n;const i=this.trackAudio.get(e);i&&(i.volume.mute=n),this.emitStateChange()}setTrackSolo(e,n){const s=this.findTrack(e);s&&(s.solo=n,this.updateSoloState(),this.emitStateChange())}addRegion(e,n){this.pushUndoSnapshot("Add Region");const s=this.findTrack(e);s&&(s.regions.push(n),this.autoExtendLength(),this.emitStateChange())}removeRegion(e,n){this.pushUndoSnapshot("Remove Region");const s=this.findTrack(e);s&&(s.regions=s.regions.filter(i=>i.id!==n),this.emitStateChange())}moveRegion(e,n,s){this.pushUndoSnapshot("Move Region");const i=this.findTrack(e);if(!i)return;const r=i.regions.find(a=>a.id===n);r&&(r.startBeat=Math.max(0,s),this.autoExtendLength(),this.emitStateChange())}moveRegionToTrack(e,n,s){this.pushUndoSnapshot("Move Region to Track");const i=this.findTrack(e),r=this.findTrack(n);if(!i||!r)return;const a=i.regions.findIndex(l=>l.id===s);if(a===-1)return;const[o]=i.regions.splice(a,1);r.regions.push(o),this.emitStateChange()}splitRegion(e,n,s){this.pushUndoSnapshot("Split Region");const i=this.findTrack(e);if(!i)return;const r=i.regions.find(u=>u.id===n);if(!r)return;const a=s-r.startBeat;if(a<=0||a>=r.lengthBeats)return;const o=[],l=[];for(const u of r.notes)u.startBeat+u.durationBeats<=a?o.push(u):u.startBeat>=a?l.push({...u,startBeat:u.startBeat-a}):(o.push({...u,durationBeats:a-u.startBeat}),l.push({...u,startBeat:0,durationBeats:u.startBeat+u.durationBeats-a}));const c={id:crypto.randomUUID(),startBeat:s,lengthBeats:r.lengthBeats-a,notes:l,color:r.color,name:r.name?`${r.name} (R)`:void 0};r.lengthBeats=a,r.notes=o,r.name&&(r.name=`${r.name} (L)`),i.regions.push(c),this.emitStateChange()}duplicateRegion(e,n){this.pushUndoSnapshot("Duplicate Region");const s=this.findTrack(e);if(!s)return;const i=s.regions.find(a=>a.id===n);if(!i)return;const r={...i,id:crypto.randomUUID(),startBeat:i.startBeat+i.lengthBeats,notes:i.notes.map(a=>({...a})),name:i.name?`${i.name} (copy)`:void 0};s.regions.push(r),this.autoExtendLength(),this.emitStateChange()}armTrackForRecording(e){this.armedTrackId=e,this.emitStateChange()}startRecordingToTrack(e){const n=e??this.armedTrackId;if(!n&&this.arrangement.tracks.length===0){const r=this.addTrack("synth");return this.armedTrackId=r.id,this.startRecordingToTrack(r.id)}if(!n||!this.findTrack(n)||this.transportState!=="stopped")return;this.recordingTrackId=n,this.recordingOpenNotes.clear(),this.capturedNotes=[],this.transportState="recording";const i=rn();i.stop(),i.position=0,i.bpm.value=this.arrangement.bpm,this.metronomeEnabled&&this.startMetronome(),this.recordingStartBeat=0,i.start(),this.startPositionUpdates(),this.emitStateChange()}stopRecordingToTrack(){if(this.transportState!=="recording"||!this.recordingTrackId)return null;this.pushUndoSnapshot("Record");const n=rn().seconds*(this.arrangement.bpm/60);for(const[a,o]of this.recordingOpenNotes)this.capturedNotes.push({note:a,velocity:o.velocity,startBeat:o.startBeat,durationBeats:Math.max(.125,n-o.startBeat),isDrum:o.isDrum});const s=this.findTrack(this.recordingTrackId);if(this.stopTransport(),!s||this.capturedNotes.length===0)return this.capturedNotes=[],this.recordingTrackId=null,this.recordingOpenNotes.clear(),this.emitStateChange(),null;const i=Math.max(1,Math.ceil(n)),r={id:crypto.randomUUID(),startBeat:this.recordingStartBeat,lengthBeats:i,notes:[...this.capturedNotes],color:s.color};return s.regions.push(r),this.autoExtendLength(),this.capturedNotes=[],this.recordingTrackId=null,this.recordingOpenNotes.clear(),this.emitStateChange(),r}captureNoteOn(e,n,s){if(this.transportState!=="recording")return;const r=rn().seconds*(this.arrangement.bpm/60);s?this.capturedNotes.push({note:e,velocity:n,startBeat:r-this.recordingStartBeat,durationBeats:.25,isDrum:!0}):this.recordingOpenNotes.set(e,{startBeat:r-this.recordingStartBeat,velocity:n,isDrum:!1})}captureNoteOff(e){if(this.transportState!=="recording")return;const n=this.recordingOpenNotes.get(e);if(!n)return;const i=rn().seconds*(this.arrangement.bpm/60);this.capturedNotes.push({note:e,velocity:n.velocity,startBeat:n.startBeat,durationBeats:Math.max(.125,i-this.recordingStartBeat-n.startBeat),isDrum:!1}),this.recordingOpenNotes.delete(e)}play(){if(this.transportState!=="stopped")return;this.transportState="playing";const e=rn();e.stop(),e.position=0,e.bpm.value=this.arrangement.bpm,this.scheduleAllTracks(),this.metronomeEnabled&&this.startMetronome(),e.start(),this.startPositionUpdates(),this.emitStateChange()}stop(){if(this.transportState==="recording"){this.stopRecordingToTrack();return}this.stopTransport(),this.emitStateChange()}stopTransport(){const e=rn();e.stop(),e.cancel(),e.position=0;for(const n of this.trackAudio.values())n.part&&(n.part.stop(),n.part.dispose(),n.part=null);this.stopMetronome(),this.stopPositionUpdates(),this.transportState="stopped"}setPosition(e){const n=rn();n.seconds=e/this.arrangement.bpm*60}setBpm(e){this.arrangement.bpm=e,rn().bpm.value=e,this.emitStateChange()}setMetronomeEnabled(e){this.metronomeEnabled=e,e?this.transportState!=="stopped"&&this.startMetronome():this.stopMetronome()}startMetronome(){if(this.metronomeLoop)return;this.metronomeSynth||(this.metronomeSynth=new hi({oscillator:{type:"sine"},envelope:{attack:.001,decay:.05,sustain:0,release:.01},volume:-6}).toDestination());let e=0;this.metronomeLoop=new Of(n=>{const s=e%4===0?"C6":"G5";this.metronomeSynth.triggerAttackRelease(s,"32n",n),e++},"4n"),this.metronomeLoop.start(0)}stopMetronome(){this.metronomeLoop&&(this.metronomeLoop.stop(),this.metronomeLoop.dispose(),this.metronomeLoop=null)}createTrackAudio(e){const n=new Ls(e.volume).toDestination();e.muted&&(n.mute=!0);const s={synth:null,drumSynths:null,drumFilter:null,volume:n,part:null};if(e.instrument.type==="synth"){const i=_n[e.instrument.presetIndex]||_n[0];s.synth=new Xc(hi,{maxPolyphony:v0,oscillator:i.oscillator,envelope:i.envelope}),s.synth.connect(n)}else{s.drumSynths=new Map,s.drumFilter=new da({frequency:8e3,type:"highpass"}),s.drumFilter.connect(n);const i=new Wn({pitchDecay:.05,octaves:6,oscillator:{type:"sine"},envelope:{attack:.001,decay:.3,sustain:0,release:.1}});i.connect(n),s.drumSynths.set(36,i);const r=new zt({noise:{type:"white"},envelope:{attack:.001,decay:.15,sustain:0,release:.05}});r.connect(n),s.drumSynths.set(37,r);const a=new zt({noise:{type:"white"},envelope:{attack:.001,decay:.05,sustain:0,release:.01}});a.connect(s.drumFilter),s.drumSynths.set(38,a);const o=new zt({noise:{type:"white"},envelope:{attack:.001,decay:.3,sustain:0,release:.1}});o.connect(s.drumFilter),s.drumSynths.set(39,o);const l=new zt({noise:{type:"pink"},envelope:{attack:.001,decay:.12,sustain:0,release:.05}});l.connect(n),s.drumSynths.set(40,l);const c=new Wn({pitchDecay:.03,octaves:4,oscillator:{type:"sine"},envelope:{attack:.001,decay:.2,sustain:0,release:.1}});c.connect(n),s.drumSynths.set(41,c);const u=new Ts({frequency:300,envelope:{attack:.001,decay:1.2,release:.3},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5});u.connect(n),s.drumSynths.set(42,u);const d=new Ts({frequency:400,envelope:{attack:.001,decay:.4,release:.1},harmonicity:5.1,modulationIndex:16,resonance:5e3,octaves:1});d.connect(n),s.drumSynths.set(43,d)}this.trackAudio.set(e.id,s)}disposeTrackAudio(e){var s,i,r;const n=this.trackAudio.get(e);if(n){if(n.part&&(n.part.stop(),n.part.dispose()),(s=n.synth)==null||s.releaseAll(),(i=n.synth)==null||i.dispose(),n.drumSynths)for(const a of n.drumSynths.values())a.dispose();(r=n.drumFilter)==null||r.dispose(),n.volume.dispose(),this.trackAudio.delete(e)}}scheduleAllTracks(){const e=this.arrangement.tracks.some(n=>n.solo);for(const n of this.arrangement.tracks){const s=this.trackAudio.get(n.id);if(!s||!(e?n.solo:!n.muted))continue;const r=[];for(const a of n.regions)for(const o of a.notes){const l=a.startBeat+o.startBeat;r.push({time:l*(60/this.arrangement.bpm),note:o})}r.length!==0&&(s.part=new dc((a,o)=>{const{note:l}=o;if(n.instrument.type==="drums")this.playDrumNote(s,l.note,l.velocity,a);else if(s.synth){const c=lr(l.note),u=l.durationBeats*60/this.arrangement.bpm;s.synth.triggerAttackRelease(c,u,a,l.velocity)}},r.map(a=>({time:a.time,note:a.note}))),s.part.start(0))}}playDrumNote(e,n,s,i){if(!e.drumSynths)return;const r=e.drumSynths.get(n);if(!r)return;const a=s*.8+.2;if(r instanceof Wn){const o=n===36?"C1":"G1";r.triggerAttackRelease(o,"8n",i,a)}else if(r instanceof zt){const o=n===38?"16n":n===39?"8n":"16n";r.triggerAttackRelease(o,i,a)}else if(r instanceof Ts){const o=n===42?"16n":"32n";r.triggerAttackRelease(o,i,a)}}updateSoloState(){const e=this.arrangement.tracks.some(n=>n.solo);for(const n of this.arrangement.tracks){const s=this.trackAudio.get(n.id);s&&(e?s.volume.mute=!n.solo:s.volume.mute=n.muted)}}startPositionUpdates(){const e=()=>{if(this.transportState==="stopped")return;const n=this.getPosition();for(const s of this.positionCallbacks)s(n);if(this.transportState==="playing"&&n>=this.arrangement.lengthBeats){this.stop();return}this.positionRAF=requestAnimationFrame(e)};this.positionRAF=requestAnimationFrame(e)}stopPositionUpdates(){cancelAnimationFrame(this.positionRAF);for(const e of this.positionCallbacks)e(0)}autoExtendLength(){let e=D_;for(const n of this.arrangement.tracks)for(const s of n.regions)e=Math.max(e,s.startBeat+s.lengthBeats+4);this.arrangement.lengthBeats=Math.ceil(e/4)*4}onStateChange(e){return this.stateCallbacks.push(e),()=>{this.stateCallbacks=this.stateCallbacks.filter(n=>n!==e)}}onPositionChange(e){return this.positionCallbacks.push(e),()=>{this.positionCallbacks=this.positionCallbacks.filter(n=>n!==e)}}emitStateChange(){for(const e of this.stateCallbacks)e()}saveToLocalStorage(){try{localStorage.setItem(M_,JSON.stringify(this.arrangement))}catch{}}loadFromLocalStorage(){try{const e=localStorage.getItem(M_);if(!e)return!1;const n=JSON.parse(e);this.arrangement=n;for(const s of this.arrangement.tracks)this.createTrackAudio(s);return this.emitStateChange(),!0}catch{return!1}}pushUndoSnapshot(e){on.pushUndo(e,structuredClone(this.arrangement))}beginUndoGroup(e){on.beginUndoGroup(e,structuredClone(this.arrangement))}endUndoGroup(){on.endUndoGroup()}restoreFromSnapshot(e){for(const n of this.trackAudio.keys())this.disposeTrackAudio(n);this.arrangement=structuredClone(e);for(const n of this.arrangement.tracks)this.createTrackAudio(n);this.emitStateChange()}performUndo(){const e=on.undo();e&&(on.pushRedo("Undo",structuredClone(this.arrangement)),this.restoreFromSnapshot(e))}performRedo(){const e=on.redo();e&&(on.pushUndo("Redo",structuredClone(this.arrangement)),this.restoreFromSnapshot(e))}updateRegionNotes(e,n,s){this.pushUndoSnapshot("Edit Notes");const i=this.findTrack(e);if(!i)return;const r=i.regions.find(a=>a.id===n);r&&(r.notes=s,this.emitStateChange())}resizeRegion(e,n,s,i){this.pushUndoSnapshot("Trim Region");const r=this.findTrack(e);if(!r)return;const a=r.regions.find(o=>o.id===n);if(a){if(s!==void 0){const o=Math.max(0,s),l=o-a.startBeat;l!==0&&(a.notes=a.notes.map(c=>({...c,startBeat:c.startBeat-l})).filter(c=>c.startBeat+c.durationBeats>0).map(c=>c.startBeat<0?{...c,durationBeats:c.durationBeats+c.startBeat,startBeat:0}:c),a.startBeat=o)}if(i!==void 0){const o=Math.max(.25,i);a.notes=a.notes.filter(l=>l.startBeat<o).map(l=>l.startBeat+l.durationBeats>o?{...l,durationBeats:o-l.startBeat}:l),a.lengthBeats=o}this.autoExtendLength(),this.emitStateChange()}}copyRegion(e,n){const s=this.findTrack(e);if(!s)return;const i=s.regions.find(r=>r.id===n);i&&(this.clipboard={region:structuredClone(i),trackId:e})}pasteRegion(e,n){if(!this.clipboard)return;this.pushUndoSnapshot("Paste Region");const s=this.findTrack(e);if(!s)return;const i={...structuredClone(this.clipboard.region),id:crypto.randomUUID(),startBeat:n};s.regions.push(i),this.autoExtendLength(),this.emitStateChange()}hasClipboard(){return this.clipboard!==null}findTrack(e){return this.arrangement.tracks.find(n=>n.id===e)}dispose(){var e;this.stopTransport();for(const n of this.trackAudio.keys())this.disposeTrackAudio(n);(e=this.metronomeSynth)==null||e.dispose(),this.metronomeSynth=null,this.stateCallbacks=[],this.positionCallbacks=[]}}const ce=new v9;function b9({tracks:t,transportState:e,position:n,lengthBeats:s,recordingTrackId:i,armedTrackId:r,liveRegion:a,onAddTrack:o,onRemoveTrack:l,onSetTrackInstrument:c,onSetTrackVolume:u,onSetTrackMute:d,onSetTrackSolo:h,onMoveRegion:p,onResizeRegion:m,onRemoveRegion:y,onSplitRegion:x,onDuplicateRegion:v,onArmTrack:b,canUndo:_,canRedo:w,onUndo:S,onRedo:T,onEditRegion:E,onCopyRegion:C,onPasteRegion:M,hasClipboard:A,onExport:k}){const[N,P]=g.useState(J7),[j,I]=g.useState(1),[D,O]=g.useState("pointer"),[R,B]=g.useState(new Set),[F,Z]=g.useState(null),V=g.useRef(null),q=g.useRef(null),$=200,H=g.useRef(new Map),[Y,L]=g.useState(null),z=g.useRef(null),te=g.useRef(!1),fe=g.useCallback((K,Q,ue)=>{B(ke=>{const Ke=new Set(ke);return ue?Ke.has(Q)?(Ke.delete(Q),H.current.delete(Q)):(Ke.add(Q),H.current.set(Q,K)):(Ke.clear(),H.current.clear(),Ke.add(Q),H.current.set(Q,K)),Ke})},[]),ge=g.useCallback(()=>{B(new Set),H.current.clear()},[]);g.useEffect(()=>{if(e!=="playing"&&e!=="recording")return;const K=V.current;if(!K)return;const Q=Sn(n,N),ue=K.scrollLeft,ke=K.clientWidth;(Q>ue+ke-50||Q<ue)&&(K.scrollLeft=Q-100)},[n,N,e]),g.useEffect(()=>{const K=V.current;if(!K)return;const Q=ue=>{if(!ue.ctrlKey&&!ue.metaKey)return;ue.preventDefault();const ke=K.getBoundingClientRect(),Dn=(ue.clientX-ke.left+K.scrollLeft)/N,vi=-ue.deltaY*.5,_r=Math.round(Math.max(b0,Math.min(x0,N+vi)));if(_r!==N){P(_r);const ha=Dn*_r;K.scrollLeft=ha-(ue.clientX-ke.left)}};return K.addEventListener("wheel",Q,{passive:!1}),()=>K.removeEventListener("wheel",Q)},[N]),g.useEffect(()=>{const K=Q=>{if(!(Q.target instanceof HTMLInputElement||Q.target instanceof HTMLTextAreaElement)){if((Q.metaKey||Q.ctrlKey)&&Q.key==="a"){Q.preventDefault();const ue=new Set;H.current.clear();for(const ke of t)for(const Ke of ke.regions)ue.add(Ke.id),H.current.set(Ke.id,ke.id);B(ue);return}if(!(Q.metaKey||Q.ctrlKey||Q.altKey)){if(Q.key==="Delete"||Q.key==="Backspace"){if(R.size>0){for(const ue of R){const ke=H.current.get(ue);ke&&y(ke,ue)}ge();return}F&&(y(F.trackId,F.regionId),Z(null));return}if(Q.key==="Escape"){ge();return}if(Q.key==="v"||Q.key==="V"){O("pointer");return}if(Q.key==="c"||Q.key==="C"){O("cut");return}}}};return window.addEventListener("keydown",K),()=>window.removeEventListener("keydown",K)},[F,y,R,ge,t]);const be=g.useCallback((K,Q,ue)=>{Z({x:K.clientX,y:K.clientY,trackId:Q,regionId:ue})},[]),Rt=g.useCallback(K=>{if(K.button!==0||!q.current)return;const Q=q.current.getBoundingClientRect(),ue=K.clientX-Q.left,ke=K.clientY-Q.top;z.current={x:ue,y:ke,clientX:K.clientX,clientY:K.clientY},te.current=!1,K.currentTarget.setPointerCapture(K.pointerId)},[]),en=g.useCallback(K=>{if(!z.current||!q.current)return;const Q=K.clientX-z.current.clientX,ue=K.clientY-z.current.clientY;if(!te.current&&(Math.abs(Q)>3||Math.abs(ue)>3)&&(te.current=!0),te.current){const ke=q.current.getBoundingClientRect(),Ke=K.clientX-ke.left,Dn=K.clientY-ke.top;L({startX:z.current.x,startY:z.current.y,currentX:Ke,currentY:Dn})}},[]),J=g.useCallback(K=>{if(z.current){if(te.current&&Y){const Q=Math.min(Y.startX,Y.currentX),ue=Math.max(Y.startX,Y.currentX),ke=Math.min(Y.startY,Y.currentY),Ke=Math.max(Y.startY,Y.currentY),Dn=new Set(K.shiftKey?R:[]);K.shiftKey||H.current.clear(),t.forEach((vi,_r)=>{const ha=_r*ae;ha+ae<=ke||ha>=Ke||vi.regions.forEach(el=>{const VM=Sn(el.startBeat,N);Sn(el.startBeat+el.lengthBeats,N)>Q&&VM<ue&&(Dn.add(el.id),H.current.set(el.id,vi.id))})}),B(Dn)}else K.shiftKey||ge();L(null),z.current=null,te.current=!1}},[Y,R,t,N,ge]),ae=64,Ge=t.length*ae;return f.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[f.jsx(o9,{snapValue:j,pxPerBeat:N,canUndo:_,canRedo:w,tool:D,onSnapChange:I,onZoomChange:P,onAddSynthTrack:()=>o("synth"),onAddDrumTrack:()=>o("drums"),onUndo:S,onRedo:T,onExport:k,onToolChange:O}),f.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[f.jsxs("div",{className:"shrink-0 overflow-y-auto border-r border-border",style:{width:$},children:[f.jsx("div",{className:"h-6 border-b border-border"}),t.map(K=>f.jsx(c9,{track:K,isArmed:r===K.id,isRecording:i===K.id,onMuteToggle:()=>d(K.id,!K.muted),onSoloToggle:()=>h(K.id,!K.solo),onVolumeChange:Q=>u(K.id,Q),onInstrumentChange:Q=>c(K.id,Q),onDelete:()=>l(K.id),onArmToggle:()=>b(r===K.id?null:K.id)},K.id)),t.length===0&&f.jsx("div",{className:"flex h-32 items-center justify-center text-xs text-muted-foreground",children:"Add a track to begin"})]}),f.jsx("div",{ref:V,className:"flex-1 overflow-auto",onClick:ge,children:f.jsxs("div",{className:"relative",style:{width:Sn(s,N)},children:[f.jsx(l9,{lengthBeats:s,pxPerBeat:N,snapValue:j,onSeek:K=>ce.setPosition(K)}),f.jsxs("div",{ref:q,className:"relative",onClick:K=>K.stopPropagation(),onPointerDown:Rt,onPointerMove:en,onPointerUp:J,children:[t.map(K=>f.jsx(p9,{track:K,lengthBeats:s,pxPerBeat:N,snapValue:j,tool:D,selectedRegionIds:R,liveRegion:i===K.id?a:null,onMoveRegion:p,onResizeRegion:m?(Q,ue,ke,Ke)=>m(Q,ue,ke,Ke):void 0,onSplitRegion:x,onSelectRegion:fe,onRegionContextMenu:be,onEditRegion:E},K.id)),Y&&f.jsx("div",{className:"absolute pointer-events-none rounded-sm border border-primary/60 z-20",style:{left:Math.min(Y.startX,Y.currentX),top:Math.min(Y.startY,Y.currentY),width:Math.abs(Y.currentX-Y.startX),height:Math.abs(Y.currentY-Y.startY),backgroundColor:"oklch(0.60 0.15 265 / 0.15)"}})]}),(e==="playing"||e==="recording")&&f.jsx(m9,{position:n,pxPerBeat:N,height:24+Ge})]})})]}),F&&f.jsx(g9,{x:F.x,y:F.y,onSplit:()=>x(F.trackId,F.regionId,n),onDuplicate:()=>v(F.trackId,F.regionId),onDelete:()=>y(F.trackId,F.regionId),onClose:()=>Z(null),onCopy:C?()=>C(F.trackId,F.regionId):void 0,onPaste:M?()=>M(F.trackId,n):void 0,canPaste:A})]})}const x9={.25:"1/16",.5:"1/8",1:"1/4",2:"1/2",4:"Bar"},_9=[{id:"pointer",icon:SA,label:"Pointer (V)"},{id:"draw",icon:EI,label:"Draw (D)"},{id:"eraser",icon:oI,label:"Eraser (E)"}];function w9({tool:t,snapValue:e,regionName:n,onToolChange:s,onSnapChange:i,onBack:r,onToolPointerDown:a,onToolPointerUp:o}){return f.jsxs("div",{className:"flex items-center gap-3 border-b border-border bg-card/60 backdrop-blur-sm px-3 py-1.5",children:[f.jsxs(Te,{variant:"ghost",size:"sm",className:"h-6 gap-1 px-2 text-[11px]",onClick:r,children:[f.jsx(yo,{className:"h-3 w-3"}),"Back"]}),n&&f.jsx("span",{className:"text-xs font-medium text-muted-foreground truncate max-w-[120px]",children:n}),f.jsx("div",{className:"h-4 w-px bg-border/60"}),f.jsx("div",{className:"flex items-center gap-0.5",children:_9.map(({id:l,icon:c,label:u})=>f.jsx(Te,{variant:"ghost",size:"sm",className:ee("h-6 w-6 p-0",t===l&&"bg-primary/20 text-primary ring-1 ring-primary/40 hover:bg-primary/30"),title:u,onClick:()=>s(l),onPointerDown:d=>{d.button===0&&a&&a(l)},onPointerUp:()=>{o&&o()},children:f.jsx(c,{className:"h-3.5 w-3.5"})},l))}),f.jsx("div",{className:"h-4 w-px bg-border/60"}),f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(yh,{className:"text-[11px] font-semibold text-muted-foreground",children:"Snap"}),f.jsxs(Rc,{value:String(e),onValueChange:l=>i(Number(l)),children:[f.jsx(Oc,{className:"h-6 w-16 border-0 bg-transparent text-[11px]",children:f.jsx(Dc,{})}),f.jsx(jc,{children:l2.map(l=>f.jsx(Zr,{value:String(l),children:x9[l]},l))})]})]})]})}const vh=24,ts=96,Ao=df.map(t=>({midiNote:t.midiNote,name:t.shortName,color:t.color}));Ao.length;const S9=.8,lw=1,cw=.25;function Ni(t,e){return t*e}function Jp(t,e){return t/e}function uw(t,e){return(ts-t-1)*e}function C9(t,e){return ts-Math.floor(t/e)-1}function dw(t,e){return t*e}function T9(t,e){return Math.floor(t/e)}function E9(t){var e;return((e=Ao[t])==null?void 0:e.midiNote)??36}function hw(t){return Ao.findIndex(e=>e.midiNote===t)}function ul(t,e){return e<=0?t:Math.round(t/e)*e}function A9({rowHeight:t,scrollTop:e,visibleHeight:n}){const s=[],i=Math.max(vh,ts-Math.floor((e+n)/t)-2),r=Math.min(ts,ts-Math.floor(e/t)+2);for(let a=r-1;a>=i;a--){const o=ac(a),l=lr(a),c=(ts-a-1)*t,u=a%12===0;s.push(f.jsx("div",{className:"absolute right-0 left-0 flex items-center justify-end border-b px-1.5 select-none",style:{top:c,height:t,backgroundColor:o?"oklch(0.18 0.01 270)":"oklch(0.22 0.005 270)",borderColor:"oklch(0.30 0.01 270)"},children:f.jsx("span",{className:"font-mono text-[9px]",style:{color:u?"oklch(0.75 0.08 265)":"oklch(0.55 0.02 270)",fontWeight:u?600:400},children:l})},a))}return f.jsx("div",{className:"relative",style:{height:(ts-vh)*t},children:s})}function k9({rowHeight:t}){return f.jsx("div",{className:"relative",style:{height:Ao.length*t},children:Ao.map((e,n)=>f.jsx("div",{className:"absolute right-0 left-0 flex items-center justify-end border-b px-1.5 select-none",style:{top:n*t,height:t,backgroundColor:n%2===0?"oklch(0.20 0.01 270)":"oklch(0.18 0.01 270)",borderColor:"oklch(0.30 0.01 270)"},children:f.jsx("span",{className:"font-mono text-[9px] font-semibold",style:{color:e.color},children:e.name})},e.midiNote))})}const N9=g.memo(function({x:e,y:n,width:s,height:i,color:r,selected:a,velocity:o}){const l=.5+o*.5;return f.jsx("div",{className:"absolute rounded-[2px] border pointer-events-none",style:{left:e,top:n+1,width:Math.max(s,3),height:i-2,backgroundColor:r,opacity:l,borderColor:a?"white":"rgba(255,255,255,0.25)",borderWidth:a?2:1,boxShadow:a?"0 0 6px rgba(255,255,255,0.3)":void 0},children:f.jsx("div",{className:"absolute top-0 right-0 bottom-0 pointer-events-auto cursor-col-resize",style:{width:6}})})});function M9({notes:t,selectedIndices:e,regionLengthBeats:n,pxPerBeat:s,rowHeight:i,snapValue:r,tool:a,isDrum:o,trackColor:l,onNotesChange:c,onSelectionChange:u}){const d=g.useRef(null),[h,p]=g.useState(null),m=o?Ao.length:ts-vh,y=Ni(n,s),x=m*i,v=g.useCallback((A,k)=>{if(!d.current)return{beat:0,note:0,row:0};const N=d.current.getBoundingClientRect(),P=A-N.left+d.current.scrollLeft,j=k-N.top+d.current.scrollTop,I=Jp(P,s);if(o){const D=T9(j,i);return{beat:I,note:E9(D),row:D}}return{beat:I,note:C9(j,i),row:0}},[s,i,o]),b=g.useCallback((A,k)=>{const{beat:N,note:P}=v(A,k);for(let j=t.length-1;j>=0;j--){const I=t[j];if(I.note===P&&N>=I.startBeat&&N<=I.startBeat+I.durationBeats){if(!d.current)return{index:j,edge:"body"};const D=d.current.getBoundingClientRect(),O=A-D.left+d.current.scrollLeft,R=Ni(I.startBeat,s),B=Ni(I.startBeat+I.durationBeats,s);return B-O<6&&B-O>=0?{index:j,edge:"right"}:O-R<6&&O-R>=0?{index:j,edge:"left"}:{index:j,edge:"body"}}}return null},[t,v,o,s]),_=g.useCallback(A=>{if(A.button!==0)return;A.preventDefault(),A.currentTarget.setPointerCapture(A.pointerId);const{beat:k,note:N}=v(A.clientX,A.clientY),P=b(A.clientX,A.clientY);if(a==="eraser"){if(P){const j=t.filter((I,D)=>D!==P.index);c(j),u(new Set)}return}if(a==="draw"){if(P&&P.edge==="body"){const j=t.filter((I,D)=>D!==P.index);c(j),u(new Set)}else if(P&&(P.edge==="left"||P.edge==="right")&&!o){const j=new Set([P.index]);u(j);const I=P.edge==="right"?"resize-right":"resize-left";p({type:I,startX:A.clientX,startY:A.clientY,originBeat:k,originNote:N,initialDurations:[t[P.index].durationBeats],initialPositions:[{startBeat:t[P.index].startBeat,note:t[P.index].note}]})}else if(!P){const j=ul(k,r),I=o?cw:r||lw,D={note:N,velocity:S9,startBeat:Math.max(0,j),durationBeats:I,isDrum:o},O=[...t,D],R=O.length-1;c(O),u(new Set([R])),p({type:"draw-extend",startX:A.clientX,startY:A.clientY,originBeat:j,originNote:N,drawNoteIndex:R})}return}if(P){const j=A.shiftKey;let I;j?(I=new Set(e),I.has(P.index)?I.delete(P.index):I.add(P.index)):e.has(P.index)?I=e:I=new Set([P.index]),u(I);const D=Array.from(I);(P.edge==="right"||P.edge==="left")&&!o?p({type:P.edge==="right"?"resize-right":"resize-left",startX:A.clientX,startY:A.clientY,originBeat:k,originNote:N,initialDurations:D.map(O=>t[O].durationBeats),initialPositions:D.map(O=>({startBeat:t[O].startBeat,note:t[O].note}))}):p({type:"move",startX:A.clientX,startY:A.clientY,originBeat:k,originNote:N,initialPositions:D.map(O=>({startBeat:t[O].startBeat,note:t[O].note}))})}else A.shiftKey||u(new Set),p({type:"rubber-band",startX:A.clientX,startY:A.clientY,originBeat:k,originNote:N,currentX:A.clientX,currentY:A.clientY})},[a,t,e,v,b,c,u,r,o]),w=g.useCallback(A=>{if(!h){if(a==="pointer"&&d.current){const j=b(A.clientX,A.clientY);((j==null?void 0:j.edge)==="right"||(j==null?void 0:j.edge)==="left")&&!o?d.current.style.cursor="col-resize":j?d.current.style.cursor="grab":d.current.style.cursor="crosshair"}return}const{beat:k,note:N}=v(A.clientX,A.clientY),P=Array.from(e);if(h.type==="move"&&h.initialPositions){const j=ul(k-h.originBeat,r),I=o?0:N-h.originNote,D=[...t];P.forEach((O,R)=>{const B=h.initialPositions[R];D[O]={...D[O],startBeat:Math.max(0,B.startBeat+j),note:o?D[O].note:Math.max(vh,Math.min(ts-1,B.note+I))}}),c(D)}else if(h.type==="resize-right"&&h.initialDurations){const j=ul(k-h.originBeat,r),I=[...t];P.forEach((D,O)=>{const R=Math.max(r||.125,h.initialDurations[O]+j);I[D]={...I[D],durationBeats:R}}),c(I)}else if(h.type==="resize-left"&&h.initialDurations&&h.initialPositions){const j=ul(k-h.originBeat,r),I=[...t];P.forEach((D,O)=>{const R=h.initialPositions[O].startBeat,B=h.initialDurations[O],F=Math.max(0,R+j),Z=B-(F-R);Z>=(r||.125)&&(I[D]={...I[D],startBeat:F,durationBeats:Z})}),c(I)}else if(h.type==="draw-extend"&&h.drawNoteIndex!==void 0){const j=ul(k,r),I=h.originBeat,D=o?cw:r||lw,O=Math.max(0,Math.min(I,j)),R=Math.max(I+D,j+D),B=h.drawNoteIndex;if(B<t.length){const F=[...t];F[B]={...F[B],startBeat:O,durationBeats:R-O},c(F)}}else h.type==="rubber-band"&&p(j=>j&&{...j,currentX:A.clientX,currentY:A.clientY})},[h,t,e,v,b,a,r,o,c]),S=g.useCallback(A=>{if((h==null?void 0:h.type)==="rubber-band"&&d.current){const k=d.current.getBoundingClientRect(),N=Math.min(h.startX,A.clientX)-k.left,P=Math.max(h.startX,A.clientX)-k.left,j=Math.min(h.startY,A.clientY)-k.top,I=Math.max(h.startY,A.clientY)-k.top,D=Jp(N,s),O=Jp(P,s),R=new Set(A.shiftKey?e:[]);t.forEach((B,F)=>{const Z=B.startBeat+B.durationBeats;if(B.startBeat<O&&Z>D){let V;if(o){const q=hw(B.note);V=dw(q,i)+i/2}else V=uw(B.note,i)+i/2;V>=j&&V<=I&&R.add(F)}}),u(R)}p(null)},[h,t,e,s,i,o,u]);g.useEffect(()=>{const A=k=>{if(!(k.target instanceof HTMLInputElement||k.target instanceof HTMLTextAreaElement)){if((k.key==="Delete"||k.key==="Backspace")&&e.size>0){k.preventDefault();const N=t.filter((P,j)=>!e.has(j));c(N),u(new Set);return}if((k.metaKey||k.ctrlKey)&&k.key==="a"){k.preventDefault(),u(new Set(t.map((N,P)=>P)));return}(k.key==="v"||k.key==="V")&&u(e)}};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[t,e,c,u]);const T=g.useMemo(()=>{const A=[];for(let k=0;k<=m;k++){const N=k*i;let P;if(o)P=k%2===0?"rgba(255,255,255,0.02)":"transparent";else{const j=ts-k-1;P=ac(j)?"rgba(255,255,255,0.03)":"transparent"}A.push(f.jsx("div",{className:"absolute w-full border-b",style:{top:N,height:i,backgroundColor:P,borderColor:"oklch(0.25 0.005 270)"}},`row-${k}`))}for(let k=0;k<=n;k+=r||.25){const N=Ni(k,s),P=k%4===0,j=k%1===0;A.push(f.jsx("div",{className:"absolute top-0 h-full",style:{left:N,width:1,backgroundColor:P?"oklch(0.35 0.01 270)":j?"oklch(0.28 0.005 270)":"oklch(0.22 0.003 270)"}},`vline-${k}`))}return A},[m,i,n,s,r,o]),E=g.useMemo(()=>t.map((A,k)=>{const N=Ni(A.startBeat,s),P=Ni(A.durationBeats,s);let j;if(o){const I=hw(A.note);j=dw(I>=0?I:0,i)}else j=uw(A.note,i);return f.jsx(N9,{x:N,y:j,width:P,height:i,color:l,selected:e.has(k),velocity:A.velocity},k)}),[t,s,i,o,l,e]),C=g.useMemo(()=>{if(!h||h.type!=="rubber-band"||!h.currentX||!h.currentY||!d.current)return null;const A=d.current.getBoundingClientRect(),k=Math.min(h.startX,h.currentX)-A.left,N=Math.min(h.startY,h.currentY)-A.top,P=Math.abs(h.currentX-h.startX),j=Math.abs(h.currentY-h.startY);return f.jsx("div",{className:"absolute pointer-events-none rounded-sm border border-primary/60",style:{left:k,top:N,width:P,height:j,backgroundColor:"oklch(0.60 0.15 265 / 0.15)"}})},[h]),M=a==="draw"?"cursor-crosshair":a==="eraser"?"cursor-pointer":"cursor-default";return f.jsxs("div",{ref:d,className:`relative overflow-hidden ${M}`,style:{width:y,height:x},onPointerDown:_,onPointerMove:w,onPointerUp:S,children:[T,E,C]})}function R9({notes:t,selectedIndices:e,pxPerBeat:n,color:s,height:i,onVelocityChange:r}){const a=g.useRef(null),o=g.useRef(null),[l,c]=g.useState(null),u=g.useCallback(m=>{if(!o.current)return .8;const y=o.current.getBoundingClientRect(),x=m-y.top;return Math.max(.05,Math.min(1,1-x/y.height))},[]),d=g.useCallback((m,y)=>{m.stopPropagation(),m.target.setPointerCapture(m.pointerId),a.current=y;const x=u(m.clientY);r(y,x),c({index:y,value:x,x:m.clientX})},[r,u]),h=g.useCallback(m=>{if(a.current!==null){const y=u(m.clientY);r(a.current,y),c({index:a.current,value:y,x:m.clientX})}},[r,u]),p=g.useCallback(()=>{a.current=null,c(null)},[]);return f.jsxs("div",{ref:o,className:"relative border-t border-border bg-background/30 select-none",style:{height:i},onPointerMove:h,onPointerUp:p,children:[f.jsx("span",{className:"absolute top-1 left-1.5 text-[9px] font-medium text-muted-foreground/50 pointer-events-none z-10",children:"Vel"}),f.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[{pct:"25%",label:"75%"},{pct:"50%",label:"50%"},{pct:"75%",label:"25%"}].map(({pct:m,label:y})=>f.jsxs("div",{className:"absolute w-full",style:{top:m},children:[f.jsx("div",{className:"w-full border-b border-dashed border-border/30"}),f.jsx("span",{className:"absolute right-1.5 -top-2.5 text-[8px] text-muted-foreground/40",children:y})]},m))}),t.map((m,y)=>{const x=Ni(m.startBeat,n),v=Math.max(Ni(m.durationBeats,n),3),b=m.velocity*i,_=e.has(y);return l==null||l.index,f.jsx("div",{className:"absolute bottom-0 cursor-ns-resize rounded-t-sm",style:{left:x,width:Math.min(v,12),height:b,background:_?"linear-gradient(to top, rgba(255,255,255,0.7), rgba(255,255,255,0.95))":`linear-gradient(to top, ${s}B3, ${s}F0)`,opacity:_?.9:.7},onPointerDown:w=>d(w,y),children:f.jsx("div",{className:"absolute top-0 left-0 right-0 h-px rounded-t-sm",style:{backgroundColor:_?"rgba(255,255,255,0.5)":"rgba(255,255,255,0.2)"}})},y)}),l&&o.current&&(()=>{const m=o.current.getBoundingClientRect(),y=l.x-m.left,x=(1-l.value)*i-18;return f.jsx("div",{className:"absolute pointer-events-none z-20 bg-popover text-popover-foreground text-[9px] font-mono px-1.5 py-0.5 rounded shadow-sm border border-border/60 whitespace-nowrap",style:{left:y,top:Math.max(0,x),transform:"translateX(-50%)"},children:l.value.toFixed(2)})})()]})}const D9=40,O9=60,j9=60,P9=200;function I9({trackId:t,regionId:e,arrangement:n,onClose:s,onUpdateNotes:i,onResizeRegion:r}){const[a,o]=g.useState("pointer"),[l,c]=g.useState(.25),[u,d]=g.useState(new Set),[h,p]=g.useState(D9),m=g.useRef(null),y=g.useRef(null),[x,v]=g.useState(0),[b,_]=g.useState(400),w=g.useRef(null),S=g.useRef(null),T=g.useRef(!1),E=g.useMemo(()=>n.tracks.find(O=>O.id===t),[n,t]),C=g.useMemo(()=>E==null?void 0:E.regions.find(O=>O.id===e),[E,e]),M=(E==null?void 0:E.instrument.type)==="drums",A=M?28:14,k=(C==null?void 0:C.notes)??[],N=g.useCallback(()=>{!m.current||!y.current||(y.current.scrollTop=m.current.scrollTop,v(m.current.scrollTop))},[]);g.useEffect(()=>{if(!m.current||M)return;const R=(ts-60)*A-m.current.clientHeight/2;m.current.scrollTop=Math.max(0,R),_(m.current.clientHeight)},[A,M]),g.useEffect(()=>{if(!m.current)return;const O=new ResizeObserver(()=>{m.current&&_(m.current.clientHeight)});return O.observe(m.current),()=>O.disconnect()},[]);const P=g.useCallback(O=>{i(t,e,O)},[t,e,i]),j=g.useCallback((O,R)=>{const B=[...k];B[O]={...B[O],velocity:R},i(t,e,B)},[k,t,e,i]),I=g.useCallback(O=>{o(R=>R===O?R:(w.current=R,T.current=!1,S.current!==null&&clearTimeout(S.current),S.current=setTimeout(()=>{S.current=null,T.current=!0;const B=()=>{w.current!==null&&(o(w.current),w.current=null),T.current=!1,window.removeEventListener("pointerup",B)};window.addEventListener("pointerup",B)},P9),O))},[]),D=g.useCallback(()=>{S.current!==null&&(clearTimeout(S.current),S.current=null,w.current=null,T.current=!1)},[]);return g.useEffect(()=>{const O=R=>{if(!(R.target instanceof HTMLInputElement||R.target instanceof HTMLTextAreaElement)&&!(R.metaKey||R.ctrlKey||R.altKey))switch(R.key){case"v":case"V":o("pointer");break;case"d":case"D":o("draw");break;case"e":case"E":o("eraser");break}};return window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)},[]),g.useEffect(()=>{const O=m.current;if(!O)return;const R=B=>{if(!B.ctrlKey&&!B.metaKey)return;B.preventDefault();const F=O.getBoundingClientRect(),V=(B.clientX-F.left+O.scrollLeft)/h,q=-B.deltaY*.5,$=Math.round(Math.max(b0,Math.min(x0,h+q)));if($!==h){p($);const H=V*$;O.scrollLeft=H-(B.clientX-F.left)}};return O.addEventListener("wheel",R,{passive:!1}),()=>O.removeEventListener("wheel",R)},[h]),g.useEffect(()=>()=>{S.current!==null&&clearTimeout(S.current)},[]),!E||!C?f.jsxs("div",{className:"flex flex-1 items-center justify-center text-muted-foreground text-sm",children:["Region not found.",f.jsx("button",{className:"ml-2 underline",onClick:s,children:"Go back"})]}):f.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[f.jsx(w9,{tool:a,snapValue:l,regionName:C.name,onToolChange:o,onSnapChange:c,onBack:s,onToolPointerDown:I,onToolPointerUp:D}),f.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[f.jsx("div",{ref:y,className:"shrink-0 overflow-hidden border-r border-border bg-card/60",style:{width:O9},children:M?f.jsx(k9,{rowHeight:A}):f.jsx(A9,{rowHeight:A,scrollTop:x,visibleHeight:b})}),f.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[f.jsx("div",{ref:m,className:"flex-1 overflow-auto",onScroll:N,children:f.jsx(M9,{notes:k,selectedIndices:u,regionLengthBeats:C.lengthBeats,pxPerBeat:h,rowHeight:A,snapValue:l,tool:a,isDrum:M,trackColor:E.color,onNotesChange:P,onSelectionChange:d})}),f.jsx(R9,{notes:k,selectedIndices:u,pxPerBeat:h,color:E.color,height:j9,onVelocityChange:j})]})]})]})}const B9="modulepreload",L9=function(t){return"/"+t},fw={},V9=function(e,n,s){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=L9(l),l in fw)return;fw[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":B9,c||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((h,p)=>{d.addEventListener("load",h),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&r(o.reason);return e().catch(r)})};function z9(t){const e=t.numberOfChannels,n=t.sampleRate,s=16,i=s/8,r=e*i,a=t.length,o=a*r,l=44,c=new ArrayBuffer(l+o),u=new DataView(c);Du(u,0,"RIFF"),u.setUint32(4,36+o,!0),Du(u,8,"WAVE"),Du(u,12,"fmt "),u.setUint32(16,16,!0),u.setUint16(20,1,!0),u.setUint16(22,e,!0),u.setUint32(24,n,!0),u.setUint32(28,n*r,!0),u.setUint16(32,r,!0),u.setUint16(34,s,!0),Du(u,36,"data"),u.setUint32(40,o,!0);const d=[];for(let p=0;p<e;p++)d.push(t.getChannelData(p));let h=l;for(let p=0;p<a;p++)for(let m=0;m<e;m++){const y=Math.max(-1,Math.min(1,d[m][p])),x=y<0?y*32768:y*32767;u.setInt16(h,x,!0),h+=2}return new Blob([c],{type:"audio/wav"})}function Du(t,e,n){for(let s=0;s<n.length;s++)t.setUint8(e+s,n.charCodeAt(s))}function F9(t,e){const n=new Ls(t.volume);if(n.connect(e),t.muted&&(n.mute=!0),t.instrument.type==="synth"){const p=_n[t.instrument.presetIndex]||_n[0],m=new Xc(hi,{maxPolyphony:v0,oscillator:p.oscillator,envelope:p.envelope});return m.connect(n),{synth:m,drumSynths:null,drumFilter:null,volume:n}}const s=new Map,i=new da({frequency:8e3,type:"highpass"});i.connect(n);const r=new Wn({pitchDecay:.05,octaves:6,oscillator:{type:"sine"},envelope:{attack:.001,decay:.3,sustain:0,release:.1}});r.connect(n),s.set(36,r);const a=new zt({noise:{type:"white"},envelope:{attack:.001,decay:.15,sustain:0,release:.05}});a.connect(n),s.set(37,a);const o=new zt({noise:{type:"white"},envelope:{attack:.001,decay:.05,sustain:0,release:.01}});o.connect(i),s.set(38,o);const l=new zt({noise:{type:"white"},envelope:{attack:.001,decay:.3,sustain:0,release:.1}});l.connect(i),s.set(39,l);const c=new zt({noise:{type:"pink"},envelope:{attack:.001,decay:.12,sustain:0,release:.05}});c.connect(n),s.set(40,c);const u=new Wn({pitchDecay:.03,octaves:4,oscillator:{type:"sine"},envelope:{attack:.001,decay:.2,sustain:0,release:.1}});u.connect(n),s.set(41,u);const d=new Ts({frequency:300,envelope:{attack:.001,decay:1.2,release:.3},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5});d.connect(n),s.set(42,d);const h=new Ts({frequency:400,envelope:{attack:.001,decay:.4,release:.1},harmonicity:5.1,modulationIndex:16,resonance:5e3,octaves:1});return h.connect(n),s.set(43,h),{synth:null,drumSynths:s,drumFilter:i,volume:n}}function H9(t,e,n,s){const i=t.get(e);if(!i)return;const r=n*.8+.2;if(i instanceof Wn){const a=e===36?"C1":"G1";i.triggerAttackRelease(a,"8n",s,r)}else if(i instanceof zt){const a=e===38?"16n":e===39?"8n":"16n";i.triggerAttackRelease(a,s,r)}else if(i instanceof Ts){const a=e===42?"16n":"32n";i.triggerAttackRelease(a,s,r)}}function U9(t){let e=0;for(const n of t.tracks)if(!n.muted)for(const s of n.regions)for(const i of s.notes){const r=s.startBeat+i.startBeat+i.durationBeats;e=Math.max(e,r)}return e}async function G9(t){const e=U9(t);if(e<=0)throw new Error("Nothing to export");const n=e/t.bpm*60+1,s=await zq(({destination:i})=>{const r=rn();r.bpm.value=t.bpm;for(const a of t.tracks){if(a.muted)continue;const o=F9(a,i),l=[];for(const u of a.regions)for(const d of u.notes){const h=u.startBeat+d.startBeat;l.push({time:h*(60/t.bpm),note:d})}if(l.length===0)continue;new dc((u,d)=>{const{note:h}=d;if(a.instrument.type==="drums"&&o.drumSynths)H9(o.drumSynths,h.note,h.velocity,u);else if(o.synth){const p=lr(h.note),m=h.durationBeats*60/t.bpm;o.synth.triggerAttackRelease(p,m,u,h.velocity)}},l.map(u=>({time:u.time,note:u.note}))).start(0)}r.start(0)},n);return z9(s)}async function q9(t){const e=await V9(()=>import("./index-NoIDKwG_.js").then(l=>l.i),[]),n=[];for(const l of t.tracks){if(l.muted)continue;const c=new e.Track;c.setTempo(t.bpm),c.addTrackName(l.name);const u=l.instrument.type==="drums"?10:1,d=[];for(const h of l.regions)for(const p of h.notes)d.push({absoluteBeat:h.startBeat+p.startBeat,note:p});d.sort((h,p)=>h.absoluteBeat-p.absoluteBeat);for(const{absoluteBeat:h,note:p}of d){const m=Math.round(h*128),y=Math.max(1,Math.round(p.durationBeats*128));c.addEvent(new e.NoteEvent({pitch:[p.note],duration:`T${y}`,velocity:Math.round(p.velocity*100),startTick:m,channel:u}))}n.push(c)}if(n.length===0)throw new Error("Nothing to export");const r=new e.Writer(n).dataUri().split(",")[1],a=atob(r),o=new Uint8Array(a.length);for(let l=0;l<a.length;l++)o[l]=a.charCodeAt(l);return new Blob([o],{type:"audio/midi"})}function pw(t,e){const n=URL.createObjectURL(t),s=document.createElement("a");s.href=n,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n)}function W9({onClose:t}){const[e,n]=g.useState(null),[s,i]=g.useState(null),r=g.useCallback(async()=>{n("wav"),i(null);try{const o=ce.getArrangement(),l=await G9(o),c=o.name||"untitled";pw(l,`${c}.wav`)}catch(o){i(o instanceof Error?o.message:"Export failed")}finally{n(null)}},[]),a=g.useCallback(async()=>{n("midi"),i(null);try{const o=ce.getArrangement(),l=await q9(o),c=o.name||"untitled";pw(l,`${c}.mid`)}catch(o){i(o instanceof Error?o.message:"Export failed")}finally{n(null)}},[]);return f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:f.jsxs("div",{className:"relative w-80 rounded-lg border border-border bg-card p-5 shadow-2xl",children:[f.jsx("button",{className:"absolute right-3 top-3 text-muted-foreground hover:text-foreground",onClick:t,children:f.jsx(Gh,{className:"h-4 w-4"})}),f.jsx("h2",{className:"mb-4 text-sm font-bold",children:"Export"}),f.jsxs("div",{className:"flex flex-col gap-2",children:[f.jsxs(Te,{variant:"outline",className:"h-12 justify-start gap-3",onClick:r,disabled:e!==null,children:[e==="wav"?f.jsx(X1,{className:"h-5 w-5 animate-spin"}):f.jsx(cI,{className:"h-5 w-5 text-primary"}),f.jsxs("div",{className:"text-left",children:[f.jsx("div",{className:"text-xs font-semibold",children:"WAV Audio"}),f.jsx("div",{className:"text-[10px] text-muted-foreground",children:"16-bit PCM, lossless"})]})]}),f.jsxs(Te,{variant:"outline",className:"h-12 justify-start gap-3",onClick:a,disabled:e!==null,children:[e==="midi"?f.jsx(X1,{className:"h-5 w-5 animate-spin"}):f.jsx(Lv,{className:"h-5 w-5 text-primary"}),f.jsxs("div",{className:"text-left",children:[f.jsx("div",{className:"text-xs font-semibold",children:"MIDI"}),f.jsx("div",{className:"text-[10px] text-muted-foreground",children:"Standard MIDI file"})]})]})]}),s&&f.jsx("p",{className:"mt-3 text-xs text-red-500",children:s})]})})}var mw=1,$9=.9,Y9=.8,K9=.17,em=.1,tm=.999,X9=.9999,Q9=.99,Z9=/[\\\/_+.#"@\[\(\{&]/,J9=/[\\\/_+.#"@\[\(\{&]/g,eW=/[\s-]/,bM=/[\s-]/g;function ty(t,e,n,s,i,r,a){if(r===e.length)return i===t.length?mw:Q9;var o=`${i},${r}`;if(a[o]!==void 0)return a[o];for(var l=s.charAt(r),c=n.indexOf(l,i),u=0,d,h,p,m;c>=0;)d=ty(t,e,n,s,c+1,r+1,a),d>u&&(c===i?d*=mw:Z9.test(t.charAt(c-1))?(d*=Y9,p=t.slice(i,c-1).match(J9),p&&i>0&&(d*=Math.pow(tm,p.length))):eW.test(t.charAt(c-1))?(d*=$9,m=t.slice(i,c-1).match(bM),m&&i>0&&(d*=Math.pow(tm,m.length))):(d*=K9,i>0&&(d*=Math.pow(tm,c-i))),t.charAt(c)!==e.charAt(r)&&(d*=X9)),(d<em&&n.charAt(c-1)===s.charAt(r+1)||s.charAt(r+1)===s.charAt(r)&&n.charAt(c-1)!==s.charAt(r))&&(h=ty(t,e,n,s,c+1,r+2,a),h*em>d&&(d=h*em)),d>u&&(u=d),c=n.indexOf(l,c+1);return a[o]=u,u}function gw(t){return t.toLowerCase().replace(bM," ")}function tW(t,e,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,ty(t,e,gw(t),gw(e),0,0,{})}var dl='[cmdk-group=""]',nm='[cmdk-group-items=""]',nW='[cmdk-group-heading=""]',xM='[cmdk-item=""]',yw=`${xM}:not([aria-disabled="true"])`,ny="cmdk-item-select",Ta="data-value",sW=(t,e,n)=>tW(t,e,n),_M=g.createContext(void 0),Zc=()=>g.useContext(_M),wM=g.createContext(void 0),ib=()=>g.useContext(wM),SM=g.createContext(void 0),CM=g.forwardRef((t,e)=>{let n=Ea(()=>{var V,q;return{search:"",value:(q=(V=t.value)!=null?V:t.defaultValue)!=null?q:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),s=Ea(()=>new Set),i=Ea(()=>new Map),r=Ea(()=>new Map),a=Ea(()=>new Set),o=TM(t),{label:l,children:c,value:u,onValueChange:d,filter:h,shouldFilter:p,loop:m,disablePointerSelection:y=!1,vimBindings:x=!0,...v}=t,b=un(),_=un(),w=un(),S=g.useRef(null),T=pW();na(()=>{if(u!==void 0){let V=u.trim();n.current.value=V,E.emit()}},[u]),na(()=>{T(6,P)},[]);let E=g.useMemo(()=>({subscribe:V=>(a.current.add(V),()=>a.current.delete(V)),snapshot:()=>n.current,setState:(V,q,$)=>{var H,Y,L,z;if(!Object.is(n.current[V],q)){if(n.current[V]=q,V==="search")N(),A(),T(1,k);else if(V==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let te=document.getElementById(w);te?te.focus():(H=document.getElementById(b))==null||H.focus()}if(T(7,()=>{var te;n.current.selectedItemId=(te=j())==null?void 0:te.id,E.emit()}),$||T(5,P),((Y=o.current)==null?void 0:Y.value)!==void 0){let te=q??"";(z=(L=o.current).onValueChange)==null||z.call(L,te);return}}E.emit()}},emit:()=>{a.current.forEach(V=>V())}}),[]),C=g.useMemo(()=>({value:(V,q,$)=>{var H;q!==((H=r.current.get(V))==null?void 0:H.value)&&(r.current.set(V,{value:q,keywords:$}),n.current.filtered.items.set(V,M(q,$)),T(2,()=>{A(),E.emit()}))},item:(V,q)=>(s.current.add(V),q&&(i.current.has(q)?i.current.get(q).add(V):i.current.set(q,new Set([V]))),T(3,()=>{N(),A(),n.current.value||k(),E.emit()}),()=>{r.current.delete(V),s.current.delete(V),n.current.filtered.items.delete(V);let $=j();T(4,()=>{N(),($==null?void 0:$.getAttribute("id"))===V&&k(),E.emit()})}),group:V=>(i.current.has(V)||i.current.set(V,new Set),()=>{r.current.delete(V),i.current.delete(V)}),filter:()=>o.current.shouldFilter,label:l||t["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:b,inputId:w,labelId:_,listInnerRef:S}),[]);function M(V,q){var $,H;let Y=(H=($=o.current)==null?void 0:$.filter)!=null?H:sW;return V?Y(V,n.current.search,q):0}function A(){if(!n.current.search||o.current.shouldFilter===!1)return;let V=n.current.filtered.items,q=[];n.current.filtered.groups.forEach(H=>{let Y=i.current.get(H),L=0;Y.forEach(z=>{let te=V.get(z);L=Math.max(te,L)}),q.push([H,L])});let $=S.current;I().sort((H,Y)=>{var L,z;let te=H.getAttribute("id"),fe=Y.getAttribute("id");return((L=V.get(fe))!=null?L:0)-((z=V.get(te))!=null?z:0)}).forEach(H=>{let Y=H.closest(nm);Y?Y.appendChild(H.parentElement===Y?H:H.closest(`${nm} > *`)):$.appendChild(H.parentElement===$?H:H.closest(`${nm} > *`))}),q.sort((H,Y)=>Y[1]-H[1]).forEach(H=>{var Y;let L=(Y=S.current)==null?void 0:Y.querySelector(`${dl}[${Ta}="${encodeURIComponent(H[0])}"]`);L==null||L.parentElement.appendChild(L)})}function k(){let V=I().find($=>$.getAttribute("aria-disabled")!=="true"),q=V==null?void 0:V.getAttribute(Ta);E.setState("value",q||void 0)}function N(){var V,q,$,H;if(!n.current.search||o.current.shouldFilter===!1){n.current.filtered.count=s.current.size;return}n.current.filtered.groups=new Set;let Y=0;for(let L of s.current){let z=(q=(V=r.current.get(L))==null?void 0:V.value)!=null?q:"",te=(H=($=r.current.get(L))==null?void 0:$.keywords)!=null?H:[],fe=M(z,te);n.current.filtered.items.set(L,fe),fe>0&&Y++}for(let[L,z]of i.current)for(let te of z)if(n.current.filtered.items.get(te)>0){n.current.filtered.groups.add(L);break}n.current.filtered.count=Y}function P(){var V,q,$;let H=j();H&&(((V=H.parentElement)==null?void 0:V.firstChild)===H&&(($=(q=H.closest(dl))==null?void 0:q.querySelector(nW))==null||$.scrollIntoView({block:"nearest"})),H.scrollIntoView({block:"nearest"}))}function j(){var V;return(V=S.current)==null?void 0:V.querySelector(`${xM}[aria-selected="true"]`)}function I(){var V;return Array.from(((V=S.current)==null?void 0:V.querySelectorAll(yw))||[])}function D(V){let q=I()[V];q&&E.setState("value",q.getAttribute(Ta))}function O(V){var q;let $=j(),H=I(),Y=H.findIndex(z=>z===$),L=H[Y+V];(q=o.current)!=null&&q.loop&&(L=Y+V<0?H[H.length-1]:Y+V===H.length?H[0]:H[Y+V]),L&&E.setState("value",L.getAttribute(Ta))}function R(V){let q=j(),$=q==null?void 0:q.closest(dl),H;for(;$&&!H;)$=V>0?hW($,dl):fW($,dl),H=$==null?void 0:$.querySelector(yw);H?E.setState("value",H.getAttribute(Ta)):O(V)}let B=()=>D(I().length-1),F=V=>{V.preventDefault(),V.metaKey?B():V.altKey?R(1):O(1)},Z=V=>{V.preventDefault(),V.metaKey?D(0):V.altKey?R(-1):O(-1)};return g.createElement(he.div,{ref:e,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:V=>{var q;(q=v.onKeyDown)==null||q.call(v,V);let $=V.nativeEvent.isComposing||V.keyCode===229;if(!(V.defaultPrevented||$))switch(V.key){case"n":case"j":{x&&V.ctrlKey&&F(V);break}case"ArrowDown":{F(V);break}case"p":case"k":{x&&V.ctrlKey&&Z(V);break}case"ArrowUp":{Z(V);break}case"Home":{V.preventDefault(),D(0);break}case"End":{V.preventDefault(),B();break}case"Enter":{V.preventDefault();let H=j();if(H){let Y=new Event(ny);H.dispatchEvent(Y)}}}}},g.createElement("label",{"cmdk-label":"",htmlFor:C.inputId,id:C.labelId,style:gW},l),Bf(t,V=>g.createElement(wM.Provider,{value:E},g.createElement(_M.Provider,{value:C},V))))}),iW=g.forwardRef((t,e)=>{var n,s;let i=un(),r=g.useRef(null),a=g.useContext(SM),o=Zc(),l=TM(t),c=(s=(n=l.current)==null?void 0:n.forceMount)!=null?s:a==null?void 0:a.forceMount;na(()=>{if(!c)return o.item(i,a==null?void 0:a.id)},[c]);let u=EM(i,r,[t.value,t.children,r],t.keywords),d=ib(),h=dr(T=>T.value&&T.value===u.current),p=dr(T=>c||o.filter()===!1?!0:T.search?T.filtered.items.get(i)>0:!0);g.useEffect(()=>{let T=r.current;if(!(!T||t.disabled))return T.addEventListener(ny,m),()=>T.removeEventListener(ny,m)},[p,t.onSelect,t.disabled]);function m(){var T,E;y(),(E=(T=l.current).onSelect)==null||E.call(T,u.current)}function y(){d.setState("value",u.current,!0)}if(!p)return null;let{disabled:x,value:v,onSelect:b,forceMount:_,keywords:w,...S}=t;return g.createElement(he.div,{ref:$r(r,e),...S,id:i,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!h,"data-disabled":!!x,"data-selected":!!h,onPointerMove:x||o.getDisablePointerSelection()?void 0:y,onClick:x?void 0:m},t.children)}),rW=g.forwardRef((t,e)=>{let{heading:n,children:s,forceMount:i,...r}=t,a=un(),o=g.useRef(null),l=g.useRef(null),c=un(),u=Zc(),d=dr(p=>i||u.filter()===!1?!0:p.search?p.filtered.groups.has(a):!0);na(()=>u.group(a),[]),EM(a,o,[t.value,t.heading,l]);let h=g.useMemo(()=>({id:a,forceMount:i}),[i]);return g.createElement(he.div,{ref:$r(o,e),...r,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},n&&g.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},n),Bf(t,p=>g.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?c:void 0},g.createElement(SM.Provider,{value:h},p))))}),aW=g.forwardRef((t,e)=>{let{alwaysRender:n,...s}=t,i=g.useRef(null),r=dr(a=>!a.search);return!n&&!r?null:g.createElement(he.div,{ref:$r(i,e),...s,"cmdk-separator":"",role:"separator"})}),oW=g.forwardRef((t,e)=>{let{onValueChange:n,...s}=t,i=t.value!=null,r=ib(),a=dr(c=>c.search),o=dr(c=>c.selectedItemId),l=Zc();return g.useEffect(()=>{t.value!=null&&r.setState("search",t.value)},[t.value]),g.createElement(he.input,{ref:e,...s,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":o,id:l.inputId,type:"text",value:i?t.value:a,onChange:c=>{i||r.setState("search",c.target.value),n==null||n(c.target.value)}})}),lW=g.forwardRef((t,e)=>{let{children:n,label:s="Suggestions",...i}=t,r=g.useRef(null),a=g.useRef(null),o=dr(c=>c.selectedItemId),l=Zc();return g.useEffect(()=>{if(a.current&&r.current){let c=a.current,u=r.current,d,h=new ResizeObserver(()=>{d=requestAnimationFrame(()=>{let p=c.offsetHeight;u.style.setProperty("--cmdk-list-height",p.toFixed(1)+"px")})});return h.observe(c),()=>{cancelAnimationFrame(d),h.unobserve(c)}}},[]),g.createElement(he.div,{ref:$r(r,e),...i,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":s,id:l.listId},Bf(t,c=>g.createElement("div",{ref:$r(a,l.listInnerRef),"cmdk-list-sizer":""},c)))}),cW=g.forwardRef((t,e)=>{let{open:n,onOpenChange:s,overlayClassName:i,contentClassName:r,container:a,...o}=t;return g.createElement(Zv,{open:n,onOpenChange:s},g.createElement(Jv,{container:a},g.createElement(e0,{"cmdk-overlay":"",className:i}),g.createElement(t0,{"aria-label":t.label,"cmdk-dialog":"",className:r},g.createElement(CM,{ref:e,...o}))))}),uW=g.forwardRef((t,e)=>dr(n=>n.filtered.count===0)?g.createElement(he.div,{ref:e,...t,"cmdk-empty":"",role:"presentation"}):null),dW=g.forwardRef((t,e)=>{let{progress:n,children:s,label:i="Loading...",...r}=t;return g.createElement(he.div,{ref:e,...r,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},Bf(t,a=>g.createElement("div",{"aria-hidden":!0},a)))}),Jo=Object.assign(CM,{List:lW,Item:iW,Input:oW,Group:rW,Separator:aW,Dialog:cW,Empty:uW,Loading:dW});function hW(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return n;n=n.nextElementSibling}}function fW(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return n;n=n.previousElementSibling}}function TM(t){let e=g.useRef(t);return na(()=>{e.current=t}),e}var na=typeof window>"u"?g.useEffect:g.useLayoutEffect;function Ea(t){let e=g.useRef();return e.current===void 0&&(e.current=t()),e}function dr(t){let e=ib(),n=()=>t(e.snapshot());return g.useSyncExternalStore(e.subscribe,n,n)}function EM(t,e,n,s=[]){let i=g.useRef(),r=Zc();return na(()=>{var a;let o=(()=>{var c;for(let u of n){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(c=u.current.textContent)==null?void 0:c.trim():i.current}})(),l=s.map(c=>c.trim());r.value(t,o,l),(a=e.current)==null||a.setAttribute(Ta,o),i.current=o}),i}var pW=()=>{let[t,e]=g.useState(),n=Ea(()=>new Map);return na(()=>{n.current.forEach(s=>s()),n.current=new Map},[t]),(s,i)=>{n.current.set(s,i),e({})}};function mW(t){let e=t.type;return typeof e=="function"?e(t.props):"render"in e?e.render(t.props):t}function Bf({asChild:t,children:e},n){return t&&g.isValidElement(e)?g.cloneElement(mW(e),{ref:e.ref},n(e.props.children)):n(e)}var gW={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function yW({...t}){return f.jsx(Zv,{"data-slot":"dialog",...t})}function vW({...t}){return f.jsx(Jv,{"data-slot":"dialog-portal",...t})}function bW({className:t,...e}){return f.jsx(e0,{"data-slot":"dialog-overlay",className:ee("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})}function xW({className:t,children:e,showCloseButton:n=!0,...s}){return f.jsxs(vW,{"data-slot":"dialog-portal",children:[f.jsx(bW,{}),f.jsxs(t0,{"data-slot":"dialog-content",className:ee("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg",t),...s,children:[e,n&&f.jsxs(ik,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[f.jsx(Gh,{}),f.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function _W({className:t,...e}){return f.jsx(sk,{"data-slot":"dialog-title",className:ee("text-lg leading-none font-semibold",t),...e})}function wW({className:t,...e}){return f.jsx(Jo,{"data-slot":"command",className:ee("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-lg",t),...e})}function SW({children:t,...e}){return f.jsx(yW,{...e,children:f.jsxs(xW,{className:"overflow-hidden p-0 top-[20%] translate-y-0 sm:max-w-lg",showCloseButton:!1,children:[f.jsx(_W,{className:"sr-only",children:"Command Palette"}),f.jsx(wW,{className:"[&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:pb-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",children:t})]})})}function CW({className:t,...e}){return f.jsxs("div",{className:"flex items-center border-b px-3","data-slot":"command-input-wrapper",children:[f.jsx(BI,{className:"mr-2 size-4 shrink-0 opacity-50"}),f.jsx(Jo.Input,{"data-slot":"command-input",className:ee("placeholder:text-muted-foreground flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none disabled:cursor-not-allowed disabled:opacity-50",t),...e})]})}function TW({className:t,...e}){return f.jsx(Jo.List,{"data-slot":"command-list",className:ee("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...e})}function EW({...t}){return f.jsx(Jo.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm text-muted-foreground",...t})}function vw({className:t,...e}){return f.jsx(Jo.Group,{"data-slot":"command-group",className:ee("text-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...e})}function bw({className:t,...e}){return f.jsx(Jo.Item,{"data-slot":"command-item",className:ee("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t),...e})}function AW({className:t,...e}){return f.jsx("span",{"data-slot":"command-shortcut",className:ee("text-muted-foreground ml-auto text-xs tracking-widest",t),...e})}const kW=[{id:"new-project",label:"New Project",group:"Project",icon:dI,shortcut:"N",keywords:"create new"},{id:"open-project",label:"Open Project",group:"Project",icon:_A,shortcut:"O",keywords:"open load"},{id:"save",label:"Save",group:"Project",icon:Q1,shortcut:"S"},{id:"save-as",label:"Save As",group:"Project",icon:Q1,shortcut:"S",keywords:"export save copy"},{id:"switch-daw",label:"Switch to DAW",group:"Navigation",icon:Lv,shortcut:"1",keywords:"mode arrange perform"},{id:"switch-learn",label:"Switch to Learn",group:"Navigation",icon:Bv,shortcut:"2",keywords:"mode lessons tutorial"},{id:"switch-practice",label:"Switch to Practice",group:"Navigation",icon:Fv,shortcut:"3",keywords:"mode exercise drill"},{id:"play-stop",label:"Play / Stop",group:"Transport",icon:Uh,shortcut:"Space",modes:["daw"],keywords:"playback start pause"},{id:"record",label:"Record",group:"Transport",icon:eI,shortcut:"R",modes:["daw"],keywords:"rec arm"},{id:"toggle-metronome",label:"Toggle Metronome",group:"Transport",icon:Hv,shortcut:"M",modes:["daw"],keywords:"click tempo beat"},{id:"undo",label:"Undo",group:"Editing",icon:Uv,shortcut:"Z"},{id:"redo",label:"Redo",group:"Editing",icon:Vv,shortcut:"Z"},{id:"add-synth-track",label:"Add Synth Track",group:"Editing",icon:sc,modes:["daw"],keywords:"new track instrument"},{id:"add-drum-track",label:"Add Drum Track",group:"Editing",icon:sc,modes:["daw"],keywords:"new track percussion"},{id:"export-wav",label:"Export as WAV",group:"Export",icon:Cg,shortcut:"E",modes:["daw"],keywords:"audio bounce render"},{id:"export-midi",label:"Export as MIDI",group:"Export",icon:Cg,shortcut:"E",modes:["daw"],keywords:"midi file"},{id:"toggle-fullscreen",label:"Toggle Fullscreen",group:"View",icon:wA,keywords:"maximize screen"},..._n.map((t,e)=>({id:`preset-${e}`,label:t.name,group:"Instrument",icon:Hh,modes:["daw"],keywords:`synth preset sound ${t.name.toLowerCase()} ${t.oscillator.type}`}))];function NW(t){return kW.filter(e=>!e.modes||e.modes.includes(t))}function MW(t){return t.slice(0,10).map((e,n)=>({id:`recent-${n}`,label:e.name,group:"Recent Projects",icon:xA,subtitle:e.filePath,keywords:`recent project ${e.name.toLowerCase()}`}))}function RW({open:t,onOpenChange:e,mode:n,actions:s,recentProjects:i,onOpenRecent:r}){const a=g.useMemo(()=>NW(n),[n]),o=g.useMemo(()=>MW(i),[i]),l=g.useMemo(()=>{const u=new Map;for(const d of a){const h=u.get(d.group);h?h.push(d):u.set(d.group,[d])}return u},[a]),c=u=>{const d=o.find(h=>h.id===u);d!=null&&d.subtitle?r(d.subtitle):s[u]&&s[u](),e(!1)};return f.jsxs(SW,{open:t,onOpenChange:e,children:[f.jsx(CW,{placeholder:"Type a command or search..."}),f.jsxs(TW,{children:[f.jsx(EW,{children:"No results found."}),Array.from(l).map(([u,d])=>f.jsx(vw,{heading:u,children:d.map(h=>f.jsxs(bw,{value:`${h.label} ${h.keywords??""}`,onSelect:()=>c(h.id),children:[h.icon&&f.jsx(h.icon,{className:"mr-2 size-4"}),f.jsx("span",{children:h.label}),h.shortcut&&f.jsx(AW,{children:h.shortcut})]},h.id))},u)),o.length>0&&f.jsx(vw,{heading:"Recent Projects",children:o.map(u=>f.jsxs(bw,{value:`${u.label} ${u.subtitle??""} ${u.keywords??""}`,onSelect:()=>c(u.id),children:[u.icon&&f.jsx(u.icon,{className:"mr-2 size-4"}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{children:u.label}),u.subtitle&&f.jsx("span",{className:"text-xs text-muted-foreground truncate max-w-[350px]",children:u.subtitle})]})]},u.id))})]})]})}class Ou extends g.Component{constructor(){super(...arguments);le(this,"state",{hasError:!1,error:null});le(this,"handleReset",()=>{var n,s;this.setState({hasError:!1,error:null}),(s=(n=this.props).onReset)==null||s.call(n)})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,s){console.error(`[ErrorBoundary:${this.props.zoneName}]`,n,s.componentStack)}render(){var s;if(!this.state.hasError)return this.props.children;const n=((s=this.state.error)==null?void 0:s.message)||"Unknown error";return this.props.fallbackVariant==="inline"?f.jsxs("div",{className:"flex items-center gap-2 border-b border-border bg-card/60 px-4 py-2 text-sm text-muted-foreground",children:[f.jsx(Z1,{className:"size-4 shrink-0 text-destructive"}),f.jsxs("span",{className:"truncate font-mono text-xs",children:[this.props.zoneName," encountered an error: ",n]}),f.jsx(Te,{variant:"ghost",size:"xs",onClick:this.handleReset,className:"ml-auto shrink-0",children:"Retry"})]}):f.jsx("div",{className:"flex flex-1 items-center justify-center p-8",children:f.jsxs("div",{className:"flex max-w-md flex-col items-center gap-4 rounded-lg border border-border bg-card/60 p-8 text-center backdrop-blur-sm",children:[f.jsx(Z1,{className:"size-8 text-destructive"}),f.jsxs("div",{children:[f.jsxs("p",{className:"text-sm font-medium text-foreground",children:[this.props.zoneName," encountered an error"]}),f.jsx("p",{className:"mt-1 font-mono text-xs text-muted-foreground",children:n})]}),f.jsx(Te,{variant:"outline",size:"sm",onClick:this.handleReset,children:"Try Again"})]})})}}const sm=768;function DW(){const[t,e]=g.useState(void 0);return g.useEffect(()=>{const n=window.matchMedia(`(max-width: ${sm-1}px)`),s=()=>{e(window.innerWidth<sm)};return n.addEventListener("change",s),e(window.innerWidth<sm),()=>n.removeEventListener("change",s)},[]),!!t}function OW({className:t,orientation:e="horizontal",decorative:n=!0,...s}){return f.jsx(JV,{"data-slot":"separator",decorative:n,orientation:e,className:ee("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...s})}function jW({...t}){return f.jsx(Zv,{"data-slot":"sheet",...t})}function PW({...t}){return f.jsx(Jv,{"data-slot":"sheet-portal",...t})}function IW({className:t,...e}){return f.jsx(e0,{"data-slot":"sheet-overlay",className:ee("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...e})}function BW({className:t,children:e,side:n="right",showCloseButton:s=!0,...i}){return f.jsxs(PW,{children:[f.jsx(IW,{}),f.jsxs(t0,{"data-slot":"sheet-content",className:ee("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",n==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",n==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",n==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",n==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",t),...i,children:[e,s&&f.jsxs(ik,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[f.jsx(Gh,{className:"size-4"}),f.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function LW({className:t,...e}){return f.jsx("div",{"data-slot":"sheet-header",className:ee("flex flex-col gap-1.5 p-4",t),...e})}function VW({className:t,...e}){return f.jsx(sk,{"data-slot":"sheet-title",className:ee("text-foreground font-semibold",t),...e})}function zW({className:t,...e}){return f.jsx(PB,{"data-slot":"sheet-description",className:ee("text-muted-foreground text-sm",t),...e})}function FW({delayDuration:t=0,...e}){return f.jsx(Wz,{"data-slot":"tooltip-provider",delayDuration:t,...e})}function HW({...t}){return f.jsx($z,{"data-slot":"tooltip",...t})}function UW({...t}){return f.jsx(Yz,{"data-slot":"tooltip-trigger",...t})}function GW({className:t,sideOffset:e=0,children:n,...s}){return f.jsx(Kz,{children:f.jsxs(Xz,{"data-slot":"tooltip-content",sideOffset:e,className:ee("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...s,children:[n,f.jsx(Qz,{className:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const qW="sidebar_state",WW=60*60*24*7,$W="16rem",YW="18rem",KW="3rem",XW="b",AM=g.createContext(null);function rb(){const t=g.useContext(AM);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}function QW({defaultOpen:t=!0,open:e,onOpenChange:n,className:s,style:i,children:r,...a}){const o=DW(),[l,c]=g.useState(!1),[u,d]=g.useState(t),h=e??u,p=g.useCallback(v=>{const b=typeof v=="function"?v(h):v;n?n(b):d(b),document.cookie=`${qW}=${b}; path=/; max-age=${WW}`},[n,h]),m=g.useCallback(()=>o?c(v=>!v):p(v=>!v),[o,p,c]);g.useEffect(()=>{const v=b=>{b.key===XW&&(b.metaKey||b.ctrlKey)&&(b.preventDefault(),m())};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[m]);const y=h?"expanded":"collapsed",x=g.useMemo(()=>({state:y,open:h,setOpen:p,isMobile:o,openMobile:l,setOpenMobile:c,toggleSidebar:m}),[y,h,p,o,l,c,m]);return f.jsx(AM.Provider,{value:x,children:f.jsx(FW,{delayDuration:0,children:f.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":$W,"--sidebar-width-icon":KW,...i},className:ee("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",s),...a,children:r})})})}function ZW({side:t="left",variant:e="sidebar",collapsible:n="offcanvas",className:s,children:i,...r}){const{isMobile:a,state:o,openMobile:l,setOpenMobile:c}=rb();return n==="none"?f.jsx("div",{"data-slot":"sidebar",className:ee("bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",s),...r,children:i}):a?f.jsx(jW,{open:l,onOpenChange:c,...r,children:f.jsxs(BW,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden",style:{"--sidebar-width":YW},side:t,children:[f.jsxs(LW,{className:"sr-only",children:[f.jsx(VW,{children:"Sidebar"}),f.jsx(zW,{children:"Displays the mobile sidebar."})]}),f.jsx("div",{className:"flex h-full w-full flex-col",children:i})]})}):f.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":o,"data-collapsible":o==="collapsed"?n:"","data-variant":e,"data-side":t,"data-slot":"sidebar",children:[f.jsx("div",{"data-slot":"sidebar-gap",className:ee("relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)")}),f.jsx("div",{"data-slot":"sidebar-container",className:ee("z-10 hidden h-full w-(--sidebar-width) transition-[width] duration-200 ease-linear md:flex",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",s),...r,children:f.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:i})})]})}function JW({className:t,onClick:e,...n}){const{toggleSidebar:s}=rb();return f.jsxs(Te,{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",className:ee("size-7",t),onClick:i=>{e==null||e(i),s()},...n,children:[f.jsx(CI,{}),f.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})}function e$({className:t,...e}){return f.jsx(OW,{"data-slot":"sidebar-separator","data-sidebar":"separator",className:ee("bg-sidebar-border mx-2 w-auto",t),...e})}function t$({className:t,...e}){return f.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:ee("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...e})}function im({className:t,...e}){return f.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:ee("relative flex w-full min-w-0 flex-col p-2",t),...e})}function xw({className:t,asChild:e=!1,...n}){const s=e?qh:"div";return f.jsx(s,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:ee("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...n})}function rm({className:t,...e}){return f.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:ee("flex w-full min-w-0 flex-col gap-1",t),...e})}function ju({className:t,...e}){return f.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:ee("group/menu-item relative",t),...e})}const n$=hf("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function Pu({asChild:t=!1,isActive:e=!1,variant:n="default",size:s="default",tooltip:i,className:r,...a}){const o=t?qh:"button",{isMobile:l,state:c}=rb(),u=f.jsx(o,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":s,"data-active":e,className:ee(n$({variant:n,size:s}),r),...a});return i?(typeof i=="string"&&(i={children:i}),f.jsxs(HW,{children:[f.jsx(UW,{asChild:!0,children:u}),f.jsx(GW,{side:"right",align:"center",hidden:c!=="collapsed"||l,...i})]})):u}const s$=[{mode:"daw",icon:Lv,label:"DAW"},{mode:"learn",icon:Bv,label:"Learn"},{mode:"practice",icon:Fv,label:"Practice"}];function i$({mode:t,onModeChange:e,recentProjects:n,onOpenRecent:s,onNewProject:i,onOpen:r}){return f.jsx(ZW,{collapsible:"icon",children:f.jsxs(t$,{children:[f.jsx(im,{children:f.jsx(rm,{children:s$.map(a=>f.jsx(ju,{children:f.jsxs(Pu,{tooltip:a.label,isActive:t===a.mode,onClick:()=>e(a.mode),children:[f.jsx(a.icon,{}),f.jsx("span",{children:a.label})]})},a.mode))})}),f.jsx(e$,{}),f.jsxs(im,{children:[f.jsxs(xw,{children:[f.jsx(_A,{className:"mr-2 h-4 w-4"}),"Projects"]}),f.jsxs(rm,{children:[f.jsx(ju,{children:f.jsxs(Pu,{tooltip:"New Project",onClick:i,children:[f.jsx(sc,{}),f.jsx("span",{children:"New"})]})}),f.jsx(ju,{children:f.jsxs(Pu,{tooltip:"Open Project",onClick:r,children:[f.jsx(fI,{}),f.jsx("span",{children:"Open"})]})})]})]}),n.length>0&&f.jsxs(im,{className:"group-data-[collapsible=icon]:hidden",children:[f.jsx(xw,{children:"Recent"}),f.jsx(rm,{children:n.map(a=>f.jsx(ju,{children:f.jsx(Pu,{size:"sm",onClick:()=>s(a.filePath),title:a.filePath,children:f.jsx("span",{children:a.name})})},a.filePath))})]})]})})}const r$=[{value:null,label:"All"},{value:"piano",label:"Piano"},{value:"drums",label:"Drums"},{value:"theory",label:"Theory"}];function a$({selected:t,onChange:e}){return f.jsx("div",{className:"flex gap-1",children:r$.map(n=>f.jsx("button",{onClick:()=>e(n.value),className:ee("rounded-md px-3 py-1.5 text-xs font-medium transition-colors",t===n.value?"bg-primary text-primary-foreground":"bg-secondary text-muted-foreground hover:text-foreground"),children:n.label},n.label))})}const o$={piano:Hh,drums:Iv,theory:W4},l$={beginner:"bg-green-500/20 text-green-400",intermediate:"bg-yellow-500/20 text-yellow-400",advanced:"bg-red-500/20 text-red-400"};function c$({lesson:t,isCompleted:e,onClick:n}){const s=o$[t.category];return f.jsxs("button",{onClick:n,className:ee("group flex flex-col gap-3 rounded-xl border border-border/50 p-4 text-left","transition-all duration-150 hover:border-border hover:bg-card/60",e&&"border-green-500/30"),style:{backgroundColor:"oklch(0.14 0.01 270)"},children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg",style:{backgroundColor:"oklch(0.20 0.02 270)"},children:f.jsx(s,{className:"h-4.5 w-4.5 text-muted-foreground"})}),e&&f.jsx(bA,{className:"h-5 w-5 text-green-400"})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-semibold text-foreground",children:t.title}),f.jsx("p",{className:"mt-1 text-xs text-muted-foreground line-clamp-2",children:t.description})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:ee("rounded-md px-2 py-0.5 text-[10px] font-medium",l$[t.difficulty]),children:t.difficulty}),f.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-muted-foreground",children:[f.jsx(xA,{className:"h-3 w-3"}),t.estimatedMinutes,"m"]})]})]})}function u$({current:t,total:e}){const n=e>0?(t+1)/e*100:0;return f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("span",{className:"text-xs text-muted-foreground",children:["Step ",t+1," / ",e]}),f.jsx("div",{className:"h-1.5 flex-1 rounded-full bg-secondary",children:f.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${n}%`,backgroundColor:"oklch(0.65 0.25 270)"}})})]})}function d$({step:t}){return f.jsx("div",{className:"flex flex-col gap-4",children:f.jsx("p",{className:"whitespace-pre-line text-sm leading-relaxed text-foreground/90",children:t.description})})}function h$({step:t,activeNotes:e,onNoteOn:n,onNoteOff:s,completed:i}){const r=new Set((t.expectedNotes??[]).map(a=>a.midi%12));return f.jsxs("div",{className:"flex flex-col gap-4",children:[f.jsx("p",{className:"text-sm text-foreground/90",children:t.description}),t.expectedNotes&&f.jsx("div",{className:"flex flex-wrap gap-2",children:t.expectedNotes.map(a=>{const o=e.has(a.midi);return f.jsx("span",{className:"rounded-md px-2.5 py-1 text-xs font-medium transition-colors",style:{backgroundColor:o?"oklch(0.65 0.25 150 / 0.3)":"oklch(0.20 0.02 270)",color:o?"oklch(0.85 0.15 150)":void 0},children:a.label??`Note ${a.midi}`},a.midi)})}),t.hint&&!i&&f.jsx("p",{className:"text-xs text-muted-foreground italic",children:t.hint}),f.jsx("div",{className:"overflow-x-auto",children:f.jsx(xr,{activeNotes:e,onNoteOn:n,onNoteOff:s,highlightedNotes:r,compact:!0})})]})}function f$({step:t,activeNotes:e,onNoteOn:n,onNoteOff:s,detectedChord:i,completed:r}){return f.jsxs("div",{className:"flex flex-col gap-4",children:[f.jsx("p",{className:"text-sm text-foreground/90",children:t.description}),t.expectedChord&&f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:"text-xs text-muted-foreground",children:"Target:"}),f.jsx("span",{className:"rounded-lg px-3 py-1.5 text-lg font-bold",style:{backgroundColor:"oklch(0.20 0.02 270)"},children:t.expectedChord.display}),i&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"text-xs text-muted-foreground",children:"Playing:"}),f.jsx("span",{className:"rounded-lg px-3 py-1.5 text-lg font-bold",style:{backgroundColor:r?"oklch(0.65 0.25 150 / 0.2)":"oklch(0.20 0.02 270)",color:r?"oklch(0.85 0.15 150)":void 0},children:i.display})]})]}),t.hint&&!r&&f.jsx("p",{className:"text-xs text-muted-foreground italic",children:t.hint}),f.jsx("div",{className:"overflow-x-auto",children:f.jsx(xr,{activeNotes:e,onNoteOn:n,onNoteOff:s,compact:!0})})]})}function p$({step:t,activeNotes:e,onNoteOn:n,onNoteOff:s,completed:i}){var a;const r=new Set(((a=t.expectedScale)==null?void 0:a.notes)??[]);return f.jsxs("div",{className:"flex flex-col gap-4",children:[f.jsx("p",{className:"text-sm text-foreground/90",children:t.description}),t.expectedScale&&f.jsxs("p",{className:"text-xs text-muted-foreground",children:["Play the notes in order: ",t.expectedScale.notes.map(o=>["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][o]).join("  ")]}),t.hint&&!i&&f.jsx("p",{className:"text-xs text-muted-foreground italic",children:t.hint}),f.jsx("div",{className:"overflow-x-auto",children:f.jsx(xr,{activeNotes:e,onNoteOn:n,onNoteOff:s,highlightedNotes:r,compact:!0})})]})}function m$({step:t,activePads:e,onDrumHit:n,completed:s}){var r;const i=new Set(((r=t.expectedDrumPattern)==null?void 0:r.pads)??[]);return f.jsxs("div",{className:"flex flex-col gap-4",children:[f.jsx("p",{className:"text-sm text-foreground/90",children:t.description}),t.hint&&!s&&f.jsx("p",{className:"text-xs text-muted-foreground italic",children:t.hint}),f.jsx("div",{className:"w-[280px]",children:f.jsx(If,{activePads:e,onHit:n,highlightedPads:i})})]})}function g$({step:t,completed:e,onAnswer:n}){var c,u,d;const[s,i]=g.useState(null),[r,a]=g.useState(!1),o=h=>{var m,y;if(e||r)return;i(h),a(!0);const p=((y=(m=t.quizOptions)==null?void 0:m[h])==null?void 0:y.correct)??!1;n(p)},l=()=>{i(null),a(!1)};return f.jsxs("div",{className:"flex flex-col gap-4",children:[f.jsx("p",{className:"text-sm font-medium text-foreground",children:t.description}),f.jsx("div",{className:"flex flex-col gap-2",children:(c=t.quizOptions)==null?void 0:c.map((h,p)=>{const m=s===p,y=h.correct;let x="oklch(0.18 0.01 270)";return r&&m?x=y?"oklch(0.30 0.15 150)":"oklch(0.30 0.15 25)":r&&y&&(x="oklch(0.25 0.10 150)"),f.jsx("button",{onClick:()=>o(p),disabled:r,className:ee("rounded-lg px-4 py-2.5 text-left text-sm transition-colors",!r&&"hover:brightness-125"),style:{backgroundColor:x},children:h.label},p)})}),r&&s!==null&&!((d=(u=t.quizOptions)==null?void 0:u[s])!=null&&d.correct)&&f.jsx("button",{onClick:l,className:"self-start rounded-md px-3 py-1.5 text-xs text-muted-foreground hover:text-foreground",style:{backgroundColor:"oklch(0.20 0.02 270)"},children:"Try again"})]})}function y$({step:t,completed:e,activeNotes:n,onNoteOn:s,onNoteOff:i,activePads:r,onDrumHit:a,detectedChord:o,onQuizAnswer:l}){switch(t.type){case"info":return f.jsx(d$,{step:t});case"play-notes":return f.jsx(h$,{step:t,activeNotes:n,onNoteOn:s,onNoteOff:i,completed:e});case"play-chord":return f.jsx(f$,{step:t,activeNotes:n,onNoteOn:s,onNoteOff:i,detectedChord:o,completed:e});case"play-scale":return f.jsx(p$,{step:t,activeNotes:n,onNoteOn:s,onNoteOff:i,completed:e});case"play-drums":return f.jsx(m$,{step:t,activePads:r,onDrumHit:a,completed:e});case"quiz":return f.jsx(g$,{step:t,completed:e,onAnswer:l});default:return f.jsx("p",{className:"text-sm text-muted-foreground",children:"Unknown step type"})}}function v$({lesson:t,currentStep:e,currentStepIndex:n,totalSteps:s,stepCompleted:i,activeNotes:r,onNoteOn:a,onNoteOff:o,activePads:l,onDrumHit:c,detectedChord:u,onNext:d,onPrev:h,onExit:p,onQuizAnswer:m}){const y=n===s-1;return f.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[f.jsxs("div",{className:"flex items-center justify-between border-b border-border/50 px-6 py-3",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Te,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:p,title:"Exit lesson",children:f.jsx(Gh,{className:"h-4 w-4"})}),f.jsx("h2",{className:"text-sm font-semibold",children:t.title})]}),f.jsx("div",{className:"w-48",children:f.jsx(u$,{current:n,total:s})})]}),f.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:f.jsxs("div",{className:"mx-auto max-w-2xl",children:[f.jsx("h3",{className:"mb-4 text-lg font-bold",children:e.title}),f.jsx(y$,{step:e,completed:i,activeNotes:r,onNoteOn:a,onNoteOff:o,activePads:l,onDrumHit:c,detectedChord:u,onQuizAnswer:m}),i&&e.type!=="info"&&f.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm",style:{color:"oklch(0.75 0.20 150)"},children:[f.jsx(bA,{className:"h-4 w-4"}),f.jsx("span",{children:"Step completed!"})]})]})}),f.jsxs("div",{className:"flex items-center justify-between border-t border-border/50 px-6 py-3",children:[f.jsxs(Te,{variant:"ghost",size:"sm",onClick:h,disabled:n===0,children:[f.jsx(yo,{className:"mr-1 h-3.5 w-3.5"}),"Back"]}),f.jsxs(Te,{size:"sm",onClick:d,disabled:!i,children:[y?"Finish":"Next",!y&&f.jsx(G4,{className:"ml-1 h-3.5 w-3.5"})]})]})]})}const _w=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],b$=[[[0,4,7],"maj"],[[0,3,7],"m"],[[0,3,6],"dim"],[[0,4,8],"aug"],[[0,2,7],"sus2"],[[0,5,7],"sus4"],[[0,7],"5"],[[0,4,7,10],"7"],[[0,3,7,10],"m7"],[[0,4,7,11],"maj7"],[[0,3,6,9],"dim7"],[[0,3,6,10],"m7b5"]];function kM(t){if(t.length<2)return null;const e=[...new Set(t.map(n=>n%12))].sort((n,s)=>n-s);if(e.length<2)return null;for(const n of e){const s=e.map(i=>(i-n+12)%12).sort((i,r)=>i-r);for(const[i,r]of b$)if(x$(s,i))return{root:_w[n],quality:r,display:`${_w[n]}${r==="maj"?"":r}`}}return null}function x$(t,e){return t.length!==e.length?!1:t.every((n,s)=>n===e[s])}const NM="micro-daw-lesson-progress";function _$(){try{const t=localStorage.getItem(NM);if(t)return JSON.parse(t)}catch{}return{lessons:{}}}function ww(t){localStorage.setItem(NM,JSON.stringify(t))}function w$(){const[t,e]=g.useState(_$),n=g.useCallback(a=>t.lessons[a],[t]),s=g.useCallback(a=>{var o;return((o=t.lessons[a])==null?void 0:o.completed)??!1},[t]),i=g.useCallback((a,o)=>{e(l=>{const c=l.lessons[a]??{lessonId:a,completedSteps:[],completed:!1,lastStepIndex:0},u=c.completedSteps.includes(o)?c.completedSteps:[...c.completedSteps,o],d={...l,lessons:{...l.lessons,[a]:{...c,completedSteps:u,lastStepIndex:o}}};return ww(d),d})},[]),r=g.useCallback(a=>{e(o=>{const l=o.lessons[a]??{lessonId:a,completedSteps:[],completed:!1,lastStepIndex:0},c={...o,lessons:{...o.lessons,[a]:{...l,completed:!0}}};return ww(c),c})},[]);return{progress:t,getLessonProgress:n,isLessonCompleted:s,markStepCompleted:i,markLessonCompleted:r}}function S$(t,e){const[n,s]=g.useState(null),[i,r]=g.useState(0),[a,o]=g.useState(!1),l=g.useRef([]),c=g.useRef(new Set),{markStepCompleted:u,markLessonCompleted:d,isLessonCompleted:h,getLessonProgress:p}=w$(),m=(n==null?void 0:n.steps[i])??null,y=g.useCallback(w=>{s(w);const S=p(w.id);r((S==null?void 0:S.lastStepIndex)??0),o((S==null?void 0:S.completedSteps.includes((S==null?void 0:S.lastStepIndex)??0))??!1),l.current=[]},[p]),x=g.useCallback(()=>{s(null),r(0),o(!1),l.current=[]},[]),v=g.useCallback(()=>{n&&(i<n.steps.length-1?(r(w=>w+1),o(!1),l.current=[]):(d(n.id),x()))},[n,i,d,x]),b=g.useCallback(()=>{i>0&&(r(w=>w-1),o(!1),l.current=[])},[i]);g.useEffect(()=>{if(!n||!m||a)return;const w=new Set(t.keys());for(const T of w)c.current.has(T)||l.current.push(T%12);c.current=w;let S=!1;switch(m.type){case"play-notes":{if(!m.expectedNotes)break;S=m.expectedNotes.every(T=>t.has(T.midi));break}case"play-chord":{if(!m.expectedChord)break;const T=kM(Array.from(t.keys()));T&&(S=T.root===m.expectedChord.root&&T.quality===m.expectedChord.quality);break}case"play-scale":{if(!m.expectedScale)break;const T=m.expectedScale.notes,E=l.current;if(E.length>=T.length){const C=E.slice(-T.length);S=T.every((M,A)=>C[A]===M)}break}case"play-drums":{if(!m.expectedDrumPattern)break;const T=m.expectedDrumPattern.pads,E=new Set;for(const C of t.keys()){const M=eh.get(C);M!==void 0&&E.add(M)}for(const C of e)E.add(C);S=T.every(C=>E.has(C));break}}S&&(o(!0),u(n.id,i))},[t,e,n,m,i,a,u]);const _=g.useCallback(w=>{w&&n&&(o(!0),u(n.id,i))},[n,i,u]);return g.useEffect(()=>{(m==null?void 0:m.type)==="info"&&!a&&(o(!0),n&&u(n.id,i))},[m,a,n,i,u]),{activeLesson:n,currentStep:m,currentStepIndex:i,stepCompleted:a,totalSteps:(n==null?void 0:n.steps.length)??0,startLesson:y,exitLesson:x,nextStep:v,prevStep:b,completeQuiz:_,isLessonCompleted:h}}const C$="piano-c-major-scale",T$="C Major Scale",E$="piano",A$="beginner",k$=5,N$="Learn to play the C major scale  the foundation of Western music.",M$=[{type:"info",title:"Welcome to C Major!",description:"The C major scale uses only the white keys on the piano: C, D, E, F, G, A, B. It's the most fundamental scale in Western music and the perfect place to start learning."},{type:"play-notes",title:"Find Middle C",description:"Press the C key on the piano. Middle C is MIDI note 60.",expectedNotes:[{midi:60,label:"C4"}],hint:"Look for the white key just left of the group of two black keys."},{type:"play-notes",title:"Play C and E",description:"Now play both C and E together.",expectedNotes:[{midi:60,label:"C4"},{midi:64,label:"E4"}],hint:"E is two white keys to the right of C."},{type:"play-scale",title:"Play the C Major Scale",description:"Play all 8 notes of the C major scale ascending: C, D, E, F, G, A, B, C.",expectedScale:{root:0,name:"Major",notes:[0,2,4,5,7,9,11]},hint:"Play the white keys from C to the next C, one at a time."},{type:"play-chord",title:"Play a C Major Chord",description:"Play C, E, and G together to form the C major chord.",expectedChord:{root:"C",quality:"maj",display:"C"},hint:"Press C (60), E (64), and G (67) at the same time."},{type:"quiz",title:"Quick Quiz",description:"How many notes are in a major scale?",quizOptions:[{label:"5",correct:!1},{label:"7",correct:!0},{label:"8",correct:!1},{label:"12",correct:!1}]}],R$={id:C$,title:T$,category:E$,difficulty:A$,estimatedMinutes:k$,description:N$,steps:M$},D$="piano-finding-notes",O$="Finding Notes on the Piano",j$="piano",P$="beginner",I$=5,B$="Learn to navigate the piano keyboard  find white keys, black keys, sharps, and octaves.",L$=[{type:"info",title:"The Piano Layout",description:"The piano keyboard has a repeating pattern of white and black keys. Black keys come in groups of 2 and 3. The note C is always just to the left of a group of 2 black keys. Once you can find C, you can find every other note!"},{type:"play-notes",title:"Find Middle C",description:"Press Middle C (C4). It's just to the left of the group of two black keys in the middle of the keyboard.",expectedNotes:[{midi:60,label:"C4"}],hint:"C4 is MIDI note 60."},{type:"play-notes",title:"Find D",description:"D is the white key between the two black keys. Press D4.",expectedNotes:[{midi:62,label:"D4"}],hint:"D4 is one whole step (2 keys) above C4."},{type:"play-notes",title:"Find E",description:"E is the white key just to the right of the two black keys. Press E4.",expectedNotes:[{midi:64,label:"E4"}],hint:"E4 is MIDI note 64."},{type:"play-notes",title:"Find a Sharp  C#",description:"Sharps are the black keys. C# is the first black key in the group of two. Press C#4.",expectedNotes:[{midi:61,label:"C#4"}],hint:"C#4 is the black key directly to the right of C4."},{type:"play-notes",title:"Play C in Two Octaves",description:"An octave is the distance from one note to the next note with the same name. Play C4 and C5 together.",expectedNotes:[{midi:60,label:"C4"},{midi:72,label:"C5"}],hint:"C5 is 12 keys higher than C4 (MIDI 72)."},{type:"quiz",title:"Keyboard Quiz",description:"Where do you find the note C on the piano?",quizOptions:[{label:"Left of 2 black keys",correct:!0},{label:"Right of 2 black keys",correct:!1},{label:"Left of 3 black keys",correct:!1},{label:"Between 2 black keys",correct:!1}]}],V$={id:D$,title:O$,category:j$,difficulty:P$,estimatedMinutes:I$,description:B$,steps:L$},z$="piano-two-hand-notes",F$="Playing Two Notes Together",H$="piano",U$="beginner",G$=5,q$="Practice holding two notes at the same time  the first step toward playing chords.",W$=[{type:"info",title:"Why Two Notes?",description:"Playing two notes simultaneously is the foundation of harmony. When you combine notes, they create intervals  the building blocks of all chords. Let's practice pressing and holding two keys at once."},{type:"play-notes",title:"C and D Together",description:"Hold C4 and D4 at the same time. These adjacent notes create a Major 2nd interval.",expectedNotes:[{midi:60,label:"C4"},{midi:62,label:"D4"}],hint:"Press both keys and hold them simultaneously."},{type:"play-notes",title:"C and E Together",description:"Now hold C4 and E4. This wider interval (Major 3rd) sounds brighter.",expectedNotes:[{midi:60,label:"C4"},{midi:64,label:"E4"}],hint:"E4 is two white keys above C4."},{type:"play-notes",title:"C and G Together",description:"Hold C4 and G4 together. This is a Perfect 5th  a very stable, open sound.",expectedNotes:[{midi:60,label:"C4"},{midi:67,label:"G4"}],hint:"G4 is MIDI note 67."},{type:"play-notes",title:"E and A Together",description:"Now try E4 and A4  a Perfect 4th interval.",expectedNotes:[{midi:64,label:"E4"},{midi:69,label:"A4"}],hint:"A4 is MIDI note 69."},{type:"play-notes",title:"D and B Together",description:"Hold D4 and B4  a Major 6th. This wide interval has a sweet, warm quality.",expectedNotes:[{midi:62,label:"D4"},{midi:71,label:"B4"}],hint:"B4 is MIDI note 71."},{type:"quiz",title:"Interval Quiz",description:"When you play C and G together, what interval is that?",quizOptions:[{label:"Major 3rd",correct:!1},{label:"Perfect 4th",correct:!1},{label:"Perfect 5th",correct:!0},{label:"Octave",correct:!1}]}],$$={id:z$,title:F$,category:H$,difficulty:U$,estimatedMinutes:G$,description:q$,steps:W$},Y$="piano-major-chords",K$="Major Chords",X$="piano",Q$="beginner",Z$=7,J$="Learn to play C, F, and G major chords  the three most important chords in the key of C.",eY=[{type:"info",title:"What is a Major Chord?",description:"A major chord is made of three notes: the root, the major 3rd (4 semitones up), and the perfect 5th (7 semitones up). Major chords sound bright and happy. The three chords C, F, and G are the primary chords in the key of C major."},{type:"play-chord",title:"Play C Major",description:"Play C, E, and G together to form a C major chord.",expectedChord:{root:"C",quality:"maj",display:"C"},hint:"C (60) + E (64) + G (67)"},{type:"play-chord",title:"Play F Major",description:"Play F, A, and C together to form an F major chord.",expectedChord:{root:"F",quality:"maj",display:"F"},hint:"F (65) + A (69) + C (72)"},{type:"play-chord",title:"Play G Major",description:"Play G, B, and D together to form a G major chord.",expectedChord:{root:"G",quality:"maj",display:"G"},hint:"G (67) + B (71) + D (74)"},{type:"info",title:"The I-IV-V Progression",description:"C, F, and G are the I, IV, and V chords in the key of C. This I-IV-V pattern is the backbone of countless songs in rock, pop, blues, and country music. Try playing them in order: C  F  G  C."},{type:"play-chord",title:"Back to C Major",description:"Play the C major chord one more time. Notice how it feels like 'coming home' after playing F and G.",expectedChord:{root:"C",quality:"maj",display:"C"},hint:"C (60) + E (64) + G (67)"},{type:"quiz",title:"Major Chord Quiz",description:"What three notes make up a major chord?",quizOptions:[{label:"Root, Major 3rd, Perfect 5th",correct:!0},{label:"Root, Minor 3rd, Perfect 5th",correct:!1},{label:"Root, Perfect 4th, Perfect 5th",correct:!1},{label:"Root, Major 2nd, Perfect 5th",correct:!1}]}],tY={id:Y$,title:K$,category:X$,difficulty:Q$,estimatedMinutes:Z$,description:J$,steps:eY},nY="piano-minor-chords",sY="Minor Chords",iY="piano",rY="beginner",aY=7,oY="Learn to play minor chords and hear the difference between major and minor sounds.",lY=[{type:"info",title:"Major vs Minor",description:"Minor chords are built like major chords, but the middle note (the 3rd) is lowered by one semitone. This small change gives minor chords a sad, dark, or moody quality. Compare: C major = C-E-G, C minor = C-Eb-G."},{type:"play-chord",title:"Play C Minor",description:"Play C, Eb, and G together. Notice how it sounds darker than C major.",expectedChord:{root:"C",quality:"m",display:"Cm"},hint:"C (60) + Eb (63) + G (67). Eb is the black key between D and E."},{type:"play-chord",title:"Play A Minor",description:"A minor uses only white keys: A, C, E. It's one of the easiest minor chords to play.",expectedChord:{root:"A",quality:"m",display:"Am"},hint:"A (69) + C (72) + E (76)"},{type:"play-chord",title:"Play D Minor",description:"Play D, F, and A together to form a D minor chord.",expectedChord:{root:"D",quality:"m",display:"Dm"},hint:"D (62) + F (65) + A (69)"},{type:"play-chord",title:"Play E Minor",description:"E minor uses E, G, B  all white keys. It's very common in pop and rock music.",expectedChord:{root:"E",quality:"m",display:"Em"},hint:"E (64) + G (67) + B (71)"},{type:"play-chord",title:"Compare: Play C Major",description:"Now play C major (C-E-G) again. Listen to the contrast with the minor chords you just played.",expectedChord:{root:"C",quality:"maj",display:"C"},hint:"C (60) + E (64) + G (67)"},{type:"quiz",title:"Minor Chord Quiz",description:"How does a minor chord differ from a major chord?",quizOptions:[{label:"The 3rd is lowered by 1 semitone",correct:!0},{label:"The 5th is lowered by 1 semitone",correct:!1},{label:"The root is raised by 1 semitone",correct:!1},{label:"An extra note is added",correct:!1}]}],cY={id:nY,title:sY,category:iY,difficulty:rY,estimatedMinutes:aY,description:oY,steps:lY},uY="piano-g-major-scale",dY="G Major Scale",hY="piano",fY="beginner",pY=5,mY="Learn the G major scale  your first scale with a sharp note (F#).",gY=[{type:"info",title:"G Major  One Sharp",description:"The G major scale follows the same whole-whole-half-whole-whole-whole-half pattern as C major, but it starts on G. This means one note changes: F becomes F# (F sharp). The notes are G, A, B, C, D, E, F#."},{type:"play-notes",title:"Find G",description:"Press G4 to start. G is the white key between the first and second keys of the group of three black keys.",expectedNotes:[{midi:67,label:"G4"}],hint:"G4 is MIDI note 67."},{type:"play-notes",title:"Find F# (F Sharp)",description:"F# is the black key between F and G. This is the one sharp in the G major scale.",expectedNotes:[{midi:78,label:"F#5"}],hint:"F#5 is MIDI note 78. It's the black key just below G5."},{type:"play-scale",title:"Play the G Major Scale",description:"Play all 7 notes ascending: G, A, B, C, D, E, F#. Remember  F is replaced by F#!",expectedScale:{root:7,name:"Major",notes:[7,9,11,0,2,4,6]},hint:"All white keys from G to F#, except F becomes F# (the black key)."},{type:"play-chord",title:"Play G Major Chord",description:"Play the G major chord: G, B, D.",expectedChord:{root:"G",quality:"maj",display:"G"},hint:"G (67) + B (71) + D (74)"},{type:"quiz",title:"G Major Quiz",description:"Which note is sharp in the G major scale?",quizOptions:[{label:"C#",correct:!1},{label:"F#",correct:!0},{label:"G#",correct:!1},{label:"B",correct:!1}]}],yY={id:uY,title:dY,category:hY,difficulty:fY,estimatedMinutes:pY,description:mY,steps:gY},vY="piano-d-major-scale",bY="D Major Scale",xY="piano",_Y="intermediate",wY=6,SY="Learn the D major scale with two sharps  F# and C#.",CY=[{type:"info",title:"D Major  Two Sharps",description:"The D major scale has two sharps: F# and C#. The notes are D, E, F#, G, A, B, C#. Each new major scale in the 'sharp direction' adds one more sharp. G major had F#; D major adds C#."},{type:"play-notes",title:"Find D",description:"Press D4. D is the white key between the two black keys.",expectedNotes:[{midi:62,label:"D4"}],hint:"D4 is MIDI note 62."},{type:"play-notes",title:"Find C# and F#",description:"Press C#4 and F#4 together  the two sharps in D major.",expectedNotes:[{midi:61,label:"C#4"},{midi:66,label:"F#4"}],hint:"C#4 is MIDI 61 (black key right of C), F#4 is MIDI 66 (black key right of F)."},{type:"play-scale",title:"Play the D Major Scale",description:"Play all 7 notes ascending: D, E, F#, G, A, B, C#.",expectedScale:{root:2,name:"Major",notes:[2,4,6,7,9,11,1]},hint:"Start on D, play white keys but use F# and C# (the black keys) instead of F and C."},{type:"play-chord",title:"Play D Major Chord",description:"Play D, F#, and A together to form the D major chord.",expectedChord:{root:"D",quality:"maj",display:"D"},hint:"D (62) + F# (66) + A (69)"},{type:"quiz",title:"D Major Quiz",description:"How many sharps does the D major scale have?",quizOptions:[{label:"1",correct:!1},{label:"2",correct:!0},{label:"3",correct:!1},{label:"4",correct:!1}]}],TY={id:vY,title:bY,category:xY,difficulty:_Y,estimatedMinutes:wY,description:SY,steps:CY},EY="piano-natural-minor-scale",AY="Natural Minor Scale",kY="piano",NY="intermediate",MY=6,RY="Learn the A natural minor scale and its characteristic dark sound.",DY=[{type:"info",title:"The Natural Minor Scale",description:"The natural minor scale has a darker, sadder sound than the major scale. The formula is: W-H-W-W-H-W-W (whole, half, whole, whole, half, whole, whole). A minor is the simplest  it uses only white keys: A, B, C, D, E, F, G."},{type:"play-notes",title:"Find A",description:"Press A4 to start the A natural minor scale.",expectedNotes:[{midi:69,label:"A4"}],hint:"A4 is MIDI note 69."},{type:"play-scale",title:"Play A Natural Minor",description:"Play all 7 notes ascending: A, B, C, D, E, F, G. All white keys!",expectedScale:{root:9,name:"Natural Minor",notes:[9,11,0,2,4,5,7]},hint:"Start on A and play all white keys up to G."},{type:"play-chord",title:"Play A Minor Chord",description:"Play the A minor chord: A, C, E.",expectedChord:{root:"A",quality:"m",display:"Am"},hint:"A (69) + C (72) + E (76)"},{type:"play-chord",title:"Play D Minor Chord",description:"D minor (D, F, A) is the iv chord in A minor. Play it now.",expectedChord:{root:"D",quality:"m",display:"Dm"},hint:"D (62) + F (65) + A (69)"},{type:"play-chord",title:"Play E Minor Chord",description:"E minor (E, G, B) is the v chord in A minor.",expectedChord:{root:"E",quality:"m",display:"Em"},hint:"E (64) + G (67) + B (71)"},{type:"quiz",title:"Minor Scale Quiz",description:"What is the step pattern of the natural minor scale?",quizOptions:[{label:"W-W-H-W-W-W-H",correct:!1},{label:"W-H-W-W-H-W-W",correct:!0},{label:"H-W-W-H-W-W-W",correct:!1},{label:"W-W-W-H-W-W-H",correct:!1}]}],OY={id:EY,title:AY,category:kY,difficulty:NY,estimatedMinutes:MY,description:RY,steps:DY},jY="piano-pentatonic-scales",PY="Pentatonic Scales",IY="piano",BY="intermediate",LY=7,VY="Learn major and minor pentatonic scales  the most widely used scales in popular music.",zY=[{type:"info",title:"What is Pentatonic?",description:"'Penta' means five. Pentatonic scales use only 5 notes instead of 7. By removing the two 'tension' notes from a major or minor scale, you get a scale that sounds good no matter what order you play the notes. That's why pentatonic scales are used in rock, blues, pop, country, and folk music worldwide."},{type:"play-scale",title:"C Major Pentatonic",description:"Play the C major pentatonic scale: C, D, E, G, A. Notice that F and B are removed  these are the notes that create the most tension in the major scale.",expectedScale:{root:0,name:"Pentatonic Major",notes:[0,2,4,7,9]},hint:"C (60), D (62), E (64), G (67), A (69)  skip F and B."},{type:"play-scale",title:"A Minor Pentatonic",description:"Play the A minor pentatonic scale: A, C, D, E, G. This is the most popular scale for guitar and keyboard solos!",expectedScale:{root:9,name:"Pentatonic Minor",notes:[9,0,2,4,7]},hint:"A (69), C (72), D (74), E (76), G (79)"},{type:"info",title:"A Secret Connection",description:"C major pentatonic and A minor pentatonic contain the exact same notes! C-D-E-G-A = A-C-D-E-G. They're called 'relative' scales. The difference is which note feels like 'home'  C for major, A for minor."},{type:"play-scale",title:"G Major Pentatonic",description:"Play the G major pentatonic: G, A, B, D, E.",expectedScale:{root:7,name:"Pentatonic Major",notes:[7,9,11,2,4]},hint:"G (67), A (69), B (71), D (74), E (76)"},{type:"quiz",title:"Pentatonic Quiz",description:"How many notes are in a pentatonic scale?",quizOptions:[{label:"4",correct:!1},{label:"5",correct:!0},{label:"6",correct:!1},{label:"7",correct:!1}]}],FY={id:jY,title:PY,category:IY,difficulty:BY,estimatedMinutes:LY,description:VY,steps:zY},HY="piano-blues-scale",UY="The Blues Scale",GY="piano",qY="intermediate",WY=6,$Y="Learn the blues scale and its signature 'blue note' that gives blues music its distinctive sound.",YY=[{type:"info",title:"The Blue Note",description:"The blues scale is a minor pentatonic scale with one extra note added: the 'blue note' (a diminished 5th / augmented 4th). This note creates the characteristic tension and expressiveness of blues music. In A blues: A, C, D, Eb, E, G."},{type:"play-scale",title:"Play A Blues Scale",description:"Play the A blues scale: A, C, D, Eb, E, G. Listen for the tension when you hit Eb (the blue note) and how it resolves up to E.",expectedScale:{root:9,name:"Blues",notes:[9,0,2,3,4,7]},hint:"A (69), C (72), D (74), Eb (75), E (76), G (79). Eb is the black key between D and E."},{type:"play-notes",title:"Feel the Blue Note",description:"Play D and Eb together. This dissonant half-step is the heart of the blues sound.",expectedNotes:[{midi:74,label:"D5"},{midi:75,label:"Eb5"}],hint:"D5 (74) and Eb5 (75) are right next to each other."},{type:"play-scale",title:"Play C Blues Scale",description:"Now try the C blues scale: C, Eb, F, Gb, G, Bb.",expectedScale:{root:0,name:"Blues",notes:[0,3,5,6,7,10]},hint:"C (60), Eb (63), F (65), Gb (66), G (67), Bb (70)"},{type:"play-chord",title:"Blues Tonic Chord",description:"Play A minor  the home chord for the A blues scale.",expectedChord:{root:"A",quality:"m",display:"Am"},hint:"A (69) + C (72) + E (76)"},{type:"quiz",title:"Blues Quiz",description:"What is the 'blue note' in the A blues scale?",quizOptions:[{label:"C",correct:!1},{label:"D",correct:!1},{label:"Eb",correct:!0},{label:"G",correct:!1}]}],KY={id:HY,title:UY,category:GY,difficulty:qY,estimatedMinutes:WY,description:$Y,steps:YY},XY="piano-seventh-chords",QY="Seventh Chords",ZY="piano",JY="intermediate",eK=8,tK="Learn dominant 7th, major 7th, and minor 7th chords  adding richness and color to your harmony.",nK=[{type:"info",title:"Adding the 7th",description:`Seventh chords add a fourth note on top of a triad. There are three main types:

 Dominant 7th (C7): major triad + minor 7th  bluesy, wants to resolve
 Major 7th (Cmaj7): major triad + major 7th  smooth, jazzy
 Minor 7th (Cm7): minor triad + minor 7th  warm, mellow`},{type:"play-chord",title:"Play C7 (Dominant 7th)",description:"Play C, E, G, Bb. The dominant 7th has a strong 'pull'  it wants to resolve to the I chord (F major).",expectedChord:{root:"C",quality:"7",display:"C7"},hint:"C (60) + E (64) + G (67) + Bb (70)"},{type:"play-chord",title:"Play Cmaj7 (Major 7th)",description:"Play C, E, G, B. The major 7th sounds dreamy and sophisticated.",expectedChord:{root:"C",quality:"maj7",display:"Cmaj7"},hint:"C (60) + E (64) + G (67) + B (71). Note: B natural, not Bb!"},{type:"play-chord",title:"Play Cm7 (Minor 7th)",description:"Play C, Eb, G, Bb. Minor 7th chords have a warm, soulful quality.",expectedChord:{root:"C",quality:"m7",display:"Cm7"},hint:"C (60) + Eb (63) + G (67) + Bb (70)"},{type:"play-chord",title:"Play G7 (Dominant 7th)",description:"G7 is the most important dominant chord in the key of C. Play G, B, D, F.",expectedChord:{root:"G",quality:"7",display:"G7"},hint:"G (67) + B (71) + D (74) + F (77)"},{type:"info",title:"Dominant Resolution",description:"The dominant 7th chord (V7) creates tension that resolves beautifully to the I chord. Try playing G7  C major. This V7  I movement is the strongest resolution in music and ends almost every classical piece."},{type:"quiz",title:"Seventh Chord Quiz",description:"What type of 7th chord is built with a major triad and a minor 7th?",quizOptions:[{label:"Major 7th",correct:!1},{label:"Minor 7th",correct:!1},{label:"Dominant 7th",correct:!0},{label:"Diminished 7th",correct:!1}]}],sK={id:XY,title:QY,category:ZY,difficulty:JY,estimatedMinutes:eK,description:tK,steps:nK},iK="piano-sus-and-dim-chords",rK="Sus & Diminished Chords",aK="piano",oK="intermediate",lK=7,cK="Learn suspended and diminished chords  tension-building chords that add drama to your music.",uK=[{type:"info",title:"Beyond Major and Minor",description:`Suspended (sus) chords replace the 3rd with another note, creating an 'unresolved' tension:

 Sus4: the 3rd moves up to the 4th
 Sus2: the 3rd moves down to the 2nd

Diminished chords stack two minor 3rds, creating an unstable, tense sound that wants to resolve.`},{type:"play-chord",title:"Play Csus4",description:"Play C, F, G. The sus4 chord feels 'suspended'  it wants to fall back to C major.",expectedChord:{root:"C",quality:"sus4",display:"Csus4"},hint:"C (60) + F (65) + G (67). F replaces E."},{type:"play-chord",title:"Resolve to C Major",description:"Now play C major (C, E, G). Hear how the tension of sus4 resolves when the F drops down to E.",expectedChord:{root:"C",quality:"maj",display:"C"},hint:"C (60) + E (64) + G (67)"},{type:"play-chord",title:"Play Csus2",description:"Play C, D, G. The sus2 has an open, airy quality  common in rock and pop.",expectedChord:{root:"C",quality:"sus2",display:"Csus2"},hint:"C (60) + D (62) + G (67). D replaces E."},{type:"play-chord",title:"Play B Diminished",description:"Play B, D, F  a diminished triad. It sounds tense and unstable, like something dramatic is about to happen.",expectedChord:{root:"B",quality:"dim",display:"Bdim"},hint:"B (71) + D (74) + F (77). Each interval is a minor 3rd (3 semitones)."},{type:"play-chord",title:"Resolve Diminished to C",description:"Play C major to resolve the tension of B diminished. In the key of C, Bdim naturally leads to C.",expectedChord:{root:"C",quality:"maj",display:"C"},hint:"C (60) + E (64) + G (67)"},{type:"quiz",title:"Sus & Dim Quiz",description:"In a sus4 chord, what replaces the 3rd?",quizOptions:[{label:"The 2nd",correct:!1},{label:"The 4th",correct:!0},{label:"The 5th",correct:!1},{label:"The 7th",correct:!1}]}],dK={id:iK,title:rK,category:aK,difficulty:oK,estimatedMinutes:lK,description:cK,steps:uK},hK="piano-chord-progressions",fK="Chord Progressions",pK="piano",mK="intermediate",gK=8,yK="Learn the most popular chord progressions in music  I-V-vi-IV and I-vi-IV-V.",vK=[{type:"info",title:"What is a Chord Progression?",description:`A chord progression is a sequence of chords played in order. In the key of C major, the chords are numbered with Roman numerals:

 I = C (major)
 ii = Dm (minor)
 iii = Em (minor)
 IV = F (major)
 V = G (major)
 vi = Am (minor)
 vii = Bdim

Most pop songs use just 3-4 of these chords!`},{type:"info",title:"The 'Four Chord Song'",description:"The I-V-vi-IV progression (C-G-Am-F) is the most used chord progression in pop music. Songs like 'Let It Be', 'No Woman No Cry', 'With or Without You', and hundreds more use this exact sequence."},{type:"play-chord",title:"Step 1: Play C (I)",description:"Start the progression with C major  the 'home' chord.",expectedChord:{root:"C",quality:"maj",display:"C"},hint:"C (60) + E (64) + G (67)"},{type:"play-chord",title:"Step 2: Play G (V)",description:"Move to G major  the dominant chord.",expectedChord:{root:"G",quality:"maj",display:"G"},hint:"G (67) + B (71) + D (74)"},{type:"play-chord",title:"Step 3: Play Am (vi)",description:"Now A minor  the relative minor. This gives the progression its emotional contrast.",expectedChord:{root:"A",quality:"m",display:"Am"},hint:"A (69) + C (72) + E (76)"},{type:"play-chord",title:"Step 4: Play F (IV)",description:"Finish with F major  the subdominant. Then the progression loops back to C.",expectedChord:{root:"F",quality:"maj",display:"F"},hint:"F (65) + A (69) + C (72)"},{type:"info",title:"The '50s Progression'",description:"The I-vi-IV-V progression (C-Am-F-G) is another classic. It was hugely popular in the 1950s and 60s ('Stand By Me', 'Earth Angel'). It starts the same but puts the minor chord second, creating a different emotional arc."},{type:"quiz",title:"Progression Quiz",description:"In the key of C, what is the vi chord?",quizOptions:[{label:"F major",correct:!1},{label:"G major",correct:!1},{label:"A minor",correct:!0},{label:"D minor",correct:!1}]}],bK={id:hK,title:fK,category:pK,difficulty:mK,estimatedMinutes:gK,description:yK,steps:vK},xK="drums-basic-rock-beat",_K="Basic Rock Beat",wK="drums",SK="beginner",CK=5,TK="Learn the foundational rock drum pattern using kick, snare, and hi-hat.",EK=[{type:"info",title:"The Rock Beat",description:"The basic rock beat is the most common drum pattern in popular music. It uses three sounds: Kick drum (the low thump), Snare drum (the sharp crack), and Hi-hat (the ticking cymbal)."},{type:"play-drums",title:"Hit the Kick",description:"Find and hit the Kick drum pad (KCK).",expectedDrumPattern:{pads:[0]},hint:"The Kick drum is the red pad labeled KCK."},{type:"play-drums",title:"Hit the Snare",description:"Now hit the Snare drum pad (SNR).",expectedDrumPattern:{pads:[1]},hint:"The Snare is the orange pad labeled SNR."},{type:"play-drums",title:"Hit the Hi-Hat",description:"Hit the Closed Hi-hat pad (CHH).",expectedDrumPattern:{pads:[2]},hint:"The Closed Hi-hat is the green pad labeled CHH."},{type:"play-drums",title:"Kick + Hi-Hat Together",description:"Play the Kick and Closed Hi-hat at the same time. This is beat 1 of the rock pattern.",expectedDrumPattern:{pads:[0,2]},hint:"Hit both KCK and CHH simultaneously."},{type:"play-drums",title:"Snare + Hi-Hat Together",description:"Play the Snare and Closed Hi-hat together. This is beats 2 and 4 of the rock pattern.",expectedDrumPattern:{pads:[1,2]},hint:"Hit both SNR and CHH simultaneously."},{type:"quiz",title:"Quick Quiz",description:"In a basic rock beat, the snare typically falls on which beats?",quizOptions:[{label:"1 and 3",correct:!1},{label:"2 and 4",correct:!0},{label:"1 and 2",correct:!1},{label:"Every beat",correct:!1}]}],AK={id:xK,title:_K,category:wK,difficulty:SK,estimatedMinutes:CK,description:TK,steps:EK},kK="drums-know-your-kit",NK="Know Your Kit",MK="drums",RK="beginner",DK=5,OK="Explore all 8 drum pads and learn what each percussion sound is used for.",jK=[{type:"info",title:"Your Drum Kit",description:`A standard drum kit has several key pieces. In Micro DAW, you have 8 pads:

 KCK (Kick)  the deep bass drum, played with a foot pedal
 SNR (Snare)  the sharp crack that drives the beat
 CHH (Closed Hi-hat)  tight, ticking cymbal for rhythm
 OHH (Open Hi-hat)  looser, ringing cymbal
 CLP (Clap)  a hand clap accent
 TOM (Tom)  mid-pitched drum for fills
 CRS (Crash)  loud cymbal for accents
 RDE (Ride)  steady cymbal for keeping time`},{type:"play-drums",title:"Hit the Kick",description:"The kick drum is the foundation of every beat. Hit the KCK pad.",expectedDrumPattern:{pads:[0]},hint:"KCK is pad 0  the red pad."},{type:"play-drums",title:"Hit the Snare",description:"The snare drum provides the 'crack' on beats 2 and 4. Hit the SNR pad.",expectedDrumPattern:{pads:[1]},hint:"SNR is pad 1  the orange pad."},{type:"play-drums",title:"Hit the Closed Hi-hat",description:"The closed hi-hat keeps the pulse going with a tight 'tick' sound. Hit CHH.",expectedDrumPattern:{pads:[2]},hint:"CHH is pad 2."},{type:"play-drums",title:"Hit the Open Hi-hat",description:"The open hi-hat has a longer, ringing sound. It adds variety to hi-hat patterns. Hit OHH.",expectedDrumPattern:{pads:[3]},hint:"OHH is pad 3."},{type:"play-drums",title:"Hit the Clap",description:"Claps are used in pop, hip-hop, and electronic music  often layered with or replacing the snare. Hit CLP.",expectedDrumPattern:{pads:[4]},hint:"CLP is pad 4."},{type:"play-drums",title:"Hit the Tom",description:"Toms are used for drum fills  the exciting transitions between sections. Hit TOM.",expectedDrumPattern:{pads:[5]},hint:"TOM is pad 5."},{type:"play-drums",title:"Hit the Crash",description:"Crash cymbals mark the beginning of new sections with a loud, explosive sound. Hit CRS.",expectedDrumPattern:{pads:[6]},hint:"CRS is pad 6."},{type:"play-drums",title:"Hit the Ride",description:"The ride cymbal provides a steady, shimmering pulse. It's often used instead of hi-hats. Hit RDE.",expectedDrumPattern:{pads:[7]},hint:"RDE is pad 7."},{type:"quiz",title:"Kit Quiz",description:"Which drum provides the deep, low foundation of a beat?",quizOptions:[{label:"Snare",correct:!1},{label:"Kick",correct:!0},{label:"Tom",correct:!1},{label:"Ride",correct:!1}]}],PK={id:kK,title:NK,category:MK,difficulty:RK,estimatedMinutes:DK,description:OK,steps:jK},IK="drums-kick-snare-patterns",BK="Kick & Snare Patterns",LK="drums",VK="beginner",zK=6,FK="Learn different kick and snare combinations  the backbone of every drum beat.",HK=[{type:"info",title:"The Core of Every Beat",description:"The kick and snare are the two most important drums. The kick provides the low-end pulse, while the snare gives the sharp 'crack'. Together, they define the feel and groove of a beat. Let's explore different ways to combine them."},{type:"play-drums",title:"Kick Alone",description:"Start with just the kick drum. In most beats, the kick falls on beat 1.",expectedDrumPattern:{pads:[0]},hint:"Hit the KCK pad."},{type:"play-drums",title:"Snare Alone",description:"Now just the snare. The snare typically falls on beats 2 and 4 (the 'backbeat').",expectedDrumPattern:{pads:[1]},hint:"Hit the SNR pad."},{type:"play-drums",title:"Kick + Snare Together",description:"Play kick and snare at the same time. This powerful combination is used at the climax of fills and transitions.",expectedDrumPattern:{pads:[0,1]},hint:"Hit KCK and SNR simultaneously."},{type:"play-drums",title:"Kick + Clap Combo",description:"In many pop and hip-hop beats, the clap layers with or replaces the snare. Play kick and clap together.",expectedDrumPattern:{pads:[0,4]},hint:"Hit KCK and CLP simultaneously."},{type:"play-drums",title:"Snare + Clap Layer",description:"Layering snare and clap creates a thicker, more powerful backbeat. Play them together.",expectedDrumPattern:{pads:[1,4]},hint:"Hit SNR and CLP simultaneously."},{type:"quiz",title:"Backbeat Quiz",description:"On which beats does the snare typically fall in a standard 4/4 beat?",quizOptions:[{label:"1 and 3",correct:!1},{label:"2 and 4",correct:!0},{label:"1 and 2",correct:!1},{label:"3 and 4",correct:!1}]}],UK={id:IK,title:BK,category:LK,difficulty:VK,estimatedMinutes:zK,description:FK,steps:HK},GK="drums-hi-hat-variations",qK="Hi-Hat Variations",WK="drums",$K="beginner",YK=5,KK="Explore closed and open hi-hat sounds and learn to combine them with kick and snare.",XK=[{type:"info",title:"Closed vs Open Hi-Hat",description:"The hi-hat is a pair of cymbals on a stand. When pressed together (closed), it makes a tight 'tick'. When released (open), it rings out with a 'tsss' sound. Switching between closed and open hi-hat adds movement and energy to a beat."},{type:"play-drums",title:"Closed Hi-Hat",description:"Hit the closed hi-hat (CHH). This tight, short sound is the most common hi-hat pattern.",expectedDrumPattern:{pads:[2]},hint:"CHH is pad 2."},{type:"play-drums",title:"Open Hi-Hat",description:"Now hit the open hi-hat (OHH). Notice how it rings out much longer.",expectedDrumPattern:{pads:[3]},hint:"OHH is pad 3."},{type:"play-drums",title:"Kick + Closed Hi-Hat",description:"This is the most basic beat 1 pattern: kick with closed hi-hat.",expectedDrumPattern:{pads:[0,2]},hint:"Hit KCK and CHH at the same time."},{type:"play-drums",title:"Snare + Closed Hi-Hat",description:"Beats 2 and 4 in rock: snare with closed hi-hat.",expectedDrumPattern:{pads:[1,2]},hint:"Hit SNR and CHH at the same time."},{type:"play-drums",title:"Kick + Open Hi-Hat",description:"Kick with open hi-hat creates a more energetic, driving feel. Common before a snare hit.",expectedDrumPattern:{pads:[0,3]},hint:"Hit KCK and OHH at the same time."},{type:"quiz",title:"Hi-Hat Quiz",description:"What's the difference between closed and open hi-hat?",quizOptions:[{label:"Closed is tight/short, open rings out",correct:!0},{label:"Closed is louder than open",correct:!1},{label:"Open is played with a stick, closed by foot",correct:!1},{label:"They sound the same",correct:!1}]}],QK={id:GK,title:qK,category:WK,difficulty:$K,estimatedMinutes:YK,description:KK,steps:XK},ZK="drums-ride-cymbal",JK="The Ride Cymbal",eX="drums",tX="beginner",nX=5,sX="Learn to use the ride cymbal as a timekeeper and combine it with kick and snare.",iX=[{type:"info",title:"The Ride Cymbal",description:"The ride cymbal is a large cymbal used for keeping time, similar to the hi-hat but with a more open, shimmering sound. It's commonly used in jazz, ballads, and the quieter sections of rock songs. Switching from hi-hat to ride changes the entire feel of a beat."},{type:"play-drums",title:"Hit the Ride",description:"Hit the ride cymbal (RDE). Listen to its sustained, shimmering tone.",expectedDrumPattern:{pads:[7]},hint:"RDE is pad 7."},{type:"play-drums",title:"Ride + Kick",description:"Play the ride and kick together. This is the foundation of a jazz-style beat.",expectedDrumPattern:{pads:[0,7]},hint:"Hit KCK and RDE simultaneously."},{type:"play-drums",title:"Ride + Snare",description:"Play the ride and snare together for the backbeat with ride.",expectedDrumPattern:{pads:[1,7]},hint:"Hit SNR and RDE simultaneously."},{type:"play-drums",title:"Ride + Kick + Snare",description:"All three together  ride keeping time with both kick and snare. This is a full beat pattern.",expectedDrumPattern:{pads:[0,1,7]},hint:"Hit KCK, SNR, and RDE all at the same time."},{type:"quiz",title:"Ride Quiz",description:"In which genre is the ride cymbal most commonly used for timekeeping?",quizOptions:[{label:"Heavy metal",correct:!1},{label:"Jazz",correct:!0},{label:"Punk rock",correct:!1},{label:"EDM",correct:!1}]}],rX={id:ZK,title:JK,category:eX,difficulty:tX,estimatedMinutes:nX,description:sX,steps:iX},aX="drums-crash-accents",oX="Crash Accents",lX="drums",cX="beginner",uX=5,dX="Learn to use crash cymbals to mark section changes and add dramatic accents.",hX=[{type:"info",title:"The Crash Cymbal",description:"The crash cymbal is the loudest, most dramatic sound in the drum kit. It's used to mark important moments: the start of a chorus, the end of a fill, or the first beat of a new section. A well-placed crash makes the music feel bigger and more exciting."},{type:"play-drums",title:"Hit the Crash",description:"Hit the crash cymbal (CRS). Feel its explosive energy!",expectedDrumPattern:{pads:[6]},hint:"CRS is pad 6."},{type:"play-drums",title:"Crash + Kick",description:"The most common crash pattern: crash and kick together on beat 1 of a new section. This combo is powerful and definitive.",expectedDrumPattern:{pads:[0,6]},hint:"Hit KCK and CRS simultaneously."},{type:"play-drums",title:"Crash + Kick + Snare",description:"For maximum impact, add the snare too. This triple hit is used at the biggest moments in a song.",expectedDrumPattern:{pads:[0,1,6]},hint:"Hit KCK, SNR, and CRS all at once."},{type:"play-drums",title:"Crash + Ride (Cymbal Wash)",description:"Crash and ride together create a 'cymbal wash' effect  a wall of shimmering sound.",expectedDrumPattern:{pads:[6,7]},hint:"Hit CRS and RDE simultaneously."},{type:"quiz",title:"Crash Quiz",description:"When is the crash cymbal most commonly used?",quizOptions:[{label:"On every beat",correct:!1},{label:"Only during quiet sections",correct:!1},{label:"At the start of new sections",correct:!0},{label:"Only at the end of songs",correct:!1}]}],fX={id:aX,title:oX,category:lX,difficulty:cX,estimatedMinutes:uX,description:dX,steps:hX},pX="drums-tom-fills",mX="Tom Fills",gX="drums",yX="intermediate",vX=6,bX="Learn to create drum fills using toms  the exciting transitions between sections.",xX=[{type:"info",title:"What is a Fill?",description:"A drum fill is a short break from the main beat, usually lasting 1-2 beats. Fills use toms, snare, and crash to create excitement and signal transitions. Think of fills as punctuation marks in your drumming  they tell the listener 'something new is coming!'"},{type:"play-drums",title:"Tom Alone",description:"Hit the tom. Toms have a melodic, resonant quality between the snare and kick.",expectedDrumPattern:{pads:[5]},hint:"TOM is pad 5."},{type:"play-drums",title:"Snare to Tom",description:"A classic fill move: snare then tom. Play them together here to practice the combination.",expectedDrumPattern:{pads:[1,5]},hint:"Hit SNR and TOM simultaneously."},{type:"play-drums",title:"Tom + Kick",description:"Tom with kick adds weight to the fill. This is often used at the bottom of a descending fill.",expectedDrumPattern:{pads:[0,5]},hint:"Hit KCK and TOM simultaneously."},{type:"play-drums",title:"Fill Ending: Tom + Crash",description:"A fill often ends with a crash on beat 1 of the next section. Play tom and crash together.",expectedDrumPattern:{pads:[5,6]},hint:"Hit TOM and CRS simultaneously."},{type:"play-drums",title:"Big Fill Ending",description:"The ultimate fill ending: kick + crash together. This marks the transition point from fill back to the groove.",expectedDrumPattern:{pads:[0,6]},hint:"Hit KCK and CRS simultaneously."},{type:"quiz",title:"Fill Quiz",description:"What is the purpose of a drum fill?",quizOptions:[{label:"To keep the beat steady",correct:!1},{label:"To signal transitions between sections",correct:!0},{label:"To make the song quieter",correct:!1},{label:"To replace the bass guitar",correct:!1}]}],_X={id:pX,title:mX,category:gX,difficulty:yX,estimatedMinutes:vX,description:bX,steps:xX},wX="drums-pop-beat",SX="Pop Beat",CX="drums",TX="intermediate",EX=6,AX="Learn clap-based pop drum patterns used in modern pop and electronic music.",kX=[{type:"info",title:"The Pop Beat",description:"Modern pop music often uses claps instead of (or layered with) snares for the backbeat. The hi-hat patterns tend to be simpler, and the kick patterns are more syncopated. Let's build a typical pop beat step by step."},{type:"play-drums",title:"Clap Backbeat",description:"In pop, the clap often replaces the snare. Hit the clap pad.",expectedDrumPattern:{pads:[4]},hint:"CLP is pad 4."},{type:"play-drums",title:"Kick + Clap",description:"The core of a pop beat: kick and clap together. This thick combo drives the groove.",expectedDrumPattern:{pads:[0,4]},hint:"Hit KCK and CLP simultaneously."},{type:"play-drums",title:"Clap + Closed Hi-Hat",description:"Add the hi-hat to the clap for the backbeat rhythm.",expectedDrumPattern:{pads:[2,4]},hint:"Hit CHH and CLP simultaneously."},{type:"play-drums",title:"Snare + Clap Layer",description:"For an even bigger backbeat, layer the snare under the clap.",expectedDrumPattern:{pads:[1,4]},hint:"Hit SNR and CLP at the same time."},{type:"play-drums",title:"Full Pop Hit: Kick + Clap + Hi-Hat",description:"The full pop beat accent: kick, clap, and hi-hat together.",expectedDrumPattern:{pads:[0,2,4]},hint:"Hit KCK, CHH, and CLP all at once."},{type:"quiz",title:"Pop Beat Quiz",description:"In modern pop, what often replaces the snare for the backbeat?",quizOptions:[{label:"Tom",correct:!1},{label:"Crash",correct:!1},{label:"Clap",correct:!0},{label:"Ride",correct:!1}]}],NX={id:wX,title:SX,category:CX,difficulty:TX,estimatedMinutes:EX,description:AX,steps:kX},MX="drums-three-piece-combos",RX="Three-Piece Combos",DX="drums",OX="intermediate",jX=6,PX="Practice hitting 3-4 pads simultaneously for powerful drum combinations.",IX=[{type:"info",title:"Multi-Pad Hits",description:"As you get more comfortable with the drum kit, you'll want to play more pads at once. Real drummers use both hands and both feet simultaneously. Let's practice hitting 3 and 4 pads together for powerful, full-sounding drum hits."},{type:"play-drums",title:"Kick + Snare + Hi-Hat",description:"The classic full rock hit. This combination on beat 1 is powerful and driving.",expectedDrumPattern:{pads:[0,1,2]},hint:"Hit KCK, SNR, and CHH all at once."},{type:"play-drums",title:"Kick + Snare + Crash",description:"The big section starter  kick, snare, and crash together for maximum impact.",expectedDrumPattern:{pads:[0,1,6]},hint:"Hit KCK, SNR, and CRS all at once."},{type:"play-drums",title:"Kick + Clap + Open Hi-Hat",description:"A modern pop/electronic combination. The open hi-hat adds energy.",expectedDrumPattern:{pads:[0,3,4]},hint:"Hit KCK, OHH, and CLP all at once."},{type:"play-drums",title:"Snare + Tom + Crash",description:"A fill-ending combo. Snare and tom lead into the crash.",expectedDrumPattern:{pads:[1,5,6]},hint:"Hit SNR, TOM, and CRS all at once."},{type:"play-drums",title:"Kick + Snare + Crash + Hi-Hat",description:"The ultimate 4-way hit  used at the biggest moments. This requires coordination!",expectedDrumPattern:{pads:[0,1,2,6]},hint:"Hit KCK, SNR, CHH, and CRS all at the same time."},{type:"quiz",title:"Combo Quiz",description:"Which combination creates the biggest impact at the start of a chorus?",quizOptions:[{label:"Hi-hat alone",correct:!1},{label:"Kick + Ride",correct:!1},{label:"Kick + Snare + Crash",correct:!0},{label:"Tom + Clap",correct:!1}]}],BX={id:MX,title:RX,category:DX,difficulty:OX,estimatedMinutes:jX,description:PX,steps:IX},LX="drums-genre-beats",VX="Genre Beats",zX="drums",FX="intermediate",HX=8,UX="Explore the signature drum feels of rock, hip-hop, jazz, and electronic music.",GX=[{type:"info",title:"Drums Define the Genre",description:"Different music genres have distinctive drum patterns. By changing which pads you emphasize and how you combine them, you can shift between rock, hip-hop, jazz, and electronic feels. Let's explore the key combinations for each genre."},{type:"info",title:"Rock: Power and Drive",description:"Rock uses kick, snare, and hi-hat as the core. The kick is strong on 1 and 3, the snare punches on 2 and 4, and the hi-hat keeps a steady pulse. Crashes mark transitions."},{type:"play-drums",title:"Rock Feel: Kick + Hi-Hat",description:"Beat 1 of a rock pattern: kick with closed hi-hat.",expectedDrumPattern:{pads:[0,2]},hint:"Hit KCK and CHH together."},{type:"info",title:"Hip-Hop: Boom-Clap",description:"Hip-hop emphasizes the kick and clap/snare. Patterns are often sparser, with a heavy kick and sharp clap. Open hi-hats add swing."},{type:"play-drums",title:"Hip-Hop Feel: Kick + Clap + Open HH",description:"A hip-hop accent: kick, clap, and open hi-hat together.",expectedDrumPattern:{pads:[0,3,4]},hint:"Hit KCK, OHH, and CLP together."},{type:"info",title:"Jazz: Ride and Swing",description:"Jazz features the ride cymbal as the primary timekeeper. The kick is soft and 'feathered'. Cross-stick snare patterns and brush strokes create a smooth, swinging feel."},{type:"play-drums",title:"Jazz Feel: Kick + Ride",description:"The jazz foundation: a light kick with the ride cymbal.",expectedDrumPattern:{pads:[0,7]},hint:"Hit KCK and RDE together."},{type:"info",title:"Electronic: Layers and Energy",description:"Electronic music layers many sounds together. Kick and clap are core, with both closed and open hi-hats, and crash cymbals for builds."},{type:"play-drums",title:"Electronic Feel: Kick + Clap + CHH",description:"A typical electronic beat accent.",expectedDrumPattern:{pads:[0,2,4]},hint:"Hit KCK, CHH, and CLP together."},{type:"quiz",title:"Genre Quiz",description:"Which cymbal is the primary timekeeper in jazz drumming?",quizOptions:[{label:"Closed Hi-hat",correct:!1},{label:"Crash",correct:!1},{label:"Ride",correct:!0},{label:"Open Hi-hat",correct:!1}]}],qX={id:LX,title:VX,category:zX,difficulty:FX,estimatedMinutes:HX,description:UX,steps:GX},WX="drums-dynamics-and-layers",$X="Dynamics & Layers",YX="drums",KX="intermediate",XX=7,QX="Learn to build drum patterns from sparse to dense, creating energy and dynamics.",ZX=[{type:"info",title:"Building Dynamics",description:"Great drumming isn't just about playing the right notes  it's about dynamics. Starting sparse and gradually adding more elements creates excitement and forward motion. Think of it like building a wall: start with the foundation and add bricks one layer at a time."},{type:"play-drums",title:"Layer 1: Kick Only",description:"Start with just the kick  the sparse foundation. This is the quietest, most minimal beat.",expectedDrumPattern:{pads:[0]},hint:"Just the KCK pad."},{type:"play-drums",title:"Layer 2: Add Hi-Hat",description:"Add the closed hi-hat to the kick. Now there's a pulse and a rhythm.",expectedDrumPattern:{pads:[0,2]},hint:"KCK and CHH together."},{type:"play-drums",title:"Layer 3: Add Snare",description:"Add the snare on top. Now you have a full basic beat: kick, hi-hat, and snare.",expectedDrumPattern:{pads:[0,1,2]},hint:"KCK, SNR, and CHH together."},{type:"play-drums",title:"Layer 4: Add Open Hi-Hat",description:"Swap in the open hi-hat for more energy. Kick, snare, and open hat.",expectedDrumPattern:{pads:[0,1,3]},hint:"KCK, SNR, and OHH together."},{type:"play-drums",title:"Layer 5: Full Energy",description:"Maximum energy: kick, snare, open hi-hat, and crash. This is the climactic moment!",expectedDrumPattern:{pads:[0,1,3,6]},hint:"Hit KCK, SNR, OHH, and CRS all at once."},{type:"play-drums",title:"Strip Back: Minimal Again",description:"After the climax, strip back to just the ride for contrast. Dynamics are about contrast!",expectedDrumPattern:{pads:[7]},hint:"Just the RDE pad  quiet and shimmering."},{type:"quiz",title:"Dynamics Quiz",description:"What is the best way to build energy in a drum pattern?",quizOptions:[{label:"Play the same pattern louder",correct:!1},{label:"Gradually add more elements/layers",correct:!0},{label:"Speed up the tempo",correct:!1},{label:"Only use crash cymbals",correct:!1}]}],JX={id:WX,title:$X,category:YX,difficulty:KX,estimatedMinutes:XX,description:QX,steps:ZX},eQ="theory-intervals",tQ="Musical Intervals",nQ="theory",sQ="beginner",iQ=5,rQ="Learn about the distances between notes  the building blocks of chords and melodies.",aQ=[{type:"info",title:"What are Intervals?",description:"An interval is the distance between two notes, measured in semitones (half-steps). A semitone is the smallest step on a piano  from any key to the very next key (including black keys). Understanding intervals is key to understanding chords, scales, and harmony."},{type:"info",title:"Common Intervals",description:`Here are the most important intervals:

 Unison (0 semitones)  same note
 Minor 2nd (1)  tension, dissonance
 Major 2nd (2)  a whole step
 Minor 3rd (3)  sad, dark feeling
 Major 3rd (4)  happy, bright feeling
 Perfect 4th (5)  open, strong
 Perfect 5th (7)  very stable, powerful
 Octave (12)  same note, higher pitch`},{type:"play-notes",title:"Play a Major 3rd",description:"Play C and E together. This is a Major 3rd  4 semitones apart. It sounds bright and happy.",expectedNotes:[{midi:60,label:"C4"},{midi:64,label:"E4"}],hint:"C is MIDI 60, E is MIDI 64. They are 4 semitones apart."},{type:"play-notes",title:"Play a Perfect 5th",description:"Play C and G together. This is a Perfect 5th  7 semitones apart. It sounds open and powerful.",expectedNotes:[{midi:60,label:"C4"},{midi:67,label:"G4"}],hint:"C is MIDI 60, G is MIDI 67."},{type:"quiz",title:"Interval Quiz",description:"How many semitones are in a Perfect 5th?",quizOptions:[{label:"5",correct:!1},{label:"6",correct:!1},{label:"7",correct:!0},{label:"8",correct:!1}]},{type:"quiz",title:"Major vs Minor 3rd",description:"A Major 3rd has how many semitones?",quizOptions:[{label:"2",correct:!1},{label:"3",correct:!1},{label:"4",correct:!0},{label:"5",correct:!1}]}],oQ={id:eQ,title:tQ,category:nQ,difficulty:sQ,estimatedMinutes:iQ,description:rQ,steps:aQ},lQ="theory-semitones-and-tones",cQ="Semitones & Tones",uQ="theory",dQ="beginner",hQ=5,fQ="Understand half steps and whole steps  the smallest building blocks of music.",pQ=[{type:"info",title:"The Smallest Step",description:"A semitone (half step) is the smallest distance between two notes on a piano. It's the distance from any key to the very next key  including black keys. A tone (whole step) equals two semitones. These are the building blocks of every scale and melody."},{type:"play-notes",title:"A Semitone: C to C#",description:"Play C and C# together. This is one semitone  the smallest possible interval.",expectedNotes:[{midi:60,label:"C4"},{midi:61,label:"C#4"}],hint:"C (60) and C# (61) are right next to each other."},{type:"play-notes",title:"A Semitone: E to F",description:"E to F is also a semitone  but between two white keys! There's no black key between E and F.",expectedNotes:[{midi:64,label:"E4"},{midi:65,label:"F4"}],hint:"E and F are adjacent white keys with no black key between them."},{type:"play-notes",title:"A Whole Tone: C to D",description:"Play C and D together. This is a whole tone (2 semitones). Notice the black key (C#) in between.",expectedNotes:[{midi:60,label:"C4"},{midi:62,label:"D4"}],hint:"C (60) and D (62) have C# between them."},{type:"info",title:"Natural Half Steps",description:`On the piano, there are two places where white keys are only a semitone apart (no black key between them):

 E to F
 B to C

All other adjacent white keys are a whole tone apart. This is why the piano keyboard has its distinctive pattern of black key groups!`},{type:"play-notes",title:"The Other Natural Half Step: B to C",description:"Play B and C together  the other natural semitone. B to C has no black key between them.",expectedNotes:[{midi:71,label:"B4"},{midi:72,label:"C5"}],hint:"B4 (71) and C5 (72) are adjacent white keys."},{type:"quiz",title:"Step Quiz",description:"How many semitones are in a whole tone?",quizOptions:[{label:"1",correct:!1},{label:"2",correct:!0},{label:"3",correct:!1},{label:"4",correct:!1}]}],mQ={id:lQ,title:cQ,category:uQ,difficulty:dQ,estimatedMinutes:hQ,description:fQ,steps:pQ},gQ="theory-major-scale-formula",yQ="Major Scale Formula",vQ="theory",bQ="beginner",xQ=6,_Q="Learn the W-W-H-W-W-W-H pattern that builds every major scale.",wQ=[{type:"info",title:"One Formula, Every Key",description:`Every major scale follows the same pattern of whole steps (W) and half steps (H):

W - W - H - W - W - W - H

This formula works from any starting note. If you apply this pattern starting on C, you get all white keys. Starting on G, you get one sharp (F#). The pattern never changes  only the starting note does!`},{type:"play-scale",title:"C Major: The Template",description:"Play C major: C-D-E-F-G-A-B. Follow along: CD (W), DE (W), EF (H), FG (W), GA (W), AB (W), BC (H).",expectedScale:{root:0,name:"Major",notes:[0,2,4,5,7,9,11]},hint:"All white keys from C to B."},{type:"info",title:"Breaking Down the Formula",description:`Let's trace the formula on C:

 C + W = D (skip C#)
 D + W = E (skip D#)
 E + H = F (E to F is naturally a half step!)
 F + W = G (skip F#)
 G + W = A (skip G#)
 A + W = B (skip A#)
 B + H = C (B to C is naturally a half step!)

The two half steps align perfectly with the natural half steps of the keyboard.`},{type:"play-scale",title:"G Major: Apply the Formula",description:"Apply W-W-H-W-W-W-H starting on G: G-A-B-C-D-E-F#. The formula forces F to become F#!",expectedScale:{root:7,name:"Major",notes:[7,9,11,0,2,4,6]},hint:"G to F# using the major scale formula. F becomes F# because AB is W, not ABF."},{type:"play-scale",title:"F Major: Apply the Formula",description:"Apply the formula starting on F: F-G-A-Bb-C-D-E. Here, B becomes Bb!",expectedScale:{root:5,name:"Major",notes:[5,7,9,10,0,2,4]},hint:"F (65), G (67), A (69), Bb (70), C (72), D (74), E (76)"},{type:"quiz",title:"Formula Quiz",description:"What is the major scale formula?",quizOptions:[{label:"W-W-H-W-W-W-H",correct:!0},{label:"W-H-W-W-H-W-W",correct:!1},{label:"H-W-W-H-W-W-W",correct:!1},{label:"W-W-W-H-W-W-H",correct:!1}]}],SQ={id:gQ,title:yQ,category:vQ,difficulty:bQ,estimatedMinutes:xQ,description:_Q,steps:wQ},CQ="theory-minor-scale-formula",TQ="Minor Scale Formula",EQ="theory",AQ="beginner",kQ=6,NQ="Learn the W-H-W-W-H-W-W pattern that builds every natural minor scale.",MQ=[{type:"info",title:"The Minor Scale Pattern",description:`The natural minor scale has its own formula:

W - H - W - W - H - W - W

Compared to the major scale (W-W-H-W-W-W-H), the 3rd, 6th, and 7th notes are lowered by a half step. This gives the minor scale its characteristic dark, sad, or moody sound.`},{type:"play-scale",title:"A Natural Minor",description:"Play A natural minor: A-B-C-D-E-F-G. Like C major, it uses only white keys  but starting on A gives it a minor feel.",expectedScale:{root:9,name:"Natural Minor",notes:[9,11,0,2,4,5,7]},hint:"All white keys from A to G."},{type:"info",title:"Tracing the Formula",description:`Let's trace W-H-W-W-H-W-W on A:

 A + W = B
 B + H = C (natural half step)
 C + W = D
 D + W = E
 E + H = F (natural half step)
 F + W = G
 G + W = A

The formula aligns with the white keys when starting on A.`},{type:"play-scale",title:"D Natural Minor",description:"Apply the formula on D: D-E-F-G-A-Bb-C. One flat: Bb.",expectedScale:{root:2,name:"Natural Minor",notes:[2,4,5,7,9,10,0]},hint:"D (62), E (64), F (65), G (67), A (69), Bb (70), C (72)"},{type:"play-scale",title:"E Natural Minor",description:"Play E natural minor: E-F#-G-A-B-C-D. One sharp: F#.",expectedScale:{root:4,name:"Natural Minor",notes:[4,6,7,9,11,0,2]},hint:"E (64), F# (66), G (67), A (69), B (71), C (72), D (74)"},{type:"quiz",title:"Minor Formula Quiz",description:"What is the natural minor scale formula?",quizOptions:[{label:"W-W-H-W-W-W-H",correct:!1},{label:"W-H-W-W-H-W-W",correct:!0},{label:"H-W-W-W-H-W-W",correct:!1},{label:"W-H-W-H-W-W-W",correct:!1}]}],RQ={id:CQ,title:TQ,category:EQ,difficulty:AQ,estimatedMinutes:kQ,description:NQ,steps:MQ},DQ="theory-chord-construction",OQ="Chord Construction",jQ="theory",PQ="beginner",IQ=7,BQ="Learn how triads are built from intervals  major, minor, diminished, and augmented.",LQ=[{type:"info",title:"Building Blocks of Chords",description:`A triad is a three-note chord built by stacking two intervals of a 3rd:

 Major triad: Major 3rd + Minor 3rd (4 + 3 semitones)
 Minor triad: Minor 3rd + Major 3rd (3 + 4 semitones)
 Diminished triad: Minor 3rd + Minor 3rd (3 + 3 semitones)
 Augmented triad: Major 3rd + Major 3rd (4 + 4 semitones)`},{type:"play-chord",title:"Build C Major (4+3)",description:"C major = C + E (4 semitones) + G (3 more semitones). Major 3rd on bottom, minor 3rd on top.",expectedChord:{root:"C",quality:"maj",display:"C"},hint:"C (60) + E (64) + G (67)"},{type:"play-chord",title:"Build C Minor (3+4)",description:"C minor = C + Eb (3 semitones) + G (4 more semitones). The intervals are reversed from major!",expectedChord:{root:"C",quality:"m",display:"Cm"},hint:"C (60) + Eb (63) + G (67)"},{type:"play-chord",title:"Build B Diminished (3+3)",description:"B diminished = B + D (3 semitones) + F (3 more semitones). Two minor 3rds stacked. Tense and unstable.",expectedChord:{root:"B",quality:"dim",display:"Bdim"},hint:"B (71) + D (74) + F (77)"},{type:"play-chord",title:"Build C Augmented (4+4)",description:"C augmented = C + E (4 semitones) + G# (4 more semitones). Two major 3rds. Mysterious and dreamy.",expectedChord:{root:"C",quality:"aug",display:"Caug"},hint:"C (60) + E (64) + G# (68)"},{type:"info",title:"A Simple Way to Remember",description:`Think of it as stacking 3rds:

 Major: big + small (happy)
 Minor: small + big (sad)
 Diminished: small + small (tense)
 Augmented: big + big (dreamy)

The total size of the chord (root to 5th) tells you the quality: 7 semitones = perfect, 6 = diminished, 8 = augmented.`},{type:"quiz",title:"Construction Quiz",description:"A minor triad is built with which intervals?",quizOptions:[{label:"Major 3rd + Minor 3rd",correct:!1},{label:"Minor 3rd + Major 3rd",correct:!0},{label:"Minor 3rd + Minor 3rd",correct:!1},{label:"Major 3rd + Major 3rd",correct:!1}]}],VQ={id:DQ,title:OQ,category:jQ,difficulty:PQ,estimatedMinutes:IQ,description:BQ,steps:LQ},zQ="theory-key-signatures",FQ="Key Signatures",HQ="theory",UQ="intermediate",GQ=7,qQ="Understand key signatures and the circle of fifths for sharp keys.",WQ=[{type:"info",title:"What is a Key Signature?",description:"A key signature tells you which notes are sharp or flat throughout a piece of music. Instead of writing a sharp or flat on every note, the key signature puts them at the beginning. For example, the key of G has one sharp (F#), so every F in the piece is played as F#."},{type:"info",title:"The Circle of Fifths (Sharp Keys)",description:`Starting from C (no sharps), each step up by a perfect 5th adds one sharp:

 C major: 0 sharps
 G major: 1 sharp (F#)
 D major: 2 sharps (F#, C#)
 A major: 3 sharps (F#, C#, G#)
 E major: 4 sharps (F#, C#, G#, D#)

The sharps always appear in the same order: F#, C#, G#, D#, A#, E#, B#`},{type:"play-scale",title:"C Major: No Sharps",description:"Play C major  the key with no sharps or flats. All white keys.",expectedScale:{root:0,name:"Major",notes:[0,2,4,5,7,9,11]},hint:"C-D-E-F-G-A-B, all white keys."},{type:"play-scale",title:"G Major: 1 Sharp",description:"Play G major  one sharp (F#). Going up a 5th from C gives us G.",expectedScale:{root:7,name:"Major",notes:[7,9,11,0,2,4,6]},hint:"G-A-B-C-D-E-F#"},{type:"play-scale",title:"D Major: 2 Sharps",description:"Play D major  two sharps (F# and C#). Another 5th up from G.",expectedScale:{root:2,name:"Major",notes:[2,4,6,7,9,11,1]},hint:"D-E-F#-G-A-B-C#"},{type:"quiz",title:"Key Signature Quiz",description:"How many sharps does D major have?",quizOptions:[{label:"0",correct:!1},{label:"1",correct:!1},{label:"2",correct:!0},{label:"3",correct:!1}]},{type:"quiz",title:"Circle of Fifths Quiz",description:"In the circle of fifths, what order do sharps appear?",quizOptions:[{label:"C#, F#, G#, D#",correct:!1},{label:"F#, C#, G#, D#",correct:!0},{label:"G#, D#, A#, F#",correct:!1},{label:"B#, E#, A#, D#",correct:!1}]}],$Q={id:zQ,title:FQ,category:HQ,difficulty:UQ,estimatedMinutes:GQ,description:qQ,steps:WQ},YQ="theory-relative-major-minor",KQ="Relative Major & Minor",XQ="theory",QQ="intermediate",ZQ=6,JQ="Discover the relationship between major and minor keys that share the same notes.",eZ=[{type:"info",title:"Relative Keys",description:"Every major key has a 'relative minor' that uses the exact same notes  just starting from a different place. The relative minor starts on the 6th note of the major scale. For C major, the 6th note is A, so A minor is C major's relative minor."},{type:"play-scale",title:"Play C Major",description:"Play the C major scale: C-D-E-F-G-A-B.",expectedScale:{root:0,name:"Major",notes:[0,2,4,5,7,9,11]},hint:"All white keys from C to B."},{type:"play-scale",title:"Play A Natural Minor",description:"Now play A natural minor: A-B-C-D-E-F-G. Same notes as C major, different starting point!",expectedScale:{root:9,name:"Natural Minor",notes:[9,11,0,2,4,5,7]},hint:"All white keys from A to G  same notes as C major!"},{type:"info",title:"Finding the Relative Minor",description:`To find any major key's relative minor, go down 3 semitones (or up to the 6th note):

 C major  A minor
 G major  E minor
 D major  B minor
 F major  D minor

They share the same key signature  same sharps and flats!`},{type:"play-chord",title:"C Major (Home of the Major Key)",description:"Play C major  this is the 'home' chord in C major.",expectedChord:{root:"C",quality:"maj",display:"C"},hint:"C (60) + E (64) + G (67)"},{type:"play-chord",title:"A Minor (Home of the Relative Minor)",description:"Play A minor  the 'home' chord in A minor. Same notes available, different emotional center.",expectedChord:{root:"A",quality:"m",display:"Am"},hint:"A (69) + C (72) + E (76)"},{type:"quiz",title:"Relative Key Quiz",description:"What is the relative minor of G major?",quizOptions:[{label:"A minor",correct:!1},{label:"D minor",correct:!1},{label:"E minor",correct:!0},{label:"B minor",correct:!1}]}],tZ={id:YQ,title:KQ,category:XQ,difficulty:QQ,estimatedMinutes:ZQ,description:JQ,steps:eZ},nZ="theory-diatonic-chords",sZ="Diatonic Chords",iZ="theory",rZ="intermediate",aZ=8,oZ="Learn all 7 chords built from the C major scale  the foundation of harmonic analysis.",lZ=[{type:"info",title:"Chords from the Scale",description:`Every major scale produces 7 chords when you stack 3rds from each note. In C major:

 I = C (major)
 ii = Dm (minor)
 iii = Em (minor)
 IV = F (major)
 V = G (major)
 vi = Am (minor)
 vii = Bdim (diminished)

Uppercase = major, lowercase = minor. This pattern is the same in every major key!`},{type:"play-chord",title:"I  C Major",description:"The tonic chord. This is 'home'  the most stable, resolved-sounding chord.",expectedChord:{root:"C",quality:"maj",display:"C"},hint:"C (60) + E (64) + G (67)"},{type:"play-chord",title:"ii  D Minor",description:"The supertonic. Often leads to the V chord. Very common in pop progressions.",expectedChord:{root:"D",quality:"m",display:"Dm"},hint:"D (62) + F (65) + A (69)"},{type:"play-chord",title:"iii  E Minor",description:"The mediant. Can substitute for the I chord and adds a subtle sadness.",expectedChord:{root:"E",quality:"m",display:"Em"},hint:"E (64) + G (67) + B (71)"},{type:"play-chord",title:"IV  F Major",description:"The subdominant. Feels like moving away from home. One of the three primary chords.",expectedChord:{root:"F",quality:"maj",display:"F"},hint:"F (65) + A (69) + C (72)"},{type:"play-chord",title:"V  G Major",description:"The dominant. Creates the strongest pull back to the I chord. Essential for cadences.",expectedChord:{root:"G",quality:"maj",display:"G"},hint:"G (67) + B (71) + D (74)"},{type:"play-chord",title:"vi  A Minor",description:"The submediant. The relative minor chord. Used heavily in pop (I-V-vi-IV).",expectedChord:{root:"A",quality:"m",display:"Am"},hint:"A (69) + C (72) + E (76)"},{type:"play-chord",title:"vii  B Diminished",description:"The leading tone chord. Tense and rare, but it leads strongly to C major.",expectedChord:{root:"B",quality:"dim",display:"Bdim"},hint:"B (71) + D (74) + F (77)"},{type:"quiz",title:"Diatonic Quiz",description:"In a major key, which chords are minor?",quizOptions:[{label:"I, IV, V",correct:!1},{label:"ii, iii, vi",correct:!0},{label:"ii, IV, vi",correct:!1},{label:"iii, V, vii",correct:!1}]}],cZ={id:nZ,title:sZ,category:iZ,difficulty:rZ,estimatedMinutes:aZ,description:oZ,steps:lZ},uZ="theory-rhythm-basics",dZ="Rhythm Basics",hZ="theory",fZ="beginner",pZ=5,mZ="Learn about beats, measures, and 4/4 time  the rhythmic foundation of most music.",gZ=[{type:"info",title:"What is Rhythm?",description:"Rhythm is the pattern of sounds in time. The most basic element is the beat  a steady pulse, like a heartbeat. Beats are grouped into measures (bars). Most popular music uses 4/4 time: 4 beats per measure."},{type:"info",title:"4/4 Time",description:`4/4 means:
 Top number (4): 4 beats per measure
 Bottom number (4): a quarter note gets one beat

Count along: 1-2-3-4, 1-2-3-4. The '1' is always the strongest beat. '3' is slightly strong. '2' and '4' are the weak beats (where the snare goes in rock music).`},{type:"play-drums",title:"Beat 1: The Downbeat",description:"The kick drum typically marks beat 1  the strongest beat in the measure. Hit the kick.",expectedDrumPattern:{pads:[0]},hint:"KCK is pad 0."},{type:"play-drums",title:"The Backbeat (2 & 4)",description:"The snare on beats 2 and 4 is called the 'backbeat'. It's the heart of rock and pop rhythm.",expectedDrumPattern:{pads:[1]},hint:"SNR is pad 1."},{type:"play-drums",title:"The Pulse",description:"The hi-hat plays on every beat (or every half-beat) to keep the pulse steady. It's like a clock.",expectedDrumPattern:{pads:[2]},hint:"CHH is pad 2."},{type:"play-drums",title:"Full 4/4 Beat",description:"Now combine them: kick, snare, and hi-hat together. This is the core of a 4/4 beat.",expectedDrumPattern:{pads:[0,1,2]},hint:"Hit KCK, SNR, and CHH together."},{type:"quiz",title:"Rhythm Quiz",description:"In 4/4 time, how many beats are in one measure?",quizOptions:[{label:"2",correct:!1},{label:"3",correct:!1},{label:"4",correct:!0},{label:"6",correct:!1}]}],yZ={id:uZ,title:dZ,category:hZ,difficulty:fZ,estimatedMinutes:pZ,description:mZ,steps:gZ},vZ="theory-octaves-and-pitch",bZ="Octaves & Pitch",xZ="theory",_Z="beginner",wZ=5,SZ="Understand octaves, pitch, and how notes relate across the keyboard.",CZ=[{type:"info",title:"What is Pitch?",description:"Pitch is how high or low a note sounds. It's determined by the frequency of vibration  faster vibrations = higher pitch. On the piano, notes get higher as you move right and lower as you move left. The distance of 12 semitones (all the keys in one group) is called an octave."},{type:"play-notes",title:"Low C",description:"Play C3  a low C. Listen to its deep, warm tone.",expectedNotes:[{midi:48,label:"C3"}],hint:"C3 is MIDI note 48."},{type:"play-notes",title:"Middle C",description:"Now play C4 (middle C). It's one octave higher  same note name, but brighter.",expectedNotes:[{midi:60,label:"C4"}],hint:"C4 is MIDI note 60."},{type:"play-notes",title:"High C",description:"Play C5  two octaves above C3. Notice how it sounds distinctly higher but still 'C'.",expectedNotes:[{midi:72,label:"C5"}],hint:"C5 is MIDI note 72."},{type:"play-notes",title:"Two Octaves Together",description:"Play C3 and C5 together. Even though they're 24 semitones apart, they blend perfectly because they're the same note in different octaves.",expectedNotes:[{midi:48,label:"C3"},{midi:72,label:"C5"}],hint:"C3 (48) and C5 (72)  two octaves apart."},{type:"info",title:"Why Do Octaves Sound 'Same'?",description:"When you go up one octave, the frequency exactly doubles. C4 vibrates at ~262 Hz, C5 at ~523 Hz. This 2:1 ratio is the simplest in music, which is why octaves sound so perfectly matched  our brains perceive them as the 'same' note at different heights."},{type:"play-notes",title:"Octave E's",description:"Play E3 and E4 together  an octave of E.",expectedNotes:[{midi:52,label:"E3"},{midi:64,label:"E4"}],hint:"E3 (52) and E4 (64)."},{type:"quiz",title:"Octave Quiz",description:"How many semitones are in one octave?",quizOptions:[{label:"7",correct:!1},{label:"8",correct:!1},{label:"10",correct:!1},{label:"12",correct:!0}]}],TZ={id:vZ,title:bZ,category:xZ,difficulty:_Z,estimatedMinutes:wZ,description:SZ,steps:CZ},EZ="theory-harmonic-minor-modes",AZ="Modes & Harmonic Minor",kZ="theory",NZ="intermediate",MZ=8,RZ="Explore Dorian, Mixolydian, and the harmonic minor scale  expanding your musical palette.",DZ=[{type:"info",title:"What are Modes?",description:`Modes are scales built by starting on different notes of the major scale. Each mode has a unique flavor:

 Dorian: starts on the 2nd note  minor but brighter (jazz, funk)
 Mixolydian: starts on the 5th note  major but bluesy (rock, blues)

Think of it as seeing the same 7 notes from a different perspective.`},{type:"play-scale",title:"D Dorian",description:"Play D Dorian: D-E-F-G-A-B-C. Same notes as C major, but starting on D. It sounds minor but with a brighter 6th note (B instead of Bb).",expectedScale:{root:2,name:"Dorian",notes:[2,4,5,7,9,11,0]},hint:"All white keys from D to C."},{type:"play-chord",title:"Dorian Home Chord: D Minor",description:"The Dorian mode is based on a minor chord. Play Dm.",expectedChord:{root:"D",quality:"m",display:"Dm"},hint:"D (62) + F (65) + A (69)"},{type:"play-scale",title:"G Mixolydian",description:"Play G Mixolydian: G-A-B-C-D-E-F. Same notes as C major, but starting on G. It sounds major but with a flat 7th (F instead of F#).",expectedScale:{root:7,name:"Mixolydian",notes:[7,9,11,0,2,4,5]},hint:"All white keys from G to F."},{type:"play-chord",title:"Mixolydian Home Chord: G Major",description:"Mixolydian is based on a major chord. Play G major.",expectedChord:{root:"G",quality:"maj",display:"G"},hint:"G (67) + B (71) + D (74)"},{type:"info",title:"The Harmonic Minor Scale",description:"The harmonic minor scale takes the natural minor and raises the 7th note by one semitone. In A: A-B-C-D-E-F-G#. That raised 7th (G#) creates a dramatic 1.5-step gap between F and G#  giving it a distinctive, exotic sound used in classical, metal, and Middle Eastern music."},{type:"play-scale",title:"A Harmonic Minor",description:"Play A harmonic minor: A-B-C-D-E-F-G#. Notice the exotic leap from F to G#!",expectedScale:{root:9,name:"Harmonic Minor",notes:[9,11,0,2,4,5,8]},hint:"A (69), B (71), C (72), D (74), E (76), F (77), G# (80)"},{type:"quiz",title:"Modes Quiz",description:"D Dorian uses the same notes as which major scale?",quizOptions:[{label:"D major",correct:!1},{label:"C major",correct:!0},{label:"G major",correct:!1},{label:"A major",correct:!1}]}],OZ={id:EZ,title:AZ,category:kZ,difficulty:NZ,estimatedMinutes:MZ,description:RZ,steps:DZ},Sw=[R$,V$,$$,tY,cY,yY,TY,OY,FY,KY,sK,dK,bK,AK,PK,UK,QK,rX,fX,_X,NX,BX,qX,JX,oQ,mQ,SQ,RQ,VQ,yZ,TZ,$Q,tZ,cZ,OZ];function jZ(t){return t?Sw.filter(e=>e.category===t):Sw}function PZ({activeNotes:t,onNoteOn:e,onNoteOff:n,activePads:s,onDrumHit:i,detectedChord:r}){const[a,o]=g.useState(null),l=S$(t,s),c=jZ(a??void 0);return l.activeLesson&&l.currentStep?f.jsx(v$,{lesson:l.activeLesson,currentStep:l.currentStep,currentStepIndex:l.currentStepIndex,totalSteps:l.totalSteps,stepCompleted:l.stepCompleted,activeNotes:t,onNoteOn:e,onNoteOff:n,activePads:s,onDrumHit:i,detectedChord:r,onNext:l.nextStep,onPrev:l.prevStep,onExit:l.exitLesson,onQuizAnswer:l.completeQuiz}):f.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[f.jsxs("div",{className:"border-b border-border/50 px-6 py-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Bv,{className:"h-5 w-5 text-muted-foreground"}),f.jsx("h1",{className:"text-lg font-bold",children:"Learn"})]}),f.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Structured lessons to learn piano, drums, and music theory"}),f.jsx("div",{className:"mt-3",children:f.jsx(a$,{selected:a,onChange:o})})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:[f.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3",children:c.map(u=>f.jsx(c$,{lesson:u,isCompleted:l.isLessonCompleted(u.id),onClick:()=>l.startLesson(u)},u.id))}),c.length===0&&f.jsx("p",{className:"mt-8 text-center text-sm text-muted-foreground",children:"No lessons in this category yet."})]})]})}function IZ({icon:t,title:e,description:n,color:s,onClick:i}){return f.jsxs("button",{onClick:i,className:"flex flex-col gap-3 rounded-xl border border-border/50 p-5 text-left transition-all duration-150 hover:border-border hover:bg-card/60",style:{backgroundColor:"oklch(0.14 0.01 270)"},children:[f.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg",style:{backgroundColor:`color-mix(in oklch, ${s} 20%, transparent)`},children:f.jsx(t,{className:"h-5 w-5",style:{color:s}})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-semibold text-foreground",children:e}),f.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:n})]})]})}const BZ=[{value:null,label:"All"},{value:"piano-basics",label:"Piano Basics"},{value:"scales",label:"Scales"},{value:"chords",label:"Chords"},{value:"rhythm",label:"Rhythm"},{value:"drum-patterns",label:"Drum Patterns"}];function LZ({selected:t,onChange:e}){return f.jsx("div",{className:"flex flex-wrap gap-1",children:BZ.map(n=>f.jsx("button",{onClick:()=>e(n.value),className:ee("rounded-md px-3 py-1.5 text-xs font-medium transition-colors",t===n.value?"bg-primary text-primary-foreground":"bg-secondary text-muted-foreground hover:text-foreground"),children:n.label},n.label))})}const VZ={"piano-basics":Hh,scales:EA,chords:CA,rhythm:Hv,"drum-patterns":Iv},zZ={beginner:"bg-green-500/20 text-green-400",intermediate:"bg-yellow-500/20 text-yellow-400"};function FZ({stars:t}){return f.jsx("div",{className:"flex gap-0.5",children:[1,2,3].map(e=>f.jsx(TA,{className:ee("h-3.5 w-3.5",e<=t?"fill-yellow-400 text-yellow-400":"text-muted-foreground/30")},e))})}function HZ({exercise:t,score:e,onClick:n}){const s=VZ[t.category];return f.jsxs("button",{onClick:n,className:ee("group flex flex-col gap-3 rounded-xl border border-border/50 p-4 text-left","transition-all duration-150 hover:border-border hover:bg-card/60",e&&e.bestStars>0&&"border-yellow-500/20"),style:{backgroundColor:"oklch(0.14 0.01 270)"},children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg",style:{backgroundColor:"oklch(0.20 0.02 270)"},children:f.jsx(s,{className:"h-4.5 w-4.5 text-muted-foreground"})}),e&&e.bestStars>0&&f.jsx(FZ,{stars:e.bestStars})]}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-semibold text-foreground",children:t.title}),f.jsx("p",{className:"mt-1 text-xs text-muted-foreground line-clamp-1",children:t.description})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:ee("rounded-md px-2 py-0.5 text-[10px] font-medium",zZ[t.difficulty]),children:t.difficulty}),e&&e.attempts>0&&f.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[e.attempts," attempt",e.attempts!==1?"s":""]})]})]})}const ab=[{name:"Major",intervals:[0,2,4,5,7,9,11]},{name:"Natural Minor",intervals:[0,2,3,5,7,8,10]},{name:"Harmonic Minor",intervals:[0,2,3,5,7,8,11]},{name:"Dorian",intervals:[0,2,3,5,7,9,10]},{name:"Mixolydian",intervals:[0,2,4,5,7,9,10]},{name:"Pentatonic Major",intervals:[0,2,4,7,9]},{name:"Pentatonic Minor",intervals:[0,3,5,7,10]},{name:"Blues",intervals:[0,3,5,6,7,10]},{name:"Chromatic",intervals:[0,1,2,3,4,5,6,7,8,9,10,11]},{name:"Melodic Minor",intervals:[0,2,3,5,7,9,11]}],UZ=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function GZ(t,e){return new Set(e.intervals.map(n=>(t+n)%12))}function qZ(){return UZ.map((t,e)=>({value:e,label:t}))}function WZ(){return ab.map(t=>({value:t.name,label:t.name}))}function MM({activeNotes:t,onNoteOn:e,onNoteOff:n,highlightedNotes:s,selectedRoot:i,setSelectedRoot:r,selectedScale:a,setSelectedScale:o,exercise:l,onNoteHit:c,onSequenceComplete:u}){var E;const d=qZ(),h=WZ(),p=!!l,m=l==null?void 0:l.config.targetNotes;g.useEffect(()=>{l&&(l.config.scaleRoot!==void 0&&r(l.config.scaleRoot),l.config.scaleName&&o(l.config.scaleName))},[l,r,o]);const[y,x]=g.useState(0);g.useRef(new Set);const v=g.useMemo(()=>m?new Set(m.map(C=>C.midi)):s,[m,s]),b=m==null?void 0:m[y],_=g.useCallback((C,M)=>{if(e(C,M),m&&b){const A=C===b.midi;if(c==null||c(C,A),A){const k=y+1;k>=m.length?(x(k),u==null||u()):x(k)}}else if(p&&(l!=null&&l.config.scaleName)){const A=v,k=A.has(C%12)||A.has(C);c==null||c(C,k)}},[e,m,b,y,c,u,p,l,v]);g.useEffect(()=>{x(0)},[l==null?void 0:l.id]);const w=m?v:s,S=(l==null?void 0:l.config.scaleRoot)??i,T=(l==null?void 0:l.config.scaleName)??a;return f.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-6",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-sm font-semibold text-muted-foreground",children:p?l.title:"Scale Practice"}),f.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:(l==null?void 0:l.config.instructions)??"Select a root note and scale  highlighted keys show the scale tones"})]}),!p&&f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("label",{className:"text-xs text-muted-foreground",children:"Root:"}),f.jsx("select",{className:"rounded-md bg-secondary px-2 py-1 text-xs",value:i,onChange:C=>r(Number(C.target.value)),children:d.map(C=>f.jsx("option",{value:C.value,children:C.label},C.value))})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("label",{className:"text-xs text-muted-foreground",children:"Scale:"}),f.jsxs("select",{className:"rounded-md bg-secondary px-2 py-1 text-xs",value:a??"",onChange:C=>o(C.target.value||null),children:[f.jsx("option",{value:"",children:"None"}),h.map(C=>f.jsx("option",{value:C.value,children:C.label},C.value))]})]})]}),m&&f.jsx("div",{className:"flex flex-wrap items-center gap-1.5",children:m.map((C,M)=>f.jsx("span",{className:"rounded-md px-2 py-1 text-xs font-medium transition-colors",style:{backgroundColor:M<y?"oklch(0.30 0.15 150)":M===y?"oklch(0.30 0.12 270)":"oklch(0.18 0.01 270)",color:M<=y?"white":"oklch(0.55 0.01 270)"},children:C.label},M))}),!m&&T&&f.jsxs("div",{className:"text-xs text-muted-foreground",children:["Notes: ",(E=ab.find(C=>C.name===T))==null?void 0:E.intervals.map(C=>["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][(S+C)%12]).join(", ")]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsx(xr,{activeNotes:t,onNoteOn:_,onNoteOff:n,highlightedNotes:w,compact:!0})})]})}function RM({activeNotes:t,onNoteOn:e,onNoteOff:n,detectedChord:s,exercise:i,onChordMatch:r,onSequenceComplete:a}){const o=!!i,l=i==null?void 0:i.config.targetChords,[c,u]=g.useState(0),d=g.useRef(null),h=g.useRef(!0),p=l==null?void 0:l[c];return g.useEffect(()=>{u(0),d.current=null,h.current=!0},[i==null?void 0:i.id]),g.useEffect(()=>{if(!l||!p||!s||c>=l.length)return;if(t.size===0){h.current=!0;return}if(!h.current)return;const m=`${s.root}-${s.quality}`;if(m===d.current)return;d.current=m;const y=s.root===p.root&&s.quality===p.quality;if(r==null||r(y),h.current=!1,y){const x=c+1;x>=l.length?(u(x),a==null||a()):u(x)}},[s,t.size,l,p,c,r,a]),f.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-6",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-sm font-semibold text-muted-foreground",children:o?i.title:"Detected Chord"}),(i==null?void 0:i.config.instructions)&&f.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:i.config.instructions}),f.jsx("div",{className:"mt-2 flex h-24 items-center justify-center rounded-xl",style:{backgroundColor:"oklch(0.14 0.01 270)"},children:s?f.jsx("span",{className:"text-4xl font-bold",children:s.display}):f.jsx("span",{className:"text-lg text-muted-foreground",children:"Play a chord..."})}),s&&f.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[f.jsxs("span",{className:"text-xs text-muted-foreground",children:["Root: ",s.root]}),f.jsxs("span",{className:"text-xs text-muted-foreground",children:["Quality: ",s.quality]}),f.jsxs("span",{className:"text-xs text-muted-foreground",children:["Notes: ",Array.from(t.keys()).sort((m,y)=>m-y).map(m=>["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][m%12]).join(", ")]})]})]}),l&&f.jsx("div",{className:"flex flex-wrap items-center gap-1.5",children:l.map((m,y)=>f.jsx("span",{className:"rounded-md px-3 py-1.5 text-xs font-medium transition-colors",style:{backgroundColor:y<c?"oklch(0.30 0.15 150)":y===c?"oklch(0.30 0.12 270)":"oklch(0.18 0.01 270)",color:y<=c?"white":"oklch(0.55 0.01 270)"},children:m.display},y))}),f.jsx("div",{className:"overflow-x-auto",children:f.jsx(xr,{activeNotes:t,onNoteOn:e,onNoteOff:n,compact:!0})})]})}function DM({currentBeat:t,isRunning:e}){const n=t%4;return f.jsx("div",{className:"flex items-center gap-2",children:[0,1,2,3].map(s=>f.jsx("div",{className:"h-4 w-4 rounded-full transition-all duration-100",style:{backgroundColor:e&&n===s?s===0?"oklch(0.75 0.25 25)":"oklch(0.70 0.20 270)":"oklch(0.20 0.02 270)",boxShadow:e&&n===s?`0 0 8px ${s===0?"oklch(0.75 0.25 25)":"oklch(0.70 0.20 270)"}`:"none",transform:e&&n===s?"scale(1.3)":"scale(1)"}},s))})}function OM({accuracy:t}){const e=Math.round(t*100),n=t*120;return f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:"text-xs text-muted-foreground",children:"Accuracy"}),f.jsx("div",{className:"h-2 w-24 rounded-full bg-secondary",children:f.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${e}%`,backgroundColor:`oklch(0.65 0.20 ${n})`}})}),f.jsxs("span",{className:"text-xs font-medium",style:{color:`oklch(0.75 0.18 ${n})`},children:[e,"%"]})]})}const $Z=30,YZ=80,KZ=150;function jM(t=120){const e=typeof t=="number"?{bpm:t}:t,n=e.bpm??120,s=e.totalBeats,i=e.subdivision??"4n",r=e.onComplete,[a,o]=g.useState(!1),[l,c]=g.useState(0),[u,d]=g.useState([]),h=g.useRef([]),p=g.useRef(null),m=g.useRef(0),y=g.useRef(!1),x=g.useRef([]),v=g.useCallback(()=>{var T,E;(T=p.current)==null||T.stop(),(E=p.current)==null||E.dispose(),p.current=null,rn().stop(),o(!1)},[]),b=g.useCallback(()=>{rn().bpm.value=n,h.current=[],x.current=[],d([]),c(0),m.current=0,y.current=!1;const T=new Of(E=>{h.current.push(E*1e3),m.current+=1;const C=m.current;c(C),s&&C>=s&&setTimeout(()=>{if(!y.current){y.current=!0,v();const M=x.current,A=M.length>0?M.filter(k=>k.timing==="perfect"||k.timing==="good").length/M.length:0;r==null||r(A,M)}},200)},i);p.current=T,T.start(0),rn().start(),o(!0)},[n,s,i,r,v]),_=g.useCallback(()=>{v()},[v]),w=g.useCallback(()=>{if(!a||h.current.length===0)return null;const T=Zn()*1e3;let E=0,C=1/0;for(let D=0;D<h.current.length;D++){const O=Math.abs(T-h.current[D]);O<C&&(C=O,E=D)}const M=60/n*1e3,k=h.current[h.current.length-1]+M,N=Math.abs(T-k);N<C&&(C=N);const P=T-h.current[E];let j;C<=$Z?j="perfect":C<=YZ?j="good":C<=KZ?j=P<0?"early":"late":j="miss";const I={beat:E,timing:j,offsetMs:P};return x.current=[...x.current,I],d(x.current),I},[a,n]);g.useEffect(()=>()=>{var T,E;(T=p.current)==null||T.stop(),(E=p.current)==null||E.dispose()},[]);const S=u.length>0?u.filter(T=>T.timing==="perfect"||T.timing==="good").length/u.length:0;return{isRunning:a,currentBeat:l,feedbackHistory:u,accuracy:S,start:b,stop:_,recordHit:w}}function PM({activeNotes:t,onNoteOn:e,onNoteOff:n,bpm:s=120,totalBeats:i,subdivision:r="4n",onComplete:a}){const o=jM({bpm:s,totalBeats:i,subdivision:r,onComplete:a}),l=g.useCallback((u,d)=>{e(u,d),o.isRunning&&o.recordHit()},[e,o]),c=o.feedbackHistory[o.feedbackHistory.length-1];return f.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-6",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-sm font-semibold text-muted-foreground",children:"Rhythm Training"}),f.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:["Play notes on the beat. The metronome shows you the tempo  try to match it!",i&&` (${i} beats at ${s} BPM)`]})]}),f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsx(Te,{size:"sm",variant:o.isRunning?"destructive":"default",onClick:o.isRunning?o.stop:o.start,children:o.isRunning?f.jsxs(f.Fragment,{children:[f.jsx(zv,{className:"mr-1 h-3.5 w-3.5"})," Stop"]}):f.jsxs(f.Fragment,{children:[f.jsx(Uh,{className:"mr-1 h-3.5 w-3.5"})," Start"]})}),f.jsx(DM,{currentBeat:o.currentBeat,isRunning:o.isRunning}),i&&f.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.min(o.currentBeat,i)," / ",i]}),o.feedbackHistory.length>0&&f.jsx(OM,{accuracy:o.accuracy})]}),c&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"rounded-md px-2 py-1 text-xs font-medium",style:{backgroundColor:c.timing==="perfect"?"oklch(0.30 0.15 150)":c.timing==="good"?"oklch(0.30 0.12 90)":c.timing==="early"?"oklch(0.30 0.12 270)":c.timing==="late"?"oklch(0.30 0.12 40)":"oklch(0.30 0.12 25)"},children:c.timing.toUpperCase()}),f.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.abs(Math.round(c.offsetMs)),"ms ",c.offsetMs<0?"early":"late"]})]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsx(xr,{activeNotes:t,onNoteOn:l,onNoteOff:n,compact:!0})})]})}const XZ=["KCK","SNR","CHH","OHH","CLP","TOM","CRS","RDE"],QZ=[[0,2],[1,2],[0,2],[1,2]];function IM({activePads:t,onDrumHit:e,pattern:n=QZ,bpm:s=100,totalBeats:i,patternName:r="Rock Beat",onComplete:a}){const o=jM({bpm:s,totalBeats:i,onComplete:a}),l=o.currentBeat%n.length,c=new Set(n[l]??[]),u=g.useCallback((d,h)=>{e(d,h),o.isRunning&&o.recordHit()},[e,o]);return f.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-6",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-sm font-semibold text-muted-foreground",children:"Drum Pattern Practice"}),f.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:["Follow the highlighted drum pads. Hit them in time with the metronome!",i&&` (${i} beats at ${s} BPM)`]})]}),f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsx(Te,{size:"sm",variant:o.isRunning?"destructive":"default",onClick:o.isRunning?o.stop:o.start,children:o.isRunning?f.jsxs(f.Fragment,{children:[f.jsx(zv,{className:"mr-1 h-3.5 w-3.5"})," Stop"]}):f.jsxs(f.Fragment,{children:[f.jsx(Uh,{className:"mr-1 h-3.5 w-3.5"})," Start"]})}),f.jsx(DM,{currentBeat:o.currentBeat,isRunning:o.isRunning}),i&&f.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.min(o.currentBeat,i)," / ",i]}),o.feedbackHistory.length>0&&f.jsx(OM,{accuracy:o.accuracy})]}),f.jsxs("div",{className:"rounded-lg p-3",style:{backgroundColor:"oklch(0.14 0.01 270)"},children:[f.jsxs("p",{className:"mb-2 text-xs font-medium text-muted-foreground",children:[r," Pattern:"]}),f.jsx("div",{className:"grid gap-2 text-center text-xs",style:{gridTemplateColumns:`repeat(${n.length}, 1fr)`},children:n.map((d,h)=>f.jsxs("div",{className:"rounded-md py-1 transition-colors",style:{backgroundColor:o.isRunning&&l===h?"oklch(0.25 0.10 270)":"oklch(0.18 0.01 270)"},children:[f.jsxs("div",{className:"font-medium",children:["Beat ",h+1]}),f.jsx("div",{className:"text-muted-foreground",children:d.map(p=>XZ[p]).join(" + ")})]},h))})]}),f.jsx("div",{className:"w-[320px]",children:f.jsx(If,{activePads:t,onHit:u,highlightedPads:o.isRunning?c:void 0})})]})}const ZZ={3:"Excellent! Perfect score!",2:"Great job! Keep practicing!",1:"Good start! Try again for more stars!",0:"Keep trying! You can do it!"};function JZ({accuracy:t,stars:e,onRetry:n,onBack:s}){return f.jsxs("div",{className:"flex flex-col items-center gap-6 p-8",children:[f.jsx("h2",{className:"text-lg font-bold",children:"Exercise Complete!"}),f.jsx("div",{className:"flex gap-2",children:[1,2,3].map(i=>f.jsx(TA,{className:ee("h-10 w-10 transition-all",i<=e?"fill-yellow-400 text-yellow-400 drop-shadow-[0_0_8px_oklch(0.80_0.18_90)]":"text-muted-foreground/20")},i))}),f.jsxs("div",{className:"text-center",children:[f.jsxs("div",{className:"text-3xl font-bold",children:[Math.round(t*100),"%"]}),f.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:ZZ[e]})]}),f.jsxs("div",{className:"flex gap-3",children:[f.jsxs(Te,{variant:"outline",size:"sm",onClick:n,children:[f.jsx(DI,{className:"mr-1 h-3.5 w-3.5"}),"Try Again"]}),f.jsxs(Te,{variant:"default",size:"sm",onClick:s,children:[f.jsx(yo,{className:"mr-1 h-3.5 w-3.5"}),"Back to Exercises"]})]})]})}function eJ(t){const[e,n]=g.useState(!1),[s,i]=g.useState(null),r=g.useRef(0),a=g.useRef(0),o=g.useCallback(d=>{a.current+=1,d&&(r.current+=1)},[]),l=g.useCallback(d=>d>=t.threeStars?3:d>=t.twoStars?2:a.current>0?1:0,[t.threeStars,t.twoStars]),c=g.useCallback(d=>{const h=d??(a.current>0?r.current/a.current:0),p=l(h),m={accuracy:h,stars:p};return i(m),n(!0),m},[l]),u=g.useCallback(()=>{r.current=0,a.current=0,n(!1),i(null)},[]);return{finished:e,result:s,recordEvent:o,finish:c,reset:u}}function tJ({exercise:t,onExit:e,onSaveScore:n,activeNotes:s,onNoteOn:i,onNoteOff:r,activePads:a,onDrumHit:o,detectedChord:l,highlightedNotes:c,selectedRoot:u,setSelectedRoot:d,selectedScale:h,setSelectedScale:p}){const m=eJ(t.scoring),y=g.useCallback((w,S)=>{m.recordEvent(S)},[m]),x=g.useCallback(w=>{m.recordEvent(w)},[m]),v=g.useCallback(()=>{const w=m.finish();n(t.id,w.stars,w.accuracy)},[m,t.id,n]),b=g.useCallback((w,S)=>{const T=m.finish(w);n(t.id,T.stars,T.accuracy)},[m,t.id,n]),_=g.useCallback(()=>{m.reset()},[m]);return m.finished&&m.result?f.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[f.jsxs("div",{className:"flex items-center gap-3 border-b border-border/50 px-6 py-3",children:[f.jsx(Te,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:e,title:"Back to exercises",children:f.jsx(yo,{className:"h-4 w-4"})}),f.jsx("h2",{className:"text-sm font-semibold",children:t.title})]}),f.jsx("div",{className:"flex flex-1 items-center justify-center",children:f.jsx(JZ,{accuracy:m.result.accuracy,stars:m.result.stars,onRetry:_,onBack:e})})]}):f.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[f.jsxs("div",{className:"flex items-center gap-3 border-b border-border/50 px-6 py-3",children:[f.jsx(Te,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:e,title:"Back to exercises",children:f.jsx(yo,{className:"h-4 w-4"})}),f.jsx("h2",{className:"text-sm font-semibold",children:t.title})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto",children:[t.activity==="scale-practice"&&f.jsx(MM,{activeNotes:s,onNoteOn:i,onNoteOff:r,highlightedNotes:c,selectedRoot:u,setSelectedRoot:d,selectedScale:h,setSelectedScale:p,exercise:t,onNoteHit:y,onSequenceComplete:v}),t.activity==="chord-detection"&&f.jsx(RM,{activeNotes:s,onNoteOn:i,onNoteOff:r,detectedChord:l,exercise:t,onChordMatch:x,onSequenceComplete:v}),t.activity==="rhythm-training"&&f.jsx(PM,{activeNotes:s,onNoteOn:i,onNoteOff:r,bpm:t.config.bpm,totalBeats:t.config.totalBeats,subdivision:t.config.subdivision,onComplete:b}),t.activity==="drum-patterns"&&f.jsx(IM,{activePads:a,onDrumHit:o,pattern:t.config.pattern,bpm:t.config.bpm,totalBeats:t.config.totalBeats,patternName:t.config.patternName,onComplete:b})]})]})}function nJ({activeNotes:t,onNoteOn:e,onNoteOff:n,activePads:s,onDrumHit:i,detectedChord:r}){return f.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-6",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-sm font-semibold text-muted-foreground",children:"Free Play"}),f.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Play freely with piano and drums. Chords are detected automatically."})]}),f.jsx("div",{className:"flex h-16 items-center justify-center rounded-xl",style:{backgroundColor:"oklch(0.14 0.01 270)"},children:r?f.jsx("span",{className:"text-3xl font-bold",children:r.display}):f.jsx("span",{className:"text-sm text-muted-foreground",children:"Play notes to detect chords"})}),f.jsxs("div",{className:"flex gap-4",children:[f.jsx("div",{className:"w-[220px] shrink-0",children:f.jsx(If,{activePads:s,onHit:i})}),f.jsx("div",{className:"flex-1 overflow-x-auto",children:f.jsx(xr,{activeNotes:t,onNoteOn:e,onNoteOff:n,compact:!0})})]})]})}function sJ(){const[t,e]=g.useState(null),[n,s]=g.useState(null),i=g.useCallback(o=>{s(null),e({activity:o})},[]),r=g.useCallback(o=>{e(null),s(o)},[]),a=g.useCallback(()=>{e(null),s(null)},[]);return{config:t,activeExercise:n,startActivity:i,startExercise:r,exitActivity:a}}const BM="micro-daw-practice-progress";function iJ(){try{const t=localStorage.getItem(BM);if(t)return JSON.parse(t)}catch{}return{}}function rJ(t){localStorage.setItem(BM,JSON.stringify(t))}function aJ(){const[t,e]=g.useState(iJ),n=g.useCallback(i=>t[i],[t]),s=g.useCallback((i,r,a)=>{e(o=>{const l=o[i],c={...o,[i]:{bestStars:l?Math.max(l.bestStars,r):r,bestAccuracy:l?Math.max(l.bestAccuracy,a):a,attempts:((l==null?void 0:l.attempts)??0)+1}};return rJ(c),c})},[]);return{scores:t,getScore:n,saveScore:s}}const oJ=[{id:"piano-find-c",title:"Find Middle C",description:"Press the Middle C key (C4)",category:"piano-basics",difficulty:"beginner",activity:"scale-practice",config:{targetNotes:[{midi:60,label:"C4"}],requiredCount:1,instructions:"Find and press the Middle C key (C4) on the piano."},scoring:{type:"note-sequence",threeStars:.9,twoStars:.7}},{id:"piano-white-keys-cg",title:"White Keys: C to G",description:"Play C-D-E-F-G in order",category:"piano-basics",difficulty:"beginner",activity:"scale-practice",config:{targetNotes:[{midi:60,label:"C4"},{midi:62,label:"D4"},{midi:64,label:"E4"},{midi:65,label:"F4"},{midi:67,label:"G4"}],requiredCount:1,instructions:"Play the white keys from C to G in order."},scoring:{type:"note-sequence",threeStars:.9,twoStars:.7}},{id:"piano-cde-pattern",title:"C-D-E Repeating",description:"Play C-D-E pattern 3 times",category:"piano-basics",difficulty:"beginner",activity:"scale-practice",config:{targetNotes:[{midi:60,label:"C4"},{midi:62,label:"D4"},{midi:64,label:"E4"},{midi:60,label:"C4"},{midi:62,label:"D4"},{midi:64,label:"E4"},{midi:60,label:"C4"},{midi:62,label:"D4"},{midi:64,label:"E4"}],requiredCount:1,instructions:"Play the C-D-E pattern three times in a row."},scoring:{type:"note-sequence",threeStars:.9,twoStars:.7}},{id:"piano-fgab-pattern",title:"F-G-A-B Pattern",description:"Play F-G-A-B pattern 3 times",category:"piano-basics",difficulty:"beginner",activity:"scale-practice",config:{targetNotes:[{midi:65,label:"F4"},{midi:67,label:"G4"},{midi:69,label:"A4"},{midi:71,label:"B4"},{midi:65,label:"F4"},{midi:67,label:"G4"},{midi:69,label:"A4"},{midi:71,label:"B4"},{midi:65,label:"F4"},{midi:67,label:"G4"},{midi:69,label:"A4"},{midi:71,label:"B4"}],requiredCount:1,instructions:"Play the F-G-A-B pattern three times in a row."},scoring:{type:"note-sequence",threeStars:.9,twoStars:.7}},{id:"piano-full-octave",title:"Full Octave: C4-C5",description:"Play all white keys from C4 to C5",category:"piano-basics",difficulty:"beginner",activity:"scale-practice",config:{targetNotes:[{midi:60,label:"C4"},{midi:62,label:"D4"},{midi:64,label:"E4"},{midi:65,label:"F4"},{midi:67,label:"G4"},{midi:69,label:"A4"},{midi:71,label:"B4"},{midi:72,label:"C5"}],requiredCount:1,instructions:"Play all the white keys from C4 up to C5."},scoring:{type:"note-sequence",threeStars:.9,twoStars:.7}},{id:"piano-octave-jump",title:"Octave Jumps",description:"Alternate between C4 and C5",category:"piano-basics",difficulty:"beginner",activity:"scale-practice",config:{targetNotes:[{midi:60,label:"C4"},{midi:72,label:"C5"},{midi:60,label:"C4"},{midi:72,label:"C5"},{midi:60,label:"C4"},{midi:72,label:"C5"}],requiredCount:1,instructions:"Alternate between C4 and C5 three times."},scoring:{type:"note-sequence",threeStars:.9,twoStars:.7}}],lJ=[{id:"scale-c-major",title:"C Major Scale",description:"Play the C Major scale ascending",category:"scales",difficulty:"beginner",activity:"scale-practice",config:{scaleRoot:0,scaleName:"Major",instructions:"Play the C Major scale up one octave. Highlighted keys show the scale tones."},scoring:{type:"note-accuracy",threeStars:.9,twoStars:.7}},{id:"scale-g-major",title:"G Major Scale",description:"Play the G Major scale ascending",category:"scales",difficulty:"beginner",activity:"scale-practice",config:{scaleRoot:7,scaleName:"Major",instructions:"Play the G Major scale up one octave. Watch for the F#!"},scoring:{type:"note-accuracy",threeStars:.9,twoStars:.7}},{id:"scale-d-major",title:"D Major Scale",description:"Play the D Major scale ascending",category:"scales",difficulty:"beginner",activity:"scale-practice",config:{scaleRoot:2,scaleName:"Major",instructions:"Play the D Major scale. This scale has F# and C#."},scoring:{type:"note-accuracy",threeStars:.9,twoStars:.7}},{id:"scale-f-major",title:"F Major Scale",description:"Play the F Major scale ascending",category:"scales",difficulty:"beginner",activity:"scale-practice",config:{scaleRoot:5,scaleName:"Major",instructions:"Play the F Major scale. This scale has one flat: Bb."},scoring:{type:"note-accuracy",threeStars:.9,twoStars:.7}},{id:"scale-a-minor",title:"A Natural Minor",description:"Play the A Natural Minor scale",category:"scales",difficulty:"intermediate",activity:"scale-practice",config:{scaleRoot:9,scaleName:"Natural Minor",instructions:"Play the A Natural Minor scale. All white keys from A to A!"},scoring:{type:"note-accuracy",threeStars:.9,twoStars:.7}},{id:"scale-e-minor",title:"E Natural Minor",description:"Play the E Natural Minor scale",category:"scales",difficulty:"intermediate",activity:"scale-practice",config:{scaleRoot:4,scaleName:"Natural Minor",instructions:"Play the E Natural Minor scale. This has one sharp: F#."},scoring:{type:"note-accuracy",threeStars:.9,twoStars:.7}},{id:"scale-c-penta-major",title:"C Pentatonic Major",description:"Play the C Pentatonic Major scale",category:"scales",difficulty:"intermediate",activity:"scale-practice",config:{scaleRoot:0,scaleName:"Pentatonic Major",instructions:"Play the C Pentatonic Major scale  5 notes per octave. Great for improvisation!"},scoring:{type:"note-accuracy",threeStars:.9,twoStars:.7}},{id:"scale-a-penta-minor",title:"A Pentatonic Minor",description:"Play the A Pentatonic Minor scale",category:"scales",difficulty:"intermediate",activity:"scale-practice",config:{scaleRoot:9,scaleName:"Pentatonic Minor",instructions:"Play the A Pentatonic Minor scale  the most popular scale for blues and rock solos!"},scoring:{type:"note-accuracy",threeStars:.9,twoStars:.7}}],cJ=[{id:"chord-c-major",title:"C Major Chord",description:"Play the C Major chord 3 times",category:"chords",difficulty:"beginner",activity:"chord-detection",config:{targetChords:[{root:"C",quality:"maj",display:"Cmaj"},{root:"C",quality:"maj",display:"Cmaj"},{root:"C",quality:"maj",display:"Cmaj"}],instructions:"Play the C Major chord (C-E-G) three times."},scoring:{type:"chord-sequence",threeStars:.9,twoStars:.7}},{id:"chord-g-major",title:"G Major Chord",description:"Play the G Major chord 3 times",category:"chords",difficulty:"beginner",activity:"chord-detection",config:{targetChords:[{root:"G",quality:"maj",display:"Gmaj"},{root:"G",quality:"maj",display:"Gmaj"},{root:"G",quality:"maj",display:"Gmaj"}],instructions:"Play the G Major chord (G-B-D) three times."},scoring:{type:"chord-sequence",threeStars:.9,twoStars:.7}},{id:"chord-f-major",title:"F Major Chord",description:"Play the F Major chord 3 times",category:"chords",difficulty:"beginner",activity:"chord-detection",config:{targetChords:[{root:"F",quality:"maj",display:"Fmaj"},{root:"F",quality:"maj",display:"Fmaj"},{root:"F",quality:"maj",display:"Fmaj"}],instructions:"Play the F Major chord (F-A-C) three times."},scoring:{type:"chord-sequence",threeStars:.9,twoStars:.7}},{id:"chord-a-minor",title:"A Minor Chord",description:"Play the A Minor chord 3 times",category:"chords",difficulty:"beginner",activity:"chord-detection",config:{targetChords:[{root:"A",quality:"m",display:"Am"},{root:"A",quality:"m",display:"Am"},{root:"A",quality:"m",display:"Am"}],instructions:"Play the A Minor chord (A-C-E) three times."},scoring:{type:"chord-sequence",threeStars:.9,twoStars:.7}},{id:"chord-d-minor",title:"D Minor Chord",description:"Play the D Minor chord 3 times",category:"chords",difficulty:"beginner",activity:"chord-detection",config:{targetChords:[{root:"D",quality:"m",display:"Dm"},{root:"D",quality:"m",display:"Dm"},{root:"D",quality:"m",display:"Dm"}],instructions:"Play the D Minor chord (D-F-A) three times."},scoring:{type:"chord-sequence",threeStars:.9,twoStars:.7}},{id:"chord-e-minor",title:"E Minor Chord",description:"Play the E Minor chord 3 times",category:"chords",difficulty:"beginner",activity:"chord-detection",config:{targetChords:[{root:"E",quality:"m",display:"Em"},{root:"E",quality:"m",display:"Em"},{root:"E",quality:"m",display:"Em"}],instructions:"Play the E Minor chord (E-G-B) three times."},scoring:{type:"chord-sequence",threeStars:.9,twoStars:.7}},{id:"chord-prog-cgamf",title:"I-V-vi-IV Progression",description:"Play C - G - Am - F chord progression",category:"chords",difficulty:"intermediate",activity:"chord-detection",config:{targetChords:[{root:"C",quality:"maj",display:"Cmaj"},{root:"G",quality:"maj",display:"Gmaj"},{root:"A",quality:"m",display:"Am"},{root:"F",quality:"maj",display:"Fmaj"}],instructions:"Play the famous I-V-vi-IV progression: C  G  Am  F"},scoring:{type:"chord-sequence",threeStars:.9,twoStars:.7}},{id:"chord-prog-amfcg",title:"vi-IV-I-V Progression",description:"Play Am - F - C - G chord progression",category:"chords",difficulty:"intermediate",activity:"chord-detection",config:{targetChords:[{root:"A",quality:"m",display:"Am"},{root:"F",quality:"maj",display:"Fmaj"},{root:"C",quality:"maj",display:"Cmaj"},{root:"G",quality:"maj",display:"Gmaj"}],instructions:"Play the vi-IV-I-V progression: Am  F  C  G"},scoring:{type:"chord-sequence",threeStars:.9,twoStars:.7}}],uJ=[{id:"rhythm-slow",title:"Slow Quarter Notes",description:"Play on the beat at 80 BPM",category:"rhythm",difficulty:"beginner",activity:"rhythm-training",config:{bpm:80,totalBeats:16,subdivision:"4n",instructions:"Press any key on each beat. 16 beats at a relaxed 80 BPM."},scoring:{type:"rhythm-accuracy",threeStars:.85,twoStars:.6}},{id:"rhythm-medium",title:"Medium Quarter Notes",description:"Play on the beat at 100 BPM",category:"rhythm",difficulty:"beginner",activity:"rhythm-training",config:{bpm:100,totalBeats:16,subdivision:"4n",instructions:"Press any key on each beat. 16 beats at 100 BPM."},scoring:{type:"rhythm-accuracy",threeStars:.85,twoStars:.6}},{id:"rhythm-standard",title:"Standard Tempo",description:"Play on the beat at 120 BPM",category:"rhythm",difficulty:"beginner",activity:"rhythm-training",config:{bpm:120,totalBeats:16,subdivision:"4n",instructions:"Press any key on each beat. 16 beats at the standard 120 BPM."},scoring:{type:"rhythm-accuracy",threeStars:.85,twoStars:.6}},{id:"rhythm-fast",title:"Fast Quarter Notes",description:"Play on the beat at 140 BPM",category:"rhythm",difficulty:"intermediate",activity:"rhythm-training",config:{bpm:140,totalBeats:16,subdivision:"4n",instructions:"Press any key on each beat. 16 beats at a brisk 140 BPM!"},scoring:{type:"rhythm-accuracy",threeStars:.85,twoStars:.6}},{id:"rhythm-eighths",title:"Eighth Notes (90 BPM)",description:"Play eighth notes at 90 BPM",category:"rhythm",difficulty:"intermediate",activity:"rhythm-training",config:{bpm:90,totalBeats:16,subdivision:"8n",instructions:"Play twice per beat (eighth notes). 16 hits at 90 BPM."},scoring:{type:"rhythm-accuracy",threeStars:.85,twoStars:.6}}],dJ=[{id:"drums-kick-only",title:"Four on the Floor",description:"Kick drum on every beat",category:"drum-patterns",difficulty:"beginner",activity:"drum-patterns",config:{bpm:90,totalBeats:16,pattern:[[0],[0],[0],[0]],patternName:"Four on the Floor",instructions:"Hit the kick drum on every beat. Keep it steady!"},scoring:{type:"pattern-accuracy",threeStars:.85,twoStars:.6}},{id:"drums-kick-snare",title:"Kick-Snare Alternating",description:"Alternate kick and snare",category:"drum-patterns",difficulty:"beginner",activity:"drum-patterns",config:{bpm:90,totalBeats:16,pattern:[[0],[1],[0],[1]],patternName:"Kick-Snare",instructions:"Alternate between kick and snare on each beat."},scoring:{type:"pattern-accuracy",threeStars:.85,twoStars:.6}},{id:"drums-basic-rock",title:"Basic Rock Beat",description:"Classic rock pattern with kick, snare, and hi-hat",category:"drum-patterns",difficulty:"beginner",activity:"drum-patterns",config:{bpm:100,totalBeats:16,pattern:[[0,2],[1,2],[0,2],[1,2]],patternName:"Basic Rock Beat",instructions:"Play the classic rock beat: kick+hi-hat, snare+hi-hat, kick+hi-hat, snare+hi-hat."},scoring:{type:"pattern-accuracy",threeStars:.85,twoStars:.6}},{id:"drums-hihat-groove",title:"Hi-Hat Groove",description:"Kick and snare with steady hi-hat",category:"drum-patterns",difficulty:"intermediate",activity:"drum-patterns",config:{bpm:95,totalBeats:16,pattern:[[0,2],[2],[1,2],[2]],patternName:"Hi-Hat Groove",instructions:"Keep the hi-hat going while placing kick on 1 and snare on 3."},scoring:{type:"pattern-accuracy",threeStars:.85,twoStars:.6}},{id:"drums-pop-beat",title:"Pop Beat",description:"Standard pop rhythm pattern",category:"drum-patterns",difficulty:"intermediate",activity:"drum-patterns",config:{bpm:110,totalBeats:16,pattern:[[0,2],[1,2],[2],[1,2]],patternName:"Pop Beat",instructions:"Play the pop beat: kick+HH, snare+HH, HH only, snare+HH."},scoring:{type:"pattern-accuracy",threeStars:.85,twoStars:.6}},{id:"drums-open-hh",title:"Open Hi-Hat Pattern",description:"Mix closed and open hi-hat",category:"drum-patterns",difficulty:"intermediate",activity:"drum-patterns",config:{bpm:95,totalBeats:16,pattern:[[0,2],[1,3],[0,2],[1,3]],patternName:"Open Hi-Hat",instructions:"Alternate between closed hi-hat (CHH) and open hi-hat (OHH) on beats 2 and 4."},scoring:{type:"pattern-accuracy",threeStars:.85,twoStars:.6}},{id:"drums-crash-intro",title:"Crash on Beat 1",description:"Accent beat 1 with a crash cymbal",category:"drum-patterns",difficulty:"intermediate",activity:"drum-patterns",config:{bpm:100,totalBeats:16,pattern:[[0,6],[1,2],[0,2],[1,2]],patternName:"Crash Intro",instructions:"Hit crash+kick on beat 1, then play a standard rock pattern for beats 2-4."},scoring:{type:"pattern-accuracy",threeStars:.85,twoStars:.6}}],Cw=[...oJ,...lJ,...cJ,...uJ,...dJ];function hJ(t){return t?Cw.filter(e=>e.category===t):Cw}const Tw=[{id:"free-play",icon:CA,title:"Free Play",description:"Play freely with chord detection",color:"oklch(0.70 0.20 270)"},{id:"chord-detection",icon:Hh,title:"Chord Detection",description:"Identify chords in real-time",color:"oklch(0.70 0.20 150)"},{id:"scale-practice",icon:EA,title:"Scale Practice",description:"Explore scales freely",color:"oklch(0.70 0.20 90)"},{id:"rhythm-training",icon:Hv,title:"Rhythm Training",description:"Free rhythm practice",color:"oklch(0.70 0.20 25)"},{id:"drum-patterns",icon:Iv,title:"Drum Patterns",description:"Free drum practice",color:"oklch(0.70 0.20 310)"}];function fJ({activeNotes:t,onNoteOn:e,onNoteOff:n,activePads:s,onDrumHit:i,detectedChord:r,highlightedNotes:a,selectedRoot:o,setSelectedRoot:l,selectedScale:c,setSelectedScale:u}){var S;const{config:d,activeExercise:h,startActivity:p,startExercise:m,exitActivity:y}=sJ(),{getScore:x,saveScore:v}=aJ(),[b,_]=g.useState(null),w=hJ(b);return h?f.jsx(tJ,{exercise:h,onExit:y,onSaveScore:v,activeNotes:t,onNoteOn:e,onNoteOff:n,activePads:s,onDrumHit:i,detectedChord:r,highlightedNotes:a,selectedRoot:o,setSelectedRoot:l,selectedScale:c,setSelectedScale:u}):d?f.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[f.jsxs("div",{className:"flex items-center gap-3 border-b border-border/50 px-6 py-3",children:[f.jsx(Te,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:y,title:"Back to activities",children:f.jsx(yo,{className:"h-4 w-4"})}),f.jsx("h2",{className:"text-sm font-semibold",children:(S=Tw.find(T=>T.id===d.activity))==null?void 0:S.title})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto",children:[d.activity==="free-play"&&f.jsx(nJ,{activeNotes:t,onNoteOn:e,onNoteOff:n,activePads:s,onDrumHit:i,detectedChord:r}),d.activity==="chord-detection"&&f.jsx(RM,{activeNotes:t,onNoteOn:e,onNoteOff:n,detectedChord:r}),d.activity==="scale-practice"&&f.jsx(MM,{activeNotes:t,onNoteOn:e,onNoteOff:n,highlightedNotes:a,selectedRoot:o,setSelectedRoot:l,selectedScale:c,setSelectedScale:u}),d.activity==="rhythm-training"&&f.jsx(PM,{activeNotes:t,onNoteOn:e,onNoteOff:n}),d.activity==="drum-patterns"&&f.jsx(IM,{activePads:s,onDrumHit:i})]})]}):f.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[f.jsxs("div",{className:"border-b border-border/50 px-6 py-4",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Fv,{className:"h-5 w-5 text-muted-foreground"}),f.jsx("h1",{className:"text-lg font-bold",children:"Practice"})]}),f.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Free-play activities and scored exercises with star ratings"})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h2",{className:"mb-3 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Free Activities"}),f.jsx("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-3 lg:grid-cols-5",children:Tw.map(T=>f.jsx(IZ,{icon:T.icon,title:T.title,description:T.description,color:T.color,onClick:()=>p(T.id)},T.id))})]}),f.jsxs("div",{children:[f.jsx("h2",{className:"mb-3 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Exercises"}),f.jsx("div",{className:"mb-4",children:f.jsx(LZ,{selected:b,onChange:_})}),f.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3",children:w.map(T=>f.jsx(HZ,{exercise:T,score:x(T.id),onClick:()=>m(T)},T.id))})]})]})]})}function pJ(){const[t,e]=g.useState("daw"),n=g.useCallback(s=>{e(s)},[]);return{mode:t,switchMode:n}}function mJ(){const[t,e]=g.useState(!1),[n,s]=g.useState(Hg),[i,r]=g.useState(0),a=g.useCallback(async()=>{await Oe.start(),e(!0)},[]),o=g.useCallback(c=>{Oe.setVolume(c),s(c)},[]),l=g.useCallback(c=>{Oe.setPreset(c),r(c)},[]);return{started:t,volume:n,presetIndex:i,start:a,changeVolume:o,changePreset:l}}class ss{constructor(e=!1){this.eventMap={},this.eventsSuspended=e==!0}addListener(e,n,s={}){if(typeof e=="string"&&e.length<1||e instanceof String&&e.length<1||typeof e!="string"&&!(e instanceof String)&&e!==ss.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof n!="function")throw new TypeError("The callback must be a function.");const i=new Ew(e,this,n,s);return this.eventMap[e]||(this.eventMap[e]=[]),s.prepend?this.eventMap[e].unshift(i):this.eventMap[e].push(i),i}addOneTimeListener(e,n,s={}){s.remaining=1,this.addListener(e,n,s)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(e,n){return e===void 0?this.eventMap[ss.ANY_EVENT]&&this.eventMap[ss.ANY_EVENT].length>0?!0:Object.entries(this.eventMap).some(([,s])=>s.length>0):this.eventMap[e]&&this.eventMap[e].length>0?n instanceof Ew?this.eventMap[e].filter(i=>i===n).length>0:typeof n=="function"?this.eventMap[e].filter(i=>i.callback===n).length>0:n==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(e){return this.eventMap[e]||[]}suspendEvent(e){this.getListeners(e).forEach(n=>{n.suspended=!0})}unsuspendEvent(e){this.getListeners(e).forEach(n=>{n.suspended=!1})}getListenerCount(e){return this.getListeners(e).length}emit(e,...n){if(typeof e!="string"&&!(e instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let s=[],i=this.eventMap[ss.ANY_EVENT]||[];return this.eventMap[e]&&(i=i.concat(this.eventMap[e])),i.forEach(r=>{if(r.suspended)return;let a=[...n];Array.isArray(r.arguments)&&(a=a.concat(r.arguments)),r.remaining>0&&(s.push(r.callback.apply(r.context,a)),r.count++),--r.remaining<1&&r.remove()}),s}removeListener(e,n,s={}){if(e===void 0){this.eventMap={};return}else if(!this.eventMap[e])return;let i=this.eventMap[e].filter(r=>n&&r.callback!==n||s.remaining&&s.remaining!==r.remaining||s.context&&s.context!==r.context);i.length?this.eventMap[e]=i:delete this.eventMap[e]}async waitFor(e,n={}){return n.duration=parseInt(n.duration),(isNaN(n.duration)||n.duration<=0)&&(n.duration=1/0),new Promise((s,i)=>{let r,a=this.addListener(e,()=>{clearTimeout(r),s()},{remaining:1});n.duration!==1/0&&(r=setTimeout(()=>{a.remove(),i("The duration expired before the event was emitted.")},n.duration))})}get eventCount(){return Object.keys(this.eventMap).length}}class Ew{constructor(e,n,s,i={}){if(typeof e!="string"&&!(e instanceof String)&&e!==ss.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!n)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof s!="function")throw new TypeError("The 'callback' must be a function.");i.arguments!==void 0&&!Array.isArray(i.arguments)&&(i.arguments=[i.arguments]),i=Object.assign({context:n,remaining:1/0,arguments:void 0,duration:1/0},i),i.duration!==1/0&&setTimeout(()=>this.remove(),i.duration),this.arguments=i.arguments,this.callback=s,this.context=i.context,this.count=0,this.event=e,this.remaining=parseInt(i.remaining)>=1?parseInt(i.remaining):1/0,this.suspended=!1,this.target=n}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All its properties are static and should be referenced using the class name. For
 * example: `Enumerations.CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class U{static get MIDI_CHANNEL_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MESSAGES enum instead."),U.CHANNEL_MESSAGES}static get CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_NUMBERS(){return this.validation&&console.warn("The MIDI_CHANNEL_NUMBERS array has been deprecated. Use the Enumerations.CHANNEL_NUMBERS array instead."),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MODE_MESSAGES enum instead."),U.CHANNEL_MODE_MESSAGES}static get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been deprecated. Use the Enumerations.CONTROL_CHANGE_MESSAGES array instead."),{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get CONTROL_CHANGE_MESSAGES(){return[{number:0,name:"bankselectcoarse",description:"Bank Select (Coarse)",position:"msb"},{number:1,name:"modulationwheelcoarse",description:"Modulation Wheel (Coarse)",position:"msb"},{number:2,name:"breathcontrollercoarse",description:"Breath Controller (Coarse)",position:"msb"},{number:3,name:"controller3",description:"Undefined",position:"msb"},{number:4,name:"footcontrollercoarse",description:"Foot Controller (Coarse)",position:"msb"},{number:5,name:"portamentotimecoarse",description:"Portamento Time (Coarse)",position:"msb"},{number:6,name:"dataentrycoarse",description:"Data Entry (Coarse)",position:"msb"},{number:7,name:"volumecoarse",description:"Channel Volume (Coarse)",position:"msb"},{number:8,name:"balancecoarse",description:"Balance (Coarse)",position:"msb"},{number:9,name:"controller9",description:"Controller 9 (Coarse)",position:"msb"},{number:10,name:"pancoarse",description:"Pan (Coarse)",position:"msb"},{number:11,name:"expressioncoarse",description:"Expression Controller (Coarse)",position:"msb"},{number:12,name:"effectcontrol1coarse",description:"Effect Control 1 (Coarse)",position:"msb"},{number:13,name:"effectcontrol2coarse",description:"Effect Control 2 (Coarse)",position:"msb"},{number:14,name:"controller14",description:"Undefined",position:"msb"},{number:15,name:"controller15",description:"Undefined",position:"msb"},{number:16,name:"generalpurposecontroller1",description:"General Purpose Controller 1 (Coarse)",position:"msb"},{number:17,name:"generalpurposecontroller2",description:"General Purpose Controller 2 (Coarse)",position:"msb"},{number:18,name:"generalpurposecontroller3",description:"General Purpose Controller 3 (Coarse)",position:"msb"},{number:19,name:"generalpurposecontroller4",description:"General Purpose Controller 4 (Coarse)",position:"msb"},{number:20,name:"controller20",description:"Undefined",position:"msb"},{number:21,name:"controller21",description:"Undefined",position:"msb"},{number:22,name:"controller22",description:"Undefined",position:"msb"},{number:23,name:"controller23",description:"Undefined",position:"msb"},{number:24,name:"controller24",description:"Undefined",position:"msb"},{number:25,name:"controller25",description:"Undefined",position:"msb"},{number:26,name:"controller26",description:"Undefined",position:"msb"},{number:27,name:"controller27",description:"Undefined",position:"msb"},{number:28,name:"controller28",description:"Undefined",position:"msb"},{number:29,name:"controller29",description:"Undefined",position:"msb"},{number:30,name:"controller30",description:"Undefined",position:"msb"},{number:31,name:"controller31",description:"Undefined",position:"msb"},{number:32,name:"bankselectfine",description:"Bank Select (Fine)",position:"lsb"},{number:33,name:"modulationwheelfine",description:"Modulation Wheel (Fine)",position:"lsb"},{number:34,name:"breathcontrollerfine",description:"Breath Controller (Fine)",position:"lsb"},{number:35,name:"controller35",description:"Undefined",position:"lsb"},{number:36,name:"footcontrollerfine",description:"Foot Controller (Fine)",position:"lsb"},{number:37,name:"portamentotimefine",description:"Portamento Time (Fine)",position:"lsb"},{number:38,name:"dataentryfine",description:"Data Entry (Fine)",position:"lsb"},{number:39,name:"channelvolumefine",description:"Channel Volume (Fine)",position:"lsb"},{number:40,name:"balancefine",description:"Balance (Fine)",position:"lsb"},{number:41,name:"controller41",description:"Undefined",position:"lsb"},{number:42,name:"panfine",description:"Pan (Fine)",position:"lsb"},{number:43,name:"expressionfine",description:"Expression Controller (Fine)",position:"lsb"},{number:44,name:"effectcontrol1fine",description:"Effect control 1 (Fine)",position:"lsb"},{number:45,name:"effectcontrol2fine",description:"Effect control 2 (Fine)",position:"lsb"},{number:46,name:"controller46",description:"Undefined",position:"lsb"},{number:47,name:"controller47",description:"Undefined",position:"lsb"},{number:48,name:"controller48",description:"General Purpose Controller 1 (Fine)",position:"lsb"},{number:49,name:"controller49",description:"General Purpose Controller 2 (Fine)",position:"lsb"},{number:50,name:"controller50",description:"General Purpose Controller 3 (Fine)",position:"lsb"},{number:51,name:"controller51",description:"General Purpose Controller 4 (Fine)",position:"lsb"},{number:52,name:"controller52",description:"Undefined",position:"lsb"},{number:53,name:"controller53",description:"Undefined",position:"lsb"},{number:54,name:"controller54",description:"Undefined",position:"lsb"},{number:55,name:"controller55",description:"Undefined",position:"lsb"},{number:56,name:"controller56",description:"Undefined",position:"lsb"},{number:57,name:"controller57",description:"Undefined",position:"lsb"},{number:58,name:"controller58",description:"Undefined",position:"lsb"},{number:59,name:"controller59",description:"Undefined",position:"lsb"},{number:60,name:"controller60",description:"Undefined",position:"lsb"},{number:61,name:"controller61",description:"Undefined",position:"lsb"},{number:62,name:"controller62",description:"Undefined",position:"lsb"},{number:63,name:"controller63",description:"Undefined",position:"lsb"},{number:64,name:"damperpedal",description:"Damper Pedal On/Off"},{number:65,name:"portamento",description:"Portamento On/Off"},{number:66,name:"sostenuto",description:"Sostenuto On/Off"},{number:67,name:"softpedal",description:"Soft Pedal On/Off"},{number:68,name:"legatopedal",description:"Legato Pedal On/Off"},{number:69,name:"hold2",description:"Hold 2 On/Off"},{number:70,name:"soundvariation",description:"Sound Variation",position:"lsb"},{number:71,name:"resonance",description:"Resonance",position:"lsb"},{number:72,name:"releasetime",description:"Release Time",position:"lsb"},{number:73,name:"attacktime",description:"Attack Time",position:"lsb"},{number:74,name:"brightness",description:"Brightness",position:"lsb"},{number:75,name:"decaytime",description:"Decay Time",position:"lsb"},{number:76,name:"vibratorate",description:"Vibrato Rate",position:"lsb"},{number:77,name:"vibratodepth",description:"Vibrato Depth",position:"lsb"},{number:78,name:"vibratodelay",description:"Vibrato Delay",position:"lsb"},{number:79,name:"controller79",description:"Undefined",position:"lsb"},{number:80,name:"generalpurposecontroller5",description:"General Purpose Controller 5",position:"lsb"},{number:81,name:"generalpurposecontroller6",description:"General Purpose Controller 6",position:"lsb"},{number:82,name:"generalpurposecontroller7",description:"General Purpose Controller 7",position:"lsb"},{number:83,name:"generalpurposecontroller8",description:"General Purpose Controller 8",position:"lsb"},{number:84,name:"portamentocontrol",description:"Portamento Control",position:"lsb"},{number:85,name:"controller85",description:"Undefined"},{number:86,name:"controller86",description:"Undefined"},{number:87,name:"controller87",description:"Undefined"},{number:88,name:"highresolutionvelocityprefix",description:"High Resolution Velocity Prefix",position:"lsb"},{number:89,name:"controller89",description:"Undefined"},{number:90,name:"controller90",description:"Undefined"},{number:91,name:"effect1depth",description:"Effects 1 Depth (Reverb Send Level)"},{number:92,name:"effect2depth",description:"Effects 2 Depth"},{number:93,name:"effect3depth",description:"Effects 3 Depth (Chorus Send Level)"},{number:94,name:"effect4depth",description:"Effects 4 Depth"},{number:95,name:"effect5depth",description:"Effects 5 Depth"},{number:96,name:"dataincrement",description:"Data Increment"},{number:97,name:"datadecrement",description:"Data Decrement"},{number:98,name:"nonregisteredparameterfine",description:"Non-Registered Parameter Number (Fine)",position:"lsb"},{number:99,name:"nonregisteredparametercoarse",description:"Non-Registered Parameter Number (Coarse)",position:"msb"},{number:100,name:"registeredparameterfine",description:"Registered Parameter Number (Fine)",position:"lsb"},{number:101,name:"registeredparametercoarse",description:"Registered Parameter Number (Coarse)",position:"msb"},{number:102,name:"controller102",description:"Undefined"},{number:103,name:"controller103",description:"Undefined"},{number:104,name:"controller104",description:"Undefined"},{number:105,name:"controller105",description:"Undefined"},{number:106,name:"controller106",description:"Undefined"},{number:107,name:"controller107",description:"Undefined"},{number:108,name:"controller108",description:"Undefined"},{number:109,name:"controller109",description:"Undefined"},{number:110,name:"controller110",description:"Undefined"},{number:111,name:"controller111",description:"Undefined"},{number:112,name:"controller112",description:"Undefined"},{number:113,name:"controller113",description:"Undefined"},{number:114,name:"controller114",description:"Undefined"},{number:115,name:"controller115",description:"Undefined"},{number:116,name:"controller116",description:"Undefined"},{number:117,name:"controller117",description:"Undefined"},{number:118,name:"controller118",description:"Undefined"},{number:119,name:"controller119",description:"Undefined"},{number:120,name:"allsoundoff",description:"All Sound Off"},{number:121,name:"resetallcontrollers",description:"Reset All Controllers"},{number:122,name:"localcontrol",description:"Local Control On/Off"},{number:123,name:"allnotesoff",description:"All Notes Off"},{number:124,name:"omnimodeoff",description:"Omni Mode Off"},{number:125,name:"omnimodeon",description:"Omni Mode On"},{number:126,name:"monomodeon",description:"Mono Mode On"},{number:127,name:"polymodeon",description:"Poly Mode On"}]}static get REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_REGISTERED_PARAMETERS(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETERS enum has been deprecated. Use the Enumerations.REGISTERED_PARAMETERS enum instead."),U.MIDI_REGISTERED_PARAMETERS}static get SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been deprecated. Use the Enumerations.SYSTEM_MESSAGES enum instead."),U.SYSTEM_MESSAGES}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-dataincrement","nrpn-datadecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-dataincrement","rpn-datadecrement","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn-databuttonincrement","rpn-databuttondecrement"]}}/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Wa{constructor(e,n={}){this.duration=W.defaults.note.duration,this.attack=W.defaults.note.attack,this.release=W.defaults.note.release,n.duration!=null&&(this.duration=n.duration),n.attack!=null&&(this.attack=n.attack),n.rawAttack!=null&&(this.attack=X.from7bitToFloat(n.rawAttack)),n.release!=null&&(this.release=n.release),n.rawRelease!=null&&(this.release=X.from7bitToFloat(n.rawRelease)),Number.isInteger(e)?this.identifier=X.toNoteIdentifier(e):this.identifier=e}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(e){const n=X.getNoteDetails(e);if(W.validation&&!e)throw new Error("Invalid note identifier");this._name=n.name,this._accidental=n.accidental,this._octave=n.octave}get name(){return this._name}set name(e){if(W.validation&&(e=e.toUpperCase(),!["C","D","E","F","G","A","B"].includes(e)))throw new Error("Invalid name value");this._name=e}get accidental(){return this._accidental}set accidental(e){if(W.validation&&(e=e.toLowerCase(),!["#","##","b","bb"].includes(e)))throw new Error("Invalid accidental value");this._accidental=e}get octave(){return this._octave}set octave(e){if(W.validation&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid octave value");this._octave=e}get duration(){return this._duration}set duration(e){if(W.validation&&(e=parseFloat(e),isNaN(e)||e===null||e<0))throw new RangeError("Invalid duration value.");this._duration=e}get attack(){return this._attack}set attack(e){if(W.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid attack value.");this._attack=e}get release(){return this._release}set release(e){if(W.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid release value.");this._release=e}get rawAttack(){return X.fromFloatTo7Bit(this._attack)}set rawAttack(e){this._attack=X.from7bitToFloat(e)}get rawRelease(){return X.fromFloatTo7Bit(this._release)}set rawRelease(e){this._release=X.from7bitToFloat(e)}get number(){return X.toNoteNumber(this.identifier)}getOffsetNumber(e=0,n=0){return W.validation&&(e=parseInt(e)||0,n=parseInt(n)||0),Math.min(Math.max(this.number+e*12+n,0),127)}}/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class X{static toNoteNumber(e,n=0){if(n=n==null?0:parseInt(n),isNaN(n))throw new RangeError("Invalid 'octaveOffset' value");typeof e!="string"&&(e="");const s=this.getNoteDetails(e);if(!s)throw new TypeError("Invalid note identifier");const i={C:0,D:2,E:4,F:5,G:7,A:9,B:11};let r=(s.octave+1+n)*12;if(r+=i[s.name],s.accidental&&(s.accidental.startsWith("b")?r-=s.accidental.length:r+=s.accidental.length),r<0||r>127)throw new RangeError("Invalid octaveOffset value");return r}static getNoteDetails(e){Number.isInteger(e)&&(e=this.toNoteIdentifier(e));const n=e.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!n)throw new TypeError("Invalid note identifier");const s=n[1].toUpperCase(),i=parseInt(n[3]);let r=n[2].toLowerCase();return r=r===""?void 0:r,{accidental:r,identifier:s+(r||"")+i,name:s,octave:i}}static sanitizeChannels(e){let n;if(W.validation){if(e==="all")n=["all"];else if(e==="none")return[]}return Array.isArray(e)?n=e:n=[e],n.indexOf("all")>-1&&(n=U.MIDI_CHANNEL_NUMBERS),n.map(function(s){return parseInt(s)}).filter(function(s){return s>=1&&s<=16})}static toTimestamp(e){let n=!1;const s=parseFloat(e);return isNaN(s)?!1:(typeof e=="string"&&e.substring(0,1)==="+"?s>=0&&(n=W.time+s):s>=0&&(n=s),n)}static guessNoteNumber(e,n){n=parseInt(n)||0;let s=!1;if(Number.isInteger(e)&&e>=0&&e<=127)s=parseInt(e);else if(parseInt(e)>=0&&parseInt(e)<=127)s=parseInt(e);else if(typeof e=="string"||e instanceof String)try{s=this.toNoteNumber(e.trim(),n)}catch{return!1}return s}static toNoteIdentifier(e,n){if(e=parseInt(e),isNaN(e)||e<0||e>127)throw new RangeError("Invalid note number");if(n=n==null?0:parseInt(n),isNaN(n))throw new RangeError("Invalid octaveOffset value");const s=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],i=Math.floor(e/12-1)+n;return s[e%12]+i.toString()}static buildNote(e,n={}){if(n.octaveOffset=parseInt(n.octaveOffset)||0,e instanceof Wa)return e;let s=this.guessNoteNumber(e,n.octaveOffset);if(s===!1)throw new TypeError(`The input could not be parsed as a note (${e})`);return n.octaveOffset=void 0,new Wa(s,n)}static buildNoteArray(e,n={}){let s=[];return Array.isArray(e)||(e=[e]),e.forEach(i=>{s.push(this.buildNote(i,n))}),s}static from7bitToFloat(e){return e===1/0&&(e=127),e=parseInt(e)||0,Math.min(Math.max(e/127,0),1)}static fromFloatTo7Bit(e){return e===1/0&&(e=1),e=parseFloat(e)||0,Math.min(Math.max(Math.round(e*127),0),127)}static fromMsbLsbToFloat(e,n=0){W.validation&&(e=Math.min(Math.max(parseInt(e)||0,0),127),n=Math.min(Math.max(parseInt(n)||0,0),127));const s=((e<<7)+n)/16383;return Math.min(Math.max(s,0),1)}static fromFloatToMsbLsb(e){W.validation&&(e=Math.min(Math.max(parseFloat(e)||0,0),1));const n=Math.round(e*16383);return{msb:n>>7,lsb:n&127}}static offsetNumber(e,n=0,s=0){if(W.validation){if(e=parseInt(e),isNaN(e))throw new Error("Invalid note number");n=parseInt(n)||0,s=parseInt(s)||0}return Math.min(Math.max(e+n*12+s,0),127)}static getPropertyByValue(e,n){return Object.keys(e).find(s=>e[s]===n)}static getCcNameByNumber(e){if(!(W.validation&&(e=parseInt(e),!(e>=0&&e<=127))))return U.CONTROL_CHANGE_MESSAGES[e].name}static getCcNumberByName(e){let n=U.CONTROL_CHANGE_MESSAGES.find(s=>s.name===e);return n?n.number:U.MIDI_CONTROL_CHANGE_MESSAGES[e]}static getChannelModeByNumber(e){if(!(e>=120&&e<=127))return!1;for(let n in U.CHANNEL_MODE_MESSAGES)if(U.CHANNEL_MODE_MESSAGES.hasOwnProperty(n)&&e===U.CHANNEL_MODE_MESSAGES[n])return n;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&typeof window.document<"u"}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class gJ extends ss{constructor(e,n){super(),this._output=e,this._number=n,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(e,n={time:0}){return this.output.send(e,n),this}sendKeyAftertouch(e,n,s={}){if(W.validation){if(s.useRawValue&&(s.rawValue=s.useRawValue),isNaN(parseFloat(n)))throw new RangeError("Invalid key aftertouch value.");if(s.rawValue){if(!(n>=0&&n<=127&&Number.isInteger(n)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(n>=0&&n<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}s.rawValue||(n=X.fromFloatTo7Bit(n));const i=W.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(e)||(e=[e]),X.buildNoteArray(e).forEach(r=>{this.send([(U.CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),r.getOffsetNumber(i),n],{time:X.toTimestamp(s.time)})}),this}sendControlChange(e,n,s={}){if(typeof e=="string"&&(e=X.getCcNumberByName(e)),Array.isArray(n)||(n=[n]),W.validation){if(e===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if(n=n.map(i=>{const r=Math.min(Math.max(parseInt(i),0),127);if(isNaN(r))throw new TypeError("Values must be integers between 0 and 127");return r}),n.length===2&&e>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return n.forEach((i,r)=>{this.send([(U.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e+r*32,n[r]],{time:X.toTimestamp(s.time)})}),this}_selectNonRegisteredParameter(e,n={}){return this.sendControlChange(99,e[0],n),this.sendControlChange(98,e[1],n),this}_deselectRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_deselectNonRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_selectRegisteredParameter(e,n={}){return this.sendControlChange(101,e[0],n),this.sendControlChange(100,e[1],n),this}_setCurrentParameter(e,n={}){return e=[].concat(e),this.sendControlChange(6,e[0],n),e.length<2?this:(this.sendControlChange(38,e[1],n),this)}sendRpnDecrement(e,n={}){if(Array.isArray(e)||(e=U.REGISTERED_PARAMETERS[e]),W.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let s=!1;if(Object.getOwnPropertyNames(U.REGISTERED_PARAMETERS).forEach(i=>{U.REGISTERED_PARAMETERS[i][0]===e[0]&&U.REGISTERED_PARAMETERS[i][1]===e[1]&&(s=!0)}),!s)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,n),this.sendControlChange(97,0,n),this._deselectRegisteredParameter(n),this}sendRpnIncrement(e,n={}){if(Array.isArray(e)||(e=U.REGISTERED_PARAMETERS[e]),W.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let s=!1;if(Object.getOwnPropertyNames(U.REGISTERED_PARAMETERS).forEach(i=>{U.REGISTERED_PARAMETERS[i][0]===e[0]&&U.REGISTERED_PARAMETERS[i][1]===e[1]&&(s=!0)}),!s)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,n),this.sendControlChange(96,0,n),this._deselectRegisteredParameter(n),this}playNote(e,n={}){this.sendNoteOn(e,n);const s=Array.isArray(e)?e:[e];for(let i of s)if(parseInt(i.duration)>0){const r={time:(X.toTimestamp(n.time)||W.time)+parseInt(i.duration),release:i.release,rawRelease:i.rawRelease};this.sendNoteOff(i,r)}else if(parseInt(n.duration)>0){const r={time:(X.toTimestamp(n.time)||W.time)+parseInt(n.duration),release:n.release,rawRelease:n.rawRelease};this.sendNoteOff(i,r)}return this}sendNoteOff(e,n={}){if(W.validation){if(n.rawRelease!=null&&!(n.rawRelease>=0&&n.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(n.release!=null&&!(n.release>=0&&n.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");n.rawVelocity&&(n.rawRelease=n.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),n.velocity&&(n.release=n.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let s=64;n.rawRelease!=null?s=n.rawRelease:isNaN(n.release)||(s=Math.round(n.release*127));const i=W.octaveOffset+this.output.octaveOffset+this.octaveOffset;return X.buildNoteArray(e,{rawRelease:parseInt(s)}).forEach(r=>{this.send([(U.CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),r.getOffsetNumber(i),r.rawRelease],{time:X.toTimestamp(n.time)})}),this}stopNote(e,n={}){return this.sendNoteOff(e,n)}sendNoteOn(e,n={}){if(W.validation){if(n.rawAttack!=null&&!(n.rawAttack>=0&&n.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(n.attack!=null&&!(n.attack>=0&&n.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");n.rawVelocity&&(n.rawAttack=n.velocity,n.rawRelease=n.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),n.velocity&&(n.attack=n.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let s=64;n.rawAttack!=null?s=n.rawAttack:isNaN(n.attack)||(s=Math.round(n.attack*127));const i=W.octaveOffset+this.output.octaveOffset+this.octaveOffset;return X.buildNoteArray(e,{rawAttack:s}).forEach(r=>{this.send([(U.CHANNEL_MESSAGES.noteon<<4)+(this.number-1),r.getOffsetNumber(i),r.rawAttack],{time:X.toTimestamp(n.time)})}),this}sendChannelMode(e,n=0,s={}){if(typeof e=="string"&&(e=U.CHANNEL_MODE_MESSAGES[e]),W.validation){if(e===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(e)||!(e>=120&&e<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(n))||n<0||n>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(U.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e,n],{time:X.toTimestamp(s.time)}),this}sendOmniMode(e,n={}){return e===void 0||e?this.sendChannelMode("omnimodeon",0,n):this.sendChannelMode("omnimodeoff",0,n),this}sendChannelAftertouch(e,n={}){if(W.validation){if(isNaN(parseFloat(e)))throw new RangeError("Invalid channel aftertouch value.");if(n.rawValue){if(!(e>=0&&e<=127&&Number.isInteger(e)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(e>=0&&e<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return n.rawValue||(e=X.fromFloatTo7Bit(e)),this.send([(U.CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(e)],{time:X.toTimestamp(n.time)}),this}sendMasterTuning(e,n={}){if(e=parseFloat(e)||0,W.validation&&!(e>-65&&e<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let s=Math.floor(e)+64,i=e-Math.floor(e);i=Math.round((i+1)/2*16383);let r=i>>7&127,a=i&127;return this.sendRpnValue("channelcoarsetuning",s,n),this.sendRpnValue("channelfinetuning",[r,a],n),this}sendModulationRange(e,n,s={}){if(W.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(n!=null&&(!Number.isInteger(n)||!(n>=0&&n<=127)))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return n>=0&&n<=127||(n=0),this.sendRpnValue("modulationrange",[e,n],s),this}sendNrpnValue(e,n,s={}){if(n=[].concat(n),W.validation){if(!Array.isArray(e)||!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");n.forEach(i=>{if(!(i>=0&&i<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(e,s),this._setCurrentParameter(n,s),this._deselectNonRegisteredParameter(s),this}sendPitchBend(e,n={}){if(W.validation)if(n.rawValue&&Array.isArray(e)){if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(n.rawValue&&!Array.isArray(e)){if(!(e>=0&&e<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(e)||e===null)throw new RangeError("Invalid pitch bend value.");if(!(e>=-1&&e<=1))throw new RangeError("The pitch bend value must be a float between -1 and 1.")}let s=0,i=0;if(n.rawValue&&Array.isArray(e))s=e[0],i=e[1];else if(n.rawValue&&!Array.isArray(e))s=e;else{const r=X.fromFloatToMsbLsb((e+1)/2);s=r.msb,i=r.lsb}return this.send([(U.CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),i,s],{time:X.toTimestamp(n.time)}),this}sendPitchBendRange(e,n,s={}){if(W.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(n)||!(n>=0&&n<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[e,n],s),this}sendProgramChange(e,n={}){if(e=parseInt(e)||0,W.validation&&!(e>=0&&e<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(U.CHANNEL_MESSAGES.programchange<<4)+(this.number-1),e],{time:X.toTimestamp(n.time)}),this}sendRpnValue(e,n,s={}){if(Array.isArray(e)||(e=U.REGISTERED_PARAMETERS[e]),W.validation){if(!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(n).forEach(i=>{if(!(i>=0&&i<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(e,s),this._setCurrentParameter(n,s),this._deselectRegisteredParameter(s),this}sendTuningBank(e,n={}){if(W.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",e,n),this}sendTuningProgram(e,n={}){if(W.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",e,n),this}sendLocalControl(e,n={}){return e?this.sendChannelMode("localcontrol",127,n):this.sendChannelMode("localcontrol",0,n)}sendAllNotesOff(e={}){return this.sendChannelMode("allnotesoff",0,e)}sendAllSoundOff(e={}){return this.sendChannelMode("allsoundoff",0,e)}sendResetAllControllers(e={}){return this.sendChannelMode("resetallcontrollers",0,e)}sendPolyphonicMode(e,n={}){return e==="mono"?this.sendChannelMode("monomodeon",0,n):this.sendChannelMode("polymodeon",0,n)}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get output(){return this._output}get number(){return this._number}}/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class sy extends ss{constructor(e){super(),this._midiOutput=e,this._octaveOffset=0,this.channels=[];for(let n=1;n<=16;n++)this.channels[n]=new gJ(this,n);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._midiOutput&&(this._midiOutput.onstatechange=null),await this.close(),this._midiOutput=null}_onStateChange(e){let n={timestamp:W.time};e.port.connection==="open"?(n.type="opened",n.target=this,n.port=n.target,this.emit("opened",n)):e.port.connection==="closed"&&e.port.state==="connected"?(n.type="closed",n.target=this,n.port=n.target,this.emit("closed",n)):e.port.connection==="closed"&&e.port.state==="disconnected"?(n.type="disconnected",n.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",n)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught:",e.port.connection,e.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(e){return Promise.reject(e)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(e,n={time:0},s=0){if(e instanceof LM&&(e=X.isNode?e.data:e.rawData),e instanceof Uint8Array&&X.isNode&&(e=Array.from(e)),W.validation){if(!Array.isArray(e)&&!(e instanceof Uint8Array)&&(e=[e],Array.isArray(n)&&(e=e.concat(n)),n=isNaN(s)?{time:0}:{time:s}),!(parseInt(e[0])>=128&&parseInt(e[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");e.slice(1).forEach(i=>{if(i=parseInt(i),!(i>=0&&i<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),n||(n={time:0})}return this._midiOutput.send(e,X.toTimestamp(n.time)),this}sendSysex(e,n=[],s={}){if(e=[].concat(e),n instanceof Uint8Array){const i=new Uint8Array(1+e.length+n.length+1);i[0]=U.SYSTEM_MESSAGES.sysex,i.set(Uint8Array.from(e),1),i.set(n,1+e.length),i[i.length-1]=U.SYSTEM_MESSAGES.sysexend,this.send(i,{time:s.time})}else{const i=e.concat(n,U.SYSTEM_MESSAGES.sysexend);this.send([U.SYSTEM_MESSAGES.sysex].concat(i),{time:s.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():W.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(e,n={}){if(W.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([U.SYSTEM_MESSAGES.timecode,e],{time:n.time}),this}sendSongPosition(e=0,n={}){e=Math.floor(e)||0;var s=e>>7&127,i=e&127;return this.send([U.SYSTEM_MESSAGES.songposition,s,i],{time:n.time}),this}sendSongSelect(e=0,n={}){if(W.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([U.SYSTEM_MESSAGES.songselect,e],{time:n.time}),this}sendTuneRequest(e={}){return this.send([U.SYSTEM_MESSAGES.tunerequest],{time:e.time}),this}sendClock(e={}){return this.send([U.SYSTEM_MESSAGES.clock],{time:e.time}),this}sendStart(e={}){return this.send([U.SYSTEM_MESSAGES.start],{time:e.time}),this}sendContinue(e={}){return this.send([U.SYSTEM_MESSAGES.continue],{time:e.time}),this}sendStop(e={}){return this.send([U.SYSTEM_MESSAGES.stop],{time:e.time}),this}sendActiveSensing(e={}){return this.send([U.SYSTEM_MESSAGES.activesensing],{time:e.time}),this}sendReset(e={}){return this.send([U.SYSTEM_MESSAGES.reset],{time:e.time}),this}sendTuningRequest(e={}){return W.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(e)}sendKeyAftertouch(e,n,s={}){return s.channels==null&&(s.channels=U.MIDI_CHANNEL_NUMBERS),X.sanitizeChannels(s.channels).forEach(i=>{this.channels[i].sendKeyAftertouch(e,n,s)}),this}sendControlChange(e,n,s={},i={}){if(W.validation&&(Array.isArray(s)||Number.isInteger(s)||s==="all")){const r=s;s=i,s.channels=r,s.channels==="all"&&(s.channels=U.MIDI_CHANNEL_NUMBERS)}return s.channels==null&&(s.channels=U.MIDI_CHANNEL_NUMBERS),X.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendControlChange(e,n,s)}),this}sendPitchBendRange(e=0,n=0,s={}){return s.channels==null&&(s.channels=U.MIDI_CHANNEL_NUMBERS),X.sanitizeChannels(s.channels).forEach(i=>{this.channels[i].sendPitchBendRange(e,n,s)}),this}setPitchBendRange(e=0,n=0,s="all",i={}){return W.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),i.channels=s,i.channels==="all"&&(i.channels=U.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(e,n,i)}sendRpnValue(e,n,s={}){return s.channels==null&&(s.channels=U.MIDI_CHANNEL_NUMBERS),X.sanitizeChannels(s.channels).forEach(i=>{this.channels[i].sendRpnValue(e,n,s)}),this}setRegisteredParameter(e,n=[],s="all",i={}){return W.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),i.channels=s,i.channels==="all"&&(i.channels=U.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(e,n,i)}sendChannelAftertouch(e,n={},s={}){if(W.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=s,n.channels=i,n.channels==="all"&&(n.channels=U.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=U.MIDI_CHANNEL_NUMBERS),X.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendChannelAftertouch(e,n)}),this}sendPitchBend(e,n={},s={}){if(W.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=s,n.channels=i,n.channels==="all"&&(n.channels=U.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=U.MIDI_CHANNEL_NUMBERS),X.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendPitchBend(e,n)}),this}sendProgramChange(e=0,n={},s={}){if(W.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=s,n.channels=i,n.channels==="all"&&(n.channels=U.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=U.MIDI_CHANNEL_NUMBERS),X.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendProgramChange(e,n)}),this}sendModulationRange(e,n,s={}){return s.channels==null&&(s.channels=U.MIDI_CHANNEL_NUMBERS),X.sanitizeChannels(s.channels).forEach(i=>{this.channels[i].sendModulationRange(e,n,s)}),this}setModulationRange(e=0,n=0,s="all",i={}){return W.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),i.channels=s,i.channels==="all"&&(i.channels=U.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(e,n,i)}sendMasterTuning(e,n={}){return n.channels==null&&(n.channels=U.MIDI_CHANNEL_NUMBERS),X.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendMasterTuning(e,n)}),this}setMasterTuning(e,n={},s={}){return W.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),s.channels=n,s.channels==="all"&&(s.channels=U.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(e,s)}sendTuningProgram(e,n={}){return n.channels==null&&(n.channels=U.MIDI_CHANNEL_NUMBERS),X.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendTuningProgram(e,n)}),this}setTuningProgram(e,n="all",s={}){return W.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),s.channels=n,s.channels==="all"&&(s.channels=U.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(e,s)}sendTuningBank(e=0,n={}){return n.channels==null&&(n.channels=U.MIDI_CHANNEL_NUMBERS),X.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendTuningBank(e,n)}),this}setTuningBank(e,n="all",s={}){return W.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),s.channels=n,s.channels==="all"&&(s.channels=U.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(e,s)}sendChannelMode(e,n=0,s={},i={}){if(W.validation&&(Array.isArray(s)||Number.isInteger(s)||s==="all")){const r=s;s=i,s.channels=r,s.channels==="all"&&(s.channels=U.MIDI_CHANNEL_NUMBERS)}return s.channels==null&&(s.channels=U.MIDI_CHANNEL_NUMBERS),X.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendChannelMode(e,n,s)}),this}sendAllSoundOff(e={}){return e.channels==null&&(e.channels=U.MIDI_CHANNEL_NUMBERS),X.sanitizeChannels(e.channels).forEach(n=>{this.channels[n].sendAllSoundOff(e)}),this}sendAllNotesOff(e={}){return e.channels==null&&(e.channels=U.MIDI_CHANNEL_NUMBERS),X.sanitizeChannels(e.channels).forEach(n=>{this.channels[n].sendAllNotesOff(e)}),this}sendResetAllControllers(e={},n={}){if(W.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const s=e;e=n,e.channels=s,e.channels==="all"&&(e.channels=U.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=U.MIDI_CHANNEL_NUMBERS),X.sanitizeChannels(e.channels).forEach(s=>{this.channels[s].sendResetAllControllers(e)}),this}sendPolyphonicMode(e,n={},s={}){if(W.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=s,n.channels=i,n.channels==="all"&&(n.channels=U.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=U.MIDI_CHANNEL_NUMBERS),X.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendPolyphonicMode(e,n)}),this}sendLocalControl(e,n={},s={}){if(W.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=s,n.channels=i,n.channels==="all"&&(n.channels=U.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=U.MIDI_CHANNEL_NUMBERS),X.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendLocalControl(e,n)}),this}sendOmniMode(e,n={},s={}){if(W.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=s,n.channels=i,n.channels==="all"&&(n.channels=U.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=U.MIDI_CHANNEL_NUMBERS),X.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendOmniMode(e,n)}),this}sendNrpnValue(e,n,s={}){return s.channels==null&&(s.channels=U.MIDI_CHANNEL_NUMBERS),X.sanitizeChannels(s.channels).forEach(i=>{this.channels[i].sendNrpnValue(e,n,s)}),this}setNonRegisteredParameter(e,n=[],s="all",i={}){return W.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),i.channels=s,i.channels==="all"&&(i.channels=U.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(e,n,i)}sendRpnIncrement(e,n={}){return n.channels==null&&(n.channels=U.MIDI_CHANNEL_NUMBERS),X.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendRpnIncrement(e,n)}),this}incrementRegisteredParameter(e,n="all",s={}){return W.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),s.channels=n,s.channels==="all"&&(s.channels=U.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(e,s)}sendRpnDecrement(e,n={}){return n.channels==null&&(n.channels=U.MIDI_CHANNEL_NUMBERS),X.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendRpnDecrement(e,n)}),this}decrementRegisteredParameter(e,n="all",s={}){return W.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),s.channels=n,s.channels==="all"&&(s.channels=U.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(e,s)}sendNoteOff(e,n={},s={}){if(W.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=s,n.channels=i,n.channels==="all"&&(n.channels=U.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=U.MIDI_CHANNEL_NUMBERS),X.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendNoteOff(e,n)}),this}stopNote(e,n){return this.sendNoteOff(e,n)}playNote(e,n={},s={}){if(W.validation&&(n.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),n.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=s,n.channels=i,n.channels==="all"&&(n.channels=U.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=U.MIDI_CHANNEL_NUMBERS),X.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].playNote(e,n)}),this}sendNoteOn(e,n={},s={}){if(W.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=s,n.channels=i,n.channels==="all"&&(n.channels=U.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=U.MIDI_CHANNEL_NUMBERS),X.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendNoteOn(e,n)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}}/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Aw{constructor(e=[],n={}){this.destinations=[],this.types=[...Object.keys(U.SYSTEM_MESSAGES),...Object.keys(U.CHANNEL_MESSAGES)],this.channels=U.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(e)||(e=[e]),n.types&&!Array.isArray(n.types)&&(n.types=[n.types]),n.channels&&!Array.isArray(n.channels)&&(n.channels=[n.channels]),W.validation&&(e.forEach(s=>{if(!(s instanceof sy))throw new TypeError("Destinations must be of type 'Output'.")}),n.types!==void 0&&n.types.forEach(s=>{if(!U.SYSTEM_MESSAGES.hasOwnProperty(s)&&!U.CHANNEL_MESSAGES.hasOwnProperty(s))throw new TypeError("Type must be a valid message type.")}),n.channels!==void 0&&n.channels.forEach(s=>{if(!U.MIDI_CHANNEL_NUMBERS.includes(s))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=e,n.types&&(this.types=n.types),n.channels&&(this.channels=n.channels)}forward(e){this.suspended||this.types.includes(e.type)&&(e.channel&&!this.channels.includes(e.channel)||this.destinations.forEach(n=>{W.validation&&!(n instanceof sy)||n.send(e)}))}}/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-dataincrement
 * @fires InputChannel#event:nrpn-datadecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-dataincrement
 * @fires InputChannel#event:rpn-datadecrement
 *
 * @fires InputChannel#controlchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#event:controlchange-bankselectcoarse
 * @fires InputChannel#event:controlchange-modulationwheelcoarse
 * @fires InputChannel#event:controlchange-breathcontrollercoarse
 * @fires InputChannel#event:controlchange-footcontrollercoarse
 * @fires InputChannel#event:controlchange-portamentotimecoarse
 * @fires InputChannel#event:controlchange-dataentrycoarse
 * @fires InputChannel#event:controlchange-volumecoarse
 * @fires InputChannel#event:controlchange-balancecoarse
 * @fires InputChannel#event:controlchange-pancoarse
 * @fires InputChannel#event:controlchange-expressioncoarse
 * @fires InputChannel#event:controlchange-effectcontrol1coarse
 * @fires InputChannel#event:controlchange-effectcontrol2coarse
 * @fires InputChannel#event:controlchange-generalpurposecontroller1
 * @fires InputChannel#event:controlchange-generalpurposecontroller2
 * @fires InputChannel#event:controlchange-generalpurposecontroller3
 * @fires InputChannel#event:controlchange-generalpurposecontroller4
 * @fires InputChannel#event:controlchange-bankselectfine
 * @fires InputChannel#event:controlchange-modulationwheelfine
 * @fires InputChannel#event:controlchange-breathcontrollerfine
 * @fires InputChannel#event:controlchange-footcontrollerfine
 * @fires InputChannel#event:controlchange-portamentotimefine
 * @fires InputChannel#event:controlchange-dataentryfine
 * @fires InputChannel#event:controlchange-channelvolumefine
 * @fires InputChannel#event:controlchange-balancefine
 * @fires InputChannel#event:controlchange-panfine
 * @fires InputChannel#event:controlchange-expressionfine
 * @fires InputChannel#event:controlchange-effectcontrol1fine
 * @fires InputChannel#event:controlchange-effectcontrol2fine
 * @fires InputChannel#event:controlchange-damperpedal
 * @fires InputChannel#event:controlchange-portamento
 * @fires InputChannel#event:controlchange-sostenuto
 * @fires InputChannel#event:controlchange-softpedal
 * @fires InputChannel#event:controlchange-legatopedal
 * @fires InputChannel#event:controlchange-hold2
 * @fires InputChannel#event:controlchange-soundvariation
 * @fires InputChannel#event:controlchange-resonance
 * @fires InputChannel#event:controlchange-releasetime
 * @fires InputChannel#event:controlchange-attacktime
 * @fires InputChannel#event:controlchange-brightness
 * @fires InputChannel#event:controlchange-decaytime
 * @fires InputChannel#event:controlchange-vibratorate
 * @fires InputChannel#event:controlchange-vibratodepth
 * @fires InputChannel#event:controlchange-vibratodelay
 * @fires InputChannel#event:controlchange-generalpurposecontroller5
 * @fires InputChannel#event:controlchange-generalpurposecontroller6
 * @fires InputChannel#event:controlchange-generalpurposecontroller7
 * @fires InputChannel#event:controlchange-generalpurposecontroller8
 * @fires InputChannel#event:controlchange-portamentocontrol
 * @fires InputChannel#event:controlchange-highresolutionvelocityprefix
 * @fires InputChannel#event:controlchange-effect1depth
 * @fires InputChannel#event:controlchange-effect2depth
 * @fires InputChannel#event:controlchange-effect3depth
 * @fires InputChannel#event:controlchange-effect4depth
 * @fires InputChannel#event:controlchange-effect5depth
 * @fires InputChannel#event:controlchange-dataincrement
 * @fires InputChannel#event:controlchange-datadecrement
 * @fires InputChannel#event:controlchange-nonregisteredparameterfine
 * @fires InputChannel#event:controlchange-nonregisteredparametercoarse
 * @fires InputChannel#event:controlchange-registeredparameterfine
 * @fires InputChannel#event:controlchange-registeredparametercoarse
 * @fires InputChannel#event:controlchange-allsoundoff
 * @fires InputChannel#event:controlchange-resetallcontrollers
 * @fires InputChannel#event:controlchange-localcontrol
 * @fires InputChannel#event:controlchange-allnotesoff
 * @fires InputChannel#event:controlchange-omnimodeoff
 * @fires InputChannel#event:controlchange-omnimodeon
 * @fires InputChannel#event:controlchange-monomodeon
 * @fires InputChannel#event:controlchange-polymodeon
 * @fires InputChannel#event:
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class yJ extends ss{constructor(e,n){super(),this._input=e,this._number=n,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(e){const n=Object.assign({},e);n.port=this.input,n.target=this,n.type="midimessage",this.emit(n.type,n),this._parseEventForStandardMessages(n)}_parseEventForStandardMessages(e){const n=Object.assign({},e);n.type=n.message.type||"unknownmessage";const s=e.message.dataBytes[0],i=e.message.dataBytes[1];if(n.type==="noteoff"||n.type==="noteon"&&i===0)this.notesState[s]=!1,n.type="noteoff",n.note=new Wa(X.offsetNumber(s,this.octaveOffset+this.input.octaveOffset+W.octaveOffset),{rawAttack:0,rawRelease:i}),n.value=X.from7bitToFloat(i),n.rawValue=i,n.velocity=n.note.release,n.rawVelocity=n.note.rawRelease;else if(n.type==="noteon")this.notesState[s]=!0,n.note=new Wa(X.offsetNumber(s,this.octaveOffset+this.input.octaveOffset+W.octaveOffset),{rawAttack:i}),n.value=X.from7bitToFloat(i),n.rawValue=i,n.velocity=n.note.attack,n.rawVelocity=n.note.rawAttack;else if(n.type==="keyaftertouch")n.note=new Wa(X.offsetNumber(s,this.octaveOffset+this.input.octaveOffset+W.octaveOffset)),n.value=X.from7bitToFloat(i),n.rawValue=i,n.identifier=n.note.identifier,n.key=n.note.number,n.rawKey=s;else if(n.type==="controlchange"){n.controller={number:s,name:U.CONTROL_CHANGE_MESSAGES[s].name,description:U.CONTROL_CHANGE_MESSAGES[s].description,position:U.CONTROL_CHANGE_MESSAGES[s].position},n.subtype=n.controller.name||"controller"+s,n.value=X.from7bitToFloat(i),n.rawValue=i;const r=Object.assign({},n);r.type=`${n.type}-controller${s}`,delete r.subtype,this.emit(r.type,r);const a=Object.assign({},n);a.type=`${n.type}-`+U.CONTROL_CHANGE_MESSAGES[s].name,delete a.subtype,a.type.indexOf("controller")!==0&&this.emit(a.type,a),n.message.dataBytes[0]>=120&&this._parseChannelModeMessage(n),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(n.message.dataBytes[0])&&this._parseEventForParameterNumber(n)}else n.type==="programchange"?(n.value=s,n.rawValue=n.value):n.type==="channelaftertouch"?(n.value=X.from7bitToFloat(s),n.rawValue=s):n.type==="pitchbend"?(n.value=((i<<7)+s-8192)/8192,n.rawValue=(i<<7)+s):n.type="unknownmessage";this.emit(n.type,n)}_parseChannelModeMessage(e){const n=Object.assign({},e);n.type=n.controller.name,n.type==="localcontrol"&&(n.value=n.message.data[2]===127,n.rawValue=n.message.data[2]),n.type==="omnimodeon"?(n.type="omnimode",n.value=!0,n.rawValue=n.message.data[2]):n.type==="omnimodeoff"&&(n.type="omnimode",n.value=!1,n.rawValue=n.message.data[2]),n.type==="monomodeon"?(n.type="monomode",n.value=!0,n.rawValue=n.message.data[2]):n.type==="polymodeon"&&(n.type="monomode",n.value=!1,n.rawValue=n.message.data[2]),this.emit(n.type,n)}_parseEventForParameterNumber(e){const n=e.message.dataBytes[0],s=e.message.dataBytes[1];n===99||n===101?(this._nrpnBuffer=[],this._rpnBuffer=[],n===99?this._nrpnBuffer=[e.message]:s!==127&&(this._rpnBuffer=[e.message])):n===98||n===100?n===98?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(e.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&s!==127?this._rpnBuffer.push(e.message):this._rpnBuffer=[]):(n===6||n===38||n===96||n===97)&&(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],e):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],e):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(e){return e===6||e===38||e===96||e===97||e===98||e===99||e===100||e===101}_dispatchParameterNumberEvent(e,n,s,i){e=e==="nrpn"?"nrpn":"rpn";const r={target:i.target,timestamp:i.timestamp,message:i.message,parameterMsb:n,parameterLsb:s,value:X.from7bitToFloat(i.message.dataBytes[1]),rawValue:i.message.dataBytes[1]};e==="rpn"?r.parameter=Object.keys(U.REGISTERED_PARAMETERS).find(l=>U.REGISTERED_PARAMETERS[l][0]===n&&U.REGISTERED_PARAMETERS[l][1]===s):r.parameter=(n<<7)+s;const a=U.CONTROL_CHANGE_MESSAGES[i.message.dataBytes[0]].name;r.type=`${e}-${a}`,this.emit(r.type,r);const o=Object.assign({},r);o.type==="nrpn-dataincrement"?o.type="nrpn-databuttonincrement":o.type==="nrpn-datadecrement"?o.type="nrpn-databuttondecrement":o.type==="rpn-dataincrement"?o.type="rpn-databuttonincrement":o.type==="rpn-datadecrement"&&(o.type="rpn-databuttondecrement"),this.emit(o.type,o),r.type=e,r.subtype=a,this.emit(r.type,r)}getChannelModeByNumber(e){return W.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),e=Math.floor(e)),X.getChannelModeByNumber(e)}getCcNameByNumber(e){if(W.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),e=parseInt(e),!(e>=0&&e<=127)))throw new RangeError("Invalid control change number.");return X.getCcNameByNumber(e)}getNoteState(e){e instanceof Wa&&(e=e.identifier);const n=X.guessNoteNumber(e,W.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[n]}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(e){this.validation&&(e=!!e),this.parameterNumberEventsEnabled=e}}/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class LM{constructor(e){this.rawData=e,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=(this.statusByte&15)+1):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=X.getPropertyByValue(U.CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=X.getPropertyByValue(U.SYSTEM_MESSAGES,this.command)),this.statusByte===U.SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class vJ extends ss{constructor(e){super(),this._midiInput=e,this._octaveOffset=0,this.channels=[];for(let n=1;n<=16;n++)this.channels[n]=new yJ(this,n);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(e){let n={timestamp:W.time,target:this,port:this};e.port.connection==="open"?(n.type="opened",this.emit("opened",n)):e.port.connection==="closed"&&e.port.state==="connected"?(n.type="closed",this.emit("closed",n)):e.port.connection==="closed"&&e.port.state==="disconnected"?(n.type="disconnected",n.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",n)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught: ",e.port.connection,e.port.state)}_onMidiMessage(e){const n=new LM(e.data),s={port:this,target:this,message:n,timestamp:e.timeStamp,type:"midimessage",data:n.data,rawData:n.data,statusByte:n.data[0],dataBytes:n.dataBytes};this.emit("midimessage",s),n.isSystemMessage?this._parseEvent(s):n.isChannelMessage&&this.channels[n.channel]._processMidiMessageEvent(s),this._forwarders.forEach(i=>i.forward(n))}_parseEvent(e){const n=Object.assign({},e);n.type=n.message.type||"unknownmidimessage",n.type==="songselect"&&(n.song=e.data[1]+1,n.value=e.data[1],n.rawValue=n.value),this.emit(n.type,n)}async open(){try{await this._midiInput.open()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}getChannelModeByNumber(){W.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(e,n,s={}){if(W.validation&&typeof s=="function"){let i=n!=null?[].concat(n):void 0;n=s,s={channels:i}}if(U.CHANNEL_EVENTS.includes(e)){s.channels===void 0&&(s.channels=U.MIDI_CHANNEL_NUMBERS);let i=[];return X.sanitizeChannels(s.channels).forEach(r=>{i.push(this.channels[r].addListener(e,n,s))}),i}else return super.addListener(e,n,s)}addOneTimeListener(e,n,s={}){return s.remaining=1,this.addListener(e,n,s)}on(e,n,s,i){return this.addListener(e,n,s,i)}hasListener(e,n,s={}){if(W.validation&&typeof s=="function"){let i=[].concat(n);n=s,s={channels:i}}return U.CHANNEL_EVENTS.includes(e)?(s.channels===void 0&&(s.channels=U.MIDI_CHANNEL_NUMBERS),X.sanitizeChannels(s.channels).every(i=>this.channels[i].hasListener(e,n))):super.hasListener(e,n)}removeListener(e,n,s={}){if(W.validation&&typeof s=="function"){let i=[].concat(n);n=s,s={channels:i}}if(s.channels===void 0&&(s.channels=U.MIDI_CHANNEL_NUMBERS),e==null)return X.sanitizeChannels(s.channels).forEach(i=>{this.channels[i]&&this.channels[i].removeListener()}),super.removeListener();U.CHANNEL_EVENTS.includes(e)?X.sanitizeChannels(s.channels).forEach(i=>{this.channels[i].removeListener(e,n,s)}):super.removeListener(e,n,s)}addForwarder(e,n={}){let s;return e instanceof Aw?s=e:s=new Aw(e,n),this._forwarders.push(s),s}removeForwarder(e){this._forwarders=this._forwarders.filter(n=>n!==e)}hasForwarder(e){return this._forwarders.includes(e)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return W.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class bJ extends ss{constructor(){super(),this.defaults={note:{attack:X.from7bitToFloat(64),release:X.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(e={},n=!1){if(X.isNode){try{window.navigator}catch{let o=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)();global.navigator||(global.navigator={}),Object.assign(global.navigator,o)}try{}catch{global.performance=await Object.getPrototypeOf(async function(){}).constructor(`
        let perf_hooks = await import("perf_hooks");
        return perf_hooks.performance;
        `)()}}if(this.validation=e.validation!==!1,this.validation&&(typeof e=="function"&&(e={callback:e,sysex:n}),n&&(e.sysex=!0)),this.enabled)return typeof e.callback=="function"&&e.callback(),Promise.resolve();const s={timestamp:this.time,target:this,type:"error",error:void 0},i={timestamp:this.time,target:this,type:"midiaccessgranted"},r={timestamp:this.time,target:this,type:"enabled"};try{typeof e.requestMIDIAccessFunction=="function"?this.interface=await e.requestMIDIAccessFunction({sysex:e.sysex,software:e.software}):this.interface=await navigator.requestMIDIAccess({sysex:e.sysex,software:e.software})}catch(a){return s.error=a,this.emit("error",s),typeof e.callback=="function"&&e.callback(a),Promise.reject(a)}this.emit("midiaccessgranted",i),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(a){return s.error=a,this.emit("error",s),typeof e.callback=="function"&&e.callback(a),Promise.reject(a)}return this.emit("enabled",r),typeof e.callback=="function"&&e.callback(),Promise.resolve(this)}async disable(){return this.interface&&(this.interface.onstatechange=void 0),this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface=null;let e={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",e),this.removeListener()})}getInputById(e,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(n.disconnected){for(let s=0;s<this._disconnectedInputs.length;s++)if(this._disconnectedInputs[s]._midiInput&&this._disconnectedInputs[s].id===e.toString())return this._disconnectedInputs[s]}else for(let s=0;s<this.inputs.length;s++)if(this.inputs[s]._midiInput&&this.inputs[s].id===e.toString())return this.inputs[s]}getInputByName(e,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(n.disconnected){for(let s=0;s<this._disconnectedInputs.length;s++)if(~this._disconnectedInputs[s].name.indexOf(e))return this._disconnectedInputs[s]}else for(let s=0;s<this.inputs.length;s++)if(~this.inputs[s].name.indexOf(e))return this.inputs[s]}getOutputByName(e,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(n.disconnected){for(let s=0;s<this._disconnectedOutputs.length;s++)if(~this._disconnectedOutputs[s].name.indexOf(e))return this._disconnectedOutputs[s]}else for(let s=0;s<this.outputs.length;s++)if(~this.outputs[s].name.indexOf(e))return this.outputs[s]}getOutputById(e,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(n.disconnected){for(let s=0;s<this._disconnectedOutputs.length;s++)if(this._disconnectedOutputs[s]._midiOutput&&this._disconnectedOutputs[s].id===e.toString())return this._disconnectedOutputs[s]}else for(let s=0;s<this.outputs.length;s++)if(this.outputs[s]._midiOutput&&this.outputs[s].id===e.toString())return this.outputs[s]}noteNameToNumber(e){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),X.toNoteNumber(e,this.octaveOffset)}getOctave(e){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),e=parseInt(e)),!isNaN(e)&&e>=0&&e<=127?X.getNoteDetails(X.offsetNumber(e,this.octaveOffset)).octave:!1}sanitizeChannels(e){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),X.sanitizeChannels(e)}toMIDIChannels(e){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),X.sanitizeChannels(e)}guessNoteNumber(e){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),X.guessNoteNumber(e,this.octaveOffset)}getValidNoteArray(e,n={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),X.buildNoteArray(e,n)}convertToTimestamp(e){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),X.toTimestamp(e)}async _destroyInputsAndOutputs(){let e=[];return this.inputs.forEach(n=>e.push(n.destroy())),this.outputs.forEach(n=>e.push(n.destroy())),Promise.all(e).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(e){this._updateInputsAndOutputs();let n={timestamp:e.timeStamp,type:e.port.state,target:this};if(e.port.state==="connected"&&e.port.connection==="open"){e.port.type==="output"?n.port=this.getOutputById(e.port.id):e.port.type==="input"&&(n.port=this.getInputById(e.port.id)),this.emit(e.port.state,n);const s=Object.assign({},n);s.type="portschanged",this.emit(s.type,s)}else if(e.port.state==="disconnected"&&e.port.connection==="pending"){e.port.type==="input"?n.port=this.getInputById(e.port.id,{disconnected:!0}):e.port.type==="output"&&(n.port=this.getOutputById(e.port.id,{disconnected:!0})),this.emit(e.port.state,n);const s=Object.assign({},n);s.type="portschanged",this.emit(s.type,s)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let n=this._inputs.length-1;n>=0;n--){const s=this._inputs[n];Array.from(this.interface.inputs.values()).find(r=>r===s._midiInput)||(this._disconnectedInputs.push(s),this._inputs.splice(n,1))}let e=[];return this.interface.inputs.forEach(n=>{if(!this._inputs.find(s=>s._midiInput===n)){let s=this._disconnectedInputs.find(i=>i._midiInput===n);s||(s=new vJ(n)),this._inputs.push(s),e.push(s.open())}}),Promise.all(e)}async _updateOutputs(){if(!this.interface)return;for(let n=this._outputs.length-1;n>=0;n--){const s=this._outputs[n];Array.from(this.interface.outputs.values()).find(r=>r===s._midiOutput)||(this._disconnectedOutputs.push(s),this._outputs.splice(n,1))}let e=[];return this.interface.outputs.forEach(n=>{if(!this._outputs.find(s=>s._midiOutput===n)){let s=this._disconnectedOutputs.find(i=>i._midiOutput===n);s||(s=new sy(n)),this._outputs.push(s),e.push(s.open())}}),Promise.all(e)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),X.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),X.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&!!navigator.requestMIDIAccess}get sysexEnabled(){return!!(this.interface&&this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.1.14"}get flavour(){return"esm"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),U.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.SYSTEM_MESSAGES."),U.SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.CHANNEL_MODE_MESSAGES."),U.CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been replaced by the Enumerations.CONTROL_CHANGE_MESSAGES array."),U.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.REGISTERED_PARAMETERS."),U.REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}}const W=new bJ;W.constructor=null;class xJ{constructor(){le(this,"enabled",!1);le(this,"activeInput",null);le(this,"callbacks",null);le(this,"deviceChangeCallbacks",[])}async enable(){this.enabled||(await W.enable(),this.enabled=!0,W.addListener("connected",()=>this.handleDeviceChange()),W.addListener("disconnected",()=>this.handleDeviceChange()),this.autoSelectDevice())}getDevices(){return this.enabled?W.inputs.map(e=>({id:e.id,name:e.name,manufacturer:e.manufacturer,connected:!0})):[]}selectDevice(e){this.detachListeners();const n=W.inputs.find(s=>s.id===e);n&&(this.activeInput=n,this.attachListeners())}getActiveDeviceId(){var e;return((e=this.activeInput)==null?void 0:e.id)??null}setCallbacks(e){this.callbacks=e}onDeviceChange(e){return this.deviceChangeCallbacks.push(e),()=>{this.deviceChangeCallbacks=this.deviceChangeCallbacks.filter(n=>n!==e)}}autoSelectDevice(){const e=W.inputs.find(n=>$7.test(n.name));e?this.selectDevice(e.id):W.inputs.length>0&&this.selectDevice(W.inputs[0].id)}handleDeviceChange(){const e=this.getDevices();this.activeInput&&!W.inputs.find(n=>n.id===this.activeInput.id)&&(this.activeInput=null,this.autoSelectDevice()),this.deviceChangeCallbacks.forEach(n=>n(e))}attachListeners(){this.activeInput&&(this.activeInput.addListener("noteon",e=>{var s;const n=G7(e.note.rawAttack);(s=this.callbacks)==null||s.onNoteOn(e.note.number,n,e.message.channel)}),this.activeInput.addListener("noteoff",e=>{var n;(n=this.callbacks)==null||n.onNoteOff(e.note.number,e.message.channel)}),this.activeInput.addListener("controlchange",e=>{var n;e.controller.number!==void 0&&e.rawValue!==void 0&&((n=this.callbacks)==null||n.onControlChange(e.controller.number,e.rawValue))}))}detachListeners(){this.activeInput&&(this.activeInput.removeListener("noteon"),this.activeInput.removeListener("noteoff"),this.activeInput.removeListener("controlchange"))}isEnabled(){return this.enabled}dispose(){this.detachListeners(),this.activeInput=null,this.callbacks=null,this.deviceChangeCallbacks=[],this.enabled&&(W.disable(),this.enabled=!1)}}const Tr=new xJ;function _J(t){const[e,n]=g.useState([]),[s,i]=g.useState(null),[r,a]=g.useState(!1),o=g.useCallback(async()=>{await Tr.enable(),a(!0),n(Tr.getDevices()),i(Tr.getActiveDeviceId())},[]);g.useEffect(()=>{Tr.setCallbacks(t)},[t]),g.useEffect(()=>r?Tr.onDeviceChange(u=>{n(u),i(Tr.getActiveDeviceId())}):void 0,[r]);const l=g.useCallback(c=>{Tr.selectDevice(c),i(c)},[]);return{devices:e,activeDeviceId:s,enabled:r,enable:o,selectDevice:l}}class wJ{constructor(){le(this,"volume",null);le(this,"started",!1);le(this,"kick",null);le(this,"snare",null);le(this,"closedHH",null);le(this,"openHH",null);le(this,"clap",null);le(this,"tom",null);le(this,"crash",null);le(this,"ride",null);le(this,"hhFilter",null)}async start(){this.started||(this.volume=new Ls(-6).toDestination(),this.hhFilter=new da({frequency:8e3,type:"highpass"}),this.hhFilter.connect(this.volume),this.kick=new Wn({pitchDecay:.05,octaves:6,oscillator:{type:"sine"},envelope:{attack:.001,decay:.3,sustain:0,release:.1}}),this.kick.connect(this.volume),this.snare=new zt({noise:{type:"white"},envelope:{attack:.001,decay:.15,sustain:0,release:.05}}),this.snare.connect(this.volume),this.closedHH=new zt({noise:{type:"white"},envelope:{attack:.001,decay:.05,sustain:0,release:.01}}),this.closedHH.connect(this.hhFilter),this.openHH=new zt({noise:{type:"white"},envelope:{attack:.001,decay:.3,sustain:0,release:.1}}),this.openHH.connect(this.hhFilter),this.clap=new zt({noise:{type:"pink"},envelope:{attack:.001,decay:.12,sustain:0,release:.05}}),this.clap.connect(this.volume),this.tom=new Wn({pitchDecay:.03,octaves:4,oscillator:{type:"sine"},envelope:{attack:.001,decay:.2,sustain:0,release:.1}}),this.tom.connect(this.volume),this.crash=new Ts({frequency:300,envelope:{attack:.001,decay:1.4,release:.4},harmonicity:5.1,modulationIndex:20,resonance:800,octaves:1.5}),this.crash.connect(this.volume),this.ride=new Ts({frequency:400,envelope:{attack:.001,decay:.5,release:.15},harmonicity:5.1,modulationIndex:14,resonance:1200,octaves:1}),this.ride.connect(this.volume),this.started=!0)}hit(e,n){var i,r,a,o,l,c,u,d;if(!this.started)return;const s=n*.8+.2;switch(e){case 0:(i=this.kick)==null||i.triggerAttackRelease("C1","8n",Zn(),s);break;case 1:(r=this.snare)==null||r.triggerAttackRelease("8n",Zn(),s);break;case 2:(a=this.closedHH)==null||a.triggerAttackRelease("16n",Zn(),s);break;case 3:(o=this.openHH)==null||o.triggerAttackRelease("8n",Zn(),s);break;case 4:(l=this.clap)==null||l.triggerAttackRelease("16n",Zn(),s);break;case 5:(c=this.tom)==null||c.triggerAttackRelease("G1","8n",Zn(),s);break;case 6:(u=this.crash)==null||u.triggerAttackRelease(300,"16n",Zn(),s);break;case 7:(d=this.ride)==null||d.triggerAttackRelease(400,"32n",Zn(),s);break}}hitByMidiNote(e,n){const s=eh.get(e);return s===void 0?!1:(this.hit(s,n),!0)}mute(){this.volume&&(this.volume.mute=!0)}unmute(){this.volume&&(this.volume.mute=!1)}setVolume(e){this.volume&&(this.volume.volume.value=e)}isStarted(){return this.started}dispose(){var e,n,s,i,r,a,o,l,c,u;(e=this.kick)==null||e.dispose(),(n=this.snare)==null||n.dispose(),(s=this.closedHH)==null||s.dispose(),(i=this.openHH)==null||i.dispose(),(r=this.clap)==null||r.dispose(),(a=this.tom)==null||a.dispose(),(o=this.crash)==null||o.dispose(),(l=this.ride)==null||l.dispose(),(c=this.hhFilter)==null||c.dispose(),(u=this.volume)==null||u.dispose(),this.kick=null,this.snare=null,this.closedHH=null,this.openHH=null,this.clap=null,this.tom=null,this.crash=null,this.ride=null,this.hhFilter=null,this.volume=null,this.started=!1}}const bh=new wJ;function SJ(t={}){const{onVolumeChange:e,onEffectChange:n,onDrumFlash:s,muted:i=!1}=t,[r,a]=g.useState(new Map),[o,l]=g.useState({reverbWet:0,chorusDepth:0,filterCutoff:18e3,filterResonance:1}),[c,u]=g.useState("auto"),d=g.useRef("auto"),h=g.useRef(i);h.current=i;const p=g.useCallback(T=>{d.current=T,u(T)},[]),m=g.useCallback((T,E)=>d.current==="keys"?!1:E===X7?!0:eh.has(T),[]),y=g.useCallback((T,E,C=1)=>{const M=!h.current;if(m(T,C)){const A=eh.get(T);A!==void 0&&(M&&bh.hit(A,E),s==null||s(A)),ce.getState()==="recording"&&ce.captureNoteOn(T,E,!0)}else M&&Oe.noteOn(T,E),ce.getState()==="recording"&&ce.captureNoteOn(T,E,!1),a(A=>{const k=new Map(A);return k.set(T,{note:T,velocity:E}),k})},[m,s]),x=g.useCallback((T,E=1)=>{const C=!h.current;m(T,E)?ce.getState()==="recording"&&ce.captureNoteOff(T):(C&&Oe.noteOff(T),ce.getState()==="recording"&&ce.captureNoteOff(T),a(M=>{const A=new Map(M);return A.delete(T),A}))},[m]),v=g.useRef(new Map),b=g.useCallback((T,E)=>{switch(T){case"reverbWet":return E.reverbWet;case"chorusDepth":return E.chorusDepth;case"filterCutoff":return Math.log(E.filterCutoff/60)/Math.log(18e3/60);case"filterResonance":return E.filterResonance/20}},[]),_=g.useCallback((T,E,C)=>{const M=E/127,A=v.current.get(T);if(A!=null&&A.pickedUp)return!0;const k=b(C,Oe.getEffectParams()),N=.05;if(!A){const I=Math.abs(M-k)<N;return v.current.set(T,{lastRaw:E,pickedUp:I}),I}const P=A.lastRaw/127,j=P<=k&&M>=k||P>=k&&M<=k||Math.abs(M-k)<N;return A.lastRaw=E,j&&(A.pickedUp=!0),j},[b]),w=g.useCallback((T,E)=>{if(K7.includes(T)){const M=Math.round(-40+E/127*40);Oe.setVolume(M),e==null||e(M);return}const C=Y7.find(M=>M.cc===T);if(C){if(!_(T,E,C.effect))return;const M=E/127;switch(C.effect){case"reverbWet":Oe.setReverbWet(M);break;case"chorusDepth":Oe.setChorusDepth(M);break;case"filterCutoff":{const k=60*Math.pow(300,M);Oe.setFilterCutoff(k);break}case"filterResonance":Oe.setFilterResonance(M*20);break}const A=Oe.getEffectParams();l(A),n==null||n(A)}},[e,n,_]),S=g.useMemo(()=>({onNoteOn:(T,E,C)=>y(T,E,C),onNoteOff:(T,E)=>x(T,E),onControlChange:w}),[y,x,w]);return{activeNotes:r,noteOn:y,noteOff:x,callbacks:S,effectParams:o,setEffectParams:l,routingMode:c,setRoutingMode:p}}function CJ(){const[t,e]=g.useState(new Set),n=g.useRef(new Map),s=g.useCallback(i=>{e(o=>{const l=new Set(o);return l.add(i),l});const r=n.current.get(i);r&&clearTimeout(r);const a=setTimeout(()=>{e(o=>{const l=new Set(o);return l.delete(i),l}),n.current.delete(i)},150);n.current.set(i,a)},[]);return{activePads:t,flashPad:s}}function TJ(t){const[e,n]=g.useState(0),[s,i]=g.useState(null),r=g.useMemo(()=>{if(!s)return new Set;const o=ab.find(l=>l.name===s);return o?GZ(e,o):new Set},[e,s]),a=g.useMemo(()=>{const o=Array.from(t.keys());return kM(o)},[t]);return{selectedRoot:e,setSelectedRoot:n,selectedScale:s,setSelectedScale:i,highlightedNotes:r,detectedChord:a}}function EJ(){const[t,e]=g.useState([]),[n,s]=g.useState("stopped"),[i,r]=g.useState(0),[a,o]=g.useState(o2),[l,c]=g.useState(!1),[u,d]=g.useState(null),[h,p]=g.useState(null),[m,y]=g.useState(null),[x,v]=g.useState(64),b=g.useRef(!1),_=g.useCallback(()=>{const L=ce.getArrangement();e([...L.tracks]),s(ce.getState()),o(L.bpm),v(L.lengthBeats),d(ce.getArmedTrackId()),p(ce.getRecordingTrackId())},[]);g.useEffect(()=>{b.current||(ce.loadFromLocalStorage(),_(),b.current=!0);const L=ce.onStateChange(_),z=ce.onPositionChange(te=>{r(te),y(ce.getLiveRegion())});return()=>{L(),z()}},[_]),g.useEffect(()=>{b.current&&ce.saveToLocalStorage()},[t,a]);const w=g.useCallback((L="synth",z=0)=>{ce.addTrack(L,z)},[]),S=g.useCallback(L=>{ce.removeTrack(L)},[]),T=g.useCallback((L,z)=>{ce.setTrackInstrument(L,z)},[]),E=g.useCallback((L,z)=>{ce.setTrackVolume(L,z)},[]),C=g.useCallback((L,z)=>{ce.setTrackMute(L,z)},[]),M=g.useCallback((L,z)=>{ce.setTrackSolo(L,z)},[]),A=g.useCallback((L,z)=>{ce.addRegion(L,z)},[]),k=g.useCallback((L,z)=>{ce.removeRegion(L,z)},[]),N=g.useCallback((L,z,te)=>{ce.moveRegion(L,z,te)},[]),P=g.useCallback((L,z,te)=>{ce.moveRegionToTrack(L,z,te)},[]),j=g.useCallback((L,z,te)=>{ce.splitRegion(L,z,te)},[]),I=g.useCallback((L,z)=>{ce.duplicateRegion(L,z)},[]),D=g.useCallback(()=>{ce.play()},[]),O=g.useCallback(()=>{ce.stop()},[]),R=g.useCallback(L=>{ce.setBpm(L)},[]),B=g.useCallback(()=>{const L=!ce.isMetronomeEnabled();ce.setMetronomeEnabled(L),c(L)},[]),F=g.useCallback(L=>{ce.armTrackForRecording(L)},[]),Z=g.useCallback(()=>{ce.startRecordingToTrack()},[]),V=g.useCallback(()=>{ce.stopRecordingToTrack()},[]),q=g.useCallback((L,z,te)=>{ce.updateRegionNotes(L,z,te)},[]),$=g.useCallback((L,z,te,fe)=>{ce.resizeRegion(L,z,te,fe)},[]),H=g.useCallback((L,z)=>{ce.copyRegion(L,z)},[]),Y=g.useCallback((L,z)=>{ce.pasteRegion(L,z)},[]);return{tracks:t,transportState:n,position:i,bpm:a,metronomeOn:l,armedTrackId:u,recordingTrackId:h,liveRegion:m,lengthBeats:x,addTrack:w,removeTrack:S,setTrackInstrument:T,setTrackVolume:E,setTrackMute:C,setTrackSolo:M,addRegion:A,removeRegion:k,moveRegion:N,moveRegionToTrack:P,splitRegion:j,duplicateRegion:I,play:D,stop:O,setBpm:R,toggleMetronome:B,armTrack:F,startRecording:Z,stopRecording:V,updateRegionNotes:q,resizeRegion:$,copyRegion:H,pasteRegion:Y}}function AJ(){const[t,e]=g.useState(!1),[n,s]=g.useState(!1),[i,r]=g.useState(),[a,o]=g.useState();g.useEffect(()=>{const u=()=>{e(on.canUndo()),s(on.canRedo()),r(on.undoLabel()),o(on.redoLabel())};return u(),on.onStateChange(u)},[]);const l=g.useCallback(()=>{ce.performUndo()},[]),c=g.useCallback(()=>{ce.performRedo()},[]);return{canUndo:t,canRedo:n,undoLabel:i,redoLabel:a,undo:l,redo:c}}function kJ(){const[t,e]=g.useState(!1),n=g.useCallback(()=>{e(s=>{const i=!s;return i?(Oe.mute(),bh.mute()):(Oe.unmute(),bh.unmute()),i})},[]);return{muted:t,toggleMute:n}}const kw="micro-daw-recent-projects",Nw=10;class NJ{constructor(){le(this,"filePath",null);le(this,"isDirty",!1);le(this,"recentProjects",[]);le(this,"callbacks",[]);le(this,"createdAt",new Date().toISOString());this.loadRecentProjects()}getFilePath(){return this.filePath}getIsDirty(){return this.isDirty}getProjectName(){if(!this.filePath)return"Untitled";const e=this.filePath.split("/");return e[e.length-1].replace(/\.mdaw$/,"")}getRecentProjects(){return this.recentProjects}async save(){return this.filePath?(await this.writeToFile(this.filePath),!0):await this.saveAs()}async saveAs(){const e=window.electronAPI;if(!e)return!1;const n=await e.projectShowSaveDialog(this.getProjectName()+".mdaw");return n?(this.filePath=n,this.createdAt=new Date().toISOString(),await this.writeToFile(n),!0):!1}async open(){if(!await this.promptUnsaved())return!1;const n=window.electronAPI;if(!n)return!1;const s=await n.projectShowOpenDialog();return s?await this.loadFromFile(s):!1}async openFromPath(e){return await this.promptUnsaved()?await this.loadFromFile(e):!1}async newProject(){if(!await this.promptUnsaved())return!1;this.filePath=null,this.isDirty=!1,this.createdAt=new Date().toISOString();const n={id:crypto.randomUUID(),name:"Untitled",bpm:120,lengthBeats:64,tracks:[]};return ce.restoreFromSnapshot(n),on.clear(),Oe.setVolume(-12),Oe.setReverbWet(0),Oe.setChorusDepth(0),Oe.setFilterCutoff(18e3),Oe.setFilterResonance(1),this.updateWindowTitle(),this.emit(),!0}markDirty(){this.isDirty||(this.isDirty=!0,this.updateWindowTitle(),this.emit())}async handleBeforeClose(){const e=window.electronAPI;if(!e)return;if(!this.isDirty){e.forceClose();return}const n=await e.projectShowUnsavedDialog(this.getProjectName());n==="save"?await this.save()&&e.forceClose():n==="dont-save"&&e.forceClose()}onStateChange(e){return this.callbacks.push(e),()=>{this.callbacks=this.callbacks.filter(n=>n!==e)}}async writeToFile(e){const n=window.electronAPI;if(!n)return;const s=new Date().toISOString(),i={version:"1.0.0",arrangement:ce.getArrangement(),audioConfig:{masterVolume:Oe.getVolume(),effectParams:Oe.getEffectParams()},createdAt:this.createdAt,modifiedAt:s};await n.projectSave(e,JSON.stringify(i,null,2)),this.isDirty=!1,this.addToRecentProjects(e,s),this.updateWindowTitle(),this.emit()}async loadFromFile(e){const n=window.electronAPI;if(!n)return!1;try{const s=await n.projectLoad(e),i=JSON.parse(s);if(i.version!=="1.0.0"&&console.warn("Unknown project version:",i.version),ce.restoreFromSnapshot(i.arrangement),on.clear(),i.audioConfig){Oe.setVolume(i.audioConfig.masterVolume);const r=i.audioConfig.effectParams;Oe.setReverbWet(r.reverbWet),Oe.setChorusDepth(r.chorusDepth),Oe.setFilterCutoff(r.filterCutoff),Oe.setFilterResonance(r.filterResonance)}return this.filePath=e,this.isDirty=!1,this.createdAt=i.createdAt||new Date().toISOString(),this.addToRecentProjects(e,i.modifiedAt),this.updateWindowTitle(),this.emit(),!0}catch(s){return console.error("Failed to load project:",s),!1}}async promptUnsaved(){if(!this.isDirty)return!0;const e=window.electronAPI;if(!e)return!0;const n=await e.projectShowUnsavedDialog(this.getProjectName());return n==="save"?await this.save():n==="dont-save"}updateWindowTitle(){const e=window.electronAPI;if(!e)return;const n=this.getProjectName(),s=this.isDirty?" *":"";e.projectSetTitle(`${n}${s} - Micro DAW`)}addToRecentProjects(e,n){var i;this.recentProjects=this.recentProjects.filter(r=>r.filePath!==e);const s=((i=e.split("/").pop())==null?void 0:i.replace(/\.mdaw$/,""))||"Untitled";this.recentProjects.unshift({filePath:e,name:s,modifiedAt:n}),this.recentProjects.length>Nw&&(this.recentProjects=this.recentProjects.slice(0,Nw)),this.saveRecentProjects()}loadRecentProjects(){try{const e=localStorage.getItem(kw);e&&(this.recentProjects=JSON.parse(e))}catch{this.recentProjects=[]}}saveRecentProjects(){try{localStorage.setItem(kw,JSON.stringify(this.recentProjects))}catch{}}emit(){for(const e of this.callbacks)e()}}const Vt=new NJ;function MJ(){const[t,e]=g.useState(Vt.getFilePath()),[n,s]=g.useState(Vt.getIsDirty()),[i,r]=g.useState(Vt.getProjectName()),[a,o]=g.useState(Vt.getRecentProjects()),l=g.useRef(!1),c=g.useCallback(()=>{e(Vt.getFilePath()),s(Vt.getIsDirty()),r(Vt.getProjectName()),o([...Vt.getRecentProjects()])},[]);g.useEffect(()=>Vt.onStateChange(c),[c]),g.useEffect(()=>ce.onStateChange(()=>{if(l.current){l.current=!1;return}Vt.markDirty()}),[]),g.useEffect(()=>{const y=window.electronAPI;if(y)return y.onBeforeClose(()=>{Vt.handleBeforeClose()})},[]);const u=g.useCallback(async()=>{await Vt.save()},[]),d=g.useCallback(async()=>{await Vt.saveAs()},[]),h=g.useCallback(async()=>{l.current=!0,await Vt.open()},[]),p=g.useCallback(async()=>{l.current=!0,await Vt.newProject()},[]),m=g.useCallback(async y=>{l.current=!0,await Vt.openFromPath(y)},[]);return{filePath:t,isDirty:n,projectName:i,recentProjects:a,save:u,saveAs:d,open:h,newProject:p,openRecent:m}}function RJ(){const{mode:t,switchMode:e}=pJ(),n=mJ(),s=CJ(),i=EJ(),r=AJ(),a=kJ(),o=MJ(),[l,c]=g.useState(null),[u,d]=g.useState(!1),[h,p]=g.useState(!1),{activeNotes:m,noteOn:y,noteOff:x,callbacks:v,effectParams:b,setEffectParams:_,routingMode:w,setRoutingMode:S}=SJ({onVolumeChange:n.changeVolume,onDrumFlash:s.flashPad,muted:a.muted}),T=_J(v),E=TJ(m),C=g.useCallback(async()=>{await n.start(),await bh.start(),await T.enable()},[n,T]),M=g.useMemo(()=>{const k={"new-project":()=>o.newProject(),"open-project":()=>o.open(),save:()=>o.save(),"save-as":()=>o.saveAs(),"switch-daw":()=>e("daw"),"switch-learn":()=>e("learn"),"switch-practice":()=>e("practice"),"play-stop":()=>{i.transportState==="playing"||i.transportState==="recording"?i.stop():i.play()},record:()=>{i.transportState==="recording"?i.stopRecording():i.transportState==="stopped"&&i.startRecording()},"toggle-metronome":()=>i.toggleMetronome(),undo:()=>r.undo(),redo:()=>r.redo(),"add-synth-track":()=>i.addTrack("synth"),"add-drum-track":()=>i.addTrack("drums"),"export-wav":()=>d(!0),"export-midi":()=>d(!0),"toggle-fullscreen":()=>{var N;return(N=window.electronAPI)==null?void 0:N.toggleFullscreen()}};return _n.forEach((N,P)=>{k[`preset-${P}`]=()=>n.changePreset(P)}),k},[o,e,i,r,n]);if(g.useEffect(()=>{if(!n.started)return;const k=N=>{if(N.target instanceof HTMLInputElement||N.target instanceof HTMLTextAreaElement)return;const P=N.metaKey||N.ctrlKey;if(P&&N.code==="KeyK"){N.preventDefault(),p(j=>!j);return}if(P&&N.code==="KeyS"){N.preventDefault(),N.shiftKey?o.saveAs():o.save();return}if(P&&N.code==="KeyO"){N.preventDefault(),o.open();return}if(P&&N.code==="KeyN"){N.preventDefault(),o.newProject();return}if(P&&N.code==="Digit1"){N.preventDefault(),e("daw");return}if(P&&N.code==="Digit2"){N.preventDefault(),e("learn");return}if(P&&N.code==="Digit3"){N.preventDefault(),e("practice");return}if(P&&N.code==="KeyZ"){N.preventDefault(),N.shiftKey?r.redo():r.undo();return}if(P&&N.code==="KeyE"){N.preventDefault(),d(j=>!j);return}if(t==="daw"){if(N.code==="Escape"&&l){N.preventDefault(),c(null);return}switch(N.code){case"Space":N.preventDefault(),i.transportState==="playing"||i.transportState==="recording"?i.stop():i.play();break;case"KeyR":N.preventDefault(),i.transportState==="recording"?i.stopRecording():i.transportState==="stopped"&&i.startRecording();break;case"KeyM":N.preventDefault(),i.toggleMetronome();break}}};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[n.started,i,r,l,t,e,o]),!n.started)return f.jsx(I4,{onStart:C});const A=(k,N)=>{y(df[k].midiNote,N)};return f.jsxs(QW,{defaultOpen:!1,className:"h-full min-h-0 flex-col",children:[f.jsx(Ou,{zoneName:"Controls",fallbackVariant:"inline",children:f.jsx(lF,{mode:t,devices:T.devices,activeDeviceId:T.activeDeviceId,onSelectDevice:T.selectDevice,activeNotes:m,volume:n.volume,onVolumeChange:n.changeVolume,presetIndex:n.presetIndex,onPresetChange:n.changePreset,detectedChord:E.detectedChord,routingMode:w,onRoutingModeChange:S,canUndo:r.canUndo,canRedo:r.canRedo,onUndo:r.undo,onRedo:r.redo,muted:a.muted,onToggleMute:a.toggleMute,projectName:o.projectName,isDirty:o.isDirty,onSave:o.save,sidebarTrigger:f.jsx(JW,{className:"-ml-1"})})}),f.jsxs("div",{className:"flex min-h-0 flex-1",children:[f.jsx(i$,{mode:t,onModeChange:e,recentProjects:o.recentProjects,onOpenRecent:o.openRecent,onNewProject:o.newProject,onOpen:o.open}),f.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[t==="daw"&&f.jsxs(f.Fragment,{children:[f.jsxs(Ou,{zoneName:"Transport",fallbackVariant:"inline",children:[f.jsx(e9,{effectParams:b,onEffectChange:_}),f.jsx(s9,{state:i.transportState==="recording"?"recording":i.transportState,bpm:i.bpm,metronomeOn:i.metronomeOn,positionBeats:i.position,recordDisabled:!i.armedTrackId,onRecord:i.startRecording,onStopRecording:i.stopRecording,onPlay:i.play,onStop:i.stop,onBpmChange:i.setBpm,onMetronomeToggle:i.toggleMetronome})]}),l?f.jsx(Ou,{zoneName:"Piano Roll",fallbackVariant:"panel",onReset:()=>c(null),children:f.jsx(I9,{trackId:l.trackId,regionId:l.regionId,arrangement:ce.getArrangement(),onClose:()=>c(null),onUpdateNotes:i.updateRegionNotes,onResizeRegion:i.resizeRegion})}):f.jsxs(Ou,{zoneName:"Arrangement",fallbackVariant:"panel",children:[f.jsx(b9,{tracks:i.tracks,transportState:i.transportState,position:i.position,lengthBeats:i.lengthBeats,recordingTrackId:i.recordingTrackId,armedTrackId:i.armedTrackId,liveRegion:i.liveRegion,onAddTrack:i.addTrack,onRemoveTrack:i.removeTrack,onSetTrackInstrument:i.setTrackInstrument,onSetTrackVolume:i.setTrackVolume,onSetTrackMute:i.setTrackMute,onSetTrackSolo:i.setTrackSolo,onMoveRegion:i.moveRegion,onResizeRegion:i.resizeRegion,onRemoveRegion:i.removeRegion,onSplitRegion:i.splitRegion,onDuplicateRegion:i.duplicateRegion,onArmTrack:i.armTrack,canUndo:r.canUndo,canRedo:r.canRedo,onUndo:r.undo,onRedo:r.redo,onEditRegion:(k,N)=>c({trackId:k,regionId:N}),onCopyRegion:i.copyRegion,onPasteRegion:i.pasteRegion,hasClipboard:ce.hasClipboard(),onExport:()=>d(!0)}),f.jsx(r9,{activeNotes:m,onNoteOn:y,onNoteOff:x,highlightedNotes:E.highlightedNotes,activePads:s.activePads,onDrumHit:A})]}),u&&f.jsx(W9,{onClose:()=>d(!1)})]}),f.jsx(RW,{open:h,onOpenChange:p,mode:t,actions:M,recentProjects:o.recentProjects,onOpenRecent:o.openRecent}),t==="learn"&&f.jsx(PZ,{activeNotes:m,onNoteOn:y,onNoteOff:x,activePads:s.activePads,onDrumHit:A,detectedChord:E.detectedChord}),t==="practice"&&f.jsx(fJ,{activeNotes:m,onNoteOn:y,onNoteOff:x,activePads:s.activePads,onDrumHit:A,detectedChord:E.detectedChord,highlightedNotes:E.highlightedNotes,selectedRoot:E.selectedRoot,setSelectedRoot:E.setSelectedRoot,selectedScale:E.selectedScale,setSelectedScale:E.setSelectedScale})]})]})]})}const DJ=BO.createRoot(document.getElementById("root"));DJ.render(g.createElement(RJ));export{Mw as g};
