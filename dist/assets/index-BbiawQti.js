var $N=Object.defineProperty;var YN=(t,e,n)=>e in t?$N(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var de=(t,e,n)=>YN(t,typeof e!="symbol"?e+"":e,n);function KN(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const i in s)if(i!=="default"&&!(i in t)){const r=Object.getOwnPropertyDescriptor(s,i);r&&Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:()=>s[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function h_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var f_={exports:{}},Zd={},p_={exports:{}},m_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,D){var M=R.length;R.push(D);e:for(;0<M;){var B=M-1>>>1,z=R[B];if(0<i(z,D))R[B]=D,R[M]=z,M=B;else break e}}function n(R){return R.length===0?null:R[0]}function s(R){if(R.length===0)return null;var D=R[0],M=R.pop();if(M!==D){R[0]=M;e:for(var B=0,z=R.length,$=z>>>1;B<$;){var ne=2*(B+1)-1,re=R[ne],ie=ne+1,K=R[ie];if(0>i(re,M))ie<z&&0>i(K,re)?(R[B]=K,R[ie]=M,B=ie):(R[B]=re,R[ne]=M,B=ne);else if(ie<z&&0>i(K,M))R[B]=K,R[ie]=M,B=ie;else break e}}return D}function i(R,D){var M=R.sortIndex-D.sortIndex;return M!==0?M:R.id-D.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],u=1,d=null,h=3,f=!1,m=!1,g=!1,b=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function S(R){for(var D=n(c);D!==null;){if(D.callback===null)s(c);else if(D.startTime<=R)s(c),D.sortIndex=D.expirationTime,e(l,D);else break;D=n(c)}}function w(R){if(g=!1,S(R),!m)if(n(l)!==null)m=!0,E||(E=!0,O());else{var D=n(c);D!==null&&I(w,D.startTime-R)}}var E=!1,T=-1,C=5,N=-1;function A(){return b?!0:!(t.unstable_now()-N<C)}function k(){if(b=!1,E){var R=t.unstable_now();N=R;var D=!0;try{e:{m=!1,g&&(g=!1,v(T),T=-1),f=!0;var M=h;try{t:{for(S(R),d=n(l);d!==null&&!(d.expirationTime>R&&A());){var B=d.callback;if(typeof B=="function"){d.callback=null,h=d.priorityLevel;var z=B(d.expirationTime<=R);if(R=t.unstable_now(),typeof z=="function"){d.callback=z,S(R),D=!0;break t}d===n(l)&&s(l),S(R)}else s(l);d=n(l)}if(d!==null)D=!0;else{var $=n(c);$!==null&&I(w,$.startTime-R),D=!1}}break e}finally{d=null,h=M,f=!1}D=void 0}}finally{D?O():E=!1}}}var O;if(typeof _=="function")O=function(){_(k)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,j=P.port2;P.port1.onmessage=k,O=function(){j.postMessage(null)}}else O=function(){y(k,0)};function I(R,D){T=y(function(){R(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_next=function(R){switch(h){case 1:case 2:case 3:var D=3;break;default:D=h}var M=h;h=D;try{return R()}finally{h=M}},t.unstable_requestPaint=function(){b=!0},t.unstable_runWithPriority=function(R,D){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var M=h;h=R;try{return D()}finally{h=M}},t.unstable_scheduleCallback=function(R,D,M){var B=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?B+M:B):M=B,R){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=M+z,R={id:u++,callback:D,priorityLevel:R,startTime:M,expirationTime:z,sortIndex:-1},M>B?(R.sortIndex=M,e(c,R),n(l)===null&&R===n(c)&&(g?(v(T),T=-1):g=!0,I(w,M-B))):(R.sortIndex=z,e(l,R),m||f||(m=!0,E||(E=!0,O()))),R},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(R){var D=h;return function(){var M=h;h=D;try{return R.apply(this,arguments)}finally{h=M}}}})(m_);p_.exports=m_;var XN=p_.exports,g_={exports:{}},pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fg=Symbol.for("react.transitional.element"),QN=Symbol.for("react.portal"),ZN=Symbol.for("react.fragment"),JN=Symbol.for("react.strict_mode"),eM=Symbol.for("react.profiler"),tM=Symbol.for("react.consumer"),nM=Symbol.for("react.context"),sM=Symbol.for("react.forward_ref"),iM=Symbol.for("react.suspense"),rM=Symbol.for("react.memo"),y_=Symbol.for("react.lazy"),aM=Symbol.for("react.activity"),Z0=Symbol.iterator;function oM(t){return t===null||typeof t!="object"?null:(t=Z0&&t[Z0]||t["@@iterator"],typeof t=="function"?t:null)}var v_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b_=Object.assign,x_={};function yo(t,e,n){this.props=t,this.context=e,this.refs=x_,this.updater=n||v_}yo.prototype.isReactComponent={};yo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function __(){}__.prototype=yo.prototype;function pg(t,e,n){this.props=t,this.context=e,this.refs=x_,this.updater=n||v_}var mg=pg.prototype=new __;mg.constructor=pg;b_(mg,yo.prototype);mg.isPureReactComponent=!0;var J0=Array.isArray;function _p(){}var Qe={H:null,A:null,T:null,S:null},S_=Object.prototype.hasOwnProperty;function gg(t,e,n){var s=n.ref;return{$$typeof:fg,type:t,key:e,ref:s!==void 0?s:null,props:n}}function lM(t,e){return gg(t.type,e,t.props)}function yg(t){return typeof t=="object"&&t!==null&&t.$$typeof===fg}function cM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ev=/\/+/g;function rf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?cM(""+t.key):e.toString(36)}function uM(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(_p,_p):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function fa(t,e,n,s,i){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(r){case"bigint":case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case fg:case QN:a=!0;break;case y_:return a=t._init,fa(a(t._payload),e,n,s,i)}}if(a)return i=i(t),a=s===""?"."+rf(t,0):s,J0(i)?(n="",a!=null&&(n=a.replace(ev,"$&/")+"/"),fa(i,e,n,"",function(c){return c})):i!=null&&(yg(i)&&(i=lM(i,n+(i.key==null||t&&t.key===i.key?"":(""+i.key).replace(ev,"$&/")+"/")+a)),e.push(i)),1;a=0;var o=s===""?".":s+":";if(J0(t))for(var l=0;l<t.length;l++)s=t[l],r=o+rf(s,l),a+=fa(s,e,n,r,i);else if(l=oM(t),typeof l=="function")for(t=l.call(t),l=0;!(s=t.next()).done;)s=s.value,r=o+rf(s,l++),a+=fa(s,e,n,r,i);else if(r==="object"){if(typeof t.then=="function")return fa(uM(t),e,n,s,i);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return a}function Bc(t,e,n){if(t==null)return t;var s=[],i=0;return fa(t,s,"","",function(r){return e.call(n,r,i++)}),s}function dM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tv=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},hM={map:Bc,forEach:function(t,e,n){Bc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Bc(t,function(){e++}),e},toArray:function(t){return Bc(t,function(e){return e})||[]},only:function(t){if(!yg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Activity=aM;pe.Children=hM;pe.Component=yo;pe.Fragment=ZN;pe.Profiler=eM;pe.PureComponent=pg;pe.StrictMode=JN;pe.Suspense=iM;pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Qe;pe.__COMPILER_RUNTIME={__proto__:null,c:function(t){return Qe.H.useMemoCache(t)}};pe.cache=function(t){return function(){return t.apply(null,arguments)}};pe.cacheSignal=function(){return null};pe.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var s=b_({},t.props),i=t.key;if(e!=null)for(r in e.key!==void 0&&(i=""+e.key),e)!S_.call(e,r)||r==="key"||r==="__self"||r==="__source"||r==="ref"&&e.ref===void 0||(s[r]=e[r]);var r=arguments.length-2;if(r===1)s.children=n;else if(1<r){for(var a=Array(r),o=0;o<r;o++)a[o]=arguments[o+2];s.children=a}return gg(t.type,i,s)};pe.createContext=function(t){return t={$$typeof:nM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:tM,_context:t},t};pe.createElement=function(t,e,n){var s,i={},r=null;if(e!=null)for(s in e.key!==void 0&&(r=""+e.key),e)S_.call(e,s)&&s!=="key"&&s!=="__self"&&s!=="__source"&&(i[s]=e[s]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];i.children=o}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)i[s]===void 0&&(i[s]=a[s]);return gg(t,r,i)};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:sM,render:t}};pe.isValidElement=yg;pe.lazy=function(t){return{$$typeof:y_,_payload:{_status:-1,_result:t},_init:dM}};pe.memo=function(t,e){return{$$typeof:rM,type:t,compare:e===void 0?null:e}};pe.startTransition=function(t){var e=Qe.T,n={};Qe.T=n;try{var s=t(),i=Qe.S;i!==null&&i(n,s),typeof s=="object"&&s!==null&&typeof s.then=="function"&&s.then(_p,tv)}catch(r){tv(r)}finally{e!==null&&n.types!==null&&(e.types=n.types),Qe.T=e}};pe.unstable_useCacheRefresh=function(){return Qe.H.useCacheRefresh()};pe.use=function(t){return Qe.H.use(t)};pe.useActionState=function(t,e,n){return Qe.H.useActionState(t,e,n)};pe.useCallback=function(t,e){return Qe.H.useCallback(t,e)};pe.useContext=function(t){return Qe.H.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t,e){return Qe.H.useDeferredValue(t,e)};pe.useEffect=function(t,e){return Qe.H.useEffect(t,e)};pe.useEffectEvent=function(t){return Qe.H.useEffectEvent(t)};pe.useId=function(){return Qe.H.useId()};pe.useImperativeHandle=function(t,e,n){return Qe.H.useImperativeHandle(t,e,n)};pe.useInsertionEffect=function(t,e){return Qe.H.useInsertionEffect(t,e)};pe.useLayoutEffect=function(t,e){return Qe.H.useLayoutEffect(t,e)};pe.useMemo=function(t,e){return Qe.H.useMemo(t,e)};pe.useOptimistic=function(t,e){return Qe.H.useOptimistic(t,e)};pe.useReducer=function(t,e,n){return Qe.H.useReducer(t,e,n)};pe.useRef=function(t){return Qe.H.useRef(t)};pe.useState=function(t){return Qe.H.useState(t)};pe.useSyncExternalStore=function(t,e,n){return Qe.H.useSyncExternalStore(t,e,n)};pe.useTransition=function(){return Qe.H.useTransition()};pe.version="19.2.4";g_.exports=pe;var x=g_.exports;const xt=h_(x),w_=KN({__proto__:null,default:xt},[x]);var C_={exports:{}},Xt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fM=x;function T_(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function pi(){}var qt={d:{f:pi,r:function(){throw Error(T_(522))},D:pi,C:pi,L:pi,m:pi,X:pi,S:pi,M:pi},p:0,findDOMNode:null},pM=Symbol.for("react.portal");function mM(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pM,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}var al=fM.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Jd(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Xt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=qt;Xt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(T_(299));return mM(t,e,null,n)};Xt.flushSync=function(t){var e=al.T,n=qt.p;try{if(al.T=null,qt.p=2,t)return t()}finally{al.T=e,qt.p=n,qt.d.f()}};Xt.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,qt.d.C(t,e))};Xt.prefetchDNS=function(t){typeof t=="string"&&qt.d.D(t)};Xt.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,s=Jd(n,e.crossOrigin),i=typeof e.integrity=="string"?e.integrity:void 0,r=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?qt.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:s,integrity:i,fetchPriority:r}):n==="script"&&qt.d.X(t,{crossOrigin:s,integrity:i,fetchPriority:r,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Xt.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Jd(e.as,e.crossOrigin);qt.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&qt.d.M(t)};Xt.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,s=Jd(n,e.crossOrigin);qt.d.L(t,n,{crossOrigin:s,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Xt.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Jd(e.as,e.crossOrigin);qt.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else qt.d.m(t)};Xt.requestFormReset=function(t){qt.d.r(t)};Xt.unstable_batchedUpdates=function(t,e){return t(e)};Xt.useFormState=function(t,e,n){return al.H.useFormState(t,e,n)};Xt.useFormStatus=function(){return al.H.useHostTransitionStatus()};Xt.version="19.2.4";function E_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(E_)}catch(t){console.error(t)}}E_(),C_.exports=Xt;var vo=C_.exports;const gM=h_(vo);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wt=XN,A_=x,yM=vo;function H(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function k_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ql(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function N_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function M_(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function nv(t){if(Ql(t)!==t)throw Error(H(188))}function vM(t){var e=t.alternate;if(!e){if(e=Ql(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,s=e;;){var i=n.return;if(i===null)break;var r=i.alternate;if(r===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===n)return nv(i),t;if(r===s)return nv(i),e;r=r.sibling}throw Error(H(188))}if(n.return!==s.return)n=i,s=r;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,s=r;break}if(o===s){a=!0,s=i,n=r;break}o=o.sibling}if(!a){for(o=r.child;o;){if(o===n){a=!0,n=r,s=i;break}if(o===s){a=!0,s=r,n=i;break}o=o.sibling}if(!a)throw Error(H(189))}}if(n.alternate!==s)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function R_(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=R_(t),e!==null)return e;t=t.sibling}return null}var Je=Object.assign,bM=Symbol.for("react.element"),Ic=Symbol.for("react.transitional.element"),Zo=Symbol.for("react.portal"),va=Symbol.for("react.fragment"),D_=Symbol.for("react.strict_mode"),Sp=Symbol.for("react.profiler"),O_=Symbol.for("react.consumer"),qs=Symbol.for("react.context"),vg=Symbol.for("react.forward_ref"),wp=Symbol.for("react.suspense"),Cp=Symbol.for("react.suspense_list"),bg=Symbol.for("react.memo"),_i=Symbol.for("react.lazy"),Tp=Symbol.for("react.activity"),xM=Symbol.for("react.memo_cache_sentinel"),sv=Symbol.iterator;function Ho(t){return t===null||typeof t!="object"?null:(t=sv&&t[sv]||t["@@iterator"],typeof t=="function"?t:null)}var _M=Symbol.for("react.client.reference");function Ep(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===_M?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case va:return"Fragment";case Sp:return"Profiler";case D_:return"StrictMode";case wp:return"Suspense";case Cp:return"SuspenseList";case Tp:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Zo:return"Portal";case qs:return t.displayName||"Context";case O_:return(t._context.displayName||"Context")+".Consumer";case vg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bg:return e=t.displayName||null,e!==null?e:Ep(t.type)||"Memo";case _i:e=t._payload,t=t._init;try{return Ep(t(e))}catch{}}return null}var Jo=Array.isArray,ue=A_.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Oe=yM.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Rr={pending:!1,data:null,method:null,action:null},Ap=[],ba=-1;function ks(t){return{current:t}}function At(t){0>ba||(t.current=Ap[ba],Ap[ba]=null,ba--)}function Ge(t,e){ba++,Ap[ba]=t.current,t.current=e}var ys=ks(null),Cl=ks(null),Bi=ks(null),Hu=ks(null);function Uu(t,e){switch(Ge(Bi,e),Ge(Cl,t),Ge(ys,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?cb(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=cb(e),t=Jw(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}At(ys),Ge(ys,t)}function Ka(){At(ys),At(Cl),At(Bi)}function kp(t){t.memoizedState!==null&&Ge(Hu,t);var e=ys.current,n=Jw(e,t.type);e!==n&&(Ge(Cl,t),Ge(ys,n))}function Gu(t){Cl.current===t&&(At(ys),At(Cl)),Hu.current===t&&(At(Hu),Pl._currentValue=Rr)}var af,iv;function _r(t){if(af===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);af=e&&e[1]||"",iv=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+af+t+iv}var of=!1;function lf(t,e){if(!t||of)return"";of=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(e){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(f){var h=f}Reflect.construct(t,[],d)}else{try{d.call()}catch(f){h=f}t.call(d.prototype)}}else{try{throw Error()}catch(f){h=f}(d=t())&&typeof d.catch=="function"&&d.catch(function(){})}}catch(f){if(f&&h&&typeof f.stack=="string")return[f.stack,h.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=s.DetermineComponentFrameRoot(),a=r[0],o=r[1];if(a&&o){var l=a.split(`
`),c=o.split(`
`);for(i=s=0;s<l.length&&!l[s].includes("DetermineComponentFrameRoot");)s++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(s===l.length||i===c.length)for(s=l.length-1,i=c.length-1;1<=s&&0<=i&&l[s]!==c[i];)i--;for(;1<=s&&0<=i;s--,i--)if(l[s]!==c[i]){if(s!==1||i!==1)do if(s--,i--,0>i||l[s]!==c[i]){var u=`
`+l[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=i);break}}}finally{of=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?_r(n):""}function SM(t,e){switch(t.tag){case 26:case 27:case 5:return _r(t.type);case 16:return _r("Lazy");case 13:return t.child!==e&&e!==null?_r("Suspense Fallback"):_r("Suspense");case 19:return _r("SuspenseList");case 0:case 15:return lf(t.type,!1);case 11:return lf(t.type.render,!1);case 1:return lf(t.type,!0);case 31:return _r("Activity");default:return""}}function rv(t){try{var e="",n=null;do e+=SM(t,n),n=t,t=t.return;while(t);return e}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var Np=Object.prototype.hasOwnProperty,xg=wt.unstable_scheduleCallback,cf=wt.unstable_cancelCallback,wM=wt.unstable_shouldYield,CM=wt.unstable_requestPaint,xn=wt.unstable_now,TM=wt.unstable_getCurrentPriorityLevel,j_=wt.unstable_ImmediatePriority,P_=wt.unstable_UserBlockingPriority,qu=wt.unstable_NormalPriority,EM=wt.unstable_LowPriority,B_=wt.unstable_IdlePriority,AM=wt.log,kM=wt.unstable_setDisableYieldValue,Zl=null,_n=null;function Mi(t){if(typeof AM=="function"&&kM(t),_n&&typeof _n.setStrictMode=="function")try{_n.setStrictMode(Zl,t)}catch{}}var Sn=Math.clz32?Math.clz32:RM,NM=Math.log,MM=Math.LN2;function RM(t){return t>>>=0,t===0?32:31-(NM(t)/MM|0)|0}var Lc=256,Vc=262144,zc=4194304;function Sr(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function eh(t,e,n){var s=t.pendingLanes;if(s===0)return 0;var i=0,r=t.suspendedLanes,a=t.pingedLanes;t=t.warmLanes;var o=s&134217727;return o!==0?(s=o&~r,s!==0?i=Sr(s):(a&=o,a!==0?i=Sr(a):n||(n=o&~t,n!==0&&(i=Sr(n))))):(o=s&~r,o!==0?i=Sr(o):a!==0?i=Sr(a):n||(n=s&~t,n!==0&&(i=Sr(n)))),i===0?0:e!==0&&e!==i&&!(e&r)&&(r=i&-i,n=e&-e,r>=n||r===32&&(n&4194048)!==0)?e:i}function Jl(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function DM(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function I_(){var t=zc;return zc<<=1,!(zc&62914560)&&(zc=4194304),t}function uf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ec(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function OM(t,e,n,s,i,r){var a=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var o=t.entanglements,l=t.expirationTimes,c=t.hiddenUpdates;for(n=a&~n;0<n;){var u=31-Sn(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(h!==null)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];f!==null&&(f.lane&=-536870913)}n&=~d}s!==0&&L_(t,s,0),r!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=r&~(a&~e))}function L_(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var s=31-Sn(e);t.entangledLanes|=e,t.entanglements[s]=t.entanglements[s]|1073741824|n&261930}function V_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-Sn(n),i=1<<s;i&e|t[s]&e&&(t[s]|=e),n&=~i}}function z_(t,e){var n=e&-e;return n=n&42?1:_g(n),n&(t.suspendedLanes|e)?0:n}function _g(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Sg(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function F_(){var t=Oe.p;return t!==0?t:(t=window.event,t===void 0?32:uC(t.type))}function av(t,e){var n=Oe.p;try{return Oe.p=t,e()}finally{Oe.p=n}}var or=Math.random().toString(36).slice(2),jt="__reactFiber$"+or,ln="__reactProps$"+or,bo="__reactContainer$"+or,Mp="__reactEvents$"+or,jM="__reactListeners$"+or,PM="__reactHandles$"+or,ov="__reactResources$"+or,tc="__reactMarker$"+or;function wg(t){delete t[jt],delete t[ln],delete t[Mp],delete t[jM],delete t[PM]}function xa(t){var e=t[jt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[bo]||n[jt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=pb(t);t!==null;){if(n=t[jt])return n;t=pb(t)}return e}t=n,n=t.parentNode}return null}function xo(t){if(t=t[jt]||t[bo]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function el(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(H(33))}function La(t){var e=t[ov];return e||(e=t[ov]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Et(t){t[tc]=!0}var H_=new Set,U_={};function Kr(t,e){Xa(t,e),Xa(t+"Capture",e)}function Xa(t,e){for(U_[t]=e,t=0;t<e.length;t++)H_.add(e[t])}var BM=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lv={},cv={};function IM(t){return Np.call(cv,t)?!0:Np.call(lv,t)?!1:BM.test(t)?cv[t]=!0:(lv[t]=!0,!1)}function gu(t,e,n){if(IM(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var s=e.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function Fc(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function Ps(t,e,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+s)}}function Rn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function G_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function LM(t,e,n){var s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,r=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,r.call(this,a)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Rp(t){if(!t._valueTracker){var e=G_(t)?"checked":"value";t._valueTracker=LM(t,e,""+t[e])}}function q_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=G_(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Wu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var VM=/[\n"\\]/g;function jn(t){return t.replace(VM,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Dp(t,e,n,s,i,r,a,o){t.name="",a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.type=a:t.removeAttribute("type"),e!=null?a==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Rn(e)):t.value!==""+Rn(e)&&(t.value=""+Rn(e)):a!=="submit"&&a!=="reset"||t.removeAttribute("value"),e!=null?Op(t,a,Rn(e)):n!=null?Op(t,a,Rn(n)):s!=null&&t.removeAttribute("value"),i==null&&r!=null&&(t.defaultChecked=!!r),i!=null&&(t.checked=i&&typeof i!="function"&&typeof i!="symbol"),o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.name=""+Rn(o):t.removeAttribute("name")}function W_(t,e,n,s,i,r,a,o){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),e!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||e!=null)){Rp(t);return}n=n!=null?""+Rn(n):"",e=e!=null?""+Rn(e):n,o||e===t.value||(t.value=e),t.defaultValue=e}s=s??i,s=typeof s!="function"&&typeof s!="symbol"&&!!s,t.checked=o?t.checked:!!s,t.defaultChecked=!!s,a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(t.name=a),Rp(t)}function Op(t,e,n){e==="number"&&Wu(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Va(t,e,n,s){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Rn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,s&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function $_(t,e,n){if(e!=null&&(e=""+Rn(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Rn(n):""}function Y_(t,e,n,s){if(e==null){if(s!=null){if(n!=null)throw Error(H(92));if(Jo(s)){if(1<s.length)throw Error(H(93));s=s[0]}n=s}n==null&&(n=""),e=n}n=Rn(e),t.defaultValue=n,s=t.textContent,s===n&&s!==""&&s!==null&&(t.value=s),Rp(t)}function Qa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var zM=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function uv(t,e,n){var s=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?s?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":s?t.setProperty(e,n):typeof n!="number"||n===0||zM.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function K_(t,e,n){if(e!=null&&typeof e!="object")throw Error(H(62));if(t=t.style,n!=null){for(var s in n)!n.hasOwnProperty(s)||e!=null&&e.hasOwnProperty(s)||(s.indexOf("--")===0?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="");for(var i in e)s=e[i],e.hasOwnProperty(i)&&n[i]!==s&&uv(t,i,s)}else for(var r in e)e.hasOwnProperty(r)&&uv(t,r,e[r])}function Cg(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var FM=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),HM=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yu(t){return HM.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ws(){}var jp=null;function Tg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _a=null,za=null;function dv(t){var e=xo(t);if(e&&(t=e.stateNode)){var n=t[ln]||null;e:switch(t=e.stateNode,e.type){case"input":if(Dp(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+jn(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var i=s[ln]||null;if(!i)throw Error(H(90));Dp(s,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(e=0;e<n.length;e++)s=n[e],s.form===t.form&&q_(s)}break e;case"textarea":$_(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Va(t,!!n.multiple,e,!1)}}}var df=!1;function X_(t,e,n){if(df)return t(e,n);df=!0;try{var s=t(e);return s}finally{if(df=!1,(_a!==null||za!==null)&&(hh(),_a&&(e=_a,t=za,za=_a=null,dv(e),t)))for(e=0;e<t.length;e++)dv(t[e])}}function Tl(t,e){var n=t.stateNode;if(n===null)return null;var s=n[ln]||null;if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var Zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pp=!1;if(Zs)try{var Uo={};Object.defineProperty(Uo,"passive",{get:function(){Pp=!0}}),window.addEventListener("test",Uo,Uo),window.removeEventListener("test",Uo,Uo)}catch{Pp=!1}var Ri=null,Eg=null,vu=null;function Q_(){if(vu)return vu;var t,e=Eg,n=e.length,s,i="value"in Ri?Ri.value:Ri.textContent,r=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(s=1;s<=a&&e[n-s]===i[r-s];s++);return vu=i.slice(t,1<s?1-s:void 0)}function bu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Hc(){return!0}function hv(){return!1}function dn(t){function e(n,s,i,r,a){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=r,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Hc:hv,this.isPropagationStopped=hv,this}return Je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hc)},persist:function(){},isPersistent:Hc}),e}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},th=dn(Xr),nc=Je({},Xr,{view:0,detail:0}),UM=dn(nc),hf,ff,Go,nh=Je({},nc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ag,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Go&&(Go&&t.type==="mousemove"?(hf=t.screenX-Go.screenX,ff=t.screenY-Go.screenY):ff=hf=0,Go=t),hf)},movementY:function(t){return"movementY"in t?t.movementY:ff}}),fv=dn(nh),GM=Je({},nh,{dataTransfer:0}),qM=dn(GM),WM=Je({},nc,{relatedTarget:0}),pf=dn(WM),$M=Je({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),YM=dn($M),KM=Je({},Xr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),XM=dn(KM),QM=Je({},Xr,{data:0}),pv=dn(QM),ZM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=e2[t])?!!e[t]:!1}function Ag(){return t2}var n2=Je({},nc,{key:function(t){if(t.key){var e=ZM[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?JM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ag,charCode:function(t){return t.type==="keypress"?bu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),s2=dn(n2),i2=Je({},nh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mv=dn(i2),r2=Je({},nc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ag}),a2=dn(r2),o2=Je({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),l2=dn(o2),c2=Je({},nh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),u2=dn(c2),d2=Je({},Xr,{newState:0,oldState:0}),h2=dn(d2),f2=[9,13,27,32],kg=Zs&&"CompositionEvent"in window,ol=null;Zs&&"documentMode"in document&&(ol=document.documentMode);var p2=Zs&&"TextEvent"in window&&!ol,Z_=Zs&&(!kg||ol&&8<ol&&11>=ol),gv=" ",yv=!1;function J_(t,e){switch(t){case"keyup":return f2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Sa=!1;function m2(t,e){switch(t){case"compositionend":return eS(e);case"keypress":return e.which!==32?null:(yv=!0,gv);case"textInput":return t=e.data,t===gv&&yv?null:t;default:return null}}function g2(t,e){if(Sa)return t==="compositionend"||!kg&&J_(t,e)?(t=Q_(),vu=Eg=Ri=null,Sa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Z_&&e.locale!=="ko"?null:e.data;default:return null}}var y2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!y2[t.type]:e==="textarea"}function tS(t,e,n,s){_a?za?za.push(s):za=[s]:_a=s,e=ud(e,"onChange"),0<e.length&&(n=new th("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var ll=null,El=null;function v2(t){Xw(t,0)}function sh(t){var e=el(t);if(q_(e))return t}function bv(t,e){if(t==="change")return e}var nS=!1;if(Zs){var mf;if(Zs){var gf="oninput"in document;if(!gf){var xv=document.createElement("div");xv.setAttribute("oninput","return;"),gf=typeof xv.oninput=="function"}mf=gf}else mf=!1;nS=mf&&(!document.documentMode||9<document.documentMode)}function _v(){ll&&(ll.detachEvent("onpropertychange",sS),El=ll=null)}function sS(t){if(t.propertyName==="value"&&sh(El)){var e=[];tS(e,El,t,Tg(t)),X_(v2,e)}}function b2(t,e,n){t==="focusin"?(_v(),ll=e,El=n,ll.attachEvent("onpropertychange",sS)):t==="focusout"&&_v()}function x2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sh(El)}function _2(t,e){if(t==="click")return sh(e)}function S2(t,e){if(t==="input"||t==="change")return sh(e)}function w2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var En=typeof Object.is=="function"?Object.is:w2;function Al(t,e){if(En(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!Np.call(e,i)||!En(t[i],e[i]))return!1}return!0}function Sv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wv(t,e){var n=Sv(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sv(n)}}function iS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rS(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=Wu(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wu(t.document)}return e}function Ng(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var C2=Zs&&"documentMode"in document&&11>=document.documentMode,wa=null,Bp=null,cl=null,Ip=!1;function Cv(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ip||wa==null||wa!==Wu(s)||(s=wa,"selectionStart"in s&&Ng(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),cl&&Al(cl,s)||(cl=s,s=ud(Bp,"onSelect"),0<s.length&&(e=new th("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=wa)))}function yr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ca={animationend:yr("Animation","AnimationEnd"),animationiteration:yr("Animation","AnimationIteration"),animationstart:yr("Animation","AnimationStart"),transitionrun:yr("Transition","TransitionRun"),transitionstart:yr("Transition","TransitionStart"),transitioncancel:yr("Transition","TransitionCancel"),transitionend:yr("Transition","TransitionEnd")},yf={},aS={};Zs&&(aS=document.createElement("div").style,"AnimationEvent"in window||(delete Ca.animationend.animation,delete Ca.animationiteration.animation,delete Ca.animationstart.animation),"TransitionEvent"in window||delete Ca.transitionend.transition);function Qr(t){if(yf[t])return yf[t];if(!Ca[t])return t;var e=Ca[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in aS)return yf[t]=e[n];return t}var oS=Qr("animationend"),lS=Qr("animationiteration"),cS=Qr("animationstart"),T2=Qr("transitionrun"),E2=Qr("transitionstart"),A2=Qr("transitioncancel"),uS=Qr("transitionend"),dS=new Map,Lp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lp.push("scrollEnd");function ls(t,e){dS.set(t,e),Kr(e,[t])}var $u=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Nn=[],Ta=0,Mg=0;function ih(){for(var t=Ta,e=Mg=Ta=0;e<t;){var n=Nn[e];Nn[e++]=null;var s=Nn[e];Nn[e++]=null;var i=Nn[e];Nn[e++]=null;var r=Nn[e];if(Nn[e++]=null,s!==null&&i!==null){var a=s.pending;a===null?i.next=i:(i.next=a.next,a.next=i),s.pending=i}r!==0&&hS(n,i,r)}}function rh(t,e,n,s){Nn[Ta++]=t,Nn[Ta++]=e,Nn[Ta++]=n,Nn[Ta++]=s,Mg|=s,t.lanes|=s,t=t.alternate,t!==null&&(t.lanes|=s)}function Rg(t,e,n,s){return rh(t,e,n,s),Yu(t)}function Zr(t,e){return rh(t,null,null,e),Yu(t)}function hS(t,e,n){t.lanes|=n;var s=t.alternate;s!==null&&(s.lanes|=n);for(var i=!1,r=t.return;r!==null;)r.childLanes|=n,s=r.alternate,s!==null&&(s.childLanes|=n),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(i=!0)),t=r,r=r.return;return t.tag===3?(r=t.stateNode,i&&e!==null&&(i=31-Sn(n),t=r.hiddenUpdates,s=t[i],s===null?t[i]=[e]:s.push(e),e.lane=n|536870912),r):null}function Yu(t){if(50<vl)throw vl=0,rm=null,Error(H(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Ea={};function k2(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(t,e,n,s){return new k2(t,e,n,s)}function Dg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ys(t,e){var n=t.alternate;return n===null?(n=gn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function fS(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function xu(t,e,n,s,i,r){var a=0;if(s=t,typeof t=="function")Dg(t)&&(a=1);else if(typeof t=="string")a=OR(t,n,ys.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Tp:return t=gn(31,n,e,i),t.elementType=Tp,t.lanes=r,t;case va:return Dr(n.children,i,r,e);case D_:a=8,i|=24;break;case Sp:return t=gn(12,n,e,i|2),t.elementType=Sp,t.lanes=r,t;case wp:return t=gn(13,n,e,i),t.elementType=wp,t.lanes=r,t;case Cp:return t=gn(19,n,e,i),t.elementType=Cp,t.lanes=r,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qs:a=10;break e;case O_:a=9;break e;case vg:a=11;break e;case bg:a=14;break e;case _i:a=16,s=null;break e}a=29,n=Error(H(130,t===null?"null":typeof t,"")),s=null}return e=gn(a,n,e,i),e.elementType=t,e.type=s,e.lanes=r,e}function Dr(t,e,n,s){return t=gn(7,t,s,e),t.lanes=n,t}function vf(t,e,n){return t=gn(6,t,null,e),t.lanes=n,t}function pS(t){var e=gn(18,null,null,0);return e.stateNode=t,e}function bf(t,e,n){return e=gn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var Tv=new WeakMap;function Pn(t,e){if(typeof t=="object"&&t!==null){var n=Tv.get(t);return n!==void 0?n:(e={value:t,source:e,stack:rv(e)},Tv.set(t,e),e)}return{value:t,source:e,stack:rv(e)}}var Aa=[],ka=0,Ku=null,kl=0,Dn=[],On=0,Yi=null,fs=1,ps="";function Us(t,e){Aa[ka++]=kl,Aa[ka++]=Ku,Ku=t,kl=e}function mS(t,e,n){Dn[On++]=fs,Dn[On++]=ps,Dn[On++]=Yi,Yi=t;var s=fs;t=ps;var i=32-Sn(s)-1;s&=~(1<<i),n+=1;var r=32-Sn(e)+i;if(30<r){var a=i-i%5;r=(s&(1<<a)-1).toString(32),s>>=a,i-=a,fs=1<<32-Sn(e)+i|n<<i|s,ps=r+t}else fs=1<<r|n<<i|s,ps=t}function Og(t){t.return!==null&&(Us(t,1),mS(t,1,0))}function jg(t){for(;t===Ku;)Ku=Aa[--ka],Aa[ka]=null,kl=Aa[--ka],Aa[ka]=null;for(;t===Yi;)Yi=Dn[--On],Dn[On]=null,ps=Dn[--On],Dn[On]=null,fs=Dn[--On],Dn[On]=null}function gS(t,e){Dn[On++]=fs,Dn[On++]=ps,Dn[On++]=Yi,fs=e.id,ps=e.overflow,Yi=t}var Pt=null,Xe=null,Ce=!1,Ii=null,Bn=!1,Vp=Error(H(519));function Ki(t){var e=Error(H(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Nl(Pn(e,t)),Vp}function Ev(t){var e=t.stateNode,n=t.type,s=t.memoizedProps;switch(e[jt]=t,e[ln]=s,n){case"dialog":_e("cancel",e),_e("close",e);break;case"iframe":case"object":case"embed":_e("load",e);break;case"video":case"audio":for(n=0;n<Ol.length;n++)_e(Ol[n],e);break;case"source":_e("error",e);break;case"img":case"image":case"link":_e("error",e),_e("load",e);break;case"details":_e("toggle",e);break;case"input":_e("invalid",e),W_(e,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":_e("invalid",e);break;case"textarea":_e("invalid",e),Y_(e,s.value,s.defaultValue,s.children)}n=s.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||s.suppressHydrationWarning===!0||Zw(e.textContent,n)?(s.popover!=null&&(_e("beforetoggle",e),_e("toggle",e)),s.onScroll!=null&&_e("scroll",e),s.onScrollEnd!=null&&_e("scrollend",e),s.onClick!=null&&(e.onclick=Ws),e=!0):e=!1,e||Ki(t,!0)}function Av(t){for(Pt=t.return;Pt;)switch(Pt.tag){case 5:case 31:case 13:Bn=!1;return;case 27:case 3:Bn=!0;return;default:Pt=Pt.return}}function aa(t){if(t!==Pt)return!1;if(!Ce)return Av(t),Ce=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||um(t.type,t.memoizedProps)),n=!n),n&&Xe&&Ki(t),Av(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));Xe=fb(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));Xe=fb(t)}else e===27?(e=Xe,lr(t.type)?(t=pm,pm=null,Xe=t):Xe=e):Xe=Pt?zn(t.stateNode.nextSibling):null;return!0}function Ir(){Xe=Pt=null,Ce=!1}function xf(){var t=Ii;return t!==null&&(sn===null?sn=t:sn.push.apply(sn,t),Ii=null),t}function Nl(t){Ii===null?Ii=[t]:Ii.push(t)}var zp=ks(null),Jr=null,$s=null;function Ti(t,e,n){Ge(zp,e._currentValue),e._currentValue=n}function Ks(t){t._currentValue=zp.current,At(zp)}function Fp(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function Hp(t,e,n,s){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var r=i.dependencies;if(r!==null){var a=i.child;r=r.firstContext;e:for(;r!==null;){var o=r;r=i;for(var l=0;l<e.length;l++)if(o.context===e[l]){r.lanes|=n,o=r.alternate,o!==null&&(o.lanes|=n),Fp(r.return,n,t),s||(a=null);break e}r=o.next}}else if(i.tag===18){if(a=i.return,a===null)throw Error(H(341));a.lanes|=n,r=a.alternate,r!==null&&(r.lanes|=n),Fp(a,n,t),a=null}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}}function _o(t,e,n,s){t=null;for(var i=e,r=!1;i!==null;){if(!r){if(i.flags&524288)r=!0;else if(i.flags&262144)break}if(i.tag===10){var a=i.alternate;if(a===null)throw Error(H(387));if(a=a.memoizedProps,a!==null){var o=i.type;En(i.pendingProps.value,a.value)||(t!==null?t.push(o):t=[o])}}else if(i===Hu.current){if(a=i.alternate,a===null)throw Error(H(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(Pl):t=[Pl])}i=i.return}t!==null&&Hp(e,t,n,s),e.flags|=262144}function Xu(t){for(t=t.firstContext;t!==null;){if(!En(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Lr(t){Jr=t,$s=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Bt(t){return yS(Jr,t)}function Uc(t,e){return Jr===null&&Lr(t),yS(t,e)}function yS(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},$s===null){if(t===null)throw Error(H(308));$s=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else $s=$s.next=e;return n}var N2=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,s){t.push(s)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},M2=wt.unstable_scheduleCallback,R2=wt.unstable_NormalPriority,gt={$$typeof:qs,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pg(){return{controller:new N2,data:new Map,refCount:0}}function sc(t){t.refCount--,t.refCount===0&&M2(R2,function(){t.controller.abort()})}var ul=null,Up=0,Za=0,Fa=null;function D2(t,e){if(ul===null){var n=ul=[];Up=0,Za=ay(),Fa={status:"pending",value:void 0,then:function(s){n.push(s)}}}return Up++,e.then(kv,kv),e}function kv(){if(--Up===0&&ul!==null){Fa!==null&&(Fa.status="fulfilled");var t=ul;ul=null,Za=0,Fa=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function O2(t,e){var n=[],s={status:"pending",value:null,reason:null,then:function(i){n.push(i)}};return t.then(function(){s.status="fulfilled",s.value=e;for(var i=0;i<n.length;i++)(0,n[i])(e)},function(i){for(s.status="rejected",s.reason=i,i=0;i<n.length;i++)(0,n[i])(void 0)}),s}var Nv=ue.S;ue.S=function(t,e){Rw=xn(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&D2(t,e),Nv!==null&&Nv(t,e)};var Or=ks(null);function Bg(){var t=Or.current;return t!==null?t:Ue.pooledCache}function _u(t,e){e===null?Ge(Or,Or.current):Ge(Or,e.pool)}function vS(){var t=Bg();return t===null?null:{parent:gt._currentValue,pool:t}}var So=Error(H(460)),Ig=Error(H(474)),ah=Error(H(542)),Qu={then:function(){}};function Mv(t){return t=t.status,t==="fulfilled"||t==="rejected"}function bS(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Ws,Ws),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Dv(t),t;default:if(typeof e.status=="string")e.then(Ws,Ws);else{if(t=Ue,t!==null&&100<t.shellSuspendCounter)throw Error(H(482));t=e,t.status="pending",t.then(function(s){if(e.status==="pending"){var i=e;i.status="fulfilled",i.value=s}},function(s){if(e.status==="pending"){var i=e;i.status="rejected",i.reason=s}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,Dv(t),t}throw jr=e,So}}function wr(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(jr=n,So):n}}var jr=null;function Rv(){if(jr===null)throw Error(H(459));var t=jr;return jr=null,t}function Dv(t){if(t===So||t===ah)throw Error(H(483))}var Ha=null,Ml=0;function Gc(t){var e=Ml;return Ml+=1,Ha===null&&(Ha=[]),bS(Ha,t,e)}function qo(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function qc(t,e){throw e.$$typeof===bM?Error(H(525)):(t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function xS(t){function e(y,v){if(t){var _=y.deletions;_===null?(y.deletions=[v],y.flags|=16):_.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function s(y){for(var v=new Map;y!==null;)y.key!==null?v.set(y.key,y):v.set(y.index,y),y=y.sibling;return v}function i(y,v){return y=Ys(y,v),y.index=0,y.sibling=null,y}function r(y,v,_){return y.index=_,t?(_=y.alternate,_!==null?(_=_.index,_<v?(y.flags|=67108866,v):_):(y.flags|=67108866,v)):(y.flags|=1048576,v)}function a(y){return t&&y.alternate===null&&(y.flags|=67108866),y}function o(y,v,_,S){return v===null||v.tag!==6?(v=vf(_,y.mode,S),v.return=y,v):(v=i(v,_),v.return=y,v)}function l(y,v,_,S){var w=_.type;return w===va?u(y,v,_.props.children,S,_.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===_i&&wr(w)===v.type)?(v=i(v,_.props),qo(v,_),v.return=y,v):(v=xu(_.type,_.key,_.props,null,y.mode,S),qo(v,_),v.return=y,v)}function c(y,v,_,S){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=bf(_,y.mode,S),v.return=y,v):(v=i(v,_.children||[]),v.return=y,v)}function u(y,v,_,S,w){return v===null||v.tag!==7?(v=Dr(_,y.mode,S,w),v.return=y,v):(v=i(v,_),v.return=y,v)}function d(y,v,_){if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return v=vf(""+v,y.mode,_),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ic:return _=xu(v.type,v.key,v.props,null,y.mode,_),qo(_,v),_.return=y,_;case Zo:return v=bf(v,y.mode,_),v.return=y,v;case _i:return v=wr(v),d(y,v,_)}if(Jo(v)||Ho(v))return v=Dr(v,y.mode,_,null),v.return=y,v;if(typeof v.then=="function")return d(y,Gc(v),_);if(v.$$typeof===qs)return d(y,Uc(y,v),_);qc(y,v)}return null}function h(y,v,_,S){var w=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return w!==null?null:o(y,v,""+_,S);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ic:return _.key===w?l(y,v,_,S):null;case Zo:return _.key===w?c(y,v,_,S):null;case _i:return _=wr(_),h(y,v,_,S)}if(Jo(_)||Ho(_))return w!==null?null:u(y,v,_,S,null);if(typeof _.then=="function")return h(y,v,Gc(_),S);if(_.$$typeof===qs)return h(y,v,Uc(y,_),S);qc(y,_)}return null}function f(y,v,_,S,w){if(typeof S=="string"&&S!==""||typeof S=="number"||typeof S=="bigint")return y=y.get(_)||null,o(v,y,""+S,w);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ic:return y=y.get(S.key===null?_:S.key)||null,l(v,y,S,w);case Zo:return y=y.get(S.key===null?_:S.key)||null,c(v,y,S,w);case _i:return S=wr(S),f(y,v,_,S,w)}if(Jo(S)||Ho(S))return y=y.get(_)||null,u(v,y,S,w,null);if(typeof S.then=="function")return f(y,v,_,Gc(S),w);if(S.$$typeof===qs)return f(y,v,_,Uc(v,S),w);qc(v,S)}return null}function m(y,v,_,S){for(var w=null,E=null,T=v,C=v=0,N=null;T!==null&&C<_.length;C++){T.index>C?(N=T,T=null):N=T.sibling;var A=h(y,T,_[C],S);if(A===null){T===null&&(T=N);break}t&&T&&A.alternate===null&&e(y,T),v=r(A,v,C),E===null?w=A:E.sibling=A,E=A,T=N}if(C===_.length)return n(y,T),Ce&&Us(y,C),w;if(T===null){for(;C<_.length;C++)T=d(y,_[C],S),T!==null&&(v=r(T,v,C),E===null?w=T:E.sibling=T,E=T);return Ce&&Us(y,C),w}for(T=s(T);C<_.length;C++)N=f(T,y,C,_[C],S),N!==null&&(t&&N.alternate!==null&&T.delete(N.key===null?C:N.key),v=r(N,v,C),E===null?w=N:E.sibling=N,E=N);return t&&T.forEach(function(k){return e(y,k)}),Ce&&Us(y,C),w}function g(y,v,_,S){if(_==null)throw Error(H(151));for(var w=null,E=null,T=v,C=v=0,N=null,A=_.next();T!==null&&!A.done;C++,A=_.next()){T.index>C?(N=T,T=null):N=T.sibling;var k=h(y,T,A.value,S);if(k===null){T===null&&(T=N);break}t&&T&&k.alternate===null&&e(y,T),v=r(k,v,C),E===null?w=k:E.sibling=k,E=k,T=N}if(A.done)return n(y,T),Ce&&Us(y,C),w;if(T===null){for(;!A.done;C++,A=_.next())A=d(y,A.value,S),A!==null&&(v=r(A,v,C),E===null?w=A:E.sibling=A,E=A);return Ce&&Us(y,C),w}for(T=s(T);!A.done;C++,A=_.next())A=f(T,y,C,A.value,S),A!==null&&(t&&A.alternate!==null&&T.delete(A.key===null?C:A.key),v=r(A,v,C),E===null?w=A:E.sibling=A,E=A);return t&&T.forEach(function(O){return e(y,O)}),Ce&&Us(y,C),w}function b(y,v,_,S){if(typeof _=="object"&&_!==null&&_.type===va&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Ic:e:{for(var w=_.key;v!==null;){if(v.key===w){if(w=_.type,w===va){if(v.tag===7){n(y,v.sibling),S=i(v,_.props.children),S.return=y,y=S;break e}}else if(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===_i&&wr(w)===v.type){n(y,v.sibling),S=i(v,_.props),qo(S,_),S.return=y,y=S;break e}n(y,v);break}else e(y,v);v=v.sibling}_.type===va?(S=Dr(_.props.children,y.mode,S,_.key),S.return=y,y=S):(S=xu(_.type,_.key,_.props,null,y.mode,S),qo(S,_),S.return=y,y=S)}return a(y);case Zo:e:{for(w=_.key;v!==null;){if(v.key===w)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(y,v.sibling),S=i(v,_.children||[]),S.return=y,y=S;break e}else{n(y,v);break}else e(y,v);v=v.sibling}S=bf(_,y.mode,S),S.return=y,y=S}return a(y);case _i:return _=wr(_),b(y,v,_,S)}if(Jo(_))return m(y,v,_,S);if(Ho(_)){if(w=Ho(_),typeof w!="function")throw Error(H(150));return _=w.call(_),g(y,v,_,S)}if(typeof _.then=="function")return b(y,v,Gc(_),S);if(_.$$typeof===qs)return b(y,v,Uc(y,_),S);qc(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint"?(_=""+_,v!==null&&v.tag===6?(n(y,v.sibling),S=i(v,_),S.return=y,y=S):(n(y,v),S=vf(_,y.mode,S),S.return=y,y=S),a(y)):n(y,v)}return function(y,v,_,S){try{Ml=0;var w=b(y,v,_,S);return Ha=null,w}catch(T){if(T===So||T===ah)throw T;var E=gn(29,T,null,y.mode);return E.lanes=S,E.return=y,E}finally{}}}var Vr=xS(!0),_S=xS(!1),Si=!1;function Lg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Li(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Vi(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,De&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,e=Yu(t),hS(t,null,n),e}return rh(t,s,e,n),Yu(t)}function dl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,V_(t,n)}}function _f(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?i=r=a:r=r.next=a,n=n.next}while(n!==null);r===null?i=r=e:r=r.next=e}else i=r=e;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,callbacks:s.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var qp=!1;function hl(){if(qp){var t=Fa;if(t!==null)throw t}}function fl(t,e,n,s){qp=!1;var i=t.updateQueue;Si=!1;var r=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?r=c:a.next=c,a=l;var u=t.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(r!==null){var d=i.baseState;a=0,u=c=l=null,o=r;do{var h=o.lane&-536870913,f=h!==o.lane;if(f?(we&h)===h:(s&h)===h){h!==0&&h===Za&&(qp=!0),u!==null&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=t,g=o;h=e;var b=n;switch(g.tag){case 1:if(m=g.payload,typeof m=="function"){d=m.call(b,d,h);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,h=typeof m=="function"?m.call(b,d,h):m,h==null)break e;d=Je({},d,h);break e;case 2:Si=!0}}h=o.callback,h!==null&&(t.flags|=64,f&&(t.flags|=8192),f=i.callbacks,f===null?i.callbacks=[h]:f.push(h))}else f={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,a|=h;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,r===null&&(i.shared.lanes=0),Qi|=a,t.lanes=a,t.memoizedState=d}}function SS(t,e){if(typeof t!="function")throw Error(H(191,t));t.call(e)}function wS(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)SS(n[t],e)}var Ja=ks(null),Zu=ks(0);function Ov(t,e){t=ni,Ge(Zu,t),Ge(Ja,e),ni=t|e.baseLanes}function Wp(){Ge(Zu,ni),Ge(Ja,Ja.current)}function Vg(){ni=Zu.current,At(Ja),At(Zu)}var An=ks(null),Vn=null;function Ei(t){var e=t.alternate;Ge(ct,ct.current&1),Ge(An,t),Vn===null&&(e===null||Ja.current!==null||e.memoizedState!==null)&&(Vn=t)}function $p(t){Ge(ct,ct.current),Ge(An,t),Vn===null&&(Vn=t)}function CS(t){t.tag===22?(Ge(ct,ct.current),Ge(An,t),Vn===null&&(Vn=t)):Ai()}function Ai(){Ge(ct,ct.current),Ge(An,An.current)}function fn(t){At(An),Vn===t&&(Vn=null),At(ct)}var ct=ks(0);function Ju(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||hm(n)||fm(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Js=0,ge=null,ze=null,pt=null,ed=!1,Ua=!1,zr=!1,td=0,Rl=0,Ga=null,j2=0;function st(){throw Error(H(321))}function zg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!En(t[n],e[n]))return!1;return!0}function Fg(t,e,n,s,i,r){return Js=r,ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ue.H=t===null||t.memoizedState===null?tw:Zg,zr=!1,r=n(s,i),zr=!1,Ua&&(r=ES(e,n,s,i)),TS(t),r}function TS(t){ue.H=Dl;var e=ze!==null&&ze.next!==null;if(Js=0,pt=ze=ge=null,ed=!1,Rl=0,Ga=null,e)throw Error(H(300));t===null||yt||(t=t.dependencies,t!==null&&Xu(t)&&(yt=!0))}function ES(t,e,n,s){ge=t;var i=0;do{if(Ua&&(Ga=null),Rl=0,Ua=!1,25<=i)throw Error(H(301));if(i+=1,pt=ze=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}ue.H=nw,r=e(n,s)}while(Ua);return r}function P2(){var t=ue.H,e=t.useState()[0];return e=typeof e.then=="function"?ic(e):e,t=t.useState()[0],(ze!==null?ze.memoizedState:null)!==t&&(ge.flags|=1024),e}function Hg(){var t=td!==0;return td=0,t}function Ug(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function Gg(t){if(ed){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}ed=!1}Js=0,pt=ze=ge=null,Ua=!1,Rl=td=0,Ga=null}function Ut(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?ge.memoizedState=pt=t:pt=pt.next=t,pt}function ut(){if(ze===null){var t=ge.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=pt===null?ge.memoizedState:pt.next;if(e!==null)pt=e,ze=t;else{if(t===null)throw ge.alternate===null?Error(H(467)):Error(H(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},pt===null?ge.memoizedState=pt=t:pt=pt.next=t}return pt}function oh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ic(t){var e=Rl;return Rl+=1,Ga===null&&(Ga=[]),t=bS(Ga,t,e),e=ge,(pt===null?e.memoizedState:pt.next)===null&&(e=e.alternate,ue.H=e===null||e.memoizedState===null?tw:Zg),t}function lh(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ic(t);if(t.$$typeof===qs)return Bt(t)}throw Error(H(438,String(t)))}function qg(t){var e=null,n=ge.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var s=ge.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(e={data:s.data.map(function(i){return i.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=oh(),ge.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),s=0;s<t;s++)n[s]=xM;return e.index++,n}function ei(t,e){return typeof e=="function"?e(t):e}function Su(t){var e=ut();return Wg(e,ze,t)}function Wg(t,e,n){var s=t.queue;if(s===null)throw Error(H(311));s.lastRenderedReducer=n;var i=t.baseQueue,r=s.pending;if(r!==null){if(i!==null){var a=i.next;i.next=r.next,r.next=a}e.baseQueue=i=r,s.pending=null}if(r=t.baseState,i===null)t.memoizedState=r;else{e=i.next;var o=a=null,l=null,c=e,u=!1;do{var d=c.lane&-536870913;if(d!==c.lane?(we&d)===d:(Js&d)===d){var h=c.revertLane;if(h===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===Za&&(u=!0);else if((Js&h)===h){c=c.next,h===Za&&(u=!0);continue}else d={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=d,a=r):l=l.next=d,ge.lanes|=h,Qi|=h;d=c.action,zr&&n(r,d),r=c.hasEagerState?c.eagerState:n(r,d)}else h={lane:d,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(o=l=h,a=r):l=l.next=h,ge.lanes|=d,Qi|=d;c=c.next}while(c!==null&&c!==e);if(l===null?a=r:l.next=o,!En(r,t.memoizedState)&&(yt=!0,u&&(n=Fa,n!==null)))throw n;t.memoizedState=r,t.baseState=a,t.baseQueue=l,s.lastRenderedState=r}return i===null&&(s.lanes=0),[t.memoizedState,s.dispatch]}function Sf(t){var e=ut(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var s=n.dispatch,i=n.pending,r=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do r=t(r,a.action),a=a.next;while(a!==i);En(r,e.memoizedState)||(yt=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,s]}function AS(t,e,n){var s=ge,i=ut(),r=Ce;if(r){if(n===void 0)throw Error(H(407));n=n()}else n=e();var a=!En((ze||i).memoizedState,n);if(a&&(i.memoizedState=n,yt=!0),i=i.queue,$g(MS.bind(null,s,i,t),[t]),i.getSnapshot!==e||a||pt!==null&&pt.memoizedState.tag&1){if(s.flags|=2048,eo(9,{destroy:void 0},NS.bind(null,s,i,n,e),null),Ue===null)throw Error(H(349));r||Js&127||kS(s,e,n)}return n}function kS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ge.updateQueue,e===null?(e=oh(),ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function NS(t,e,n,s){e.value=n,e.getSnapshot=s,RS(e)&&DS(t)}function MS(t,e,n){return n(function(){RS(e)&&DS(t)})}function RS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!En(t,n)}catch{return!0}}function DS(t){var e=Zr(t,2);e!==null&&an(e,t,2)}function Yp(t){var e=Ut();if(typeof t=="function"){var n=t;if(t=n(),zr){Mi(!0);try{n()}finally{Mi(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:t},e}function OS(t,e,n,s){return t.baseState=n,Wg(t,ze,typeof s=="function"?s:ei)}function B2(t,e,n,s,i){if(uh(t))throw Error(H(485));if(t=e.action,t!==null){var r={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(a){r.listeners.push(a)}};ue.T!==null?n(!0):r.isTransition=!1,s(r),n=e.pending,n===null?(r.next=e.pending=r,jS(e,r)):(r.next=n.next,e.pending=n.next=r)}}function jS(t,e){var n=e.action,s=e.payload,i=t.state;if(e.isTransition){var r=ue.T,a={};ue.T=a;try{var o=n(i,s),l=ue.S;l!==null&&l(a,o),jv(t,e,o)}catch(c){Kp(t,e,c)}finally{r!==null&&a.types!==null&&(r.types=a.types),ue.T=r}}else try{r=n(i,s),jv(t,e,r)}catch(c){Kp(t,e,c)}}function jv(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(s){Pv(t,e,s)},function(s){return Kp(t,e,s)}):Pv(t,e,n)}function Pv(t,e,n){e.status="fulfilled",e.value=n,PS(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,jS(t,n)))}function Kp(t,e,n){var s=t.pending;if(t.pending=null,s!==null){s=s.next;do e.status="rejected",e.reason=n,PS(e),e=e.next;while(e!==s)}t.action=null}function PS(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function BS(t,e){return e}function Bv(t,e){if(Ce){var n=Ue.formState;if(n!==null){e:{var s=ge;if(Ce){if(Xe){t:{for(var i=Xe,r=Bn;i.nodeType!==8;){if(!r){i=null;break t}if(i=zn(i.nextSibling),i===null){i=null;break t}}r=i.data,i=r==="F!"||r==="F"?i:null}if(i){Xe=zn(i.nextSibling),s=i.data==="F!";break e}}Ki(s)}s=!1}s&&(e=n[0])}}return n=Ut(),n.memoizedState=n.baseState=e,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:BS,lastRenderedState:e},n.queue=s,n=ZS.bind(null,ge,s),s.dispatch=n,s=Yp(!1),r=Qg.bind(null,ge,!1,s.queue),s=Ut(),i={state:e,dispatch:null,action:t,pending:null},s.queue=i,n=B2.bind(null,ge,i,r,n),i.dispatch=n,s.memoizedState=t,[e,n,!1]}function Iv(t){var e=ut();return IS(e,ze,t)}function IS(t,e,n){if(e=Wg(t,e,BS)[0],t=Su(ei)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var s=ic(e)}catch(a){throw a===So?ah:a}else s=e;e=ut();var i=e.queue,r=i.dispatch;return n!==e.memoizedState&&(ge.flags|=2048,eo(9,{destroy:void 0},I2.bind(null,i,n),null)),[s,r,t]}function I2(t,e){t.action=e}function Lv(t){var e=ut(),n=ze;if(n!==null)return IS(e,n,t);ut(),e=e.memoizedState,n=ut();var s=n.queue.dispatch;return n.memoizedState=t,[e,s,!1]}function eo(t,e,n,s){return t={tag:t,create:n,deps:s,inst:e,next:null},e=ge.updateQueue,e===null&&(e=oh(),ge.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t),t}function LS(){return ut().memoizedState}function wu(t,e,n,s){var i=Ut();ge.flags|=t,i.memoizedState=eo(1|e,{destroy:void 0},n,s===void 0?null:s)}function ch(t,e,n,s){var i=ut();s=s===void 0?null:s;var r=i.memoizedState.inst;ze!==null&&s!==null&&zg(s,ze.memoizedState.deps)?i.memoizedState=eo(e,r,n,s):(ge.flags|=t,i.memoizedState=eo(1|e,r,n,s))}function Vv(t,e){wu(8390656,8,t,e)}function $g(t,e){ch(2048,8,t,e)}function L2(t){ge.flags|=4;var e=ge.updateQueue;if(e===null)e=oh(),ge.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function VS(t){var e=ut().memoizedState;return L2({ref:e,nextImpl:t}),function(){if(De&2)throw Error(H(440));return e.impl.apply(void 0,arguments)}}function zS(t,e){return ch(4,2,t,e)}function FS(t,e){return ch(4,4,t,e)}function HS(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function US(t,e,n){n=n!=null?n.concat([t]):null,ch(4,4,HS.bind(null,e,t),n)}function Yg(){}function GS(t,e){var n=ut();e=e===void 0?null:e;var s=n.memoizedState;return e!==null&&zg(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function qS(t,e){var n=ut();e=e===void 0?null:e;var s=n.memoizedState;if(e!==null&&zg(e,s[1]))return s[0];if(s=t(),zr){Mi(!0);try{t()}finally{Mi(!1)}}return n.memoizedState=[s,e],s}function Kg(t,e,n){return n===void 0||Js&1073741824&&!(we&261930)?t.memoizedState=e:(t.memoizedState=n,t=Ow(),ge.lanes|=t,Qi|=t,n)}function WS(t,e,n,s){return En(n,e)?n:Ja.current!==null?(t=Kg(t,n,s),En(t,e)||(yt=!0),t):!(Js&42)||Js&1073741824&&!(we&261930)?(yt=!0,t.memoizedState=n):(t=Ow(),ge.lanes|=t,Qi|=t,e)}function $S(t,e,n,s,i){var r=Oe.p;Oe.p=r!==0&&8>r?r:8;var a=ue.T,o={};ue.T=o,Qg(t,!1,e,n);try{var l=i(),c=ue.S;if(c!==null&&c(o,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=O2(l,s);pl(t,e,u,wn(t))}else pl(t,e,s,wn(t))}catch(d){pl(t,e,{then:function(){},status:"rejected",reason:d},wn())}finally{Oe.p=r,a!==null&&o.types!==null&&(a.types=o.types),ue.T=a}}function V2(){}function Xp(t,e,n,s){if(t.tag!==5)throw Error(H(476));var i=YS(t).queue;$S(t,i,e,Rr,n===null?V2:function(){return KS(t),n(s)})}function YS(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:Rr,baseState:Rr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:Rr},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function KS(t){var e=YS(t);e.next===null&&(e=t.alternate.memoizedState),pl(t,e.next.queue,{},wn())}function Xg(){return Bt(Pl)}function XS(){return ut().memoizedState}function QS(){return ut().memoizedState}function z2(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=wn();t=Li(n);var s=Vi(e,t,n);s!==null&&(an(s,e,n),dl(s,e,n)),e={cache:Pg()},t.payload=e;return}e=e.return}}function F2(t,e,n){var s=wn();n={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},uh(t)?JS(e,n):(n=Rg(t,e,n,s),n!==null&&(an(n,t,s),ew(n,e,s)))}function ZS(t,e,n){var s=wn();pl(t,e,n,s)}function pl(t,e,n,s){var i={lane:s,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(uh(t))JS(e,i);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var a=e.lastRenderedState,o=r(a,n);if(i.hasEagerState=!0,i.eagerState=o,En(o,a))return rh(t,e,i,0),Ue===null&&ih(),!1}catch{}finally{}if(n=Rg(t,e,i,s),n!==null)return an(n,t,s),ew(n,e,s),!0}return!1}function Qg(t,e,n,s){if(s={lane:2,revertLane:ay(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},uh(t)){if(e)throw Error(H(479))}else e=Rg(t,n,s,2),e!==null&&an(e,t,2)}function uh(t){var e=t.alternate;return t===ge||e!==null&&e===ge}function JS(t,e){Ua=ed=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ew(t,e,n){if(n&4194048){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,V_(t,n)}}var Dl={readContext:Bt,use:lh,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useLayoutEffect:st,useInsertionEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useSyncExternalStore:st,useId:st,useHostTransitionStatus:st,useFormState:st,useActionState:st,useOptimistic:st,useMemoCache:st,useCacheRefresh:st};Dl.useEffectEvent=st;var tw={readContext:Bt,use:lh,useCallback:function(t,e){return Ut().memoizedState=[t,e===void 0?null:e],t},useContext:Bt,useEffect:Vv,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,wu(4194308,4,HS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return wu(4194308,4,t,e)},useInsertionEffect:function(t,e){wu(4,2,t,e)},useMemo:function(t,e){var n=Ut();e=e===void 0?null:e;var s=t();if(zr){Mi(!0);try{t()}finally{Mi(!1)}}return n.memoizedState=[s,e],s},useReducer:function(t,e,n){var s=Ut();if(n!==void 0){var i=n(e);if(zr){Mi(!0);try{n(e)}finally{Mi(!1)}}}else i=e;return s.memoizedState=s.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},s.queue=t,t=t.dispatch=F2.bind(null,ge,t),[s.memoizedState,t]},useRef:function(t){var e=Ut();return t={current:t},e.memoizedState=t},useState:function(t){t=Yp(t);var e=t.queue,n=ZS.bind(null,ge,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:Yg,useDeferredValue:function(t,e){var n=Ut();return Kg(n,t,e)},useTransition:function(){var t=Yp(!1);return t=$S.bind(null,ge,t.queue,!0,!1),Ut().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var s=ge,i=Ut();if(Ce){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),Ue===null)throw Error(H(349));we&127||kS(s,e,n)}i.memoizedState=n;var r={value:n,getSnapshot:e};return i.queue=r,Vv(MS.bind(null,s,r,t),[t]),s.flags|=2048,eo(9,{destroy:void 0},NS.bind(null,s,r,n,e),null),n},useId:function(){var t=Ut(),e=Ue.identifierPrefix;if(Ce){var n=ps,s=fs;n=(s&~(1<<32-Sn(s)-1)).toString(32)+n,e="_"+e+"R_"+n,n=td++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=j2++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:Xg,useFormState:Bv,useActionState:Bv,useOptimistic:function(t){var e=Ut();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Qg.bind(null,ge,!0,n),n.dispatch=e,[t,e]},useMemoCache:qg,useCacheRefresh:function(){return Ut().memoizedState=z2.bind(null,ge)},useEffectEvent:function(t){var e=Ut(),n={impl:t};return e.memoizedState=n,function(){if(De&2)throw Error(H(440));return n.impl.apply(void 0,arguments)}}},Zg={readContext:Bt,use:lh,useCallback:GS,useContext:Bt,useEffect:$g,useImperativeHandle:US,useInsertionEffect:zS,useLayoutEffect:FS,useMemo:qS,useReducer:Su,useRef:LS,useState:function(){return Su(ei)},useDebugValue:Yg,useDeferredValue:function(t,e){var n=ut();return WS(n,ze.memoizedState,t,e)},useTransition:function(){var t=Su(ei)[0],e=ut().memoizedState;return[typeof t=="boolean"?t:ic(t),e]},useSyncExternalStore:AS,useId:XS,useHostTransitionStatus:Xg,useFormState:Iv,useActionState:Iv,useOptimistic:function(t,e){var n=ut();return OS(n,ze,t,e)},useMemoCache:qg,useCacheRefresh:QS};Zg.useEffectEvent=VS;var nw={readContext:Bt,use:lh,useCallback:GS,useContext:Bt,useEffect:$g,useImperativeHandle:US,useInsertionEffect:zS,useLayoutEffect:FS,useMemo:qS,useReducer:Sf,useRef:LS,useState:function(){return Sf(ei)},useDebugValue:Yg,useDeferredValue:function(t,e){var n=ut();return ze===null?Kg(n,t,e):WS(n,ze.memoizedState,t,e)},useTransition:function(){var t=Sf(ei)[0],e=ut().memoizedState;return[typeof t=="boolean"?t:ic(t),e]},useSyncExternalStore:AS,useId:XS,useHostTransitionStatus:Xg,useFormState:Lv,useActionState:Lv,useOptimistic:function(t,e){var n=ut();return ze!==null?OS(n,ze,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:qg,useCacheRefresh:QS};nw.useEffectEvent=VS;function wf(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:Je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Qp={enqueueSetState:function(t,e,n){t=t._reactInternals;var s=wn(),i=Li(s);i.payload=e,n!=null&&(i.callback=n),e=Vi(t,i,s),e!==null&&(an(e,t,s),dl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=wn(),i=Li(s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Vi(t,i,s),e!==null&&(an(e,t,s),dl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wn(),s=Li(n);s.tag=2,e!=null&&(s.callback=e),e=Vi(t,s,n),e!==null&&(an(e,t,n),dl(e,t,n))}};function zv(t,e,n,s,i,r,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,r,a):e.prototype&&e.prototype.isPureReactComponent?!Al(n,s)||!Al(i,r):!0}function Fv(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Qp.enqueueReplaceState(e,e.state,null)}function Fr(t,e){var n=e;if("ref"in e){n={};for(var s in e)s!=="ref"&&(n[s]=e[s])}if(t=t.defaultProps){n===e&&(n=Je({},n));for(var i in t)n[i]===void 0&&(n[i]=t[i])}return n}function sw(t){$u(t)}function iw(t){console.error(t)}function rw(t){$u(t)}function nd(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(s){setTimeout(function(){throw s})}}function Hv(t,e,n){try{var s=t.onCaughtError;s(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Zp(t,e,n){return n=Li(n),n.tag=3,n.payload={element:null},n.callback=function(){nd(t,e)},n}function aw(t){return t=Li(t),t.tag=3,t}function ow(t,e,n,s){var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=s.value;t.payload=function(){return i(r)},t.callback=function(){Hv(e,n,s)}}var a=n.stateNode;a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){Hv(e,n,s),typeof i!="function"&&(zi===null?zi=new Set([this]):zi.add(this));var o=s.stack;this.componentDidCatch(s.value,{componentStack:o!==null?o:""})})}function H2(t,e,n,s,i){if(n.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(e=n.alternate,e!==null&&_o(e,n,i,!0),n=An.current,n!==null){switch(n.tag){case 31:case 13:return Vn===null?od():n.alternate===null&&rt===0&&(rt=3),n.flags&=-257,n.flags|=65536,n.lanes=i,s===Qu?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([s]):e.add(s),jf(t,s,i)),!1;case 22:return n.flags|=65536,s===Qu?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([s])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([s]):n.add(s)),jf(t,s,i)),!1}throw Error(H(435,n.tag))}return jf(t,s,i),od(),!1}if(Ce)return e=An.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=i,s!==Vp&&(t=Error(H(422),{cause:s}),Nl(Pn(t,n)))):(s!==Vp&&(e=Error(H(423),{cause:s}),Nl(Pn(e,n))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,s=Pn(s,n),i=Zp(t.stateNode,s,i),_f(t,i),rt!==4&&(rt=2)),!1;var r=Error(H(520),{cause:s});if(r=Pn(r,n),yl===null?yl=[r]:yl.push(r),rt!==4&&(rt=2),e===null)return!0;s=Pn(s,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=i&-i,n.lanes|=t,t=Zp(n.stateNode,s,t),_f(n,t),!1;case 1:if(e=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(zi===null||!zi.has(r))))return n.flags|=65536,i&=-i,n.lanes|=i,i=aw(i),ow(i,t,n,s),_f(n,i),!1}n=n.return}while(n!==null);return!1}var Jg=Error(H(461)),yt=!1;function Dt(t,e,n,s){e.child=t===null?_S(e,null,n,s):Vr(e,t.child,n,s)}function Uv(t,e,n,s,i){n=n.render;var r=e.ref;if("ref"in s){var a={};for(var o in s)o!=="ref"&&(a[o]=s[o])}else a=s;return Lr(e),s=Fg(t,e,n,a,r,i),o=Hg(),t!==null&&!yt?(Ug(t,e,i),ti(t,e,i)):(Ce&&o&&Og(e),e.flags|=1,Dt(t,e,s,i),e.child)}function Gv(t,e,n,s,i){if(t===null){var r=n.type;return typeof r=="function"&&!Dg(r)&&r.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=r,lw(t,e,r,s,i)):(t=xu(n.type,null,s,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!ey(t,i)){var a=r.memoizedProps;if(n=n.compare,n=n!==null?n:Al,n(a,s)&&t.ref===e.ref)return ti(t,e,i)}return e.flags|=1,t=Ys(r,s),t.ref=e.ref,t.return=e,e.child=t}function lw(t,e,n,s,i){if(t!==null){var r=t.memoizedProps;if(Al(r,s)&&t.ref===e.ref)if(yt=!1,e.pendingProps=s=r,ey(t,i))t.flags&131072&&(yt=!0);else return e.lanes=t.lanes,ti(t,e,i)}return Jp(t,e,n,s,i)}function cw(t,e,n,s){var i=s.children,r=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if(e.flags&128){if(r=r!==null?r.baseLanes|n:n,t!==null){for(s=e.child=t.child,i=0;s!==null;)i=i|s.lanes|s.childLanes,s=s.sibling;s=i&~r}else s=0,e.child=null;return qv(t,e,r,n,s)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&_u(e,r!==null?r.cachePool:null),r!==null?Ov(e,r):Wp(),CS(e);else return s=e.lanes=536870912,qv(t,e,r!==null?r.baseLanes|n:n,n,s)}else r!==null?(_u(e,r.cachePool),Ov(e,r),Ai(),e.memoizedState=null):(t!==null&&_u(e,null),Wp(),Ai());return Dt(t,e,i,n),e.child}function tl(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function qv(t,e,n,s,i){var r=Bg();return r=r===null?null:{parent:gt._currentValue,pool:r},e.memoizedState={baseLanes:n,cachePool:r},t!==null&&_u(e,null),Wp(),CS(e),t!==null&&_o(t,e,s,!0),e.childLanes=i,null}function Cu(t,e){return e=sd({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function Wv(t,e,n){return Vr(e,t.child,null,n),t=Cu(e,e.pendingProps),t.flags|=2,fn(e),e.memoizedState=null,t}function U2(t,e,n){var s=e.pendingProps,i=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(Ce){if(s.mode==="hidden")return t=Cu(e,s),e.lanes=536870912,tl(null,t);if($p(e),(t=Xe)?(t=tC(t,Bn),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Yi!==null?{id:fs,overflow:ps}:null,retryLane:536870912,hydrationErrors:null},n=pS(t),n.return=e,e.child=n,Pt=e,Xe=null)):t=null,t===null)throw Ki(e);return e.lanes=536870912,null}return Cu(e,s)}var r=t.memoizedState;if(r!==null){var a=r.dehydrated;if($p(e),i)if(e.flags&256)e.flags&=-257,e=Wv(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(H(558));else if(yt||_o(t,e,n,!1),i=(n&t.childLanes)!==0,yt||i){if(s=Ue,s!==null&&(a=z_(s,n),a!==0&&a!==r.retryLane))throw r.retryLane=a,Zr(t,a),an(s,t,a),Jg;od(),e=Wv(t,e,n)}else t=r.treeContext,Xe=zn(a.nextSibling),Pt=e,Ce=!0,Ii=null,Bn=!1,t!==null&&gS(e,t),e=Cu(e,s),e.flags|=4096;return e}return t=Ys(t.child,{mode:s.mode,children:s.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Tu(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(H(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Jp(t,e,n,s,i){return Lr(e),n=Fg(t,e,n,s,void 0,i),s=Hg(),t!==null&&!yt?(Ug(t,e,i),ti(t,e,i)):(Ce&&s&&Og(e),e.flags|=1,Dt(t,e,n,i),e.child)}function $v(t,e,n,s,i,r){return Lr(e),e.updateQueue=null,n=ES(e,s,n,i),TS(t),s=Hg(),t!==null&&!yt?(Ug(t,e,r),ti(t,e,r)):(Ce&&s&&Og(e),e.flags|=1,Dt(t,e,n,r),e.child)}function Yv(t,e,n,s,i){if(Lr(e),e.stateNode===null){var r=Ea,a=n.contextType;typeof a=="object"&&a!==null&&(r=Bt(a)),r=new n(s,r),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Qp,e.stateNode=r,r._reactInternals=e,r=e.stateNode,r.props=s,r.state=e.memoizedState,r.refs={},Lg(e),a=n.contextType,r.context=typeof a=="object"&&a!==null?Bt(a):Ea,r.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(wf(e,n,a,s),r.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(a=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),a!==r.state&&Qp.enqueueReplaceState(r,r.state,null),fl(e,s,r,i),hl(),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308),s=!0}else if(t===null){r=e.stateNode;var o=e.memoizedProps,l=Fr(n,o);r.props=l;var c=r.context,u=n.contextType;a=Ea,typeof u=="object"&&u!==null&&(a=Bt(u));var d=n.getDerivedStateFromProps;u=typeof d=="function"||typeof r.getSnapshotBeforeUpdate=="function",o=e.pendingProps!==o,u||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(o||c!==a)&&Fv(e,r,s,a),Si=!1;var h=e.memoizedState;r.state=h,fl(e,s,r,i),hl(),c=e.memoizedState,o||h!==c||Si?(typeof d=="function"&&(wf(e,n,d,s),c=e.memoizedState),(l=Si||zv(e,n,l,s,h,c,a))?(u||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),r.props=s,r.state=c,r.context=a,s=l):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{r=e.stateNode,Gp(t,e),a=e.memoizedProps,u=Fr(n,a),r.props=u,d=e.pendingProps,h=r.context,c=n.contextType,l=Ea,typeof c=="object"&&c!==null&&(l=Bt(c)),o=n.getDerivedStateFromProps,(c=typeof o=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a!==d||h!==l)&&Fv(e,r,s,l),Si=!1,h=e.memoizedState,r.state=h,fl(e,s,r,i),hl();var f=e.memoizedState;a!==d||h!==f||Si||t!==null&&t.dependencies!==null&&Xu(t.dependencies)?(typeof o=="function"&&(wf(e,n,o,s),f=e.memoizedState),(u=Si||zv(e,n,u,s,h,f,l)||t!==null&&t.dependencies!==null&&Xu(t.dependencies))?(c||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(s,f,l),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(s,f,l)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=f),r.props=s,r.state=f,r.context=l,s=u):(typeof r.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),s=!1)}return r=s,Tu(t,e),s=(e.flags&128)!==0,r||s?(r=e.stateNode,n=s&&typeof n.getDerivedStateFromError!="function"?null:r.render(),e.flags|=1,t!==null&&s?(e.child=Vr(e,t.child,null,i),e.child=Vr(e,null,n,i)):Dt(t,e,n,i),e.memoizedState=r.state,t=e.child):t=ti(t,e,i),t}function Kv(t,e,n,s){return Ir(),e.flags|=256,Dt(t,e,n,s),e.child}var Cf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Tf(t){return{baseLanes:t,cachePool:vS()}}function Ef(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=yn),t}function uw(t,e,n){var s=e.pendingProps,i=!1,r=(e.flags&128)!==0,a;if((a=r)||(a=t!==null&&t.memoizedState===null?!1:(ct.current&2)!==0),a&&(i=!0,e.flags&=-129),a=(e.flags&32)!==0,e.flags&=-33,t===null){if(Ce){if(i?Ei(e):Ai(),(t=Xe)?(t=tC(t,Bn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Yi!==null?{id:fs,overflow:ps}:null,retryLane:536870912,hydrationErrors:null},n=pS(t),n.return=e,e.child=n,Pt=e,Xe=null)):t=null,t===null)throw Ki(e);return fm(t)?e.lanes=32:e.lanes=536870912,null}var o=s.children;return s=s.fallback,i?(Ai(),i=e.mode,o=sd({mode:"hidden",children:o},i),s=Dr(s,i,n,null),o.return=e,s.return=e,o.sibling=s,e.child=o,s=e.child,s.memoizedState=Tf(n),s.childLanes=Ef(t,a,n),e.memoizedState=Cf,tl(null,s)):(Ei(e),em(e,o))}var l=t.memoizedState;if(l!==null&&(o=l.dehydrated,o!==null)){if(r)e.flags&256?(Ei(e),e.flags&=-257,e=Af(t,e,n)):e.memoizedState!==null?(Ai(),e.child=t.child,e.flags|=128,e=null):(Ai(),o=s.fallback,i=e.mode,s=sd({mode:"visible",children:s.children},i),o=Dr(o,i,n,null),o.flags|=2,s.return=e,o.return=e,s.sibling=o,e.child=s,Vr(e,t.child,null,n),s=e.child,s.memoizedState=Tf(n),s.childLanes=Ef(t,a,n),e.memoizedState=Cf,e=tl(null,s));else if(Ei(e),fm(o)){if(a=o.nextSibling&&o.nextSibling.dataset,a)var c=a.dgst;a=c,s=Error(H(419)),s.stack="",s.digest=a,Nl({value:s,source:null,stack:null}),e=Af(t,e,n)}else if(yt||_o(t,e,n,!1),a=(n&t.childLanes)!==0,yt||a){if(a=Ue,a!==null&&(s=z_(a,n),s!==0&&s!==l.retryLane))throw l.retryLane=s,Zr(t,s),an(a,t,s),Jg;hm(o)||od(),e=Af(t,e,n)}else hm(o)?(e.flags|=192,e.child=t.child,e=null):(t=l.treeContext,Xe=zn(o.nextSibling),Pt=e,Ce=!0,Ii=null,Bn=!1,t!==null&&gS(e,t),e=em(e,s.children),e.flags|=4096);return e}return i?(Ai(),o=s.fallback,i=e.mode,l=t.child,c=l.sibling,s=Ys(l,{mode:"hidden",children:s.children}),s.subtreeFlags=l.subtreeFlags&65011712,c!==null?o=Ys(c,o):(o=Dr(o,i,n,null),o.flags|=2),o.return=e,s.return=e,s.sibling=o,e.child=s,tl(null,s),s=e.child,o=t.child.memoizedState,o===null?o=Tf(n):(i=o.cachePool,i!==null?(l=gt._currentValue,i=i.parent!==l?{parent:l,pool:l}:i):i=vS(),o={baseLanes:o.baseLanes|n,cachePool:i}),s.memoizedState=o,s.childLanes=Ef(t,a,n),e.memoizedState=Cf,tl(t.child,s)):(Ei(e),n=t.child,t=n.sibling,n=Ys(n,{mode:"visible",children:s.children}),n.return=e,n.sibling=null,t!==null&&(a=e.deletions,a===null?(e.deletions=[t],e.flags|=16):a.push(t)),e.child=n,e.memoizedState=null,n)}function em(t,e){return e=sd({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function sd(t,e){return t=gn(22,t,null,e),t.lanes=0,t}function Af(t,e,n){return Vr(e,t.child,null,n),t=em(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xv(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),Fp(t.return,e,n)}function kf(t,e,n,s,i,r){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i,treeForkCount:r}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=i,a.treeForkCount=r)}function dw(t,e,n){var s=e.pendingProps,i=s.revealOrder,r=s.tail;s=s.children;var a=ct.current,o=(a&2)!==0;if(o?(a=a&1|2,e.flags|=128):a&=1,Ge(ct,a),Dt(t,e,s,n),s=Ce?kl:0,!o&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xv(t,n,e);else if(t.tag===19)Xv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ju(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),kf(e,!1,i,n,r,s);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ju(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}kf(e,!0,n,null,r,s);break;case"together":kf(e,!1,null,null,void 0,s);break;default:e.memoizedState=null}return e.child}function ti(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Qi|=e.lanes,!(n&e.childLanes))if(t!==null){if(_o(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=Ys(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ys(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ey(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&Xu(t)))}function G2(t,e,n){switch(e.tag){case 3:Uu(e,e.stateNode.containerInfo),Ti(e,gt,t.memoizedState.cache),Ir();break;case 27:case 5:kp(e);break;case 4:Uu(e,e.stateNode.containerInfo);break;case 10:Ti(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,$p(e),null;break;case 13:var s=e.memoizedState;if(s!==null)return s.dehydrated!==null?(Ei(e),e.flags|=128,null):n&e.child.childLanes?uw(t,e,n):(Ei(e),t=ti(t,e,n),t!==null?t.sibling:null);Ei(e);break;case 19:var i=(t.flags&128)!==0;if(s=(n&e.childLanes)!==0,s||(_o(t,e,n,!1),s=(n&e.childLanes)!==0),i){if(s)return dw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ge(ct,ct.current),s)break;return null;case 22:return e.lanes=0,cw(t,e,n,e.pendingProps);case 24:Ti(e,gt,t.memoizedState.cache)}return ti(t,e,n)}function hw(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)yt=!0;else{if(!ey(t,n)&&!(e.flags&128))return yt=!1,G2(t,e,n);yt=!!(t.flags&131072)}else yt=!1,Ce&&e.flags&1048576&&mS(e,kl,e.index);switch(e.lanes=0,e.tag){case 16:e:{var s=e.pendingProps;if(t=wr(e.elementType),e.type=t,typeof t=="function")Dg(t)?(s=Fr(t,s),e.tag=1,e=Yv(null,e,t,s,n)):(e.tag=0,e=Jp(null,e,t,s,n));else{if(t!=null){var i=t.$$typeof;if(i===vg){e.tag=11,e=Uv(null,e,t,s,n);break e}else if(i===bg){e.tag=14,e=Gv(null,e,t,s,n);break e}}throw e=Ep(t)||t,Error(H(306,e,""))}}return e;case 0:return Jp(t,e,e.type,e.pendingProps,n);case 1:return s=e.type,i=Fr(s,e.pendingProps),Yv(t,e,s,i,n);case 3:e:{if(Uu(e,e.stateNode.containerInfo),t===null)throw Error(H(387));s=e.pendingProps;var r=e.memoizedState;i=r.element,Gp(t,e),fl(e,s,null,n);var a=e.memoizedState;if(s=a.cache,Ti(e,gt,s),s!==r.cache&&Hp(e,[gt],n,!0),hl(),s=a.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:a.cache},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){e=Kv(t,e,s,n);break e}else if(s!==i){i=Pn(Error(H(424)),e),Nl(i),e=Kv(t,e,s,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Xe=zn(t.firstChild),Pt=e,Ce=!0,Ii=null,Bn=!0,n=_S(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(Ir(),s===i){e=ti(t,e,n);break e}Dt(t,e,s,n)}e=e.child}return e;case 26:return Tu(t,e),t===null?(n=gb(e.type,null,e.pendingProps,null))?e.memoizedState=n:Ce||(n=e.type,t=e.pendingProps,s=dd(Bi.current).createElement(n),s[jt]=e,s[ln]=t,It(s,n,t),Et(s),e.stateNode=s):e.memoizedState=gb(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return kp(e),t===null&&Ce&&(s=e.stateNode=nC(e.type,e.pendingProps,Bi.current),Pt=e,Bn=!0,i=Xe,lr(e.type)?(pm=i,Xe=zn(s.firstChild)):Xe=i),Dt(t,e,e.pendingProps.children,n),Tu(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Ce&&((i=s=Xe)&&(s=xR(s,e.type,e.pendingProps,Bn),s!==null?(e.stateNode=s,Pt=e,Xe=zn(s.firstChild),Bn=!1,i=!0):i=!1),i||Ki(e)),kp(e),i=e.type,r=e.pendingProps,a=t!==null?t.memoizedProps:null,s=r.children,um(i,r)?s=null:a!==null&&um(i,a)&&(e.flags|=32),e.memoizedState!==null&&(i=Fg(t,e,P2,null,null,n),Pl._currentValue=i),Tu(t,e),Dt(t,e,s,n),e.child;case 6:return t===null&&Ce&&((t=n=Xe)&&(n=_R(n,e.pendingProps,Bn),n!==null?(e.stateNode=n,Pt=e,Xe=null,t=!0):t=!1),t||Ki(e)),null;case 13:return uw(t,e,n);case 4:return Uu(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Vr(e,null,s,n):Dt(t,e,s,n),e.child;case 11:return Uv(t,e,e.type,e.pendingProps,n);case 7:return Dt(t,e,e.pendingProps,n),e.child;case 8:return Dt(t,e,e.pendingProps.children,n),e.child;case 12:return Dt(t,e,e.pendingProps.children,n),e.child;case 10:return s=e.pendingProps,Ti(e,e.type,s.value),Dt(t,e,s.children,n),e.child;case 9:return i=e.type._context,s=e.pendingProps.children,Lr(e),i=Bt(i),s=s(i),e.flags|=1,Dt(t,e,s,n),e.child;case 14:return Gv(t,e,e.type,e.pendingProps,n);case 15:return lw(t,e,e.type,e.pendingProps,n);case 19:return dw(t,e,n);case 31:return U2(t,e,n);case 22:return cw(t,e,n,e.pendingProps);case 24:return Lr(e),s=Bt(gt),t===null?(i=Bg(),i===null&&(i=Ue,r=Pg(),i.pooledCache=r,r.refCount++,r!==null&&(i.pooledCacheLanes|=n),i=r),e.memoizedState={parent:s,cache:i},Lg(e),Ti(e,gt,i)):(t.lanes&n&&(Gp(t,e),fl(e,null,null,n),hl()),i=t.memoizedState,r=e.memoizedState,i.parent!==s?(i={parent:s,cache:s},e.memoizedState=i,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=i),Ti(e,gt,s)):(s=r.cache,Ti(e,gt,s),s!==i.cache&&Hp(e,[gt],n,!0))),Dt(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(H(156,e.tag))}function Bs(t){t.flags|=4}function Nf(t,e,n,s,i){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(i&335544128)===i)if(t.stateNode.complete)t.flags|=8192;else if(Bw())t.flags|=8192;else throw jr=Qu,Ig}else t.flags&=-16777217}function Qv(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!rC(e))if(Bw())t.flags|=8192;else throw jr=Qu,Ig}function Wc(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?I_():536870912,t.lanes|=e,to|=e)}function Wo(t,e){if(!Ce)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function Ke(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&65011712,s|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function q2(t,e,n){var s=e.pendingProps;switch(jg(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(e),null;case 1:return Ke(e),null;case 3:return n=e.stateNode,s=null,t!==null&&(s=t.memoizedState.cache),e.memoizedState.cache!==s&&(e.flags|=2048),Ks(gt),Ka(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(aa(e)?Bs(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xf())),Ke(e),null;case 26:var i=e.type,r=e.memoizedState;return t===null?(Bs(e),r!==null?(Ke(e),Qv(e,r)):(Ke(e),Nf(e,i,null,s,n))):r?r!==t.memoizedState?(Bs(e),Ke(e),Qv(e,r)):(Ke(e),e.flags&=-16777217):(t=t.memoizedProps,t!==s&&Bs(e),Ke(e),Nf(e,i,t,s,n)),null;case 27:if(Gu(e),n=Bi.current,i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&Bs(e);else{if(!s){if(e.stateNode===null)throw Error(H(166));return Ke(e),null}t=ys.current,aa(e)?Ev(e):(t=nC(i,s,n),e.stateNode=t,Bs(e))}return Ke(e),null;case 5:if(Gu(e),i=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==s&&Bs(e);else{if(!s){if(e.stateNode===null)throw Error(H(166));return Ke(e),null}if(r=ys.current,aa(e))Ev(e);else{var a=dd(Bi.current);switch(r){case 1:r=a.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:r=a.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":r=a.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":r=a.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":r=a.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof s.is=="string"?a.createElement("select",{is:s.is}):a.createElement("select"),s.multiple?r.multiple=!0:s.size&&(r.size=s.size);break;default:r=typeof s.is=="string"?a.createElement(i,{is:s.is}):a.createElement(i)}}r[jt]=e,r[ln]=s;e:for(a=e.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.tag!==27&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break e;for(;a.sibling===null;){if(a.return===null||a.return===e)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}e.stateNode=r;e:switch(It(r,i,s),i){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Bs(e)}}return Ke(e),Nf(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==s&&Bs(e);else{if(typeof s!="string"&&e.stateNode===null)throw Error(H(166));if(t=Bi.current,aa(e)){if(t=e.stateNode,n=e.memoizedProps,s=null,i=Pt,i!==null)switch(i.tag){case 27:case 5:s=i.memoizedProps}t[jt]=e,t=!!(t.nodeValue===n||s!==null&&s.suppressHydrationWarning===!0||Zw(t.nodeValue,n)),t||Ki(e,!0)}else t=dd(t).createTextNode(s),t[jt]=e,e.stateNode=t}return Ke(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(s=aa(e),n!==null){if(t===null){if(!s)throw Error(H(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(557));t[jt]=e}else Ir(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ke(e),t=!1}else n=xf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(fn(e),e):(fn(e),null);if(e.flags&128)throw Error(H(558))}return Ke(e),null;case 13:if(s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=aa(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(H(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[jt]=e}else Ir(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ke(e),i=!1}else i=xf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return e.flags&256?(fn(e),e):(fn(e),null)}return fn(e),e.flags&128?(e.lanes=n,e):(n=s!==null,t=t!==null&&t.memoizedState!==null,n&&(s=e.child,i=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(i=s.alternate.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==i&&(s.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),Wc(e,e.updateQueue),Ke(e),null);case 4:return Ka(),t===null&&oy(e.stateNode.containerInfo),Ke(e),null;case 10:return Ks(e.type),Ke(e),null;case 19:if(At(ct),s=e.memoizedState,s===null)return Ke(e),null;if(i=(e.flags&128)!==0,r=s.rendering,r===null)if(i)Wo(s,!1);else{if(rt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(r=Ju(t),r!==null){for(e.flags|=128,Wo(s,!1),t=r.updateQueue,e.updateQueue=t,Wc(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)fS(n,t),n=n.sibling;return Ge(ct,ct.current&1|2),Ce&&Us(e,s.treeForkCount),e.child}t=t.sibling}s.tail!==null&&xn()>rd&&(e.flags|=128,i=!0,Wo(s,!1),e.lanes=4194304)}else{if(!i)if(t=Ju(r),t!==null){if(e.flags|=128,i=!0,t=t.updateQueue,e.updateQueue=t,Wc(e,t),Wo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!r.alternate&&!Ce)return Ke(e),null}else 2*xn()-s.renderingStartTime>rd&&n!==536870912&&(e.flags|=128,i=!0,Wo(s,!1),e.lanes=4194304);s.isBackwards?(r.sibling=e.child,e.child=r):(t=s.last,t!==null?t.sibling=r:e.child=r,s.last=r)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=xn(),t.sibling=null,n=ct.current,Ge(ct,i?n&1|2:n&1),Ce&&Us(e,s.treeForkCount),t):(Ke(e),null);case 22:case 23:return fn(e),Vg(),s=e.memoizedState!==null,t!==null?t.memoizedState!==null!==s&&(e.flags|=8192):s&&(e.flags|=8192),s?n&536870912&&!(e.flags&128)&&(Ke(e),e.subtreeFlags&6&&(e.flags|=8192)):Ke(e),n=e.updateQueue,n!==null&&Wc(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),s=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),s!==n&&(e.flags|=2048),t!==null&&At(Or),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Ks(gt),Ke(e),null;case 25:return null;case 30:return null}throw Error(H(156,e.tag))}function W2(t,e){switch(jg(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ks(gt),Ka(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Gu(e),null;case 31:if(e.memoizedState!==null){if(fn(e),e.alternate===null)throw Error(H(340));Ir()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(fn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));Ir()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return At(ct),null;case 4:return Ka(),null;case 10:return Ks(e.type),null;case 22:case 23:return fn(e),Vg(),t!==null&&At(Or),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Ks(gt),null;case 25:return null;default:return null}}function fw(t,e){switch(jg(e),e.tag){case 3:Ks(gt),Ka();break;case 26:case 27:case 5:Gu(e);break;case 4:Ka();break;case 31:e.memoizedState!==null&&fn(e);break;case 13:fn(e);break;case 19:At(ct);break;case 10:Ks(e.type);break;case 22:case 23:fn(e),Vg(),t!==null&&At(Or);break;case 24:Ks(gt)}}function rc(t,e){try{var n=e.updateQueue,s=n!==null?n.lastEffect:null;if(s!==null){var i=s.next;n=i;do{if((n.tag&t)===t){s=void 0;var r=n.create,a=n.inst;s=r(),a.destroy=s}n=n.next}while(n!==i)}}catch(o){Ie(e,e.return,o)}}function Xi(t,e,n){try{var s=e.updateQueue,i=s!==null?s.lastEffect:null;if(i!==null){var r=i.next;s=r;do{if((s.tag&t)===t){var a=s.inst,o=a.destroy;if(o!==void 0){a.destroy=void 0,i=e;var l=n,c=o;try{c()}catch(u){Ie(i,l,u)}}}s=s.next}while(s!==r)}}catch(u){Ie(e,e.return,u)}}function pw(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{wS(e,n)}catch(s){Ie(t,t.return,s)}}}function mw(t,e,n){n.props=Fr(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(s){Ie(t,e,s)}}function ml(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var s=t.stateNode;break;case 30:s=t.stateNode;break;default:s=t.stateNode}typeof n=="function"?t.refCleanup=n(s):n.current=s}}catch(i){Ie(t,e,i)}}function ms(t,e){var n=t.ref,s=t.refCleanup;if(n!==null)if(typeof s=="function")try{s()}catch(i){Ie(t,e,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(i){Ie(t,e,i)}else n.current=null}function gw(t){var e=t.type,n=t.memoizedProps,s=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&s.focus();break e;case"img":n.src?s.src=n.src:n.srcSet&&(s.srcset=n.srcSet)}}catch(i){Ie(t,t.return,i)}}function Mf(t,e,n){try{var s=t.stateNode;pR(s,t.type,n,e),s[ln]=e}catch(i){Ie(t,t.return,i)}}function yw(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&lr(t.type)||t.tag===4}function Rf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||yw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&lr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function tm(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ws));else if(s!==4&&(s===27&&lr(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(tm(t,e,n),t=t.sibling;t!==null;)tm(t,e,n),t=t.sibling}function id(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(s===27&&lr(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(id(t,e,n),t=t.sibling;t!==null;)id(t,e,n),t=t.sibling}function vw(t){var e=t.stateNode,n=t.memoizedProps;try{for(var s=t.type,i=e.attributes;i.length;)e.removeAttributeNode(i[0]);It(e,s,n),e[jt]=t,e[ln]=n}catch(r){Ie(t,t.return,r)}}var Gs=!1,mt=!1,Df=!1,Zv=typeof WeakSet=="function"?WeakSet:Set,Tt=null;function $2(t,e){if(t=t.containerInfo,lm=md,t=rS(t),Ng(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var a=0,o=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(o=a+i),d!==r||s!==0&&d.nodeType!==3||(l=a+s),d.nodeType===3&&(a+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++c===i&&(o=a),h===r&&++u===s&&(l=a),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=o===-1||l===-1?null:{start:o,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(cm={focusedElem:t,selectionRange:n},md=!1,Tt=e;Tt!==null;)if(e=Tt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Tt=t;else for(;Tt!==null;){switch(e=Tt,r=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)i=t[n],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&r!==null){t=void 0,n=e,i=r.memoizedProps,r=r.memoizedState,s=n.stateNode;try{var m=Fr(n.type,i);t=s.getSnapshotBeforeUpdate(m,r),s.__reactInternalSnapshotBeforeUpdate=t}catch(g){Ie(n,n.return,g)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)dm(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":dm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(H(163))}if(t=e.sibling,t!==null){t.return=e.return,Tt=t;break}Tt=e.return}}function bw(t,e,n){var s=n.flags;switch(n.tag){case 0:case 11:case 15:Ls(t,n),s&4&&rc(5,n);break;case 1:if(Ls(t,n),s&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(a){Ie(n,n.return,a)}else{var i=Fr(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}catch(a){Ie(n,n.return,a)}}s&64&&pw(n),s&512&&ml(n,n.return);break;case 3:if(Ls(t,n),s&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{wS(t,e)}catch(a){Ie(n,n.return,a)}}break;case 27:e===null&&s&4&&vw(n);case 26:case 5:Ls(t,n),e===null&&s&4&&gw(n),s&512&&ml(n,n.return);break;case 12:Ls(t,n);break;case 31:Ls(t,n),s&4&&Sw(t,n);break;case 13:Ls(t,n),s&4&&ww(t,n),s&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=nR.bind(null,n),SR(t,n))));break;case 22:if(s=n.memoizedState!==null||Gs,!s){e=e!==null&&e.memoizedState!==null||mt,i=Gs;var r=mt;Gs=s,(mt=e)&&!r?Fs(t,n,(n.subtreeFlags&8772)!==0):Ls(t,n),Gs=i,mt=r}break;case 30:break;default:Ls(t,n)}}function xw(t){var e=t.alternate;e!==null&&(t.alternate=null,xw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&wg(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var et=null,tn=!1;function Is(t,e,n){for(n=n.child;n!==null;)_w(t,e,n),n=n.sibling}function _w(t,e,n){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(Zl,n)}catch{}switch(n.tag){case 26:mt||ms(n,e),Is(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:mt||ms(n,e);var s=et,i=tn;lr(n.type)&&(et=n.stateNode,tn=!1),Is(t,e,n),bl(n.stateNode),et=s,tn=i;break;case 5:mt||ms(n,e);case 6:if(s=et,i=tn,et=null,Is(t,e,n),et=s,tn=i,et!==null)if(tn)try{(et.nodeType===9?et.body:et.nodeName==="HTML"?et.ownerDocument.body:et).removeChild(n.stateNode)}catch(r){Ie(n,e,r)}else try{et.removeChild(n.stateNode)}catch(r){Ie(n,e,r)}break;case 18:et!==null&&(tn?(t=et,db(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),ro(t)):db(et,n.stateNode));break;case 4:s=et,i=tn,et=n.stateNode.containerInfo,tn=!0,Is(t,e,n),et=s,tn=i;break;case 0:case 11:case 14:case 15:Xi(2,n,e),mt||Xi(4,n,e),Is(t,e,n);break;case 1:mt||(ms(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"&&mw(n,e,s)),Is(t,e,n);break;case 21:Is(t,e,n);break;case 22:mt=(s=mt)||n.memoizedState!==null,Is(t,e,n),mt=s;break;default:Is(t,e,n)}}function Sw(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ro(t)}catch(n){Ie(e,e.return,n)}}}function ww(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ro(t)}catch(n){Ie(e,e.return,n)}}function Y2(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Zv),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Zv),e;default:throw Error(H(435,t.tag))}}function $c(t,e){var n=Y2(t);e.forEach(function(s){if(!n.has(s)){n.add(s);var i=sR.bind(null,t,s);s.then(i,i)}})}function Jt(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s],r=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 27:if(lr(o.type)){et=o.stateNode,tn=!1;break e}break;case 5:et=o.stateNode,tn=!1;break e;case 3:case 4:et=o.stateNode.containerInfo,tn=!0;break e}o=o.return}if(et===null)throw Error(H(160));_w(r,a,i),et=null,tn=!1,r=i.alternate,r!==null&&(r.return=null),i.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)Cw(e,t),e=e.sibling}var Xn=null;function Cw(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Jt(e,t),en(t),s&4&&(Xi(3,t,t.return),rc(3,t),Xi(5,t,t.return));break;case 1:Jt(e,t),en(t),s&512&&(mt||n===null||ms(n,n.return)),s&64&&Gs&&(t=t.updateQueue,t!==null&&(s=t.callbacks,s!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?s:n.concat(s))));break;case 26:var i=Xn;if(Jt(e,t),en(t),s&512&&(mt||n===null||ms(n,n.return)),s&4){var r=n!==null?n.memoizedState:null;if(s=t.memoizedState,n===null)if(s===null)if(t.stateNode===null){e:{s=t.type,n=t.memoizedProps,i=i.ownerDocument||i;t:switch(s){case"title":r=i.getElementsByTagName("title")[0],(!r||r[tc]||r[jt]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=i.createElement(s),i.head.insertBefore(r,i.querySelector("head > title"))),It(r,s,n),r[jt]=t,Et(r),s=r;break e;case"link":var a=vb("link","href",i).get(s+(n.href||""));if(a){for(var o=0;o<a.length;o++)if(r=a[o],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){a.splice(o,1);break t}}r=i.createElement(s),It(r,s,n),i.head.appendChild(r);break;case"meta":if(a=vb("meta","content",i).get(s+(n.content||""))){for(o=0;o<a.length;o++)if(r=a[o],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){a.splice(o,1);break t}}r=i.createElement(s),It(r,s,n),i.head.appendChild(r);break;default:throw Error(H(468,s))}r[jt]=t,Et(r),s=r}t.stateNode=s}else bb(i,t.type,t.stateNode);else t.stateNode=yb(i,s,t.memoizedProps);else r!==s?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,s===null?bb(i,t.type,t.stateNode):yb(i,s,t.memoizedProps)):s===null&&t.stateNode!==null&&Mf(t,t.memoizedProps,n.memoizedProps)}break;case 27:Jt(e,t),en(t),s&512&&(mt||n===null||ms(n,n.return)),n!==null&&s&4&&Mf(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Jt(e,t),en(t),s&512&&(mt||n===null||ms(n,n.return)),t.flags&32){i=t.stateNode;try{Qa(i,"")}catch(m){Ie(t,t.return,m)}}s&4&&t.stateNode!=null&&(i=t.memoizedProps,Mf(t,i,n!==null?n.memoizedProps:i)),s&1024&&(Df=!0);break;case 6:if(Jt(e,t),en(t),s&4){if(t.stateNode===null)throw Error(H(162));s=t.memoizedProps,n=t.stateNode;try{n.nodeValue=s}catch(m){Ie(t,t.return,m)}}break;case 3:if(ku=null,i=Xn,Xn=hd(e.containerInfo),Jt(e,t),Xn=i,en(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{ro(e.containerInfo)}catch(m){Ie(t,t.return,m)}Df&&(Df=!1,Tw(t));break;case 4:s=Xn,Xn=hd(t.stateNode.containerInfo),Jt(e,t),en(t),Xn=s;break;case 12:Jt(e,t),en(t);break;case 31:Jt(e,t),en(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,$c(t,s)));break;case 13:Jt(e,t),en(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(dh=xn()),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,$c(t,s)));break;case 22:i=t.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,c=Gs,u=mt;if(Gs=c||i,mt=u||l,Jt(e,t),mt=u,Gs=c,en(t),s&8192)e:for(e=t.stateNode,e._visibility=i?e._visibility&-2:e._visibility|1,i&&(n===null||l||Gs||mt||Cr(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){l=n=e;try{if(r=l.stateNode,i)a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none";else{o=l.stateNode;var d=l.memoizedProps.style,h=d!=null&&d.hasOwnProperty("display")?d.display:null;o.style.display=h==null||typeof h=="boolean"?"":(""+h).trim()}}catch(m){Ie(l,l.return,m)}}}else if(e.tag===6){if(n===null){l=e;try{l.stateNode.nodeValue=i?"":l.memoizedProps}catch(m){Ie(l,l.return,m)}}}else if(e.tag===18){if(n===null){l=e;try{var f=l.stateNode;i?hb(f,!0):hb(l.stateNode,!1)}catch(m){Ie(l,l.return,m)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}s&4&&(s=t.updateQueue,s!==null&&(n=s.retryQueue,n!==null&&(s.retryQueue=null,$c(t,n))));break;case 19:Jt(e,t),en(t),s&4&&(s=t.updateQueue,s!==null&&(t.updateQueue=null,$c(t,s)));break;case 30:break;case 21:break;default:Jt(e,t),en(t)}}function en(t){var e=t.flags;if(e&2){try{for(var n,s=t.return;s!==null;){if(yw(s)){n=s;break}s=s.return}if(n==null)throw Error(H(160));switch(n.tag){case 27:var i=n.stateNode,r=Rf(t);id(t,r,i);break;case 5:var a=n.stateNode;n.flags&32&&(Qa(a,""),n.flags&=-33);var o=Rf(t);id(t,o,a);break;case 3:case 4:var l=n.stateNode.containerInfo,c=Rf(t);tm(t,c,l);break;default:throw Error(H(161))}}catch(u){Ie(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Tw(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Tw(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Ls(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)bw(t,e.alternate,e),e=e.sibling}function Cr(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Xi(4,e,e.return),Cr(e);break;case 1:ms(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&mw(e,e.return,n),Cr(e);break;case 27:bl(e.stateNode);case 26:case 5:ms(e,e.return),Cr(e);break;case 22:e.memoizedState===null&&Cr(e);break;case 30:Cr(e);break;default:Cr(e)}t=t.sibling}}function Fs(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var s=e.alternate,i=t,r=e,a=r.flags;switch(r.tag){case 0:case 11:case 15:Fs(i,r,n),rc(4,r);break;case 1:if(Fs(i,r,n),s=r,i=s.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(c){Ie(s,s.return,c)}if(s=r,i=s.updateQueue,i!==null){var o=s.stateNode;try{var l=i.shared.hiddenCallbacks;if(l!==null)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)SS(l[i],o)}catch(c){Ie(s,s.return,c)}}n&&a&64&&pw(r),ml(r,r.return);break;case 27:vw(r);case 26:case 5:Fs(i,r,n),n&&s===null&&a&4&&gw(r),ml(r,r.return);break;case 12:Fs(i,r,n);break;case 31:Fs(i,r,n),n&&a&4&&Sw(i,r);break;case 13:Fs(i,r,n),n&&a&4&&ww(i,r);break;case 22:r.memoizedState===null&&Fs(i,r,n),ml(r,r.return);break;case 30:break;default:Fs(i,r,n)}e=e.sibling}}function ty(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&sc(n))}function ny(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&sc(t))}function qn(t,e,n,s){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ew(t,e,n,s),e=e.sibling}function Ew(t,e,n,s){var i=e.flags;switch(e.tag){case 0:case 11:case 15:qn(t,e,n,s),i&2048&&rc(9,e);break;case 1:qn(t,e,n,s);break;case 3:qn(t,e,n,s),i&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&sc(t)));break;case 12:if(i&2048){qn(t,e,n,s),t=e.stateNode;try{var r=e.memoizedProps,a=r.id,o=r.onPostCommit;typeof o=="function"&&o(a,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(l){Ie(e,e.return,l)}}else qn(t,e,n,s);break;case 31:qn(t,e,n,s);break;case 13:qn(t,e,n,s);break;case 23:break;case 22:r=e.stateNode,a=e.alternate,e.memoizedState!==null?r._visibility&2?qn(t,e,n,s):gl(t,e):r._visibility&2?qn(t,e,n,s):(r._visibility|=2,pa(t,e,n,s,(e.subtreeFlags&10256)!==0||!1)),i&2048&&ty(a,e);break;case 24:qn(t,e,n,s),i&2048&&ny(e.alternate,e);break;default:qn(t,e,n,s)}}function pa(t,e,n,s,i){for(i=i&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var r=t,a=e,o=n,l=s,c=a.flags;switch(a.tag){case 0:case 11:case 15:pa(r,a,o,l,i),rc(8,a);break;case 23:break;case 22:var u=a.stateNode;a.memoizedState!==null?u._visibility&2?pa(r,a,o,l,i):gl(r,a):(u._visibility|=2,pa(r,a,o,l,i)),i&&c&2048&&ty(a.alternate,a);break;case 24:pa(r,a,o,l,i),i&&c&2048&&ny(a.alternate,a);break;default:pa(r,a,o,l,i)}e=e.sibling}}function gl(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,s=e,i=s.flags;switch(s.tag){case 22:gl(n,s),i&2048&&ty(s.alternate,s);break;case 24:gl(n,s),i&2048&&ny(s.alternate,s);break;default:gl(n,s)}e=e.sibling}}var nl=8192;function oa(t,e,n){if(t.subtreeFlags&nl)for(t=t.child;t!==null;)Aw(t,e,n),t=t.sibling}function Aw(t,e,n){switch(t.tag){case 26:oa(t,e,n),t.flags&nl&&t.memoizedState!==null&&jR(n,Xn,t.memoizedState,t.memoizedProps);break;case 5:oa(t,e,n);break;case 3:case 4:var s=Xn;Xn=hd(t.stateNode.containerInfo),oa(t,e,n),Xn=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=nl,nl=16777216,oa(t,e,n),nl=s):oa(t,e,n));break;default:oa(t,e,n)}}function kw(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function $o(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Tt=s,Mw(s,t)}kw(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Nw(t),t=t.sibling}function Nw(t){switch(t.tag){case 0:case 11:case 15:$o(t),t.flags&2048&&Xi(9,t,t.return);break;case 3:$o(t);break;case 12:$o(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Eu(t)):$o(t);break;default:$o(t)}}function Eu(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];Tt=s,Mw(s,t)}kw(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Xi(8,e,e.return),Eu(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Eu(e));break;default:Eu(e)}t=t.sibling}}function Mw(t,e){for(;Tt!==null;){var n=Tt;switch(n.tag){case 0:case 11:case 15:Xi(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var s=n.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:sc(n.memoizedState.cache)}if(s=n.child,s!==null)s.return=n,Tt=s;else e:for(n=t;Tt!==null;){s=Tt;var i=s.sibling,r=s.return;if(xw(s),s===n){Tt=null;break e}if(i!==null){i.return=r,Tt=i;break e}Tt=r}}}var K2={getCacheForType:function(t){var e=Bt(gt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Bt(gt).controller.signal}},X2=typeof WeakMap=="function"?WeakMap:Map,De=0,Ue=null,Se=null,we=0,Be=0,hn=null,Di=!1,wo=!1,sy=!1,ni=0,rt=0,Qi=0,Pr=0,iy=0,yn=0,to=0,yl=null,sn=null,nm=!1,dh=0,Rw=0,rd=1/0,ad=null,zi=null,St=0,Fi=null,no=null,Xs=0,sm=0,im=null,Dw=null,vl=0,rm=null;function wn(){return De&2&&we!==0?we&-we:ue.T!==null?ay():F_()}function Ow(){if(yn===0)if(!(we&536870912)||Ce){var t=Vc;Vc<<=1,!(Vc&3932160)&&(Vc=262144),yn=t}else yn=536870912;return t=An.current,t!==null&&(t.flags|=32),yn}function an(t,e,n){(t===Ue&&(Be===2||Be===9)||t.cancelPendingCommit!==null)&&(so(t,0),Oi(t,we,yn,!1)),ec(t,n),(!(De&2)||t!==Ue)&&(t===Ue&&(!(De&2)&&(Pr|=n),rt===4&&Oi(t,we,yn,!1)),Ns(t))}function jw(t,e,n){if(De&6)throw Error(H(327));var s=!n&&(e&127)===0&&(e&t.expiredLanes)===0||Jl(t,e),i=s?J2(t,e):Of(t,e,!0),r=s;do{if(i===0){wo&&!s&&Oi(t,e,0,!1);break}else{if(n=t.current.alternate,r&&!Q2(n)){i=Of(t,e,!1),r=!1;continue}if(i===2){if(r=e,t.errorRecoveryDisabledLanes&r)var a=0;else a=t.pendingLanes&-536870913,a=a!==0?a:a&536870912?536870912:0;if(a!==0){e=a;e:{var o=t;i=yl;var l=o.current.memoizedState.isDehydrated;if(l&&(so(o,a).flags|=256),a=Of(o,a,!1),a!==2){if(sy&&!l){o.errorRecoveryDisabledLanes|=r,Pr|=r,i=4;break e}r=sn,sn=i,r!==null&&(sn===null?sn=r:sn.push.apply(sn,r))}i=a}if(r=!1,i!==2)continue}}if(i===1){so(t,0),Oi(t,e,0,!0);break}e:{switch(s=t,r=i,r){case 0:case 1:throw Error(H(345));case 4:if((e&4194048)!==e)break;case 6:Oi(s,e,yn,!Di);break e;case 2:sn=null;break;case 3:case 5:break;default:throw Error(H(329))}if((e&62914560)===e&&(i=dh+300-xn(),10<i)){if(Oi(s,e,yn,!Di),eh(s,0,!0)!==0)break e;Xs=e,s.timeoutHandle=eC(Jv.bind(null,s,n,sn,ad,nm,e,yn,Pr,to,Di,r,"Throttled",-0,0),i);break e}Jv(s,n,sn,ad,nm,e,yn,Pr,to,Di,r,null,-0,0)}}break}while(!0);Ns(t)}function Jv(t,e,n,s,i,r,a,o,l,c,u,d,h,f){if(t.timeoutHandle=-1,d=e.subtreeFlags,d&8192||(d&16785408)===16785408){d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ws},Aw(e,r,d);var m=(r&62914560)===r?dh-xn():(r&4194048)===r?Rw-xn():0;if(m=PR(d,m),m!==null){Xs=r,t.cancelPendingCommit=m(tb.bind(null,t,e,r,n,s,i,a,o,l,u,d,null,h,f)),Oi(t,r,a,!c);return}}tb(t,e,r,n,s,i,a,o,l)}function Q2(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var s=0;s<n.length;s++){var i=n[s],r=i.getSnapshot;i=i.value;try{if(!En(r(),i))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Oi(t,e,n,s){e&=~iy,e&=~Pr,t.suspendedLanes|=e,t.pingedLanes&=~e,s&&(t.warmLanes|=e),s=t.expirationTimes;for(var i=e;0<i;){var r=31-Sn(i),a=1<<r;s[r]=-1,i&=~a}n!==0&&L_(t,n,e)}function hh(){return De&6?!0:(ac(0),!1)}function ry(){if(Se!==null){if(Be===0)var t=Se.return;else t=Se,$s=Jr=null,Gg(t),Ha=null,Ml=0,t=Se;for(;t!==null;)fw(t.alternate,t),t=t.return;Se=null}}function so(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,yR(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Xs=0,ry(),Ue=t,Se=n=Ys(t.current,null),we=e,Be=0,hn=null,Di=!1,wo=Jl(t,e),sy=!1,to=yn=iy=Pr=Qi=rt=0,sn=yl=null,nm=!1,e&8&&(e|=e&32);var s=t.entangledLanes;if(s!==0)for(t=t.entanglements,s&=e;0<s;){var i=31-Sn(s),r=1<<i;e|=t[i],s&=~r}return ni=e,ih(),n}function Pw(t,e){ge=null,ue.H=Dl,e===So||e===ah?(e=Rv(),Be=3):e===Ig?(e=Rv(),Be=4):Be=e===Jg?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,hn=e,Se===null&&(rt=1,nd(t,Pn(e,t.current)))}function Bw(){var t=An.current;return t===null?!0:(we&4194048)===we?Vn===null:(we&62914560)===we||we&536870912?t===Vn:!1}function Iw(){var t=ue.H;return ue.H=Dl,t===null?Dl:t}function Lw(){var t=ue.A;return ue.A=K2,t}function od(){rt=4,Di||(we&4194048)!==we&&An.current!==null||(wo=!0),!(Qi&134217727)&&!(Pr&134217727)||Ue===null||Oi(Ue,we,yn,!1)}function Of(t,e,n){var s=De;De|=2;var i=Iw(),r=Lw();(Ue!==t||we!==e)&&(ad=null,so(t,e)),e=!1;var a=rt;e:do try{if(Be!==0&&Se!==null){var o=Se,l=hn;switch(Be){case 8:ry(),a=6;break e;case 3:case 2:case 9:case 6:An.current===null&&(e=!0);var c=Be;if(Be=0,hn=null,Na(t,o,l,c),n&&wo){a=0;break e}break;default:c=Be,Be=0,hn=null,Na(t,o,l,c)}}Z2(),a=rt;break}catch(u){Pw(t,u)}while(!0);return e&&t.shellSuspendCounter++,$s=Jr=null,De=s,ue.H=i,ue.A=r,Se===null&&(Ue=null,we=0,ih()),a}function Z2(){for(;Se!==null;)Vw(Se)}function J2(t,e){var n=De;De|=2;var s=Iw(),i=Lw();Ue!==t||we!==e?(ad=null,rd=xn()+500,so(t,e)):wo=Jl(t,e);e:do try{if(Be!==0&&Se!==null){e=Se;var r=hn;t:switch(Be){case 1:Be=0,hn=null,Na(t,e,r,1);break;case 2:case 9:if(Mv(r)){Be=0,hn=null,eb(e);break}e=function(){Be!==2&&Be!==9||Ue!==t||(Be=7),Ns(t)},r.then(e,e);break e;case 3:Be=7;break e;case 4:Be=5;break e;case 7:Mv(r)?(Be=0,hn=null,eb(e)):(Be=0,hn=null,Na(t,e,r,7));break;case 5:var a=null;switch(Se.tag){case 26:a=Se.memoizedState;case 5:case 27:var o=Se;if(a?rC(a):o.stateNode.complete){Be=0,hn=null;var l=o.sibling;if(l!==null)Se=l;else{var c=o.return;c!==null?(Se=c,fh(c)):Se=null}break t}}Be=0,hn=null,Na(t,e,r,5);break;case 6:Be=0,hn=null,Na(t,e,r,6);break;case 8:ry(),rt=6;break e;default:throw Error(H(462))}}eR();break}catch(u){Pw(t,u)}while(!0);return $s=Jr=null,ue.H=s,ue.A=i,De=n,Se!==null?0:(Ue=null,we=0,ih(),rt)}function eR(){for(;Se!==null&&!wM();)Vw(Se)}function Vw(t){var e=hw(t.alternate,t,ni);t.memoizedProps=t.pendingProps,e===null?fh(t):Se=e}function eb(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=$v(n,e,e.pendingProps,e.type,void 0,we);break;case 11:e=$v(n,e,e.pendingProps,e.type.render,e.ref,we);break;case 5:Gg(e);default:fw(n,e),e=Se=fS(e,ni),e=hw(n,e,ni)}t.memoizedProps=t.pendingProps,e===null?fh(t):Se=e}function Na(t,e,n,s){$s=Jr=null,Gg(e),Ha=null,Ml=0;var i=e.return;try{if(H2(t,i,e,n,we)){rt=1,nd(t,Pn(n,t.current)),Se=null;return}}catch(r){if(i!==null)throw Se=i,r;rt=1,nd(t,Pn(n,t.current)),Se=null;return}e.flags&32768?(Ce||s===1?t=!0:wo||we&536870912?t=!1:(Di=t=!0,(s===2||s===9||s===3||s===6)&&(s=An.current,s!==null&&s.tag===13&&(s.flags|=16384))),zw(e,t)):fh(e)}function fh(t){var e=t;do{if(e.flags&32768){zw(e,Di);return}t=e.return;var n=q2(e.alternate,e,ni);if(n!==null){Se=n;return}if(e=e.sibling,e!==null){Se=e;return}Se=e=t}while(e!==null);rt===0&&(rt=5)}function zw(t,e){do{var n=W2(t.alternate,t);if(n!==null){n.flags&=32767,Se=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){Se=t;return}Se=t=n}while(t!==null);rt=6,Se=null}function tb(t,e,n,s,i,r,a,o,l){t.cancelPendingCommit=null;do ph();while(St!==0);if(De&6)throw Error(H(327));if(e!==null){if(e===t.current)throw Error(H(177));if(r=e.lanes|e.childLanes,r|=Mg,OM(t,n,r,a,o,l),t===Ue&&(Se=Ue=null,we=0),no=e,Fi=t,Xs=n,sm=r,im=i,Dw=s,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,iR(qu,function(){return qw(),null})):(t.callbackNode=null,t.callbackPriority=0),s=(e.flags&13878)!==0,e.subtreeFlags&13878||s){s=ue.T,ue.T=null,i=Oe.p,Oe.p=2,a=De,De|=4;try{$2(t,e,n)}finally{De=a,Oe.p=i,ue.T=s}}St=1,Fw(),Hw(),Uw()}}function Fw(){if(St===1){St=0;var t=Fi,e=no,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=ue.T,ue.T=null;var s=Oe.p;Oe.p=2;var i=De;De|=4;try{Cw(e,t);var r=cm,a=rS(t.containerInfo),o=r.focusedElem,l=r.selectionRange;if(a!==o&&o&&o.ownerDocument&&iS(o.ownerDocument.documentElement,o)){if(l!==null&&Ng(o)){var c=l.start,u=l.end;if(u===void 0&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),m=o.textContent.length,g=Math.min(l.start,m),b=l.end===void 0?g:Math.min(l.end,m);!f.extend&&g>b&&(a=b,b=g,g=a);var y=wv(o,g),v=wv(o,b);if(y&&v&&(f.rangeCount!==1||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var _=d.createRange();_.setStart(y.node,y.offset),f.removeAllRanges(),g>b?(f.addRange(_),f.extend(v.node,v.offset)):(_.setEnd(v.node,v.offset),f.addRange(_))}}}}for(d=[],f=o;f=f.parentNode;)f.nodeType===1&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<d.length;o++){var S=d[o];S.element.scrollLeft=S.left,S.element.scrollTop=S.top}}md=!!lm,cm=lm=null}finally{De=i,Oe.p=s,ue.T=n}}t.current=e,St=2}}function Hw(){if(St===2){St=0;var t=Fi,e=no,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=ue.T,ue.T=null;var s=Oe.p;Oe.p=2;var i=De;De|=4;try{bw(t,e.alternate,e)}finally{De=i,Oe.p=s,ue.T=n}}St=3}}function Uw(){if(St===4||St===3){St=0,CM();var t=Fi,e=no,n=Xs,s=Dw;e.subtreeFlags&10256||e.flags&10256?St=5:(St=0,no=Fi=null,Gw(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(zi=null),Sg(n),e=e.stateNode,_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(Zl,e,void 0,(e.current.flags&128)===128)}catch{}if(s!==null){e=ue.T,i=Oe.p,Oe.p=2,ue.T=null;try{for(var r=t.onRecoverableError,a=0;a<s.length;a++){var o=s[a];r(o.value,{componentStack:o.stack})}}finally{ue.T=e,Oe.p=i}}Xs&3&&ph(),Ns(t),i=t.pendingLanes,n&261930&&i&42?t===rm?vl++:(vl=0,rm=t):vl=0,ac(0)}}function Gw(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,sc(e)))}function ph(){return Fw(),Hw(),Uw(),qw()}function qw(){if(St!==5)return!1;var t=Fi,e=sm;sm=0;var n=Sg(Xs),s=ue.T,i=Oe.p;try{Oe.p=32>n?32:n,ue.T=null,n=im,im=null;var r=Fi,a=Xs;if(St=0,no=Fi=null,Xs=0,De&6)throw Error(H(331));var o=De;if(De|=4,Nw(r.current),Ew(r,r.current,a,n),De=o,ac(0,!1),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(Zl,r)}catch{}return!0}finally{Oe.p=i,ue.T=s,Gw(t,e)}}function nb(t,e,n){e=Pn(n,e),e=Zp(t.stateNode,e,2),t=Vi(t,e,2),t!==null&&(ec(t,2),Ns(t))}function Ie(t,e,n){if(t.tag===3)nb(t,t,n);else for(;e!==null;){if(e.tag===3){nb(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(zi===null||!zi.has(s))){t=Pn(n,t),n=aw(2),s=Vi(e,n,2),s!==null&&(ow(n,s,e,t),ec(s,2),Ns(s));break}}e=e.return}}function jf(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new X2;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(n)||(sy=!0,i.add(n),t=tR.bind(null,t,e,n),e.then(t,t))}function tR(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Ue===t&&(we&n)===n&&(rt===4||rt===3&&(we&62914560)===we&&300>xn()-dh?!(De&2)&&so(t,0):iy|=n,to===we&&(to=0)),Ns(t)}function Ww(t,e){e===0&&(e=I_()),t=Zr(t,e),t!==null&&(ec(t,e),Ns(t))}function nR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ww(t,n)}function sR(t,e){var n=0;switch(t.tag){case 31:case 13:var s=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=t.stateNode;break;case 22:s=t.stateNode._retryCache;break;default:throw Error(H(314))}s!==null&&s.delete(e),Ww(t,n)}function iR(t,e){return xg(t,e)}var ld=null,ma=null,am=!1,cd=!1,Pf=!1,ji=0;function Ns(t){t!==ma&&t.next===null&&(ma===null?ld=ma=t:ma=ma.next=t),cd=!0,am||(am=!0,aR())}function ac(t,e){if(!Pf&&cd){Pf=!0;do for(var n=!1,s=ld;s!==null;){if(t!==0){var i=s.pendingLanes;if(i===0)var r=0;else{var a=s.suspendedLanes,o=s.pingedLanes;r=(1<<31-Sn(42|t)+1)-1,r&=i&~(a&~o),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,sb(s,r))}else r=we,r=eh(s,s===Ue?r:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),!(r&3)||Jl(s,r)||(n=!0,sb(s,r));s=s.next}while(n);Pf=!1}}function rR(){$w()}function $w(){cd=am=!1;var t=0;ji!==0&&gR()&&(t=ji);for(var e=xn(),n=null,s=ld;s!==null;){var i=s.next,r=Yw(s,e);r===0?(s.next=null,n===null?ld=i:n.next=i,i===null&&(ma=n)):(n=s,(t!==0||r&3)&&(cd=!0)),s=i}St!==0&&St!==5||ac(t),ji!==0&&(ji=0)}function Yw(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,i=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var a=31-Sn(r),o=1<<a,l=i[a];l===-1?(!(o&n)||o&s)&&(i[a]=DM(o,e)):l<=e&&(t.expiredLanes|=o),r&=~o}if(e=Ue,n=we,n=eh(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s=t.callbackNode,n===0||t===e&&(Be===2||Be===9)||t.cancelPendingCommit!==null)return s!==null&&s!==null&&cf(s),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Jl(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(s!==null&&cf(s),Sg(n)){case 2:case 8:n=P_;break;case 32:n=qu;break;case 268435456:n=B_;break;default:n=qu}return s=Kw.bind(null,t),n=xg(n,s),t.callbackPriority=e,t.callbackNode=n,e}return s!==null&&s!==null&&cf(s),t.callbackPriority=2,t.callbackNode=null,2}function Kw(t,e){if(St!==0&&St!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(ph()&&t.callbackNode!==n)return null;var s=we;return s=eh(t,t===Ue?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),s===0?null:(jw(t,s,e),Yw(t,xn()),t.callbackNode!=null&&t.callbackNode===n?Kw.bind(null,t):null)}function sb(t,e){if(ph())return null;jw(t,e,!0)}function aR(){vR(function(){De&6?xg(j_,rR):$w()})}function ay(){if(ji===0){var t=Za;t===0&&(t=Lc,Lc<<=1,!(Lc&261888)&&(Lc=256)),ji=t}return ji}function ib(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:yu(""+t)}function rb(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function oR(t,e,n,s,i){if(e==="submit"&&n&&n.stateNode===i){var r=ib((i[ln]||null).action),a=s.submitter;a&&(e=(e=a[ln]||null)?ib(e.formAction):a.getAttribute("formAction"),e!==null&&(r=e,a=null));var o=new th("action","action",null,s,i);t.push({event:o,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(ji!==0){var l=a?rb(i,a):new FormData(i);Xp(n,{pending:!0,data:l,method:i.method,action:r},null,l)}}else typeof r=="function"&&(o.preventDefault(),l=a?rb(i,a):new FormData(i),Xp(n,{pending:!0,data:l,method:i.method,action:r},r,l))},currentTarget:i}]})}}for(var Bf=0;Bf<Lp.length;Bf++){var If=Lp[Bf],lR=If.toLowerCase(),cR=If[0].toUpperCase()+If.slice(1);ls(lR,"on"+cR)}ls(oS,"onAnimationEnd");ls(lS,"onAnimationIteration");ls(cS,"onAnimationStart");ls("dblclick","onDoubleClick");ls("focusin","onFocus");ls("focusout","onBlur");ls(T2,"onTransitionRun");ls(E2,"onTransitionStart");ls(A2,"onTransitionCancel");ls(uS,"onTransitionEnd");Xa("onMouseEnter",["mouseout","mouseover"]);Xa("onMouseLeave",["mouseout","mouseover"]);Xa("onPointerEnter",["pointerout","pointerover"]);Xa("onPointerLeave",["pointerout","pointerover"]);Kr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Kr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Kr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Kr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Kr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Kr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ol));function Xw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],i=s.event;s=s.listeners;e:{var r=void 0;if(e)for(var a=s.length-1;0<=a;a--){var o=s[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==r&&i.isPropagationStopped())break e;r=o,i.currentTarget=c;try{r(i)}catch(u){$u(u)}i.currentTarget=null,r=l}else for(a=0;a<s.length;a++){if(o=s[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==r&&i.isPropagationStopped())break e;r=o,i.currentTarget=c;try{r(i)}catch(u){$u(u)}i.currentTarget=null,r=l}}}}function _e(t,e){var n=e[Mp];n===void 0&&(n=e[Mp]=new Set);var s=t+"__bubble";n.has(s)||(Qw(e,t,2,!1),n.add(s))}function Lf(t,e,n){var s=0;e&&(s|=4),Qw(n,t,s,e)}var Yc="_reactListening"+Math.random().toString(36).slice(2);function oy(t){if(!t[Yc]){t[Yc]=!0,H_.forEach(function(n){n!=="selectionchange"&&(uR.has(n)||Lf(n,!1,t),Lf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Yc]||(e[Yc]=!0,Lf("selectionchange",!1,e))}}function Qw(t,e,n,s){switch(uC(e)){case 2:var i=LR;break;case 8:i=VR;break;default:i=dy}n=i.bind(null,e,n,t),i=void 0,!Pp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Vf(t,e,n,s,i){var r=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var o=s.stateNode.containerInfo;if(o===i)break;if(a===4)for(a=s.return;a!==null;){var l=a.tag;if((l===3||l===4)&&a.stateNode.containerInfo===i)return;a=a.return}for(;o!==null;){if(a=xa(o),a===null)return;if(l=a.tag,l===5||l===6||l===26||l===27){s=r=a;continue e}o=o.parentNode}}s=s.return}X_(function(){var c=r,u=Tg(n),d=[];e:{var h=dS.get(t);if(h!==void 0){var f=th,m=t;switch(t){case"keypress":if(bu(n)===0)break e;case"keydown":case"keyup":f=s2;break;case"focusin":m="focus",f=pf;break;case"focusout":m="blur",f=pf;break;case"beforeblur":case"afterblur":f=pf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=fv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=qM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=a2;break;case oS:case lS:case cS:f=YM;break;case uS:f=l2;break;case"scroll":case"scrollend":f=UM;break;case"wheel":f=u2;break;case"copy":case"cut":case"paste":f=XM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=mv;break;case"toggle":case"beforetoggle":f=h2}var g=(e&4)!==0,b=!g&&(t==="scroll"||t==="scrollend"),y=g?h!==null?h+"Capture":null:h;g=[];for(var v=c,_;v!==null;){var S=v;if(_=S.stateNode,S=S.tag,S!==5&&S!==26&&S!==27||_===null||y===null||(S=Tl(v,y),S!=null&&g.push(jl(v,S,_))),b)break;v=v.return}0<g.length&&(h=new f(h,m,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==jp&&(m=n.relatedTarget||n.fromElement)&&(xa(m)||m[bo]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(m=n.relatedTarget||n.toElement,f=c,m=m?xa(m):null,m!==null&&(b=Ql(m),g=m.tag,m!==b||g!==5&&g!==27&&g!==6)&&(m=null)):(f=null,m=c),f!==m)){if(g=fv,S="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=mv,S="onPointerLeave",y="onPointerEnter",v="pointer"),b=f==null?h:el(f),_=m==null?h:el(m),h=new g(S,v+"leave",f,n,u),h.target=b,h.relatedTarget=_,S=null,xa(u)===c&&(g=new g(y,v+"enter",m,n,u),g.target=_,g.relatedTarget=b,S=g),b=S,f&&m)t:{for(g=dR,y=f,v=m,_=0,S=y;S;S=g(S))_++;S=0;for(var w=v;w;w=g(w))S++;for(;0<_-S;)y=g(y),_--;for(;0<S-_;)v=g(v),S--;for(;_--;){if(y===v||v!==null&&y===v.alternate){g=y;break t}y=g(y),v=g(v)}g=null}else g=null;f!==null&&ab(d,h,f,g,!1),m!==null&&b!==null&&ab(d,b,m,g,!0)}}e:{if(h=c?el(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var E=bv;else if(vv(h))if(nS)E=S2;else{E=x2;var T=b2}else f=h.nodeName,!f||f.toLowerCase()!=="input"||h.type!=="checkbox"&&h.type!=="radio"?c&&Cg(c.elementType)&&(E=bv):E=_2;if(E&&(E=E(t,c))){tS(d,E,n,u);break e}T&&T(t,h,c),t==="focusout"&&c&&h.type==="number"&&c.memoizedProps.value!=null&&Op(h,"number",h.value)}switch(T=c?el(c):window,t){case"focusin":(vv(T)||T.contentEditable==="true")&&(wa=T,Bp=c,cl=null);break;case"focusout":cl=Bp=wa=null;break;case"mousedown":Ip=!0;break;case"contextmenu":case"mouseup":case"dragend":Ip=!1,Cv(d,n,u);break;case"selectionchange":if(C2)break;case"keydown":case"keyup":Cv(d,n,u)}var C;if(kg)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else Sa?J_(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(Z_&&n.locale!=="ko"&&(Sa||N!=="onCompositionStart"?N==="onCompositionEnd"&&Sa&&(C=Q_()):(Ri=u,Eg="value"in Ri?Ri.value:Ri.textContent,Sa=!0)),T=ud(c,N),0<T.length&&(N=new pv(N,t,null,n,u),d.push({event:N,listeners:T}),C?N.data=C:(C=eS(n),C!==null&&(N.data=C)))),(C=p2?m2(t,n):g2(t,n))&&(N=ud(c,"onBeforeInput"),0<N.length&&(T=new pv("onBeforeInput","beforeinput",null,n,u),d.push({event:T,listeners:N}),T.data=C)),oR(d,t,c,n,u)}Xw(d,e)})}function jl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ud(t,e){for(var n=e+"Capture",s=[];t!==null;){var i=t,r=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||r===null||(i=Tl(t,n),i!=null&&s.unshift(jl(t,i,r)),i=Tl(t,e),i!=null&&s.push(jl(t,i,r))),t.tag===3)return s;t=t.return}return[]}function dR(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function ab(t,e,n,s,i){for(var r=e._reactName,a=[];n!==null&&n!==s;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,l!==null&&l===s)break;o!==5&&o!==26&&o!==27||c===null||(l=c,i?(c=Tl(n,r),c!=null&&a.unshift(jl(n,c,l))):i||(c=Tl(n,r),c!=null&&a.push(jl(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var hR=/\r\n?/g,fR=/\u0000|\uFFFD/g;function ob(t){return(typeof t=="string"?t:""+t).replace(hR,`
`).replace(fR,"")}function Zw(t,e){return e=ob(e),ob(t)===e}function Ve(t,e,n,s,i,r){switch(n){case"children":typeof s=="string"?e==="body"||e==="textarea"&&s===""||Qa(t,s):(typeof s=="number"||typeof s=="bigint")&&e!=="body"&&Qa(t,""+s);break;case"className":Fc(t,"class",s);break;case"tabIndex":Fc(t,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Fc(t,n,s);break;case"style":K_(t,s,r);break;case"data":if(e!=="object"){Fc(t,"data",s);break}case"src":case"href":if(s===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=yu(""+s),t.setAttribute(n,s);break;case"action":case"formAction":if(typeof s=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(e!=="input"&&Ve(t,e,"name",i.name,i,null),Ve(t,e,"formEncType",i.formEncType,i,null),Ve(t,e,"formMethod",i.formMethod,i,null),Ve(t,e,"formTarget",i.formTarget,i,null)):(Ve(t,e,"encType",i.encType,i,null),Ve(t,e,"method",i.method,i,null),Ve(t,e,"target",i.target,i,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){t.removeAttribute(n);break}s=yu(""+s),t.setAttribute(n,s);break;case"onClick":s!=null&&(t.onclick=Ws);break;case"onScroll":s!=null&&_e("scroll",t);break;case"onScrollEnd":s!=null&&_e("scrollend",t);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(H(61));if(n=s.__html,n!=null){if(i.children!=null)throw Error(H(60));t.innerHTML=n}}break;case"multiple":t.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":t.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){t.removeAttribute("xlink:href");break}n=yu(""+s),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""+s):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":s===!0?t.setAttribute(n,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?t.setAttribute(n,s):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?t.setAttribute(n,s):t.removeAttribute(n);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?t.removeAttribute(n):t.setAttribute(n,s);break;case"popover":_e("beforetoggle",t),_e("toggle",t),gu(t,"popover",s);break;case"xlinkActuate":Ps(t,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":Ps(t,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":Ps(t,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":Ps(t,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":Ps(t,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":Ps(t,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":Ps(t,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":Ps(t,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":Ps(t,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":gu(t,"is",s);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=FM.get(n)||n,gu(t,n,s))}}function om(t,e,n,s,i,r){switch(n){case"style":K_(t,s,r);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(H(61));if(n=s.__html,n!=null){if(i.children!=null)throw Error(H(60));t.innerHTML=n}}break;case"children":typeof s=="string"?Qa(t,s):(typeof s=="number"||typeof s=="bigint")&&Qa(t,""+s);break;case"onScroll":s!=null&&_e("scroll",t);break;case"onScrollEnd":s!=null&&_e("scrollend",t);break;case"onClick":s!=null&&(t.onclick=Ws);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!U_.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(i=n.endsWith("Capture"),e=n.slice(2,i?n.length-7:void 0),r=t[ln]||null,r=r!=null?r[n]:null,typeof r=="function"&&t.removeEventListener(e,r,i),typeof s=="function")){typeof r!="function"&&r!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,s,i);break e}n in t?t[n]=s:s===!0?t.setAttribute(n,""):gu(t,n,s)}}}function It(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_e("error",t),_e("load",t);var s=!1,i=!1,r;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(a!=null)switch(r){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(H(137,e));default:Ve(t,e,r,a,n,null)}}i&&Ve(t,e,"srcSet",n.srcSet,n,null),s&&Ve(t,e,"src",n.src,n,null);return;case"input":_e("invalid",t);var o=r=a=i=null,l=null,c=null;for(s in n)if(n.hasOwnProperty(s)){var u=n[s];if(u!=null)switch(s){case"name":i=u;break;case"type":a=u;break;case"checked":l=u;break;case"defaultChecked":c=u;break;case"value":r=u;break;case"defaultValue":o=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(H(137,e));break;default:Ve(t,e,s,u,n,null)}}W_(t,r,o,l,c,a,i,!1);return;case"select":_e("invalid",t),s=a=r=null;for(i in n)if(n.hasOwnProperty(i)&&(o=n[i],o!=null))switch(i){case"value":r=o;break;case"defaultValue":a=o;break;case"multiple":s=o;default:Ve(t,e,i,o,n,null)}e=r,n=a,t.multiple=!!s,e!=null?Va(t,!!s,e,!1):n!=null&&Va(t,!!s,n,!0);return;case"textarea":_e("invalid",t),r=i=s=null;for(a in n)if(n.hasOwnProperty(a)&&(o=n[a],o!=null))switch(a){case"value":s=o;break;case"defaultValue":i=o;break;case"children":r=o;break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(H(91));break;default:Ve(t,e,a,o,n,null)}Y_(t,s,i,r);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(s=n[l],s!=null))switch(l){case"selected":t.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Ve(t,e,l,s,n,null)}return;case"dialog":_e("beforetoggle",t),_e("toggle",t),_e("cancel",t),_e("close",t);break;case"iframe":case"object":_e("load",t);break;case"video":case"audio":for(s=0;s<Ol.length;s++)_e(Ol[s],t);break;case"image":_e("error",t),_e("load",t);break;case"details":_e("toggle",t);break;case"embed":case"source":case"link":_e("error",t),_e("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(s=n[c],s!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(H(137,e));default:Ve(t,e,c,s,n,null)}return;default:if(Cg(e)){for(u in n)n.hasOwnProperty(u)&&(s=n[u],s!==void 0&&om(t,e,u,s,n,void 0));return}}for(o in n)n.hasOwnProperty(o)&&(s=n[o],s!=null&&Ve(t,e,o,s,n,null))}function pR(t,e,n,s){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,r=null,a=null,o=null,l=null,c=null,u=null;for(f in n){var d=n[f];if(n.hasOwnProperty(f)&&d!=null)switch(f){case"checked":break;case"value":break;case"defaultValue":l=d;default:s.hasOwnProperty(f)||Ve(t,e,f,null,s,d)}}for(var h in s){var f=s[h];if(d=n[h],s.hasOwnProperty(h)&&(f!=null||d!=null))switch(h){case"type":r=f;break;case"name":i=f;break;case"checked":c=f;break;case"defaultChecked":u=f;break;case"value":a=f;break;case"defaultValue":o=f;break;case"children":case"dangerouslySetInnerHTML":if(f!=null)throw Error(H(137,e));break;default:f!==d&&Ve(t,e,h,f,s,d)}}Dp(t,a,o,l,c,u,r,i);return;case"select":f=a=o=h=null;for(r in n)if(l=n[r],n.hasOwnProperty(r)&&l!=null)switch(r){case"value":break;case"multiple":f=l;default:s.hasOwnProperty(r)||Ve(t,e,r,null,s,l)}for(i in s)if(r=s[i],l=n[i],s.hasOwnProperty(i)&&(r!=null||l!=null))switch(i){case"value":h=r;break;case"defaultValue":o=r;break;case"multiple":a=r;default:r!==l&&Ve(t,e,i,r,s,l)}e=o,n=a,s=f,h!=null?Va(t,!!n,h,!1):!!s!=!!n&&(e!=null?Va(t,!!n,e,!0):Va(t,!!n,n?[]:"",!1));return;case"textarea":f=h=null;for(o in n)if(i=n[o],n.hasOwnProperty(o)&&i!=null&&!s.hasOwnProperty(o))switch(o){case"value":break;case"children":break;default:Ve(t,e,o,null,s,i)}for(a in s)if(i=s[a],r=n[a],s.hasOwnProperty(a)&&(i!=null||r!=null))switch(a){case"value":h=i;break;case"defaultValue":f=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(H(91));break;default:i!==r&&Ve(t,e,a,i,s,r)}$_(t,h,f);return;case"option":for(var m in n)if(h=n[m],n.hasOwnProperty(m)&&h!=null&&!s.hasOwnProperty(m))switch(m){case"selected":t.selected=!1;break;default:Ve(t,e,m,null,s,h)}for(l in s)if(h=s[l],f=n[l],s.hasOwnProperty(l)&&h!==f&&(h!=null||f!=null))switch(l){case"selected":t.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:Ve(t,e,l,h,s,f)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)h=n[g],n.hasOwnProperty(g)&&h!=null&&!s.hasOwnProperty(g)&&Ve(t,e,g,null,s,h);for(c in s)if(h=s[c],f=n[c],s.hasOwnProperty(c)&&h!==f&&(h!=null||f!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(H(137,e));break;default:Ve(t,e,c,h,s,f)}return;default:if(Cg(e)){for(var b in n)h=n[b],n.hasOwnProperty(b)&&h!==void 0&&!s.hasOwnProperty(b)&&om(t,e,b,void 0,s,h);for(u in s)h=s[u],f=n[u],!s.hasOwnProperty(u)||h===f||h===void 0&&f===void 0||om(t,e,u,h,s,f);return}}for(var y in n)h=n[y],n.hasOwnProperty(y)&&h!=null&&!s.hasOwnProperty(y)&&Ve(t,e,y,null,s,h);for(d in s)h=s[d],f=n[d],!s.hasOwnProperty(d)||h===f||h==null&&f==null||Ve(t,e,d,h,s,f)}function lb(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mR(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),s=0;s<n.length;s++){var i=n[s],r=i.transferSize,a=i.initiatorType,o=i.duration;if(r&&o&&lb(a)){for(a=0,o=i.responseEnd,s+=1;s<n.length;s++){var l=n[s],c=l.startTime;if(c>o)break;var u=l.transferSize,d=l.initiatorType;u&&lb(d)&&(l=l.responseEnd,a+=u*(l<o?1:(o-c)/(l-c)))}if(--s,e+=8*(r+a)/(i.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var lm=null,cm=null;function dd(t){return t.nodeType===9?t:t.ownerDocument}function cb(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jw(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function um(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zf=null;function gR(){var t=window.event;return t&&t.type==="popstate"?t===zf?!1:(zf=t,!0):(zf=null,!1)}var eC=typeof setTimeout=="function"?setTimeout:void 0,yR=typeof clearTimeout=="function"?clearTimeout:void 0,ub=typeof Promise=="function"?Promise:void 0,vR=typeof queueMicrotask=="function"?queueMicrotask:typeof ub<"u"?function(t){return ub.resolve(null).then(t).catch(bR)}:eC;function bR(t){setTimeout(function(){throw t})}function lr(t){return t==="head"}function db(t,e){var n=e,s=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"||n==="/&"){if(s===0){t.removeChild(i),ro(e);return}s--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")s++;else if(n==="html")bl(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,bl(n);for(var r=n.firstChild;r;){var a=r.nextSibling,o=r.nodeName;r[tc]||o==="SCRIPT"||o==="STYLE"||o==="LINK"&&r.rel.toLowerCase()==="stylesheet"||n.removeChild(r),r=a}}else n==="body"&&bl(t.ownerDocument.body);n=i}while(n);ro(e)}function hb(t,e){var n=t;t=0;do{var s=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=s}while(n)}function dm(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":dm(n),wg(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function xR(t,e,n,s){for(;t.nodeType===1;){var i=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!s&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(s){if(!t[tc])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==i.rel||t.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||t.getAttribute("title")!==(i.title==null?null:i.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(i.src==null?null:i.src)||t.getAttribute("type")!==(i.type==null?null:i.type)||t.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var r=i.name==null?null:""+i.name;if(i.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=zn(t.nextSibling),t===null)break}return null}function _R(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=zn(t.nextSibling),t===null))return null;return t}function tC(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=zn(t.nextSibling),t===null))return null;return t}function hm(t){return t.data==="$?"||t.data==="$~"}function fm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function SR(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var s=function(){e(),n.removeEventListener("DOMContentLoaded",s)};n.addEventListener("DOMContentLoaded",s),t._reactRetry=s}}function zn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var pm=null;function fb(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return zn(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function pb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function nC(t,e,n){switch(e=dd(n),t){case"html":if(t=e.documentElement,!t)throw Error(H(452));return t;case"head":if(t=e.head,!t)throw Error(H(453));return t;case"body":if(t=e.body,!t)throw Error(H(454));return t;default:throw Error(H(451))}}function bl(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);wg(t)}var Gn=new Map,mb=new Set;function hd(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ci=Oe.d;Oe.d={f:wR,r:CR,D:TR,C:ER,L:AR,m:kR,X:MR,S:NR,M:RR};function wR(){var t=ci.f(),e=hh();return t||e}function CR(t){var e=xo(t);e!==null&&e.tag===5&&e.type==="form"?KS(e):ci.r(t)}var Co=typeof document>"u"?null:document;function sC(t,e,n){var s=Co;if(s&&typeof e=="string"&&e){var i=jn(e);i='link[rel="'+t+'"][href="'+i+'"]',typeof n=="string"&&(i+='[crossorigin="'+n+'"]'),mb.has(i)||(mb.add(i),t={rel:t,crossOrigin:n,href:e},s.querySelector(i)===null&&(e=s.createElement("link"),It(e,"link",t),Et(e),s.head.appendChild(e)))}}function TR(t){ci.D(t),sC("dns-prefetch",t,null)}function ER(t,e){ci.C(t,e),sC("preconnect",t,e)}function AR(t,e,n){ci.L(t,e,n);var s=Co;if(s&&t&&e){var i='link[rel="preload"][as="'+jn(e)+'"]';e==="image"&&n&&n.imageSrcSet?(i+='[imagesrcset="'+jn(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(i+='[imagesizes="'+jn(n.imageSizes)+'"]')):i+='[href="'+jn(t)+'"]';var r=i;switch(e){case"style":r=io(t);break;case"script":r=To(t)}Gn.has(r)||(t=Je({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Gn.set(r,t),s.querySelector(i)!==null||e==="style"&&s.querySelector(oc(r))||e==="script"&&s.querySelector(lc(r))||(e=s.createElement("link"),It(e,"link",t),Et(e),s.head.appendChild(e)))}}function kR(t,e){ci.m(t,e);var n=Co;if(n&&t){var s=e&&typeof e.as=="string"?e.as:"script",i='link[rel="modulepreload"][as="'+jn(s)+'"][href="'+jn(t)+'"]',r=i;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=To(t)}if(!Gn.has(r)&&(t=Je({rel:"modulepreload",href:t},e),Gn.set(r,t),n.querySelector(i)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(lc(r)))return}s=n.createElement("link"),It(s,"link",t),Et(s),n.head.appendChild(s)}}}function NR(t,e,n){ci.S(t,e,n);var s=Co;if(s&&t){var i=La(s).hoistableStyles,r=io(t);e=e||"default";var a=i.get(r);if(!a){var o={loading:0,preload:null};if(a=s.querySelector(oc(r)))o.loading=5;else{t=Je({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Gn.get(r))&&ly(t,n);var l=a=s.createElement("link");Et(l),It(l,"link",t),l._p=new Promise(function(c,u){l.onload=c,l.onerror=u}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Au(a,e,s)}a={type:"stylesheet",instance:a,count:1,state:o},i.set(r,a)}}}function MR(t,e){ci.X(t,e);var n=Co;if(n&&t){var s=La(n).hoistableScripts,i=To(t),r=s.get(i);r||(r=n.querySelector(lc(i)),r||(t=Je({src:t,async:!0},e),(e=Gn.get(i))&&cy(t,e),r=n.createElement("script"),Et(r),It(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(i,r))}}function RR(t,e){ci.M(t,e);var n=Co;if(n&&t){var s=La(n).hoistableScripts,i=To(t),r=s.get(i);r||(r=n.querySelector(lc(i)),r||(t=Je({src:t,async:!0,type:"module"},e),(e=Gn.get(i))&&cy(t,e),r=n.createElement("script"),Et(r),It(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},s.set(i,r))}}function gb(t,e,n,s){var i=(i=Bi.current)?hd(i):null;if(!i)throw Error(H(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=io(n.href),n=La(i).hoistableStyles,s=n.get(e),s||(s={type:"style",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=io(n.href);var r=La(i).hoistableStyles,a=r.get(t);if(a||(i=i.ownerDocument||i,a={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,a),(r=i.querySelector(oc(t)))&&!r._p&&(a.instance=r,a.state.loading=5),Gn.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Gn.set(t,n),r||DR(i,t,n,a.state))),e&&s===null)throw Error(H(528,""));return a}if(e&&s!==null)throw Error(H(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=To(n),n=La(i).hoistableScripts,s=n.get(e),s||(s={type:"script",instance:null,count:0,state:null},n.set(e,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(H(444,t))}}function io(t){return'href="'+jn(t)+'"'}function oc(t){return'link[rel="stylesheet"]['+t+"]"}function iC(t){return Je({},t,{"data-precedence":t.precedence,precedence:null})}function DR(t,e,n,s){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?s.loading=1:(e=t.createElement("link"),s.preload=e,e.addEventListener("load",function(){return s.loading|=1}),e.addEventListener("error",function(){return s.loading|=2}),It(e,"link",n),Et(e),t.head.appendChild(e))}function To(t){return'[src="'+jn(t)+'"]'}function lc(t){return"script[async]"+t}function yb(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var s=t.querySelector('style[data-href~="'+jn(n.href)+'"]');if(s)return e.instance=s,Et(s),s;var i=Je({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return s=(t.ownerDocument||t).createElement("style"),Et(s),It(s,"style",i),Au(s,n.precedence,t),e.instance=s;case"stylesheet":i=io(n.href);var r=t.querySelector(oc(i));if(r)return e.state.loading|=4,e.instance=r,Et(r),r;s=iC(n),(i=Gn.get(i))&&ly(s,i),r=(t.ownerDocument||t).createElement("link"),Et(r);var a=r;return a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),It(r,"link",s),e.state.loading|=4,Au(r,n.precedence,t),e.instance=r;case"script":return r=To(n.src),(i=t.querySelector(lc(r)))?(e.instance=i,Et(i),i):(s=n,(i=Gn.get(r))&&(s=Je({},n),cy(s,i)),t=t.ownerDocument||t,i=t.createElement("script"),Et(i),It(i,"link",s),t.head.appendChild(i),e.instance=i);case"void":return null;default:throw Error(H(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(s=e.instance,e.state.loading|=4,Au(s,n.precedence,t));return e.instance}function Au(t,e,n){for(var s=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=s.length?s[s.length-1]:null,r=i,a=0;a<s.length;a++){var o=s[a];if(o.dataset.precedence===e)r=o;else if(r!==i)break}r?r.parentNode.insertBefore(t,r.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function ly(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function cy(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var ku=null;function vb(t,e,n){if(ku===null){var s=new Map,i=ku=new Map;i.set(n,s)}else i=ku,s=i.get(n),s||(s=new Map,i.set(n,s));if(s.has(t))return s;for(s.set(t,null),n=n.getElementsByTagName(t),i=0;i<n.length;i++){var r=n[i];if(!(r[tc]||r[jt]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var a=r.getAttribute(e)||"";a=t+a;var o=s.get(a);o?o.push(r):s.set(a,[r])}}return s}function bb(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function OR(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function rC(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function jR(t,e,n,s){if(n.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var i=io(s.href),r=e.querySelector(oc(i));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=fd.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=r,Et(r);return}r=e.ownerDocument||e,s=iC(s),(i=Gn.get(i))&&ly(s,i),r=r.createElement("link"),Et(r);var a=r;a._p=new Promise(function(o,l){a.onload=o,a.onerror=l}),It(r,"link",s),n.instance=r}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=fd.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var Ff=0;function PR(t,e){return t.stylesheets&&t.count===0&&Nu(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var s=setTimeout(function(){if(t.stylesheets&&Nu(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4+e);0<t.imgBytes&&Ff===0&&(Ff=62500*mR());var i=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Nu(t,t.stylesheets),t.unsuspend)){var r=t.unsuspend;t.unsuspend=null,r()}},(t.imgBytes>Ff?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(s),clearTimeout(i)}}:null}function fd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Nu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var pd=null;function Nu(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,pd=new Map,e.forEach(BR,t),pd=null,fd.call(t))}function BR(t,e){if(!(e.state.loading&4)){var n=pd.get(t);if(n)var s=n.get(null);else{n=new Map,pd.set(t,n);for(var i=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<i.length;r++){var a=i[r];(a.nodeName==="LINK"||a.getAttribute("media")!=="not all")&&(n.set(a.dataset.precedence,a),s=a)}s&&n.set(null,s)}i=e.instance,a=i.getAttribute("data-precedence"),r=n.get(a)||s,r===s&&n.set(null,i),n.set(a,i),this.count++,s=fd.bind(this),i.addEventListener("load",s),i.addEventListener("error",s),r?r.parentNode.insertBefore(i,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(i,t.firstChild)),e.state.loading|=4}}var Pl={$$typeof:qs,Provider:null,Consumer:null,_currentValue:Rr,_currentValue2:Rr,_threadCount:0};function IR(t,e,n,s,i,r,a,o,l){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=uf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uf(0),this.hiddenUpdates=uf(null),this.identifierPrefix=s,this.onUncaughtError=i,this.onCaughtError=r,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function aC(t,e,n,s,i,r,a,o,l,c,u,d){return t=new IR(t,e,n,a,l,c,u,d,o),e=1,r===!0&&(e|=24),r=gn(3,null,null,e),t.current=r,r.stateNode=t,e=Pg(),e.refCount++,t.pooledCache=e,e.refCount++,r.memoizedState={element:s,isDehydrated:n,cache:e},Lg(r),t}function oC(t){return t?(t=Ea,t):Ea}function lC(t,e,n,s,i,r){i=oC(i),s.context===null?s.context=i:s.pendingContext=i,s=Li(e),s.payload={element:n},r=r===void 0?null:r,r!==null&&(s.callback=r),n=Vi(t,s,e),n!==null&&(an(n,t,e),dl(n,t,e))}function xb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function uy(t,e){xb(t,e),(t=t.alternate)&&xb(t,e)}function cC(t){if(t.tag===13||t.tag===31){var e=Zr(t,67108864);e!==null&&an(e,t,67108864),uy(t,67108864)}}function _b(t){if(t.tag===13||t.tag===31){var e=wn();e=_g(e);var n=Zr(t,e);n!==null&&an(n,t,e),uy(t,e)}}var md=!0;function LR(t,e,n,s){var i=ue.T;ue.T=null;var r=Oe.p;try{Oe.p=2,dy(t,e,n,s)}finally{Oe.p=r,ue.T=i}}function VR(t,e,n,s){var i=ue.T;ue.T=null;var r=Oe.p;try{Oe.p=8,dy(t,e,n,s)}finally{Oe.p=r,ue.T=i}}function dy(t,e,n,s){if(md){var i=mm(s);if(i===null)Vf(t,e,s,gd,n),Sb(t,s);else if(FR(i,t,e,n,s))s.stopPropagation();else if(Sb(t,s),e&4&&-1<zR.indexOf(t)){for(;i!==null;){var r=xo(i);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var a=Sr(r.pendingLanes);if(a!==0){var o=r;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-Sn(a);o.entanglements[1]|=l,a&=~l}Ns(r),!(De&6)&&(rd=xn()+500,ac(0))}}break;case 31:case 13:o=Zr(r,2),o!==null&&an(o,r,2),hh(),uy(r,2)}if(r=mm(s),r===null&&Vf(t,e,s,gd,n),r===i)break;i=r}i!==null&&s.stopPropagation()}else Vf(t,e,s,null,n)}}function mm(t){return t=Tg(t),hy(t)}var gd=null;function hy(t){if(gd=null,t=xa(t),t!==null){var e=Ql(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=N_(e),t!==null)return t;t=null}else if(n===31){if(t=M_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return gd=t,null}function uC(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(TM()){case j_:return 2;case P_:return 8;case qu:case EM:return 32;case B_:return 268435456;default:return 32}default:return 32}}var gm=!1,Hi=null,Ui=null,Gi=null,Bl=new Map,Il=new Map,ki=[],zR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Sb(t,e){switch(t){case"focusin":case"focusout":Hi=null;break;case"dragenter":case"dragleave":Ui=null;break;case"mouseover":case"mouseout":Gi=null;break;case"pointerover":case"pointerout":Bl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Il.delete(e.pointerId)}}function Yo(t,e,n,s,i,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:r,targetContainers:[i]},e!==null&&(e=xo(e),e!==null&&cC(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function FR(t,e,n,s,i){switch(e){case"focusin":return Hi=Yo(Hi,t,e,n,s,i),!0;case"dragenter":return Ui=Yo(Ui,t,e,n,s,i),!0;case"mouseover":return Gi=Yo(Gi,t,e,n,s,i),!0;case"pointerover":var r=i.pointerId;return Bl.set(r,Yo(Bl.get(r)||null,t,e,n,s,i)),!0;case"gotpointercapture":return r=i.pointerId,Il.set(r,Yo(Il.get(r)||null,t,e,n,s,i)),!0}return!1}function dC(t){var e=xa(t.target);if(e!==null){var n=Ql(e);if(n!==null){if(e=n.tag,e===13){if(e=N_(n),e!==null){t.blockedOn=e,av(t.priority,function(){_b(n)});return}}else if(e===31){if(e=M_(n),e!==null){t.blockedOn=e,av(t.priority,function(){_b(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Mu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=mm(t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);jp=s,n.target.dispatchEvent(s),jp=null}else return e=xo(n),e!==null&&cC(e),t.blockedOn=n,!1;e.shift()}return!0}function wb(t,e,n){Mu(t)&&n.delete(e)}function HR(){gm=!1,Hi!==null&&Mu(Hi)&&(Hi=null),Ui!==null&&Mu(Ui)&&(Ui=null),Gi!==null&&Mu(Gi)&&(Gi=null),Bl.forEach(wb),Il.forEach(wb)}function Kc(t,e){t.blockedOn===e&&(t.blockedOn=null,gm||(gm=!0,wt.unstable_scheduleCallback(wt.unstable_NormalPriority,HR)))}var Xc=null;function Cb(t){Xc!==t&&(Xc=t,wt.unstable_scheduleCallback(wt.unstable_NormalPriority,function(){Xc===t&&(Xc=null);for(var e=0;e<t.length;e+=3){var n=t[e],s=t[e+1],i=t[e+2];if(typeof s!="function"){if(hy(s||n)===null)continue;break}var r=xo(n);r!==null&&(t.splice(e,3),e-=3,Xp(r,{pending:!0,data:i,method:n.method,action:s},s,i))}}))}function ro(t){function e(l){return Kc(l,t)}Hi!==null&&Kc(Hi,t),Ui!==null&&Kc(Ui,t),Gi!==null&&Kc(Gi,t),Bl.forEach(e),Il.forEach(e);for(var n=0;n<ki.length;n++){var s=ki[n];s.blockedOn===t&&(s.blockedOn=null)}for(;0<ki.length&&(n=ki[0],n.blockedOn===null);)dC(n),n.blockedOn===null&&ki.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(s=0;s<n.length;s+=3){var i=n[s],r=n[s+1],a=i[ln]||null;if(typeof r=="function")a||Cb(n);else if(a){var o=null;if(r&&r.hasAttribute("formAction")){if(i=r,a=r[ln]||null)o=a.formAction;else if(hy(i)!==null)continue}else o=a.action;typeof o=="function"?n[s+1]=o:(n.splice(s,3),s-=3),Cb(n)}}}function hC(){function t(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(a){return i=a})},focusReset:"manual",scroll:"manual"})}function e(){i!==null&&(i(),i=null),s||setTimeout(n,20)}function n(){if(!s&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,i=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){s=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),i!==null&&(i(),i=null)}}}function fy(t){this._internalRoot=t}mh.prototype.render=fy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));var n=e.current,s=wn();lC(n,s,t,e,null,null)};mh.prototype.unmount=fy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;lC(t.current,2,null,t,null,null),hh(),e[bo]=null}};function mh(t){this._internalRoot=t}mh.prototype.unstable_scheduleHydration=function(t){if(t){var e=F_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ki.length&&e!==0&&e<ki[n].priority;n++);ki.splice(n,0,t),n===0&&dC(t)}};var Tb=A_.version;if(Tb!=="19.2.4")throw Error(H(527,Tb,"19.2.4"));Oe.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=vM(e),t=t!==null?R_(t):null,t=t===null?null:t.stateNode,t};var UR={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ue,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qc.isDisabled&&Qc.supportsFiber)try{Zl=Qc.inject(UR),_n=Qc}catch{}}Zd.createRoot=function(t,e){if(!k_(t))throw Error(H(299));var n=!1,s="",i=sw,r=iw,a=rw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(i=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=aC(t,1,!1,null,null,n,s,null,i,r,a,hC),t[bo]=e.current,oy(t),new fy(e)};Zd.hydrateRoot=function(t,e,n){if(!k_(t))throw Error(H(299));var s=!1,i="",r=sw,a=iw,o=rw,l=null;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(a=n.onCaughtError),n.onRecoverableError!==void 0&&(o=n.onRecoverableError),n.formState!==void 0&&(l=n.formState)),e=aC(t,1,!0,e,n??null,s,i,l,r,a,o,hC),e.context=oC(null),n=e.current,s=wn(),s=_g(s),i=Li(s),i.callback=null,Vi(n,i,s),n=s,e.current.lanes=n,ec(e,n),Ns(e),t[bo]=e.current,oy(t),new mh(e)};Zd.version="19.2.4";function fC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fC)}catch(t){console.error(t)}}fC(),f_.exports=Zd;var GR=f_.exports,pC={exports:{}},gh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qR=Symbol.for("react.transitional.element"),WR=Symbol.for("react.fragment");function mC(t,e,n){var s=null;if(n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),"key"in e){n={};for(var i in e)i!=="key"&&(n[i]=e[i])}else n=e;return e=n.ref,{$$typeof:qR,type:t,key:s,ref:e!==void 0?e:null,props:n}}gh.Fragment=WR;gh.jsx=mC;gh.jsxs=mC;pC.exports=gh;var p=pC.exports;const gC=x.createContext({});function $R(t){const e=x.useRef(null);return e.current===null&&(e.current=t()),e.current}const yC=typeof window<"u",YR=yC?x.useLayoutEffect:x.useEffect,py=x.createContext(null);function my(t,e){t.indexOf(e)===-1&&t.push(e)}function gy(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ws=(t,e,n)=>n>e?e:n<t?t:n;let yy=()=>{};const si={},vC=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function bC(t){return typeof t=="object"&&t!==null}const xC=t=>/^0[^.\s]+$/u.test(t);function vy(t){let e;return()=>(e===void 0&&(e=t()),e)}const Fn=t=>t,KR=(t,e)=>n=>e(t(n)),cc=(...t)=>t.reduce(KR),Ll=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class by{constructor(){this.subscriptions=[]}add(e){return my(this.subscriptions,e),()=>gy(this.subscriptions,e)}notify(e,n,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,s);else for(let r=0;r<i;r++){const a=this.subscriptions[r];a&&a(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const vs=t=>t*1e3,In=t=>t/1e3;function _C(t,e){return e?t*(1e3/e):0}const SC=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,XR=1e-7,QR=12;function ZR(t,e,n,s,i){let r,a,o=0;do a=e+(n-e)/2,r=SC(a,s,i)-t,r>0?n=a:e=a;while(Math.abs(r)>XR&&++o<QR);return a}function uc(t,e,n,s){if(t===e&&n===s)return Fn;const i=r=>ZR(r,0,1,t,n);return r=>r===0||r===1?r:SC(i(r),e,s)}const wC=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,CC=t=>e=>1-t(1-e),TC=uc(.33,1.53,.69,.99),xy=CC(TC),EC=wC(xy),AC=t=>(t*=2)<1?.5*xy(t):.5*(2-Math.pow(2,-10*(t-1))),_y=t=>1-Math.sin(Math.acos(t)),kC=CC(_y),NC=wC(_y),JR=uc(.42,0,1,1),eD=uc(0,0,.58,1),MC=uc(.42,0,.58,1),tD=t=>Array.isArray(t)&&typeof t[0]!="number",RC=t=>Array.isArray(t)&&typeof t[0]=="number",nD={linear:Fn,easeIn:JR,easeInOut:MC,easeOut:eD,circIn:_y,circInOut:NC,circOut:kC,backIn:xy,backInOut:EC,backOut:TC,anticipate:AC},sD=t=>typeof t=="string",Eb=t=>{if(RC(t)){yy(t.length===4);const[e,n,s,i]=t;return uc(e,n,s,i)}else if(sD(t))return nD[t];return t},Zc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function iD(t,e){let n=new Set,s=new Set,i=!1,r=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(u){a.has(u)&&(c.schedule(u),t()),u(o)}const c={schedule:(u,d=!1,h=!1)=>{const m=h&&i?n:s;return d&&a.add(u),m.has(u)||m.add(u),u},cancel:u=>{s.delete(u),a.delete(u)},process:u=>{if(o=u,i){r=!0;return}i=!0,[n,s]=[s,n],n.forEach(l),n.clear(),i=!1,r&&(r=!1,c.process(u))}};return c}const rD=40;function DC(t,e){let n=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,a=Zc.reduce((_,S)=>(_[S]=iD(r),_),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:u,update:d,preRender:h,render:f,postRender:m}=a,g=()=>{const _=si.useManualTiming?i.timestamp:performance.now();n=!1,si.useManualTiming||(i.delta=s?1e3/60:Math.max(Math.min(_-i.timestamp,rD),1)),i.timestamp=_,i.isProcessing=!0,o.process(i),l.process(i),c.process(i),u.process(i),d.process(i),h.process(i),f.process(i),m.process(i),i.isProcessing=!1,n&&e&&(s=!1,t(g))},b=()=>{n=!0,s=!0,i.isProcessing||t(g)};return{schedule:Zc.reduce((_,S)=>{const w=a[S];return _[S]=(E,T=!1,C=!1)=>(n||b(),w.schedule(E,T,C)),_},{}),cancel:_=>{for(let S=0;S<Zc.length;S++)a[Zc[S]].cancel(_)},state:i,steps:a}}const{schedule:qe,cancel:Zi,state:Rt,steps:Hf}=DC(typeof requestAnimationFrame<"u"?requestAnimationFrame:Fn,!0);let Ru;function aD(){Ru=void 0}const Wt={now:()=>(Ru===void 0&&Wt.set(Rt.isProcessing||si.useManualTiming?Rt.timestamp:performance.now()),Ru),set:t=>{Ru=t,queueMicrotask(aD)}},OC=t=>e=>typeof e=="string"&&e.startsWith(t),jC=OC("--"),oD=OC("var(--"),Sy=t=>oD(t)?lD.test(t.split("/*")[0].trim()):!1,lD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function Ab(t){return typeof t!="string"?!1:t.split("/*")[0].includes("var(--")}const Eo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Vl={...Eo,transform:t=>ws(0,1,t)},Jc={...Eo,default:1},xl=t=>Math.round(t*1e5)/1e5,wy=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function cD(t){return t==null}const uD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Cy=(t,e)=>n=>!!(typeof n=="string"&&uD.test(n)&&n.startsWith(t)||e&&!cD(n)&&Object.prototype.hasOwnProperty.call(n,e)),PC=(t,e,n)=>s=>{if(typeof s!="string")return s;const[i,r,a,o]=s.match(wy);return{[t]:parseFloat(i),[e]:parseFloat(r),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},dD=t=>ws(0,255,t),Uf={...Eo,transform:t=>Math.round(dD(t))},Er={test:Cy("rgb","red"),parse:PC("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+Uf.transform(t)+", "+Uf.transform(e)+", "+Uf.transform(n)+", "+xl(Vl.transform(s))+")"};function hD(t){let e="",n="",s="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,s+=s,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const ym={test:Cy("#"),parse:hD,transform:Er.transform},dc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),vi=dc("deg"),bs=dc("%"),Z=dc("px"),fD=dc("vh"),pD=dc("vw"),kb={...bs,parse:t=>bs.parse(t)/100,transform:t=>bs.transform(t*100)},Ma={test:Cy("hsl","hue"),parse:PC("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+bs.transform(xl(e))+", "+bs.transform(xl(n))+", "+xl(Vl.transform(s))+")"},ft={test:t=>Er.test(t)||ym.test(t)||Ma.test(t),parse:t=>Er.test(t)?Er.parse(t):Ma.test(t)?Ma.parse(t):ym.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Er.transform(t):Ma.transform(t),getAnimatableNone:t=>{const e=ft.parse(t);return e.alpha=0,ft.transform(e)}},mD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function gD(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(wy))==null?void 0:e.length)||0)+(((n=t.match(mD))==null?void 0:n.length)||0)>0}const BC="number",IC="color",yD="var",vD="var(",Nb="${}",bD=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function zl(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},i=[];let r=0;const o=e.replace(bD,l=>(ft.test(l)?(s.color.push(r),i.push(IC),n.push(ft.parse(l))):l.startsWith(vD)?(s.var.push(r),i.push(yD),n.push(l)):(s.number.push(r),i.push(BC),n.push(parseFloat(l))),++r,Nb)).split(Nb);return{values:n,split:o,indexes:s,types:i}}function LC(t){return zl(t).values}function VC(t){const{split:e,types:n}=zl(t),s=e.length;return i=>{let r="";for(let a=0;a<s;a++)if(r+=e[a],i[a]!==void 0){const o=n[a];o===BC?r+=xl(i[a]):o===IC?r+=ft.transform(i[a]):r+=i[a]}return r}}const xD=t=>typeof t=="number"?0:ft.test(t)?ft.getAnimatableNone(t):t;function _D(t){const e=LC(t);return VC(t)(e.map(xD))}const Ji={test:gD,parse:LC,createTransformer:VC,getAnimatableNone:_D};function Gf(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function SD({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let i=0,r=0,a=0;if(!e)i=r=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;i=Gf(l,o,t+1/3),r=Gf(l,o,t),a=Gf(l,o,t-1/3)}return{red:Math.round(i*255),green:Math.round(r*255),blue:Math.round(a*255),alpha:s}}function yd(t,e){return n=>n>0?e:t}const nt=(t,e,n)=>t+(e-t)*n,qf=(t,e,n)=>{const s=t*t,i=n*(e*e-s)+s;return i<0?0:Math.sqrt(i)},wD=[ym,Er,Ma],CD=t=>wD.find(e=>e.test(t));function Mb(t){const e=CD(t);if(!e)return!1;let n=e.parse(t);return e===Ma&&(n=SD(n)),n}const Rb=(t,e)=>{const n=Mb(t),s=Mb(e);if(!n||!s)return yd(t,e);const i={...n};return r=>(i.red=qf(n.red,s.red,r),i.green=qf(n.green,s.green,r),i.blue=qf(n.blue,s.blue,r),i.alpha=nt(n.alpha,s.alpha,r),Er.transform(i))},vm=new Set(["none","hidden"]);function TD(t,e){return vm.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function ED(t,e){return n=>nt(t,e,n)}function Ty(t){return typeof t=="number"?ED:typeof t=="string"?Sy(t)?yd:ft.test(t)?Rb:ND:Array.isArray(t)?zC:typeof t=="object"?ft.test(t)?Rb:AD:yd}function zC(t,e){const n=[...t],s=n.length,i=t.map((r,a)=>Ty(r)(r,e[a]));return r=>{for(let a=0;a<s;a++)n[a]=i[a](r);return n}}function AD(t,e){const n={...t,...e},s={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(s[i]=Ty(t[i])(t[i],e[i]));return i=>{for(const r in s)n[r]=s[r](i);return n}}function kD(t,e){const n=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const r=e.types[i],a=t.indexes[r][s[r]],o=t.values[a]??0;n[i]=o,s[r]++}return n}const ND=(t,e)=>{const n=Ji.createTransformer(e),s=zl(t),i=zl(e);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?vm.has(t)&&!i.values.length||vm.has(e)&&!s.values.length?TD(t,e):cc(zC(kD(s,i),i.values),n):yd(t,e)};function FC(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?nt(t,e,n):Ty(t)(t,e)}const MD=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>qe.update(e,n),stop:()=>Zi(e),now:()=>Rt.isProcessing?Rt.timestamp:Wt.now()}},HC=(t,e,n=10)=>{let s="";const i=Math.max(Math.round(e/n),2);for(let r=0;r<i;r++)s+=Math.round(t(r/(i-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},vd=2e4;function Ey(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<vd;)e+=n,s=t.next(e);return e>=vd?1/0:e}function RD(t,e=100,n){const s=n({...t,keyframes:[0,e]}),i=Math.min(Ey(s),vd);return{type:"keyframes",ease:r=>s.next(i*r).value/e,duration:In(i)}}const DD=5;function UC(t,e,n){const s=Math.max(e-DD,0);return _C(n-t(s),e-s)}const it={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Wf=.001;function OD({duration:t=it.duration,bounce:e=it.bounce,velocity:n=it.velocity,mass:s=it.mass}){let i,r,a=1-e;a=ws(it.minDamping,it.maxDamping,a),t=ws(it.minDuration,it.maxDuration,In(t)),a<1?(i=c=>{const u=c*a,d=u*t,h=u-n,f=bm(c,a),m=Math.exp(-d);return Wf-h/f*m},r=c=>{const d=c*a*t,h=d*n+n,f=Math.pow(a,2)*Math.pow(c,2)*t,m=Math.exp(-d),g=bm(Math.pow(c,2),a);return(-i(c)+Wf>0?-1:1)*((h-f)*m)/g}):(i=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-Wf+u*d},r=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const o=5/t,l=PD(i,r,o);if(t=vs(t),isNaN(l))return{stiffness:it.stiffness,damping:it.damping,duration:t};{const c=Math.pow(l,2)*s;return{stiffness:c,damping:a*2*Math.sqrt(s*c),duration:t}}}const jD=12;function PD(t,e,n){let s=n;for(let i=1;i<jD;i++)s=s-t(s)/e(s);return s}function bm(t,e){return t*Math.sqrt(1-e*e)}const BD=["duration","bounce"],ID=["stiffness","damping","mass"];function Db(t,e){return e.some(n=>t[n]!==void 0)}function LD(t){let e={velocity:it.velocity,stiffness:it.stiffness,damping:it.damping,mass:it.mass,isResolvedFromDuration:!1,...t};if(!Db(t,ID)&&Db(t,BD))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),i=s*s,r=2*ws(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:it.mass,stiffness:i,damping:r}}else{const n=OD(t);e={...e,...n,mass:it.mass},e.isResolvedFromDuration=!0}return e}function bd(t=it.visualDuration,e=it.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:i}=n;const r=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:r},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=LD({...n,velocity:-In(n.velocity||0)}),m=h||0,g=c/(2*Math.sqrt(l*u)),b=a-r,y=In(Math.sqrt(l/u)),v=Math.abs(b)<5;s||(s=v?it.restSpeed.granular:it.restSpeed.default),i||(i=v?it.restDelta.granular:it.restDelta.default);let _;if(g<1){const w=bm(y,g);_=E=>{const T=Math.exp(-g*y*E);return a-T*((m+g*y*b)/w*Math.sin(w*E)+b*Math.cos(w*E))}}else if(g===1)_=w=>a-Math.exp(-y*w)*(b+(m+y*b)*w);else{const w=y*Math.sqrt(g*g-1);_=E=>{const T=Math.exp(-g*y*E),C=Math.min(w*E,300);return a-T*((m+g*y*b)*Math.sinh(C)+w*b*Math.cosh(C))/w}}const S={calculatedDuration:f&&d||null,next:w=>{const E=_(w);if(f)o.done=w>=d;else{let T=w===0?m:0;g<1&&(T=w===0?vs(m):UC(_,w,E));const C=Math.abs(T)<=s,N=Math.abs(a-E)<=i;o.done=C&&N}return o.value=o.done?a:E,o},toString:()=>{const w=Math.min(Ey(S),vd),E=HC(T=>S.next(w*T).value,w,30);return w+"ms "+E},toTransition:()=>{}};return S}bd.applyToOptions=t=>{const e=RD(t,100,bd);return t.ease=e.ease,t.duration=vs(e.duration),t.type="keyframes",t};function xm({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:r=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],h={done:!1,value:d},f=C=>o!==void 0&&C<o||l!==void 0&&C>l,m=C=>o===void 0?l:l===void 0||Math.abs(o-C)<Math.abs(l-C)?o:l;let g=n*e;const b=d+g,y=a===void 0?b:a(b);y!==b&&(g=y-d);const v=C=>-g*Math.exp(-C/s),_=C=>y+v(C),S=C=>{const N=v(C),A=_(C);h.done=Math.abs(N)<=c,h.value=h.done?y:A};let w,E;const T=C=>{f(h.value)&&(w=C,E=bd({keyframes:[h.value,m(h.value)],velocity:UC(_,C,h.value),damping:i,stiffness:r,restDelta:c,restSpeed:u}))};return T(0),{calculatedDuration:null,next:C=>{let N=!1;return!E&&w===void 0&&(N=!0,S(C),T(C)),w!==void 0&&C>=w?E.next(C-w):(!N&&S(C),h)}}}function VD(t,e,n){const s=[],i=n||si.mix||FC,r=t.length-1;for(let a=0;a<r;a++){let o=i(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||Fn:e;o=cc(l,o)}s.push(o)}return s}function zD(t,e,{clamp:n=!0,ease:s,mixer:i}={}){const r=t.length;if(yy(r===e.length),r===1)return()=>e[0];if(r===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[r-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=VD(e,s,i),l=o.length,c=u=>{if(a&&u<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const h=Ll(t[d],t[d+1],u);return o[d](h)};return n?u=>c(ws(t[0],t[r-1],u)):c}function FD(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const i=Ll(0,e,s);t.push(nt(n,1,i))}}function HD(t){const e=[0];return FD(e,t.length-1),e}function UD(t,e){return t.map(n=>n*e)}function GD(t,e){return t.map(()=>e||MC).splice(0,t.length-1)}function _l({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const i=tD(s)?s.map(Eb):Eb(s),r={done:!1,value:e[0]},a=UD(n&&n.length===e.length?n:HD(e),t),o=zD(a,e,{ease:Array.isArray(i)?i:GD(e,i)});return{calculatedDuration:t,next:l=>(r.value=o(l),r.done=l>=t,r)}}const qD=t=>t!==null;function Ay(t,{repeat:e,repeatType:n="loop"},s,i=1){const r=t.filter(qD),o=i<0||e&&n!=="loop"&&e%2===1?0:r.length-1;return!o||s===void 0?r[o]:s}const WD={decay:xm,inertia:xm,tween:_l,keyframes:_l,spring:bd};function GC(t){typeof t.type=="string"&&(t.type=WD[t.type])}class ky{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const $D=t=>t/100;class Ny extends ky{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var s,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Wt.now()&&this.tick(Wt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(s=this.options).onStop)==null||i.call(s))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;GC(e);const{type:n=_l,repeat:s=0,repeatDelay:i=0,repeatType:r,velocity:a=0}=e;let{keyframes:o}=e;const l=n||_l;l!==_l&&typeof o[0]!="number"&&(this.mixKeyframes=cc($D,FC(o[0],o[1])),o=[0,100]);const c=l({...e,keyframes:o});r==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=Ey(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+i,this.totalDuration=this.resolvedDuration*(s+1)-i,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:i,mixKeyframes:r,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return s.next(0);const{delay:c=0,keyframes:u,repeat:d,repeatType:h,repeatDelay:f,type:m,onUpdate:g,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const y=this.currentTime-c*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?y<0:y>i;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let _=this.currentTime,S=s;if(d){const C=Math.min(this.currentTime,i)/o;let N=Math.floor(C),A=C%1;!A&&C>=1&&(A=1),A===1&&N--,N=Math.min(N,d+1),!!(N%2)&&(h==="reverse"?(A=1-A,f&&(A-=f/o)):h==="mirror"&&(S=a)),_=ws(0,1,A)*o}const w=v?{done:!1,value:u[0]}:S.next(_);r&&(w.value=r(w.value));let{done:E}=w;!v&&l!==null&&(E=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return T&&m!==xm&&(w.value=Ay(u,this.options,b,this.speed)),g&&g(w.value),T&&this.finish(),w}then(e,n){return this.finished.then(e,n)}get duration(){return In(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+In(e)}get time(){return In(this.currentTime)}set time(e){var n;e=vs(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Wt.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=In(this.currentTime))}play(){var i,r;if(this.isStopped)return;const{driver:e=MD,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(r=(i=this.options).onPlay)==null||r.call(i);const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Wt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function YD(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Ar=t=>t*180/Math.PI,_m=t=>{const e=Ar(Math.atan2(t[1],t[0]));return Sm(e)},KD={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:_m,rotateZ:_m,skewX:t=>Ar(Math.atan(t[1])),skewY:t=>Ar(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Sm=t=>(t=t%360,t<0&&(t+=360),t),Ob=_m,jb=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Pb=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),XD={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:jb,scaleY:Pb,scale:t=>(jb(t)+Pb(t))/2,rotateX:t=>Sm(Ar(Math.atan2(t[6],t[5]))),rotateY:t=>Sm(Ar(Math.atan2(-t[2],t[0]))),rotateZ:Ob,rotate:Ob,skewX:t=>Ar(Math.atan(t[4])),skewY:t=>Ar(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function wm(t){return t.includes("scale")?1:0}function Cm(t,e){if(!t||t==="none")return wm(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,i;if(n)s=XD,i=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=KD,i=o}if(!i)return wm(e);const r=s[e],a=i[1].split(",").map(ZD);return typeof r=="function"?r(a):a[r]}const QD=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Cm(n,e)};function ZD(t){return parseFloat(t.trim())}const Ao=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ko=new Set(Ao),Bb=t=>t===Eo||t===Z,JD=new Set(["x","y","z"]),eO=Ao.filter(t=>!JD.has(t));function tO(t){const e=[];return eO.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const Pi={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Cm(e,"x"),y:(t,{transform:e})=>Cm(e,"y")};Pi.translateX=Pi.x;Pi.translateY=Pi.y;const Br=new Set;let Tm=!1,Em=!1,Am=!1;function qC(){if(Em){const t=Array.from(Br).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const i=tO(s);i.length&&(n.set(s,i),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const i=n.get(s);i&&i.forEach(([r,a])=>{var o;(o=s.getValue(r))==null||o.set(a)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Em=!1,Tm=!1,Br.forEach(t=>t.complete(Am)),Br.clear()}function WC(){Br.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Em=!0)})}function nO(){Am=!0,WC(),qC(),Am=!1}class My{constructor(e,n,s,i,r,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=i,this.element=r,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Br.add(this),Tm||(Tm=!0,qe.read(WC),qe.resolveKeyframes(qC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:i}=this;if(e[0]===null){const r=i==null?void 0:i.get(),a=e[e.length-1];if(r!==void 0)e[0]=r;else if(s&&n){const o=s.readValue(n,a);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=a),i&&r===void 0&&i.set(e[0])}YD(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Br.delete(this)}cancel(){this.state==="scheduled"&&(Br.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const sO=t=>t.startsWith("--");function iO(t,e,n){sO(e)?t.style.setProperty(e,n):t.style[e]=n}const rO=vy(()=>window.ScrollTimeline!==void 0),aO={};function oO(t,e){const n=vy(t);return()=>aO[e]??n()}const $C=oO(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),sl=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,Ib={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:sl([0,.65,.55,1]),circOut:sl([.55,0,1,.45]),backIn:sl([.31,.01,.66,-.59]),backOut:sl([.33,1.53,.69,.99])};function YC(t,e){if(t)return typeof t=="function"?$C()?HC(t,e):"ease-out":RC(t)?sl(t):Array.isArray(t)?t.map(n=>YC(n,e)||Ib.easeOut):Ib[t]}function lO(t,e,n,{delay:s=0,duration:i=300,repeat:r=0,repeatType:a="loop",ease:o="easeOut",times:l}={},c=void 0){const u={[e]:n};l&&(u.offset=l);const d=YC(o,i);Array.isArray(d)&&(u.easing=d);const h={delay:s,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:r+1,direction:a==="reverse"?"alternate":"normal"};return c&&(h.pseudoElement=c),t.animate(u,h)}function KC(t){return typeof t=="function"&&"applyToOptions"in t}function cO({type:t,...e}){return KC(t)&&$C()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class uO extends ky{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:n,name:s,keyframes:i,pseudoElement:r,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!r,this.allowFlatten=a,this.options=e,yy(typeof e.type!="string");const c=cO(e);this.animation=lO(n,s,i,c,r),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const u=Ay(i,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(u):iO(n,s,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var n,s,i;const e=(n=this.options)==null?void 0:n.element;!this.isPseudoElement&&(e!=null&&e.isConnected)&&((i=(s=this.animation).commitStyles)==null||i.call(s))}get duration(){var n,s;const e=((s=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:s.call(n).duration)||0;return In(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+In(e)}get time(){return In(Number(this.animation.currentTime)||0)}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=vs(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var s;return this.allowFlatten&&((s=this.animation.effect)==null||s.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&rO()?(this.animation.timeline=e,Fn):n(this)}}const XC={anticipate:AC,backInOut:EC,circInOut:NC};function dO(t){return t in XC}function hO(t){typeof t.ease=="string"&&dO(t.ease)&&(t.ease=XC[t.ease])}const $f=10;class fO extends uO{constructor(e){hO(e),GC(e),super(e),e.startTime!==void 0&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:i,element:r,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new Ny({...a,autoplay:!1}),l=Math.max($f,Wt.now()-this.startTime),c=ws(0,$f,l-$f);n.setWithVelocity(o.sample(Math.max(0,l-c)).value,o.sample(l).value,c),o.stop()}}const Lb=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ji.test(t)||t==="0")&&!t.startsWith("url("));function pO(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function mO(t,e,n,s){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const r=t[t.length-1],a=Lb(i,e),o=Lb(r,e);return!a||!o?!1:pO(t)||(n==="spring"||KC(n))&&s}function km(t){t.duration=0,t.type="keyframes"}const gO=new Set(["opacity","clipPath","filter","transform"]),yO=vy(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function vO(t){var u;const{motionValue:e,name:n,repeatDelay:s,repeatType:i,damping:r,type:a}=t;if(!(((u=e==null?void 0:e.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return yO()&&n&&gO.has(n)&&(n!=="transform"||!c)&&!l&&!s&&i!=="mirror"&&r!==0&&a!=="inertia"}const bO=40;class xO extends ky{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:a="loop",keyframes:o,name:l,motionValue:c,element:u,...d}){var m;super(),this.stop=()=>{var g,b;this._animation&&(this._animation.stop(),(g=this.stopTimeline)==null||g.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=Wt.now();const h={autoplay:e,delay:n,type:s,repeat:i,repeatDelay:r,repeatType:a,name:l,motionValue:c,element:u,...d},f=(u==null?void 0:u.KeyframeResolver)||My;this.keyframeResolver=new f(o,(g,b,y)=>this.onKeyframesResolved(g,b,h,!y),l,c,u),(m=this.keyframeResolver)==null||m.scheduleResolve()}onKeyframesResolved(e,n,s,i){var b,y;this.keyframeResolver=void 0;const{name:r,type:a,velocity:o,delay:l,isHandoff:c,onUpdate:u}=s;this.resolvedAt=Wt.now(),mO(e,r,a,o)||((si.instantAnimations||!l)&&(u==null||u(Ay(e,s,n))),e[0]=e[e.length-1],km(s),s.repeat=0);const h={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>bO?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},f=!c&&vO(h),m=(y=(b=h.motionValue)==null?void 0:b.owner)==null?void 0:y.current,g=f?new fO({...h,element:m}):new Ny(h);g.finished.then(()=>{this.notifyFinished()}).catch(Fn),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),nO()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}function QC(t,e,n,s=0,i=1){const r=Array.from(t).sort((c,u)=>c.sortNodePosition(u)).indexOf(e),a=t.size,o=(a-1)*s;return typeof n=="function"?n(r,a):i===1?r*s:o-r*s}const _O=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function SO(t){const e=_O.exec(t);if(!e)return[,];const[,n,s,i]=e;return[`--${n??s}`,i]}function ZC(t,e,n=1){const[s,i]=SO(t);if(!s)return;const r=window.getComputedStyle(e).getPropertyValue(s);if(r){const a=r.trim();return vC(a)?parseFloat(a):a}return Sy(i)?ZC(i,e,n+1):i}const wO={type:"spring",stiffness:500,damping:25,restSpeed:10},CO=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),TO={type:"keyframes",duration:.8},EO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},AO=(t,{keyframes:e})=>e.length>2?TO:ko.has(t)?t.startsWith("scale")?CO(e[1]):wO:EO,kO=t=>t!==null;function NO(t,{repeat:e,repeatType:n="loop"},s){const i=t.filter(kO),r=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[r]}function JC(t,e){if(t!=null&&t.inherit&&e){const{inherit:n,...s}=t;return{...e,...s}}return t}function Ry(t,e){const n=(t==null?void 0:t[e])??(t==null?void 0:t.default)??t;return n!==t?JC(n,t):n}function MO({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:i,repeat:r,repeatType:a,repeatDelay:o,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const Dy=(t,e,n,s={},i,r)=>a=>{const o=Ry(s,t)||{},l=o.delay||s.delay||0;let{elapsed:c=0}=s;c=c-vs(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-c,onUpdate:h=>{e.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:r?void 0:i};MO(o)||Object.assign(u,AO(t,u)),u.duration&&(u.duration=vs(u.duration)),u.repeatDelay&&(u.repeatDelay=vs(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(km(u),u.delay===0&&(d=!0)),(si.instantAnimations||si.skipAnimations||i!=null&&i.shouldSkipAnimations)&&(d=!0,km(u),u.delay=0),u.allowFlatten=!o.type&&!o.ease,d&&!r&&e.get()!==void 0){const h=NO(u.keyframes,o);if(h!==void 0){qe.update(()=>{u.onUpdate(h),u.onComplete()});return}}return o.isSync?new Ny(u):new xO(u)};function Vb(t){const e=[{},{}];return t==null||t.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function Oy(t,e,n,s){if(typeof e=="function"){const[i,r]=Vb(s);e=e(n!==void 0?n:t.custom,i,r)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,r]=Vb(s);e=e(n!==void 0?n:t.custom,i,r)}return e}function qa(t,e,n){const s=t.getProps();return Oy(s,e,n!==void 0?n:s.custom,t)}const eT=new Set(["width","height","top","left","right","bottom",...Ao]),zb=30,RO=t=>!isNaN(parseFloat(t));class DO{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{var r;const i=Wt.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&((r=this.events.change)==null||r.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Wt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=RO(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new by);const s=this.events[e].add(n);return e==="change"?()=>{s(),qe.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Wt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>zb)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,zb);return _C(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ao(t,e){return new DO(t,e)}const Nm=t=>Array.isArray(t);function OO(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ao(n))}function jO(t){return Nm(t)?t[t.length-1]||0:t}function PO(t,e){const n=qa(t,e);let{transitionEnd:s={},transition:i={},...r}=n||{};r={...r,...s};for(const a in r){const o=jO(r[a]);OO(t,a,o)}}const zt=t=>!!(t&&t.getVelocity);function BO(t){return!!(zt(t)&&t.add)}function Mm(t,e){const n=t.getValue("willChange");if(BO(n))return n.add(e);if(!n&&si.WillChange){const s=new si.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function jy(t){return t.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}const IO="framerAppearId",tT="data-"+jy(IO);function nT(t){return t.props[tT]}function LO({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function sT(t,e,{delay:n=0,transitionOverride:s,type:i}={}){let{transition:r,transitionEnd:a,...o}=e;const l=t.getDefaultTransition();r=r?JC(r,l):l;const c=r==null?void 0:r.reduceMotion;s&&(r=s);const u=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in o){const f=t.getValue(h,t.latestValues[h]??null),m=o[h];if(m===void 0||d&&LO(d,h))continue;const g={delay:n,...Ry(r||{},h)},b=f.get();if(b!==void 0&&!f.isAnimating&&!Array.isArray(m)&&m===b&&!g.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const S=nT(t);if(S){const w=window.MotionHandoffAnimation(S,h,qe);w!==null&&(g.startTime=w,y=!0)}}Mm(t,h);const v=c??t.shouldReduceMotion;f.start(Dy(h,f,m,v&&eT.has(h)?{type:!1}:g,t,y));const _=f.animation;_&&u.push(_)}if(a){const h=()=>qe.update(()=>{a&&PO(t,a)});u.length?Promise.all(u).then(h):h()}return u}function Rm(t,e,n={}){var l;const s=qa(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const r=s?()=>Promise.all(sT(t,s,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=i;return VO(t,e,c,u,d,h,n)}:()=>Promise.resolve(),{when:o}=i;if(o){const[c,u]=o==="beforeChildren"?[r,a]:[a,r];return c().then(()=>u())}else return Promise.all([r(),a(n.delay)])}function VO(t,e,n=0,s=0,i=0,r=1,a){const o=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),o.push(Rm(l,e,{...a,delay:n+(typeof s=="function"?0:s)+QC(t.variantChildren,l,s,i,r)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(o)}function zO(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const i=e.map(r=>Rm(t,r,n));s=Promise.all(i)}else if(typeof e=="string")s=Rm(t,e,n);else{const i=typeof e=="function"?qa(t,e,n.custom):e;s=Promise.all(sT(t,i,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}const FO={test:t=>t==="auto",parse:t=>t},iT=t=>e=>e.test(t),rT=[Eo,Z,bs,vi,pD,fD,FO],Fb=t=>rT.find(iT(t));function HO(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||xC(t):!0}const UO=new Set(["brightness","contrast","saturate","opacity"]);function GO(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(wy)||[];if(!s)return t;const i=n.replace(s,"");let r=UO.has(e)?1:0;return s!==n&&(r*=100),e+"("+r+i+")"}const qO=/\b([a-z-]*)\(.*?\)/gu,Dm={...Ji,getAnimatableNone:t=>{const e=t.match(qO);return e?e.map(GO).join(" "):t}},Hb={...Eo,transform:Math.round},WO={rotate:vi,rotateX:vi,rotateY:vi,rotateZ:vi,scale:Jc,scaleX:Jc,scaleY:Jc,scaleZ:Jc,skew:vi,skewX:vi,skewY:vi,distance:Z,translateX:Z,translateY:Z,translateZ:Z,x:Z,y:Z,z:Z,perspective:Z,transformPerspective:Z,opacity:Vl,originX:kb,originY:kb,originZ:Z},Py={borderWidth:Z,borderTopWidth:Z,borderRightWidth:Z,borderBottomWidth:Z,borderLeftWidth:Z,borderRadius:Z,borderTopLeftRadius:Z,borderTopRightRadius:Z,borderBottomRightRadius:Z,borderBottomLeftRadius:Z,width:Z,maxWidth:Z,height:Z,maxHeight:Z,top:Z,right:Z,bottom:Z,left:Z,inset:Z,insetBlock:Z,insetBlockStart:Z,insetBlockEnd:Z,insetInline:Z,insetInlineStart:Z,insetInlineEnd:Z,padding:Z,paddingTop:Z,paddingRight:Z,paddingBottom:Z,paddingLeft:Z,paddingBlock:Z,paddingBlockStart:Z,paddingBlockEnd:Z,paddingInline:Z,paddingInlineStart:Z,paddingInlineEnd:Z,margin:Z,marginTop:Z,marginRight:Z,marginBottom:Z,marginLeft:Z,marginBlock:Z,marginBlockStart:Z,marginBlockEnd:Z,marginInline:Z,marginInlineStart:Z,marginInlineEnd:Z,fontSize:Z,backgroundPositionX:Z,backgroundPositionY:Z,...WO,zIndex:Hb,fillOpacity:Vl,strokeOpacity:Vl,numOctaves:Hb},$O={...Py,color:ft,backgroundColor:ft,outlineColor:ft,fill:ft,stroke:ft,borderColor:ft,borderTopColor:ft,borderRightColor:ft,borderBottomColor:ft,borderLeftColor:ft,filter:Dm,WebkitFilter:Dm},aT=t=>$O[t];function oT(t,e){let n=aT(t);return n!==Dm&&(n=Ji),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const YO=new Set(["auto","none","0"]);function KO(t,e,n){let s=0,i;for(;s<t.length&&!i;){const r=t[s];typeof r=="string"&&!YO.has(r)&&zl(r).values.length&&(i=t[s]),s++}if(i&&n)for(const r of e)t[r]=oT(n,i)}class XO extends My{constructor(e,n,s,i,r){super(e,n,s,i,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let d=e[u];if(typeof d=="string"&&(d=d.trim(),Sy(d))){const h=ZC(d,n.current);h!==void 0&&(e[u]=h),u===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!eT.has(s)||e.length!==2)return;const[i,r]=e,a=Fb(i),o=Fb(r),l=Ab(i),c=Ab(r);if(l!==c&&Pi[s]){this.needsMeasurement=!0;return}if(a!==o)if(Bb(a)&&Bb(o))for(let u=0;u<e.length;u++){const d=e[u];typeof d=="string"&&(e[u]=parseFloat(d))}else Pi[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let i=0;i<e.length;i++)(e[i]===null||HO(e[i]))&&s.push(i);s.length&&KO(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Pi[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(s,i).jump(i,!1)}measureEndState(){var o;const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const r=s.length-1,a=s[r];s[r]=Pi[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function lT(t,e,n){if(t==null)return[];if(t instanceof EventTarget)return[t];if(typeof t=="string"){let s=document;const i=(n==null?void 0:n[t])??s.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t).filter(s=>s!=null)}const cT=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function QO(t){return bC(t)&&"offsetHeight"in t}const{schedule:By}=DC(queueMicrotask,!1),$n={x:!1,y:!1};function uT(){return $n.x||$n.y}function ZO(t){return t==="x"||t==="y"?$n[t]?null:($n[t]=!0,()=>{$n[t]=!1}):$n.x||$n.y?null:($n.x=$n.y=!0,()=>{$n.x=$n.y=!1})}function dT(t,e){const n=lT(t),s=new AbortController,i={passive:!0,...e,signal:s.signal};return[n,i,()=>s.abort()]}function JO(t){return!(t.pointerType==="touch"||uT())}function ej(t,e,n={}){const[s,i,r]=dT(t,n);return s.forEach(a=>{let o=!1,l=!1,c;const u=()=>{a.removeEventListener("pointerleave",m)},d=b=>{c&&(c(b),c=void 0),u()},h=b=>{o=!1,window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",h),l&&(l=!1,d(b))},f=()=>{o=!0,window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",h,i)},m=b=>{if(b.pointerType!=="touch"){if(o){l=!0;return}d(b)}},g=b=>{if(!JO(b))return;l=!1;const y=e(a,b);typeof y=="function"&&(c=y,a.addEventListener("pointerleave",m,i))};a.addEventListener("pointerenter",g,i),a.addEventListener("pointerdown",f,i)}),r}const hT=(t,e)=>e?t===e?!0:hT(t,e.parentElement):!1,Iy=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,tj=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function nj(t){return tj.has(t.tagName)||t.isContentEditable===!0}const sj=new Set(["INPUT","SELECT","TEXTAREA"]);function ij(t){return sj.has(t.tagName)||t.isContentEditable===!0}const Du=new WeakSet;function Ub(t){return e=>{e.key==="Enter"&&t(e)}}function Yf(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const rj=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=Ub(()=>{if(Du.has(n))return;Yf(n,"down");const i=Ub(()=>{Yf(n,"up")}),r=()=>Yf(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",r,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function Gb(t){return Iy(t)&&!uT()}const qb=new WeakSet;function aj(t,e,n={}){const[s,i,r]=dT(t,n),a=o=>{const l=o.currentTarget;if(!Gb(o)||qb.has(o))return;Du.add(l),n.stopPropagation&&qb.add(o);const c=e(l,o),u=(f,m)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",h),Du.has(l)&&Du.delete(l),Gb(f)&&typeof c=="function"&&c(f,{success:m})},d=f=>{u(f,l===window||l===document||n.useGlobalTarget||hT(l,f.target))},h=f=>{u(f,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",h,i)};return s.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,i),QO(o)&&(o.addEventListener("focus",c=>rj(c,i)),!nj(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),r}function Ly(t){return bC(t)&&"ownerSVGElement"in t}const Ou=new WeakMap;let bi;const fT=(t,e,n)=>(s,i)=>i&&i[0]?i[0][t+"Size"]:Ly(s)&&"getBBox"in s?s.getBBox()[e]:s[n],oj=fT("inline","width","offsetWidth"),lj=fT("block","height","offsetHeight");function cj({target:t,borderBoxSize:e}){var n;(n=Ou.get(t))==null||n.forEach(s=>{s(t,{get width(){return oj(t,e)},get height(){return lj(t,e)}})})}function uj(t){t.forEach(cj)}function dj(){typeof ResizeObserver>"u"||(bi=new ResizeObserver(uj))}function hj(t,e){bi||dj();const n=lT(t);return n.forEach(s=>{let i=Ou.get(s);i||(i=new Set,Ou.set(s,i)),i.add(e),bi==null||bi.observe(s)}),()=>{n.forEach(s=>{const i=Ou.get(s);i==null||i.delete(e),i!=null&&i.size||bi==null||bi.unobserve(s)})}}const ju=new Set;let Ra;function fj(){Ra=()=>{const t={get width(){return window.innerWidth},get height(){return window.innerHeight}};ju.forEach(e=>e(t))},window.addEventListener("resize",Ra)}function pj(t){return ju.add(t),Ra||fj(),()=>{ju.delete(t),!ju.size&&typeof Ra=="function"&&(window.removeEventListener("resize",Ra),Ra=void 0)}}function Wb(t,e){return typeof t=="function"?pj(t):hj(t,e)}function mj(t){return Ly(t)&&t.tagName==="svg"}const gj=[...rT,ft,Ji],yj=t=>gj.find(iT(t)),$b=()=>({translate:0,scale:1,origin:0,originPoint:0}),Da=()=>({x:$b(),y:$b()}),Yb=()=>({min:0,max:0}),bt=()=>({x:Yb(),y:Yb()}),Om={current:null},pT={current:!1},vj=typeof window<"u";function bj(){if(pT.current=!0,!!vj)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Om.current=t.matches;t.addEventListener("change",e),e()}else Om.current=!1}const xj=new WeakMap;function yh(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Fl(t){return typeof t=="string"||Array.isArray(t)}const Vy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],zy=["initial",...Vy];function vh(t){return yh(t.animate)||zy.some(e=>Fl(t[e]))}function mT(t){return!!(vh(t)||t.variants)}function _j(t,e,n){for(const s in e){const i=e[s],r=n[s];if(zt(i))t.addValue(s,i);else if(zt(r))t.addValue(s,ao(i,{owner:t}));else if(r!==i)if(t.hasValue(s)){const a=t.getValue(s);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(s);t.addValue(s,ao(a!==void 0?a:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const Kb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let xd={};function gT(t){xd=t}function Sj(){return xd}class wj{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:i,skipAnimations:r,blockInitialAnimation:a,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=My,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Wt.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,qe.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.skipAnimationsConfig=r,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=vh(n),this.isVariantNode=mT(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in h){const m=h[f];c[f]!==void 0&&zt(m)&&m.set(c[f])}}mount(e){var n,s;if(this.hasBeenMounted)for(const i in this.initialValues)(n=this.values.get(i))==null||n.jump(this.initialValues[i]),this.latestValues[i]=this.initialValues[i];this.current=e,xj.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,r)=>this.bindToMotionValue(r,i)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(pT.current||bj(),this.shouldReduceMotion=Om.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,(s=this.parent)==null||s.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){var e;this.projection&&this.projection.unmount(),Zi(this.notifyUpdate),Zi(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const s=this.features[n];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=ko.has(e);s&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&qe.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;typeof window<"u"&&window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),r&&r(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in xd){const n=xd[e];if(!n)continue;const{isEnabled:s,Feature:i}=n;if(!this.features[e]&&i&&s(this.props)&&(this.features[e]=new i(this)),this.features[e]){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):bt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<Kb.length;s++){const i=Kb[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const r="on"+i,a=e[r];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=_j(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=ao(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(vC(s)||xC(s))?s=parseFloat(s):!yj(s)&&Ji.test(n)&&(s=oT(e,n)),this.setBaseTarget(e,zt(s)?s.get():s)),zt(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var r;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const a=Oy(this.props,n,(r=this.presenceContext)==null?void 0:r.custom);a&&(s=a[e])}if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!zt(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new by),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){By.render(this.render)}}class yT extends wj{constructor(){super(...arguments),this.KeyframeResolver=XO}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){const s=e.style;return s?s[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;zt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class cr{constructor(e){this.isMounted=!1,this.node=e}update(){}}function vT({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function Cj({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Tj(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function Kf(t){return t===void 0||t===1}function jm({scale:t,scaleX:e,scaleY:n}){return!Kf(t)||!Kf(e)||!Kf(n)}function Tr(t){return jm(t)||bT(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function bT(t){return Xb(t.x)||Xb(t.y)}function Xb(t){return t&&t!=="0%"}function _d(t,e,n){const s=t-n,i=e*s;return n+i}function Qb(t,e,n,s,i){return i!==void 0&&(t=_d(t,i,s)),_d(t,n,s)+e}function Pm(t,e=0,n=1,s,i){t.min=Qb(t.min,e,n,s,i),t.max=Qb(t.max,e,n,s,i)}function xT(t,{x:e,y:n}){Pm(t.x,e.translate,e.scale,e.originPoint),Pm(t.y,n.translate,n.scale,n.originPoint)}const Zb=.999999999999,Jb=1.0000000000001;function Ej(t,e,n,s=!1){const i=n.length;if(!i)return;e.x=e.y=1;let r,a;for(let o=0;o<i;o++){r=n[o],a=r.projectionDelta;const{visualElement:l}=r.options;l&&l.props.style&&l.props.style.display==="contents"||(s&&r.options.layoutScroll&&r.scroll&&r!==r.root&&ja(t,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,xT(t,a)),s&&Tr(r.latestValues)&&ja(t,r.latestValues))}e.x<Jb&&e.x>Zb&&(e.x=1),e.y<Jb&&e.y>Zb&&(e.y=1)}function Oa(t,e){t.min=t.min+e,t.max=t.max+e}function ex(t,e,n,s,i=.5){const r=nt(t.min,t.max,i);Pm(t,e,n,r,s)}function ja(t,e){ex(t.x,e.x,e.scaleX,e.scale,e.originX),ex(t.y,e.y,e.scaleY,e.scale,e.originY)}function _T(t,e){return vT(Tj(t.getBoundingClientRect(),e))}function Aj(t,e,n){const s=_T(t,n),{scroll:i}=e;return i&&(Oa(s.x,i.offset.x),Oa(s.y,i.offset.y)),s}const kj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Nj=Ao.length;function Mj(t,e,n){let s="",i=!0;for(let r=0;r<Nj;r++){const a=Ao[r],o=t[a];if(o===void 0)continue;let l=!0;if(typeof o=="number")l=o===(a.startsWith("scale")?1:0);else{const c=parseFloat(o);l=a.startsWith("scale")?c===1:c===0}if(!l||n){const c=cT(o,Py[a]);if(!l){i=!1;const u=kj[a]||a;s+=`${u}(${c}) `}n&&(e[a]=c)}}return s=s.trim(),n?s=n(e,i?"":s):i&&(s="none"),s}function Fy(t,e,n){const{style:s,vars:i,transformOrigin:r}=t;let a=!1,o=!1;for(const l in e){const c=e[l];if(ko.has(l)){a=!0;continue}else if(jC(l)){i[l]=c;continue}else{const u=cT(c,Py[l]);l.startsWith("origin")?(o=!0,r[l]=u):s[l]=u}}if(e.transform||(a||n?s.transform=Mj(e,t.transform,n):s.transform&&(s.transform="none")),o){const{originX:l="50%",originY:c="50%",originZ:u=0}=r;s.transformOrigin=`${l} ${c} ${u}`}}function ST(t,{style:e,vars:n},s,i){const r=t.style;let a;for(a in e)r[a]=e[a];i==null||i.applyProjectionStyles(r,s);for(a in n)r.setProperty(a,n[a])}function tx(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ko={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Z.test(t))t=parseFloat(t);else return t;const n=tx(t,e.target.x),s=tx(t,e.target.y);return`${n}% ${s}%`}},Rj={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,i=Ji.parse(t);if(i.length>5)return s;const r=Ji.createTransformer(t),a=typeof i[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;i[0+a]/=o,i[1+a]/=l;const c=nt(o,l,.5);return typeof i[2+a]=="number"&&(i[2+a]/=c),typeof i[3+a]=="number"&&(i[3+a]/=c),r(i)}},Bm={borderRadius:{...Ko,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ko,borderTopRightRadius:Ko,borderBottomLeftRadius:Ko,borderBottomRightRadius:Ko,boxShadow:Rj};function wT(t,{layout:e,layoutId:n}){return ko.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Bm[t]||t==="opacity")}function Hy(t,e,n){var a;const s=t.style,i=e==null?void 0:e.style,r={};if(!s)return r;for(const o in s)(zt(s[o])||i&&zt(i[o])||wT(o,t)||((a=n==null?void 0:n.getValue(o))==null?void 0:a.liveStyle)!==void 0)&&(r[o]=s[o]);return r}function Dj(t){return window.getComputedStyle(t)}class Oj extends yT{constructor(){super(...arguments),this.type="html",this.renderInstance=ST}readValueFromInstance(e,n){var s;if(ko.has(n))return(s=this.projection)!=null&&s.isProjecting?wm(n):QD(e,n);{const i=Dj(e),r=(jC(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return _T(e,n)}build(e,n,s){Fy(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return Hy(e,n,s)}}const jj={offset:"stroke-dashoffset",array:"stroke-dasharray"},Pj={offset:"strokeDashoffset",array:"strokeDasharray"};function Bj(t,e,n=1,s=0,i=!0){t.pathLength=1;const r=i?jj:Pj;t[r.offset]=`${-s}`,t[r.array]=`${e} ${n}`}const Ij=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function CT(t,{attrX:e,attrY:n,attrScale:s,pathLength:i,pathSpacing:r=1,pathOffset:a=0,...o},l,c,u){if(Fy(t,o,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:h}=t;d.transform&&(h.transform=d.transform,delete d.transform),(h.transform||d.transformOrigin)&&(h.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),h.transform&&(h.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete d.transformBox);for(const f of Ij)d[f]!==void 0&&(h[f]=d[f],delete d[f]);e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),s!==void 0&&(d.scale=s),i!==void 0&&Bj(d,i,r,a,!1)}const TT=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),ET=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Lj(t,e,n,s){ST(t,e,void 0,s);for(const i in e.attrs)t.setAttribute(TT.has(i)?i:jy(i),e.attrs[i])}function AT(t,e,n){const s=Hy(t,e,n);for(const i in t)if(zt(t[i])||zt(e[i])){const r=Ao.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[r]=t[i]}return s}class Vj extends yT{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=bt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ko.has(n)){const s=aT(n);return s&&s.default||0}return n=TT.has(n)?n:jy(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return AT(e,n,s)}build(e,n,s){CT(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,i){Lj(e,n,s,i)}mount(e){this.isSVGTag=ET(e.tagName),super.mount(e)}}const zj=zy.length;function kT(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?kT(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<zj;n++){const s=zy[n],i=t.props[s];(Fl(i)||i===!1)&&(e[s]=i)}return e}function NT(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const Fj=[...Vy].reverse(),Hj=Vy.length;function Uj(t){return e=>Promise.all(e.map(({animation:n,options:s})=>zO(t,n,s)))}function Gj(t){let e=Uj(t),n=nx(),s=!0;const i=l=>(c,u)=>{var h;const d=qa(t,u,l==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);if(d){const{transition:f,transitionEnd:m,...g}=d;c={...c,...g,...m}}return c};function r(l){e=l(t)}function a(l){const{props:c}=t,u=kT(t.parent)||{},d=[],h=new Set;let f={},m=1/0;for(let b=0;b<Hj;b++){const y=Fj[b],v=n[y],_=c[y]!==void 0?c[y]:u[y],S=Fl(_),w=y===l?v.isActive:null;w===!1&&(m=b);let E=_===u[y]&&_!==c[y]&&S;if(E&&s&&t.manuallyAnimateOnMount&&(E=!1),v.protectedKeys={...f},!v.isActive&&w===null||!_&&!v.prevProp||yh(_)||typeof _=="boolean")continue;const T=qj(v.prevProp,_);let C=T||y===l&&v.isActive&&!E&&S||b>m&&S,N=!1;const A=Array.isArray(_)?_:[_];let k=A.reduce(i(y),{});w===!1&&(k={});const{prevResolvedValues:O={}}=v,P={...O,...k},j=D=>{C=!0,h.has(D)&&(N=!0,h.delete(D)),v.needsAnimating[D]=!0;const M=t.getValue(D);M&&(M.liveStyle=!1)};for(const D in P){const M=k[D],B=O[D];if(f.hasOwnProperty(D))continue;let z=!1;Nm(M)&&Nm(B)?z=!NT(M,B):z=M!==B,z?M!=null?j(D):h.add(D):M!==void 0&&h.has(D)?j(D):v.protectedKeys[D]=!0}v.prevProp=_,v.prevResolvedValues=k,v.isActive&&(f={...f,...k}),s&&t.blockInitialAnimation&&(C=!1);const I=E&&T;C&&(!I||N)&&d.push(...A.map(D=>{const M={type:y};if(typeof D=="string"&&s&&!I&&t.manuallyAnimateOnMount&&t.parent){const{parent:B}=t,z=qa(B,D);if(B.enteringChildren&&z){const{delayChildren:$}=z.transition||{};M.delay=QC(B.enteringChildren,t,$)}}return{animation:D,options:M}}))}if(h.size){const b={};if(typeof c.initial!="boolean"){const y=qa(t,Array.isArray(c.initial)?c.initial[0]:c.initial);y&&y.transition&&(b.transition=y.transition)}h.forEach(y=>{const v=t.getBaseTarget(y),_=t.getValue(y);_&&(_.liveStyle=!0),b[y]=v??null}),d.push({animation:b})}let g=!!d.length;return s&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(g=!1),s=!1,g?e(d):Promise.resolve()}function o(l,c){var d;if(n[l].isActive===c)return Promise.resolve();(d=t.variantChildren)==null||d.forEach(h=>{var f;return(f=h.animationState)==null?void 0:f.setActive(l,c)}),n[l].isActive=c;const u=a(l);for(const h in n)n[h].protectedKeys={};return u}return{animateChanges:a,setActive:o,setAnimateFunction:r,getState:()=>n,reset:()=>{n=nx()}}}function qj(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!NT(e,t):!1}function vr(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function nx(){return{animate:vr(!0),whileInView:vr(),whileHover:vr(),whileTap:vr(),whileDrag:vr(),whileFocus:vr(),exit:vr()}}function sx(t,e){t.min=e.min,t.max=e.max}function Wn(t,e){sx(t.x,e.x),sx(t.y,e.y)}function ix(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}const MT=1e-4,Wj=1-MT,$j=1+MT,RT=.01,Yj=0-RT,Kj=0+RT;function $t(t){return t.max-t.min}function Xj(t,e,n){return Math.abs(t-e)<=n}function rx(t,e,n,s=.5){t.origin=s,t.originPoint=nt(e.min,e.max,t.origin),t.scale=$t(n)/$t(e),t.translate=nt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Wj&&t.scale<=$j||isNaN(t.scale))&&(t.scale=1),(t.translate>=Yj&&t.translate<=Kj||isNaN(t.translate))&&(t.translate=0)}function Sl(t,e,n,s){rx(t.x,e.x,n.x,s?s.originX:void 0),rx(t.y,e.y,n.y,s?s.originY:void 0)}function ax(t,e,n){t.min=n.min+e.min,t.max=t.min+$t(e)}function Qj(t,e,n){ax(t.x,e.x,n.x),ax(t.y,e.y,n.y)}function ox(t,e,n){t.min=e.min-n.min,t.max=t.min+$t(e)}function Sd(t,e,n){ox(t.x,e.x,n.x),ox(t.y,e.y,n.y)}function lx(t,e,n,s,i){return t-=e,t=_d(t,1/n,s),i!==void 0&&(t=_d(t,1/i,s)),t}function Zj(t,e=0,n=1,s=.5,i,r=t,a=t){if(bs.test(e)&&(e=parseFloat(e),e=nt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=nt(r.min,r.max,s);t===r&&(o-=e),t.min=lx(t.min,e,n,o,i),t.max=lx(t.max,e,n,o,i)}function cx(t,e,[n,s,i],r,a){Zj(t,e[n],e[s],e[i],e.scale,r,a)}const Jj=["x","scaleX","originX"],e5=["y","scaleY","originY"];function ux(t,e,n,s){cx(t.x,e,Jj,n?n.x:void 0,s?s.x:void 0),cx(t.y,e,e5,n?n.y:void 0,s?s.y:void 0)}function dx(t){return t.translate===0&&t.scale===1}function DT(t){return dx(t.x)&&dx(t.y)}function hx(t,e){return t.min===e.min&&t.max===e.max}function t5(t,e){return hx(t.x,e.x)&&hx(t.y,e.y)}function fx(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function OT(t,e){return fx(t.x,e.x)&&fx(t.y,e.y)}function px(t){return $t(t.x)/$t(t.y)}function mx(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}function hs(t){return[t("x"),t("y")]}function n5(t,e,n){let s="";const i=t.x.translate/e.x,r=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((i||r||a)&&(s=`translate3d(${i}px, ${r}px, ${a}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:h,skewX:f,skewY:m}=n;c&&(s=`perspective(${c}px) ${s}`),u&&(s+=`rotate(${u}deg) `),d&&(s+=`rotateX(${d}deg) `),h&&(s+=`rotateY(${h}deg) `),f&&(s+=`skewX(${f}deg) `),m&&(s+=`skewY(${m}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(s+=`scale(${o}, ${l})`),s||"none"}const jT=["TopLeft","TopRight","BottomLeft","BottomRight"],s5=jT.length,gx=t=>typeof t=="string"?parseFloat(t):t,yx=t=>typeof t=="number"||Z.test(t);function i5(t,e,n,s,i,r){i?(t.opacity=nt(0,n.opacity??1,r5(s)),t.opacityExit=nt(e.opacity??1,0,a5(s))):r&&(t.opacity=nt(e.opacity??1,n.opacity??1,s));for(let a=0;a<s5;a++){const o=`border${jT[a]}Radius`;let l=vx(e,o),c=vx(n,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||yx(l)===yx(c)?(t[o]=Math.max(nt(gx(l),gx(c),s),0),(bs.test(c)||bs.test(l))&&(t[o]+="%")):t[o]=c}(e.rotate||n.rotate)&&(t.rotate=nt(e.rotate||0,n.rotate||0,s))}function vx(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const r5=PT(0,.5,kC),a5=PT(.5,.95,Fn);function PT(t,e,n){return s=>s<t?0:s>e?1:n(Ll(t,e,s))}function o5(t,e,n){const s=zt(t)?t:ao(t);return s.start(Dy("",s,e,n)),s.animation}function Hl(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}const l5=(t,e)=>t.depth-e.depth;class c5{constructor(){this.children=[],this.isDirty=!1}add(e){my(this.children,e),this.isDirty=!0}remove(e){gy(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(l5),this.isDirty=!1,this.children.forEach(e)}}function u5(t,e){const n=Wt.now(),s=({timestamp:i})=>{const r=i-n;r>=e&&(Zi(s),t(r-e))};return qe.setup(s,!0),()=>Zi(s)}function Pu(t){return zt(t)?t.get():t}class d5{constructor(){this.members=[]}add(e){my(this.members,e),e.scheduleRender()}remove(e){if(gy(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let s;for(let i=n;i>=0;i--){const r=this.members[i];if(r.isPresent!==!1){s=r;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender();const i=s.options.layoutDependency,r=e.options.layoutDependency;i!==void 0&&r!==void 0&&i===r||(e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0));const{crossfade:o}=e.options;o===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Bu={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Xf=["","X","Y","Z"],h5=1e3;let f5=0;function Qf(t,e,n,s){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),s&&(s[t]=0))}function BT(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=nT(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",qe,!(i||r))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&BT(s)}function IT({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(a={},o=e==null?void 0:e()){this.id=f5++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(g5),this.nodes.forEach(x5),this.nodes.forEach(_5),this.nodes.forEach(y5)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new c5)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new by),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=Ly(a)&&!mj(a),this.instance=a;const{layoutId:o,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),t){let u,d=0;const h=()=>this.root.updateBlockedByResize=!1;qe.read(()=>{d=window.innerWidth}),t(a,()=>{const f=window.innerWidth;f!==d&&(d=f,this.root.updateBlockedByResize=!0,u&&u(),u=u5(h,250),Bu.hasAnimatedSinceResize&&(Bu.hasAnimatedSinceResize=!1,this.nodes.forEach(_x)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&c&&(o||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d,hasRelativeLayoutChanged:h,layout:f})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||c.getDefaultTransition()||E5,{onLayoutAnimationStart:g,onLayoutAnimationComplete:b}=c.getProps(),y=!this.targetLayout||!OT(this.targetLayout,f),v=!d&&h;if(this.options.layoutRoot||this.resumeFrom||v||d&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...Ry(m,"layout"),onPlay:g,onComplete:b};(c.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(u,v)}else d||_x(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=f})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Zi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(S5),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&BT(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(bx);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(xx);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(b5),this.nodes.forEach(p5),this.nodes.forEach(m5)):this.nodes.forEach(xx),this.clearAllSnapshots();const o=Wt.now();Rt.delta=ws(0,1e3/60,o-Rt.timestamp),Rt.timestamp=o,Rt.isProcessing=!0,Hf.update.process(Rt),Hf.preRender.process(Rt),Hf.render.process(Rt),Rt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,By.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(v5),this.sharedNodes.forEach(w5)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,qe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){qe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!$t(this.snapshot.measuredBox.x)&&!$t(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=bt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=s(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!DT(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;a&&this.instance&&(o||Tr(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),A5(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:a}=this.options;if(!a)return bt();const o=a.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(k5))){const{scroll:u}=this.root;u&&(Oa(o.x,u.offset.x),Oa(o.y,u.offset.y))}return o}removeElementScroll(a){var l;const o=bt();if(Wn(o,a),(l=this.scroll)!=null&&l.wasRoot)return o;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;u!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&Wn(o,a),Oa(o.x,d.offset.x),Oa(o.y,d.offset.y))}return o}applyTransform(a,o=!1){const l=bt();Wn(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];!o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&ja(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Tr(u.latestValues)&&ja(l,u.latestValues)}return Tr(this.latestValues)&&ja(l,this.latestValues),l}removeTransform(a){const o=bt();Wn(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Tr(c.latestValues))continue;jm(c.latestValues)&&c.updateSnapshot();const u=bt(),d=c.measurePageBox();Wn(u,d),ux(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Tr(this.latestValues)&&ux(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Rt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var f;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:d}=this.options;if(!this.layout||!(u||d))return;this.resolvedRelativeTargetAt=Rt.timestamp;const h=this.getClosestProjectingParent();h&&this.linkedParentVersion!==h.layoutVersion&&!h.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(h&&h.layout?this.createRelativeTarget(h,this.layout.layoutBox,h.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=bt(),this.targetWithTransforms=bt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Qj(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Wn(this.target,this.layout.layoutBox),xT(this.target,this.targetDelta)):Wn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?this.createRelativeTarget(h,this.target,h.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||jm(this.parent.latestValues)||bT(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,o,l){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bt(),this.relativeTargetOrigin=bt(),Sd(this.relativeTargetOrigin,o,l),Wn(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var m;const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Rt.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;Wn(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,h=this.treeScale.y;Ej(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=bt());const{target:f}=a;if(!f){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ix(this.prevProjectionDelta.x,this.projectionDelta.x),ix(this.prevProjectionDelta.y,this.projectionDelta.y)),Sl(this.projectionDelta,this.layoutCorrected,f,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==h||!mx(this.projectionDelta.x,this.prevProjectionDelta.x)||!mx(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",f))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Da(),this.projectionDelta=Da(),this.projectionDeltaWithTransform=Da()}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=Da();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=bt(),f=l?l.source:void 0,m=this.layout?this.layout.source:void 0,g=f!==m,b=this.getStack(),y=!b||b.members.length<=1,v=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(T5));this.animationProgress=0;let _;this.mixTargetDelta=S=>{const w=S/1e3;Sx(d.x,a.x,w),Sx(d.y,a.y,w),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Sd(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),C5(this.relativeTarget,this.relativeTargetOrigin,h,w),_&&t5(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=bt()),Wn(_,this.relativeTarget)),g&&(this.animationValues=u,i5(u,c,this.latestValues,w,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=w},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var o,l,c;this.notifyListeners("animationStart"),(o=this.currentAnimation)==null||o.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(Zi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=qe.update(()=>{Bu.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ao(0)),this.currentAnimation=o5(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(h5),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:u}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&LT(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||bt();const d=$t(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const h=$t(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+h}Wn(o,l),ja(o,u),Sl(this.projectionDeltaWithTransform,this.layoutCorrected,o,u)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new d5),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const c={};l.z&&Qf("z",a,c,this.animationValues);for(let u=0;u<Xf.length;u++)Qf(`rotate${Xf[u]}`,a,c,this.animationValues),Qf(`skew${Xf[u]}`,a,c,this.animationValues);a.render();for(const u in c)a.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=Pu(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=Pu(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Tr(this.latestValues)&&(a.transform=l?l({},""):"none",this.hasProjected=!1);return}a.visibility="";const u=c.animationValues||c.latestValues;this.applyTransformsToTarget();let d=n5(this.projectionDeltaWithTransform,this.treeScale,u);l&&(d=l(u,d)),a.transform=d;const{x:h,y:f}=this.projectionDelta;a.transformOrigin=`${h.origin*100}% ${f.origin*100}% 0`,c.animationValues?a.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:a.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const m in Bm){if(u[m]===void 0)continue;const{correct:g,applyTo:b,isCSSVariable:y}=Bm[m],v=d==="none"?u[m]:g(u[m],c);if(b){const _=b.length;for(let S=0;S<_;S++)a[b[S]]=v}else y?this.options.visualElement.renderState.vars[m]=v:a[m]=v}this.options.layoutId&&(a.pointerEvents=c===this?Pu(o==null?void 0:o.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(bx),this.root.sharedNodes.clear()}}}function p5(t){t.updateLayout()}function m5(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=t.layout,{animationType:r}=t.options,a=e.source!==t.layout.source;r==="size"?hs(d=>{const h=a?e.measuredBox[d]:e.layoutBox[d],f=$t(h);h.min=s[d].min,h.max=h.min+f}):LT(r,e.layoutBox,s)&&hs(d=>{const h=a?e.measuredBox[d]:e.layoutBox[d],f=$t(s[d]);h.max=h.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+f)});const o=Da();Sl(o,s,e.layoutBox);const l=Da();a?Sl(l,t.applyTransform(i,!0),e.measuredBox):Sl(l,s,e.layoutBox);const c=!DT(o);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:f}=d;if(h&&f){const m=bt();Sd(m,e.layoutBox,h.layoutBox);const g=bt();Sd(g,s,f.layoutBox),OT(m,g)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=g,t.relativeTargetOrigin=m,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function g5(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function y5(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function v5(t){t.clearSnapshot()}function bx(t){t.clearMeasurements()}function xx(t){t.isLayoutDirty=!1}function b5(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function _x(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function x5(t){t.resolveTargetDelta()}function _5(t){t.calcProjection()}function S5(t){t.resetSkewAndRotation()}function w5(t){t.removeLeadSnapshot()}function Sx(t,e,n){t.translate=nt(e.translate,0,n),t.scale=nt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function wx(t,e,n,s){t.min=nt(e.min,n.min,s),t.max=nt(e.max,n.max,s)}function C5(t,e,n,s){wx(t.x,e.x,n.x,s),wx(t.y,e.y,n.y,s)}function T5(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const E5={duration:.45,ease:[.4,0,.1,1]},Cx=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Tx=Cx("applewebkit/")&&!Cx("chrome/")?Math.round:Fn;function Ex(t){t.min=Tx(t.min),t.max=Tx(t.max)}function A5(t){Ex(t.x),Ex(t.y)}function LT(t,e,n){return t==="position"||t==="preserve-aspect"&&!Xj(px(e),px(n),.2)}function k5(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const N5=IT({attachResizeListener:(t,e)=>Hl(t,"resize",e),measureScroll:()=>{var t,e;return{x:document.documentElement.scrollLeft||((t=document.body)==null?void 0:t.scrollLeft)||0,y:document.documentElement.scrollTop||((e=document.body)==null?void 0:e.scrollTop)||0}},checkIsScrollRoot:()=>!0}),Zf={current:void 0},VT=IT({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Zf.current){const t=new N5({});t.mount(window),t.setOptions({layoutScroll:!0}),Zf.current=t}return Zf.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),zT=x.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function M5(t=!0){const e=x.useContext(py);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:i}=e,r=x.useId();x.useEffect(()=>{if(t)return i(r)},[t]);const a=x.useCallback(()=>t&&s&&s(r),[r,s,t]);return!n&&s?[!1,a]:[!0]}const FT=x.createContext({strict:!1}),Ax={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let kx=!1;function R5(){if(kx)return;const t={};for(const e in Ax)t[e]={isEnabled:n=>Ax[e].some(s=>!!n[s])};gT(t),kx=!0}function HT(){return R5(),Sj()}function D5(t){const e=HT();for(const n in t)e[n]={...e[n],...t[n]};gT(e)}const O5=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function wd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||O5.has(t)}let UT=t=>!wd(t);function j5(t){typeof t=="function"&&(UT=e=>e.startsWith("on")?!wd(e):t(e))}try{j5(require("@emotion/is-prop-valid").default)}catch{}function P5(t,e,n){const s={};for(const i in t)i==="values"&&typeof t.values=="object"||(UT(i)||n===!0&&wd(i)||!e&&!wd(i)||t.draggable&&i.startsWith("onDrag"))&&(s[i]=t[i]);return s}const bh=x.createContext({});function B5(t,e){if(vh(t)){const{initial:n,animate:s}=t;return{initial:n===!1||Fl(n)?n:void 0,animate:Fl(s)?s:void 0}}return t.inherit!==!1?e:{}}function I5(t){const{initial:e,animate:n}=B5(t,x.useContext(bh));return x.useMemo(()=>({initial:e,animate:n}),[Nx(e),Nx(n)])}function Nx(t){return Array.isArray(t)?t.join(" "):t}const Uy=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function GT(t,e,n){for(const s in e)!zt(e[s])&&!wT(s,n)&&(t[s]=e[s])}function L5({transformTemplate:t},e){return x.useMemo(()=>{const n=Uy();return Fy(n,e,t),Object.assign({},n.vars,n.style)},[e])}function V5(t,e){const n=t.style||{},s={};return GT(s,n,t),Object.assign(s,L5(t,e)),s}function z5(t,e){const n={},s=V5(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const qT=()=>({...Uy(),attrs:{}});function F5(t,e,n,s){const i=x.useMemo(()=>{const r=qT();return CT(r,e,ET(s),t.transformTemplate,t.style),{...r.attrs,style:{...r.style}}},[e]);if(t.style){const r={};GT(r,t.style,t),i.style={...r,...i.style}}return i}const H5=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Gy(t){return typeof t!="string"||t.includes("-")?!1:!!(H5.indexOf(t)>-1||/[A-Z]/u.test(t))}function U5(t,e,n,{latestValues:s},i,r=!1,a){const l=(a??Gy(t)?F5:z5)(e,s,i,t),c=P5(e,typeof t=="string",r),u=t!==x.Fragment?{...c,...l,ref:n}:{},{children:d}=e,h=x.useMemo(()=>zt(d)?d.get():d,[d]);return x.createElement(t,{...u,children:h})}function G5({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,i){return{latestValues:q5(n,s,i,t),renderState:e()}}function q5(t,e,n,s){const i={},r=s(t,{});for(const h in r)i[h]=Pu(r[h]);let{initial:a,animate:o}=t;const l=vh(t),c=mT(t);e&&c&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let u=n?n.initial===!1:!1;u=u||a===!1;const d=u?o:a;if(d&&typeof d!="boolean"&&!yh(d)){const h=Array.isArray(d)?d:[d];for(let f=0;f<h.length;f++){const m=Oy(t,h[f]);if(m){const{transitionEnd:g,transition:b,...y}=m;for(const v in y){let _=y[v];if(Array.isArray(_)){const S=u?_.length-1:0;_=_[S]}_!==null&&(i[v]=_)}for(const v in g)i[v]=g[v]}}}return i}const WT=t=>(e,n)=>{const s=x.useContext(bh),i=x.useContext(py),r=()=>G5(t,e,s,i);return n?r():$R(r)},W5=WT({scrapeMotionValuesFromProps:Hy,createRenderState:Uy}),$5=WT({scrapeMotionValuesFromProps:AT,createRenderState:qT}),Y5=Symbol.for("motionComponentSymbol");function K5(t,e,n){const s=x.useRef(n);x.useInsertionEffect(()=>{s.current=n});const i=x.useRef(null);return x.useCallback(r=>{var o;r&&((o=t.onMount)==null||o.call(t,r)),e&&(r?e.mount(r):e.unmount());const a=s.current;if(typeof a=="function")if(r){const l=a(r);typeof l=="function"&&(i.current=l)}else i.current?(i.current(),i.current=null):a(r);else a&&(a.current=r)},[e])}const $T=x.createContext({});function ga(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function X5(t,e,n,s,i,r){var _,S;const{visualElement:a}=x.useContext(bh),o=x.useContext(FT),l=x.useContext(py),c=x.useContext(zT),u=c.reducedMotion,d=c.skipAnimations,h=x.useRef(null),f=x.useRef(!1);s=s||o.renderer,!h.current&&s&&(h.current=s(t,{visualState:e,parent:a,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u,skipAnimations:d,isSVG:r}),f.current&&h.current&&(h.current.manuallyAnimateOnMount=!0));const m=h.current,g=x.useContext($T);m&&!m.projection&&i&&(m.type==="html"||m.type==="svg")&&Q5(h.current,n,i,g);const b=x.useRef(!1);x.useInsertionEffect(()=>{m&&b.current&&m.update(n,l)});const y=n[tT],v=x.useRef(!!y&&!((_=window.MotionHandoffIsComplete)!=null&&_.call(window,y))&&((S=window.MotionHasOptimisedAnimation)==null?void 0:S.call(window,y)));return YR(()=>{f.current=!0,m&&(b.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),m.scheduleRenderMicrotask(),v.current&&m.animationState&&m.animationState.animateChanges())}),x.useEffect(()=>{m&&(!v.current&&m.animationState&&m.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)==null||w.call(window,y)}),v.current=!1),m.enteringChildren=void 0)}),m}function Q5(t,e,n,s){const{layoutId:i,layout:r,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:YT(t.parent)),t.projection.setOptions({layoutId:i,layout:r,alwaysMeasureLayout:!!a||o&&ga(o),visualElement:t,animationType:typeof r=="string"?r:"both",initialPromotionConfig:s,crossfade:u,layoutScroll:l,layoutRoot:c})}function YT(t){if(t)return t.options.allowProjection!==!1?t.projection:YT(t.parent)}function Jf(t,{forwardMotionProps:e=!1,type:n}={},s,i){s&&D5(s);const r=n?n==="svg":Gy(t),a=r?$5:W5;function o(c,u){let d;const h={...x.useContext(zT),...c,layoutId:Z5(c)},{isStatic:f}=h,m=I5(c),g=a(c,f);if(!f&&yC){J5();const b=e3(h);d=b.MeasureLayout,m.visualElement=X5(t,g,h,i,b.ProjectionNode,r)}return p.jsxs(bh.Provider,{value:m,children:[d&&m.visualElement?p.jsx(d,{visualElement:m.visualElement,...h}):null,U5(t,c,K5(g,m.visualElement,u),g,f,e,r)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const l=x.forwardRef(o);return l[Y5]=t,l}function Z5({layoutId:t}){const e=x.useContext(gC).id;return e&&t!==void 0?e+"-"+t:t}function J5(t,e){x.useContext(FT).strict}function e3(t){const e=HT(),{drag:n,layout:s}=e;if(!n&&!s)return{};const i={...n,...s};return{MeasureLayout:n!=null&&n.isEnabled(t)||s!=null&&s.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function t3(t,e){if(typeof Proxy>"u")return Jf;const n=new Map,s=(r,a)=>Jf(r,a,t,e),i=(r,a)=>s(r,a);return new Proxy(i,{get:(r,a)=>a==="create"?s:(n.has(a)||n.set(a,Jf(a,void 0,t,e)),n.get(a))})}const n3=(t,e)=>e.isSVG??Gy(t)?new Vj(e):new Oj(e,{allowProjection:t!==x.Fragment});class s3 extends cr{constructor(e){super(e),e.animationState||(e.animationState=Gj(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();yh(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let i3=0;class r3 extends cr{constructor(){super(...arguments),this.id=i3++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const a3={animation:{Feature:s3},exit:{Feature:r3}};function hc(t){return{point:{x:t.pageX,y:t.pageY}}}const o3=t=>e=>Iy(e)&&t(e,hc(e));function wl(t,e,n,s){return Hl(t,e,o3(n),s)}const KT=({current:t})=>t?t.ownerDocument.defaultView:null,Mx=(t,e)=>Math.abs(t-e);function l3(t,e){const n=Mx(t.x,e.x),s=Mx(t.y,e.y);return Math.sqrt(n**2+s**2)}const Rx=new Set(["auto","scroll"]);class XT{constructor(e,n,{transformPagePoint:s,contextWindow:i=window,dragSnapToOrigin:r=!1,distanceThreshold:a=3,element:o}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=f=>{this.handleScroll(f.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=tp(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=l3(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!g)return;const{point:b}=f,{timestamp:y}=Rt;this.history.push({...b,timestamp:y});const{onStart:v,onMove:_}=this.handlers;m||(v&&v(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,f)},this.handlePointerMove=(f,m)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=ep(m,this.transformPagePoint),qe.update(this.updatePoint,!0)},this.handlePointerUp=(f,m)=>{this.end();const{onEnd:g,onSessionEnd:b,resumeAnimation:y}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=tp(f.type==="pointercancel"?this.lastMoveEventInfo:ep(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(f,v),b&&b(f,v)},!Iy(e))return;this.dragSnapToOrigin=r,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=a,this.contextWindow=i||window;const l=hc(e),c=ep(l,this.transformPagePoint),{point:u}=c,{timestamp:d}=Rt;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=n;h&&h(e,tp(c,this.history)),this.removeListeners=cc(wl(this.contextWindow,"pointermove",this.handlePointerMove),wl(this.contextWindow,"pointerup",this.handlePointerUp),wl(this.contextWindow,"pointercancel",this.handlePointerUp)),o&&this.startScrollTracking(o)}startScrollTracking(e){let n=e.parentElement;for(;n;){const s=getComputedStyle(n);(Rx.has(s.overflowX)||Rx.has(s.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){const n=this.scrollPositions.get(e);if(!n)return;const s=e===window,i=s?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},r={x:i.x-n.x,y:i.y-n.y};r.x===0&&r.y===0||(s?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=r.x,this.lastMoveEventInfo.point.y+=r.y):this.history.length>0&&(this.history[0].x-=r.x,this.history[0].y-=r.y),this.scrollPositions.set(e,i),qe.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Zi(this.updatePoint)}}function ep(t,e){return e?{point:e(t.point)}:t}function Dx(t,e){return{x:t.x-e.x,y:t.y-e.y}}function tp({point:t},e){return{point:t,delta:Dx(t,QT(e)),offset:Dx(t,c3(e)),velocity:u3(e,.1)}}function c3(t){return t[0]}function QT(t){return t[t.length-1]}function u3(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const i=QT(t);for(;n>=0&&(s=t[n],!(i.timestamp-s.timestamp>vs(e)));)n--;if(!s)return{x:0,y:0};s===t[0]&&t.length>2&&i.timestamp-s.timestamp>vs(e)*2&&(s=t[1]);const r=In(i.timestamp-s.timestamp);if(r===0)return{x:0,y:0};const a={x:(i.x-s.x)/r,y:(i.y-s.y)/r};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function d3(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?nt(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?nt(n,t,s.max):Math.min(t,n)),t}function Ox(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function h3(t,{top:e,left:n,bottom:s,right:i}){return{x:Ox(t.x,n,i),y:Ox(t.y,e,s)}}function jx(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function f3(t,e){return{x:jx(t.x,e.x),y:jx(t.y,e.y)}}function p3(t,e){let n=.5;const s=$t(t),i=$t(e);return i>s?n=Ll(e.min,e.max-s,t.min):s>i&&(n=Ll(t.min,t.max-i,e.min)),ws(0,1,n)}function m3(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Im=.35;function g3(t=Im){return t===!1?t=0:t===!0&&(t=Im),{x:Px(t,"left","right"),y:Px(t,"top","bottom")}}function Px(t,e,n){return{min:Bx(t,e),max:Bx(t,n)}}function Bx(t,e){return typeof t=="number"?t:t[e]||0}const y3=new WeakMap;class v3{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=bt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=d=>{n&&this.snapToCursor(hc(d).point),this.stopAnimation()},a=(d,h)=>{const{drag:f,dragPropagation:m,onDragStart:g}=this.getProps();if(f&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=ZO(f),!this.openDragLock))return;this.latestPointerEvent=d,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),hs(y=>{let v=this.getAxisMotionValue(y).get()||0;if(bs.test(v)){const{projection:_}=this.visualElement;if(_&&_.layout){const S=_.layout.layoutBox[y];S&&(v=$t(S)*(parseFloat(v)/100))}}this.originPoint[y]=v}),g&&qe.update(()=>g(d,h),!1,!0),Mm(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},o=(d,h)=>{this.latestPointerEvent=d,this.latestPanInfo=h;const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:g,onDrag:b}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:y}=h;if(m&&this.currentDirection===null){this.currentDirection=x3(y),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,y),this.updateAxis("y",h.point,y),this.visualElement.render(),b&&qe.update(()=>b(d,h),!1,!0)},l=(d,h)=>{this.latestPointerEvent=d,this.latestPanInfo=h,this.stop(d,h),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>{const{dragSnapToOrigin:d}=this.getProps();(d||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:u}=this.getProps();this.panSession=new XT(e,{onSessionStart:r,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:s,contextWindow:KT(this.visualElement),element:this.visualElement.current})}stop(e,n){const s=e||this.latestPointerEvent,i=n||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!i||!s)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&qe.postRender(()=>o(s,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,n,s){const{drag:i}=this.getProps();if(!s||!eu(e,i,this.currentDirection))return;const r=this.getAxisMotionValue(e);let a=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(a=d3(a,this.constraints[e],this.elastic[e])),r.set(a)}resolveConstraints(){var r;const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,i=this.constraints;e&&ga(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=h3(s.layoutBox,e):this.constraints=!1,this.elastic=g3(n),i!==this.constraints&&!ga(e)&&s&&this.constraints&&!this.hasMutatedConstraints&&hs(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=m3(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ga(e))return!1;const s=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const r=Aj(s,i.root,this.visualElement.getTransformPagePoint());let a=f3(i.layout.layoutBox,r);if(n){const o=n(Cj(a));this.hasMutatedConstraints=!!o,o&&(a=vT(o))}return a}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:i,dragTransition:r,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=hs(u=>{if(!eu(u,n,this.currentDirection))return;let d=l&&l[u]||{};a&&(d={min:0,max:0});const h=i?200:1e6,f=i?40:1e7,m={type:"inertia",velocity:s?e[u]:0,bounceStiffness:h,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...r,...d};return this.startAxisValueAnimation(u,m)});return Promise.all(c).then(o)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return Mm(this.visualElement,e),s.start(Dy(e,s,0,n,this.visualElement,!1))}stopAnimation(){hs(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),i=s[n];return i||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){hs(n=>{const{drag:s}=this.getProps();if(!eu(n,s,this.currentDirection))return;const{projection:i}=this.visualElement,r=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:o}=i.layout.layoutBox[n],l=r.get()||0;r.set(e[n]-nt(a,o,.5)+l)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!ga(n)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};hs(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();i[a]=p3({min:l,max:l},this.constraints[a])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.constraints=!1,this.resolveConstraints(),hs(a=>{if(!eu(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(nt(l,c,i[a]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;y3.set(this.visualElement,this);const e=this.visualElement.current,n=wl(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps(),h=c.target,f=h!==e&&ij(h);u&&d&&!f&&this.start(c)});let s;const i=()=>{const{dragConstraints:c}=this.getProps();ga(c)&&c.current&&(this.constraints=this.resolveRefConstraints(),s||(s=b3(e,c.current,()=>this.scalePositionWithinConstraints())))},{projection:r}=this.visualElement,a=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),qe.read(i);const o=Hl(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(hs(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),n(),a(),l&&l(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:a=Im,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:i,dragConstraints:r,dragElastic:a,dragMomentum:o}}}function Ix(t){let e=!0;return()=>{if(e){e=!1;return}t()}}function b3(t,e,n){const s=Wb(t,Ix(n)),i=Wb(e,Ix(n));return()=>{s(),i()}}function eu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function x3(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class _3 extends cr{constructor(e){super(e),this.removeGroupControls=Fn,this.removeListeners=Fn,this.controls=new v3(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Fn}update(){const{dragControls:e}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};e!==n&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const np=t=>(e,n)=>{t&&qe.update(()=>t(e,n),!1,!0)};class S3 extends cr{constructor(){super(...arguments),this.removePointerDownListener=Fn}onPointerDown(e){this.session=new XT(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:KT(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:np(e),onStart:np(n),onMove:np(s),onEnd:(r,a)=>{delete this.session,i&&qe.postRender(()=>i(r,a))}}}mount(){this.removePointerDownListener=wl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let sp=!1;class w3 extends x.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:i}=this.props,{projection:r}=e;r&&(n.group&&n.group.add(r),s&&s.register&&i&&s.register(r),sp&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Bu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:i,isPresent:r}=this.props,{projection:a}=s;return a&&(a.isPresent=r,e.layoutDependency!==n&&a.setOptions({...a.options,layoutDependency:n}),sp=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==r?a.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?a.promote():a.relegate()||qe.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),By.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:i}=e;sp=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ZT(t){const[e,n]=M5(),s=x.useContext(gC);return p.jsx(w3,{...t,layoutGroup:s,switchLayoutGroup:x.useContext($T),isPresent:e,safeToRemove:n})}const C3={pan:{Feature:S3},drag:{Feature:_3,ProjectionNode:VT,MeasureLayout:ZT}};function Lx(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,r=s[i];r&&qe.postRender(()=>r(e,hc(e)))}class T3 extends cr{mount(){const{current:e}=this.node;e&&(this.unmount=ej(e,(n,s)=>(Lx(this.node,s,"Start"),i=>Lx(this.node,i,"End"))))}unmount(){}}class E3 extends cr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=cc(Hl(this.node.current,"focus",()=>this.onFocus()),Hl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Vx(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),r=s[i];r&&qe.postRender(()=>r(e,hc(e)))}class A3 extends cr{mount(){const{current:e}=this.node;if(!e)return;const{globalTapTarget:n,propagate:s}=this.node.props;this.unmount=aj(e,(i,r)=>(Vx(this.node,r,"Start"),(a,{success:o})=>Vx(this.node,a,o?"End":"Cancel")),{useGlobalTarget:n,stopPropagation:(s==null?void 0:s.tap)===!1})}unmount(){}}const Lm=new WeakMap,ip=new WeakMap,k3=t=>{const e=Lm.get(t.target);e&&e(t)},N3=t=>{t.forEach(k3)};function M3({root:t,...e}){const n=t||document;ip.has(n)||ip.set(n,{});const s=ip.get(n),i=JSON.stringify(e);return s[i]||(s[i]=new IntersectionObserver(N3,{root:t,...e})),s[i]}function R3(t,e,n){const s=M3(e);return Lm.set(t,n),s.observe(t),()=>{Lm.delete(t),s.unobserve(t)}}const D3={some:0,all:1};class O3 extends cr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:i="some",once:r}=e,a={root:n?n.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:D3[i]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,r&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),h=c?u:d;h&&h(l)};return R3(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(j3(e,n))&&this.startObserver()}unmount(){}}function j3({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const P3={inView:{Feature:O3},tap:{Feature:A3},focus:{Feature:E3},hover:{Feature:T3}},B3={layout:{ProjectionNode:VT,MeasureLayout:ZT}},I3={...a3,...P3,...C3,...B3},mi=t3(I3,n3);function L3(){const t=[.6,1,.45,.85,.35,.7,1,.5,.8,.4,.95,.55];return p.jsx("div",{className:"flex items-end gap-[3px] h-10",children:t.map((e,n)=>p.jsx("div",{className:"start-anim-bar w-[3px] rounded-full",style:{height:`${e*100}%`,background:"linear-gradient(to top, oklch(0.65 0.22 265), oklch(0.75 0.18 290))",animationDelay:`${n*.12}s`,animationDuration:`${1.2+n%3*.2}s`}},n))})}const V3=[{color:"oklch(0.45 0.18 265 / 0.30)",size:500,x:["10%","55%","25%","65%","10%"],y:["15%","40%","60%","20%","15%"],duration:22},{color:"oklch(0.40 0.16 290 / 0.25)",size:450,x:["70%","30%","50%","20%","70%"],y:["60%","25%","45%","70%","60%"],duration:26},{color:"oklch(0.35 0.14 230 / 0.22)",size:400,x:["40%","75%","15%","60%","40%"],y:["70%","50%","30%","55%","70%"],duration:30},{color:"oklch(0.38 0.20 310 / 0.15)",size:350,x:["55%","20%","70%","35%","55%"],y:["30%","65%","45%","15%","30%"],duration:24},{color:"oklch(0.42 0.15 200 / 0.18)",size:380,x:["25%","60%","40%","75%","25%"],y:["50%","15%","70%","40%","50%"],duration:28}];function z3(){const t=x.useRef(null);return x.useEffect(()=>{const e=t.current;if(!e)return;const n=e.getContext("2d");if(!n)return;const s=256,i=256;e.width=s,e.height=i;let r;const a=()=>{const o=n.createImageData(s,i),l=o.data;for(let c=0;c<l.length;c+=4){const u=Math.random()*255;l[c]=u,l[c+1]=u,l[c+2]=u,l[c+3]=18}n.putImageData(o,0,0),r=requestAnimationFrame(a)};return a(),()=>cancelAnimationFrame(r)},[]),p.jsx("canvas",{ref:t,className:"pointer-events-none absolute inset-0 h-full w-full",style:{opacity:.55,mixBlendMode:"overlay",objectFit:"cover",width:"100%",height:"100%"}})}function F3(){const t=x.useMemo(()=>Array.from({length:14},(e,n)=>({x:10+(n*37+n*n*7)%80,y:10+(n*53+n*11)%80,size:2+n%3*1.5,delay:n*.4,duration:4+n%4})),[]);return p.jsx(p.Fragment,{children:t.map((e,n)=>p.jsx("div",{className:"start-anim-dot absolute rounded-full",style:{left:`${e.x}%`,top:`${e.y}%`,width:e.size,height:e.size,background:n%3===0?"oklch(0.65 0.22 265 / 0.5)":n%3===1?"oklch(0.70 0.15 290 / 0.4)":"oklch(0.60 0.12 230 / 0.35)",animationDelay:`${e.delay}s`,animationDuration:`${e.duration}s`}},n))})}const H3={hidden:{},show:{transition:{staggerChildren:.12,delayChildren:.2}}},tu={hidden:{opacity:0,y:24,filter:"blur(6px)"},show:{opacity:1,y:0,filter:"blur(0px)",transition:{duration:.7,ease:[.16,1,.3,1]}}};function U3({onStart:t}){const[e,n]=x.useState(!1),[s,i]=x.useState(!1),r=async()=>{n(!0);try{await t()}catch(a){console.error("Failed to start:",a),n(!1)}};return p.jsxs("div",{className:"relative flex flex-1 flex-col items-center justify-center overflow-hidden",style:{background:"oklch(0.06 0.015 270)"},children:[p.jsx("div",{className:"pointer-events-none absolute inset-0 overflow-hidden",children:V3.map((a,o)=>p.jsx(mi.div,{className:"absolute rounded-full",style:{width:a.size,height:a.size,background:`radial-gradient(circle, ${a.color}, transparent 70%)`,filter:"blur(80px)"},animate:{left:a.x,top:a.y},transition:{duration:a.duration,repeat:1/0,ease:"easeInOut"}},o))}),p.jsx("div",{className:"start-anim-grid pointer-events-none absolute inset-0",style:{backgroundImage:`
            linear-gradient(oklch(0.65 0.22 265 / 0.08) 1px, transparent 1px),
            linear-gradient(90deg, oklch(0.65 0.22 265 / 0.08) 1px, transparent 1px)
          `,backgroundSize:"48px 48px",maskImage:"radial-gradient(ellipse 55% 55% at 50% 50%, black 0%, transparent 70%)",WebkitMaskImage:"radial-gradient(ellipse 55% 55% at 50% 50%, black 0%, transparent 70%)"}}),p.jsx(F3,{}),p.jsx(z3,{}),p.jsx(mi.div,{className:"start-anim-ring absolute",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:1,delay:.3},style:{width:160,height:160,borderRadius:"50%",border:"1px solid oklch(0.65 0.22 265 / 0.12)",borderTopColor:"oklch(0.65 0.22 265 / 0.4)"}}),p.jsx("div",{className:"start-anim-breathe absolute rounded-full",style:{width:120,height:120,background:"radial-gradient(circle, oklch(0.65 0.22 265 / 0.10) 0%, transparent 70%)"}}),p.jsxs(mi.div,{className:"relative z-10 flex flex-col items-center gap-8",variants:H3,initial:"hidden",animate:"show",children:[p.jsx(mi.div,{variants:tu,className:"flex items-center justify-center rounded-2xl",style:{width:88,height:88,background:"linear-gradient(135deg, oklch(0.14 0.03 265 / 0.7), oklch(0.10 0.02 270 / 0.5))",backdropFilter:"blur(16px)",border:"1px solid oklch(0.65 0.22 265 / 0.12)",boxShadow:"0 8px 32px oklch(0 0 0 / 0.5), inset 0 1px 0 oklch(1 0 0 / 0.04)"},children:p.jsx(L3,{})}),p.jsxs(mi.div,{variants:tu,className:"flex flex-col items-center gap-2.5",children:[p.jsx("h1",{style:{fontFamily:"'Syne', sans-serif",fontWeight:800,fontSize:"2.75rem",letterSpacing:"-0.03em",lineHeight:1,background:"linear-gradient(135deg, oklch(0.96 0.01 270) 0%, oklch(0.72 0.15 265) 45%, oklch(0.60 0.22 290) 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",filter:"drop-shadow(0 2px 12px oklch(0.65 0.22 265 / 0.3))"},children:"MICRO DAW"}),p.jsx("p",{style:{fontFamily:"'JetBrains Mono', monospace",fontSize:"0.65rem",letterSpacing:"0.22em",textTransform:"uppercase",color:"oklch(0.50 0.08 265)"},children:"Create  Compose  Perform"})]}),p.jsxs(mi.button,{variants:tu,onClick:r,disabled:e,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),whileHover:e?{}:{scale:1.04},whileTap:e?{}:{scale:.97},className:"start-anim-glow-btn relative overflow-hidden rounded-xl px-10 py-3 font-semibold tracking-wide disabled:opacity-50 disabled:cursor-not-allowed",style:{background:e?"oklch(0.20 0.03 265)":"linear-gradient(135deg, oklch(0.50 0.22 265), oklch(0.45 0.20 280))",color:"oklch(0.95 0.01 270)",fontSize:"0.9rem",fontFamily:"'Manrope', sans-serif",border:"1px solid oklch(0.55 0.18 265 / 0.3)",cursor:e?void 0:"pointer"},children:[!e&&p.jsx("div",{className:"pointer-events-none absolute inset-0",style:{background:"linear-gradient(105deg, transparent 40%, oklch(1 0 0 / 0.07) 50%, transparent 60%)",transform:s?"translateX(100%)":"translateX(-100%)",transition:"transform 0.6s ease"}}),e?p.jsxs("span",{className:"flex items-center gap-2",children:[p.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",fill:"none",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]}),"Initializing..."]}):"Start Session"]}),p.jsxs(mi.p,{variants:tu,className:"max-w-xs text-center",style:{fontSize:"0.65rem",lineHeight:1.7,color:"oklch(0.35 0.02 270)"},children:["Initializes the audio engine and MIDI system.",p.jsx("br",{}),"Connect a controller for the best experience."]})]}),p.jsx("div",{className:"pointer-events-none absolute bottom-0 left-0 right-0 h-32",style:{background:"linear-gradient(to top, oklch(0.06 0.015 270), transparent)"}}),p.jsx("div",{className:"pointer-events-none absolute top-0 left-0 right-0 h-24",style:{background:"linear-gradient(to bottom, oklch(0.06 0.015 270 / 0.6), transparent)"}}),p.jsx(mi.div,{className:"absolute bottom-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2,duration:.8},style:{fontFamily:"'JetBrains Mono', monospace",fontSize:"0.55rem",color:"oklch(0.25 0.02 270)",letterSpacing:"0.12em"},children:"v1.0.0"})]})}/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=(...t)=>t.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=t=>{const e=q3(t);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var W3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=x.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:i="",children:r,iconNode:a,...o},l)=>x.createElement("svg",{ref:l,...W3,width:e,height:e,stroke:t,strokeWidth:s?Number(n)*24/Number(e):n,className:JT("lucide",i),...!r&&!$3(o)&&{"aria-hidden":"true"},...o},[...a.map(([c,u])=>x.createElement(c,u)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=(t,e)=>{const n=x.forwardRef(({className:s,...i},r)=>x.createElement(Y3,{ref:r,iconNode:e,className:JT(`lucide-${G3(zx(t))}`,`lucide-${t}`,s),...i}));return n.displayName=zx(t),n};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],oo=ve("arrow-left",K3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Q3=ve("arrow-right",X3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],J3=ve("book-open",Z3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],t4=ve("check",e4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],eE=ve("chevron-down",n4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],i4=ve("chevron-up",s4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],tE=ve("circle-check",r4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],o4=ve("circle",a4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],c4=ve("clock",l4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],d4=ve("download",u4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["path",{d:"m2 2 8 8",key:"1v6059"}],["path",{d:"m22 2-8 8",key:"173r8a"}],["ellipse",{cx:"12",cy:"9",rx:"10",ry:"5",key:"liohsx"}],["path",{d:"M7 13.4v7.9",key:"1yi6u9"}],["path",{d:"M12 14v8",key:"1tn2tj"}],["path",{d:"M17 13.4v7.9",key:"eqz2v3"}],["path",{d:"M2 9v8a10 5 0 0 0 20 0V9",key:"1750ul"}]],qy=ve("drum",h4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],p4=ve("eraser",f4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["path",{d:"M4 6.835V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2h-.343",key:"1vfytu"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M2 19a2 2 0 0 1 4 0v1a2 2 0 0 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 0 1-4 0v-1a2 2 0 0 1 4 0",key:"1etmh7"}]],g4=ve("file-headphone",m4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],nE=ve("graduation-cap",y4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Fx=ve("loader-circle",v4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],x4=ve("maximize-2",b4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],S4=ve("minimize-2",_4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],sE=ve("mouse-pointer-2",w4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]],iE=ve("music-2",C4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],rE=ve("music",T4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],A4=ve("pencil",E4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M18.5 8c-1.4 0-2.6-.8-3.2-2A6.87 6.87 0 0 0 2 9v11a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-8.5C22 9.6 20.4 8 18.5 8",key:"lag0yf"}],["path",{d:"M2 14h20",key:"myj16y"}],["path",{d:"M6 14v4",key:"9ng0ue"}],["path",{d:"M10 14v4",key:"1v8uk5"}],["path",{d:"M14 14v4",key:"1tqops"}],["path",{d:"M18 14v4",key:"18uqwm"}]],Wy=ve("piano",k4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],$y=ve("play",N4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Hx=ve("plus",M4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],aE=ve("redo-2",R4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],O4=ve("rotate-ccw",D4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]],P4=ve("scissors",j4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Yy=ve("square",B4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],oE=ve("star",I4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],lE=ve("target",L4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],cE=ve("timer",V4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],F4=ve("trash-2",z4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ux=ve("triangle-alert",H4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],uE=ve("undo-2",U4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=[["circle",{cx:"10",cy:"7",r:"1",key:"dypaad"}],["circle",{cx:"4",cy:"20",r:"1",key:"22iqad"}],["path",{d:"M4.7 19.3 19 5",key:"1enqfc"}],["path",{d:"m21 3-3 1 2 2Z",key:"d3ov82"}],["path",{d:"M9.26 7.68 5 12l2 5",key:"1esawj"}],["path",{d:"m10 14 5 2 3.5-3.5",key:"v8oal5"}],["path",{d:"m18 12 1-1 1 1-1 1Z",key:"1bh22v"}]],q4=ve("usb",G4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],dE=ve("volume-2",W4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],hE=ve("volume-x",$4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],fE=ve("waves",Y4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],pE=ve("x",K4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],Q4=ve("zoom-in",X4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],J4=ve("zoom-out",Z4);function Gx(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function mE(...t){return e=>{let n=!1;const s=t.map(i=>{const r=Gx(i,e);return!n&&typeof r=="function"&&(n=!0),r});if(n)return()=>{for(let i=0;i<s.length;i++){const r=s[i];typeof r=="function"?r():Gx(t[i],null)}}}}function We(...t){return x.useCallback(mE(...t),t)}function Ul(t){const e=eP(t),n=x.forwardRef((s,i)=>{const{children:r,...a}=s,o=x.Children.toArray(r),l=o.find(nP);if(l){const c=l.props.children,u=o.map(d=>d===l?x.Children.count(c)>1?x.Children.only(null):x.isValidElement(c)?c.props.children:null:d);return p.jsx(e,{...a,ref:i,children:x.isValidElement(c)?x.cloneElement(c,void 0,u):null})}return p.jsx(e,{...a,ref:i,children:r})});return n.displayName=`${t}.Slot`,n}var gE=Ul("Slot");function eP(t){const e=x.forwardRef((n,s)=>{const{children:i,...r}=n;if(x.isValidElement(i)){const a=iP(i),o=sP(r,i.props);return i.type!==x.Fragment&&(o.ref=s?mE(s,a):a),x.cloneElement(i,o)}return x.Children.count(i)>1?x.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var tP=Symbol("radix.slottable");function nP(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===tP}function sP(t,e){const n={...e};for(const s in e){const i=t[s],r=e[s];/^on[A-Z]/.test(s)?i&&r?n[s]=(...o)=>{const l=r(...o);return i(...o),l}:i&&(n[s]=i):s==="style"?n[s]={...i,...r}:s==="className"&&(n[s]=[i,r].filter(Boolean).join(" "))}return{...t,...n}}function iP(t){var s,i;let e=(s=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var rP=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ke=rP.reduce((t,e)=>{const n=Ul(`Primitive.${e}`),s=x.forwardRef((i,r)=>{const{asChild:a,...o}=i,l=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...o,ref:r})});return s.displayName=`Primitive.${e}`,{...t,[e]:s}},{});function aP(t,e){t&&vo.flushSync(()=>t.dispatchEvent(e))}var yE=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),oP="VisuallyHidden",lP=x.forwardRef((t,e)=>p.jsx(ke.span,{...t,ref:e,style:{...yE,...t.style}}));lP.displayName=oP;function ea(t,e=[]){let n=[];function s(r,a){const o=x.createContext(a),l=n.length;n=[...n,a];const c=d=>{var y;const{scope:h,children:f,...m}=d,g=((y=h==null?void 0:h[t])==null?void 0:y[l])||o,b=x.useMemo(()=>m,Object.values(m));return p.jsx(g.Provider,{value:b,children:f})};c.displayName=r+"Provider";function u(d,h){var g;const f=((g=h==null?void 0:h[t])==null?void 0:g[l])||o,m=x.useContext(f);if(m)return m;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${r}\``)}return[c,u]}const i=()=>{const r=n.map(a=>x.createContext(a));return function(o){const l=(o==null?void 0:o[t])||r;return x.useMemo(()=>({[`__scope${t}`]:{...o,[t]:l}}),[o,l])}};return i.scopeName=t,[s,cP(i,...e)]}function cP(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const s=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(r){const a=s.reduce((o,{useScope:l,scopeName:c})=>{const d=l(r)[`__scope${c}`];return{...o,...d}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function Ky(t){const e=t+"CollectionProvider",[n,s]=ea(e),[i,r]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=g=>{const{scope:b,children:y}=g,v=xt.useRef(null),_=xt.useRef(new Map).current;return p.jsx(i,{scope:b,itemMap:_,collectionRef:v,children:y})};a.displayName=e;const o=t+"CollectionSlot",l=Ul(o),c=xt.forwardRef((g,b)=>{const{scope:y,children:v}=g,_=r(o,y),S=We(b,_.collectionRef);return p.jsx(l,{ref:S,children:v})});c.displayName=o;const u=t+"CollectionItemSlot",d="data-radix-collection-item",h=Ul(u),f=xt.forwardRef((g,b)=>{const{scope:y,children:v,..._}=g,S=xt.useRef(null),w=We(b,S),E=r(u,y);return xt.useEffect(()=>(E.itemMap.set(S,{ref:S,..._}),()=>void E.itemMap.delete(S))),p.jsx(h,{[d]:"",ref:w,children:v})});f.displayName=u;function m(g){const b=r(t+"CollectionConsumer",g);return xt.useCallback(()=>{const v=b.collectionRef.current;if(!v)return[];const _=Array.from(v.querySelectorAll(`[${d}]`));return Array.from(b.itemMap.values()).sort((E,T)=>_.indexOf(E.ref.current)-_.indexOf(T.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:a,Slot:c,ItemSlot:f},m,s]}function Ae(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}var cn=globalThis!=null&&globalThis.document?x.useLayoutEffect:()=>{},uP=w_[" useInsertionEffect ".trim().toString()]||cn;function er({prop:t,defaultProp:e,onChange:n=()=>{},caller:s}){const[i,r,a]=dP({defaultProp:e,onChange:n}),o=t!==void 0,l=o?t:i;{const u=x.useRef(t!==void 0);x.useEffect(()=>{const d=u.current;d!==o&&console.warn(`${s} is changing from ${d?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=o},[o,s])}const c=x.useCallback(u=>{var d;if(o){const h=hP(u)?u(t):u;h!==t&&((d=a.current)==null||d.call(a,h))}else r(u)},[o,t,r,a]);return[l,c]}function dP({defaultProp:t,onChange:e}){const[n,s]=x.useState(t),i=x.useRef(n),r=x.useRef(e);return uP(()=>{r.current=e},[e]),x.useEffect(()=>{var a;i.current!==n&&((a=r.current)==null||a.call(r,n),i.current=n)},[n,i]),[n,s,r]}function hP(t){return typeof t=="function"}var fP=w_[" useId ".trim().toString()]||(()=>{}),pP=0;function xh(t){const[e,n]=x.useState(fP());return cn(()=>{n(s=>s??String(pP++))},[t]),t||(e?`radix-${e}`:"")}var mP=x.createContext(void 0);function _h(t){const e=x.useContext(mP);return t||e||"ltr"}function tr(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...n)=>{var s;return(s=e.current)==null?void 0:s.call(e,...n)},[])}function gP(t,e=globalThis==null?void 0:globalThis.document){const n=tr(t);x.useEffect(()=>{const s=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[n,e])}var yP="DismissableLayer",Vm="dismissableLayer.update",vP="dismissableLayer.pointerDownOutside",bP="dismissableLayer.focusOutside",qx,vE=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),bE=x.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:i,onFocusOutside:r,onInteractOutside:a,onDismiss:o,...l}=t,c=x.useContext(vE),[u,d]=x.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=x.useState({}),m=We(e,T=>d(T)),g=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(b),v=u?g.indexOf(u):-1,_=c.layersWithOutsidePointerEventsDisabled.size>0,S=v>=y,w=SP(T=>{const C=T.target,N=[...c.branches].some(A=>A.contains(C));!S||N||(i==null||i(T),a==null||a(T),T.defaultPrevented||o==null||o())},h),E=wP(T=>{const C=T.target;[...c.branches].some(A=>A.contains(C))||(r==null||r(T),a==null||a(T),T.defaultPrevented||o==null||o())},h);return gP(T=>{v===c.layers.size-1&&(s==null||s(T),!T.defaultPrevented&&o&&(T.preventDefault(),o()))},h),x.useEffect(()=>{if(u)return n&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(qx=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),Wx(),()=>{n&&c.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=qx)}},[u,h,n,c]),x.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),Wx())},[u,c]),x.useEffect(()=>{const T=()=>f({});return document.addEventListener(Vm,T),()=>document.removeEventListener(Vm,T)},[]),p.jsx(ke.div,{...l,ref:m,style:{pointerEvents:_?S?"auto":"none":void 0,...t.style},onFocusCapture:Ae(t.onFocusCapture,E.onFocusCapture),onBlurCapture:Ae(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:Ae(t.onPointerDownCapture,w.onPointerDownCapture)})});bE.displayName=yP;var xP="DismissableLayerBranch",_P=x.forwardRef((t,e)=>{const n=x.useContext(vE),s=x.useRef(null),i=We(e,s);return x.useEffect(()=>{const r=s.current;if(r)return n.branches.add(r),()=>{n.branches.delete(r)}},[n.branches]),p.jsx(ke.div,{...t,ref:i})});_P.displayName=xP;function SP(t,e=globalThis==null?void 0:globalThis.document){const n=tr(t),s=x.useRef(!1),i=x.useRef(()=>{});return x.useEffect(()=>{const r=o=>{if(o.target&&!s.current){let l=function(){xE(vP,n,c,{discrete:!0})};const c={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);s.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",r)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",r),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>s.current=!0}}function wP(t,e=globalThis==null?void 0:globalThis.document){const n=tr(t),s=x.useRef(!1);return x.useEffect(()=>{const i=r=>{r.target&&!s.current&&xE(bP,n,{originalEvent:r},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Wx(){const t=new CustomEvent(Vm);document.dispatchEvent(t)}function xE(t,e,n,{discrete:s}){const i=n.originalEvent.target,r=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),s?aP(i,r):i.dispatchEvent(r)}var rp="focusScope.autoFocusOnMount",ap="focusScope.autoFocusOnUnmount",$x={bubbles:!1,cancelable:!0},CP="FocusScope",_E=x.forwardRef((t,e)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:i,onUnmountAutoFocus:r,...a}=t,[o,l]=x.useState(null),c=tr(i),u=tr(r),d=x.useRef(null),h=We(e,g=>l(g)),f=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(s){let g=function(_){if(f.paused||!o)return;const S=_.target;o.contains(S)?d.current=S:xi(d.current,{select:!0})},b=function(_){if(f.paused||!o)return;const S=_.relatedTarget;S!==null&&(o.contains(S)||xi(d.current,{select:!0}))},y=function(_){if(document.activeElement===document.body)for(const w of _)w.removedNodes.length>0&&xi(o)};document.addEventListener("focusin",g),document.addEventListener("focusout",b);const v=new MutationObserver(y);return o&&v.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",b),v.disconnect()}}},[s,o,f.paused]),x.useEffect(()=>{if(o){Kx.add(f);const g=document.activeElement;if(!o.contains(g)){const y=new CustomEvent(rp,$x);o.addEventListener(rp,c),o.dispatchEvent(y),y.defaultPrevented||(TP(MP(SE(o)),{select:!0}),document.activeElement===g&&xi(o))}return()=>{o.removeEventListener(rp,c),setTimeout(()=>{const y=new CustomEvent(ap,$x);o.addEventListener(ap,u),o.dispatchEvent(y),y.defaultPrevented||xi(g??document.body,{select:!0}),o.removeEventListener(ap,u),Kx.remove(f)},0)}}},[o,c,u,f]);const m=x.useCallback(g=>{if(!n&&!s||f.paused)return;const b=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,y=document.activeElement;if(b&&y){const v=g.currentTarget,[_,S]=EP(v);_&&S?!g.shiftKey&&y===S?(g.preventDefault(),n&&xi(_,{select:!0})):g.shiftKey&&y===_&&(g.preventDefault(),n&&xi(S,{select:!0})):y===v&&g.preventDefault()}},[n,s,f.paused]);return p.jsx(ke.div,{tabIndex:-1,...a,ref:h,onKeyDown:m})});_E.displayName=CP;function TP(t,{select:e=!1}={}){const n=document.activeElement;for(const s of t)if(xi(s,{select:e}),document.activeElement!==n)return}function EP(t){const e=SE(t),n=Yx(e,t),s=Yx(e.reverse(),t);return[n,s]}function SE(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Yx(t,e){for(const n of t)if(!AP(n,{upTo:e}))return n}function AP(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function kP(t){return t instanceof HTMLInputElement&&"select"in t}function xi(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&kP(t)&&e&&t.select()}}var Kx=NP();function NP(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=Xx(t,e),t.unshift(e)},remove(e){var n;t=Xx(t,e),(n=t[0])==null||n.resume()}}}function Xx(t,e){const n=[...t],s=n.indexOf(e);return s!==-1&&n.splice(s,1),n}function MP(t){return t.filter(e=>e.tagName!=="A")}var RP="Portal",wE=x.forwardRef((t,e)=>{var o;const{container:n,...s}=t,[i,r]=x.useState(!1);cn(()=>r(!0),[]);const a=n||i&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?gM.createPortal(p.jsx(ke.div,{...s,ref:e}),a):null});wE.displayName=RP;var op=0;function DP(){x.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Qx()),document.body.insertAdjacentElement("beforeend",t[1]??Qx()),op++,()=>{op===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),op--}},[])}function Qx(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var Ni=function(){return Ni=Object.assign||function(e){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ni.apply(this,arguments)};function OP(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n}function jP(t,e,n){if(n||arguments.length===2)for(var s=0,i=e.length,r;s<i;s++)(r||!(s in e))&&(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return t.concat(r||Array.prototype.slice.call(e))}var Iu="right-scroll-bar-position",Lu="width-before-scroll-bar",PP="with-scroll-bars-hidden",BP="--removed-body-scroll-bar-size";function lp(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function IP(t,e){var n=x.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(s){var i=n.value;i!==s&&(n.value=s,n.callback(s,i))}}}})[0];return n.callback=e,n.facade}var LP=typeof window<"u"?x.useLayoutEffect:x.useEffect,Zx=new WeakMap;function VP(t,e){var n=IP(null,function(s){return t.forEach(function(i){return lp(i,s)})});return LP(function(){var s=Zx.get(n);if(s){var i=new Set(s),r=new Set(t),a=n.current;i.forEach(function(o){r.has(o)||lp(o,null)}),r.forEach(function(o){i.has(o)||lp(o,a)})}Zx.set(n,t)},[t]),n}var Cd=function(){return Cd=Object.assign||function(e){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cd.apply(this,arguments)};function zP(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(t);i<s.length;i++)e.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(t,s[i])&&(n[s[i]]=t[s[i]]);return n}function FP(t){return t}function HP(t,e){e===void 0&&(e=FP);var n=[],s=!1,i={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(r){var a=e(r,s);return n.push(a),function(){n=n.filter(function(o){return o!==a})}},assignSyncMedium:function(r){for(s=!0;n.length;){var a=n;n=[],a.forEach(r)}n={push:function(o){return r(o)},filter:function(){return n}}},assignMedium:function(r){s=!0;var a=[];if(n.length){var o=n;n=[],o.forEach(r),a=n}var l=function(){var u=a;a=[],u.forEach(r)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){a.push(u),c()},filter:function(u){return a=a.filter(u),n}}}};return i}function UP(t){t===void 0&&(t={});var e=HP(null);return e.options=Cd({async:!0,ssr:!1},t),e}var CE=function(t){var e=t.sideCar,n=zP(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=e.read();if(!s)throw new Error("Sidecar medium not found");return x.createElement(s,Cd({},n))};CE.isSideCarExport=!0;function GP(t,e){return t.useMedium(e),CE}var TE=UP(),cp=function(){},Sh=x.forwardRef(function(t,e){var n=x.useRef(null),s=x.useState({onScrollCapture:cp,onWheelCapture:cp,onTouchMoveCapture:cp}),i=s[0],r=s[1],a=t.forwardProps,o=t.children,l=t.className,c=t.removeScrollBar,u=t.enabled,d=t.shards,h=t.sideCar,f=t.noRelative,m=t.noIsolation,g=t.inert,b=t.allowPinchZoom,y=t.as,v=y===void 0?"div":y,_=t.gapMode,S=OP(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=h,E=VP([n,e]),T=Ni(Ni({},S),i);return x.createElement(x.Fragment,null,u&&x.createElement(w,{sideCar:TE,removeScrollBar:c,shards:d,noRelative:f,noIsolation:m,inert:g,setCallbacks:r,allowPinchZoom:!!b,lockRef:n,gapMode:_}),a?x.cloneElement(x.Children.only(o),Ni(Ni({},T),{ref:E})):x.createElement(v,Ni({},T,{className:l,ref:E}),o))});Sh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Sh.classNames={fullWidth:Lu,zeroRight:Iu};var qP=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function WP(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=qP();return e&&t.setAttribute("nonce",e),t}function $P(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function YP(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var KP=function(){var t=0,e=null;return{add:function(n){t==0&&(e=WP())&&($P(e,n),YP(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},XP=function(){var t=KP();return function(e,n){x.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},EE=function(){var t=XP(),e=function(n){var s=n.styles,i=n.dynamic;return t(s,i),null};return e},QP={left:0,top:0,right:0,gap:0},up=function(t){return parseInt(t||"",10)||0},ZP=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],s=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[up(n),up(s),up(i)]},JP=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return QP;var e=ZP(t),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,s-n+e[2]-e[0])}},e6=EE(),Wa="data-scroll-locked",t6=function(t,e,n,s){var i=t.left,r=t.top,a=t.right,o=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(PP,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(o,"px ").concat(s,`;
  }
  body[`).concat(Wa,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(r,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Iu,` {
    right: `).concat(o,"px ").concat(s,`;
  }
  
  .`).concat(Lu,` {
    margin-right: `).concat(o,"px ").concat(s,`;
  }
  
  .`).concat(Iu," .").concat(Iu,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Lu," .").concat(Lu,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Wa,`] {
    `).concat(BP,": ").concat(o,`px;
  }
`)},Jx=function(){var t=parseInt(document.body.getAttribute(Wa)||"0",10);return isFinite(t)?t:0},n6=function(){x.useEffect(function(){return document.body.setAttribute(Wa,(Jx()+1).toString()),function(){var t=Jx()-1;t<=0?document.body.removeAttribute(Wa):document.body.setAttribute(Wa,t.toString())}},[])},s6=function(t){var e=t.noRelative,n=t.noImportant,s=t.gapMode,i=s===void 0?"margin":s;n6();var r=x.useMemo(function(){return JP(i)},[i]);return x.createElement(e6,{styles:t6(r,!e,i,n?"":"!important")})},zm=!1;if(typeof window<"u")try{var nu=Object.defineProperty({},"passive",{get:function(){return zm=!0,!0}});window.addEventListener("test",nu,nu),window.removeEventListener("test",nu,nu)}catch{zm=!1}var la=zm?{passive:!1}:!1,i6=function(t){return t.tagName==="TEXTAREA"},AE=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!i6(t)&&n[e]==="visible")},r6=function(t){return AE(t,"overflowY")},a6=function(t){return AE(t,"overflowX")},e1=function(t,e){var n=e.ownerDocument,s=e;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var i=kE(t,s);if(i){var r=NE(t,s),a=r[1],o=r[2];if(a>o)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},o6=function(t){var e=t.scrollTop,n=t.scrollHeight,s=t.clientHeight;return[e,n,s]},l6=function(t){var e=t.scrollLeft,n=t.scrollWidth,s=t.clientWidth;return[e,n,s]},kE=function(t,e){return t==="v"?r6(e):a6(e)},NE=function(t,e){return t==="v"?o6(e):l6(e)},c6=function(t,e){return t==="h"&&e==="rtl"?-1:1},u6=function(t,e,n,s,i){var r=c6(t,window.getComputedStyle(e).direction),a=r*s,o=n.target,l=e.contains(o),c=!1,u=a>0,d=0,h=0;do{if(!o)break;var f=NE(t,o),m=f[0],g=f[1],b=f[2],y=g-b-r*m;(m||y)&&kE(t,o)&&(d+=y,h+=m);var v=o.parentNode;o=v&&v.nodeType===Node.DOCUMENT_FRAGMENT_NODE?v.host:v}while(!l&&o!==document.body||l&&(e.contains(o)||e===o));return(u&&Math.abs(d)<1||!u&&Math.abs(h)<1)&&(c=!0),c},su=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},t1=function(t){return[t.deltaX,t.deltaY]},n1=function(t){return t&&"current"in t?t.current:t},d6=function(t,e){return t[0]===e[0]&&t[1]===e[1]},h6=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},f6=0,ca=[];function p6(t){var e=x.useRef([]),n=x.useRef([0,0]),s=x.useRef(),i=x.useState(f6++)[0],r=x.useState(EE)[0],a=x.useRef(t);x.useEffect(function(){a.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var g=jP([t.lockRef.current],(t.shards||[]).map(n1),!0).filter(Boolean);return g.forEach(function(b){return b.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var o=x.useCallback(function(g,b){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!a.current.allowPinchZoom;var y=su(g),v=n.current,_="deltaX"in g?g.deltaX:v[0]-y[0],S="deltaY"in g?g.deltaY:v[1]-y[1],w,E=g.target,T=Math.abs(_)>Math.abs(S)?"h":"v";if("touches"in g&&T==="h"&&E.type==="range")return!1;var C=window.getSelection(),N=C&&C.anchorNode,A=N?N===E||N.contains(E):!1;if(A)return!1;var k=e1(T,E);if(!k)return!0;if(k?w=T:(w=T==="v"?"h":"v",k=e1(T,E)),!k)return!1;if(!s.current&&"changedTouches"in g&&(_||S)&&(s.current=w),!w)return!0;var O=s.current||w;return u6(O,b,g,O==="h"?_:S)},[]),l=x.useCallback(function(g){var b=g;if(!(!ca.length||ca[ca.length-1]!==r)){var y="deltaY"in b?t1(b):su(b),v=e.current.filter(function(w){return w.name===b.type&&(w.target===b.target||b.target===w.shadowParent)&&d6(w.delta,y)})[0];if(v&&v.should){b.cancelable&&b.preventDefault();return}if(!v){var _=(a.current.shards||[]).map(n1).filter(Boolean).filter(function(w){return w.contains(b.target)}),S=_.length>0?o(b,_[0]):!a.current.noIsolation;S&&b.cancelable&&b.preventDefault()}}},[]),c=x.useCallback(function(g,b,y,v){var _={name:g,delta:b,target:y,should:v,shadowParent:m6(y)};e.current.push(_),setTimeout(function(){e.current=e.current.filter(function(S){return S!==_})},1)},[]),u=x.useCallback(function(g){n.current=su(g),s.current=void 0},[]),d=x.useCallback(function(g){c(g.type,t1(g),g.target,o(g,t.lockRef.current))},[]),h=x.useCallback(function(g){c(g.type,su(g),g.target,o(g,t.lockRef.current))},[]);x.useEffect(function(){return ca.push(r),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,la),document.addEventListener("touchmove",l,la),document.addEventListener("touchstart",u,la),function(){ca=ca.filter(function(g){return g!==r}),document.removeEventListener("wheel",l,la),document.removeEventListener("touchmove",l,la),document.removeEventListener("touchstart",u,la)}},[]);var f=t.removeScrollBar,m=t.inert;return x.createElement(x.Fragment,null,m?x.createElement(r,{styles:h6(i)}):null,f?x.createElement(s6,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function m6(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const g6=GP(TE,p6);var ME=x.forwardRef(function(t,e){return x.createElement(Sh,Ni({},t,{ref:e,sideCar:g6}))});ME.classNames=Sh.classNames;var y6=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ua=new WeakMap,iu=new WeakMap,ru={},dp=0,RE=function(t){return t&&(t.host||RE(t.parentNode))},v6=function(t,e){return e.map(function(n){if(t.contains(n))return n;var s=RE(n);return s&&t.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},b6=function(t,e,n,s){var i=v6(e,Array.isArray(t)?t:[t]);ru[n]||(ru[n]=new WeakMap);var r=ru[n],a=[],o=new Set,l=new Set(i),c=function(d){!d||o.has(d)||(o.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(o.has(h))u(h);else try{var f=h.getAttribute(s),m=f!==null&&f!=="false",g=(ua.get(h)||0)+1,b=(r.get(h)||0)+1;ua.set(h,g),r.set(h,b),a.push(h),g===1&&m&&iu.set(h,!0),b===1&&h.setAttribute(n,"true"),m||h.setAttribute(s,"true")}catch(y){console.error("aria-hidden: cannot operate on ",h,y)}})};return u(e),o.clear(),dp++,function(){a.forEach(function(d){var h=ua.get(d)-1,f=r.get(d)-1;ua.set(d,h),r.set(d,f),h||(iu.has(d)||d.removeAttribute(s),iu.delete(d)),f||d.removeAttribute(n)}),dp--,dp||(ua=new WeakMap,ua=new WeakMap,iu=new WeakMap,ru={})}},x6=function(t,e,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(t)?t:[t]),i=y6(t);return i?(s.push.apply(s,Array.from(i.querySelectorAll("[aria-live], script"))),b6(s,i,n,"aria-hidden")):function(){return null}};function Xy(t){const e=x.useRef({value:t,previous:t});return x.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function Qy(t){const[e,n]=x.useState(void 0);return cn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const r=i[0];let a,o;if("borderBoxSize"in r){const l=r.borderBoxSize,c=Array.isArray(l)?l[0]:l;a=c.inlineSize,o=c.blockSize}else a=t.offsetWidth,o=t.offsetHeight;n({width:a,height:o})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else n(void 0)},[t]),e}const _6=["top","right","bottom","left"],nr=Math.min,pn=Math.max,Td=Math.round,au=Math.floor,xs=t=>({x:t,y:t}),S6={left:"right",right:"left",bottom:"top",top:"bottom"},w6={start:"end",end:"start"};function Fm(t,e,n){return pn(t,nr(e,n))}function ii(t,e){return typeof t=="function"?t(e):t}function ri(t){return t.split("-")[0]}function No(t){return t.split("-")[1]}function Zy(t){return t==="x"?"y":"x"}function Jy(t){return t==="y"?"height":"width"}const C6=new Set(["top","bottom"]);function gs(t){return C6.has(ri(t))?"y":"x"}function e0(t){return Zy(gs(t))}function T6(t,e,n){n===void 0&&(n=!1);const s=No(t),i=e0(t),r=Jy(i);let a=i==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(a=Ed(a)),[a,Ed(a)]}function E6(t){const e=Ed(t);return[Hm(t),e,Hm(e)]}function Hm(t){return t.replace(/start|end/g,e=>w6[e])}const s1=["left","right"],i1=["right","left"],A6=["top","bottom"],k6=["bottom","top"];function N6(t,e,n){switch(t){case"top":case"bottom":return n?e?i1:s1:e?s1:i1;case"left":case"right":return e?A6:k6;default:return[]}}function M6(t,e,n,s){const i=No(t);let r=N6(ri(t),n==="start",s);return i&&(r=r.map(a=>a+"-"+i),e&&(r=r.concat(r.map(Hm)))),r}function Ed(t){return t.replace(/left|right|bottom|top/g,e=>S6[e])}function R6(t){return{top:0,right:0,bottom:0,left:0,...t}}function DE(t){return typeof t!="number"?R6(t):{top:t,right:t,bottom:t,left:t}}function Ad(t){const{x:e,y:n,width:s,height:i}=t;return{width:s,height:i,top:n,left:e,right:e+s,bottom:n+i,x:e,y:n}}function r1(t,e,n){let{reference:s,floating:i}=t;const r=gs(e),a=e0(e),o=Jy(a),l=ri(e),c=r==="y",u=s.x+s.width/2-i.width/2,d=s.y+s.height/2-i.height/2,h=s[o]/2-i[o]/2;let f;switch(l){case"top":f={x:u,y:s.y-i.height};break;case"bottom":f={x:u,y:s.y+s.height};break;case"right":f={x:s.x+s.width,y:d};break;case"left":f={x:s.x-i.width,y:d};break;default:f={x:s.x,y:s.y}}switch(No(e)){case"start":f[a]-=h*(n&&c?-1:1);break;case"end":f[a]+=h*(n&&c?-1:1);break}return f}async function D6(t,e){var n;e===void 0&&(e={});const{x:s,y:i,platform:r,rects:a,elements:o,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=ii(e,t),m=DE(f),b=o[h?d==="floating"?"reference":"floating":d],y=Ad(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(b)))==null||n?b:b.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),v=d==="floating"?{x:s,y:i,width:a.floating.width,height:a.floating.height}:a.reference,_=await(r.getOffsetParent==null?void 0:r.getOffsetParent(o.floating)),S=await(r.isElement==null?void 0:r.isElement(_))?await(r.getScale==null?void 0:r.getScale(_))||{x:1,y:1}:{x:1,y:1},w=Ad(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:v,offsetParent:_,strategy:l}):v);return{top:(y.top-w.top+m.top)/S.y,bottom:(w.bottom-y.bottom+m.bottom)/S.y,left:(y.left-w.left+m.left)/S.x,right:(w.right-y.right+m.right)/S.x}}const O6=async(t,e,n)=>{const{placement:s="bottom",strategy:i="absolute",middleware:r=[],platform:a}=n,o=r.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let c=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=r1(c,s,l),h=s,f={},m=0;for(let b=0;b<o.length;b++){var g;const{name:y,fn:v}=o[b],{x:_,y:S,data:w,reset:E}=await v({x:u,y:d,initialPlacement:s,placement:h,strategy:i,middlewareData:f,rects:c,platform:{...a,detectOverflow:(g=a.detectOverflow)!=null?g:D6},elements:{reference:t,floating:e}});u=_??u,d=S??d,f={...f,[y]:{...f[y],...w}},E&&m<=50&&(m++,typeof E=="object"&&(E.placement&&(h=E.placement),E.rects&&(c=E.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:i}):E.rects),{x:u,y:d}=r1(c,h,l)),b=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:f}},j6=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:s,placement:i,rects:r,platform:a,elements:o,middlewareData:l}=e,{element:c,padding:u=0}=ii(t,e)||{};if(c==null)return{};const d=DE(u),h={x:n,y:s},f=e0(i),m=Jy(f),g=await a.getDimensions(c),b=f==="y",y=b?"top":"left",v=b?"bottom":"right",_=b?"clientHeight":"clientWidth",S=r.reference[m]+r.reference[f]-h[f]-r.floating[m],w=h[f]-r.reference[f],E=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c));let T=E?E[_]:0;(!T||!await(a.isElement==null?void 0:a.isElement(E)))&&(T=o.floating[_]||r.floating[m]);const C=S/2-w/2,N=T/2-g[m]/2-1,A=nr(d[y],N),k=nr(d[v],N),O=A,P=T-g[m]-k,j=T/2-g[m]/2+C,I=Fm(O,j,P),R=!l.arrow&&No(i)!=null&&j!==I&&r.reference[m]/2-(j<O?A:k)-g[m]/2<0,D=R?j<O?j-O:j-P:0;return{[f]:h[f]+D,data:{[f]:I,centerOffset:j-I-D,...R&&{alignmentOffset:D}},reset:R}}}),P6=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,s;const{placement:i,middlewareData:r,rects:a,initialPlacement:o,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...b}=ii(t,e);if((n=r.arrow)!=null&&n.alignmentOffset)return{};const y=ri(i),v=gs(o),_=ri(o)===o,S=await(l.isRTL==null?void 0:l.isRTL(c.floating)),w=h||(_||!g?[Ed(o)]:E6(o)),E=m!=="none";!h&&E&&w.push(...M6(o,g,m,S));const T=[o,...w],C=await l.detectOverflow(e,b),N=[];let A=((s=r.flip)==null?void 0:s.overflows)||[];if(u&&N.push(C[y]),d){const j=T6(i,a,S);N.push(C[j[0]],C[j[1]])}if(A=[...A,{placement:i,overflows:N}],!N.every(j=>j<=0)){var k,O;const j=(((k=r.flip)==null?void 0:k.index)||0)+1,I=T[j];if(I&&(!(d==="alignment"?v!==gs(I):!1)||A.every(M=>gs(M.placement)===v?M.overflows[0]>0:!0)))return{data:{index:j,overflows:A},reset:{placement:I}};let R=(O=A.filter(D=>D.overflows[0]<=0).sort((D,M)=>D.overflows[1]-M.overflows[1])[0])==null?void 0:O.placement;if(!R)switch(f){case"bestFit":{var P;const D=(P=A.filter(M=>{if(E){const B=gs(M.placement);return B===v||B==="y"}return!0}).map(M=>[M.placement,M.overflows.filter(B=>B>0).reduce((B,z)=>B+z,0)]).sort((M,B)=>M[1]-B[1])[0])==null?void 0:P[0];D&&(R=D);break}case"initialPlacement":R=o;break}if(i!==R)return{reset:{placement:R}}}return{}}}};function a1(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function o1(t){return _6.some(e=>t[e]>=0)}const B6=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n,platform:s}=e,{strategy:i="referenceHidden",...r}=ii(t,e);switch(i){case"referenceHidden":{const a=await s.detectOverflow(e,{...r,elementContext:"reference"}),o=a1(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:o1(o)}}}case"escaped":{const a=await s.detectOverflow(e,{...r,altBoundary:!0}),o=a1(a,n.floating);return{data:{escapedOffsets:o,escaped:o1(o)}}}default:return{}}}}},OE=new Set(["left","top"]);async function I6(t,e){const{placement:n,platform:s,elements:i}=t,r=await(s.isRTL==null?void 0:s.isRTL(i.floating)),a=ri(n),o=No(n),l=gs(n)==="y",c=OE.has(a)?-1:1,u=r&&l?-1:1,d=ii(e,t);let{mainAxis:h,crossAxis:f,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&typeof m=="number"&&(f=o==="end"?m*-1:m),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}const L6=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,s;const{x:i,y:r,placement:a,middlewareData:o}=e,l=await I6(e,t);return a===((n=o.offset)==null?void 0:n.placement)&&(s=o.arrow)!=null&&s.alignmentOffset?{}:{x:i+l.x,y:r+l.y,data:{...l,placement:a}}}}},V6=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:s,placement:i,platform:r}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:y=>{let{x:v,y:_}=y;return{x:v,y:_}}},...c}=ii(t,e),u={x:n,y:s},d=await r.detectOverflow(e,c),h=gs(ri(i)),f=Zy(h);let m=u[f],g=u[h];if(a){const y=f==="y"?"top":"left",v=f==="y"?"bottom":"right",_=m+d[y],S=m-d[v];m=Fm(_,m,S)}if(o){const y=h==="y"?"top":"left",v=h==="y"?"bottom":"right",_=g+d[y],S=g-d[v];g=Fm(_,g,S)}const b=l.fn({...e,[f]:m,[h]:g});return{...b,data:{x:b.x-n,y:b.y-s,enabled:{[f]:a,[h]:o}}}}}},z6=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:s,placement:i,rects:r,middlewareData:a}=e,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=ii(t,e),u={x:n,y:s},d=gs(i),h=Zy(d);let f=u[h],m=u[d];const g=ii(o,e),b=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const _=h==="y"?"height":"width",S=r.reference[h]-r.floating[_]+b.mainAxis,w=r.reference[h]+r.reference[_]-b.mainAxis;f<S?f=S:f>w&&(f=w)}if(c){var y,v;const _=h==="y"?"width":"height",S=OE.has(ri(i)),w=r.reference[d]-r.floating[_]+(S&&((y=a.offset)==null?void 0:y[d])||0)+(S?0:b.crossAxis),E=r.reference[d]+r.reference[_]+(S?0:((v=a.offset)==null?void 0:v[d])||0)-(S?b.crossAxis:0);m<w?m=w:m>E&&(m=E)}return{[h]:f,[d]:m}}}},F6=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,s;const{placement:i,rects:r,platform:a,elements:o}=e,{apply:l=()=>{},...c}=ii(t,e),u=await a.detectOverflow(e,c),d=ri(i),h=No(i),f=gs(i)==="y",{width:m,height:g}=r.floating;let b,y;d==="top"||d==="bottom"?(b=d,y=h===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(y=d,b=h==="end"?"top":"bottom");const v=g-u.top-u.bottom,_=m-u.left-u.right,S=nr(g-u[b],v),w=nr(m-u[y],_),E=!e.middlewareData.shift;let T=S,C=w;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(C=_),(s=e.middlewareData.shift)!=null&&s.enabled.y&&(T=v),E&&!h){const A=pn(u.left,0),k=pn(u.right,0),O=pn(u.top,0),P=pn(u.bottom,0);f?C=m-2*(A!==0||k!==0?A+k:pn(u.left,u.right)):T=g-2*(O!==0||P!==0?O+P:pn(u.top,u.bottom))}await l({...e,availableWidth:C,availableHeight:T});const N=await a.getDimensions(o.floating);return m!==N.width||g!==N.height?{reset:{rects:!0}}:{}}}};function wh(){return typeof window<"u"}function Mo(t){return jE(t)?(t.nodeName||"").toLowerCase():"#document"}function Cn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ms(t){var e;return(e=(jE(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function jE(t){return wh()?t instanceof Node||t instanceof Cn(t).Node:!1}function ns(t){return wh()?t instanceof Element||t instanceof Cn(t).Element:!1}function Cs(t){return wh()?t instanceof HTMLElement||t instanceof Cn(t).HTMLElement:!1}function l1(t){return!wh()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Cn(t).ShadowRoot}const H6=new Set(["inline","contents"]);function fc(t){const{overflow:e,overflowX:n,overflowY:s,display:i}=ss(t);return/auto|scroll|overlay|hidden|clip/.test(e+s+n)&&!H6.has(i)}const U6=new Set(["table","td","th"]);function G6(t){return U6.has(Mo(t))}const q6=[":popover-open",":modal"];function Ch(t){return q6.some(e=>{try{return t.matches(e)}catch{return!1}})}const W6=["transform","translate","scale","rotate","perspective"],$6=["transform","translate","scale","rotate","perspective","filter"],Y6=["paint","layout","strict","content"];function t0(t){const e=n0(),n=ns(t)?ss(t):t;return W6.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||$6.some(s=>(n.willChange||"").includes(s))||Y6.some(s=>(n.contain||"").includes(s))}function K6(t){let e=sr(t);for(;Cs(e)&&!lo(e);){if(t0(e))return e;if(Ch(e))return null;e=sr(e)}return null}function n0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const X6=new Set(["html","body","#document"]);function lo(t){return X6.has(Mo(t))}function ss(t){return Cn(t).getComputedStyle(t)}function Th(t){return ns(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function sr(t){if(Mo(t)==="html")return t;const e=t.assignedSlot||t.parentNode||l1(t)&&t.host||Ms(t);return l1(e)?e.host:e}function PE(t){const e=sr(t);return lo(e)?t.ownerDocument?t.ownerDocument.body:t.body:Cs(e)&&fc(e)?e:PE(e)}function Gl(t,e,n){var s;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=PE(t),r=i===((s=t.ownerDocument)==null?void 0:s.body),a=Cn(i);if(r){const o=Um(a);return e.concat(a,a.visualViewport||[],fc(i)?i:[],o&&n?Gl(o):[])}return e.concat(i,Gl(i,[],n))}function Um(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function BE(t){const e=ss(t);let n=parseFloat(e.width)||0,s=parseFloat(e.height)||0;const i=Cs(t),r=i?t.offsetWidth:n,a=i?t.offsetHeight:s,o=Td(n)!==r||Td(s)!==a;return o&&(n=r,s=a),{width:n,height:s,$:o}}function s0(t){return ns(t)?t:t.contextElement}function $a(t){const e=s0(t);if(!Cs(e))return xs(1);const n=e.getBoundingClientRect(),{width:s,height:i,$:r}=BE(e);let a=(r?Td(n.width):n.width)/s,o=(r?Td(n.height):n.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const Q6=xs(0);function IE(t){const e=Cn(t);return!n0()||!e.visualViewport?Q6:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Z6(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Cn(t)?!1:e}function Hr(t,e,n,s){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),r=s0(t);let a=xs(1);e&&(s?ns(s)&&(a=$a(s)):a=$a(t));const o=Z6(r,n,s)?IE(r):xs(0);let l=(i.left+o.x)/a.x,c=(i.top+o.y)/a.y,u=i.width/a.x,d=i.height/a.y;if(r){const h=Cn(r),f=s&&ns(s)?Cn(s):s;let m=h,g=Um(m);for(;g&&s&&f!==m;){const b=$a(g),y=g.getBoundingClientRect(),v=ss(g),_=y.left+(g.clientLeft+parseFloat(v.paddingLeft))*b.x,S=y.top+(g.clientTop+parseFloat(v.paddingTop))*b.y;l*=b.x,c*=b.y,u*=b.x,d*=b.y,l+=_,c+=S,m=Cn(g),g=Um(m)}}return Ad({width:u,height:d,x:l,y:c})}function Eh(t,e){const n=Th(t).scrollLeft;return e?e.left+n:Hr(Ms(t)).left+n}function LE(t,e){const n=t.getBoundingClientRect(),s=n.left+e.scrollLeft-Eh(t,n),i=n.top+e.scrollTop;return{x:s,y:i}}function J6(t){let{elements:e,rect:n,offsetParent:s,strategy:i}=t;const r=i==="fixed",a=Ms(s),o=e?Ch(e.floating):!1;if(s===a||o&&r)return n;let l={scrollLeft:0,scrollTop:0},c=xs(1);const u=xs(0),d=Cs(s);if((d||!d&&!r)&&((Mo(s)!=="body"||fc(a))&&(l=Th(s)),Cs(s))){const f=Hr(s);c=$a(s),u.x=f.x+s.clientLeft,u.y=f.y+s.clientTop}const h=a&&!d&&!r?LE(a,l):xs(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}}function eB(t){return Array.from(t.getClientRects())}function tB(t){const e=Ms(t),n=Th(t),s=t.ownerDocument.body,i=pn(e.scrollWidth,e.clientWidth,s.scrollWidth,s.clientWidth),r=pn(e.scrollHeight,e.clientHeight,s.scrollHeight,s.clientHeight);let a=-n.scrollLeft+Eh(t);const o=-n.scrollTop;return ss(s).direction==="rtl"&&(a+=pn(e.clientWidth,s.clientWidth)-i),{width:i,height:r,x:a,y:o}}const c1=25;function nB(t,e){const n=Cn(t),s=Ms(t),i=n.visualViewport;let r=s.clientWidth,a=s.clientHeight,o=0,l=0;if(i){r=i.width,a=i.height;const u=n0();(!u||u&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}const c=Eh(s);if(c<=0){const u=s.ownerDocument,d=u.body,h=getComputedStyle(d),f=u.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,m=Math.abs(s.clientWidth-d.clientWidth-f);m<=c1&&(r-=m)}else c<=c1&&(r+=c);return{width:r,height:a,x:o,y:l}}const sB=new Set(["absolute","fixed"]);function iB(t,e){const n=Hr(t,!0,e==="fixed"),s=n.top+t.clientTop,i=n.left+t.clientLeft,r=Cs(t)?$a(t):xs(1),a=t.clientWidth*r.x,o=t.clientHeight*r.y,l=i*r.x,c=s*r.y;return{width:a,height:o,x:l,y:c}}function u1(t,e,n){let s;if(e==="viewport")s=nB(t,n);else if(e==="document")s=tB(Ms(t));else if(ns(e))s=iB(e,n);else{const i=IE(t);s={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Ad(s)}function VE(t,e){const n=sr(t);return n===e||!ns(n)||lo(n)?!1:ss(n).position==="fixed"||VE(n,e)}function rB(t,e){const n=e.get(t);if(n)return n;let s=Gl(t,[],!1).filter(o=>ns(o)&&Mo(o)!=="body"),i=null;const r=ss(t).position==="fixed";let a=r?sr(t):t;for(;ns(a)&&!lo(a);){const o=ss(a),l=t0(a);!l&&o.position==="fixed"&&(i=null),(r?!l&&!i:!l&&o.position==="static"&&!!i&&sB.has(i.position)||fc(a)&&!l&&VE(t,a))?s=s.filter(u=>u!==a):i=o,a=sr(a)}return e.set(t,s),s}function aB(t){let{element:e,boundary:n,rootBoundary:s,strategy:i}=t;const a=[...n==="clippingAncestors"?Ch(e)?[]:rB(e,this._c):[].concat(n),s],o=a[0],l=a.reduce((c,u)=>{const d=u1(e,u,i);return c.top=pn(d.top,c.top),c.right=nr(d.right,c.right),c.bottom=nr(d.bottom,c.bottom),c.left=pn(d.left,c.left),c},u1(e,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function oB(t){const{width:e,height:n}=BE(t);return{width:e,height:n}}function lB(t,e,n){const s=Cs(e),i=Ms(e),r=n==="fixed",a=Hr(t,!0,r,e);let o={scrollLeft:0,scrollTop:0};const l=xs(0);function c(){l.x=Eh(i)}if(s||!s&&!r)if((Mo(e)!=="body"||fc(i))&&(o=Th(e)),s){const f=Hr(e,!0,r,e);l.x=f.x+e.clientLeft,l.y=f.y+e.clientTop}else i&&c();r&&!s&&i&&c();const u=i&&!s&&!r?LE(i,o):xs(0),d=a.left+o.scrollLeft-l.x-u.x,h=a.top+o.scrollTop-l.y-u.y;return{x:d,y:h,width:a.width,height:a.height}}function hp(t){return ss(t).position==="static"}function d1(t,e){if(!Cs(t)||ss(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ms(t)===n&&(n=n.ownerDocument.body),n}function zE(t,e){const n=Cn(t);if(Ch(t))return n;if(!Cs(t)){let i=sr(t);for(;i&&!lo(i);){if(ns(i)&&!hp(i))return i;i=sr(i)}return n}let s=d1(t,e);for(;s&&G6(s)&&hp(s);)s=d1(s,e);return s&&lo(s)&&hp(s)&&!t0(s)?n:s||K6(t)||n}const cB=async function(t){const e=this.getOffsetParent||zE,n=this.getDimensions,s=await n(t.floating);return{reference:lB(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function uB(t){return ss(t).direction==="rtl"}const dB={convertOffsetParentRelativeRectToViewportRelativeRect:J6,getDocumentElement:Ms,getClippingRect:aB,getOffsetParent:zE,getElementRects:cB,getClientRects:eB,getDimensions:oB,getScale:$a,isElement:ns,isRTL:uB};function FE(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function hB(t,e){let n=null,s;const i=Ms(t);function r(){var o;clearTimeout(s),(o=n)==null||o.disconnect(),n=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),r();const c=t.getBoundingClientRect(),{left:u,top:d,width:h,height:f}=c;if(o||e(),!h||!f)return;const m=au(d),g=au(i.clientWidth-(u+h)),b=au(i.clientHeight-(d+f)),y=au(u),_={rootMargin:-m+"px "+-g+"px "+-b+"px "+-y+"px",threshold:pn(0,nr(1,l))||1};let S=!0;function w(E){const T=E[0].intersectionRatio;if(T!==l){if(!S)return a();T?a(!1,T):s=setTimeout(()=>{a(!1,1e-7)},1e3)}T===1&&!FE(c,t.getBoundingClientRect())&&a(),S=!1}try{n=new IntersectionObserver(w,{..._,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,_)}n.observe(t)}return a(!0),r}function fB(t,e,n,s){s===void 0&&(s={});const{ancestorScroll:i=!0,ancestorResize:r=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=s,c=s0(t),u=i||r?[...c?Gl(c):[],...Gl(e)]:[];u.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),r&&y.addEventListener("resize",n)});const d=c&&o?hB(c,n):null;let h=-1,f=null;a&&(f=new ResizeObserver(y=>{let[v]=y;v&&v.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var _;(_=f)==null||_.observe(e)})),n()}),c&&!l&&f.observe(c),f.observe(e));let m,g=l?Hr(t):null;l&&b();function b(){const y=Hr(t);g&&!FE(g,y)&&n(),g=y,m=requestAnimationFrame(b)}return n(),()=>{var y;u.forEach(v=>{i&&v.removeEventListener("scroll",n),r&&v.removeEventListener("resize",n)}),d==null||d(),(y=f)==null||y.disconnect(),f=null,l&&cancelAnimationFrame(m)}}const pB=L6,mB=V6,gB=P6,yB=F6,vB=B6,h1=j6,bB=z6,xB=(t,e,n)=>{const s=new Map,i={platform:dB,...n},r={...i.platform,_c:s};return O6(t,e,{...i,platform:r})};var _B=typeof document<"u",SB=function(){},Vu=_B?x.useLayoutEffect:SB;function kd(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,s,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(s=n;s--!==0;)if(!kd(t[s],e[s]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(e,i[s]))return!1;for(s=n;s--!==0;){const r=i[s];if(!(r==="_owner"&&t.$$typeof)&&!kd(t[r],e[r]))return!1}return!0}return t!==t&&e!==e}function HE(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function f1(t,e){const n=HE(t);return Math.round(e*n)/n}function fp(t){const e=x.useRef(t);return Vu(()=>{e.current=t}),e}function wB(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:s=[],platform:i,elements:{reference:r,floating:a}={},transform:o=!0,whileElementsMounted:l,open:c}=t,[u,d]=x.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,f]=x.useState(s);kd(h,s)||f(s);const[m,g]=x.useState(null),[b,y]=x.useState(null),v=x.useCallback(M=>{M!==E.current&&(E.current=M,g(M))},[]),_=x.useCallback(M=>{M!==T.current&&(T.current=M,y(M))},[]),S=r||m,w=a||b,E=x.useRef(null),T=x.useRef(null),C=x.useRef(u),N=l!=null,A=fp(l),k=fp(i),O=fp(c),P=x.useCallback(()=>{if(!E.current||!T.current)return;const M={placement:e,strategy:n,middleware:h};k.current&&(M.platform=k.current),xB(E.current,T.current,M).then(B=>{const z={...B,isPositioned:O.current!==!1};j.current&&!kd(C.current,z)&&(C.current=z,vo.flushSync(()=>{d(z)}))})},[h,e,n,k,O]);Vu(()=>{c===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,d(M=>({...M,isPositioned:!1})))},[c]);const j=x.useRef(!1);Vu(()=>(j.current=!0,()=>{j.current=!1}),[]),Vu(()=>{if(S&&(E.current=S),w&&(T.current=w),S&&w){if(A.current)return A.current(S,w,P);P()}},[S,w,P,A,N]);const I=x.useMemo(()=>({reference:E,floating:T,setReference:v,setFloating:_}),[v,_]),R=x.useMemo(()=>({reference:S,floating:w}),[S,w]),D=x.useMemo(()=>{const M={position:n,left:0,top:0};if(!R.floating)return M;const B=f1(R.floating,u.x),z=f1(R.floating,u.y);return o?{...M,transform:"translate("+B+"px, "+z+"px)",...HE(R.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:z}},[n,o,R.floating,u.x,u.y]);return x.useMemo(()=>({...u,update:P,refs:I,elements:R,floatingStyles:D}),[u,P,I,R,D])}const CB=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:s,padding:i}=typeof t=="function"?t(n):t;return s&&e(s)?s.current!=null?h1({element:s.current,padding:i}).fn(n):{}:s?h1({element:s,padding:i}).fn(n):{}}}},TB=(t,e)=>({...pB(t),options:[t,e]}),EB=(t,e)=>({...mB(t),options:[t,e]}),AB=(t,e)=>({...bB(t),options:[t,e]}),kB=(t,e)=>({...gB(t),options:[t,e]}),NB=(t,e)=>({...yB(t),options:[t,e]}),MB=(t,e)=>({...vB(t),options:[t,e]}),RB=(t,e)=>({...CB(t),options:[t,e]});var DB="Arrow",UE=x.forwardRef((t,e)=>{const{children:n,width:s=10,height:i=5,...r}=t;return p.jsx(ke.svg,{...r,ref:e,width:s,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});UE.displayName=DB;var OB=UE,i0="Popper",[GE,qE]=ea(i0),[jB,WE]=GE(i0),$E=t=>{const{__scopePopper:e,children:n}=t,[s,i]=x.useState(null);return p.jsx(jB,{scope:e,anchor:s,onAnchorChange:i,children:n})};$E.displayName=i0;var YE="PopperAnchor",KE=x.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:s,...i}=t,r=WE(YE,n),a=x.useRef(null),o=We(e,a),l=x.useRef(null);return x.useEffect(()=>{const c=l.current;l.current=(s==null?void 0:s.current)||a.current,c!==l.current&&r.onAnchorChange(l.current)}),s?null:p.jsx(ke.div,{...i,ref:o})});KE.displayName=YE;var r0="PopperContent",[PB,BB]=GE(r0),XE=x.forwardRef((t,e)=>{var L,V,le,fe,he,me;const{__scopePopper:n,side:s="bottom",sideOffset:i=0,align:r="center",alignOffset:a=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:f="optimized",onPlaced:m,...g}=t,b=WE(r0,n),[y,v]=x.useState(null),_=We(e,Mt=>v(Mt)),[S,w]=x.useState(null),E=Qy(S),T=(E==null?void 0:E.width)??0,C=(E==null?void 0:E.height)??0,N=s+(r!=="center"?"-"+r:""),A=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},k=Array.isArray(c)?c:[c],O=k.length>0,P={padding:A,boundary:k.filter(LB),altBoundary:O},{refs:j,floatingStyles:I,placement:R,isPositioned:D,middlewareData:M}=wB({strategy:"fixed",placement:N,whileElementsMounted:(...Mt)=>fB(...Mt,{animationFrame:f==="always"}),elements:{reference:b.anchor},middleware:[TB({mainAxis:i+C,alignmentAxis:a}),l&&EB({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?AB():void 0,...P}),l&&kB({...P}),NB({...P,apply:({elements:Mt,rects:Zt,availableWidth:Y,availableHeight:te})=>{const{width:He,height:G}=Zt.reference,W=Mt.floating.style;W.setProperty("--radix-popper-available-width",`${Y}px`),W.setProperty("--radix-popper-available-height",`${te}px`),W.setProperty("--radix-popper-anchor-width",`${He}px`),W.setProperty("--radix-popper-anchor-height",`${G}px`)}}),S&&RB({element:S,padding:o}),VB({arrowWidth:T,arrowHeight:C}),h&&MB({strategy:"referenceHidden",...P})]}),[B,z]=JE(R),$=tr(m);cn(()=>{D&&($==null||$())},[D,$]);const ne=(L=M.arrow)==null?void 0:L.x,re=(V=M.arrow)==null?void 0:V.y,ie=((le=M.arrow)==null?void 0:le.centerOffset)!==0,[K,ee]=x.useState();return cn(()=>{y&&ee(window.getComputedStyle(y).zIndex)},[y]),p.jsx("div",{ref:j.setFloating,"data-radix-popper-content-wrapper":"",style:{...I,transform:D?I.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:K,"--radix-popper-transform-origin":[(fe=M.transformOrigin)==null?void 0:fe.x,(he=M.transformOrigin)==null?void 0:he.y].join(" "),...((me=M.hide)==null?void 0:me.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:p.jsx(PB,{scope:n,placedSide:B,onArrowChange:w,arrowX:ne,arrowY:re,shouldHideArrow:ie,children:p.jsx(ke.div,{"data-side":B,"data-align":z,...g,ref:_,style:{...g.style,animation:D?void 0:"none"}})})})});XE.displayName=r0;var QE="PopperArrow",IB={top:"bottom",right:"left",bottom:"top",left:"right"},ZE=x.forwardRef(function(e,n){const{__scopePopper:s,...i}=e,r=BB(QE,s),a=IB[r.placedSide];return p.jsx("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:p.jsx(OB,{...i,ref:n,style:{...i.style,display:"block"}})})});ZE.displayName=QE;function LB(t){return t!==null}var VB=t=>({name:"transformOrigin",options:t,fn(e){var b,y,v;const{placement:n,rects:s,middlewareData:i}=e,a=((b=i.arrow)==null?void 0:b.centerOffset)!==0,o=a?0:t.arrowWidth,l=a?0:t.arrowHeight,[c,u]=JE(n),d={start:"0%",center:"50%",end:"100%"}[u],h=(((y=i.arrow)==null?void 0:y.x)??0)+o/2,f=(((v=i.arrow)==null?void 0:v.y)??0)+l/2;let m="",g="";return c==="bottom"?(m=a?d:`${h}px`,g=`${-l}px`):c==="top"?(m=a?d:`${h}px`,g=`${s.floating.height+l}px`):c==="right"?(m=`${-l}px`,g=a?d:`${f}px`):c==="left"&&(m=`${s.floating.width+l}px`,g=a?d:`${f}px`),{data:{x:m,y:g}}}});function JE(t){const[e,n="center"]=t.split("-");return[e,n]}var zB=$E,FB=KE,HB=XE,UB=ZE,pp="rovingFocusGroup.onEntryFocus",GB={bubbles:!1,cancelable:!0},pc="RovingFocusGroup",[Gm,eA,qB]=Ky(pc),[WB,tA]=ea(pc,[qB]),[$B,YB]=WB(pc),nA=x.forwardRef((t,e)=>p.jsx(Gm.Provider,{scope:t.__scopeRovingFocusGroup,children:p.jsx(Gm.Slot,{scope:t.__scopeRovingFocusGroup,children:p.jsx(KB,{...t,ref:e})})}));nA.displayName=pc;var KB=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:i=!1,dir:r,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...d}=t,h=x.useRef(null),f=We(e,h),m=_h(r),[g,b]=er({prop:a,defaultProp:o??null,onChange:l,caller:pc}),[y,v]=x.useState(!1),_=tr(c),S=eA(n),w=x.useRef(!1),[E,T]=x.useState(0);return x.useEffect(()=>{const C=h.current;if(C)return C.addEventListener(pp,_),()=>C.removeEventListener(pp,_)},[_]),p.jsx($B,{scope:n,orientation:s,dir:m,loop:i,currentTabStopId:g,onItemFocus:x.useCallback(C=>b(C),[b]),onItemShiftTab:x.useCallback(()=>v(!0),[]),onFocusableItemAdd:x.useCallback(()=>T(C=>C+1),[]),onFocusableItemRemove:x.useCallback(()=>T(C=>C-1),[]),children:p.jsx(ke.div,{tabIndex:y||E===0?-1:0,"data-orientation":s,...d,ref:f,style:{outline:"none",...t.style},onMouseDown:Ae(t.onMouseDown,()=>{w.current=!0}),onFocus:Ae(t.onFocus,C=>{const N=!w.current;if(C.target===C.currentTarget&&N&&!y){const A=new CustomEvent(pp,GB);if(C.currentTarget.dispatchEvent(A),!A.defaultPrevented){const k=S().filter(R=>R.focusable),O=k.find(R=>R.active),P=k.find(R=>R.id===g),I=[O,P,...k].filter(Boolean).map(R=>R.ref.current);rA(I,u)}}w.current=!1}),onBlur:Ae(t.onBlur,()=>v(!1))})})}),sA="RovingFocusGroupItem",iA=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:i=!1,tabStopId:r,children:a,...o}=t,l=xh(),c=r||l,u=YB(sA,n),d=u.currentTabStopId===c,h=eA(n),{onFocusableItemAdd:f,onFocusableItemRemove:m,currentTabStopId:g}=u;return x.useEffect(()=>{if(s)return f(),()=>m()},[s,f,m]),p.jsx(Gm.ItemSlot,{scope:n,id:c,focusable:s,active:i,children:p.jsx(ke.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...o,ref:e,onMouseDown:Ae(t.onMouseDown,b=>{s?u.onItemFocus(c):b.preventDefault()}),onFocus:Ae(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:Ae(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){u.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const y=ZB(b,u.orientation,u.dir);if(y!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let _=h().filter(S=>S.focusable).map(S=>S.ref.current);if(y==="last")_.reverse();else if(y==="prev"||y==="next"){y==="prev"&&_.reverse();const S=_.indexOf(b.currentTarget);_=u.loop?JB(_,S+1):_.slice(S+1)}setTimeout(()=>rA(_))}}),children:typeof a=="function"?a({isCurrentTabStop:d,hasTabStop:g!=null}):a})})});iA.displayName=sA;var XB={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function QB(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function ZB(t,e,n){const s=QB(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return XB[s]}function rA(t,e=!1){const n=document.activeElement;for(const s of t)if(s===n||(s.focus({preventScroll:e}),document.activeElement!==n))return}function JB(t,e){return t.map((n,s)=>t[(e+s)%t.length])}var eI=nA,tI=iA,nI="Label",aA=x.forwardRef((t,e)=>p.jsx(ke.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));aA.displayName=nI;var sI=aA;function Nd(t,[e,n]){return Math.min(n,Math.max(e,t))}var iI=[" ","Enter","ArrowUp","ArrowDown"],rI=[" ","Enter"],Ur="Select",[Ah,kh,aI]=Ky(Ur),[Ro]=ea(Ur,[aI,qE]),Nh=qE(),[oI,ur]=Ro(Ur),[lI,cI]=Ro(Ur),oA=t=>{const{__scopeSelect:e,children:n,open:s,defaultOpen:i,onOpenChange:r,value:a,defaultValue:o,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:h,required:f,form:m}=t,g=Nh(e),[b,y]=x.useState(null),[v,_]=x.useState(null),[S,w]=x.useState(!1),E=_h(c),[T,C]=er({prop:s,defaultProp:i??!1,onChange:r,caller:Ur}),[N,A]=er({prop:a,defaultProp:o,onChange:l,caller:Ur}),k=x.useRef(null),O=b?m||!!b.closest("form"):!0,[P,j]=x.useState(new Set),I=Array.from(P).map(R=>R.props.value).join(";");return p.jsx(zB,{...g,children:p.jsxs(oI,{required:f,scope:e,trigger:b,onTriggerChange:y,valueNode:v,onValueNodeChange:_,valueNodeHasChildren:S,onValueNodeHasChildrenChange:w,contentId:xh(),value:N,onValueChange:A,open:T,onOpenChange:C,dir:E,triggerPointerDownPosRef:k,disabled:h,children:[p.jsx(Ah.Provider,{scope:e,children:p.jsx(lI,{scope:t.__scopeSelect,onNativeOptionAdd:x.useCallback(R=>{j(D=>new Set(D).add(R))},[]),onNativeOptionRemove:x.useCallback(R=>{j(D=>{const M=new Set(D);return M.delete(R),M})},[]),children:n})}),O?p.jsxs(NA,{"aria-hidden":!0,required:f,tabIndex:-1,name:u,autoComplete:d,value:N,onChange:R=>A(R.target.value),disabled:h,form:m,children:[N===void 0?p.jsx("option",{value:""}):null,Array.from(P)]},I):null]})})};oA.displayName=Ur;var lA="SelectTrigger",cA=x.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:s=!1,...i}=t,r=Nh(n),a=ur(lA,n),o=a.disabled||s,l=We(e,a.onTriggerChange),c=kh(n),u=x.useRef("touch"),[d,h,f]=RA(g=>{const b=c().filter(_=>!_.disabled),y=b.find(_=>_.value===a.value),v=DA(b,g,y);v!==void 0&&a.onValueChange(v.value)}),m=g=>{o||(a.onOpenChange(!0),f()),g&&(a.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return p.jsx(FB,{asChild:!0,...r,children:p.jsx(ke.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":MA(a.value)?"":void 0,...i,ref:l,onClick:Ae(i.onClick,g=>{g.currentTarget.focus(),u.current!=="mouse"&&m(g)}),onPointerDown:Ae(i.onPointerDown,g=>{u.current=g.pointerType;const b=g.target;b.hasPointerCapture(g.pointerId)&&b.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(m(g),g.preventDefault())}),onKeyDown:Ae(i.onKeyDown,g=>{const b=d.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&h(g.key),!(b&&g.key===" ")&&iI.includes(g.key)&&(m(),g.preventDefault())})})})});cA.displayName=lA;var uA="SelectValue",dA=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:s,style:i,children:r,placeholder:a="",...o}=t,l=ur(uA,n),{onValueNodeHasChildrenChange:c}=l,u=r!==void 0,d=We(e,l.onValueNodeChange);return cn(()=>{c(u)},[c,u]),p.jsx(ke.span,{...o,ref:d,style:{pointerEvents:"none"},children:MA(l.value)?p.jsx(p.Fragment,{children:a}):r})});dA.displayName=uA;var uI="SelectIcon",hA=x.forwardRef((t,e)=>{const{__scopeSelect:n,children:s,...i}=t;return p.jsx(ke.span,{"aria-hidden":!0,...i,ref:e,children:s||""})});hA.displayName=uI;var dI="SelectPortal",fA=t=>p.jsx(wE,{asChild:!0,...t});fA.displayName=dI;var Gr="SelectContent",pA=x.forwardRef((t,e)=>{const n=ur(Gr,t.__scopeSelect),[s,i]=x.useState();if(cn(()=>{i(new DocumentFragment)},[]),!n.open){const r=s;return r?vo.createPortal(p.jsx(mA,{scope:t.__scopeSelect,children:p.jsx(Ah.Slot,{scope:t.__scopeSelect,children:p.jsx("div",{children:t.children})})}),r):null}return p.jsx(gA,{...t,ref:e})});pA.displayName=Gr;var Yn=10,[mA,dr]=Ro(Gr),hI="SelectContentImpl",fI=Ul("SelectContent.RemoveScroll"),gA=x.forwardRef((t,e)=>{const{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:r,onPointerDownOutside:a,side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:m,hideWhenDetached:g,avoidCollisions:b,...y}=t,v=ur(Gr,n),[_,S]=x.useState(null),[w,E]=x.useState(null),T=We(e,L=>S(L)),[C,N]=x.useState(null),[A,k]=x.useState(null),O=kh(n),[P,j]=x.useState(!1),I=x.useRef(!1);x.useEffect(()=>{if(_)return x6(_)},[_]),DP();const R=x.useCallback(L=>{const[V,...le]=O().map(me=>me.ref.current),[fe]=le.slice(-1),he=document.activeElement;for(const me of L)if(me===he||(me==null||me.scrollIntoView({block:"nearest"}),me===V&&w&&(w.scrollTop=0),me===fe&&w&&(w.scrollTop=w.scrollHeight),me==null||me.focus(),document.activeElement!==he))return},[O,w]),D=x.useCallback(()=>R([C,_]),[R,C,_]);x.useEffect(()=>{P&&D()},[P,D]);const{onOpenChange:M,triggerPointerDownPosRef:B}=v;x.useEffect(()=>{if(_){let L={x:0,y:0};const V=fe=>{var he,me;L={x:Math.abs(Math.round(fe.pageX)-(((he=B.current)==null?void 0:he.x)??0)),y:Math.abs(Math.round(fe.pageY)-(((me=B.current)==null?void 0:me.y)??0))}},le=fe=>{L.x<=10&&L.y<=10?fe.preventDefault():_.contains(fe.target)||M(!1),document.removeEventListener("pointermove",V),B.current=null};return B.current!==null&&(document.addEventListener("pointermove",V),document.addEventListener("pointerup",le,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",V),document.removeEventListener("pointerup",le,{capture:!0})}}},[_,M,B]),x.useEffect(()=>{const L=()=>M(!1);return window.addEventListener("blur",L),window.addEventListener("resize",L),()=>{window.removeEventListener("blur",L),window.removeEventListener("resize",L)}},[M]);const[z,$]=RA(L=>{const V=O().filter(he=>!he.disabled),le=V.find(he=>he.ref.current===document.activeElement),fe=DA(V,L,le);fe&&setTimeout(()=>fe.ref.current.focus())}),ne=x.useCallback((L,V,le)=>{const fe=!I.current&&!le;(v.value!==void 0&&v.value===V||fe)&&(N(L),fe&&(I.current=!0))},[v.value]),re=x.useCallback(()=>_==null?void 0:_.focus(),[_]),ie=x.useCallback((L,V,le)=>{const fe=!I.current&&!le;(v.value!==void 0&&v.value===V||fe)&&k(L)},[v.value]),K=s==="popper"?qm:yA,ee=K===qm?{side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:m,hideWhenDetached:g,avoidCollisions:b}:{};return p.jsx(mA,{scope:n,content:_,viewport:w,onViewportChange:E,itemRefCallback:ne,selectedItem:C,onItemLeave:re,itemTextRefCallback:ie,focusSelectedItem:D,selectedItemText:A,position:s,isPositioned:P,searchRef:z,children:p.jsx(ME,{as:fI,allowPinchZoom:!0,children:p.jsx(_E,{asChild:!0,trapped:v.open,onMountAutoFocus:L=>{L.preventDefault()},onUnmountAutoFocus:Ae(i,L=>{var V;(V=v.trigger)==null||V.focus({preventScroll:!0}),L.preventDefault()}),children:p.jsx(bE,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:L=>L.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:p.jsx(K,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:L=>L.preventDefault(),...y,...ee,onPlaced:()=>j(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:Ae(y.onKeyDown,L=>{const V=L.ctrlKey||L.altKey||L.metaKey;if(L.key==="Tab"&&L.preventDefault(),!V&&L.key.length===1&&$(L.key),["ArrowUp","ArrowDown","Home","End"].includes(L.key)){let fe=O().filter(he=>!he.disabled).map(he=>he.ref.current);if(["ArrowUp","End"].includes(L.key)&&(fe=fe.slice().reverse()),["ArrowUp","ArrowDown"].includes(L.key)){const he=L.target,me=fe.indexOf(he);fe=fe.slice(me+1)}setTimeout(()=>R(fe)),L.preventDefault()}})})})})})})});gA.displayName=hI;var pI="SelectItemAlignedPosition",yA=x.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:s,...i}=t,r=ur(Gr,n),a=dr(Gr,n),[o,l]=x.useState(null),[c,u]=x.useState(null),d=We(e,T=>u(T)),h=kh(n),f=x.useRef(!1),m=x.useRef(!0),{viewport:g,selectedItem:b,selectedItemText:y,focusSelectedItem:v}=a,_=x.useCallback(()=>{if(r.trigger&&r.valueNode&&o&&c&&g&&b&&y){const T=r.trigger.getBoundingClientRect(),C=c.getBoundingClientRect(),N=r.valueNode.getBoundingClientRect(),A=y.getBoundingClientRect();if(r.dir!=="rtl"){const he=A.left-C.left,me=N.left-he,Mt=T.left-me,Zt=T.width+Mt,Y=Math.max(Zt,C.width),te=window.innerWidth-Yn,He=Nd(me,[Yn,Math.max(Yn,te-Y)]);o.style.minWidth=Zt+"px",o.style.left=He+"px"}else{const he=C.right-A.right,me=window.innerWidth-N.right-he,Mt=window.innerWidth-T.right-me,Zt=T.width+Mt,Y=Math.max(Zt,C.width),te=window.innerWidth-Yn,He=Nd(me,[Yn,Math.max(Yn,te-Y)]);o.style.minWidth=Zt+"px",o.style.right=He+"px"}const k=h(),O=window.innerHeight-Yn*2,P=g.scrollHeight,j=window.getComputedStyle(c),I=parseInt(j.borderTopWidth,10),R=parseInt(j.paddingTop,10),D=parseInt(j.borderBottomWidth,10),M=parseInt(j.paddingBottom,10),B=I+R+P+M+D,z=Math.min(b.offsetHeight*5,B),$=window.getComputedStyle(g),ne=parseInt($.paddingTop,10),re=parseInt($.paddingBottom,10),ie=T.top+T.height/2-Yn,K=O-ie,ee=b.offsetHeight/2,L=b.offsetTop+ee,V=I+R+L,le=B-V;if(V<=ie){const he=k.length>0&&b===k[k.length-1].ref.current;o.style.bottom="0px";const me=c.clientHeight-g.offsetTop-g.offsetHeight,Mt=Math.max(K,ee+(he?re:0)+me+D),Zt=V+Mt;o.style.height=Zt+"px"}else{const he=k.length>0&&b===k[0].ref.current;o.style.top="0px";const Mt=Math.max(ie,I+g.offsetTop+(he?ne:0)+ee)+le;o.style.height=Mt+"px",g.scrollTop=V-ie+g.offsetTop}o.style.margin=`${Yn}px 0`,o.style.minHeight=z+"px",o.style.maxHeight=O+"px",s==null||s(),requestAnimationFrame(()=>f.current=!0)}},[h,r.trigger,r.valueNode,o,c,g,b,y,r.dir,s]);cn(()=>_(),[_]);const[S,w]=x.useState();cn(()=>{c&&w(window.getComputedStyle(c).zIndex)},[c]);const E=x.useCallback(T=>{T&&m.current===!0&&(_(),v==null||v(),m.current=!1)},[_,v]);return p.jsx(gI,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:f,onScrollButtonChange:E,children:p.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:p.jsx(ke.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});yA.displayName=pI;var mI="SelectPopperPosition",qm=x.forwardRef((t,e)=>{const{__scopeSelect:n,align:s="start",collisionPadding:i=Yn,...r}=t,a=Nh(n);return p.jsx(HB,{...a,...r,ref:e,align:s,collisionPadding:i,style:{boxSizing:"border-box",...r.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});qm.displayName=mI;var[gI,a0]=Ro(Gr,{}),Wm="SelectViewport",vA=x.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:s,...i}=t,r=dr(Wm,n),a=a0(Wm,n),o=We(e,r.onViewportChange),l=x.useRef(0);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),p.jsx(Ah.Slot,{scope:n,children:p.jsx(ke.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:Ae(i.onScroll,c=>{const u=c.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=a;if(h!=null&&h.current&&d){const f=Math.abs(l.current-u.scrollTop);if(f>0){const m=window.innerHeight-Yn*2,g=parseFloat(d.style.minHeight),b=parseFloat(d.style.height),y=Math.max(g,b);if(y<m){const v=y+f,_=Math.min(m,v),S=v-_;d.style.height=_+"px",d.style.bottom==="0px"&&(u.scrollTop=S>0?S:0,d.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});vA.displayName=Wm;var bA="SelectGroup",[yI,vI]=Ro(bA),bI=x.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t,i=xh();return p.jsx(yI,{scope:n,id:i,children:p.jsx(ke.div,{role:"group","aria-labelledby":i,...s,ref:e})})});bI.displayName=bA;var xA="SelectLabel",xI=x.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t,i=vI(xA,n);return p.jsx(ke.div,{id:i.id,...s,ref:e})});xI.displayName=xA;var Md="SelectItem",[_I,_A]=Ro(Md),SA=x.forwardRef((t,e)=>{const{__scopeSelect:n,value:s,disabled:i=!1,textValue:r,...a}=t,o=ur(Md,n),l=dr(Md,n),c=o.value===s,[u,d]=x.useState(r??""),[h,f]=x.useState(!1),m=We(e,v=>{var _;return(_=l.itemRefCallback)==null?void 0:_.call(l,v,s,i)}),g=xh(),b=x.useRef("touch"),y=()=>{i||(o.onValueChange(s),o.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return p.jsx(_I,{scope:n,value:s,disabled:i,textId:g,isSelected:c,onItemTextChange:x.useCallback(v=>{d(_=>_||((v==null?void 0:v.textContent)??"").trim())},[]),children:p.jsx(Ah.ItemSlot,{scope:n,value:s,disabled:i,textValue:u,children:p.jsx(ke.div,{role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":c&&h,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:m,onFocus:Ae(a.onFocus,()=>f(!0)),onBlur:Ae(a.onBlur,()=>f(!1)),onClick:Ae(a.onClick,()=>{b.current!=="mouse"&&y()}),onPointerUp:Ae(a.onPointerUp,()=>{b.current==="mouse"&&y()}),onPointerDown:Ae(a.onPointerDown,v=>{b.current=v.pointerType}),onPointerMove:Ae(a.onPointerMove,v=>{var _;b.current=v.pointerType,i?(_=l.onItemLeave)==null||_.call(l):b.current==="mouse"&&v.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Ae(a.onPointerLeave,v=>{var _;v.currentTarget===document.activeElement&&((_=l.onItemLeave)==null||_.call(l))}),onKeyDown:Ae(a.onKeyDown,v=>{var S;((S=l.searchRef)==null?void 0:S.current)!==""&&v.key===" "||(rI.includes(v.key)&&y(),v.key===" "&&v.preventDefault())})})})})});SA.displayName=Md;var il="SelectItemText",wA=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:s,style:i,...r}=t,a=ur(il,n),o=dr(il,n),l=_A(il,n),c=cI(il,n),[u,d]=x.useState(null),h=We(e,y=>d(y),l.onItemTextChange,y=>{var v;return(v=o.itemTextRefCallback)==null?void 0:v.call(o,y,l.value,l.disabled)}),f=u==null?void 0:u.textContent,m=x.useMemo(()=>p.jsx("option",{value:l.value,disabled:l.disabled,children:f},l.value),[l.disabled,l.value,f]),{onNativeOptionAdd:g,onNativeOptionRemove:b}=c;return cn(()=>(g(m),()=>b(m)),[g,b,m]),p.jsxs(p.Fragment,{children:[p.jsx(ke.span,{id:l.textId,...r,ref:h}),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?vo.createPortal(r.children,a.valueNode):null]})});wA.displayName=il;var CA="SelectItemIndicator",TA=x.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t;return _A(CA,n).isSelected?p.jsx(ke.span,{"aria-hidden":!0,...s,ref:e}):null});TA.displayName=CA;var $m="SelectScrollUpButton",EA=x.forwardRef((t,e)=>{const n=dr($m,t.__scopeSelect),s=a0($m,t.__scopeSelect),[i,r]=x.useState(!1),a=We(e,s.onScrollButtonChange);return cn(()=>{if(n.viewport&&n.isPositioned){let o=function(){const c=l.scrollTop>0;r(c)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?p.jsx(kA,{...t,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});EA.displayName=$m;var Ym="SelectScrollDownButton",AA=x.forwardRef((t,e)=>{const n=dr(Ym,t.__scopeSelect),s=a0(Ym,t.__scopeSelect),[i,r]=x.useState(!1),a=We(e,s.onScrollButtonChange);return cn(()=>{if(n.viewport&&n.isPositioned){let o=function(){const c=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<c;r(u)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),i?p.jsx(kA,{...t,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});AA.displayName=Ym;var kA=x.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:s,...i}=t,r=dr("SelectScrollButton",n),a=x.useRef(null),o=kh(n),l=x.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return x.useEffect(()=>()=>l(),[l]),cn(()=>{var u;const c=o().find(d=>d.ref.current===document.activeElement);(u=c==null?void 0:c.ref.current)==null||u.scrollIntoView({block:"nearest"})},[o]),p.jsx(ke.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:Ae(i.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(s,50))}),onPointerMove:Ae(i.onPointerMove,()=>{var c;(c=r.onItemLeave)==null||c.call(r),a.current===null&&(a.current=window.setInterval(s,50))}),onPointerLeave:Ae(i.onPointerLeave,()=>{l()})})}),SI="SelectSeparator",wI=x.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t;return p.jsx(ke.div,{"aria-hidden":!0,...s,ref:e})});wI.displayName=SI;var Km="SelectArrow",CI=x.forwardRef((t,e)=>{const{__scopeSelect:n,...s}=t,i=Nh(n),r=ur(Km,n),a=dr(Km,n);return r.open&&a.position==="popper"?p.jsx(UB,{...i,...s,ref:e}):null});CI.displayName=Km;var TI="SelectBubbleInput",NA=x.forwardRef(({__scopeSelect:t,value:e,...n},s)=>{const i=x.useRef(null),r=We(s,i),a=Xy(e);return x.useEffect(()=>{const o=i.current;if(!o)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==e&&u){const d=new Event("change",{bubbles:!0});u.call(o,e),o.dispatchEvent(d)}},[a,e]),p.jsx(ke.select,{...n,style:{...yE,...n.style},ref:r,defaultValue:e})});NA.displayName=TI;function MA(t){return t===""||t===void 0}function RA(t){const e=tr(t),n=x.useRef(""),s=x.useRef(0),i=x.useCallback(a=>{const o=n.current+a;e(o),function l(c){n.current=c,window.clearTimeout(s.current),c!==""&&(s.current=window.setTimeout(()=>l(""),1e3))}(o)},[e]),r=x.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,i,r]}function DA(t,e,n){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,r=n?t.indexOf(n):-1;let a=EI(t,Math.max(r,0));i.length===1&&(a=a.filter(c=>c!==n));const l=a.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function EI(t,e){return t.map((n,s)=>t[(e+s)%t.length])}var AI=oA,kI=cA,NI=dA,MI=hA,RI=fA,DI=pA,OI=vA,jI=SA,PI=wA,BI=TA,II=EA,LI=AA,OA=["PageUp","PageDown"],jA=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],PA={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Do="Slider",[Xm,VI,zI]=Ky(Do),[BA]=ea(Do,[zI]),[FI,Mh]=BA(Do),IA=x.forwardRef((t,e)=>{const{name:n,min:s=0,max:i=100,step:r=1,orientation:a="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:c=[s],value:u,onValueChange:d=()=>{},onValueCommit:h=()=>{},inverted:f=!1,form:m,...g}=t,b=x.useRef(new Set),y=x.useRef(0),_=a==="horizontal"?HI:UI,[S=[],w]=er({prop:u,defaultProp:c,onChange:k=>{var P;(P=[...b.current][y.current])==null||P.focus(),d(k)}}),E=x.useRef(S);function T(k){const O=YI(S,k);A(k,O)}function C(k){A(k,y.current)}function N(){const k=E.current[y.current];S[y.current]!==k&&h(S)}function A(k,O,{commit:P}={commit:!1}){const j=ZI(r),I=JI(Math.round((k-s)/r)*r+s,j),R=Nd(I,[s,i]);w((D=[])=>{const M=WI(D,R,O);if(QI(M,l*r)){y.current=M.indexOf(R);const B=String(M)!==String(D);return B&&P&&h(M),B?M:D}else return D})}return p.jsx(FI,{scope:t.__scopeSlider,name:n,disabled:o,min:s,max:i,valueIndexToChangeRef:y,thumbs:b.current,values:S,orientation:a,form:m,children:p.jsx(Xm.Provider,{scope:t.__scopeSlider,children:p.jsx(Xm.Slot,{scope:t.__scopeSlider,children:p.jsx(_,{"aria-disabled":o,"data-disabled":o?"":void 0,...g,ref:e,onPointerDown:Ae(g.onPointerDown,()=>{o||(E.current=S)}),min:s,max:i,inverted:f,onSlideStart:o?void 0:T,onSlideMove:o?void 0:C,onSlideEnd:o?void 0:N,onHomeKeyDown:()=>!o&&A(s,0,{commit:!0}),onEndKeyDown:()=>!o&&A(i,S.length-1,{commit:!0}),onStepKeyDown:({event:k,direction:O})=>{if(!o){const I=OA.includes(k.key)||k.shiftKey&&jA.includes(k.key)?10:1,R=y.current,D=S[R],M=r*I*O;A(D+M,R,{commit:!0})}}})})})})});IA.displayName=Do;var[LA,VA]=BA(Do,{startEdge:"left",endEdge:"right",size:"width",direction:1}),HI=x.forwardRef((t,e)=>{const{min:n,max:s,dir:i,inverted:r,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=t,[d,h]=x.useState(null),f=We(e,_=>h(_)),m=x.useRef(void 0),g=_h(i),b=g==="ltr",y=b&&!r||!b&&r;function v(_){const S=m.current||d.getBoundingClientRect(),w=[0,S.width],T=o0(w,y?[n,s]:[s,n]);return m.current=S,T(_-S.left)}return p.jsx(LA,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:p.jsx(zA,{dir:g,"data-orientation":"horizontal",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:_=>{const S=v(_.clientX);a==null||a(S)},onSlideMove:_=>{const S=v(_.clientX);o==null||o(S)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:_=>{const w=PA[y?"from-left":"from-right"].includes(_.key);c==null||c({event:_,direction:w?-1:1})}})})}),UI=x.forwardRef((t,e)=>{const{min:n,max:s,inverted:i,onSlideStart:r,onSlideMove:a,onSlideEnd:o,onStepKeyDown:l,...c}=t,u=x.useRef(null),d=We(e,u),h=x.useRef(void 0),f=!i;function m(g){const b=h.current||u.current.getBoundingClientRect(),y=[0,b.height],_=o0(y,f?[s,n]:[n,s]);return h.current=b,_(g-b.top)}return p.jsx(LA,{scope:t.__scopeSlider,startEdge:f?"bottom":"top",endEdge:f?"top":"bottom",size:"height",direction:f?1:-1,children:p.jsx(zA,{"data-orientation":"vertical",...c,ref:d,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const b=m(g.clientY);r==null||r(b)},onSlideMove:g=>{const b=m(g.clientY);a==null||a(b)},onSlideEnd:()=>{h.current=void 0,o==null||o()},onStepKeyDown:g=>{const y=PA[f?"from-bottom":"from-top"].includes(g.key);l==null||l({event:g,direction:y?-1:1})}})})}),zA=x.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:s,onSlideMove:i,onSlideEnd:r,onHomeKeyDown:a,onEndKeyDown:o,onStepKeyDown:l,...c}=t,u=Mh(Do,n);return p.jsx(ke.span,{...c,ref:e,onKeyDown:Ae(t.onKeyDown,d=>{d.key==="Home"?(a(d),d.preventDefault()):d.key==="End"?(o(d),d.preventDefault()):OA.concat(jA).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:Ae(t.onPointerDown,d=>{const h=d.target;h.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(h)?h.focus():s(d)}),onPointerMove:Ae(t.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&i(d)}),onPointerUp:Ae(t.onPointerUp,d=>{const h=d.target;h.hasPointerCapture(d.pointerId)&&(h.releasePointerCapture(d.pointerId),r(d))})})}),FA="SliderTrack",HA=x.forwardRef((t,e)=>{const{__scopeSlider:n,...s}=t,i=Mh(FA,n);return p.jsx(ke.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...s,ref:e})});HA.displayName=FA;var Qm="SliderRange",UA=x.forwardRef((t,e)=>{const{__scopeSlider:n,...s}=t,i=Mh(Qm,n),r=VA(Qm,n),a=x.useRef(null),o=We(e,a),l=i.values.length,c=i.values.map(h=>WA(h,i.min,i.max)),u=l>1?Math.min(...c):0,d=100-Math.max(...c);return p.jsx(ke.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...s,ref:o,style:{...t.style,[r.startEdge]:u+"%",[r.endEdge]:d+"%"}})});UA.displayName=Qm;var Zm="SliderThumb",GA=x.forwardRef((t,e)=>{const n=VI(t.__scopeSlider),[s,i]=x.useState(null),r=We(e,o=>i(o)),a=x.useMemo(()=>s?n().findIndex(o=>o.ref.current===s):-1,[n,s]);return p.jsx(GI,{...t,ref:r,index:a})}),GI=x.forwardRef((t,e)=>{const{__scopeSlider:n,index:s,name:i,...r}=t,a=Mh(Zm,n),o=VA(Zm,n),[l,c]=x.useState(null),u=We(e,v=>c(v)),d=l?a.form||!!l.closest("form"):!0,h=Qy(l),f=a.values[s],m=f===void 0?0:WA(f,a.min,a.max),g=$I(s,a.values.length),b=h==null?void 0:h[o.size],y=b?KI(b,m,o.direction):0;return x.useEffect(()=>{if(l)return a.thumbs.add(l),()=>{a.thumbs.delete(l)}},[l,a.thumbs]),p.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${m}% + ${y}px)`},children:[p.jsx(Xm.ItemSlot,{scope:t.__scopeSlider,children:p.jsx(ke.span,{role:"slider","aria-label":t["aria-label"]||g,"aria-valuemin":a.min,"aria-valuenow":f,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...r,ref:u,style:f===void 0?{display:"none"}:t.style,onFocus:Ae(t.onFocus,()=>{a.valueIndexToChangeRef.current=s})})}),d&&p.jsx(qA,{name:i??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:f},s)]})});GA.displayName=Zm;var qI="RadioBubbleInput",qA=x.forwardRef(({__scopeSlider:t,value:e,...n},s)=>{const i=x.useRef(null),r=We(i,s),a=Xy(e);return x.useEffect(()=>{const o=i.current;if(!o)return;const l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(a!==e&&u){const d=new Event("input",{bubbles:!0});u.call(o,e),o.dispatchEvent(d)}},[a,e]),p.jsx(ke.input,{style:{display:"none"},...n,ref:r,defaultValue:e})});qA.displayName=qI;function WI(t=[],e,n){const s=[...t];return s[n]=e,s.sort((i,r)=>i-r)}function WA(t,e,n){const r=100/(n-e)*(t-e);return Nd(r,[0,100])}function $I(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function YI(t,e){if(t.length===1)return 0;const n=t.map(i=>Math.abs(i-e)),s=Math.min(...n);return n.indexOf(s)}function KI(t,e,n){const s=t/2,r=o0([0,50],[0,s]);return(s-r(e)*n)*n}function XI(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function QI(t,e){if(e>0){const n=XI(t);return Math.min(...n)>=e}return!0}function o0(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(t[1]-t[0]);return e[0]+s*(n-t[0])}}function ZI(t){return(String(t).split(".")[1]||"").length}function JI(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var eL=IA,tL=HA,nL=UA,sL=GA,Rh="Switch",[iL]=ea(Rh),[rL,aL]=iL(Rh),$A=x.forwardRef((t,e)=>{const{__scopeSwitch:n,name:s,checked:i,defaultChecked:r,required:a,disabled:o,value:l="on",onCheckedChange:c,form:u,...d}=t,[h,f]=x.useState(null),m=We(e,_=>f(_)),g=x.useRef(!1),b=h?u||!!h.closest("form"):!0,[y,v]=er({prop:i,defaultProp:r??!1,onChange:c,caller:Rh});return p.jsxs(rL,{scope:n,checked:y,disabled:o,children:[p.jsx(ke.button,{type:"button",role:"switch","aria-checked":y,"aria-required":a,"data-state":QA(y),"data-disabled":o?"":void 0,disabled:o,value:l,...d,ref:m,onClick:Ae(t.onClick,_=>{v(S=>!S),b&&(g.current=_.isPropagationStopped(),g.current||_.stopPropagation())})}),b&&p.jsx(XA,{control:h,bubbles:!g.current,name:s,value:l,checked:y,required:a,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});$A.displayName=Rh;var YA="SwitchThumb",KA=x.forwardRef((t,e)=>{const{__scopeSwitch:n,...s}=t,i=aL(YA,n);return p.jsx(ke.span,{"data-state":QA(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e})});KA.displayName=YA;var oL="SwitchBubbleInput",XA=x.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:s=!0,...i},r)=>{const a=x.useRef(null),o=We(a,r),l=Xy(n),c=Qy(e);return x.useEffect(()=>{const u=a.current;if(!u)return;const d=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(d,"checked").set;if(l!==n&&f){const m=new Event("click",{bubbles:s});f.call(u,n),u.dispatchEvent(m)}},[l,n,s]),p.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:o,style:{...i.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});XA.displayName=oL;function QA(t){return t?"checked":"unchecked"}var lL=$A,cL=KA,ZA="Toggle",JA=x.forwardRef((t,e)=>{const{pressed:n,defaultPressed:s,onPressedChange:i,...r}=t,[a,o]=er({prop:n,onChange:i,defaultProp:s??!1,caller:ZA});return p.jsx(ke.button,{type:"button","aria-pressed":a,"data-state":a?"on":"off","data-disabled":t.disabled?"":void 0,...r,ref:e,onClick:Ae(t.onClick,()=>{t.disabled||o(!a)})})});JA.displayName=ZA;var hr="ToggleGroup",[ek]=ea(hr,[tA]),tk=tA(),l0=xt.forwardRef((t,e)=>{const{type:n,...s}=t;if(n==="single"){const i=s;return p.jsx(uL,{...i,ref:e})}if(n==="multiple"){const i=s;return p.jsx(dL,{...i,ref:e})}throw new Error(`Missing prop \`type\` expected on \`${hr}\``)});l0.displayName=hr;var[nk,sk]=ek(hr),uL=xt.forwardRef((t,e)=>{const{value:n,defaultValue:s,onValueChange:i=()=>{},...r}=t,[a,o]=er({prop:n,defaultProp:s??"",onChange:i,caller:hr});return p.jsx(nk,{scope:t.__scopeToggleGroup,type:"single",value:xt.useMemo(()=>a?[a]:[],[a]),onItemActivate:o,onItemDeactivate:xt.useCallback(()=>o(""),[o]),children:p.jsx(ik,{...r,ref:e})})}),dL=xt.forwardRef((t,e)=>{const{value:n,defaultValue:s,onValueChange:i=()=>{},...r}=t,[a,o]=er({prop:n,defaultProp:s??[],onChange:i,caller:hr}),l=xt.useCallback(u=>o((d=[])=>[...d,u]),[o]),c=xt.useCallback(u=>o((d=[])=>d.filter(h=>h!==u)),[o]);return p.jsx(nk,{scope:t.__scopeToggleGroup,type:"multiple",value:a,onItemActivate:l,onItemDeactivate:c,children:p.jsx(ik,{...r,ref:e})})});l0.displayName=hr;var[hL,fL]=ek(hr),ik=xt.forwardRef((t,e)=>{const{__scopeToggleGroup:n,disabled:s=!1,rovingFocus:i=!0,orientation:r,dir:a,loop:o=!0,...l}=t,c=tk(n),u=_h(a),d={role:"group",dir:u,...l};return p.jsx(hL,{scope:n,rovingFocus:i,disabled:s,children:i?p.jsx(eI,{asChild:!0,...c,orientation:r,dir:u,loop:o,children:p.jsx(ke.div,{...d,ref:e})}):p.jsx(ke.div,{...d,ref:e})})}),Rd="ToggleGroupItem",rk=xt.forwardRef((t,e)=>{const n=sk(Rd,t.__scopeToggleGroup),s=fL(Rd,t.__scopeToggleGroup),i=tk(t.__scopeToggleGroup),r=n.value.includes(t.value),a=s.disabled||t.disabled,o={...t,pressed:r,disabled:a},l=xt.useRef(null);return s.rovingFocus?p.jsx(tI,{asChild:!0,...i,focusable:!a,active:r,ref:l,children:p.jsx(p1,{...o,ref:e})}):p.jsx(p1,{...o,ref:e})});rk.displayName=Rd;var p1=xt.forwardRef((t,e)=>{const{__scopeToggleGroup:n,value:s,...i}=t,r=sk(Rd,n),a={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},o=r.type==="single"?a:void 0;return p.jsx(JA,{...o,...i,ref:e,onPressedChange:l=>{l?r.onItemActivate(s):r.onItemDeactivate(s)}})}),pL=l0,mL=rk;function ak(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=ak(t[e]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function ok(){for(var t,e,n=0,s="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=ak(t))&&(s&&(s+=" "),s+=e);return s}const gL=(t,e)=>{const n=new Array(t.length+e.length);for(let s=0;s<t.length;s++)n[s]=t[s];for(let s=0;s<e.length;s++)n[t.length+s]=e[s];return n},yL=(t,e)=>({classGroupId:t,validator:e}),lk=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),Dd="-",m1=[],vL="arbitrary..",bL=t=>{const e=_L(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:a=>{if(a.startsWith("[")&&a.endsWith("]"))return xL(a);const o=a.split(Dd),l=o[0]===""&&o.length>1?1:0;return ck(o,l,e)},getConflictingClassGroupIds:(a,o)=>{if(o){const l=s[a],c=n[a];return l?c?gL(c,l):l:c||m1}return n[a]||m1}}},ck=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const i=t[e],r=n.nextPart.get(i);if(r){const c=ck(t,e+1,r);if(c)return c}const a=n.validators;if(a===null)return;const o=e===0?t.join(Dd):t.slice(e).join(Dd),l=a.length;for(let c=0;c<l;c++){const u=a[c];if(u.validator(o))return u.classGroupId}},xL=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),s=e.slice(0,n);return s?vL+s:void 0})(),_L=t=>{const{theme:e,classGroups:n}=t;return SL(n,e)},SL=(t,e)=>{const n=lk();for(const s in t){const i=t[s];c0(i,n,s,e)}return n},c0=(t,e,n,s)=>{const i=t.length;for(let r=0;r<i;r++){const a=t[r];wL(a,e,n,s)}},wL=(t,e,n,s)=>{if(typeof t=="string"){CL(t,e,n);return}if(typeof t=="function"){TL(t,e,n,s);return}EL(t,e,n,s)},CL=(t,e,n)=>{const s=t===""?e:uk(e,t);s.classGroupId=n},TL=(t,e,n,s)=>{if(AL(t)){c0(t(s),e,n,s);return}e.validators===null&&(e.validators=[]),e.validators.push(yL(n,t))},EL=(t,e,n,s)=>{const i=Object.entries(t),r=i.length;for(let a=0;a<r;a++){const[o,l]=i[a];c0(l,uk(e,o),n,s)}},uk=(t,e)=>{let n=t;const s=e.split(Dd),i=s.length;for(let r=0;r<i;r++){const a=s[r];let o=n.nextPart.get(a);o||(o=lk(),n.nextPart.set(a,o)),n=o}return n},AL=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,kL=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),s=Object.create(null);const i=(r,a)=>{n[r]=a,e++,e>t&&(e=0,s=n,n=Object.create(null))};return{get(r){let a=n[r];if(a!==void 0)return a;if((a=s[r])!==void 0)return i(r,a),a},set(r,a){r in n?n[r]=a:i(r,a)}}},Jm="!",g1=":",NL=[],y1=(t,e,n,s,i)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:s,isExternal:i}),ML=t=>{const{prefix:e,experimentalParseClassName:n}=t;let s=i=>{const r=[];let a=0,o=0,l=0,c;const u=i.length;for(let g=0;g<u;g++){const b=i[g];if(a===0&&o===0){if(b===g1){r.push(i.slice(l,g)),l=g+1;continue}if(b==="/"){c=g;continue}}b==="["?a++:b==="]"?a--:b==="("?o++:b===")"&&o--}const d=r.length===0?i:i.slice(l);let h=d,f=!1;d.endsWith(Jm)?(h=d.slice(0,-1),f=!0):d.startsWith(Jm)&&(h=d.slice(1),f=!0);const m=c&&c>l?c-l:void 0;return y1(r,f,h,m)};if(e){const i=e+g1,r=s;s=a=>a.startsWith(i)?r(a.slice(i.length)):y1(NL,!1,a,void 0,!0)}if(n){const i=s;s=r=>n({className:r,parseClassName:i})}return s},RL=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,s)=>{e.set(n,1e6+s)}),n=>{const s=[];let i=[];for(let r=0;r<n.length;r++){const a=n[r],o=a[0]==="[",l=e.has(a);o||l?(i.length>0&&(i.sort(),s.push(...i),i=[]),s.push(a)):i.push(a)}return i.length>0&&(i.sort(),s.push(...i)),s}},DL=t=>({cache:kL(t.cacheSize),parseClassName:ML(t),sortModifiers:RL(t),...bL(t)}),OL=/\s+/,jL=(t,e)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:i,sortModifiers:r}=e,a=[],o=t.trim().split(OL);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{isExternal:d,modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:g}=n(u);if(d){l=u+(l.length>0?" "+l:l);continue}let b=!!g,y=s(b?m.substring(0,g):m);if(!y){if(!b){l=u+(l.length>0?" "+l:l);continue}if(y=s(m),!y){l=u+(l.length>0?" "+l:l);continue}b=!1}const v=h.length===0?"":h.length===1?h[0]:r(h).join(":"),_=f?v+Jm:v,S=_+y;if(a.indexOf(S)>-1)continue;a.push(S);const w=i(y,b);for(let E=0;E<w.length;++E){const T=w[E];a.push(_+T)}l=u+(l.length>0?" "+l:l)}return l},PL=(...t)=>{let e=0,n,s,i="";for(;e<t.length;)(n=t[e++])&&(s=dk(n))&&(i&&(i+=" "),i+=s);return i},dk=t=>{if(typeof t=="string")return t;let e,n="";for(let s=0;s<t.length;s++)t[s]&&(e=dk(t[s]))&&(n&&(n+=" "),n+=e);return n},BL=(t,...e)=>{let n,s,i,r;const a=l=>{const c=e.reduce((u,d)=>d(u),t());return n=DL(c),s=n.cache.get,i=n.cache.set,r=o,o(l)},o=l=>{const c=s(l);if(c)return c;const u=jL(l,n);return i(l,u),u};return r=a,(...l)=>r(PL(...l))},IL=[],vt=t=>{const e=n=>n[t]||IL;return e.isThemeGetter=!0,e},hk=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,fk=/^\((?:(\w[\w-]*):)?(.+)\)$/i,LL=/^\d+\/\d+$/,VL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,zL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,FL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,HL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,UL=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,da=t=>LL.test(t),be=t=>!!t&&!Number.isNaN(Number(t)),gi=t=>!!t&&Number.isInteger(Number(t)),mp=t=>t.endsWith("%")&&be(t.slice(0,-1)),Vs=t=>VL.test(t),GL=()=>!0,qL=t=>zL.test(t)&&!FL.test(t),pk=()=>!1,WL=t=>HL.test(t),$L=t=>UL.test(t),YL=t=>!X(t)&&!Q(t),KL=t=>Oo(t,yk,pk),X=t=>hk.test(t),br=t=>Oo(t,vk,qL),gp=t=>Oo(t,eV,be),v1=t=>Oo(t,mk,pk),XL=t=>Oo(t,gk,$L),ou=t=>Oo(t,bk,WL),Q=t=>fk.test(t),Xo=t=>jo(t,vk),QL=t=>jo(t,tV),b1=t=>jo(t,mk),ZL=t=>jo(t,yk),JL=t=>jo(t,gk),lu=t=>jo(t,bk,!0),Oo=(t,e,n)=>{const s=hk.exec(t);return s?s[1]?e(s[1]):n(s[2]):!1},jo=(t,e,n=!1)=>{const s=fk.exec(t);return s?s[1]?e(s[1]):n:!1},mk=t=>t==="position"||t==="percentage",gk=t=>t==="image"||t==="url",yk=t=>t==="length"||t==="size"||t==="bg-size",vk=t=>t==="length",eV=t=>t==="number",tV=t=>t==="family-name",bk=t=>t==="shadow",nV=()=>{const t=vt("color"),e=vt("font"),n=vt("text"),s=vt("font-weight"),i=vt("tracking"),r=vt("leading"),a=vt("breakpoint"),o=vt("container"),l=vt("spacing"),c=vt("radius"),u=vt("shadow"),d=vt("inset-shadow"),h=vt("text-shadow"),f=vt("drop-shadow"),m=vt("blur"),g=vt("perspective"),b=vt("aspect"),y=vt("ease"),v=vt("animate"),_=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],w=()=>[...S(),Q,X],E=()=>["auto","hidden","clip","visible","scroll"],T=()=>["auto","contain","none"],C=()=>[Q,X,l],N=()=>[da,"full","auto",...C()],A=()=>[gi,"none","subgrid",Q,X],k=()=>["auto",{span:["full",gi,Q,X]},gi,Q,X],O=()=>[gi,"auto",Q,X],P=()=>["auto","min","max","fr",Q,X],j=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],I=()=>["start","end","center","stretch","center-safe","end-safe"],R=()=>["auto",...C()],D=()=>[da,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...C()],M=()=>[t,Q,X],B=()=>[...S(),b1,v1,{position:[Q,X]}],z=()=>["no-repeat",{repeat:["","x","y","space","round"]}],$=()=>["auto","cover","contain",ZL,KL,{size:[Q,X]}],ne=()=>[mp,Xo,br],re=()=>["","none","full",c,Q,X],ie=()=>["",be,Xo,br],K=()=>["solid","dashed","dotted","double"],ee=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>[be,mp,b1,v1],V=()=>["","none",m,Q,X],le=()=>["none",be,Q,X],fe=()=>["none",be,Q,X],he=()=>[be,Q,X],me=()=>[da,"full",...C()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Vs],breakpoint:[Vs],color:[GL],container:[Vs],"drop-shadow":[Vs],ease:["in","out","in-out"],font:[YL],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Vs],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Vs],shadow:[Vs],spacing:["px",be],text:[Vs],"text-shadow":[Vs],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",da,X,Q,b]}],container:["container"],columns:[{columns:[be,X,Q,o]}],"break-after":[{"break-after":_()}],"break-before":[{"break-before":_()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:w()}],overflow:[{overflow:E()}],"overflow-x":[{"overflow-x":E()}],"overflow-y":[{"overflow-y":E()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:N()}],"inset-x":[{"inset-x":N()}],"inset-y":[{"inset-y":N()}],start:[{start:N()}],end:[{end:N()}],top:[{top:N()}],right:[{right:N()}],bottom:[{bottom:N()}],left:[{left:N()}],visibility:["visible","invisible","collapse"],z:[{z:[gi,"auto",Q,X]}],basis:[{basis:[da,"full","auto",o,...C()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[be,da,"auto","initial","none",X]}],grow:[{grow:["",be,Q,X]}],shrink:[{shrink:["",be,Q,X]}],order:[{order:[gi,"first","last","none",Q,X]}],"grid-cols":[{"grid-cols":A()}],"col-start-end":[{col:k()}],"col-start":[{"col-start":O()}],"col-end":[{"col-end":O()}],"grid-rows":[{"grid-rows":A()}],"row-start-end":[{row:k()}],"row-start":[{"row-start":O()}],"row-end":[{"row-end":O()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":P()}],"auto-rows":[{"auto-rows":P()}],gap:[{gap:C()}],"gap-x":[{"gap-x":C()}],"gap-y":[{"gap-y":C()}],"justify-content":[{justify:[...j(),"normal"]}],"justify-items":[{"justify-items":[...I(),"normal"]}],"justify-self":[{"justify-self":["auto",...I()]}],"align-content":[{content:["normal",...j()]}],"align-items":[{items:[...I(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...I(),{baseline:["","last"]}]}],"place-content":[{"place-content":j()}],"place-items":[{"place-items":[...I(),"baseline"]}],"place-self":[{"place-self":["auto",...I()]}],p:[{p:C()}],px:[{px:C()}],py:[{py:C()}],ps:[{ps:C()}],pe:[{pe:C()}],pt:[{pt:C()}],pr:[{pr:C()}],pb:[{pb:C()}],pl:[{pl:C()}],m:[{m:R()}],mx:[{mx:R()}],my:[{my:R()}],ms:[{ms:R()}],me:[{me:R()}],mt:[{mt:R()}],mr:[{mr:R()}],mb:[{mb:R()}],ml:[{ml:R()}],"space-x":[{"space-x":C()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":C()}],"space-y-reverse":["space-y-reverse"],size:[{size:D()}],w:[{w:[o,"screen",...D()]}],"min-w":[{"min-w":[o,"screen","none",...D()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[a]},...D()]}],h:[{h:["screen","lh",...D()]}],"min-h":[{"min-h":["screen","lh","none",...D()]}],"max-h":[{"max-h":["screen","lh",...D()]}],"font-size":[{text:["base",n,Xo,br]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,Q,gp]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",mp,X]}],"font-family":[{font:[QL,X,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Q,X]}],"line-clamp":[{"line-clamp":[be,"none",Q,gp]}],leading:[{leading:[r,...C()]}],"list-image":[{"list-image":["none",Q,X]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Q,X]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:M()}],"text-color":[{text:M()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...K(),"wavy"]}],"text-decoration-thickness":[{decoration:[be,"from-font","auto",Q,br]}],"text-decoration-color":[{decoration:M()}],"underline-offset":[{"underline-offset":[be,"auto",Q,X]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:C()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Q,X]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Q,X]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:B()}],"bg-repeat":[{bg:z()}],"bg-size":[{bg:$()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},gi,Q,X],radial:["",Q,X],conic:[gi,Q,X]},JL,XL]}],"bg-color":[{bg:M()}],"gradient-from-pos":[{from:ne()}],"gradient-via-pos":[{via:ne()}],"gradient-to-pos":[{to:ne()}],"gradient-from":[{from:M()}],"gradient-via":[{via:M()}],"gradient-to":[{to:M()}],rounded:[{rounded:re()}],"rounded-s":[{"rounded-s":re()}],"rounded-e":[{"rounded-e":re()}],"rounded-t":[{"rounded-t":re()}],"rounded-r":[{"rounded-r":re()}],"rounded-b":[{"rounded-b":re()}],"rounded-l":[{"rounded-l":re()}],"rounded-ss":[{"rounded-ss":re()}],"rounded-se":[{"rounded-se":re()}],"rounded-ee":[{"rounded-ee":re()}],"rounded-es":[{"rounded-es":re()}],"rounded-tl":[{"rounded-tl":re()}],"rounded-tr":[{"rounded-tr":re()}],"rounded-br":[{"rounded-br":re()}],"rounded-bl":[{"rounded-bl":re()}],"border-w":[{border:ie()}],"border-w-x":[{"border-x":ie()}],"border-w-y":[{"border-y":ie()}],"border-w-s":[{"border-s":ie()}],"border-w-e":[{"border-e":ie()}],"border-w-t":[{"border-t":ie()}],"border-w-r":[{"border-r":ie()}],"border-w-b":[{"border-b":ie()}],"border-w-l":[{"border-l":ie()}],"divide-x":[{"divide-x":ie()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ie()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...K(),"hidden","none"]}],"divide-style":[{divide:[...K(),"hidden","none"]}],"border-color":[{border:M()}],"border-color-x":[{"border-x":M()}],"border-color-y":[{"border-y":M()}],"border-color-s":[{"border-s":M()}],"border-color-e":[{"border-e":M()}],"border-color-t":[{"border-t":M()}],"border-color-r":[{"border-r":M()}],"border-color-b":[{"border-b":M()}],"border-color-l":[{"border-l":M()}],"divide-color":[{divide:M()}],"outline-style":[{outline:[...K(),"none","hidden"]}],"outline-offset":[{"outline-offset":[be,Q,X]}],"outline-w":[{outline:["",be,Xo,br]}],"outline-color":[{outline:M()}],shadow:[{shadow:["","none",u,lu,ou]}],"shadow-color":[{shadow:M()}],"inset-shadow":[{"inset-shadow":["none",d,lu,ou]}],"inset-shadow-color":[{"inset-shadow":M()}],"ring-w":[{ring:ie()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:M()}],"ring-offset-w":[{"ring-offset":[be,br]}],"ring-offset-color":[{"ring-offset":M()}],"inset-ring-w":[{"inset-ring":ie()}],"inset-ring-color":[{"inset-ring":M()}],"text-shadow":[{"text-shadow":["none",h,lu,ou]}],"text-shadow-color":[{"text-shadow":M()}],opacity:[{opacity:[be,Q,X]}],"mix-blend":[{"mix-blend":[...ee(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ee()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[be]}],"mask-image-linear-from-pos":[{"mask-linear-from":L()}],"mask-image-linear-to-pos":[{"mask-linear-to":L()}],"mask-image-linear-from-color":[{"mask-linear-from":M()}],"mask-image-linear-to-color":[{"mask-linear-to":M()}],"mask-image-t-from-pos":[{"mask-t-from":L()}],"mask-image-t-to-pos":[{"mask-t-to":L()}],"mask-image-t-from-color":[{"mask-t-from":M()}],"mask-image-t-to-color":[{"mask-t-to":M()}],"mask-image-r-from-pos":[{"mask-r-from":L()}],"mask-image-r-to-pos":[{"mask-r-to":L()}],"mask-image-r-from-color":[{"mask-r-from":M()}],"mask-image-r-to-color":[{"mask-r-to":M()}],"mask-image-b-from-pos":[{"mask-b-from":L()}],"mask-image-b-to-pos":[{"mask-b-to":L()}],"mask-image-b-from-color":[{"mask-b-from":M()}],"mask-image-b-to-color":[{"mask-b-to":M()}],"mask-image-l-from-pos":[{"mask-l-from":L()}],"mask-image-l-to-pos":[{"mask-l-to":L()}],"mask-image-l-from-color":[{"mask-l-from":M()}],"mask-image-l-to-color":[{"mask-l-to":M()}],"mask-image-x-from-pos":[{"mask-x-from":L()}],"mask-image-x-to-pos":[{"mask-x-to":L()}],"mask-image-x-from-color":[{"mask-x-from":M()}],"mask-image-x-to-color":[{"mask-x-to":M()}],"mask-image-y-from-pos":[{"mask-y-from":L()}],"mask-image-y-to-pos":[{"mask-y-to":L()}],"mask-image-y-from-color":[{"mask-y-from":M()}],"mask-image-y-to-color":[{"mask-y-to":M()}],"mask-image-radial":[{"mask-radial":[Q,X]}],"mask-image-radial-from-pos":[{"mask-radial-from":L()}],"mask-image-radial-to-pos":[{"mask-radial-to":L()}],"mask-image-radial-from-color":[{"mask-radial-from":M()}],"mask-image-radial-to-color":[{"mask-radial-to":M()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":S()}],"mask-image-conic-pos":[{"mask-conic":[be]}],"mask-image-conic-from-pos":[{"mask-conic-from":L()}],"mask-image-conic-to-pos":[{"mask-conic-to":L()}],"mask-image-conic-from-color":[{"mask-conic-from":M()}],"mask-image-conic-to-color":[{"mask-conic-to":M()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:B()}],"mask-repeat":[{mask:z()}],"mask-size":[{mask:$()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Q,X]}],filter:[{filter:["","none",Q,X]}],blur:[{blur:V()}],brightness:[{brightness:[be,Q,X]}],contrast:[{contrast:[be,Q,X]}],"drop-shadow":[{"drop-shadow":["","none",f,lu,ou]}],"drop-shadow-color":[{"drop-shadow":M()}],grayscale:[{grayscale:["",be,Q,X]}],"hue-rotate":[{"hue-rotate":[be,Q,X]}],invert:[{invert:["",be,Q,X]}],saturate:[{saturate:[be,Q,X]}],sepia:[{sepia:["",be,Q,X]}],"backdrop-filter":[{"backdrop-filter":["","none",Q,X]}],"backdrop-blur":[{"backdrop-blur":V()}],"backdrop-brightness":[{"backdrop-brightness":[be,Q,X]}],"backdrop-contrast":[{"backdrop-contrast":[be,Q,X]}],"backdrop-grayscale":[{"backdrop-grayscale":["",be,Q,X]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[be,Q,X]}],"backdrop-invert":[{"backdrop-invert":["",be,Q,X]}],"backdrop-opacity":[{"backdrop-opacity":[be,Q,X]}],"backdrop-saturate":[{"backdrop-saturate":[be,Q,X]}],"backdrop-sepia":[{"backdrop-sepia":["",be,Q,X]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":C()}],"border-spacing-x":[{"border-spacing-x":C()}],"border-spacing-y":[{"border-spacing-y":C()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Q,X]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[be,"initial",Q,X]}],ease:[{ease:["linear","initial",y,Q,X]}],delay:[{delay:[be,Q,X]}],animate:[{animate:["none",v,Q,X]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[g,Q,X]}],"perspective-origin":[{"perspective-origin":w()}],rotate:[{rotate:le()}],"rotate-x":[{"rotate-x":le()}],"rotate-y":[{"rotate-y":le()}],"rotate-z":[{"rotate-z":le()}],scale:[{scale:fe()}],"scale-x":[{"scale-x":fe()}],"scale-y":[{"scale-y":fe()}],"scale-z":[{"scale-z":fe()}],"scale-3d":["scale-3d"],skew:[{skew:he()}],"skew-x":[{"skew-x":he()}],"skew-y":[{"skew-y":he()}],transform:[{transform:[Q,X,"","none","gpu","cpu"]}],"transform-origin":[{origin:w()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:me()}],"translate-x":[{"translate-x":me()}],"translate-y":[{"translate-y":me()}],"translate-z":[{"translate-z":me()}],"translate-none":["translate-none"],accent:[{accent:M()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:M()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Q,X]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":C()}],"scroll-mx":[{"scroll-mx":C()}],"scroll-my":[{"scroll-my":C()}],"scroll-ms":[{"scroll-ms":C()}],"scroll-me":[{"scroll-me":C()}],"scroll-mt":[{"scroll-mt":C()}],"scroll-mr":[{"scroll-mr":C()}],"scroll-mb":[{"scroll-mb":C()}],"scroll-ml":[{"scroll-ml":C()}],"scroll-p":[{"scroll-p":C()}],"scroll-px":[{"scroll-px":C()}],"scroll-py":[{"scroll-py":C()}],"scroll-ps":[{"scroll-ps":C()}],"scroll-pe":[{"scroll-pe":C()}],"scroll-pt":[{"scroll-pt":C()}],"scroll-pr":[{"scroll-pr":C()}],"scroll-pb":[{"scroll-pb":C()}],"scroll-pl":[{"scroll-pl":C()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Q,X]}],fill:[{fill:["none",...M()]}],"stroke-w":[{stroke:[be,Xo,br,gp]}],stroke:[{stroke:["none",...M()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},sV=BL(nV);function ye(...t){return sV(ok(t))}function mc({...t}){return p.jsx(AI,{"data-slot":"select",...t})}function gc({...t}){return p.jsx(NI,{"data-slot":"select-value",...t})}function yc({className:t,size:e="default",children:n,...s}){return p.jsxs(kI,{"data-slot":"select-trigger","data-size":e,className:ye("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s,children:[n,p.jsx(MI,{asChild:!0,children:p.jsx(eE,{className:"size-4 opacity-50"})})]})}function vc({className:t,children:e,position:n="item-aligned",align:s="center",...i}){return p.jsx(RI,{children:p.jsxs(DI,{"data-slot":"select-content",className:ye("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,align:s,...i,children:[p.jsx(iV,{}),p.jsx(OI,{className:ye("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),p.jsx(rV,{})]})})}function qr({className:t,children:e,...n}){return p.jsxs(jI,{"data-slot":"select-item",className:ye("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[p.jsx("span",{"data-slot":"select-item-indicator",className:"absolute right-2 flex size-3.5 items-center justify-center",children:p.jsx(BI,{children:p.jsx(t4,{className:"size-4"})})}),p.jsx(PI,{children:e})]})}function iV({className:t,...e}){return p.jsx(II,{"data-slot":"select-scroll-up-button",className:ye("flex cursor-default items-center justify-center py-1",t),...e,children:p.jsx(i4,{className:"size-4"})})}function rV({className:t,...e}){return p.jsx(LI,{"data-slot":"select-scroll-down-button",className:ye("flex cursor-default items-center justify-center py-1",t),...e,children:p.jsx(eE,{className:"size-4"})})}function aV({devices:t,activeDeviceId:e,onSelect:n}){return p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(q4,{className:"size-4 text-muted-foreground"}),p.jsxs(mc,{value:e??"",onValueChange:n,children:[p.jsx(yc,{size:"sm",className:"w-[180px]",children:p.jsx(gc,{placeholder:"No MIDI device"})}),p.jsx(vc,{children:t.length===0?p.jsx(qr,{value:"none",disabled:!0,children:"No devices found"}):t.map(s=>p.jsx(qr,{value:s.id,children:s.name},s.id))})]}),p.jsx("div",{className:"size-2 rounded-full transition-colors",style:{backgroundColor:e?"oklch(0.65 0.20 155)":"var(--muted-foreground)",opacity:e?1:.3,boxShadow:e?"0 0 6px 1px oklch(0.65 0.20 155 / 0.5)":"none"}})]})}const oV=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function ir(t){const e=Math.floor(t/12)-1;return`${oV[t%12]}${e}`}function ql(t){const e=t%12;return e===1||e===3||e===6||e===8||e===10}function lV(t){return Math.max(0,Math.min(1,t/127))}function cV({activeNotes:t}){const e=Array.from(t.keys()).sort((n,s)=>n-s).map(ir);return p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-muted-foreground text-[11px] font-semibold uppercase tracking-wider",children:"Notes"}),p.jsx("div",{className:"flex min-w-[120px] items-center gap-1.5 rounded-md bg-secondary/50 px-3 py-1.5",children:e.length>0?e.map((n,s)=>p.jsx("span",{className:"animate-note-pop rounded bg-primary/20 px-1.5 py-0.5 font-mono text-xs font-semibold text-primary",children:n},s)):p.jsx("span",{className:"text-muted-foreground/50 font-mono text-xs",children:"---"})})]})}function Dh({className:t,defaultValue:e,value:n,min:s=0,max:i=100,...r}){const a=x.useMemo(()=>Array.isArray(n)?n:Array.isArray(e)?e:[s,i],[n,e,s,i]);return p.jsxs(eL,{"data-slot":"slider",defaultValue:e,value:n,min:s,max:i,className:ye("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",t),...r,children:[p.jsx(tL,{"data-slot":"slider-track",className:ye("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:p.jsx(nL,{"data-slot":"slider-range",className:ye("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:a.length},(o,l)=>p.jsx(sL,{"data-slot":"slider-thumb",className:"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},l))]})}const Jn=[{name:"Classic",oscillator:{type:"triangle"},envelope:{attack:.01,decay:.3,sustain:.4,release:.8}},{name:"Bright",oscillator:{type:"sawtooth"},envelope:{attack:.005,decay:.2,sustain:.3,release:.5}},{name:"FM",oscillator:{type:"fmsquare",modulationType:"sine",modulationIndex:3,harmonicity:2},envelope:{attack:.01,decay:.4,sustain:.2,release:.6}},{name:"Warm",oscillator:{type:"sine"},envelope:{attack:.05,decay:.5,sustain:.6,release:1.2}},{name:"AM",oscillator:{type:"amsquare",modulationType:"sine",harmonicity:1.5},envelope:{attack:.01,decay:.3,sustain:.35,release:.7}}],Wl=36,uV=84,xk=-12,eg=-40,_k=0,u0=16,dV=/mpk\s*mini/i,hV=[{cc:1,effect:"filterCutoff",label:"Filter"},{cc:2,effect:"filterResonance",label:"Resonance"},{cc:3,effect:"reverbWet",label:"Reverb"},{cc:4,effect:"chorusDepth",label:"Chorus"},{cc:70,effect:"filterCutoff",label:"Filter"},{cc:71,effect:"filterResonance",label:"Resonance"},{cc:72,effect:"reverbWet",label:"Reverb"},{cc:73,effect:"chorusDepth",label:"Chorus"}],fV=[5,74],Oh=[{id:0,name:"Kick",shortName:"KCK",midiNote:36,color:"oklch(0.62 0.22 25)"},{id:1,name:"Snare",shortName:"SNR",midiNote:38,color:"oklch(0.70 0.18 65)"},{id:2,name:"Closed HH",shortName:"CHH",midiNote:42,color:"oklch(0.70 0.20 150)"},{id:3,name:"Open HH",shortName:"OHH",midiNote:46,color:"oklch(0.65 0.18 180)"},{id:4,name:"Clap",shortName:"CLP",midiNote:39,color:"oklch(0.62 0.22 310)"},{id:5,name:"Tom",shortName:"TOM",midiNote:45,color:"oklch(0.65 0.20 265)"},{id:6,name:"Crash",shortName:"CRS",midiNote:49,color:"oklch(0.75 0.17 90)"},{id:7,name:"Ride",shortName:"RDE",midiNote:51,color:"oklch(0.65 0.18 210)"}],Od=new Map(Oh.map(t=>[t.midiNote,t.id])),pV=10,Sk=120,mV=40,gV=240,x1="micro-daw-arrangement",_1=["oklch(0.65 0.20 250)","oklch(0.65 0.20 155)","oklch(0.62 0.22 25)","oklch(0.70 0.18 65)","oklch(0.62 0.22 310)","oklch(0.75 0.17 90)","oklch(0.62 0.16 195)","oklch(0.65 0.20 345)"],yV=30,d0=10,h0=80,wk=[.25,.5,1,2,4],S1=64;function vV({volume:t,onChange:e}){return p.jsxs("div",{className:"flex items-center gap-2",children:[t<=eg?p.jsx(hE,{className:"size-4 text-muted-foreground"}):p.jsx(dE,{className:"size-4 text-muted-foreground"}),p.jsx(Dh,{value:[t],onValueChange:([n])=>e(n),min:eg,max:_k,step:1,className:"w-28"}),p.jsxs("span",{className:"whitespace-nowrap text-right font-mono text-xs text-muted-foreground",children:[t," dB"]})]})}function bV({presetIndex:t,onChange:e}){return p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-muted-foreground text-[11px] font-semibold uppercase tracking-wider",children:"Synth"}),p.jsxs(mc,{value:String(t),onValueChange:n=>e(Number(n)),children:[p.jsx(yc,{size:"sm",className:"w-[130px]",children:p.jsx(gc,{})}),p.jsx(vc,{children:Jn.map((n,s)=>p.jsx(qr,{value:String(s),children:n.name},s))})]})]})}const w1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,C1=ok,f0=(t,e)=>n=>{var s;if((e==null?void 0:e.variants)==null)return C1(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:r}=e,a=Object.keys(i).map(c=>{const u=n==null?void 0:n[c],d=r==null?void 0:r[c];if(u===null)return null;const h=w1(u)||w1(d);return i[c][h]}),o=n&&Object.entries(n).reduce((c,u)=>{let[d,h]=u;return h===void 0||(c[d]=h),c},{}),l=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((c,u)=>{let{class:d,className:h,...f}=u;return Object.entries(f).every(m=>{let[g,b]=m;return Array.isArray(b)?b.includes({...r,...o}[g]):{...r,...o}[g]===b})?[...c,d,h]:c},[]);return C1(t,a,l,n==null?void 0:n.class,n==null?void 0:n.className)},xV=f0("inline-flex items-center justify-center rounded-full border border-transparent px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border-border text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",ghost:"[a&]:hover:bg-accent [a&]:hover:text-accent-foreground",link:"text-primary underline-offset-4 [a&]:hover:underline"}},defaultVariants:{variant:"default"}});function jd({className:t,variant:e="default",asChild:n=!1,...s}){const i=n?gE:"span";return p.jsx(i,{"data-slot":"badge","data-variant":e,className:ye(xV({variant:e}),t),...s})}function _V({chord:t}){return p.jsx(jd,{variant:t?"default":"secondary",className:"min-w-[48px] justify-center font-mono text-xs",children:t?t.display:"---"})}const SV=f0("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ck=x.createContext({size:"default",variant:"default",spacing:0});function wV({className:t,variant:e,size:n,spacing:s=0,children:i,...r}){return p.jsx(pL,{"data-slot":"toggle-group","data-variant":e,"data-size":n,"data-spacing":s,style:{"--gap":s},className:ye("group/toggle-group flex w-fit items-center gap-[--spacing(var(--gap))] rounded-md data-[spacing=default]:data-[variant=outline]:shadow-xs",t),...r,children:p.jsx(Ck.Provider,{value:{variant:e,size:n,spacing:s},children:i})})}function yp({className:t,children:e,variant:n,size:s,...i}){const r=x.useContext(Ck);return p.jsx(mL,{"data-slot":"toggle-group-item","data-variant":r.variant||n,"data-size":r.size||s,"data-spacing":r.spacing,className:ye(SV({variant:r.variant||n,size:r.size||s}),"w-auto min-w-0 shrink-0 px-3 focus:z-10 focus-visible:z-10","data-[spacing=0]:rounded-none data-[spacing=0]:shadow-none data-[spacing=0]:first:rounded-l-md data-[spacing=0]:last:rounded-r-md data-[spacing=0]:data-[variant=outline]:border-l-0 data-[spacing=0]:data-[variant=outline]:first:border-l",t),...i,children:e})}function CV({mode:t,onChange:e}){return p.jsxs(wV,{type:"single",value:t,onValueChange:n=>{n&&e(n)},size:"sm",className:"gap-0",children:[p.jsx(yp,{value:"auto",className:"rounded-r-none text-[11px] font-semibold px-2 h-7",children:"Auto"}),p.jsx(yp,{value:"keys",className:"rounded-none text-[11px] font-semibold px-2 h-7",children:"Keys"}),p.jsx(yp,{value:"split",className:"rounded-l-none text-[11px] font-semibold px-2 h-7",children:"Split"})]})}const TV=f0("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",xs:"h-6 gap-1 rounded-md px-2 text-xs has-[>svg]:px-1.5 [&_svg:not([class*='size-'])]:size-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-xs":"size-6 rounded-md [&_svg:not([class*='size-'])]:size-3","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function Ee({className:t,variant:e="default",size:n="default",asChild:s=!1,...i}){const r=s?gE:"button";return p.jsx(r,{"data-slot":"button","data-variant":e,"data-size":n,className:ye(TV({variant:e,size:n,className:t})),...i})}function EV({devices:t,activeDeviceId:e,onSelectDevice:n,activeNotes:s,volume:i,onVolumeChange:r,presetIndex:a,onPresetChange:o,detectedChord:l,routingMode:c,onRoutingModeChange:u,canUndo:d,canRedo:h,onUndo:f,onRedo:m}){const[g,b]=x.useState(!1);x.useEffect(()=>{if(window.electronAPI)return window.electronAPI.isFullscreen().then(b),window.electronAPI.onFullscreenChanged(b)},[]);const y=x.useCallback(()=>{var v;(v=window.electronAPI)==null||v.toggleFullscreen()},[]);return p.jsxs("div",{className:"flex items-center justify-between border-b border-border bg-card/80 backdrop-blur-md pl-4 pr-4 py-2",style:{WebkitAppRegion:"drag"},children:[p.jsxs("div",{className:"flex items-center gap-4",style:{WebkitAppRegion:"no-drag"},children:[p.jsxs("div",{className:"flex items-center gap-0.5",children:[p.jsx(Ee,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",disabled:!d,onClick:f,title:"Undo (Ctrl+Z)",children:p.jsx(uE,{className:"h-3.5 w-3.5"})}),p.jsx(Ee,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",disabled:!h,onClick:m,title:"Redo (Ctrl+Shift+Z)",children:p.jsx(aE,{className:"h-3.5 w-3.5"})})]}),p.jsx("div",{className:"h-4 w-px bg-border/60"}),p.jsx(aV,{devices:t,activeDeviceId:e,onSelect:n}),p.jsx("div",{className:"h-4 w-px bg-border/60"}),p.jsx(_V,{chord:l})]}),p.jsxs("div",{className:"flex items-center gap-4",style:{WebkitAppRegion:"no-drag"},children:[p.jsx(cV,{activeNotes:s}),p.jsx("div",{className:"h-4 w-px bg-border/60"}),p.jsx(CV,{mode:c,onChange:u}),p.jsx("div",{className:"h-4 w-px bg-border/60"}),p.jsx(bV,{presetIndex:a,onChange:o}),p.jsx("div",{className:"h-4 w-px bg-border/60"}),p.jsx(vV,{volume:i,onChange:r}),p.jsx("div",{className:"h-4 w-px bg-border/60"}),p.jsx(Ee,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:y,title:g?"Exit Fullscreen":"Fullscreen",children:g?p.jsx(S4,{className:"h-3.5 w-3.5"}):p.jsx(x4,{className:"h-3.5 w-3.5"})})]})]})}function AV({className:t,...e}){return p.jsx("div",{"data-slot":"card",className:ye("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...e})}const Tk="15.1.22",T1=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),E1=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),tg=(t,e)=>({startTime:e,type:"setValue",value:t}),Ek=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),Ak=(t,e,{startTime:n,target:s,timeConstant:i})=>s+(e-s)*Math.exp((n-t)/i),Pa=t=>t.type==="exponentialRampToValue",Pd=t=>t.type==="linearRampToValue",wi=t=>Pa(t)||Pd(t),p0=t=>t.type==="setValue",Hs=t=>t.type==="setValueCurve",Bd=(t,e,n,s)=>{const i=t[e];return i===void 0?s:wi(i)||p0(i)?i.value:Hs(i)?i.values[i.values.length-1]:Ak(n,Bd(t,e-1,i.startTime,s),i)},A1=(t,e,n,s,i)=>n===void 0?[s.insertTime,i]:wi(n)?[n.endTime,n.value]:p0(n)?[n.startTime,n.value]:Hs(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,Bd(t,e-1,n.startTime,i)],ng=t=>t.type==="cancelAndHold",sg=t=>t.type==="cancelScheduledValues",yi=t=>ng(t)||sg(t)?t.cancelTime:Pa(t)||Pd(t)?t.endTime:t.startTime,k1=(t,e,n,{endTime:s,value:i})=>n===i?i:0<n&&0<i||n<0&&i<0?n*(i/n)**((t-e)/(s-e)):0,N1=(t,e,n,{endTime:s,value:i})=>n+(t-e)/(s-e)*(i-n),kV=(t,e)=>{const n=Math.floor(e),s=Math.ceil(e);return n===s?t[n]:(1-(e-n))*t[n]+(1-(s-e))*t[s]},NV=(t,{duration:e,startTime:n,values:s})=>{const i=(t-n)/e*(s.length-1);return kV(s,i)},cu=t=>t.type==="setTarget";class MV{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=yi(e);if(ng(e)||sg(e)){const s=this._automationEvents.findIndex(r=>sg(e)&&Hs(r)?r.startTime+r.duration>=n:yi(r)>=n),i=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),ng(e)){const r=this._automationEvents[this._automationEvents.length-1];if(i!==void 0&&wi(i)){if(r!==void 0&&cu(r))throw new Error("The internal list is malformed.");const a=r===void 0?i.insertTime:Hs(r)?r.startTime+r.duration:yi(r),o=r===void 0?this._defaultValue:Hs(r)?r.values[r.values.length-1]:r.value,l=Pa(i)?k1(n,a,o,i):N1(n,a,o,i),c=Pa(i)?T1(l,n,this._currenTime):E1(l,n,this._currenTime);this._automationEvents.push(c)}if(r!==void 0&&cu(r)&&this._automationEvents.push(tg(this.getValue(n),n)),r!==void 0&&Hs(r)&&r.startTime+r.duration>n){const a=n-r.startTime,o=(r.values.length-1)/r.duration,l=Math.max(2,1+Math.ceil(a*o)),c=a/(l-1)*o,u=r.values.slice(0,l);if(c<1)for(let d=1;d<l;d+=1){const h=c*d%1;u[d]=r.values[d-1]*(1-h)+r.values[d]*h}this._automationEvents[this._automationEvents.length-1]=Ek(u,r.startTime,a)}}}else{const s=this._automationEvents.findIndex(a=>yi(a)>n),i=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(i!==void 0&&Hs(i)&&yi(i)+i.duration>n)return!1;const r=Pa(e)?T1(e.value,e.endTime,this._currenTime):Pd(e)?E1(e.value,n,this._currenTime):e;if(s===-1)this._automationEvents.push(r);else{if(Hs(e)&&n+e.duration>yi(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,r)}}return!0}flush(e){const n=this._automationEvents.findIndex(s=>yi(s)>e);if(n>1){const s=this._automationEvents.slice(n-1),i=s[0];cu(i)&&s.unshift(tg(Bd(this._automationEvents,n-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=s}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(a=>yi(a)>e),s=this._automationEvents[n],i=(n===-1?this._automationEvents.length:n)-1,r=this._automationEvents[i];if(r!==void 0&&cu(r)&&(s===void 0||!wi(s)||s.insertTime>e))return Ak(e,Bd(this._automationEvents,i-1,r.startTime,this._defaultValue),r);if(r!==void 0&&p0(r)&&(s===void 0||!wi(s)))return r.value;if(r!==void 0&&Hs(r)&&(s===void 0||!wi(s)||r.startTime+r.duration>e))return e<r.startTime+r.duration?NV(e,r):r.values[r.values.length-1];if(r!==void 0&&wi(r)&&(s===void 0||!wi(s)))return r.value;if(s!==void 0&&Pa(s)){const[a,o]=A1(this._automationEvents,i,r,s,this._defaultValue);return k1(e,a,o,s)}if(s!==void 0&&Pd(s)){const[a,o]=A1(this._automationEvents,i,r,s,this._defaultValue);return N1(e,a,o,s)}return this._defaultValue}}const RV=t=>({cancelTime:t,type:"cancelAndHold"}),DV=t=>({cancelTime:t,type:"cancelScheduledValues"}),OV=(t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}),jV=(t,e)=>({endTime:e,type:"linearRampToValue",value:t}),PV=(t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"}),BV=()=>new DOMException("","AbortError"),IV=t=>(e,n,[s,i,r],a)=>{t(e[i],[n,s,r],o=>o[0]===n&&o[1]===s,a)},LV=t=>(e,n,s)=>{const i=[];for(let r=0;r<s.numberOfInputs;r+=1)i.push(new Set);t.set(e,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},VV=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},co=new WeakSet,kk=new WeakMap,m0=new WeakMap,Nk=new WeakMap,g0=new WeakMap,jh=new WeakMap,Mk=new WeakMap,ig=new WeakMap,rg=new WeakMap,ag=new WeakMap,Rk={construct(){return Rk}},zV=t=>{try{const e=new Proxy(t,Rk);new e}catch{return!1}return!0},M1=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,R1=(t,e)=>{const n=[];let s=t.replace(/^[\s]+/,""),i=s.match(M1);for(;i!==null;){const r=i[1].slice(1,-1),a=i[0].replace(/([\s]+)?;?$/,"").replace(r,new URL(r,e).toString());n.push(a),s=s.slice(i[0].length).replace(/^[\s]+/,""),i=s.match(M1)}return[n.join(";"),s]},D1=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},O1=t=>{if(!zV(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},FV=(t,e,n,s,i,r,a,o,l,c,u,d,h)=>{let f=0;return(m,g,b={credentials:"omit"})=>{const y=u.get(m);if(y!==void 0&&y.has(g))return Promise.resolve();const v=c.get(m);if(v!==void 0){const w=v.get(g);if(w!==void 0)return w}const _=r(m),S=_.audioWorklet===void 0?i(g).then(([w,E])=>{const[T,C]=R1(w,E),N=`${T};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${C}
})})(window,'_AWGS')`;return n(N)}).then(()=>{const w=h._AWGS.pop();if(w===void 0)throw new SyntaxError;s(_.currentTime,_.sampleRate,()=>w(class{},void 0,(E,T)=>{if(E.trim()==="")throw e();const C=rg.get(_);if(C!==void 0){if(C.has(E))throw e();O1(T),D1(T.parameterDescriptors),C.set(E,T)}else O1(T),D1(T.parameterDescriptors),rg.set(_,new Map([[E,T]]))},_.sampleRate,void 0,void 0))}):Promise.all([i(g),Promise.resolve(t(d,d))]).then(([[w,E],T])=>{const C=f+1;f=C;const[N,A]=R1(w,E),j=`${N};((AudioWorkletProcessor,registerProcessor)=>{${A}
})(${T?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${T?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${T?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${C}',class extends AudioWorkletProcessor{process(){return !1}})`,I=new Blob([j],{type:"application/javascript; charset=utf-8"}),R=URL.createObjectURL(I);return _.audioWorklet.addModule(R,b).then(()=>{if(o(_))return _;const D=a(_);return D.audioWorklet.addModule(R,b).then(()=>D)}).then(D=>{if(l===null)throw new SyntaxError;try{new l(D,`__sac${C}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(R))});return v===void 0?c.set(m,new Map([[g,S]])):v.set(g,S),S.then(()=>{const w=u.get(m);w===void 0?u.set(m,new Set([g])):w.add(g)}).finally(()=>{const w=c.get(m);w!==void 0&&w.delete(g)}),S}},is=(t,e)=>{const n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},Ph=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[s]=n;return t.delete(s),s},Dk=(t,e,n,s)=>{const i=is(t,e),r=Ph(i,a=>a[0]===n&&a[1]===s);return i.size===0&&t.delete(e),r},bc=t=>is(Mk,t),uo=t=>{if(co.has(t))throw new Error("The AudioNode is already stored.");co.add(t),bc(t).forEach(e=>e(!0))},Ok=t=>"port"in t,xc=t=>{if(!co.has(t))throw new Error("The AudioNode is not stored.");co.delete(t),bc(t).forEach(e=>e(!1))},og=(t,e)=>{!Ok(t)&&e.every(n=>n.size===0)&&xc(t)},HV=(t,e,n,s,i,r,a,o,l,c,u,d,h)=>{const f=new WeakMap;return(m,g,b,y,v)=>{const{activeInputs:_,passiveInputs:S}=r(g),{outputs:w}=r(m),E=o(m),T=C=>{const N=l(g),A=l(m);if(C){const k=Dk(S,m,b,y);t(_,m,k,!1),!v&&!d(m)&&n(A,N,b,y),h(g)&&uo(g)}else{const k=s(_,m,b,y);e(S,y,k,!1),!v&&!d(m)&&i(A,N,b,y);const O=a(g);if(O===0)u(g)&&og(g,_);else{const P=f.get(g);P!==void 0&&clearTimeout(P),f.set(g,setTimeout(()=>{u(g)&&og(g,_)},O*1e3))}}};return c(w,[g,b,y],C=>C[0]===g&&C[1]===b&&C[2]===y,!0)?(E.add(T),u(m)?t(_,m,[b,y,T],!0):e(S,y,[m,b,T],!0),!0):!1}},UV=t=>(e,n,[s,i,r],a)=>{const o=e.get(s);o===void 0?e.set(s,new Set([[i,n,r]])):t(o,[i,n,r],l=>l[0]===i&&l[1]===n,a)},GV=t=>(e,n)=>{const s=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(s).connect(e.destination);const i=()=>{n.removeEventListener("ended",i),n.disconnect(s),s.disconnect()};n.addEventListener("ended",i)},qV=t=>(e,n)=>{t(e).add(n)},WV={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},$V=(t,e,n,s,i,r)=>class extends t{constructor(o,l){const c=i(o),u={...WV,...l},d=s(c,u),h=r(c)?e():null;super(o,!1,d,h),this._nativeAnalyserNode=d}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(o){this._nativeAnalyserNode.fftSize=o}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(o){const l=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=o,!(o>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=l,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(o){const l=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=o,!(this._nativeAnalyserNode.maxDecibels>o))throw this._nativeAnalyserNode.minDecibels=l,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(o){this._nativeAnalyserNode.smoothingTimeConstant=o}getByteFrequencyData(o){this._nativeAnalyserNode.getByteFrequencyData(o)}getByteTimeDomainData(o){this._nativeAnalyserNode.getByteTimeDomainData(o)}getFloatFrequencyData(o){this._nativeAnalyserNode.getFloatFrequencyData(o)}getFloatTimeDomainData(o){this._nativeAnalyserNode.getFloatTimeDomainData(o)}},Ht=(t,e)=>t.context===e,YV=(t,e,n)=>()=>{const s=new WeakMap,i=async(r,a)=>{let o=e(r);if(!Ht(o,a)){const c={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,fftSize:o.fftSize,maxDecibels:o.maxDecibels,minDecibels:o.minDecibels,smoothingTimeConstant:o.smoothingTimeConstant};o=t(a,c)}return s.set(a,o),await n(r,a,o),o};return{render(r,a){const o=s.get(a);return o!==void 0?Promise.resolve(o):i(r,a)}}},Id=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Rs=()=>new DOMException("","IndexSizeError"),y0=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(s){throw s.code===12?Rs():s}})(t.getChannelData)},KV={numberOfChannels:1},XV=(t,e,n,s,i,r,a,o)=>{let l=null;return class jk{constructor(u){if(i===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:d,numberOfChannels:h,sampleRate:f}={...KV,...u};l===null&&(l=new i(1,1,44100));const m=s!==null&&e(r,r)?new s({length:d,numberOfChannels:h,sampleRate:f}):l.createBuffer(h,d,f);if(m.numberOfChannels===0)throw n();return typeof m.copyFromChannel!="function"?(a(m),y0(m)):e(Id,()=>Id(m))||o(m),t.add(m),m}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===jk.prototype||t.has(u)}}},rn=-34028234663852886e22,Gt=-rn,Qs=t=>co.has(t),QV={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},ZV=(t,e,n,s,i,r,a,o)=>class extends t{constructor(c,u){const d=r(c),h={...QV,...u},f=i(d,h),m=a(d),g=m?e():null;super(c,!1,f,g),this._audioBufferSourceNodeRenderer=g,this._isBufferNullified=!1,this._isBufferSet=h.buffer!==null,this._nativeAudioBufferSourceNode=f,this._onended=null,this._playbackRate=n(this,m,f.playbackRate,Gt,rn)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(c){if(this._nativeAudioBufferSourceNode.buffer=c,c!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(c){this._nativeAudioBufferSourceNode.loop=c}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(c){this._nativeAudioBufferSourceNode.loopEnd=c}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(c){this._nativeAudioBufferSourceNode.loopStart=c}get onended(){return this._onended}set onended(c){const u=typeof c=="function"?o(this,c):null;this._nativeAudioBufferSourceNode.onended=u;const d=this._nativeAudioBufferSourceNode.onended;this._onended=d!==null&&d===u?c:d}get playbackRate(){return this._playbackRate}start(c=0,u=0,d){if(this._nativeAudioBufferSourceNode.start(c,u,d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=d===void 0?[c,u]:[c,u,d]),this.context.state!=="closed"){uo(this);const h=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",h),Qs(this)&&xc(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",h)}}stop(c=0){this._nativeAudioBufferSourceNode.stop(c),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=c)}},JV=(t,e,n,s,i)=>()=>{const r=new WeakMap;let a=null,o=null;const l=async(c,u)=>{let d=n(c);const h=Ht(d,u);if(!h){const f={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,loop:d.loop,loopEnd:d.loopEnd,loopStart:d.loopStart,playbackRate:d.playbackRate.value};d=e(u,f),a!==null&&d.start(...a),o!==null&&d.stop(o)}return r.set(u,d),h?await t(u,c.playbackRate,d.playbackRate):await s(u,c.playbackRate,d.playbackRate),await i(c,u,d),d};return{set start(c){a=c},set stop(c){o=c},render(c,u){const d=r.get(u);return d!==void 0?Promise.resolve(d):l(c,u)}}},ez=t=>"playbackRate"in t,tz=t=>"frequency"in t&&"gain"in t,nz=t=>"offset"in t,sz=t=>!("frequency"in t)&&"gain"in t,iz=t=>"detune"in t&&"frequency"in t&&!("gain"in t),rz=t=>"pan"in t,Yt=t=>is(kk,t),_c=t=>is(Nk,t),lg=(t,e)=>{const{activeInputs:n}=Yt(t);n.forEach(i=>i.forEach(([r])=>{e.includes(t)||lg(r,[...e,t])}));const s=ez(t)?[t.playbackRate]:Ok(t)?Array.from(t.parameters.values()):tz(t)?[t.Q,t.detune,t.frequency,t.gain]:nz(t)?[t.offset]:sz(t)?[t.gain]:iz(t)?[t.detune,t.frequency]:rz(t)?[t.pan]:[];for(const i of s){const r=_c(i);r!==void 0&&r.activeInputs.forEach(([a])=>lg(a,e))}Qs(t)&&xc(t)},Pk=t=>{lg(t.destination,[])},az=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback"),oz=(t,e,n,s,i,r,a,o,l)=>class extends t{constructor(u={}){if(l===null)throw new Error("Missing the native AudioContext constructor.");let d;try{d=new l(u)}catch(m){throw m.code===12&&m.message==="sampleRate is not in range"?n():m}if(d===null)throw s();if(!az(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&d.sampleRate!==u.sampleRate)throw n();super(d,2);const{latencyHint:h}=u,{sampleRate:f}=d;if(this._baseLatency=typeof d.baseLatency=="number"?d.baseLatency:h==="balanced"?512/f:h==="interactive"||h===void 0?256/f:h==="playback"?1024/f:Math.max(2,Math.min(128,Math.round(h*f/128)))*128/f,this._nativeAudioContext=d,l.name==="webkitAudioContext"?(this._nativeGainNode=d.createGain(),this._nativeOscillatorNode=d.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(d.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,d.state==="running"){this._state="suspended";const m=()=>{this._state==="suspended"&&(this._state=null),d.removeEventListener("statechange",m)};d.addEventListener("statechange",m)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Pk(this)}))}createMediaElementSource(u){return new i(this,{mediaElement:u})}createMediaStreamDestination(){return new r(this)}createMediaStreamSource(u){return new a(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new o(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,d)=>{const h=()=>{this._nativeAudioContext.removeEventListener("statechange",h),this._nativeAudioContext.state==="running"?u():this.resume().then(u,d)};this._nativeAudioContext.addEventListener("statechange",h)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},lz=(t,e,n,s,i,r,a,o)=>class extends t{constructor(c,u){const d=r(c),h=a(d),f=i(d,u,h),m=h?e(o):null;super(c,!1,f,m),this._isNodeOfNativeOfflineAudioContext=h,this._nativeAudioDestinationNode=f}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(c){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(c>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=c}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(c){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=c}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},cz=t=>{const e=new WeakMap,n=async(s,i)=>{const r=i.destination;return e.set(i,r),await t(s,i,r),r};return{render(s,i){const r=e.get(i);return r!==void 0?Promise.resolve(r):n(s,i)}}},uz=(t,e,n,s,i,r,a,o)=>(l,c)=>{const u=c.listener,d=()=>{const w=new Float32Array(1),E=e(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),T=a(c);let C=!1,N=[0,0,-1,0,1,0],A=[0,0,0];const k=()=>{if(C)return;C=!0;const I=s(c,256,9,0);I.onaudioprocess=({inputBuffer:R})=>{const D=[r(R,w,0),r(R,w,1),r(R,w,2),r(R,w,3),r(R,w,4),r(R,w,5)];D.some((B,z)=>B!==N[z])&&(u.setOrientation(...D),N=D);const M=[r(R,w,6),r(R,w,7),r(R,w,8)];M.some((B,z)=>B!==A[z])&&(u.setPosition(...M),A=M)},E.connect(I)},O=I=>R=>{R!==N[I]&&(N[I]=R,u.setOrientation(...N))},P=I=>R=>{R!==A[I]&&(A[I]=R,u.setPosition(...A))},j=(I,R,D)=>{const M=n(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:R});M.connect(E,0,I),M.start(),Object.defineProperty(M.offset,"defaultValue",{get(){return R}});const B=t({context:l},T,M.offset,Gt,rn);return o(B,"value",z=>()=>z.call(B),z=>$=>{try{z.call(B,$)}catch(ne){if(ne.code!==9)throw ne}k(),T&&D($)}),B.cancelAndHoldAtTime=(z=>T?()=>{throw i()}:(...$)=>{const ne=z.apply(B,$);return k(),ne})(B.cancelAndHoldAtTime),B.cancelScheduledValues=(z=>T?()=>{throw i()}:(...$)=>{const ne=z.apply(B,$);return k(),ne})(B.cancelScheduledValues),B.exponentialRampToValueAtTime=(z=>T?()=>{throw i()}:(...$)=>{const ne=z.apply(B,$);return k(),ne})(B.exponentialRampToValueAtTime),B.linearRampToValueAtTime=(z=>T?()=>{throw i()}:(...$)=>{const ne=z.apply(B,$);return k(),ne})(B.linearRampToValueAtTime),B.setTargetAtTime=(z=>T?()=>{throw i()}:(...$)=>{const ne=z.apply(B,$);return k(),ne})(B.setTargetAtTime),B.setValueAtTime=(z=>T?()=>{throw i()}:(...$)=>{const ne=z.apply(B,$);return k(),ne})(B.setValueAtTime),B.setValueCurveAtTime=(z=>T?()=>{throw i()}:(...$)=>{const ne=z.apply(B,$);return k(),ne})(B.setValueCurveAtTime),B};return{forwardX:j(0,0,O(0)),forwardY:j(1,0,O(1)),forwardZ:j(2,-1,O(2)),positionX:j(6,0,P(0)),positionY:j(7,0,P(1)),positionZ:j(8,0,P(2)),upX:j(3,0,O(3)),upY:j(4,1,O(4)),upZ:j(5,0,O(5))}},{forwardX:h,forwardY:f,forwardZ:m,positionX:g,positionY:b,positionZ:y,upX:v,upY:_,upZ:S}=u.forwardX===void 0?d():u;return{get forwardX(){return h},get forwardY(){return f},get forwardZ(){return m},get positionX(){return g},get positionY(){return b},get positionZ(){return y},get upX(){return v},get upY(){return _},get upZ(){return S}}},Ld=t=>"context"in t,Sc=t=>Ld(t[0]),ta=(t,e,n,s)=>{for(const i of t)if(n(i)){if(s)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},j1=(t,e,[n,s],i)=>{ta(t,[e,n,s],r=>r[0]===e&&r[1]===n,i)},P1=(t,[e,n,s],i)=>{const r=t.get(e);r===void 0?t.set(e,new Set([[n,s]])):ta(r,[n,s],a=>a[0]===n,i)},Po=t=>"inputs"in t,Vd=(t,e,n,s)=>{if(Po(e)){const i=e.inputs[s];return t.connect(i,n,0),[i,n,0]}return t.connect(e,n,s),[e,n,s]},Bk=(t,e,n)=>{for(const s of t)if(s[0]===e&&s[1]===n)return t.delete(s),s;return null},dz=(t,e,n)=>Ph(t,s=>s[0]===e&&s[1]===n),Ik=(t,e)=>{if(!bc(t).delete(e))throw new Error("Missing the expected event listener.")},Lk=(t,e,n)=>{const s=is(t,e),i=Ph(s,r=>r[0]===n);return s.size===0&&t.delete(e),i},zd=(t,e,n,s)=>{Po(e)?t.disconnect(e.inputs[s],n,0):t.disconnect(e,n,s)},Ze=t=>is(m0,t),$l=t=>is(g0,t),Wr=t=>ig.has(t),zu=t=>!co.has(t),B1=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{const s=t.createScriptProcessor(256,1,1),i=t.createGain(),r=t.createBuffer(1,2,44100),a=r.getChannelData(0);a[0]=1,a[1]=1;const o=t.createBufferSource();o.buffer=r,o.loop=!0,o.connect(s).connect(t.destination),o.connect(i),o.disconnect(i),s.onaudioprocess=l=>{const c=l.inputBuffer.getChannelData(0);Array.prototype.some.call(c,u=>u===1)?n(!0):n(!1),o.stop(),s.onaudioprocess=null,o.disconnect(s),s.disconnect(t.destination)},o.start()}}),vp=(t,e)=>{const n=new Map;for(const s of t)for(const i of s){const r=n.get(i);n.set(i,r===void 0?1:r+1)}n.forEach((s,i)=>e(i,s))},Fd=t=>"context"in t,hz=t=>{const e=new Map;t.connect=(n=>(s,i=0,r=0)=>{const a=Fd(s)?n(s,i,r):n(s,i),o=e.get(s);return o===void 0?e.set(s,[{input:r,output:i}]):o.every(l=>l.input!==r||l.output!==i)&&o.push({input:r,output:i}),a})(t.connect.bind(t)),t.disconnect=(n=>(s,i,r)=>{if(n.apply(t),s===void 0)e.clear();else if(typeof s=="number")for(const[a,o]of e){const l=o.filter(c=>c.output!==s);l.length===0?e.delete(a):e.set(a,l)}else if(e.has(s))if(i===void 0)e.delete(s);else{const a=e.get(s);if(a!==void 0){const o=a.filter(l=>l.output!==i&&(l.input!==r||r===void 0));o.length===0?e.delete(s):e.set(s,o)}}for(const[a,o]of e)o.forEach(l=>{Fd(a)?t.connect(a,l.output,l.input):t.connect(a,l.output)})})(t.disconnect)},fz=(t,e,n,s)=>{const{activeInputs:i,passiveInputs:r}=_c(e),{outputs:a}=Yt(t),o=bc(t),l=c=>{const u=Ze(t),d=$l(e);if(c){const h=Lk(r,t,n);j1(i,t,h,!1),!s&&!Wr(t)&&u.connect(d,n)}else{const h=dz(i,t,n);P1(r,h,!1),!s&&!Wr(t)&&u.disconnect(d,n)}};return ta(a,[e,n],c=>c[0]===e&&c[1]===n,!0)?(o.add(l),Qs(t)?j1(i,t,[n,l],!0):P1(r,[t,n,l],!0),!0):!1},pz=(t,e,n,s)=>{const{activeInputs:i,passiveInputs:r}=Yt(e),a=Bk(i[s],t,n);return a===null?[Dk(r,t,n,s)[2],!1]:[a[2],!0]},mz=(t,e,n)=>{const{activeInputs:s,passiveInputs:i}=_c(e),r=Bk(s,t,n);return r===null?[Lk(i,t,n)[1],!1]:[r[2],!0]},v0=(t,e,n,s,i)=>{const[r,a]=pz(t,n,s,i);if(r!==null&&(Ik(t,r),a&&!e&&!Wr(t)&&zd(Ze(t),Ze(n),s,i)),Qs(n)){const{activeInputs:o}=Yt(n);og(n,o)}},b0=(t,e,n,s)=>{const[i,r]=mz(t,n,s);i!==null&&(Ik(t,i),r&&!e&&!Wr(t)&&Ze(t).disconnect($l(n),s))},gz=(t,e)=>{const n=Yt(t),s=[];for(const i of n.outputs)Sc(i)?v0(t,e,...i):b0(t,e,...i),s.push(i[0]);return n.outputs.clear(),s},yz=(t,e,n)=>{const s=Yt(t),i=[];for(const r of s.outputs)r[1]===n&&(Sc(r)?v0(t,e,...r):b0(t,e,...r),i.push(r[0]),s.outputs.delete(r));return i},vz=(t,e,n,s,i)=>{const r=Yt(t);return Array.from(r.outputs).filter(a=>a[0]===n&&(s===void 0||a[1]===s)&&(i===void 0||a[2]===i)).map(a=>(Sc(a)?v0(t,e,...a):b0(t,e,...a),r.outputs.delete(a),a[0]))},bz=(t,e,n,s,i,r,a,o,l,c,u,d,h,f,m,g)=>class extends c{constructor(y,v,_,S){super(_),this._context=y,this._nativeAudioNode=_;const w=u(y);d(w)&&n(B1,()=>B1(w,g))!==!0&&hz(_),m0.set(this,_),Mk.set(this,new Set),y.state!=="closed"&&v&&uo(this),t(this,S,_)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(y){this._nativeAudioNode.channelCount=y}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(y){this._nativeAudioNode.channelCountMode=y}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(y){this._nativeAudioNode.channelInterpretation=y}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(y,v=0,_=0){if(v<0||v>=this._nativeAudioNode.numberOfOutputs)throw i();const S=u(this._context),w=m(S);if(h(y)||f(y))throw r();if(Ld(y)){const C=Ze(y);try{const A=Vd(this._nativeAudioNode,C,v,_),k=zu(this);(w||k)&&this._nativeAudioNode.disconnect(...A),this.context.state!=="closed"&&!k&&zu(y)&&uo(y)}catch(A){throw A.code===12?r():A}if(e(this,y,v,_,w)){const A=l([this],y);vp(A,s(w))}return y}const E=$l(y);if(E.name==="playbackRate"&&E.maxValue===1024)throw a();try{this._nativeAudioNode.connect(E,v),(w||zu(this))&&this._nativeAudioNode.disconnect(E,v)}catch(C){throw C.code===12?r():C}if(fz(this,y,v,w)){const C=l([this],y);vp(C,s(w))}}disconnect(y,v,_){let S;const w=u(this._context),E=m(w);if(y===void 0)S=gz(this,E);else if(typeof y=="number"){if(y<0||y>=this.numberOfOutputs)throw i();S=yz(this,E,y)}else{if(v!==void 0&&(v<0||v>=this.numberOfOutputs)||Ld(y)&&_!==void 0&&(_<0||_>=y.numberOfInputs))throw i();if(S=vz(this,E,y,v,_),S.length===0)throw r()}for(const T of S){const C=l([this],T);vp(C,o)}}},xz=(t,e,n,s,i,r,a,o,l,c,u,d,h)=>(f,m,g,b=null,y=null)=>{const v=g.value,_=new MV(v),S=m?s(_):null,w={get defaultValue(){return v},get maxValue(){return b===null?g.maxValue:b},get minValue(){return y===null?g.minValue:y},get value(){return g.value},set value(E){g.value=E,w.setValueAtTime(E,f.context.currentTime)},cancelAndHoldAtTime(E){if(typeof g.cancelAndHoldAtTime=="function")S===null&&_.flush(f.context.currentTime),_.add(i(E)),g.cancelAndHoldAtTime(E);else{const T=Array.from(_).pop();S===null&&_.flush(f.context.currentTime),_.add(i(E));const C=Array.from(_).pop();g.cancelScheduledValues(E),T!==C&&C!==void 0&&(C.type==="exponentialRampToValue"?g.exponentialRampToValueAtTime(C.value,C.endTime):C.type==="linearRampToValue"?g.linearRampToValueAtTime(C.value,C.endTime):C.type==="setValue"?g.setValueAtTime(C.value,C.startTime):C.type==="setValueCurve"&&g.setValueCurveAtTime(C.values,C.startTime,C.duration))}return w},cancelScheduledValues(E){return S===null&&_.flush(f.context.currentTime),_.add(r(E)),g.cancelScheduledValues(E),w},exponentialRampToValueAtTime(E,T){if(E===0)throw new RangeError;if(!Number.isFinite(T)||T<0)throw new RangeError;const C=f.context.currentTime;return S===null&&_.flush(C),Array.from(_).length===0&&(_.add(c(v,C)),g.setValueAtTime(v,C)),_.add(a(E,T)),g.exponentialRampToValueAtTime(E,T),w},linearRampToValueAtTime(E,T){const C=f.context.currentTime;return S===null&&_.flush(C),Array.from(_).length===0&&(_.add(c(v,C)),g.setValueAtTime(v,C)),_.add(o(E,T)),g.linearRampToValueAtTime(E,T),w},setTargetAtTime(E,T,C){return S===null&&_.flush(f.context.currentTime),_.add(l(E,T,C)),g.setTargetAtTime(E,T,C),w},setValueAtTime(E,T){return S===null&&_.flush(f.context.currentTime),_.add(c(E,T)),g.setValueAtTime(E,T),w},setValueCurveAtTime(E,T,C){const N=E instanceof Float32Array?E:new Float32Array(E);if(d!==null&&d.name==="webkitAudioContext"){const A=T+C,k=f.context.sampleRate,O=Math.ceil(T*k),P=Math.floor(A*k),j=P-O,I=new Float32Array(j);for(let D=0;D<j;D+=1){const M=(N.length-1)/C*((O+D)/k-T),B=Math.floor(M),z=Math.ceil(M);I[D]=B===z?N[B]:(1-(M-B))*N[B]+(1-(z-M))*N[z]}S===null&&_.flush(f.context.currentTime),_.add(u(I,T,C)),g.setValueCurveAtTime(I,T,C);const R=P/k;R<A&&h(w,I[I.length-1],R),h(w,N[N.length-1],A)}else S===null&&_.flush(f.context.currentTime),_.add(u(N,T,C)),g.setValueCurveAtTime(N,T,C);return w}};return n.set(w,g),e.set(w,f),t(w,S),w},_z=t=>({replay(e){for(const n of t)if(n.type==="exponentialRampToValue"){const{endTime:s,value:i}=n;e.exponentialRampToValueAtTime(i,s)}else if(n.type==="linearRampToValue"){const{endTime:s,value:i}=n;e.linearRampToValueAtTime(i,s)}else if(n.type==="setTarget"){const{startTime:s,target:i,timeConstant:r}=n;e.setTargetAtTime(i,s,r)}else if(n.type==="setValue"){const{startTime:s,value:i}=n;e.setValueAtTime(i,s)}else if(n.type==="setValueCurve"){const{duration:s,startTime:i,values:r}=n;e.setValueCurveAtTime(r,i,s)}else throw new Error("Can't apply an unknown automation.")}});class Vk{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((s,i)=>e.call(n,s,i,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const Sz={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},wz=(t,e,n,s,i,r,a,o,l,c,u,d,h,f)=>class extends e{constructor(g,b,y){var v;const _=o(g),S=l(_),w=u({...Sz,...y});h(w);const E=rg.get(_),T=E==null?void 0:E.get(b),C=S||_.state!=="closed"?_:(v=a(_))!==null&&v!==void 0?v:_,N=i(C,S?null:g.baseLatency,c,b,T,w),A=S?s(b,w,T):null;super(g,!0,N,A);const k=[];N.parameters.forEach((P,j)=>{const I=n(this,S,P);k.push([j,I])}),this._nativeAudioWorkletNode=N,this._onprocessorerror=null,this._parameters=new Vk(k),S&&t(_,this);const{activeInputs:O}=r(this);d(N,O)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(g){const b=typeof g=="function"?f(this,g):null;this._nativeAudioWorkletNode.onprocessorerror=b;const y=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=y!==null&&y===b?g:y}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Hd(t,e,n,s,i){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],s,i);else{const r=t.getChannelData(s);if(e[n].byteLength===0)e[n]=r.slice(i,i+128);else{const a=new Float32Array(r.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(a)}}}const zk=(t,e,n,s,i)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],s,i):e[n].byteLength!==0&&t.getChannelData(s).set(e[n],i)},Ud=(t,e)=>{const n=[];for(let s=0;s<t;s+=1){const i=[],r=typeof e=="number"?e:e[s];for(let a=0;a<r;a+=1)i.push(new Float32Array(128));n.push(i)}return n},Cz=(t,e)=>{const n=is(ag,t),s=Ze(e);return is(n,s)},Tz=async(t,e,n,s,i,r,a)=>{const o=e===null?Math.ceil(t.context.length/128)*128:e.length,l=s.channelCount*s.numberOfInputs,c=i.reduce((b,y)=>b+y,0),u=c===0?null:n.createBuffer(c,o,n.sampleRate);if(r===void 0)throw new Error("Missing the processor constructor.");const d=Yt(t),h=await Cz(n,t),f=Ud(s.numberOfInputs,s.channelCount),m=Ud(s.numberOfOutputs,i),g=Array.from(t.parameters.keys()).reduce((b,y)=>({...b,[y]:new Float32Array(128)}),{});for(let b=0;b<o;b+=128){if(s.numberOfInputs>0&&e!==null)for(let y=0;y<s.numberOfInputs;y+=1)for(let v=0;v<s.channelCount;v+=1)Hd(e,f[y],v,v,b);r.parameterDescriptors!==void 0&&e!==null&&r.parameterDescriptors.forEach(({name:y},v)=>{Hd(e,g,y,l+v,b)});for(let y=0;y<s.numberOfInputs;y+=1)for(let v=0;v<i[y];v+=1)m[y][v].byteLength===0&&(m[y][v]=new Float32Array(128));try{const y=f.map((_,S)=>d.activeInputs[S].size===0?[]:_),v=a(b/n.sampleRate,n.sampleRate,()=>h.process(y,m,g));if(u!==null)for(let _=0,S=0;_<s.numberOfOutputs;_+=1){for(let w=0;w<i[_];w+=1)zk(u,m[_],w,S+w,b);S+=i[_]}if(!v)break}catch(y){t.dispatchEvent(new ErrorEvent("processorerror",{colno:y.colno,filename:y.filename,lineno:y.lineno,message:y.message}));break}}return u},Ez=(t,e,n,s,i,r,a,o,l,c,u,d,h,f,m,g)=>(b,y,v)=>{const _=new WeakMap;let S=null;const w=async(E,T)=>{let C=u(E),N=null;const A=Ht(C,T),k=Array.isArray(y.outputChannelCount)?y.outputChannelCount:Array.from(y.outputChannelCount);if(d===null){const O=k.reduce((R,D)=>R+D,0),P=i(T,{channelCount:Math.max(1,O),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,O)}),j=[];for(let R=0;R<E.numberOfOutputs;R+=1)j.push(s(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:k[R]}));const I=a(T,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1});I.connect=e.bind(null,j),I.disconnect=l.bind(null,j),N=[P,j,I]}else A||(C=new d(T,b));if(_.set(T,N===null?C:N[2]),N!==null){if(S===null){if(v===void 0)throw new Error("Missing the processor constructor.");if(h===null)throw new Error("Missing the native OfflineAudioContext constructor.");const D=E.channelCount*E.numberOfInputs,M=v.parameterDescriptors===void 0?0:v.parameterDescriptors.length,B=D+M;S=Tz(E,B===0?null:await(async()=>{const $=new h(B,Math.ceil(E.context.length/128)*128,T.sampleRate),ne=[],re=[];for(let ee=0;ee<y.numberOfInputs;ee+=1)ne.push(a($,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1})),re.push(i($,{channelCount:y.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:y.channelCount}));const ie=await Promise.all(Array.from(E.parameters.values()).map(async ee=>{const L=r($,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ee.value});return await f($,ee,L.offset),L})),K=s($,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,D+M)});for(let ee=0;ee<y.numberOfInputs;ee+=1){ne[ee].connect(re[ee]);for(let L=0;L<y.channelCount;L+=1)re[ee].connect(K,L,ee*y.channelCount+L)}for(const[ee,L]of ie.entries())L.connect(K,0,D+ee),L.start(0);return K.connect($.destination),await Promise.all(ne.map(ee=>m(E,$,ee))),g($)})(),T,y,k,v,c)}const O=await S,P=n(T,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[j,I,R]=N;O!==null&&(P.buffer=O,P.start(0)),P.connect(j);for(let D=0,M=0;D<E.numberOfOutputs;D+=1){const B=I[D];for(let z=0;z<k[D];z+=1)j.connect(B,M+z,z);M+=k[D]}return R}if(A)for(const[O,P]of E.parameters.entries())await t(T,P,C.parameters.get(O));else for(const[O,P]of E.parameters.entries())await f(T,P,C.parameters.get(O));return await m(E,T,C),C};return{render(E,T){o(T,E);const C=_.get(T);return C!==void 0?Promise.resolve(C):w(E,T)}}},Az=(t,e,n,s,i,r,a,o,l,c,u,d,h,f,m,g,b,y,v,_)=>class extends m{constructor(w,E){super(w,E),this._nativeContext=w,this._audioWorklet=t===void 0?void 0:{addModule:(T,C)=>t(this,T,C)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new i(this)}createBuffer(w,E,T){return new n({length:E,numberOfChannels:w,sampleRate:T})}createBufferSource(){return new s(this)}createChannelMerger(w=6){return new r(this,{numberOfInputs:w})}createChannelSplitter(w=6){return new a(this,{numberOfOutputs:w})}createConstantSource(){return new o(this)}createConvolver(){return new l(this)}createDelay(w=1){return new u(this,{maxDelayTime:w})}createDynamicsCompressor(){return new d(this)}createGain(){return new h(this)}createIIRFilter(w,E){return new f(this,{feedback:E,feedforward:w})}createOscillator(){return new g(this)}createPanner(){return new b(this)}createPeriodicWave(w,E,T={disableNormalization:!1}){return new y(this,{...T,imag:E,real:w})}createStereoPanner(){return new v(this)}createWaveShaper(){return new _(this)}decodeAudioData(w,E,T){return c(this._nativeContext,w).then(C=>(typeof E=="function"&&E(C),C),C=>{throw typeof T=="function"&&T(C),C})}},kz={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Nz=(t,e,n,s,i,r,a,o)=>class extends t{constructor(c,u){const d=r(c),h={...kz,...u},f=i(d,h),m=a(d),g=m?n():null;super(c,!1,f,g),this._Q=e(this,m,f.Q,Gt,rn),this._detune=e(this,m,f.detune,1200*Math.log2(Gt),-1200*Math.log2(Gt)),this._frequency=e(this,m,f.frequency,c.sampleRate/2,0),this._gain=e(this,m,f.gain,40*Math.log10(Gt),rn),this._nativeBiquadFilterNode=f,o(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(c){this._nativeBiquadFilterNode.type=c}getFrequencyResponse(c,u,d){try{this._nativeBiquadFilterNode.getFrequencyResponse(c,u,d)}catch(h){throw h.code===11?s():h}if(c.length!==u.length||u.length!==d.length)throw s()}},Mz=(t,e,n,s,i)=>()=>{const r=new WeakMap,a=async(o,l)=>{let c=n(o);const u=Ht(c,l);if(!u){const d={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type};c=e(l,d)}return r.set(l,c),u?(await t(l,o.Q,c.Q),await t(l,o.detune,c.detune),await t(l,o.frequency,c.frequency),await t(l,o.gain,c.gain)):(await s(l,o.Q,c.Q),await s(l,o.detune,c.detune),await s(l,o.frequency,c.frequency),await s(l,o.gain,c.gain)),await i(o,l,c),c};return{render(o,l){const c=r.get(l);return c!==void 0?Promise.resolve(c):a(o,l)}}},Rz=(t,e)=>(n,s)=>{const i=e.get(n);if(i!==void 0)return i;const r=t.get(n);if(r!==void 0)return r;try{const a=s();return a instanceof Promise?(t.set(n,a),a.catch(()=>!1).then(o=>(t.delete(n),e.set(n,o),o))):(e.set(n,a),a)}catch{return e.set(n,!1),!1}},Dz={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Oz=(t,e,n,s,i)=>class extends t{constructor(a,o){const l=s(a),c={...Dz,...o},u=n(l,c),d=i(l)?e():null;super(a,!1,u,d)}},jz=(t,e,n)=>()=>{const s=new WeakMap,i=async(r,a)=>{let o=e(r);if(!Ht(o,a)){const c={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfInputs:o.numberOfInputs};o=t(a,c)}return s.set(a,o),await n(r,a,o),o};return{render(r,a){const o=s.get(a);return o!==void 0?Promise.resolve(o):i(r,a)}}},Pz={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Bz=(t,e,n,s,i,r)=>class extends t{constructor(o,l){const c=s(o),u=r({...Pz,...l}),d=n(c,u),h=i(c)?e():null;super(o,!1,d,h)}},Iz=(t,e,n)=>()=>{const s=new WeakMap,i=async(r,a)=>{let o=e(r);if(!Ht(o,a)){const c={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfOutputs:o.numberOfOutputs};o=t(a,c)}return s.set(a,o),await n(r,a,o),o};return{render(r,a){const o=s.get(a);return o!==void 0?Promise.resolve(o):i(r,a)}}},Lz=t=>(e,n,s)=>t(n,e,s),Vz=t=>(e,n,s=0,i=0)=>{const r=e[s];if(r===void 0)throw t();return Fd(n)?r.connect(n,0,i):r.connect(n,0)},zz=t=>(e,n)=>{const s=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=e.createBuffer(1,2,44100);return s.buffer=i,s.loop=!0,s.connect(n),s.start(),()=>{s.stop(),s.disconnect(n)}},Fz={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Hz=(t,e,n,s,i,r,a)=>class extends t{constructor(l,c){const u=i(l),d={...Fz,...c},h=s(u,d),f=r(u),m=f?n():null;super(l,!1,h,m),this._constantSourceNodeRenderer=m,this._nativeConstantSourceNode=h,this._offset=e(this,f,h.offset,Gt,rn),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(l){const c=typeof l=="function"?a(this,l):null;this._nativeConstantSourceNode.onended=c;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===c?l:u}start(l=0){if(this._nativeConstantSourceNode.start(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=l),this.context.state!=="closed"){uo(this);const c=()=>{this._nativeConstantSourceNode.removeEventListener("ended",c),Qs(this)&&xc(this)};this._nativeConstantSourceNode.addEventListener("ended",c)}}stop(l=0){this._nativeConstantSourceNode.stop(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=l)}},Uz=(t,e,n,s,i)=>()=>{const r=new WeakMap;let a=null,o=null;const l=async(c,u)=>{let d=n(c);const h=Ht(d,u);if(!h){const f={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,offset:d.offset.value};d=e(u,f),a!==null&&d.start(a),o!==null&&d.stop(o)}return r.set(u,d),h?await t(u,c.offset,d.offset):await s(u,c.offset,d.offset),await i(c,u,d),d};return{set start(c){a=c},set stop(c){o=c},render(c,u){const d=r.get(u);return d!==void 0?Promise.resolve(d):l(c,u)}}},Gz=t=>e=>(t[0]=e,t[0]),qz={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Wz=(t,e,n,s,i,r)=>class extends t{constructor(o,l){const c=s(o),u={...qz,...l},d=n(c,u),f=i(c)?e():null;super(o,!1,d,f),this._isBufferNullified=!1,this._nativeConvolverNode=d,u.buffer!==null&&r(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(o){if(this._nativeConvolverNode.buffer=o,o===null&&this._nativeConvolverNode.buffer!==null){const l=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=l.createBuffer(1,1,l.sampleRate),this._isBufferNullified=!0,r(this,0)}else this._isBufferNullified=!1,r(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(o){this._nativeConvolverNode.normalize=o}},$z=(t,e,n)=>()=>{const s=new WeakMap,i=async(r,a)=>{let o=e(r);if(!Ht(o,a)){const c={buffer:o.buffer,channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,disableNormalization:!o.normalize};o=t(a,c)}return s.set(a,o),Po(o)?await n(r,a,o.inputs[0]):await n(r,a,o),o};return{render(r,a){const o=s.get(a);return o!==void 0?Promise.resolve(o):i(r,a)}}},Yz=(t,e)=>(n,s,i)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,s,i)}catch(r){throw r.name==="SyntaxError"?t():r}},Kz=()=>new DOMException("","DataCloneError"),I1=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(s=>{const i=()=>{n.onmessage=null,e.close(),n.close(),s()};n.onmessage=()=>i();try{e.postMessage(t,[t])}catch{}finally{i()}})},Xz=(t,e,n,s,i,r,a,o,l,c,u)=>(d,h)=>{const f=a(d)?d:r(d);if(i.has(h)){const m=n();return Promise.reject(m)}try{i.add(h)}catch{}return e(l,()=>l(f))?f.decodeAudioData(h).then(m=>(I1(h).catch(()=>{}),e(o,()=>o(m))||u(m),t.add(m),m)):new Promise((m,g)=>{const b=async()=>{try{await I1(h)}catch{}},y=v=>{g(v),b()};try{f.decodeAudioData(h,v=>{typeof v.copyFromChannel!="function"&&(c(v),y0(v)),t.add(v),b().then(()=>m(v))},v=>{y(v===null?s():v)})}catch(v){y(v)}})},Qz=(t,e,n,s,i,r,a,o)=>(l,c)=>{const u=e.get(l);if(u===void 0)throw new Error("Missing the expected cycle count.");const d=r(l.context),h=o(d);if(u===c){if(e.delete(l),!h&&a(l)){const f=s(l),{outputs:m}=n(l);for(const g of m)if(Sc(g)){const b=s(g[0]);t(f,b,g[1],g[2])}else{const b=i(g[0]);f.connect(b,g[1])}}}else e.set(l,u-c)},Zz={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Jz=(t,e,n,s,i,r,a)=>class extends t{constructor(l,c){const u=i(l),d={...Zz,...c},h=s(u,d),f=r(u),m=f?n(d.maxDelayTime):null;super(l,!1,h,m),this._delayTime=e(this,f,h.delayTime),a(this,d.maxDelayTime)}get delayTime(){return this._delayTime}},e7=(t,e,n,s,i)=>r=>{const a=new WeakMap,o=async(l,c)=>{let u=n(l);const d=Ht(u,c);if(!d){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:r};u=e(c,h)}return a.set(c,u),d?await t(c,l.delayTime,u.delayTime):await s(c,l.delayTime,u.delayTime),await i(l,c,u),u};return{render(l,c){const u=a.get(c);return u!==void 0?Promise.resolve(u):o(l,c)}}},t7=t=>(e,n,s,i)=>t(e[i],r=>r[0]===n&&r[1]===s),n7=t=>(e,n)=>{t(e).delete(n)},s7=t=>"delayTime"in t,i7=(t,e,n)=>function s(i,r){const a=Ld(r)?r:n(t,r);if(s7(a))return[];if(i[0]===a)return[i];if(i.includes(a))return[];const{outputs:o}=e(a);return Array.from(o).map(l=>s([...i,a],l[0])).reduce((l,c)=>l.concat(c),[])},uu=(t,e,n)=>{const s=e[n];if(s===void 0)throw t();return s},r7=t=>(e,n=void 0,s=void 0,i=0)=>n===void 0?e.forEach(r=>r.disconnect()):typeof n=="number"?uu(t,e,n).disconnect():Fd(n)?s===void 0?e.forEach(r=>r.disconnect(n)):i===void 0?uu(t,e,s).disconnect(n,0):uu(t,e,s).disconnect(n,0,i):s===void 0?e.forEach(r=>r.disconnect(n)):uu(t,e,s).disconnect(n,0),a7={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},o7=(t,e,n,s,i,r,a,o)=>class extends t{constructor(c,u){const d=r(c),h={...a7,...u},f=s(d,h),m=a(d),g=m?n():null;super(c,!1,f,g),this._attack=e(this,m,f.attack),this._knee=e(this,m,f.knee),this._nativeDynamicsCompressorNode=f,this._ratio=e(this,m,f.ratio),this._release=e(this,m,f.release),this._threshold=e(this,m,f.threshold),o(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(c){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=c,c>2)throw this._nativeDynamicsCompressorNode.channelCount=u,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(c){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=c,c==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},l7=(t,e,n,s,i)=>()=>{const r=new WeakMap,a=async(o,l)=>{let c=n(o);const u=Ht(c,l);if(!u){const d={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value};c=e(l,d)}return r.set(l,c),u?(await t(l,o.attack,c.attack),await t(l,o.knee,c.knee),await t(l,o.ratio,c.ratio),await t(l,o.release,c.release),await t(l,o.threshold,c.threshold)):(await s(l,o.attack,c.attack),await s(l,o.knee,c.knee),await s(l,o.ratio,c.ratio),await s(l,o.release,c.release),await s(l,o.threshold,c.threshold)),await i(o,l,c),c};return{render(o,l){const c=r.get(l);return c!==void 0?Promise.resolve(c):a(o,l)}}},c7=()=>new DOMException("","EncodingError"),u7=t=>e=>new Promise((n,s)=>{if(t===null){s(new SyntaxError);return}const i=t.document.head;if(i===null)s(new SyntaxError);else{const r=t.document.createElement("script"),a=new Blob([e],{type:"application/javascript"}),o=URL.createObjectURL(a),l=t.onerror,c=()=>{t.onerror=l,URL.revokeObjectURL(o)};t.onerror=(u,d,h,f,m)=>{if(d===o||d===t.location.href&&h===1&&f===1)return c(),s(m),!1;if(l!==null)return l(u,d,h,f,m)},r.onerror=()=>{c(),s(new SyntaxError)},r.onload=()=>{c(),n()},r.src=o,r.type="module",i.appendChild(r)}}),d7=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,s,i){if(s!==null){let r=this._listeners.get(s);r===void 0&&(r=t(this,s),typeof s=="function"&&this._listeners.set(s,r)),this._nativeEventTarget.addEventListener(n,r,i)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,s,i){const r=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(n,r===void 0?null:r,i)}},h7=t=>(e,n,s)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return s()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}},f7=t=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw t()},p7={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},m7=(t,e,n,s,i,r)=>class extends t{constructor(o,l){const c=i(o),u={...p7,...l},d=s(c,u),h=r(c),f=h?n():null;super(o,!1,d,f),this._gain=e(this,h,d.gain,Gt,rn)}get gain(){return this._gain}},g7=(t,e,n,s,i)=>()=>{const r=new WeakMap,a=async(o,l)=>{let c=n(o);const u=Ht(c,l);if(!u){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value};c=e(l,d)}return r.set(l,c),u?await t(l,o.gain,c.gain):await s(l,o.gain,c.gain),await i(o,l,c),c};return{render(o,l){const c=r.get(l);return c!==void 0?Promise.resolve(c):a(o,l)}}},y7=(t,e)=>n=>e(t,n),v7=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},b7=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0},x7=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},_7=t=>e=>t.get(e),kt=()=>new DOMException("","InvalidStateError"),S7=t=>e=>{const n=t.get(e);if(n===void 0)throw kt();return n},w7=(t,e)=>n=>{let s=t.get(n);if(s!==void 0)return s;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),t.set(n,s),s},C7=t=>e=>{const n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},Bh=()=>new DOMException("","InvalidAccessError"),T7=t=>{t.getFrequencyResponse=(e=>(n,s,i)=>{if(n.length!==s.length||s.length!==i.length)throw Bh();return e.call(t,n,s,i)})(t.getFrequencyResponse)},E7={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},A7=(t,e,n,s,i,r)=>class extends t{constructor(o,l){const c=s(o),u=i(c),d={...E7,...l},h=e(c,u?null:o.baseLatency,d),f=u?n(d.feedback,d.feedforward):null;super(o,!1,h,f),T7(h),this._nativeIIRFilterNode=h,r(this,1)}getFrequencyResponse(o,l,c){return this._nativeIIRFilterNode.getFrequencyResponse(o,l,c)}},Fk=(t,e,n,s,i,r,a,o,l,c,u)=>{const d=c.length;let h=o;for(let f=0;f<d;f+=1){let m=n[0]*c[f];for(let g=1;g<i;g+=1){const b=h-g&l-1;m+=n[g]*r[b],m-=t[g]*a[b]}for(let g=i;g<s;g+=1)m+=n[g]*r[h-g&l-1];for(let g=i;g<e;g+=1)m-=t[g]*a[h-g&l-1];r[h]=c[f],a[h]=m,h=h+1&l-1,u[f]=m}return h},k7=(t,e,n,s)=>{const i=n instanceof Float64Array?n:new Float64Array(n),r=s instanceof Float64Array?s:new Float64Array(s),a=i.length,o=r.length,l=Math.min(a,o);if(i[0]!==1){for(let m=0;m<a;m+=1)r[m]/=i[0];for(let m=1;m<o;m+=1)i[m]/=i[0]}const c=32,u=new Float32Array(c),d=new Float32Array(c),h=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),f=t.numberOfChannels;for(let m=0;m<f;m+=1){const g=t.getChannelData(m),b=h.getChannelData(m);u.fill(0),d.fill(0),Fk(i,a,r,o,l,u,d,0,c,g,b)}return h},N7=(t,e,n,s,i)=>(r,a)=>{const o=new WeakMap;let l=null;const c=async(u,d)=>{let h=null,f=e(u);const m=Ht(f,d);if(d.createIIRFilter===void 0?h=t(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):m||(f=d.createIIRFilter(a,r)),o.set(d,h===null?f:h),h!==null){if(l===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const b=new n(u.context.destination.channelCount,u.context.length,d.sampleRate);l=(async()=>{await s(u,b,b.destination);const y=await i(b);return k7(y,d,r,a)})()}const g=await l;return h.buffer=g,h.start(0),h}return await s(u,d,f),f};return{render(u,d){const h=o.get(d);return h!==void 0?Promise.resolve(h):c(u,d)}}},M7=(t,e,n,s,i,r)=>a=>(o,l)=>{const c=t.get(o);if(c===void 0){if(!a&&r(o)){const u=s(o),{outputs:d}=n(o);for(const h of d)if(Sc(h)){const f=s(h[0]);e(u,f,h[1],h[2])}else{const f=i(h[0]);u.disconnect(f,h[1])}}t.set(o,l)}else t.set(o,c+l)},R7=(t,e)=>n=>{const s=t.get(n);return e(s)||e(n)},D7=(t,e)=>n=>t.has(n)||e(n),O7=(t,e)=>n=>t.has(n)||e(n),j7=(t,e)=>n=>{const s=t.get(n);return e(s)||e(n)},P7=t=>e=>t!==null&&e instanceof t,B7=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode,I7=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam,L7=(t,e)=>n=>t(n)||e(n),V7=t=>e=>t!==null&&e instanceof t,z7=t=>t!==null&&t.isSecureContext,F7=(t,e,n,s)=>class extends t{constructor(r,a){const o=n(r),l=e(o,a);if(s(o))throw TypeError();super(r,!0,l,null),this._nativeMediaElementAudioSourceNode=l}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},H7={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},U7=(t,e,n,s)=>class extends t{constructor(r,a){const o=n(r);if(s(o))throw new TypeError;const l={...H7,...a},c=e(o,l);super(r,!1,c,null),this._nativeMediaStreamAudioDestinationNode=c}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},G7=(t,e,n,s)=>class extends t{constructor(r,a){const o=n(r),l=e(o,a);if(s(o))throw new TypeError;super(r,!0,l,null),this._nativeMediaStreamAudioSourceNode=l}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},q7=(t,e,n)=>class extends t{constructor(i,r){const a=n(i),o=e(a,r);super(i,!0,o,null)}},W7=(t,e,n,s,i,r)=>class extends n{constructor(o,l){super(o),this._nativeContext=o,jh.set(this,o),s(o)&&i.set(o,new Set),this._destination=new t(this,l),this._listener=e(this,o),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(o){const l=typeof o=="function"?r(this,o):null;this._nativeContext.onstatechange=l;const c=this._nativeContext.onstatechange;this._onstatechange=c!==null&&c===l?o:c}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Yl=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},$7=(t,e)=>(n,s,i)=>{const r=new Set;return n.connect=(a=>(o,l=0,c=0)=>{const u=r.size===0;if(e(o))return a.call(n,o,l,c),t(r,[o,l,c],d=>d[0]===o&&d[1]===l&&d[2]===c,!0),u&&s(),o;a.call(n,o,l),t(r,[o,l],d=>d[0]===o&&d[1]===l,!0),u&&s()})(n.connect),n.disconnect=(a=>(o,l,c)=>{const u=r.size>0;if(o===void 0)a.apply(n),r.clear();else if(typeof o=="number"){a.call(n,o);for(const h of r)h[1]===o&&r.delete(h)}else{e(o)?a.call(n,o,l,c):a.call(n,o,l);for(const h of r)h[0]===o&&(l===void 0||h[1]===l)&&(c===void 0||h[2]===c)&&r.delete(h)}const d=r.size===0;u&&d&&i()})(n.disconnect),n},tt=(t,e,n)=>{const s=e[n];s!==void 0&&s!==t[n]&&(t[n]=s)},Ct=(t,e)=>{tt(t,e,"channelCount"),tt(t,e,"channelCountMode"),tt(t,e,"channelInterpretation")},L1=t=>typeof t.getFloatTimeDomainData=="function",Y7=t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const s=Math.max(n.length,t.fftSize);for(let i=0;i<s;i+=1)e[i]=(n[i]-128)*.0078125;return e}},K7=(t,e)=>(n,s)=>{const i=n.createAnalyser();if(Ct(i,s),!(s.maxDecibels>s.minDecibels))throw e();return tt(i,s,"fftSize"),tt(i,s,"maxDecibels"),tt(i,s,"minDecibels"),tt(i,s,"smoothingTimeConstant"),t(L1,()=>L1(i))||Y7(i),i},X7=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,at=(t,e,n)=>{const s=e[n];s!==void 0&&s!==t[n].value&&(t[n].value=s)},Q7=t=>{t.start=(e=>{let n=!1;return(s=0,i=0,r)=>{if(n)throw kt();e.call(t,s,i,r),n=!0}})(t.start)},x0=t=>{t.start=(e=>(n=0,s=0,i)=>{if(typeof i=="number"&&i<0||s<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,s,i)})(t.start)},_0=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},Z7=(t,e,n,s,i,r,a,o,l,c,u)=>(d,h)=>{const f=d.createBufferSource();return Ct(f,h),at(f,h,"playbackRate"),tt(f,h,"buffer"),tt(f,h,"loop"),tt(f,h,"loopEnd"),tt(f,h,"loopStart"),e(n,()=>n(d))||Q7(f),e(s,()=>s(d))||l(f),e(i,()=>i(d))||c(f,d),e(r,()=>r(d))||x0(f),e(a,()=>a(d))||u(f,d),e(o,()=>o(d))||_0(f),t(d,f),f},J7=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,eF=(t,e)=>(n,s,i)=>{const r=n.destination;if(r.channelCount!==s)try{r.channelCount=s}catch{}i&&r.channelCountMode!=="explicit"&&(r.channelCountMode="explicit"),r.maxChannelCount===0&&Object.defineProperty(r,"maxChannelCount",{value:s});const a=t(n,{channelCount:s,channelCountMode:r.channelCountMode,channelInterpretation:r.channelInterpretation,gain:1});return e(a,"channelCount",o=>()=>o.call(a),o=>l=>{o.call(a,l);try{r.channelCount=l}catch(c){if(l>r.maxChannelCount)throw c}}),e(a,"channelCountMode",o=>()=>o.call(a),o=>l=>{o.call(a,l),r.channelCountMode=l}),e(a,"channelInterpretation",o=>()=>o.call(a),o=>l=>{o.call(a,l),r.channelInterpretation=l}),Object.defineProperty(a,"maxChannelCount",{get:()=>r.maxChannelCount}),a.connect(r),a},tF=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,nF=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},sF=(t,e,n,s,i)=>(r,a,o,l,c,u)=>{if(o!==null)try{const d=new o(r,l,u),h=new Map;let f=null;if(Object.defineProperties(d,{channelCount:{get:()=>u.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>f,set:m=>{typeof f=="function"&&d.removeEventListener("processorerror",f),f=typeof m=="function"?m:null,typeof f=="function"&&d.addEventListener("processorerror",f)}}}),d.addEventListener=(m=>(...g)=>{if(g[0]==="processorerror"){const b=typeof g[1]=="function"?g[1]:typeof g[1]=="object"&&g[1]!==null&&typeof g[1].handleEvent=="function"?g[1].handleEvent:null;if(b!==null){const y=h.get(g[1]);y!==void 0?g[1]=y:(g[1]=v=>{v.type==="error"?(Object.defineProperties(v,{type:{value:"processorerror"}}),b(v)):b(new ErrorEvent(g[0],{...v}))},h.set(b,g[1]))}}return m.call(d,"error",g[1],g[2]),m.call(d,...g)})(d.addEventListener),d.removeEventListener=(m=>(...g)=>{if(g[0]==="processorerror"){const b=h.get(g[1]);b!==void 0&&(h.delete(g[1]),g[1]=b)}return m.call(d,"error",g[1],g[2]),m.call(d,g[0],g[1],g[2])})(d.removeEventListener),u.numberOfOutputs!==0){const m=n(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return d.connect(m).connect(r.destination),i(d,()=>m.disconnect(),()=>m.connect(r.destination))}return d}catch(d){throw d.code===11?s():d}if(c===void 0)throw s();return nF(u),e(r,a,c,u)},Hk=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),iF=t=>new Promise((e,n)=>{const{port1:s,port2:i}=new MessageChannel;s.onmessage=({data:r})=>{s.close(),i.close(),e(r)},s.onmessageerror=({data:r})=>{s.close(),i.close(),n(r)},i.postMessage(t)}),rF=async(t,e)=>{const n=await iF(e);return new t(n)},aF=(t,e,n,s)=>{let i=ag.get(t);i===void 0&&(i=new WeakMap,ag.set(t,i));const r=rF(n,s);return i.set(e,r),r},oF=(t,e,n,s,i,r,a,o,l,c,u,d,h)=>(f,m,g,b)=>{if(b.numberOfInputs===0&&b.numberOfOutputs===0)throw l();const y=Array.isArray(b.outputChannelCount)?b.outputChannelCount:Array.from(b.outputChannelCount);if(y.some(Y=>Y<1))throw l();if(y.length!==b.numberOfOutputs)throw e();if(b.channelCountMode!=="explicit")throw l();const v=b.channelCount*b.numberOfInputs,_=y.reduce((Y,te)=>Y+te,0),S=g.parameterDescriptors===void 0?0:g.parameterDescriptors.length;if(v+S>6||_>6)throw l();const w=new MessageChannel,E=[],T=[];for(let Y=0;Y<b.numberOfInputs;Y+=1)E.push(a(f,{channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,gain:1})),T.push(i(f,{channelCount:b.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:b.channelCount}));const C=[];if(g.parameterDescriptors!==void 0)for(const{defaultValue:Y,maxValue:te,minValue:He,name:G}of g.parameterDescriptors){const W=r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:b.parameterData[G]!==void 0?b.parameterData[G]:Y===void 0?0:Y});Object.defineProperties(W.offset,{defaultValue:{get:()=>Y===void 0?0:Y},maxValue:{get:()=>te===void 0?Gt:te},minValue:{get:()=>He===void 0?rn:He}}),C.push(W)}const N=s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,v+S)}),A=Hk(m,f.sampleRate),k=o(f,A,v+S,Math.max(1,_)),O=i(f,{channelCount:Math.max(1,_),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,_)}),P=[];for(let Y=0;Y<b.numberOfOutputs;Y+=1)P.push(s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:y[Y]}));for(let Y=0;Y<b.numberOfInputs;Y+=1){E[Y].connect(T[Y]);for(let te=0;te<b.channelCount;te+=1)T[Y].connect(N,te,Y*b.channelCount+te)}const j=new Vk(g.parameterDescriptors===void 0?[]:g.parameterDescriptors.map(({name:Y},te)=>{const He=C[te];return He.connect(N,0,v+te),He.start(0),[Y,He.offset]}));N.connect(k);let I=b.channelInterpretation,R=null;const D=b.numberOfOutputs===0?[k]:P,M={get bufferSize(){return A},get channelCount(){return b.channelCount},set channelCount(Y){throw n()},get channelCountMode(){return b.channelCountMode},set channelCountMode(Y){throw n()},get channelInterpretation(){return I},set channelInterpretation(Y){for(const te of E)te.channelInterpretation=Y;I=Y},get context(){return k.context},get inputs(){return E},get numberOfInputs(){return b.numberOfInputs},get numberOfOutputs(){return b.numberOfOutputs},get onprocessorerror(){return R},set onprocessorerror(Y){typeof R=="function"&&M.removeEventListener("processorerror",R),R=typeof Y=="function"?Y:null,typeof R=="function"&&M.addEventListener("processorerror",R)},get parameters(){return j},get port(){return w.port2},addEventListener(...Y){return k.addEventListener(Y[0],Y[1],Y[2])},connect:t.bind(null,D),disconnect:c.bind(null,D),dispatchEvent(...Y){return k.dispatchEvent(Y[0])},removeEventListener(...Y){return k.removeEventListener(Y[0],Y[1],Y[2])}},B=new Map;w.port1.addEventListener=(Y=>(...te)=>{if(te[0]==="message"){const He=typeof te[1]=="function"?te[1]:typeof te[1]=="object"&&te[1]!==null&&typeof te[1].handleEvent=="function"?te[1].handleEvent:null;if(He!==null){const G=B.get(te[1]);G!==void 0?te[1]=G:(te[1]=W=>{u(f.currentTime,f.sampleRate,()=>He(W))},B.set(He,te[1]))}}return Y.call(w.port1,te[0],te[1],te[2])})(w.port1.addEventListener),w.port1.removeEventListener=(Y=>(...te)=>{if(te[0]==="message"){const He=B.get(te[1]);He!==void 0&&(B.delete(te[1]),te[1]=He)}return Y.call(w.port1,te[0],te[1],te[2])})(w.port1.removeEventListener);let z=null;Object.defineProperty(w.port1,"onmessage",{get:()=>z,set:Y=>{typeof z=="function"&&w.port1.removeEventListener("message",z),z=typeof Y=="function"?Y:null,typeof z=="function"&&(w.port1.addEventListener("message",z),w.port1.start())}}),g.prototype.port=w.port1;let $=null;aF(f,M,g,b).then(Y=>$=Y);const re=Ud(b.numberOfInputs,b.channelCount),ie=Ud(b.numberOfOutputs,y),K=g.parameterDescriptors===void 0?[]:g.parameterDescriptors.reduce((Y,{name:te})=>({...Y,[te]:new Float32Array(128)}),{});let ee=!0;const L=()=>{b.numberOfOutputs>0&&k.disconnect(O);for(let Y=0,te=0;Y<b.numberOfOutputs;Y+=1){const He=P[Y];for(let G=0;G<y[Y];G+=1)O.disconnect(He,te+G,G);te+=y[Y]}},V=new Map;k.onaudioprocess=({inputBuffer:Y,outputBuffer:te})=>{if($!==null){const He=d(M);for(let G=0;G<A;G+=128){for(let W=0;W<b.numberOfInputs;W+=1)for(let ae=0;ae<b.channelCount;ae+=1)Hd(Y,re[W],ae,ae,G);g.parameterDescriptors!==void 0&&g.parameterDescriptors.forEach(({name:W},ae)=>{Hd(Y,K,W,v+ae,G)});for(let W=0;W<b.numberOfInputs;W+=1)for(let ae=0;ae<y[W];ae+=1)ie[W][ae].byteLength===0&&(ie[W][ae]=new Float32Array(128));try{const W=re.map((Te,Ye)=>{if(He[Ye].size>0)return V.set(Ye,A/128),Te;const fi=V.get(Ye);return fi===void 0?[]:(Te.every(gr=>gr.every(ra=>ra===0))&&(fi===1?V.delete(Ye):V.set(Ye,fi-1)),Te)});ee=u(f.currentTime+G/f.sampleRate,f.sampleRate,()=>$.process(W,ie,K));for(let Te=0,Ye=0;Te<b.numberOfOutputs;Te+=1){for(let kn=0;kn<y[Te];kn+=1)zk(te,ie[Te],kn,Ye+kn,G);Ye+=y[Te]}}catch(W){ee=!1,M.dispatchEvent(new ErrorEvent("processorerror",{colno:W.colno,filename:W.filename,lineno:W.lineno,message:W.message}))}if(!ee){for(let W=0;W<b.numberOfInputs;W+=1){E[W].disconnect(T[W]);for(let ae=0;ae<b.channelCount;ae+=1)T[G].disconnect(N,ae,W*b.channelCount+ae)}if(g.parameterDescriptors!==void 0){const W=g.parameterDescriptors.length;for(let ae=0;ae<W;ae+=1){const Te=C[ae];Te.disconnect(N,0,v+ae),Te.stop()}}N.disconnect(k),k.onaudioprocess=null,le?L():me();break}}}};let le=!1;const fe=a(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),he=()=>k.connect(fe).connect(f.destination),me=()=>{k.disconnect(fe),fe.disconnect()},Mt=()=>{if(ee){me(),b.numberOfOutputs>0&&k.connect(O);for(let Y=0,te=0;Y<b.numberOfOutputs;Y+=1){const He=P[Y];for(let G=0;G<y[Y];G+=1)O.connect(He,te+G,G);te+=y[Y]}}le=!0},Zt=()=>{ee&&(he(),L()),le=!1};return he(),h(M,Mt,Zt)},Uk=(t,e)=>{const n=t.createBiquadFilter();return Ct(n,e),at(n,e,"Q"),at(n,e,"detune"),at(n,e,"frequency"),at(n,e,"gain"),tt(n,e,"type"),n},lF=(t,e)=>(n,s)=>{const i=n.createChannelMerger(s.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,i),Ct(i,s),i},cF=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw kt()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw kt()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw kt()}})},wc=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return Ct(n,e),cF(n),n},uF=(t,e,n,s,i)=>(r,a)=>{if(r.createConstantSource===void 0)return n(r,a);const o=r.createConstantSource();return Ct(o,a),at(o,a,"offset"),e(s,()=>s(r))||x0(o),e(i,()=>i(r))||_0(o),t(r,o),o},Bo=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),dF=(t,e,n,s)=>(i,{offset:r,...a})=>{const o=i.createBuffer(1,2,44100),l=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),c=n(i,{...a,gain:r}),u=o.getChannelData(0);u[0]=1,u[1]=1,l.buffer=o,l.loop=!0;const d={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(m){c.channelCount=m},get channelCountMode(){return c.channelCountMode},set channelCountMode(m){c.channelCountMode=m},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(m){c.channelInterpretation=m},get context(){return c.context},get inputs(){return[]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get offset(){return c.gain},get onended(){return l.onended},set onended(m){l.onended=m},addEventListener(...m){return l.addEventListener(m[0],m[1],m[2])},dispatchEvent(...m){return l.dispatchEvent(m[0])},removeEventListener(...m){return l.removeEventListener(m[0],m[1],m[2])},start(m=0){l.start.call(l,m)},stop(m=0){l.stop.call(l,m)}},h=()=>l.connect(c),f=()=>l.disconnect(c);return t(i,l),s(Bo(d,c),h,f)},hF=(t,e)=>(n,s)=>{const i=n.createConvolver();if(Ct(i,s),s.disableNormalization===i.normalize&&(i.normalize=!s.disableNormalization),tt(i,s,"buffer"),s.channelCount>2||(e(i,"channelCount",r=>()=>r.call(i),r=>a=>{if(a>2)throw t();return r.call(i,a)}),s.channelCountMode==="max"))throw t();return e(i,"channelCountMode",r=>()=>r.call(i),r=>a=>{if(a==="max")throw t();return r.call(i,a)}),i},Gk=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return Ct(n,e),at(n,e,"delayTime"),n},fF=t=>(e,n)=>{const s=e.createDynamicsCompressor();if(Ct(s,n),n.channelCount>2||n.channelCountMode==="max")throw t();return at(s,n,"attack"),at(s,n,"knee"),at(s,n,"ratio"),at(s,n,"release"),at(s,n,"threshold"),s},un=(t,e)=>{const n=t.createGain();return Ct(n,e),at(n,e,"gain"),n},pF=t=>(e,n,s)=>{if(e.createIIRFilter===void 0)return t(e,n,s);const i=e.createIIRFilter(s.feedforward,s.feedback);return Ct(i,s),i};function mF(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function gF(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function V1(t,e){let n=[0,0];for(let s=t.length-1;s>=0;s-=1)n=gF(n,e),n[0]+=t[s];return n}const yF=(t,e,n,s)=>(i,r,{channelCount:a,channelCountMode:o,channelInterpretation:l,feedback:c,feedforward:u})=>{const d=Hk(r,i.sampleRate),h=c instanceof Float64Array?c:new Float64Array(c),f=u instanceof Float64Array?u:new Float64Array(u),m=h.length,g=f.length,b=Math.min(m,g);if(m===0||m>20)throw s();if(h[0]===0)throw e();if(g===0||g>20)throw s();if(f[0]===0)throw e();if(h[0]!==1){for(let C=0;C<g;C+=1)f[C]/=h[0];for(let C=1;C<m;C+=1)h[C]/=h[0]}const y=n(i,d,a,a);y.channelCount=a,y.channelCountMode=o,y.channelInterpretation=l;const v=32,_=[],S=[],w=[];for(let C=0;C<a;C+=1){_.push(0);const N=new Float32Array(v),A=new Float32Array(v);N.fill(0),A.fill(0),S.push(N),w.push(A)}y.onaudioprocess=C=>{const N=C.inputBuffer,A=C.outputBuffer,k=N.numberOfChannels;for(let O=0;O<k;O+=1){const P=N.getChannelData(O),j=A.getChannelData(O);_[O]=Fk(h,m,f,g,b,S[O],w[O],_[O],v,P,j)}};const E=i.sampleRate/2;return Bo({get bufferSize(){return d},get channelCount(){return y.channelCount},set channelCount(C){y.channelCount=C},get channelCountMode(){return y.channelCountMode},set channelCountMode(C){y.channelCountMode=C},get channelInterpretation(){return y.channelInterpretation},set channelInterpretation(C){y.channelInterpretation=C},get context(){return y.context},get inputs(){return[y]},get numberOfInputs(){return y.numberOfInputs},get numberOfOutputs(){return y.numberOfOutputs},addEventListener(...C){return y.addEventListener(C[0],C[1],C[2])},dispatchEvent(...C){return y.dispatchEvent(C[0])},getFrequencyResponse(C,N,A){if(C.length!==N.length||N.length!==A.length)throw t();const k=C.length;for(let O=0;O<k;O+=1){const P=-Math.PI*(C[O]/E),j=[Math.cos(P),Math.sin(P)],I=V1(f,j),R=V1(h,j),D=mF(I,R);N[O]=Math.sqrt(D[0]*D[0]+D[1]*D[1]),A[O]=Math.atan2(D[1],D[0])}},removeEventListener(...C){return y.removeEventListener(C[0],C[1],C[2])}},y)},vF=(t,e)=>t.createMediaElementSource(e.mediaElement),bF=(t,e)=>{const n=t.createMediaStreamDestination();return Ct(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},xF=(t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((r,a)=>r.id<a.id?-1:r.id>a.id?1:0);const s=n.slice(0,1),i=t.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(i,"mediaStream",{value:e}),i},_F=(t,e)=>(n,{mediaStreamTrack:s})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(s);const i=new MediaStream([s]),r=n.createMediaStreamSource(i);if(s.kind!=="audio")throw t();if(e(n))throw new TypeError;return r},SF=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,wF=(t,e,n,s,i,r)=>(a,o)=>{const l=a.createOscillator();return Ct(l,o),at(l,o,"detune"),at(l,o,"frequency"),o.periodicWave!==void 0?l.setPeriodicWave(o.periodicWave):tt(l,o,"type"),e(n,()=>n(a))||x0(l),e(s,()=>s(a))||r(l,a),e(i,()=>i(a))||_0(l),t(a,l),l},CF=t=>(e,n)=>{const s=e.createPanner();return s.orientationX===void 0?t(e,n):(Ct(s,n),at(s,n,"orientationX"),at(s,n,"orientationY"),at(s,n,"orientationZ"),at(s,n,"positionX"),at(s,n,"positionY"),at(s,n,"positionZ"),tt(s,n,"coneInnerAngle"),tt(s,n,"coneOuterAngle"),tt(s,n,"coneOuterGain"),tt(s,n,"distanceModel"),tt(s,n,"maxDistance"),tt(s,n,"panningModel"),tt(s,n,"refDistance"),tt(s,n,"rolloffFactor"),s)},TF=(t,e,n,s,i,r,a,o,l,c)=>(u,{coneInnerAngle:d,coneOuterAngle:h,coneOuterGain:f,distanceModel:m,maxDistance:g,orientationX:b,orientationY:y,orientationZ:v,panningModel:_,positionX:S,positionY:w,positionZ:E,refDistance:T,rolloffFactor:C,...N})=>{const A=u.createPanner();if(N.channelCount>2||N.channelCountMode==="max")throw a();Ct(A,N);const k={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},O=n(u,{...k,channelInterpretation:"speakers",numberOfInputs:6}),P=s(u,{...N,gain:1}),j=s(u,{...k,gain:1}),I=s(u,{...k,gain:0}),R=s(u,{...k,gain:0}),D=s(u,{...k,gain:0}),M=s(u,{...k,gain:0}),B=s(u,{...k,gain:0}),z=i(u,256,6,1),$=r(u,{...k,curve:new Float32Array([1,1]),oversample:"none"});let ne=[b,y,v],re=[S,w,E];const ie=new Float32Array(1);z.onaudioprocess=({inputBuffer:V})=>{const le=[l(V,ie,0),l(V,ie,1),l(V,ie,2)];le.some((he,me)=>he!==ne[me])&&(A.setOrientation(...le),ne=le);const fe=[l(V,ie,3),l(V,ie,4),l(V,ie,5)];fe.some((he,me)=>he!==re[me])&&(A.setPosition(...fe),re=fe)},Object.defineProperty(I.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(M.gain,"defaultValue",{get:()=>0}),Object.defineProperty(B.gain,"defaultValue",{get:()=>0});const K={get bufferSize(){},get channelCount(){return A.channelCount},set channelCount(V){if(V>2)throw a();P.channelCount=V,A.channelCount=V},get channelCountMode(){return A.channelCountMode},set channelCountMode(V){if(V==="max")throw a();P.channelCountMode=V,A.channelCountMode=V},get channelInterpretation(){return A.channelInterpretation},set channelInterpretation(V){P.channelInterpretation=V,A.channelInterpretation=V},get coneInnerAngle(){return A.coneInnerAngle},set coneInnerAngle(V){A.coneInnerAngle=V},get coneOuterAngle(){return A.coneOuterAngle},set coneOuterAngle(V){A.coneOuterAngle=V},get coneOuterGain(){return A.coneOuterGain},set coneOuterGain(V){if(V<0||V>1)throw e();A.coneOuterGain=V},get context(){return A.context},get distanceModel(){return A.distanceModel},set distanceModel(V){A.distanceModel=V},get inputs(){return[P]},get maxDistance(){return A.maxDistance},set maxDistance(V){if(V<0)throw new RangeError;A.maxDistance=V},get numberOfInputs(){return A.numberOfInputs},get numberOfOutputs(){return A.numberOfOutputs},get orientationX(){return j.gain},get orientationY(){return I.gain},get orientationZ(){return R.gain},get panningModel(){return A.panningModel},set panningModel(V){A.panningModel=V},get positionX(){return D.gain},get positionY(){return M.gain},get positionZ(){return B.gain},get refDistance(){return A.refDistance},set refDistance(V){if(V<0)throw new RangeError;A.refDistance=V},get rolloffFactor(){return A.rolloffFactor},set rolloffFactor(V){if(V<0)throw new RangeError;A.rolloffFactor=V},addEventListener(...V){return P.addEventListener(V[0],V[1],V[2])},dispatchEvent(...V){return P.dispatchEvent(V[0])},removeEventListener(...V){return P.removeEventListener(V[0],V[1],V[2])}};d!==K.coneInnerAngle&&(K.coneInnerAngle=d),h!==K.coneOuterAngle&&(K.coneOuterAngle=h),f!==K.coneOuterGain&&(K.coneOuterGain=f),m!==K.distanceModel&&(K.distanceModel=m),g!==K.maxDistance&&(K.maxDistance=g),b!==K.orientationX.value&&(K.orientationX.value=b),y!==K.orientationY.value&&(K.orientationY.value=y),v!==K.orientationZ.value&&(K.orientationZ.value=v),_!==K.panningModel&&(K.panningModel=_),S!==K.positionX.value&&(K.positionX.value=S),w!==K.positionY.value&&(K.positionY.value=w),E!==K.positionZ.value&&(K.positionZ.value=E),T!==K.refDistance&&(K.refDistance=T),C!==K.rolloffFactor&&(K.rolloffFactor=C),(ne[0]!==1||ne[1]!==0||ne[2]!==0)&&A.setOrientation(...ne),(re[0]!==0||re[1]!==0||re[2]!==0)&&A.setPosition(...re);const ee=()=>{P.connect(A),t(P,$,0,0),$.connect(j).connect(O,0,0),$.connect(I).connect(O,0,1),$.connect(R).connect(O,0,2),$.connect(D).connect(O,0,3),$.connect(M).connect(O,0,4),$.connect(B).connect(O,0,5),O.connect(z).connect(u.destination)},L=()=>{P.disconnect(A),o(P,$,0,0),$.disconnect(j),j.disconnect(O),$.disconnect(I),I.disconnect(O),$.disconnect(R),R.disconnect(O),$.disconnect(D),D.disconnect(O),$.disconnect(M),M.disconnect(O),$.disconnect(B),B.disconnect(O),O.disconnect(z),z.disconnect(u.destination)};return c(Bo(K,A),ee,L)},EF=t=>(e,{disableNormalization:n,imag:s,real:i})=>{const r=s instanceof Float32Array?s:new Float32Array(s),a=i instanceof Float32Array?i:new Float32Array(i),o=e.createPeriodicWave(a,r,{disableNormalization:n});if(Array.from(s).length<2)throw t();return o},Cc=(t,e,n,s)=>t.createScriptProcessor(e,n,s),AF=(t,e)=>(n,s)=>{const i=s.channelCountMode;if(i==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,s);const r=n.createStereoPanner();return Ct(r,s),at(r,s,"pan"),Object.defineProperty(r,"channelCountMode",{get:()=>i,set:a=>{if(a!==i)throw e()}}),r},kF=(t,e,n,s,i,r)=>{const o=new Float32Array([1,1]),l=Math.PI/2,c={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...c,oversample:"none"},d=(m,g,b,y)=>{const v=new Float32Array(16385),_=new Float32Array(16385);for(let N=0;N<16385;N+=1){const A=N/16384*l;v[N]=Math.cos(A),_[N]=Math.sin(A)}const S=n(m,{...c,gain:0}),w=s(m,{...u,curve:v}),E=s(m,{...u,curve:o}),T=n(m,{...c,gain:0}),C=s(m,{...u,curve:_});return{connectGraph(){g.connect(S),g.connect(E.inputs===void 0?E:E.inputs[0]),g.connect(T),E.connect(b),b.connect(w.inputs===void 0?w:w.inputs[0]),b.connect(C.inputs===void 0?C:C.inputs[0]),w.connect(S.gain),C.connect(T.gain),S.connect(y,0,0),T.connect(y,0,1)},disconnectGraph(){g.disconnect(S),g.disconnect(E.inputs===void 0?E:E.inputs[0]),g.disconnect(T),E.disconnect(b),b.disconnect(w.inputs===void 0?w:w.inputs[0]),b.disconnect(C.inputs===void 0?C:C.inputs[0]),w.disconnect(S.gain),C.disconnect(T.gain),S.disconnect(y,0,0),T.disconnect(y,0,1)}}},h=(m,g,b,y)=>{const v=new Float32Array(16385),_=new Float32Array(16385),S=new Float32Array(16385),w=new Float32Array(16385),E=Math.floor(16385/2);for(let D=0;D<16385;D+=1)if(D>E){const M=(D-E)/(16384-E)*l;v[D]=Math.cos(M),_[D]=Math.sin(M),S[D]=0,w[D]=1}else{const M=D/(16384-E)*l;v[D]=1,_[D]=0,S[D]=Math.cos(M),w[D]=Math.sin(M)}const T=e(m,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),C=n(m,{...c,gain:0}),N=s(m,{...u,curve:v}),A=n(m,{...c,gain:0}),k=s(m,{...u,curve:_}),O=s(m,{...u,curve:o}),P=n(m,{...c,gain:0}),j=s(m,{...u,curve:S}),I=n(m,{...c,gain:0}),R=s(m,{...u,curve:w});return{connectGraph(){g.connect(T),g.connect(O.inputs===void 0?O:O.inputs[0]),T.connect(C,0),T.connect(A,0),T.connect(P,1),T.connect(I,1),O.connect(b),b.connect(N.inputs===void 0?N:N.inputs[0]),b.connect(k.inputs===void 0?k:k.inputs[0]),b.connect(j.inputs===void 0?j:j.inputs[0]),b.connect(R.inputs===void 0?R:R.inputs[0]),N.connect(C.gain),k.connect(A.gain),j.connect(P.gain),R.connect(I.gain),C.connect(y,0,0),P.connect(y,0,0),A.connect(y,0,1),I.connect(y,0,1)},disconnectGraph(){g.disconnect(T),g.disconnect(O.inputs===void 0?O:O.inputs[0]),T.disconnect(C,0),T.disconnect(A,0),T.disconnect(P,1),T.disconnect(I,1),O.disconnect(b),b.disconnect(N.inputs===void 0?N:N.inputs[0]),b.disconnect(k.inputs===void 0?k:k.inputs[0]),b.disconnect(j.inputs===void 0?j:j.inputs[0]),b.disconnect(R.inputs===void 0?R:R.inputs[0]),N.disconnect(C.gain),k.disconnect(A.gain),j.disconnect(P.gain),R.disconnect(I.gain),C.disconnect(y,0,0),P.disconnect(y,0,0),A.disconnect(y,0,1),I.disconnect(y,0,1)}}},f=(m,g,b,y,v)=>{if(g===1)return d(m,b,y,v);if(g===2)return h(m,b,y,v);throw i()};return(m,{channelCount:g,channelCountMode:b,pan:y,...v})=>{if(b==="max")throw i();const _=t(m,{...v,channelCount:1,channelCountMode:b,numberOfInputs:2}),S=n(m,{...v,channelCount:g,channelCountMode:b,gain:1}),w=n(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:y});let{connectGraph:E,disconnectGraph:T}=f(m,g,S,w,_);Object.defineProperty(w.gain,"defaultValue",{get:()=>0}),Object.defineProperty(w.gain,"maxValue",{get:()=>1}),Object.defineProperty(w.gain,"minValue",{get:()=>-1});const C={get bufferSize(){},get channelCount(){return S.channelCount},set channelCount(O){S.channelCount!==O&&(N&&T(),{connectGraph:E,disconnectGraph:T}=f(m,O,S,w,_),N&&E()),S.channelCount=O},get channelCountMode(){return S.channelCountMode},set channelCountMode(O){if(O==="clamped-max"||O==="max")throw i();S.channelCountMode=O},get channelInterpretation(){return S.channelInterpretation},set channelInterpretation(O){S.channelInterpretation=O},get context(){return S.context},get inputs(){return[S]},get numberOfInputs(){return S.numberOfInputs},get numberOfOutputs(){return S.numberOfOutputs},get pan(){return w.gain},addEventListener(...O){return S.addEventListener(O[0],O[1],O[2])},dispatchEvent(...O){return S.dispatchEvent(O[0])},removeEventListener(...O){return S.removeEventListener(O[0],O[1],O[2])}};let N=!1;const A=()=>{E(),N=!0},k=()=>{T(),N=!1};return r(Bo(C,_),A,k)}},NF=(t,e,n,s,i,r,a)=>(o,l)=>{const c=o.createWaveShaper();if(r!==null&&r.name==="webkitAudioContext"&&o.createGain().gain.automationRate===void 0)return n(o,l);Ct(c,l);const u=l.curve===null||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(u!==null&&u.length<2)throw e();tt(c,{curve:u},"curve"),tt(c,l,"oversample");let d=null,h=!1;return a(c,"curve",g=>()=>g.call(c),g=>b=>(g.call(c,b),h&&(s(b)&&d===null?d=t(o,c):!s(b)&&d!==null&&(d(),d=null)),b)),i(c,()=>{h=!0,s(c.curve)&&(d=t(o,c))},()=>{h=!1,d!==null&&(d(),d=null)})},MF=(t,e,n,s,i)=>(r,{curve:a,oversample:o,...l})=>{const c=r.createWaveShaper(),u=r.createWaveShaper();Ct(c,l),Ct(u,l);const d=n(r,{...l,gain:1}),h=n(r,{...l,gain:-1}),f=n(r,{...l,gain:1}),m=n(r,{...l,gain:-1});let g=null,b=!1,y=null;const v={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(w){d.channelCount=w,h.channelCount=w,c.channelCount=w,f.channelCount=w,u.channelCount=w,m.channelCount=w},get channelCountMode(){return c.channelCountMode},set channelCountMode(w){d.channelCountMode=w,h.channelCountMode=w,c.channelCountMode=w,f.channelCountMode=w,u.channelCountMode=w,m.channelCountMode=w},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(w){d.channelInterpretation=w,h.channelInterpretation=w,c.channelInterpretation=w,f.channelInterpretation=w,u.channelInterpretation=w,m.channelInterpretation=w},get context(){return c.context},get curve(){return y},set curve(w){if(w!==null&&w.length<2)throw e();if(w===null)c.curve=w,u.curve=w;else{const E=w.length,T=new Float32Array(E+2-E%2),C=new Float32Array(E+2-E%2);T[0]=w[0],C[0]=-w[E-1];const N=Math.ceil((E+1)/2),A=(E+1)/2-1;for(let k=1;k<N;k+=1){const O=k/N*A,P=Math.floor(O),j=Math.ceil(O);T[k]=P===j?w[P]:(1-(O-P))*w[P]+(1-(j-O))*w[j],C[k]=P===j?-w[E-1-P]:-((1-(O-P))*w[E-1-P])-(1-(j-O))*w[E-1-j]}T[N]=E%2===1?w[N-1]:(w[N-2]+w[N-1])/2,c.curve=T,u.curve=C}y=w,b&&(s(y)&&g===null?g=t(r,d):g!==null&&(g(),g=null))},get inputs(){return[d]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get oversample(){return c.oversample},set oversample(w){c.oversample=w,u.oversample=w},addEventListener(...w){return d.addEventListener(w[0],w[1],w[2])},dispatchEvent(...w){return d.dispatchEvent(w[0])},removeEventListener(...w){return d.removeEventListener(w[0],w[1],w[2])}};a!==null&&(v.curve=a instanceof Float32Array?a:new Float32Array(a)),o!==v.oversample&&(v.oversample=o);const _=()=>{d.connect(c).connect(f),d.connect(h).connect(u).connect(m).connect(f),b=!0,s(y)&&(g=t(r,d))},S=()=>{d.disconnect(c),c.disconnect(f),d.disconnect(h),h.disconnect(u),u.disconnect(m),m.disconnect(f),b=!1,g!==null&&(g(),g=null)};return i(Bo(v,f),_,S)},Qt=()=>new DOMException("","NotSupportedError"),RF={numberOfChannels:1},DF=(t,e,n,s,i)=>class extends t{constructor(a,o,l){let c;if(typeof a=="number"&&o!==void 0&&l!==void 0)c={length:o,numberOfChannels:a,sampleRate:l};else if(typeof a=="object")c=a;else throw new Error("The given parameters are not valid.");const{length:u,numberOfChannels:d,sampleRate:h}={...RF,...c},f=s(d,u,h);e(Yl,()=>Yl(f))||f.addEventListener("statechange",(()=>{let m=0;const g=b=>{this._state==="running"&&(m>0?(f.removeEventListener("statechange",g),b.stopImmediatePropagation(),this._waitForThePromiseToSettle(b)):m+=1)};return g})()),super(f,d),this._length=u,this._nativeOfflineAudioContext=f,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(n()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Pk(this)}))}_waitForThePromiseToSettle(a){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(a):setTimeout(()=>this._waitForThePromiseToSettle(a))}},OF={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},jF=(t,e,n,s,i,r,a)=>class extends t{constructor(l,c){const u=i(l),d={...OF,...c},h=n(u,d),f=r(u),m=f?s():null,g=l.sampleRate/2;super(l,!1,h,m),this._detune=e(this,f,h.detune,153600,-153600),this._frequency=e(this,f,h.frequency,g,-g),this._nativeOscillatorNode=h,this._onended=null,this._oscillatorNodeRenderer=m,this._oscillatorNodeRenderer!==null&&d.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=d.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(l){const c=typeof l=="function"?a(this,l):null;this._nativeOscillatorNode.onended=c;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===c?l:u}get type(){return this._nativeOscillatorNode.type}set type(l){this._nativeOscillatorNode.type=l,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(l){this._nativeOscillatorNode.setPeriodicWave(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=l)}start(l=0){if(this._nativeOscillatorNode.start(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=l),this.context.state!=="closed"){uo(this);const c=()=>{this._nativeOscillatorNode.removeEventListener("ended",c),Qs(this)&&xc(this)};this._nativeOscillatorNode.addEventListener("ended",c)}}stop(l=0){this._nativeOscillatorNode.stop(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=l)}},PF=(t,e,n,s,i)=>()=>{const r=new WeakMap;let a=null,o=null,l=null;const c=async(u,d)=>{let h=n(u);const f=Ht(h,d);if(!f){const m={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,periodicWave:a===null?void 0:a,type:h.type};h=e(d,m),o!==null&&h.start(o),l!==null&&h.stop(l)}return r.set(d,h),f?(await t(d,u.detune,h.detune),await t(d,u.frequency,h.frequency)):(await s(d,u.detune,h.detune),await s(d,u.frequency,h.frequency)),await i(u,d,h),h};return{set periodicWave(u){a=u},set start(u){o=u},set stop(u){l=u},render(u,d){const h=r.get(d);return h!==void 0?Promise.resolve(h):c(u,d)}}},BF={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},IF=(t,e,n,s,i,r,a)=>class extends t{constructor(l,c){const u=i(l),d={...BF,...c},h=n(u,d),f=r(u),m=f?s():null;super(l,!1,h,m),this._nativePannerNode=h,this._orientationX=e(this,f,h.orientationX,Gt,rn),this._orientationY=e(this,f,h.orientationY,Gt,rn),this._orientationZ=e(this,f,h.orientationZ,Gt,rn),this._positionX=e(this,f,h.positionX,Gt,rn),this._positionY=e(this,f,h.positionY,Gt,rn),this._positionZ=e(this,f,h.positionZ,Gt,rn),a(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(l){this._nativePannerNode.coneInnerAngle=l}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(l){this._nativePannerNode.coneOuterAngle=l}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(l){this._nativePannerNode.coneOuterGain=l}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(l){this._nativePannerNode.distanceModel=l}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(l){this._nativePannerNode.maxDistance=l}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(l){this._nativePannerNode.panningModel=l}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(l){this._nativePannerNode.refDistance=l}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(l){this._nativePannerNode.rolloffFactor=l}},LF=(t,e,n,s,i,r,a,o,l,c)=>()=>{const u=new WeakMap;let d=null;const h=async(f,m)=>{let g=null,b=r(f);const y={channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation},v={...y,coneInnerAngle:b.coneInnerAngle,coneOuterAngle:b.coneOuterAngle,coneOuterGain:b.coneOuterGain,distanceModel:b.distanceModel,maxDistance:b.maxDistance,panningModel:b.panningModel,refDistance:b.refDistance,rolloffFactor:b.rolloffFactor},_=Ht(b,m);if("bufferSize"in b)g=s(m,{...y,gain:1});else if(!_){const S={...v,orientationX:b.orientationX.value,orientationY:b.orientationY.value,orientationZ:b.orientationZ.value,positionX:b.positionX.value,positionY:b.positionY.value,positionZ:b.positionZ.value};b=i(m,S)}if(u.set(m,g===null?b:g),g!==null){if(d===null){if(a===null)throw new Error("Missing the native OfflineAudioContext constructor.");const k=new a(6,f.context.length,m.sampleRate),O=e(k,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});O.connect(k.destination),d=(async()=>{const P=await Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map(async(j,I)=>{const R=n(k,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:I===0?1:0});return await o(k,j,R.offset),R}));for(let j=0;j<6;j+=1)P[j].connect(O,0,j),P[j].start(0);return c(k)})()}const S=await d,w=s(m,{...y,gain:1});await l(f,m,w);const E=[];for(let k=0;k<S.numberOfChannels;k+=1)E.push(S.getChannelData(k));let T=[E[0][0],E[1][0],E[2][0]],C=[E[3][0],E[4][0],E[5][0]],N=s(m,{...y,gain:1}),A=i(m,{...v,orientationX:T[0],orientationY:T[1],orientationZ:T[2],positionX:C[0],positionY:C[1],positionZ:C[2]});w.connect(N).connect(A.inputs[0]),A.connect(g);for(let k=128;k<S.length;k+=128){const O=[E[0][k],E[1][k],E[2][k]],P=[E[3][k],E[4][k],E[5][k]];if(O.some((j,I)=>j!==T[I])||P.some((j,I)=>j!==C[I])){T=O,C=P;const j=k/m.sampleRate;N.gain.setValueAtTime(0,j),N=s(m,{...y,gain:0}),A=i(m,{...v,orientationX:T[0],orientationY:T[1],orientationZ:T[2],positionX:C[0],positionY:C[1],positionZ:C[2]}),N.gain.setValueAtTime(1,j),w.connect(N).connect(A.inputs[0]),A.connect(g)}}return g}return _?(await t(m,f.orientationX,b.orientationX),await t(m,f.orientationY,b.orientationY),await t(m,f.orientationZ,b.orientationZ),await t(m,f.positionX,b.positionX),await t(m,f.positionY,b.positionY),await t(m,f.positionZ,b.positionZ)):(await o(m,f.orientationX,b.orientationX),await o(m,f.orientationY,b.orientationY),await o(m,f.orientationZ,b.orientationZ),await o(m,f.positionX,b.positionX),await o(m,f.positionY,b.positionY),await o(m,f.positionZ,b.positionZ)),Po(b)?await l(f,m,b.inputs[0]):await l(f,m,b),b};return{render(f,m){const g=u.get(m);return g!==void 0?Promise.resolve(g):h(f,m)}}},VF={disableNormalization:!1},zF=(t,e,n,s)=>class qk{constructor(r,a){const o=e(r),l=s({...VF,...a}),c=t(o,l);return n.add(c),c}static[Symbol.hasInstance](r){return r!==null&&typeof r=="object"&&Object.getPrototypeOf(r)===qk.prototype||n.has(r)}},FF=(t,e)=>(n,s,i)=>(t(s).replay(i),e(s,n,i)),HF=(t,e,n)=>async(s,i,r)=>{const a=t(s);await Promise.all(a.activeInputs.map((o,l)=>Array.from(o).map(async([c,u])=>{const h=await e(c).render(c,i),f=s.context.destination;!n(c)&&(s!==f||!n(s))&&h.connect(r,u,l)})).reduce((o,l)=>[...o,...l],[]))},UF=(t,e,n)=>async(s,i,r)=>{const a=e(s);await Promise.all(Array.from(a.activeInputs).map(async([o,l])=>{const u=await t(o).render(o,i);n(o)||u.connect(r,l)}))},GF=(t,e,n,s)=>i=>t(Yl,()=>Yl(i))?Promise.resolve(t(s,s)).then(r=>{if(!r){const a=n(i,512,0,1);i.oncomplete=()=>{a.onaudioprocess=null,a.disconnect()},a.onaudioprocess=()=>i.currentTime,a.connect(i.destination)}return i.startRendering()}):new Promise(r=>{const a=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=o=>{a.disconnect(),r(o.renderedBuffer)},a.connect(i.destination),i.startRendering()}),qF=t=>(e,n)=>{t.set(e,n)},WF=t=>(e,n)=>t.set(e,n),$F=(t,e,n,s,i,r,a,o)=>(l,c)=>n(l).render(l,c).then(()=>Promise.all(Array.from(s(c)).map(u=>n(u).render(u,c)))).then(()=>i(c)).then(u=>(typeof u.copyFromChannel!="function"?(a(u),y0(u)):e(r,()=>r(u))||o(u),t.add(u),u)),YF={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},KF=(t,e,n,s,i,r)=>class extends t{constructor(o,l){const c=i(o),u={...YF,...l},d=n(c,u),h=r(c),f=h?s():null;super(o,!1,d,f),this._pan=e(this,h,d.pan)}get pan(){return this._pan}},XF=(t,e,n,s,i)=>()=>{const r=new WeakMap,a=async(o,l)=>{let c=n(o);const u=Ht(c,l);if(!u){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value};c=e(l,d)}return r.set(l,c),u?await t(l,o.pan,c.pan):await s(l,o.pan,c.pan),Po(c)?await i(o,l,c.inputs[0]):await i(o,l,c),c};return{render(o,l){const c=r.get(l);return c!==void 0?Promise.resolve(c):a(o,l)}}},QF=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},ZF=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),i=URL.createObjectURL(n);let r=!1,a=!1;try{await s.audioWorklet.addModule(i);const o=new t(s,"a",{numberOfOutputs:0}),l=s.createOscillator();o.port.onmessage=()=>r=!0,o.onprocessorerror=()=>a=!0,l.connect(o),l.start(0),await s.startRendering(),await new Promise(c=>setTimeout(c))}catch{}finally{URL.revokeObjectURL(i)}return r&&!a},JF=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),s=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(i=>{n.oncomplete=()=>{s.disconnect(),i(n.currentTime!==0)},n.startRendering()})},eH=()=>new DOMException("","UnknownError"),tH={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},nH=(t,e,n,s,i,r,a)=>class extends t{constructor(l,c){const u=i(l),d={...tH,...c},h=n(u,d),m=r(u)?s():null;super(l,!0,h,m),this._isCurveNullified=!1,this._nativeWaveShaperNode=h,a(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(l){if(l===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(l.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=l}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(l){this._nativeWaveShaperNode.oversample=l}},sH=(t,e,n)=>()=>{const s=new WeakMap,i=async(r,a)=>{let o=e(r);if(!Ht(o,a)){const c={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,curve:o.curve,oversample:o.oversample};o=t(a,c)}return s.set(a,o),Po(o)?await n(r,a,o.inputs[0]):await n(r,a,o),o};return{render(r,a){const o=s.get(a);return o!==void 0?Promise.resolve(o):i(r,a)}}},iH=()=>typeof window>"u"?null:window,rH=(t,e)=>n=>{n.copyFromChannel=(s,i,r=0)=>{const a=t(r),o=t(i);if(o>=n.numberOfChannels)throw e();const l=n.length,c=n.getChannelData(o),u=s.length;for(let d=a<0?-a:0;d+a<l&&d<u;d+=1)s[d]=c[d+a]},n.copyToChannel=(s,i,r=0)=>{const a=t(r),o=t(i);if(o>=n.numberOfChannels)throw e();const l=n.length,c=n.getChannelData(o),u=s.length;for(let d=a<0?-a:0;d+a<l&&d<u;d+=1)c[d+a]=s[d]}},aH=t=>e=>{e.copyFromChannel=(n=>(s,i,r=0)=>{const a=t(r),o=t(i);if(a<e.length)return n.call(e,s,o,a)})(e.copyFromChannel),e.copyToChannel=(n=>(s,i,r=0)=>{const a=t(r),o=t(i);if(a<e.length)return n.call(e,s,o,a)})(e.copyToChannel)},oH=t=>(e,n)=>{const s=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=s),t(e,"buffer",i=>()=>{const r=i.call(e);return r===s?null:r},i=>r=>i.call(e,r===null?s:r))},lH=(t,e)=>(n,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const i=n.createBufferSource();e(s,()=>{const o=s.numberOfInputs;for(let l=0;l<o;l+=1)i.connect(s,0,l)},()=>i.disconnect(s))},Wk=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),$k=t=>{if(t===null)return!1;const e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0},Tc=(t,e,n,s)=>{let i=t;for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);const{get:r,set:a}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(t,e,{get:n(r),set:s(a)})},cH=t=>({...t,outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),uH=t=>({...t,channelCount:t.numberOfOutputs}),dH=t=>{const{imag:e,real:n}=t;return e===void 0?n===void 0?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:n===void 0?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}},Yk=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(s){if(s.code!==9)throw s;Yk(t,e,n+1e-7)}},hH=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},fH=t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},pH=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},S0=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},Kk=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},w0=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},mH=t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},gH=t=>{t.start=(e=>(n=0,s=0,i)=>{const r=t.buffer,a=r===null?s:Math.min(r.duration,s);r!==null&&a>r.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,a,i)})(t.start)},Xk=(t,e)=>{const n=e.createGain();t.connect(n);const s=(i=>()=>{i.call(t,n),t.removeEventListener("ended",s)})(t.disconnect);t.addEventListener("ended",s),Bo(t,n),t.stop=(i=>{let r=!1;return(a=0)=>{if(r)try{i.call(t,a)}catch{n.gain.setValueAtTime(0,a)}else i.call(t,a),r=!0}})(t.stop)},Io=(t,e)=>n=>{const s={value:t};return Object.defineProperties(n,{currentTarget:s,target:s}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)},yH=IV(ta),vH=UV(ta),bH=t7(Ph),Qk=new WeakMap,xH=b7(Qk),cs=Rz(new Map,new WeakMap),Ts=iH(),Zk=K7(cs,Rs),C0=v7(Yt),Lt=HF(Yt,C0,Wr),_H=YV(Zk,Ze,Lt),$e=S7(jh),ui=SF(Ts),Fe=V7(ui),Jk=new WeakMap,eN=d7(Io),Ec=J7(Ts),T0=P7(Ec),E0=B7(Ts),tN=I7(Ts),Kl=tF(Ts),dt=bz(LV(kk),HV(yH,vH,Vd,bH,zd,Yt,xH,bc,Ze,ta,Qs,Wr,zu),cs,M7(ig,zd,Yt,Ze,$l,Qs),Rs,Bh,Qt,Qz(Vd,ig,Yt,Ze,$l,$e,Qs,Fe),i7(Jk,Yt,is),eN,$e,T0,E0,tN,Fe,Kl),SH=$V(dt,_H,Rs,Zk,$e,Fe),A0=new WeakSet,z1=X7(Ts),nN=Gz(new Uint32Array(1)),k0=rH(nN,Rs),N0=aH(nN),sN=XV(A0,cs,Qt,z1,ui,QF(z1),k0,N0),Ih=GV(un),iN=UF(C0,_c,Wr),Ds=Lz(iN),Lo=Z7(Ih,cs,hH,fH,pH,S0,Kk,w0,gH,oH(Tc),Xk),Os=FF(x7(_c),iN),wH=JV(Ds,Lo,Ze,Os,Lt),us=xz(VV(Nk),Jk,g0,_z,RV,DV,OV,jV,PV,tg,Ek,Ec,Yk),CH=ZV(dt,wH,us,kt,Lo,$e,Fe,Io),TH=lz(dt,cz,Rs,kt,eF(un,Tc),$e,Fe,Lt),EH=Mz(Ds,Uk,Ze,Os,Lt),na=WF(Qk),AH=Nz(dt,us,EH,Bh,Uk,$e,Fe,na),fr=$7(ta,E0),kH=lH(kt,fr),pr=lF(Ec,kH),NH=jz(pr,Ze,Lt),MH=Oz(dt,NH,pr,$e,Fe),RH=Iz(wc,Ze,Lt),DH=Bz(dt,RH,wc,$e,Fe,uH),OH=dF(Ih,Lo,un,fr),Vo=uF(Ih,cs,OH,S0,w0),jH=Uz(Ds,Vo,Ze,Os,Lt),PH=Hz(dt,us,jH,Vo,$e,Fe,Io),rN=hF(Qt,Tc),BH=$z(rN,Ze,Lt),IH=Wz(dt,BH,rN,$e,Fe,na),LH=e7(Ds,Gk,Ze,Os,Lt),VH=Jz(dt,us,LH,Gk,$e,Fe,na),aN=fF(Qt),zH=l7(Ds,aN,Ze,Os,Lt),FH=o7(dt,us,zH,aN,Qt,$e,Fe,na),HH=g7(Ds,un,Ze,Os,Lt),UH=m7(dt,us,HH,un,$e,Fe),GH=yF(Bh,kt,Cc,Qt),Lh=GF(cs,un,Cc,JF(un,ui)),qH=N7(Lo,Ze,ui,Lt,Lh),WH=pF(GH),$H=A7(dt,WH,qH,$e,Fe,na),YH=uz(us,pr,Vo,Cc,Qt,Wk,Fe,Tc),oN=new WeakMap,KH=W7(TH,YH,eN,Fe,oN,Io),lN=wF(Ih,cs,S0,Kk,w0,Xk),XH=PF(Ds,lN,Ze,Os,Lt),QH=jF(dt,us,lN,XH,$e,Fe,Io),cN=zz(Lo),ZH=MF(cN,kt,un,$k,fr),Vh=NF(cN,kt,ZH,$k,fr,Ec,Tc),JH=TF(Vd,kt,pr,un,Cc,Vh,Qt,zd,Wk,fr),uN=CF(JH),e8=LF(Ds,pr,Vo,un,uN,Ze,ui,Os,Lt,Lh),t8=IF(dt,us,uN,e8,$e,Fe,na),n8=EF(Rs),s8=zF(n8,$e,new WeakSet,dH),i8=kF(pr,wc,un,Vh,Qt,fr),dN=AF(i8,Qt),r8=XF(Ds,dN,Ze,Os,Lt),a8=KF(dt,us,dN,r8,$e,Fe),o8=sH(Vh,Ze,Lt),l8=nH(dt,kt,Vh,o8,$e,Fe,na),hN=z7(Ts),M0=h7(Ts),fN=new WeakMap,c8=w7(fN,ui),u8=hN?FV(cs,Qt,u7(Ts),M0,f7(BV),$e,c8,Fe,Kl,new WeakMap,new WeakMap,ZF(Kl,ui),Ts):void 0,d8=L7(T0,Fe),h8=Xz(A0,cs,Kz,c7,new WeakSet,$e,d8,Id,Yl,k0,N0),pN=Az(u8,SH,sN,CH,AH,MH,DH,PH,IH,h8,VH,FH,UH,$H,KH,QH,t8,s8,a8,l8),f8=F7(dt,vF,$e,Fe),p8=U7(dt,bF,$e,Fe),m8=G7(dt,xF,$e,Fe),g8=_F(kt,Fe),y8=q7(dt,g8,$e),v8=oz(pN,kt,Qt,eH,f8,p8,m8,y8,Ec),R0=C7(oN),b8=qV(R0),mN=Vz(Rs),x8=n7(R0),gN=r7(Rs),yN=new WeakMap,_8=y7(yN,is),S8=oF(mN,Rs,kt,pr,wc,Vo,un,Cc,Qt,gN,M0,_8,fr),w8=sF(kt,S8,un,Qt,fr),C8=Ez(Ds,mN,Lo,pr,wc,Vo,un,x8,gN,M0,Ze,Kl,ui,Os,Lt,Lh),T8=_7(fN),E8=qF(yN),F1=hN?wz(b8,dt,us,C8,w8,Yt,T8,$e,Fe,Kl,cH,E8,mH,Io):void 0,A8=Yz(Qt,ui),k8=$F(A0,cs,C0,R0,Lh,Id,k0,N0),N8=DF(pN,cs,kt,A8,k8),M8=R7(jh,T0),R8=D7(m0,E0),D8=O7(g0,tN),O8=j7(jh,Fe);function Tn(t){return t===void 0}function xe(t){return t!==void 0}function j8(t){return typeof t=="function"}function rs(t){return typeof t=="number"}function qi(t){return Object.prototype.toString.call(t)==="[object Object]"&&t.constructor===Object}function vN(t){return typeof t=="boolean"}function on(t){return Array.isArray(t)}function ai(t){return typeof t=="string"}function du(t){return ai(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}function oe(t,e){if(!t)throw new Error(e)}function Ln(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function bN(t){!t.isOffline&&t.state!=="running"&&zh('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let xN=!1,H1=!1;function U1(t){xN=t}function P8(t){Tn(t)&&xN&&!H1&&(H1=!0,zh("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let _N=console;function B8(...t){_N.log(...t)}function zh(...t){_N.warn(...t)}function I8(t){return new v8(t)}function L8(t,e,n){return new N8(t,e,n)}const mn=typeof self=="object"?self:null,V8=mn&&(mn.hasOwnProperty("AudioContext")||mn.hasOwnProperty("webkitAudioContext"));function z8(t,e,n){return oe(xe(F1),"AudioWorkletNode only works in a secure context (https or localhost)"),new(t instanceof(mn==null?void 0:mn.BaseAudioContext)?mn==null?void 0:mn.AudioWorkletNode:F1)(t,e,n)}function ds(t,e,n,s){var i=arguments.length,r=i<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,n):s,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(t,e,n,s);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(r=(i<3?a(r):i>3?a(e,n,r):a(e,n))||r);return i>3&&r&&Object.defineProperty(e,n,r),r}function lt(t,e,n,s){function i(r){return r instanceof n?r:new n(function(a){a(r)})}return new(n||(n=Promise))(function(r,a){function o(u){try{c(s.next(u))}catch(d){a(d)}}function l(u){try{c(s.throw(u))}catch(d){a(d)}}function c(u){u.done?r(u.value):i(u.value).then(o,l)}c((s=s.apply(t,e||[])).next())})}class F8{constructor(e,n,s,i){this._callback=e,this._type=n,this._minimumUpdateInterval=Math.max(128/(i||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),n=URL.createObjectURL(e),s=new Worker(n);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var n;this._updateInterval=Math.max(e,this._minimumUpdateInterval),this._type==="worker"&&((n=this._worker)===null||n===void 0||n.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function $r(t){return D8(t)}function Wi(t){return R8(t)}function Fu(t){return O8(t)}function ya(t){return M8(t)}function H8(t){return t instanceof sN}function U8(t,e){return t==="value"||$r(e)||Wi(e)||H8(e)}function $i(t,...e){if(!e.length)return t;const n=e.shift();if(qi(t)&&qi(n))for(const s in n)U8(s,n[s])?t[s]=n[s]:qi(n[s])?(t[s]||Object.assign(t,{[s]:{}}),$i(t[s],n[s])):Object.assign(t,{[s]:n[s]});return $i(t,...e)}function G8(t,e){return t.length===e.length&&t.every((n,s)=>e[s]===n)}function J(t,e,n=[],s){const i={},r=Array.from(e);if(qi(r[0])&&s&&!Reflect.has(r[0],s)&&(Object.keys(r[0]).some(o=>Reflect.has(t,o))||($i(i,{[s]:r[0]}),n.splice(n.indexOf(s),1),r.shift())),r.length===1&&qi(r[0]))$i(i,r[0]);else for(let a=0;a<n.length;a++)xe(r[a])&&(i[n[a]]=r[a]);return $i(t,i)}function q8(t){return t.constructor.getDefaults()}function _s(t,e){return Tn(t)?e:t}function ho(t,e){return e.forEach(n=>{Reflect.has(t,n)&&delete t[n]}),t}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class di{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...e){(this.debug||mn&&this.toString()===mn.TONE_DEBUG_CLASS)&&B8(this,...e)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}di.version=Tk;const D0=1e-6;function fo(t,e){return t>e+D0}function cg(t,e){return fo(t,e)||Qn(t,e)}function Gd(t,e){return t+D0<e}function Qn(t,e){return Math.abs(t-e)<D0}function W8(t,e,n){return Math.max(Math.min(t,n),e)}class Hn extends di{constructor(){super(),this.name="Timeline",this._timeline=[];const e=J(Hn.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(oe(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const n=this._timeline[this.length-1];oe(cg(e.time,n.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const n=this._search(e.time);this._timeline.splice(n+1,0,e)}if(this.length>this.memory){const n=this.length-this.memory;this._timeline.splice(0,n)}return this}remove(e){const n=this._timeline.indexOf(e);return n!==-1&&this._timeline.splice(n,1),this}get(e,n="time"){const s=this._search(e,n);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,n="time"){const s=this._search(e,n);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(e){const n=this._timeline.length;if(n>0&&this._timeline[n-1].time<e)return this._timeline[n-1];const s=this._search(e);return s-1>=0?this._timeline[s-1]:null}cancel(e){if(this._timeline.length>1){let n=this._search(e);if(n>=0)if(Qn(this._timeline[n].time,e)){for(let s=n;s>=0&&Qn(this._timeline[s].time,e);s--)n=s;this._timeline=this._timeline.slice(0,n)}else this._timeline=this._timeline.slice(0,n+1);else this._timeline=[]}else this._timeline.length===1&&cg(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const n=this._search(e);return n>=0&&(this._timeline=this._timeline.slice(n+1)),this}previousEvent(e){const n=this._timeline.indexOf(e);return n>0?this._timeline[n-1]:null}_search(e,n="time"){if(this._timeline.length===0)return-1;let s=0;const i=this._timeline.length;let r=i;if(i>0&&this._timeline[i-1][n]<=e)return i-1;for(;s<r;){let a=Math.floor(s+(r-s)/2);const o=this._timeline[a],l=this._timeline[a+1];if(Qn(o[n],e)){for(let c=a;c<this._timeline.length;c++){const u=this._timeline[c];if(Qn(u[n],e))a=c;else break}return a}else{if(Gd(o[n],e)&&fo(l[n],e))return a;fo(o[n],e)?r=a:s=a+1}}return-1}_iterate(e,n=0,s=this._timeline.length-1){this._timeline.slice(n,s+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,n){const s=this._search(e);return s!==-1&&this._iterate(n,0,s),this}forEachAfter(e,n){const s=this._search(e);return this._iterate(n,s+1),this}forEachBetween(e,n,s){let i=this._search(e),r=this._search(n);return i!==-1&&r!==-1?(this._timeline[i].time!==e&&(i+=1),this._timeline[r].time===n&&(r-=1),this._iterate(s,i,r)):i===-1&&this._iterate(s,0,r),this}forEachFrom(e,n){let s=this._search(e);for(;s>=0&&this._timeline[s].time>=e;)s--;return this._iterate(n,s+1),this}forEachAtTime(e,n){const s=this._search(e);if(s!==-1&&Qn(this._timeline[s].time,e)){let i=s;for(let r=s;r>=0&&Qn(this._timeline[r].time,e);r--)i=r;this._iterate(r=>{n(r)},i,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const SN=[];function Fh(t){SN.push(t)}function $8(t){SN.forEach(e=>e(t))}const wN=[];function Hh(t){wN.push(t)}function Y8(t){wN.forEach(e=>e(t))}class Ac extends di{constructor(){super(...arguments),this.name="Emitter"}on(e,n){return e.split(/\W+/).forEach(i=>{Tn(this._events)&&(this._events={}),this._events.hasOwnProperty(i)||(this._events[i]=[]),this._events[i].push(n)}),this}once(e,n){const s=(...i)=>{n(...i),this.off(e,s)};return this.on(e,s),this}off(e,n){return e.split(/\W+/).forEach(i=>{if(Tn(this._events)&&(this._events={}),this._events.hasOwnProperty(i))if(Tn(n))this._events[i]=[];else{const r=this._events[i];for(let a=r.length-1;a>=0;a--)r[a]===n&&r.splice(a,1)}}),this}emit(e,...n){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(let i=0,r=s.length;i<r;i++)s[i].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(n=>{const s=Object.getOwnPropertyDescriptor(Ac.prototype,n);Object.defineProperty(e.prototype,n,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class CN extends Ac{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class kc extends CN{constructor(){var e,n;super(),this.name="Context",this._constants=new Map,this._timeouts=new Hn,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const s=J(kc.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((e=arguments[0])===null||e===void 0?void 0:e.latencyHint)||""):(this._context=I8({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new F8(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((n=arguments[0])===null||n===void 0)&&n.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||($8(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,n,s){return this._context.createBuffer(e,n,s)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,n){return this._context.createIIRFilter(e,n)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,n,s){return this._context.createPeriodicWave(e,n,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return oe(ya(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return oe(ya(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return oe(ya(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){oe(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){oe(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){oe(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){oe(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,n){return z8(this.rawContext,e,n)}addAudioWorkletModule(e){return lt(this,void 0,void 0,function*(){oe(xe(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return lt(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return ya(this._context)?this._context.resume():Promise.resolve()}close(){return lt(this,void 0,void 0,function*(){ya(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&Y8(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const n=this._context.createBuffer(1,128,this._context.sampleRate),s=n.getChannelData(0);for(let r=0;r<s.length;r++)s[r]=e;const i=this._context.createBufferSource();return i.channelCount=1,i.channelCountMode="explicit",i.buffer=n,i.loop=!0,i.start(0),this._constants.set(e,i),i}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,n=>{n.callback(),this._timeouts.remove(n)})}setTimeout(e,n){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:s+n}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(n=>{n.id===e&&this._timeouts.remove(n)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,n){const s=++this._timeoutIds,i=()=>{const r=this.now();this._timeouts.add({callback:()=>{e(),i()},id:s,time:r+n})};return i(),s}}class K8 extends CN{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,n,s){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,n){return{}}createPanner(){return{}}createPeriodicWave(e,n,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,n){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return lt(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,n){return 0}clearTimeout(e){return this}setInterval(e,n){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}}function Pe(t,e){on(e)?e.forEach(n=>Pe(t,n)):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function O0(t,e){on(e)?e.forEach(n=>O0(t,n)):Object.defineProperty(t,e,{writable:!0})}const Me=()=>{};class Le extends di{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Me;const e=J(Le.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,ai(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:Me,onload:Me,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Kt().sampleRate}set(e){return e instanceof Le?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return lt(this,void 0,void 0,function*(){const n=Le.load(e).then(s=>{this.set(s),this.onload(this)});Le.downloads.push(n);try{yield n}finally{const s=Le.downloads.indexOf(n);Le.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const n=on(e)&&e[0].length>0,s=n?e.length:1,i=n?e[0].length:e.length,r=Kt(),a=r.createBuffer(s,i,r.sampleRate),o=!n&&s===1?[e]:e;for(let l=0;l<s;l++)a.copyToChannel(o[l],l);return this._buffer=a,this}toMono(e){if(rs(e))this.fromArray(this.toArray(e));else{let n=new Float32Array(this.length);const s=this.numberOfChannels;for(let i=0;i<s;i++){const r=this.toArray(i);for(let a=0;a<r.length;a++)n[a]+=r[a]}n=n.map(i=>i/s),this.fromArray(n)}return this}toArray(e){if(rs(e))return this.getChannelData(e);if(this.numberOfChannels===1)return this.toArray(0);{const n=[];for(let s=0;s<this.numberOfChannels;s++)n[s]=this.getChannelData(s);return n}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e,n=this.duration){oe(this.loaded,"Buffer is not loaded");const s=Math.floor(e*this.sampleRate),i=Math.floor(n*this.sampleRate);oe(s<i,"The start time must be less than the end time");const r=i-s,a=Kt().createBuffer(this.numberOfChannels,r,this.sampleRate);for(let o=0;o<this.numberOfChannels;o++)a.copyToChannel(this.getChannelData(o).subarray(s,i),o);return new Le(a)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return new Le().fromArray(e)}static fromUrl(e){return lt(this,void 0,void 0,function*(){return yield new Le().load(e)})}static load(e){return lt(this,void 0,void 0,function*(){const n=Le.baseUrl===""||Le.baseUrl.endsWith("/")?Le.baseUrl:Le.baseUrl+"/",s=yield fetch(n+e);if(!s.ok)throw new Error(`could not load url: ${e}`);const i=yield s.arrayBuffer();return yield Kt().decodeAudioData(i)})}static supportsType(e){const n=e.split("."),s=n[n.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return lt(this,void 0,void 0,function*(){for(yield Promise.resolve();Le.downloads.length;)yield Le.downloads[0]})}}Le.baseUrl="";Le.downloads=[];class Nc extends kc{constructor(){super({clockSource:"offline",context:Fu(arguments[0])?arguments[0]:L8(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Fu(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Fu(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return lt(this,void 0,void 0,function*(){let n=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,n++;const s=Math.floor(this.sampleRate/128);e&&n%s===0&&(yield new Promise(i=>setTimeout(i,1)))}})}render(){return lt(this,arguments,void 0,function*(e=!0){yield this.workletsAreReady(),yield this._renderClock(e);const n=yield this._context.startRendering();return new Le(n)})}close(){return Promise.resolve()}}const TN=new K8;let kr=TN;function Kt(){return kr===TN&&V8&&ug(new kc),kr}function ug(t,e=!1){e&&kr.dispose(),ya(t)?kr=new kc(t):Fu(t)?kr=new Nc(t):kr=t}function X8(){return kr.resume()}if(mn&&!mn.TONE_SILENCE_LOGGING){const e=` * Tone.js v${Tk} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function Q8(t){return Math.pow(10,t/20)}function Z8(t){return 20*(Math.log(t)/Math.LN10)}function EN(t){return Math.pow(2,t/12)}let Uh=440;function J8(){return Uh}function eU(t){Uh=t}function Nr(t){return Math.round(AN(t))}function AN(t){return 69+12*Math.log2(t/Uh)}function kN(t){return Uh*Math.pow(2,(t-69)/12)}class j0 extends di{constructor(e,n,s){super(),this.defaultUnits="s",this._val=n,this._units=s,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,n)=>{const s=parseInt(e,10),i=n==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*i:this._beatsToUnits(4/s)*i},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const n=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(n)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,n,s)=>{let i=0;return e&&e!=="0"&&(i+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(i+=this._beatsToUnits(parseFloat(n))),s&&s!=="0"&&(i+=this._beatsToUnits(parseFloat(s)/4)),i},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof j0&&this.fromType(this._val),Tn(this._val))return this._noArg();if(ai(this._val)&&Tn(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(qi(this._val)){let e=0;for(const n in this._val)if(xe(this._val[n])){const s=this._val[n],i=new this.constructor(this.context,n).valueOf()*s;e+=i}return e}if(xe(this._units)){const e=this._expressions[this._units],n=this._val.toString().trim().match(e.regexp);return n?e.method.apply(this,n.slice(1)):e.method.call(this,this._val)}else return ai(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class es extends j0{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const n=new es(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(n))},regexp:/^@(.+)/}})}quantize(e,n=1){const s=new this.constructor(this.context,e).valueOf(),i=this.valueOf(),o=Math.round(i/s)*s-i;return i+o*n}toNotation(){const e=this.toSeconds(),n=["1m"];for(let r=1;r<9;r++){const a=Math.pow(2,r);n.push(a+"n."),n.push(a+"n"),n.push(a+"t")}n.push("0");let s=n[0],i=new es(this.context,n[0]).toSeconds();return n.forEach(r=>{const a=new es(this.context,r).toSeconds();Math.abs(a-e)<Math.abs(i-e)&&(s=r,i=a)}),s}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let n=this.valueOf()/e;n=parseFloat(n.toFixed(4));const s=Math.floor(n/this._getTimeSignature());let i=n%1*4;n=Math.floor(n)%this._getTimeSignature();const r=i.toString();return r.length>3&&(i=parseFloat(parseFloat(r).toFixed(3))),[s,n,i].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return Nr(this.toFrequency())}_now(){return this.context.now()}}class vn extends es{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return J8()}static set A4(e){eU(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:vn.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,n){const i=tU[e.toLowerCase()]+(parseInt(n,10)+1)*12;return this.defaultUnits==="midi"?i:vn.mtof(i)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,n,s){let i=1;return e&&e!=="0"&&(i*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),n&&n!=="0"&&(i*=this._beatsToUnits(parseFloat(n))),s&&s!=="0"&&(i*=this._beatsToUnits(parseFloat(s)/4)),i}}})}transpose(e){return new vn(this.context,this.valueOf()*EN(e))}harmonize(e){return e.map(n=>this.transpose(n))}toMidi(){return Nr(this.valueOf())}toNote(){const e=this.toFrequency(),n=Math.log2(e/vn.A4);let s=Math.round(12*n)+57;const i=Math.floor(s/12);return i<0&&(s+=-12*i),nU[s%12]+i.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),n=this.valueOf()/e;return Math.floor(n*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return kN(e)}static ftom(e){return Nr(e)}}const tU={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},nU=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Ya extends es{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Nt extends di{constructor(){super();const e=J(Nt.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:Kt()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return P8(e),new es(this.context,e).toSeconds()}toFrequency(e){return new vn(this.context,e).toFrequency()}toTicks(e){return new Ya(this.context,e).toTicks()}_getPartialProperties(e){const n=this.get();return Object.keys(n).forEach(s=>{Tn(e[s])&&delete n[s]}),n}get(){const e=q8(this);return Object.keys(e).forEach(n=>{if(Reflect.has(this,n)){const s=this[n];xe(s)&&xe(s.value)&&xe(s.setValueAtTime)?e[n]=s.value:s instanceof Nt?e[n]=s._getPartialProperties(e[n]):on(s)||rs(s)||ai(s)||vN(s)?e[n]=s:delete e[n]}}),e}set(e){return Object.keys(e).forEach(n=>{Reflect.has(this,n)&&xe(this[n])&&(this[n]&&xe(this[n].value)&&xe(this[n].setValueAtTime)?this[n].value!==e[n]&&(this[n].value=e[n]):this[n]instanceof Nt?this[n].set(e[n]):this[n]=e[n])}),this}}class Mc extends Hn{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const n=this.get(e);return n!==null?n.state:this._initial}setStateAtTime(e,n,s){return Ln(n,0),this.add(Object.assign({},s,{state:e,time:n})),this}getLastState(e,n){const s=this._search(n);for(let i=s;i>=0;i--){const r=this._timeline[i];if(r.state===e)return r}}getNextState(e,n){const s=this._search(n);if(s!==-1)for(let i=s;i<this._timeline.length;i++){const r=this._timeline[i];if(r.state===e)return r}}}class Ne extends Nt{constructor(){const e=J(Ne.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,oe(xe(e.param)&&($r(e.param)||e.param instanceof Ne),"param must be an AudioParam");!$r(e.param);)e.param=e.param._param;this._swappable=xe(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Hn(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,xe(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Nt.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return xe(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return xe(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,n){return this.units===n}_assertRange(e){return xe(this.maxValue)&&xe(this.minValue)&&Ln(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?Q8(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?Z8(e):e}setValueAtTime(e,n){const s=this.toSeconds(n),i=this._fromType(e);return oe(isFinite(i)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(i),this.log(this.units,"setValueAtTime",e,s),this._events.add({time:s,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,s),this}getValueAtTime(e){const n=Math.max(this.toSeconds(e),0),s=this._events.getAfter(n),i=this._events.get(n);let r=this._initialValue;if(i===null)r=this._initialValue;else if(i.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const a=this._events.getBefore(i.time);let o;a===null?o=this._initialValue:o=a.value,i.type==="setTargetAtTime"&&(r=this._exponentialApproach(i.time,o,i.value,i.constant,n))}else if(s===null)r=i.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let a=i.value;if(i.type==="setTargetAtTime"){const o=this._events.getBefore(i.time);o===null?a=this._initialValue:a=o.value}s.type==="linearRampToValueAtTime"?r=this._linearInterpolate(i.time,a,s.time,s.value,n):r=this._exponentialInterpolate(i.time,a,s.time,s.value,n)}else r=i.value;return this._toType(r)}setRampPoint(e){e=this.toSeconds(e);let n=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(n)===0&&(n=this._toType(this._minOutput)),this.setValueAtTime(n,e),this}linearRampToValueAtTime(e,n){const s=this._fromType(e),i=this.toSeconds(n);return oe(isFinite(s)&&isFinite(i),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._assertRange(s),this._events.add({time:i,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",e,i),this._param.linearRampToValueAtTime(s,i),this}exponentialRampToValueAtTime(e,n){let s=this._fromType(e);s=Qn(s,0)?this._minOutput:s,this._assertRange(s);const i=this.toSeconds(n);return oe(isFinite(s)&&isFinite(i),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({time:i,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",e,i),this._param.exponentialRampToValueAtTime(s,i),this}exponentialRampTo(e,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(e,s+this.toSeconds(n)),this}linearRampTo(e,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(e,s+this.toSeconds(n)),this}targetRampTo(e,n,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(e,s,n),this}exponentialApproachValueAtTime(e,n,s){n=this.toSeconds(n),s=this.toSeconds(s);const i=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(e,n,i),this.cancelAndHoldAtTime(n+s*.9),this.linearRampToValueAtTime(e,n+s),this}setTargetAtTime(e,n,s){const i=this._fromType(e);oe(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const r=this.toSeconds(n);return this._assertRange(i),oe(isFinite(i)&&isFinite(r),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(n)}`),this._events.add({constant:s,time:r,type:"setTargetAtTime",value:i}),this.log(this.units,"setTargetAtTime",e,r,s),this._param.setTargetAtTime(i,r,s),this}setValueCurveAtTime(e,n,s,i=1){s=this.toSeconds(s),n=this.toSeconds(n);const r=this._fromType(e[0])*i;this.setValueAtTime(this._toType(r),n);const a=s/(e.length-1);for(let o=1;o<e.length;o++){const l=this._fromType(e[o])*i;this.linearRampToValueAtTime(this._toType(l),n+o*a)}return this}cancelScheduledValues(e){const n=this.toSeconds(e);return oe(isFinite(n),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(n),this._param.cancelScheduledValues(n),this.log(this.units,"cancelScheduledValues",n),this}cancelAndHoldAtTime(e){const n=this.toSeconds(e),s=this._fromType(this.getValueAtTime(n));oe(isFinite(n),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",n,"value="+s);const i=this._events.get(n),r=this._events.getAfter(n);return i&&Qn(i.time,n)?r?(this._param.cancelScheduledValues(r.time),this._events.cancel(r.time)):(this._param.cancelAndHoldAtTime(n),this._events.cancel(n+this.sampleTime)):r&&(this._param.cancelScheduledValues(r.time),this._events.cancel(r.time),r.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),n):r.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),n)),this._events.add({time:n,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,n),this}rampTo(e,n=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,n,s):this.linearRampTo(e,n,s),this}apply(e){const n=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(n),n);const s=this._events.get(n);if(s&&s.type==="setTargetAtTime"){const i=this._events.getAfter(s.time),r=i?i.time:n+2,a=(r-n)/10;for(let o=n;o<r;o+=a)e.linearRampToValueAtTime(this.getValueAtTime(o),o)}return this._events.forEachAfter(this.context.currentTime,i=>{i.type==="cancelScheduledValues"?e.cancelScheduledValues(i.time):i.type==="setTargetAtTime"?e.setTargetAtTime(i.value,i.time,i.constant):e[i.type](i.value,i.time)}),this}setParam(e){oe(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const n=this.input;return n.disconnect(this._param),this.apply(e),this._param=e,n.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,n,s,i,r){return s+(n-s)*Math.exp(-(r-e)/i)}_linearInterpolate(e,n,s,i,r){return n+(i-n)*((r-e)/(s-e))}_exponentialInterpolate(e,n,s,i,r){return n*Math.pow(i/n,(r-e)/(s-e))}}class se extends Nt{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return xe(this.input)?$r(this.input)||this.input instanceof Ne?1:this.input.numberOfInputs:0}get numberOfOutputs(){return xe(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return xe(e)&&(e instanceof se||Wi(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(s=>{s.channelCount=e.channelCount,s.channelCountMode=e.channelCountMode,s.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();oe(e.length>0,"ToneAudioNode does not have any internal nodes");const n=e[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:e}))}connect(e,n=0,s=0){return as(this,e,n,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return zh("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,n=0,s=0){return NN(this,e,n,s),this}chain(...e){return Yr(this,...e),this}fan(...e){return e.forEach(n=>this.connect(n)),this}dispose(){return super.dispose(),xe(this.input)&&(this.input instanceof se?this.input.dispose():Wi(this.input)&&this.input.disconnect()),xe(this.output)&&(this.output instanceof se?this.output.dispose():Wi(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Yr(...t){const e=t.shift();t.reduce((n,s)=>(n instanceof se?n.connect(s):Wi(n)&&as(n,s),s),e)}function as(t,e,n=0,s=0){for(oe(xe(t),"Cannot connect from undefined node"),oe(xe(e),"Cannot connect to undefined node"),(e instanceof se||Wi(e))&&oe(e.numberOfInputs>0,"Cannot connect to node with no inputs"),oe(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof se||e instanceof Ne;)xe(e.input)&&(e=e.input);for(;t instanceof se;)xe(t.output)&&(t=t.output);$r(e)?t.connect(e,n):t.connect(e,n,s)}function NN(t,e,n=0,s=0){if(xe(e))for(;e instanceof se;)e=e.input;for(;!Wi(t);)xe(t.output)&&(t=t.output);$r(e)?t.disconnect(e,n):Wi(e)?t.disconnect(e,n,s):t.disconnect()}class Re extends se{constructor(){const e=J(Re.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new Ne({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Pe(this,"gain")}static getDefaults(){return Object.assign(se.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class po extends se{constructor(e){super(e),this.onended=Me,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Re({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(n){const s=this.toSeconds(n);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(se.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Me})}_startGain(e,n=1){oe(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=e+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(n,e+s):this._gainNode.gain.exponentialApproachValueAtTime(n,e,s)):this._gainNode.gain.setValueAtTime(n,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){oe(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+n,this._stopTime=Math.max(this._stopTime,this.now()),n>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,n,e):this._gainNode.gain.targetRampTo(0,n,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?n*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Me&&(this.onended(this),this.onended=Me,!this.context.isOffline)){const e=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),oe(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Me,this}}class P0 extends po{constructor(){const e=J(P0.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),as(this._source,this._gainNode),this.offset=new Ne({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(po.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._source.start(n),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class je extends se{constructor(){const e=J(je.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new P0({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(se.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,n=0,s=0){return Gh(this,e,n,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,n){return this._param.setValueAtTime(e,n),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,n){return this._param.linearRampToValueAtTime(e,n),this}exponentialRampToValueAtTime(e,n){return this._param.exponentialRampToValueAtTime(e,n),this}exponentialRampTo(e,n,s){return this._param.exponentialRampTo(e,n,s),this}linearRampTo(e,n,s){return this._param.linearRampTo(e,n,s),this}targetRampTo(e,n,s){return this._param.targetRampTo(e,n,s),this}exponentialApproachValueAtTime(e,n,s){return this._param.exponentialApproachValueAtTime(e,n,s),this}setTargetAtTime(e,n,s){return this._param.setTargetAtTime(e,n,s),this}setValueCurveAtTime(e,n,s,i){return this._param.setValueCurveAtTime(e,n,s,i),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,n,s){return this._param.rampTo(e,n,s),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function Gh(t,e,n,s){(e instanceof Ne||$r(e)||e instanceof je&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof je&&(e.overridden=!0)),as(t,e,n,s)}class B0 extends Ne{constructor(){const e=J(B0.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new Hn(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Ne.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,n,s){n=this.toSeconds(n),this.setRampPoint(n);const i=this._fromType(e),r=this._events.get(n),a=Math.round(Math.max(1/s,1));for(let o=0;o<=a;o++){const l=s*o+n,c=this._exponentialApproach(r.time,r.value,i,s,l);this.linearRampToValueAtTime(this._toType(c),l)}return this}setValueAtTime(e,n){const s=this.toSeconds(n);super.setValueAtTime(e,n);const i=this._events.get(s),r=this._events.previousEvent(i),a=this._getTicksUntilEvent(r,s);return i.ticks=Math.max(a,0),this}linearRampToValueAtTime(e,n){const s=this.toSeconds(n);super.linearRampToValueAtTime(e,n);const i=this._events.get(s),r=this._events.previousEvent(i),a=this._getTicksUntilEvent(r,s);return i.ticks=Math.max(a,0),this}exponentialRampToValueAtTime(e,n){n=this.toSeconds(n);const s=this._fromType(e),i=this._events.get(n),r=Math.round(Math.max((n-i.time)*10,1)),a=(n-i.time)/r;for(let o=0;o<=r;o++){const l=a*o+i.time,c=this._exponentialInterpolate(i.time,i.value,n,s,l);this.linearRampToValueAtTime(this._toType(c),l)}return this}_getTicksUntilEvent(e,n){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Tn(e.ticks)){const a=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(a,e.time)}const s=this._fromType(this.getValueAtTime(e.time));let i=this._fromType(this.getValueAtTime(n));const r=this._events.get(n);return r&&r.time===n&&r.type==="setValueAtTime"&&(i=this._fromType(this.getValueAtTime(n-this.sampleTime))),.5*(n-e.time)*(s+i)+e.ticks}getTicksAtTime(e){const n=this.toSeconds(e),s=this._events.get(n);return Math.max(this._getTicksUntilEvent(s,n),0)}getDurationOfTicks(e,n){const s=this.toSeconds(n),i=this.getTicksAtTime(n);return this.getTimeOfTick(i+e)-s}getTimeOfTick(e){const n=this._events.get(e,"ticks"),s=this._events.getAfter(e,"ticks");if(n&&n.ticks===e)return n.time;if(n&&s&&s.type==="linearRampToValueAtTime"&&n.value!==s.value){const i=this._fromType(this.getValueAtTime(n.time)),a=(this._fromType(this.getValueAtTime(s.time))-i)/(s.time-n.time),o=Math.sqrt(Math.pow(i,2)-2*a*(n.ticks-e)),l=(-i+o)/a,c=(-i-o)/a;return(l>0?l:c)+n.time}else return n?n.value===0?1/0:n.time+(e-n.ticks)/n.value:e/this._initialValue}ticksToTime(e,n){return this.getDurationOfTicks(e,n)}timeToTicks(e,n){const s=this.toSeconds(n),i=this.toSeconds(e),r=this.getTicksAtTime(s);return this.getTicksAtTime(s+i)-r}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const n=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(n,0)}}class I0 extends je{constructor(){const e=J(I0.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new B0({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(je.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,n){return this._param.ticksToTime(e,n)}timeToTicks(e,n){return this._param.timeToTicks(e,n)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,n){return this._param.getDurationOfTicks(e,n)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class L0 extends Nt{constructor(){const e=J(L0.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new Mc,this._tickOffset=new Hn,this._ticksAtTime=new Hn,this._secondsAtTime=new Hn,this.frequency=new I0({context:this.context,units:e.units,value:e.frequency}),Pe(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Nt.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,n){const s=this.toSeconds(e);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),xe(n)&&this.setTicksAtTime(n,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(e){const n=this.toSeconds(e);if(this._state.getValueAtTime(n)==="stopped"){const s=this._state.get(n);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this.setTicksAtTime(0,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const n=this.toSeconds(e),s=this._state.getLastState("stopped",n),i=this._ticksAtTime.get(n),r={state:"paused",time:n};this._state.add(r);let a=i||s,o=i?i.ticks:0,l=null;return this._state.forEachBetween(a.time,n+this.sampleTime,c=>{let u=a.time;const d=this._tickOffset.get(c.time);d&&d.time>=a.time&&(o=d.ticks,u=d.time),a.state==="started"&&c.state!=="started"&&(o+=this.frequency.getTicksAtTime(c.time)-this.frequency.getTicksAtTime(u),c.time!==r.time&&(l={state:c.state,time:c.time,ticks:o})),a=c}),this._state.remove(r),l&&this._ticksAtTime.add(l),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const n=this.now(),s=this.frequency.timeToTicks(e,n);this.setTicksAtTime(s,n)}getSecondsAtTime(e){e=this.toSeconds(e);const n=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);const i=this._secondsAtTime.get(e);let r=i||n,a=i?i.seconds:0,o=null;return this._state.forEachBetween(r.time,e+this.sampleTime,l=>{let c=r.time;const u=this._tickOffset.get(l.time);u&&u.time>=r.time&&(a=u.seconds,c=u.time),r.state==="started"&&l.state!=="started"&&(a+=l.time-c,l.time!==s.time&&(o={state:l.state,time:l.time,seconds:a})),r=l}),this._state.remove(s),o&&this._secondsAtTime.add(o),a}setTicksAtTime(e,n){return n=this.toSeconds(n),this._tickOffset.cancel(n),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,n),ticks:e,time:n}),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,n=this.now()){const s=this._tickOffset.get(n),i=this._state.get(n),r=Math.max(s.time,i.time),a=this.frequency.getTicksAtTime(r)+e-s.ticks;return this.frequency.getTimeOfTick(a)}forEachTickBetween(e,n,s){let i=this._state.get(e);this._state.forEachBetween(e,n,a=>{i&&i.state==="started"&&a.state!=="started"&&this.forEachTickBetween(Math.max(i.time,e),a.time-this.sampleTime,s),i=a});let r=null;if(i&&i.state==="started"){const a=Math.max(i.time,e),o=this.frequency.getTicksAtTime(a),l=this.frequency.getTicksAtTime(i.time),c=o-l;let u=Math.ceil(c)-c;u=Qn(u,1)?0:u;let d=this.frequency.getTimeOfTick(o+u);for(;d<n;){try{s(d,Math.round(this.getTicksAtTime(d)))}catch(h){r=h;break}d+=this.frequency.getDurationOfTicks(1,d)}}if(r)throw r;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class qh extends Nt{constructor(){const e=J(qh.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=Me,this._lastUpdate=0,this._state=new Mc("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new L0({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Pe(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Nt.getDefaults(),{callback:Me,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,n){bN(this.context);const s=this.toSeconds(e);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,n),s<this._lastUpdate&&this.emit("start",s,n)),this}stop(e){const n=this.toSeconds(e);return this.log("stop",n),this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._tickSource.stop(n),n<this._lastUpdate&&this.emit("stop",n),this}pause(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)==="started"&&(this._state.setStateAtTime("paused",n),this._tickSource.pause(n),n<this._lastUpdate&&this.emit("pause",n)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,n){return this._tickSource.setTicksAtTime(e,n),this}getTimeOfTick(e,n=this.now()){return this._tickSource.getTimeOfTick(e,n)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,n){const s=this.toSeconds(n),i=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(i+e,s)}_loop(){const e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,s=>{switch(s.state){case"started":const i=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,i);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(e,n,(s,i)=>{this.callback(s,i)}))}getStateAtTime(e){const n=this.toSeconds(e);return this._state.getValueAtTime(n)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Ac.mixin(qh);class qd extends se{constructor(){const e=J(qd.getDefaults(),arguments,["delayTime","maxDelay"]);super(e),this.name="Delay";const n=this.toSeconds(e.maxDelay);this._maxDelay=Math.max(n,this.toSeconds(e.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(n),this.delayTime=new Ne({context:this.context,param:this._delayNode.delayTime,units:"time",value:e.delayTime,minValue:0,maxValue:this.maxDelay}),Pe(this,"delayTime")}static getDefaults(){return Object.assign(se.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class js extends se{constructor(){const e=J(js.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new Re({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Pe(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(se.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class V0 extends se{constructor(){const e=J(V0.getDefaults(),arguments);super(e),this.name="Destination",this.input=new js({context:this.context}),this.output=new Re({context:this.context}),this.volume=this.input.volume,Yr(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(se.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Yr(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Fh(t=>{t.destination=new V0({context:t})});Hh(t=>{t.destination.dispose()});class sU extends se{constructor(){super(...arguments),this.name="Listener",this.positionX=new Ne({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Ne({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Ne({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Ne({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Ne({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Ne({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Ne({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Ne({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Ne({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(se.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Fh(t=>{t.listener=new sU({context:t})});Hh(t=>{t.listener.dispose()});function iU(t,e){return lt(this,arguments,void 0,function*(n,s,i=2,r=Kt().sampleRate){const a=Kt(),o=new Nc(i,s,r);ug(o),yield n(o);const l=o.render();ug(a);const c=yield l;return new Le(c)})}class z0 extends di{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=J(z0.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(n=>{this._loadingCount++;const s=e.urls[n];this.add(n,s,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Me,onload:Me,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return oe(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,n])=>n.loaded)}add(e,n,s=Me,i=Me){return ai(n)?(this.baseUrl&&n.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(e.toString(),new Le(this.baseUrl+n,s,i))):this._buffers.set(e.toString(),new Le(n,s,i)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class Wd extends vn{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return Nr(super._frequencyToUnits(e))}_ticksToUnits(e){return Nr(super._ticksToUnits(e))}_beatsToUnits(e){return Nr(super._beatsToUnits(e))}_secondsToUnits(e){return Nr(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return kN(this.toMidi())}transpose(e){return new Wd(this.context,this.toMidi()+e)}}class _t extends Ya{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class rU extends Nt{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Hn,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,n){return this._events.add({callback:e,time:this.toSeconds(n)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,n=>{e-n.time<=this.expiration&&n.callback(),this._events.remove(n)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Fh(t=>{t.draw=new rU({context:t})});Hh(t=>{t.draw.dispose()});class aU extends di{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){oe(xe(e.time),"Events must have a time property"),oe(xe(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let n=new oU(e.time,e.time+e.duration,e);for(this._root===null?this._root=n:this._root.insert(n),this._length++;n!==null;)n.updateHeight(),n.updateMax(),this._rebalance(n),n=n.parent;return this}remove(e){if(this._root!==null){const n=[];this._root.search(e.time,n);for(const s of n)if(s.event===e){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,n=>this.remove(n)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,n){e.parent!==null?(e.isLeftChild()?e.parent.left=n:e.parent.right=n,this._rebalance(e.parent)):this._setRoot(n)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{const n=e.getBalance();let s,i=null;if(n>0)if(e.left.right===null)s=e.left,s.right=e.right,i=s;else{for(s=e.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,i=s.parent,s.left=e.left,s.right=e.right)}else if(e.right.left===null)s=e.right,s.left=e.left,i=s;else{for(s=e.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,i=s.parent,s.left=e.left,s.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=s:e.parent.right=s:this._setRoot(s),i&&this._rebalance(i)}e.dispose()}_rotateLeft(e){const n=e.parent,s=e.isLeftChild(),i=e.right;i&&(e.right=i.left,i.left=e),n!==null?s?n.left=i:n.right=i:this._setRoot(i)}_rotateRight(e){const n=e.parent,s=e.isLeftChild(),i=e.left;i&&(e.left=i.right,i.right=e),n!==null?s?n.left=i:n.right=i:this._setRoot(i)}_rebalance(e){const n=e.getBalance();n>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):n<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){const n=[];if(this._root.search(e,n),n.length>0){let s=n[0];for(let i=1;i<n.length;i++)n[i].low>s.low&&(s=n[i]);return s.event}}return null}forEach(e){if(this._root!==null){const n=[];this._root.traverse(s=>n.push(s)),n.forEach(s=>{s.event&&e(s.event)})}return this}forEachAtTime(e,n){if(this._root!==null){const s=[];this._root.search(e,s),s.forEach(i=>{i.event&&n(i.event)})}return this}forEachFrom(e,n){if(this._root!==null){const s=[];this._root.searchAfter(e,s),s.forEach(i=>{i.event&&n(i.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class oU{constructor(e,n,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=e,this.high=n,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,n){e>this.max||(this.left!==null&&this.left.search(e,n),this.low<=e&&this.high>e&&n.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,n))}searchAfter(e,n){this.low>=e&&(n.push(this),this.left!==null&&this.left.searchAfter(e,n)),this.right!==null&&this.right.searchAfter(e,n)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class lU extends di{constructor(e){super(),this.name="TimelineValue",this._timeline=new Hn({memory:10}),this._initialValue=e}set(e,n){return this._timeline.add({value:e,time:n}),this}get(e){const n=this._timeline.get(e);return n?n.value:this._initialValue}}class Es extends se{constructor(){super(J(Es.getDefaults(),arguments,["context"]))}connect(e,n=0,s=0){return Gh(this,e,n,s),this}}class zo extends Es{constructor(){const e=J(zo.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,on(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):j8(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(je.getDefaults(),{length:1024})}setMap(e,n=1024){const s=new Float32Array(n);for(let i=0,r=n;i<r;i++){const a=i/(r-1)*2-1;s[i]=e(a,i)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){const n=["none","2x","4x"].some(s=>s.includes(e));oe(n,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class F0 extends Es{constructor(){const e=J(F0.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new zo({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(Es.getDefaults(),{value:1})}_expFunc(e){return n=>Math.pow(Math.abs(n),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class rr{constructor(e,n){this.id=rr._eventId++,this._remainderTime=0;const s=Object.assign(rr.getDefaults(),n);this.transport=e,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:Me,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const n=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*n),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}rr._eventId=0;class H0 extends rr{constructor(e,n){super(e,n),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(H0.getDefaults(),n);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},rr.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return Gd(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new _t(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){Gd(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new _t(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const n=this.transport.getTicksAtTime(e);fo(n,this.time)&&(this._nextTick=this.floatTime+Math.ceil((n-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Wh extends Nt{constructor(){const e=J(Wh.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new lU(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Hn,this._repeatedEvents=new aU,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new qh({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Pe(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Nt.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,n){if(this._loop.get(e)&&n>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),n=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&n%this._ppq!==0&&n%(this._swingTicks*2)!==0){const s=n%(this._swingTicks*2)/(this._swingTicks*2),i=Math.sin(s*Math.PI)*this._swingAmount;e+=new _t(this.context,this._swingTicks*2/3).toSeconds()*i}U1(!0),this._timeline.forEachAtTime(n,s=>s.invoke(e)),U1(!1)}schedule(e,n){const s=new rr(this,{callback:e,time:new Ya(this.context,n).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(e,n,s,i=1/0){const r=new H0(this,{callback:e,duration:new es(this.context,i).toTicks(),interval:new es(this.context,n).toTicks(),time:new Ya(this.context,s).toTicks()});return this._addEvent(r,this._repeatedEvents)}scheduleOnce(e,n){const s=new rr(this,{callback:e,once:!0,time:new Ya(this.context,n).toTicks()});return this._addEvent(s,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const n=this._scheduledEvents[e.toString()];n.timeline.remove(n.event),n.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,n){return this._scheduledEvents[e.id.toString()]={event:e,timeline:n},n.add(e),e.id}cancel(e=0){const n=this.toTicks(e);return this._timeline.forEachFrom(n,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(n,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(e,n)=>{n=new _t(this.context,n).toSeconds(),this.emit("start",e,n)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,n){this.context.resume();let s;return xe(n)&&(s=this.toTicks(n)),this._clock.start(e,s),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){on(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new es(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new es(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new _t(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),n=this._clock.getTicksAtTime(e);return new _t(this.context,n).toBarsBeatsSixteenths()}set position(e){const n=this.toTicks(e);this.ticks=n}get seconds(){return this._clock.seconds}set seconds(e){const n=this.now(),s=this._clock.frequency.timeToTicks(e,n);this.ticks=s}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const n=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(n),i=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,n),r=n+i;this.emit("stop",r),this._clock.setTicksAtTime(e,r),this.emit("start",r,this._clock.getSecondsAtTime(r))}else this.emit("ticks",n),this._clock.setTicksAtTime(e,n)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{const n=this.now(),s=this.getTicksAtTime(n),i=e-s%e;return this._clock.nextTickTime(i,n)}}syncSignal(e,n){const s=this.now();let i=this.bpm,r=1/(60/i.getValueAtTime(s)/this.PPQ),a=[];if(e.units==="time"){const l=.015625/r,c=new Re(l),u=new F0(-1),d=new Re(l);i.chain(c,u,d),i=d,r=1/r,a=[c,u,d]}n||(e.getValueAtTime(s)!==0?n=e.getValueAtTime(s)/r:n=0);const o=new Re(n);return i.connect(o),o.connect(e._param),a.push(o),this._syncedSignals.push({initial:e.value,nodes:a,signal:e}),e.value=0,this}unsyncSignal(e){for(let n=this._syncedSignals.length-1;n>=0;n--){const s=this._syncedSignals[n];s.signal===e&&(s.nodes.forEach(i=>i.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(n,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),O0(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Ac.mixin(Wh);Fh(t=>{t.transport=new Wh({context:t})});Hh(t=>{t.transport.dispose()});class Ft extends se{constructor(e){super(e),this.input=void 0,this._state=new Mc("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Me,this._syncedStop=Me,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new js({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Pe(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(se.getDefaults(),{mute:!1,onstop:Me,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,n,s){let i=Tn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(i=this._clampToCurrentTime(i),!this._synced&&this._state.getValueAtTime(i)==="started")oe(fo(i,this._state.get(i).time),"Start time must be strictly greater than previous start time"),this._state.cancel(i),this._state.setStateAtTime("started",i),this.log("restart",i),this.restart(i,n,s);else if(this.log("start",i),this._state.setStateAtTime("started",i),this._synced){const r=this._state.get(i);r&&(r.offset=this.toSeconds(_s(n,0)),r.duration=s?this.toSeconds(s):void 0);const a=this.context.transport.schedule(o=>{this._start(o,n,s)},i);this._scheduled.push(a),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>i&&this._syncedStart(this.now(),this.context.transport.seconds)}else bN(this.context),this._start(i,n,s);return this}stop(e){let n=Tn(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(n=this._clampToCurrentTime(n),this._state.getValueAtTime(n)==="started"||xe(this._state.getNextState("started",n))){if(this.log("stop",n),!this._synced)this._stop(n);else{const s=this.context.transport.schedule(this._stop.bind(this),n);this._scheduled.push(s)}this._state.cancel(n),this._state.setStateAtTime("stopped",n)}return this}restart(e,n,s){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,n,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,n)=>{if(fo(n,0)){const s=this._state.get(n);if(s&&s.state==="started"&&s.time!==n){const i=n-this.toSeconds(s.time);let r;s.duration&&(r=this.toSeconds(s.duration)-i),this._start(e,this.toSeconds(s.offset)+i,r)}}},this._syncedStop=e=>{const n=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(n)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Me,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Rc extends po{constructor(){const e=J(Rc.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,as(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Ne({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Le(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(po.getDefaults(),{url:new Le,loop:!1,loopEnd:0,loopStart:0,onload:Me,onerror:Me,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,n,s,i=1){oe(this.buffer.loaded,"buffer is either not set or not loaded");const r=this.toSeconds(e);this._startGain(r,i),this.loop?n=_s(n,this.loopStart):n=_s(n,0);let a=Math.max(this.toSeconds(n),0);if(this.loop){const o=this.toSeconds(this.loopEnd)||this.buffer.duration,l=this.toSeconds(this.loopStart),c=o-l;cg(a,o)&&(a=(a-l)%c+l),Qn(a,this.buffer.duration)&&(a=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Gd(a,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(r,a)),xe(s)){let o=this.toSeconds(s);o=Math.max(o,0),this.stop(r+o)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class mo extends Ft{constructor(){const e=J(mo.getDefaults(),arguments,["type"]);super(e),this.name="Noise",this._source=null,this._playbackRate=e.playbackRate,this.type=e.type,this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Ft.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(e){if(oe(e in G1,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,this.state==="started")){const n=this.now();this._stop(n),this._start(n)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)}_start(e){const n=G1[this._type];this._source=new Rc({url:n,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(n.duration-.001))}_stop(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(e){this._stop(e),this._start(e)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const ha=44100*5,bp=2,zs={brown:null,pink:null,white:null},G1={get brown(){if(!zs.brown){const t=[];for(let e=0;e<bp;e++){const n=new Float32Array(ha);t[e]=n;let s=0;for(let i=0;i<ha;i++){const r=Math.random()*2-1;n[i]=(s+.02*r)/1.02,s=n[i],n[i]*=3.5}}zs.brown=new Le().fromArray(t)}return zs.brown},get pink(){if(!zs.pink){const t=[];for(let e=0;e<bp;e++){const n=new Float32Array(ha);t[e]=n;let s,i,r,a,o,l,c;s=i=r=a=o=l=c=0;for(let u=0;u<ha;u++){const d=Math.random()*2-1;s=.99886*s+d*.0555179,i=.99332*i+d*.0750759,r=.969*r+d*.153852,a=.8665*a+d*.3104856,o=.55*o+d*.5329522,l=-.7616*l-d*.016898,n[u]=s+i+r+a+o+l+c+d*.5362,n[u]*=.11,c=d*.115926}}zs.pink=new Le().fromArray(t)}return zs.pink},get white(){if(!zs.white){const t=[];for(let e=0;e<bp;e++){const n=new Float32Array(ha);t[e]=n;for(let s=0;s<ha;s++)n[s]=Math.random()*2-1}zs.white=new Le().fromArray(t)}return zs.white}};function sa(t,e){return lt(this,void 0,void 0,function*(){const n=e/t.context.sampleRate,s=new Nc(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class U0 extends po{constructor(){const e=J(U0.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],as(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Ne({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Ne({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Pe(this,["frequency","detune"])}static getDefaults(){return Object.assign(po.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const n=this.toSeconds(e);return this.log("start",n),this._startGain(n),this._oscillator.start(n),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class ot extends Ft{constructor(){const e=J(ot.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new je({context:this.context,units:"frequency",value:e.frequency}),Pe(this,"frequency"),this.detune=new je({context:this.context,units:"cents",value:e.detune}),Pe(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&e.type!=="custom"&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Ft.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const n=this.toSeconds(e),s=new U0({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)}_stop(e){const n=this.toSeconds(e);this._oscillator&&this._oscillator.stop(n)}_restart(e){const n=this.toSeconds(e);return this.log("restart",n),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(n),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return ot._periodicWaveCache.find(n=>n.phase===this._phase&&G8(n.partials,this._partials));{const e=ot._periodicWaveCache.find(n=>n.type===this._type&&n.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const n=["sine","square","sawtooth","triangle"].indexOf(e)!==-1;if(this._phase===0&&n)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=e);else{const s=this._getCachedPeriodicWave();if(xe(s)){const{partials:i,wave:r}=s;this._wave=r,this._partials=i,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[i,r]=this._getRealImaginary(e,this._phase),a=this.context.createPeriodicWave(i,r);this._wave=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),ot._periodicWaveCache.push({imag:r,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:i,type:this._type,wave:this._wave}),ot._periodicWaveCache.length>100&&ot._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&this._type!=="custom"&&e!=="custom"?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){Ln(e,0);let n=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(n=s[1]),this._type!=="custom")e===0?this.type=n:this.type=n+e.toString();else{const i=new Float32Array(e);this._partials.forEach((r,a)=>i[a]=r),this._partials=Array.from(i),this.type=this._type}}_getRealImaginary(e,n){let i=2048;const r=new Float32Array(i),a=new Float32Array(i);let o=1;if(e==="custom"){if(o=this._partials.length+1,this._partialCount=this._partials.length,i=o,this._partials.length===0)return[r,a]}else{const l=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);l?(o=parseInt(l[2],10)+1,this._partialCount=parseInt(l[2],10),e=l[1],o=Math.max(o,2),i=o):this._partialCount=0,this._partials=[]}for(let l=1;l<i;++l){const c=2/(l*Math.PI);let u;switch(e){case"sine":u=l<=o?1:0,this._partials[l-1]=u;break;case"square":u=l&1?2*c:0,this._partials[l-1]=u;break;case"sawtooth":u=c*(l&1?1:-1),this._partials[l-1]=u;break;case"triangle":l&1?u=2*(c*c)*(l-1>>1&1?-1:1):u=0,this._partials[l-1]=u;break;case"custom":u=this._partials[l-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}u!==0?(r[l]=-u*Math.sin(n*l),a[l]=u*Math.cos(n*l)):(r[l]=0,a[l]=0)}return[r,a]}_inverseFFT(e,n,s){let i=0;const r=e.length;for(let a=0;a<r;a++)i+=e[a]*Math.cos(a*s)+n[a]*Math.sin(a*s);return i}getInitialValue(){const[e,n]=this._getRealImaginary(this._type,0);let s=0;const i=Math.PI*2,r=32;for(let a=0;a<r;a++)s=Math.max(this._inverseFFT(e,n,a/r*i),s);return W8(-this._inverseFFT(e,n,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return lt(this,arguments,void 0,function*(e=1024){return sa(this,e)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}ot._periodicWaveCache=[];class MN extends Es{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new zo({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class ar extends je{constructor(){const e=J(ar.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Re({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(je.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class $h extends Ft{constructor(){const e=J($h.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new MN({context:this.context}),this._modulationNode=new Re({context:this.context}),this._carrier=new ot({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new ot({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new ar({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Pe(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(ot.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return lt(this,arguments,void 0,function*(e=1024){return sa(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Dc extends Ft{constructor(){const e=J(Dc.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new Re({context:this.context,gain:0}),this._carrier=new ot({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new je({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new ot({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new ar({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new ar({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Pe(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(ot.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return lt(this,arguments,void 0,function*(e=1024){return sa(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Oc extends Ft{constructor(){const e=J(Oc.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new Re({context:this.context,gain:0}),this._thresh=new zo({context:this.context,mapping:n=>n<=0?-1:1}),this.width=new je({context:this.context,units:"audioRange",value:e.width}),this._triangle=new ot({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Pe(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Ft.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return lt(this,arguments,void 0,function*(e=1024){return sa(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Yh extends Ft{constructor(){const e=J(Yh.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new je({context:this.context,units:"frequency",value:e.frequency}),this.detune=new je({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Pe(this,["frequency","detune"])}static getDefaults(){return Object.assign(ot.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(n=>n.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(n=>n.stop(e))}_restart(e){this._forEach(n=>n.restart(e))}_forEach(e){for(let n=0;n<this._oscillators.length;n++)e(this._oscillators[n],n)}get type(){return this._type}set type(e){this._type=e,this._forEach(n=>n.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const n=-e/2,s=e/(this._oscillators.length-1);this._forEach((i,r)=>i.detune.value=n+s*r)}}get count(){return this._oscillators.length}set count(e){if(Ln(e,1),this._oscillators.length!==e){this._forEach(n=>n.dispose()),this._oscillators=[];for(let n=0;n<e;n++){const s=new ot({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+n/e*360,partialCount:this._partialCount,onstop:n===0?()=>this.onstop(this):Me});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[n]=s}this.spread=this._spread,this.state==="started"&&this._forEach(n=>n.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((n,s)=>n.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(n=>n.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(n=>n.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(n=>n.partialCount=e),this._type=this._oscillators[0].type}asArray(){return lt(this,arguments,void 0,function*(e=1024){return sa(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class Kh extends Ft{constructor(){const e=J(Kh.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new ar({context:this.context,value:2}),this._pulse=new Oc({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new ot({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Pe(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Ft.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return lt(this,arguments,void 0,function*(e=1024){return sa(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const q1={am:$h,fat:Yh,fm:Dc,oscillator:ot,pulse:Oc,pwm:Kh};class $d extends Ft{constructor(){const e=J($d.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new je({context:this.context,units:"frequency",value:e.frequency}),this.detune=new je({context:this.context,units:"cents",value:e.detune}),Pe(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(ot.getDefaults(),Dc.getDefaults(),$h.getDefaults(),Yh.getDefaults(),Oc.getDefaults(),Kh.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(n=>this._sourceType===n)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const n=q1[e],s=this.now();if(this._oscillator){const i=this._oscillator;i.stop(s),this.context.setTimeout(()=>i.dispose(),this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let n="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(n=this._oscillator.type),e==="fm"?this.type="fm"+n:e==="am"?this.type="am"+n:e==="fat"?this.type="fat"+n:e==="oscillator"?this.type=n:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,n){return e instanceof q1[n]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&rs(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&rs(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&ai(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return lt(this,arguments,void 0,function*(e=1024){return sa(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class G0 extends je{constructor(){super(J(G0.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new Re({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,Yr(this._constantSource,this._sum)}static getDefaults(){return Object.assign(je.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Xh extends Es{constructor(){const e=J(Xh.getDefaults(),arguments,["min","max"]);super(e),this.name="Scale",this._mult=this.input=new ar({context:this.context,value:e.max-e.min}),this._add=this.output=new G0({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Es.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class q0 extends Es{constructor(){super(J(q0.getDefaults(),arguments)),this.name="Zero",this._gain=new Re({context:this.context}),this.output=this._gain,this.input=void 0,as(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),NN(this.context.getConstant(0),this._gain),this}}class Yd extends se{constructor(){const e=J(Yd.getDefaults(),arguments,["frequency","min","max"]);super(e),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=Ne.prototype._fromType,this._toType=Ne.prototype._toType,this._is=Ne.prototype._is,this._clampValue=Ne.prototype._clampValue,this._oscillator=new ot(e),this.frequency=this._oscillator.frequency,this._amplitudeGain=new Re({context:this.context,gain:e.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new je({context:this.context,units:"audioRange",value:0}),this._zeros=new q0({context:this.context}),this._a2g=new MN({context:this.context}),this._scaler=this.output=new Xh({context:this.context,max:e.max,min:e.min}),this.units=e.units,this.min=e.min,this.max=e.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),Pe(this,["amplitude","frequency"]),this.phase=e.phase}static getDefaults(){return Object.assign(ot.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this}stop(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(e){e=this._fromType(e),this._scaler.min=e}get max(){return this._toType(this._scaler.max)}set max(e){e=this._fromType(e),this._scaler.max=e}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(e){this._oscillator.partials=e,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e,this._setStoppedValue()}get units(){return this._units}set units(e){const n=this.min,s=this.max;this._units=e,this.min=n,this.max=s}get state(){return this._oscillator.state}connect(e,n,s){return(e instanceof Ne||e instanceof je)&&(this.convert=e.convert,this.units=e.units),Gh(this,e,n,s),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function RN(t,e=1/0){const n=new WeakMap;return function(s,i){Reflect.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(r){Ln(r,t,e),n.set(this,r)}})}}function hi(t,e=1/0){const n=new WeakMap;return function(s,i){Reflect.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(r){Ln(this.toSeconds(r),t,e),n.set(this,r)}})}}class Qh extends Ft{constructor(){const e=J(Qh.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new Le({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Ft.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Me,onerror:Me,playbackRate:1,reverse:!1})}load(e){return lt(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=Me){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,n,s){return super.start(e,n,s),this}_start(e,n,s){this._loop?n=_s(n,this._loopStart):n=_s(n,0);const i=this.toSeconds(n),r=s;s=_s(s,Math.max(this._buffer.duration-i,0));let a=this.toSeconds(s);a=a/this._playbackRate,e=this.toSeconds(e);const o=new Rc({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+a),this._state.setStateAtTime("stopped",e+a,{implicitEnd:!0})),this._activeSources.add(o),this._loop&&Tn(r)?o.start(e,i):o.start(e,i,a-this.toSeconds(this.fadeOut))}_stop(e){const n=this.toSeconds(e);this._activeSources.forEach(s=>s.stop(n))}restart(e,n,s){return super.restart(e,n,s),this}_restart(e,n,s){var i;(i=[...this._activeSources].pop())===null||i===void 0||i.stop(e),this._start(e,n,s)}seek(e,n){const s=this.toSeconds(n);if(this._state.getValueAtTime(s)==="started"){const i=this.toSeconds(e);this._stop(s),this._start(s,i)}return this}setLoopPoints(e,n){return this.loopStart=e,this.loopEnd=n,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Ln(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Ln(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(n=>{n.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(n=>{n.loop=e}),e)){const n=this._state.getNextState("stopped",this.now());n&&this._state.cancel(n.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const n=this.now(),s=this._state.getNextState("stopped",n);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(i=>i.cancelStop())),this._activeSources.forEach(i=>{i.playbackRate.setValueAtTime(e,n)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}ds([hi(0)],Qh.prototype,"fadeIn",void 0);ds([hi(0)],Qh.prototype,"fadeOut",void 0);class cU extends Es{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new zo({context:this.context,mapping:e=>Math.abs(e)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class os extends se{constructor(){const e=J(os.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new je({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(se.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,n){if(ai(e))return e;{let s;for(s in hu)if(hu[s][n]===e)return s;return e}}_setCurve(e,n,s){if(ai(s)&&Reflect.has(hu,s)){const i=hu[s];qi(i)?e!=="_decayCurve"&&(this[e]=i[n]):this[e]=i}else if(on(s)&&e!=="_decayCurve")this[e]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e,n=1){this.log("triggerAttack",e,n),e=this.toSeconds(e);let i=this.toSeconds(this.attack);const r=this.toSeconds(this.decay),a=this.getValueAtTime(e);if(a>0){const o=1/i;i=(1-a)/o}if(i<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(n,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(n,i,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(n,i,e);else{this._sig.cancelAndHoldAtTime(e);let o=this._attackCurve;for(let l=1;l<o.length;l++)if(o[l-1]<=a&&a<=o[l]){o=this._attackCurve.slice(l),o[0]=a;break}this._sig.setValueCurveAtTime(o,e,i,n)}if(r&&this.sustain<1){const o=n*this.sustain,l=e+i;this.log("decay",l),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(o,r+l):this._sig.exponentialApproachValueAtTime(o,l,r)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const n=this.getValueAtTime(e);if(n>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,e):(oe(on(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,n))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,n,s=1){return n=this.toSeconds(n),this.triggerAttack(n,s),this.triggerRelease(n+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,n=0,s=0){return Gh(this,e,n,s),this}asArray(){return lt(this,arguments,void 0,function*(e=1024){const n=e/this.context.sampleRate,s=new Nc(1,n,this.context.sampleRate),i=this.toSeconds(this.attack)+this.toSeconds(this.decay),r=i+this.toSeconds(this.release),a=r*.1,o=r+a,l=new this.constructor(Object.assign(this.get(),{attack:n*this.toSeconds(this.attack)/o,decay:n*this.toSeconds(this.decay)/o,release:n*this.toSeconds(this.release)/o,context:s}));return l._sig.toDestination(),l.triggerAttackRelease(n*(i+a)/o,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}ds([hi(0)],os.prototype,"attack",void 0);ds([hi(0)],os.prototype,"decay",void 0);ds([RN(0,1)],os.prototype,"sustain",void 0);ds([hi(0)],os.prototype,"release",void 0);const hu=(()=>{let e,n;const s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/127*(Math.PI/2));const i=[],r=6.4;for(e=0;e<127;e++){n=e/127;const h=Math.sin(n*(Math.PI*2)*r-Math.PI/2)+1;i[e]=h/10+n*.83}i[127]=1;const a=[],o=5;for(e=0;e<128;e++)a[e]=Math.ceil(e/127*o)/o;const l=[];for(e=0;e<128;e++)n=e/127,l[e]=.5*(1-Math.cos(Math.PI*n));const c=[];for(e=0;e<128;e++){n=e/127;const h=Math.pow(n,3)*4+.2,f=Math.cos(h*Math.PI*2*n);c[e]=Math.abs(f*(1-n))}function u(h){const f=new Array(h.length);for(let m=0;m<h.length;m++)f[m]=1-h[m];return f}function d(h){return h.slice(0).reverse()}return{bounce:{In:u(c),Out:c},cosine:{In:s,Out:d(s)},exponential:"exponential",linear:"linear",ripple:{In:i,Out:u(i)},sine:{In:l,Out:u(l)},step:{In:a,Out:u(a)}}})();class As extends se{constructor(){const e=J(As.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=n=>this._original_triggerRelease(n),this._volume=this.output=new js({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Pe(this,"volume")}static getDefaults(){return Object.assign(se.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,n){const s=this["_original_"+e]=this[e];this[e]=(...i)=>{const r=i[n],a=this.context.transport.schedule(o=>{i[n]=o,s.apply(this,i)},r);this._scheduledEvents.push(a)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,n,s,i){const r=this.toSeconds(s),a=this.toSeconds(n);return this.triggerAttack(e,r,i),this.triggerRelease(r+a),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class oi extends As{constructor(){const e=J(oi.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(As.getDefaults(),{detune:0,onsilence:Me,portamento:0})}triggerAttack(e,n,s=1){this.log("triggerAttack",e,n,s);const i=this.toSeconds(n);return this._triggerEnvelopeAttack(i,s),this.setNote(e,i),this}triggerRelease(e){this.log("triggerRelease",e);const n=this.toSeconds(e);return this._triggerEnvelopeRelease(n),this}setNote(e,n){const s=this.toSeconds(n),i=e instanceof vn?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const r=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(i,r,s)}else this.frequency.setValueAtTime(i,s);return this}}ds([hi(0)],oi.prototype,"portamento",void 0);class Zh extends os{constructor(){super(J(Zh.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Re({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class li extends oi{constructor(){const e=J(li.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new $d(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Zh(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Pe(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(oi.getDefaults(),{envelope:Object.assign(ho(os.getDefaults(),Object.keys(se.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(ho($d.getDefaults(),[...Object.keys(Ft.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,n){if(this.envelope.triggerAttack(e,n),this.oscillator.start(e),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),i=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+i)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Kd extends se{constructor(){const e=J(Kd.getDefaults(),arguments,["frequency","type"]);super(e),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Ne({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new Ne({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new Ne({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new Ne({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(se.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){oe(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const n=new Float32Array(e);for(let a=0;a<e;a++){const l=Math.pow(a/e,2)*19980+20;n[a]=l}const s=new Float32Array(e),i=new Float32Array(e),r=this.context.createBiquadFilter();return r.type=this.type,r.Q.value=this.Q.value,r.frequency.value=this.frequency.value,r.gain.value=this.gain.value,r.getFrequencyResponse(n,s,i),s}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class ia extends se{constructor(){const e=J(ia.getDefaults(),arguments,["frequency","type","rolloff"]);super(e),this.name="Filter",this.input=new Re({context:this.context}),this.output=new Re({context:this.context}),this._filters=[],this._filters=[],this.Q=new je({context:this.context,units:"positive",value:e.Q}),this.frequency=new je({context:this.context,units:"frequency",value:e.frequency}),this.detune=new je({context:this.context,units:"cents",value:e.detune}),this.gain=new je({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,Pe(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(se.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){oe(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(s=>s.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const n=rs(e)?e:parseInt(e,10),s=[-12,-24,-48,-96];let i=s.indexOf(n);oe(i!==-1,`rolloff can only be ${s.join(", ")}`),i+=1,this._rolloff=n,this.input.disconnect(),this._filters.forEach(r=>r.disconnect()),this._filters=new Array(i);for(let r=0;r<i;r++){const a=new Kd({context:this.context});a.type=this._type,this.frequency.connect(a.frequency),this.detune.connect(a.detune),this.Q.connect(a.Q),this.gain.connect(a.gain),this._filters[r]=a}this._internalChannels=this._filters,Yr(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const n=new Kd({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),s=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{n.getFrequencyResponse(e).forEach((r,a)=>s[a]*=r)}),n.dispose(),s}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),O0(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}const W1=[1,1.483,1.932,2.546,2.63,3.897];class Ss extends oi{constructor(){const e=J(Ss.getDefaults(),arguments);super(e),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[],this.detune=new je({context:this.context,units:"cents",value:e.detune}),this.frequency=new je({context:this.context,units:"frequency"}),this._amplitude=new Re({context:this.context,gain:0}).connect(this.output),this._highpass=new ia({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let n=0;n<W1.length;n++){const s=new Dc({context:this.context,harmonicity:e.harmonicity,modulationIndex:e.modulationIndex,modulationType:"square",onstop:n===0?()=>this.onsilence(this):Me,type:"square"});s.connect(this._highpass),this._oscillators[n]=s;const i=new ar({context:this.context,value:W1[n]});this._freqMultipliers[n]=i,this.frequency.chain(i,s.frequency),this.detune.connect(s.detune)}this._filterFreqScaler=new Xh({context:this.context,max:7e3,min:this.toFrequency(e.resonance)}),this.envelope=new os({attack:e.envelope.attack,attackCurve:"linear",context:this.context,decay:e.envelope.decay,release:e.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=e.octaves,this.octaves=e.octaves}static getDefaults(){return $i(oi.getDefaults(),{envelope:Object.assign(ho(os.getDefaults(),Object.keys(se.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(e,n=1){return this.envelope.triggerAttack(e,n),this._oscillators.forEach(s=>s.start(e)),this.envelope.sustain===0&&this._oscillators.forEach(s=>{s.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))}),this}_triggerEnvelopeRelease(e){return this.envelope.triggerRelease(e),this._oscillators.forEach(n=>n.stop(e+this.toSeconds(this.envelope.release))),this}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(e){this._oscillators.forEach(n=>n.modulationIndex.value=e)}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(e){this._oscillators.forEach(n=>n.harmonicity.value=e)}get resonance(){return this._filterFreqScaler.min}set resonance(e){this._filterFreqScaler.min=this.toFrequency(e),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,e)}dispose(){return super.dispose(),this._oscillators.forEach(e=>e.dispose()),this._freqMultipliers.forEach(e=>e.dispose()),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class Un extends li{constructor(){const e=J(Un.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Pe(this,["oscillator","envelope"])}static getDefaults(){return $i(oi.getDefaults(),li.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,n){const s=this.toSeconds(n),i=this.toFrequency(e instanceof vn?e.toFrequency():e),r=i*this.octaves;return this.oscillator.frequency.setValueAtTime(r,s),this.oscillator.frequency.exponentialRampToValueAtTime(i,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}ds([RN(0)],Un.prototype,"octaves",void 0);ds([hi(0)],Un.prototype,"pitchDecay",void 0);class Vt extends As{constructor(){const e=J(Vt.getDefaults(),arguments);super(e),this.name="NoiseSynth",this.noise=new mo(Object.assign({context:this.context},e.noise)),this.envelope=new Zh(Object.assign({context:this.context},e.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(As.getDefaults(),{envelope:Object.assign(ho(os.getDefaults(),Object.keys(se.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(ho(mo.getDefaults(),Object.keys(Ft.getDefaults())),{type:"white"})})}triggerAttack(e,n=1){return e=this.toSeconds(e),this.envelope.triggerAttack(e,n),this.noise.start(e),this.envelope.sustain===0&&this.noise.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(e){return e=this.toSeconds(e),this.envelope.triggerRelease(e),this.noise.stop(e+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(e,n,s=1){return n=this.toSeconds(n),e=this.toSeconds(e),this.triggerAttack(n,s),this.triggerRelease(n+e),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const DN=new Set;function W0(t){DN.add(t)}function ON(t,e){const n=`registerProcessor("${t}", ${e})`;DN.add(n)}const uU=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;W0(uU);const dU=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;W0(dU);const hU=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;W0(hU);const fU="feedback-comb-filter",pU=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;ON(fU,pU);class jc extends As{constructor(){const e=J(jc.getDefaults(),arguments,["voice","options"]);super(e),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=i=>this.releaseAll(i),oe(!rs(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const n=e.voice.getDefaults();this.options=Object.assign(n,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const s=this._voices.indexOf(this._dummyVoice);this._voices.splice(s,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(As.getDefaults(),{maxPolyphony:32,options:{},voice:li})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const n=this._activeVoices.findIndex(s=>s.voice===e);this._activeVoices.splice(n,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return oe(e instanceof oi,"Voice must extend Monophonic class"),e.connect(this.output),this._voices.push(e),e}else zh("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),n=this._voices.indexOf(e);this._voices.splice(n,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,n,s){e.forEach(i=>{const r=new Wd(this.context,i).toMidi(),a=this._getNextAvailableVoice();a&&(a.triggerAttack(i,n,s),this._activeVoices.push({midi:r,voice:a,released:!1}),this.log("triggerAttack",i,n))})}_triggerRelease(e,n){e.forEach(s=>{const i=new Wd(this.context,s).toMidi(),r=this._activeVoices.find(({midi:a,released:o})=>a===i&&!o);r&&(r.voice.triggerRelease(n),r.released=!0,this.log("triggerRelease",s,n))})}_scheduleEvent(e,n,s,i){oe(!this.disposed,"Synth was already disposed"),s<=this.now()?e==="attack"?this._triggerAttack(n,s,i):this._triggerRelease(n,s):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(e,n,s,i)},s-this.now())}triggerAttack(e,n,s){Array.isArray(e)||(e=[e]);const i=this.toSeconds(n);return this._scheduleEvent("attack",e,i,s),this}triggerRelease(e,n){Array.isArray(e)||(e=[e]);const s=this.toSeconds(n);return this._scheduleEvent("release",e,s),this}triggerAttackRelease(e,n,s,i){const r=this.toSeconds(s);if(this.triggerAttack(e,r,i),on(n)){oe(on(e),"If the duration is an array, the notes must also be an array"),e=e;for(let a=0;a<e.length;a++){const o=n[Math.min(a,n.length-1)],l=this.toSeconds(o);oe(l>0,"The duration must be greater than 0"),this.triggerRelease(e[a],r+l)}}else{const a=this.toSeconds(n);oe(a>0,"The duration must be greater than 0"),this.triggerRelease(e,r+a)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(e){const n=ho(e,["onsilence","context"]);return this.options=$i(this.options,n),this._voices.forEach(s=>s.set(n)),this._dummyVoice.set(n),this}get(){return this._dummyVoice.get()}releaseAll(e){const n=this.toSeconds(e);return this._activeVoices.forEach(({voice:s})=>{s.triggerRelease(n)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Jh extends As{constructor(){const e=J(Jh.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const n={};Object.keys(e.urls).forEach(s=>{const i=parseInt(s,10);if(oe(du(s)||rs(i)&&isFinite(i),`url key is neither a note or midi pitch: ${s}`),du(s)){const r=new vn(this.context,s).toMidi();n[r]=e.urls[s]}else rs(i)&&isFinite(i)&&(n[i]=e.urls[i])}),this._buffers=new z0({urls:n,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(As.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Me,onerror:Me,release:.1,urls:{}})}_findClosest(e){let s=0;for(;s<96;){if(this._buffers.has(e+s))return-s;if(this._buffers.has(e-s))return s;s++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,n,s=1){return this.log("triggerAttack",e,n,s),Array.isArray(e)||(e=[e]),e.forEach(i=>{const r=AN(new vn(this.context,i).toFrequency()),a=Math.round(r),o=r-a,l=this._findClosest(a),c=a-l,u=this._buffers.get(c),d=EN(l+o),h=new Rc({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:d}).connect(this.output);h.start(n,0,u.duration/d,s),on(this._activeSources.get(a))||this._activeSources.set(a,[]),this._activeSources.get(a).push(h),h.onended=()=>{if(this._activeSources&&this._activeSources.has(a)){const f=this._activeSources.get(a),m=f.indexOf(h);m!==-1&&f.splice(m,1)}}}),this}triggerRelease(e,n){return this.log("triggerRelease",e,n),Array.isArray(e)||(e=[e]),e.forEach(s=>{const i=new vn(this.context,s).toMidi();if(this._activeSources.has(i)&&this._activeSources.get(i).length){const r=this._activeSources.get(i);n=this.toSeconds(n),r.forEach(a=>{a.stop(n)}),this._activeSources.set(i,[])}}),this}releaseAll(e){const n=this.toSeconds(e);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(n)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,n,s,i=1){const r=this.toSeconds(s);return this.triggerAttack(e,r,i),on(n)?(oe(on(e),"notes must be an array when duration is array"),e.forEach((a,o)=>{const l=n[Math.min(o,n.length-1)];this.triggerRelease(a,r+this.toSeconds(l))})):this.triggerRelease(e,r+this.toSeconds(n)),this}add(e,n,s){if(oe(du(e)||isFinite(e),`note must be a pitch or midi: ${e}`),du(e)){const i=new vn(this.context,e).toMidi();this._buffers.add(i,n,s)}else this._buffers.add(e,n,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(n=>n.dispose())}),this._activeSources.clear(),this}}ds([hi(0)],Jh.prototype,"attack",void 0);ds([hi(0)],Jh.prototype,"release",void 0);class Mr extends Nt{constructor(){const e=J(Mr.getDefaults(),arguments,["callback","value"]);super(e),this.name="ToneEvent",this._state=new Mc("stopped"),this._startOffset=0,this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._playbackRate=e.playbackRate,this._probability=e.probability,this._humanize=e.humanize,this.mute=e.mute,this._playbackRate=e.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(Nt.getDefaults(),{callback:Me,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(e=-1){this._state.forEachFrom(e,n=>{let s;if(n.state==="started"){n.id!==-1&&this.context.transport.clear(n.id);const i=n.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||rs(this._loop)&&this._loop>1){s=1/0,rs(this._loop)&&(s=this._loop*this._getLoopDuration());const r=this._state.getAfter(i);r!==null&&(s=Math.min(s,r.time-i)),s!==1/0&&(s=new _t(this.context,s));const a=new _t(this.context,this._getLoopDuration());n.id=this.context.transport.scheduleRepeat(this._tick.bind(this),a,new _t(this.context,i),s)}else n.id=this.context.transport.schedule(this._tick.bind(this),new _t(this.context,i))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e}get probability(){return this._probability}set probability(e){this._probability=e}get humanize(){return this._humanize}set humanize(e){this._humanize=e}start(e){const n=this.toTicks(e);return this._state.getValueAtTime(n)==="stopped"&&(this._state.add({id:-1,state:"started",time:n}),this._rescheduleEvents(n)),this}stop(e){this.cancel(e);const n=this.toTicks(e);if(this._state.getValueAtTime(n)==="started"){this._state.setStateAtTime("stopped",n,{id:-1});const s=this._state.getBefore(n);let i=n;s!==null&&(i=s.time),this._rescheduleEvents(i)}return this}cancel(e){e=_s(e,-1/0);const n=this.toTicks(e);return this._state.forEachFrom(n,s=>{this.context.transport.clear(s.id)}),this._state.cancel(n),this}_tick(e){const n=this.context.transport.getTicksAtTime(e);if(!this.mute&&this._state.getValueAtTime(n)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let s=.02;vN(this.humanize)||(s=this.toSeconds(this.humanize)),e+=(Math.random()*2-1)*s}this.callback(e,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(e){this._loop=e,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._rescheduleEvents()}get loopEnd(){return new _t(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._rescheduleEvents()}get loopStart(){return new _t(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const e=this.context.transport.ticks,n=this._state.get(e);if(n!==null&&n.state==="started"){const s=this._getLoopDuration();return(e-n.time)%s/s}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class ef extends Nt{constructor(){const e=J(ef.getDefaults(),arguments,["callback","interval"]);super(e),this.name="Loop",this._event=new Mr({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:e.interval,playbackRate:e.playbackRate,probability:e.probability,humanize:e.humanize}),this.callback=e.callback,this.iterations=e.iterations}static getDefaults(){return Object.assign(Nt.getDefaults(),{interval:"4n",callback:Me,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(e){return this._event.start(e),this}stop(e){return this._event.stop(e),this}cancel(e){return this._event.cancel(e),this}_tick(e){this.callback(e)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(e){this._event.loopEnd=e}get playbackRate(){return this._event.playbackRate}set playbackRate(e){this._event.playbackRate=e}get humanize(){return this._event.humanize}set humanize(e){this._event.humanize=e}get probability(){return this._event.probability}set probability(e){this._event.probability=e}get mute(){return this._event.mute}set mute(e){this._event.mute=e}get iterations(){return this._event.loop===!0?1/0:this._event.loop}set iterations(e){e===1/0?this._event.loop=!0:this._event.loop=e}dispose(){return super.dispose(),this._event.dispose(),this}}class Xl extends Mr{constructor(){const e=J(Xl.getDefaults(),arguments,["callback","events"]);super(e),this.name="Part",this._state=new Mc("stopped"),this._events=new Set,this._state.increasing=!0,e.events.forEach(n=>{on(n)?this.add(n[0],n[1]):this.add(n)})}static getDefaults(){return Object.assign(Mr.getDefaults(),{events:[]})}start(e,n){const s=this.toTicks(e);if(this._state.getValueAtTime(s)!=="started"){n=_s(n,this._loop?this._loopStart:0),this._loop?n=_s(n,this._loopStart):n=_s(n,0);const i=this.toTicks(n);this._state.add({id:-1,offset:i,state:"started",time:s}),this._forEach(r=>{this._startNote(r,s,i)})}return this}_startNote(e,n,s){n-=s,this._loop?e.startOffset>=this._loopStart&&e.startOffset<this._loopEnd?(e.startOffset<s&&(n+=this._getLoopDuration()),e.start(new _t(this.context,n))):e.startOffset<this._loopStart&&e.startOffset>=s&&(e.loop=!1,e.start(new _t(this.context,n))):e.startOffset>=s&&e.start(new _t(this.context,n))}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e,this._forEach(n=>{n.startOffset+=this._startOffset})}stop(e){const n=this.toTicks(e);return this._state.cancel(n),this._state.setStateAtTime("stopped",n),this._forEach(s=>{s.stop(e)}),this}at(e,n){const s=new Ya(this.context,e).toTicks(),i=new _t(this.context,1).toSeconds(),r=this._events.values();let a=r.next();for(;!a.done;){const o=a.value;if(Math.abs(s-o.startOffset)<i)return xe(n)&&(o.value=n),o;a=r.next()}return xe(n)?(this.add(e,n),this.at(e)):null}add(e,n){e instanceof Object&&Reflect.has(e,"time")&&(n=e,e=n.time);const s=this.toTicks(e);let i;return n instanceof Mr?(i=n,i.callback=this._tick.bind(this)):i=new Mr({callback:this._tick.bind(this),context:this.context,value:n}),i.startOffset=s,i.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(i),this._restartEvent(i),this}_restartEvent(e){this._state.forEach(n=>{n.state==="started"?this._startNote(e,n.time,n.offset):e.stop(new _t(this.context,n.time))})}remove(e,n){return qi(e)&&e.hasOwnProperty("time")&&(n=e,e=n.time),e=this.toTicks(e),this._events.forEach(s=>{s.startOffset===e&&(Tn(n)||xe(n)&&s.value===n)&&(this._events.delete(s),s.dispose())}),this}clear(){return this._forEach(e=>e.dispose()),this._events.clear(),this}cancel(e){return this._forEach(n=>n.cancel(e)),this._state.cancel(this.toTicks(e)),this}_forEach(e){return this._events&&this._events.forEach(n=>{n instanceof Xl?n._forEach(e):e(n)}),this}_setAll(e,n){this._forEach(s=>{s[e]=n})}_tick(e,n){this.mute||this.callback(e,n)}_testLoopBoundries(e){this._loop&&(e.startOffset<this._loopStart||e.startOffset>=this._loopEnd)?e.cancel(0):e.state==="stopped"&&this._restartEvent(e)}get probability(){return this._probability}set probability(e){this._probability=e,this._setAll("probability",e)}get humanize(){return this._humanize}set humanize(e){this._humanize=e,this._setAll("humanize",e)}get loop(){return this._loop}set loop(e){this._loop=e,this._forEach(n=>{n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.loop=e,this._testLoopBoundries(n)})}get loopEnd(){return new _t(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._forEach(n=>{n.loopEnd=e,this._testLoopBoundries(n)})}get loopStart(){return new _t(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._forEach(n=>{n.loopStart=this.loopStart,this._testLoopBoundries(n)})}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._setAll("playbackRate",e)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}class tf extends se{constructor(){const e=J(tf.getDefaults(),arguments,["fade"]);super(e),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new cU({context:this.context}),this.a=new Re({context:this.context,gain:0}),this.b=new Re({context:this.context,gain:0}),this.output=new Re({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new je({context:this.context,units:"normalRange",value:e.fade}),Pe(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",as(this._split,this.a.gain,0),as(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(se.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class $1 extends se{constructor(e){super(e),this.name="Effect",this._dryWet=new tf({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Re({context:this.context}),this.effectReturn=new Re({context:this.context}),this.input=new Re({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(e.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],Pe(this,"wet")}static getDefaults(){return Object.assign(se.getDefaults(),{wet:1})}connectEffect(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class $0 extends se{constructor(){const e=J($0.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new Ne({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Pe(this,"pan")}static getDefaults(){return Object.assign(se.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const mU="bit-crusher",gU=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;ON(mU,gU);class nf extends se{constructor(){const e=J(nf.getDefaults(),arguments,["channels"]);super(e),this.name="Split",this._splitter=this.input=this.output=this.context.createChannelSplitter(e.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(se.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class Pc extends se{constructor(){const e=J(Pc.getDefaults(),arguments,["channels"]);super(e),this.name="Merge",this._merger=this.output=this.input=this.context.createChannelMerger(e.channels)}static getDefaults(){return Object.assign(se.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class Y1 extends se{constructor(e){super(e),this.name="StereoEffect",this.input=new Re({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new tf({context:this.context,fade:e.wet}),this.wet=this._dryWet.fade,this._split=new nf({context:this.context,channels:2}),this._merge=new Pc({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),Pe(this,["wet"])}connectEffectLeft(...e){this._split.connect(e[0],0,0),Yr(...e),as(e[e.length-1],this._merge,0,0)}connectEffectRight(...e){this._split.connect(e[0],1,0),Yr(...e),as(e[e.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(se.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class K1 extends Y1{constructor(e){super(e),this.feedback=new je({context:this.context,value:e.feedback,units:"normalRange"}),this._feedbackL=new Re({context:this.context}),this._feedbackR=new Re({context:this.context}),this._feedbackSplit=new nf({context:this.context,channels:2}),this._feedbackMerge=new Pc({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),Pe(this,["feedback"])}static getDefaults(){return Object.assign(Y1.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class Y0 extends K1{constructor(){const e=J(Y0.getDefaults(),arguments,["frequency","delayTime","depth"]);super(e),this.name="Chorus",this._depth=e.depth,this._delayTime=e.delayTime/1e3,this._lfoL=new Yd({context:this.context,frequency:e.frequency,min:0,max:1}),this._lfoR=new Yd({context:this.context,frequency:e.frequency,min:0,max:1,phase:180}),this._delayNodeL=new qd({context:this.context}),this._delayNodeR=new qd({context:this.context}),this.frequency=this._lfoL.frequency,Pe(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=e.type,this.spread=e.spread}static getDefaults(){return Object.assign(K1.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(e){this._depth=e;const n=this._delayTime*e;this._lfoL.min=Math.max(this._delayTime-n,0),this._lfoL.max=this._delayTime+n,this._lfoR.min=Math.max(this._delayTime-n,0),this._lfoR.max=this._delayTime+n}get delayTime(){return this._delayTime*1e3}set delayTime(e){this._delayTime=e/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(e){this._lfoL.type=e,this._lfoR.type=e}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(e){this._lfoL.phase=90-e/2,this._lfoR.phase=e/2+90}start(e){return this._lfoL.start(e),this._lfoR.start(e),this}stop(e){return this._lfoL.stop(e),this._lfoR.stop(e),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class K0 extends $1{constructor(){const e=J(K0.getDefaults(),arguments,["decay"]);super(e),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const n=this.toSeconds(e.decay);Ln(n,.001),this._decay=n;const s=this.toSeconds(e.preDelay);Ln(s,0),this._preDelay=s,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign($1.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(e){e=this.toSeconds(e),Ln(e,.001),this._decay=e,this.generate()}get preDelay(){return this._preDelay}set preDelay(e){e=this.toSeconds(e),Ln(e,0),this._preDelay=e,this.generate()}generate(){return lt(this,void 0,void 0,function*(){const e=this.ready,n=new Nc(2,this._decay+this._preDelay,this.context.sampleRate),s=new mo({context:n}),i=new mo({context:n}),r=new Pc({context:n});s.connect(r,0,0),i.connect(r,0,1);const a=new Re({context:n}).toDestination();r.connect(a),s.start(0),i.start(0),a.gain.setValueAtTime(0,0),a.gain.setValueAtTime(1,this._preDelay),a.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const o=n.render();return this.ready=o.then(Me),yield e,this._convolver.buffer=(yield o).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class ht extends se{constructor(){const e=J(ht.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new Re({context:this.context}),ht._allSolos.has(this.context)||ht._allSolos.set(this.context,new Set),ht._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(se.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),ht._allSolos.get(this.context).forEach(n=>n._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){ht._soloed.has(this.context)||ht._soloed.set(this.context,new Set),ht._soloed.get(this.context).add(this)}_removeSolo(){ht._soloed.has(this.context)&&ht._soloed.get(this.context).delete(this)}_isSoloed(){return ht._soloed.has(this.context)&&ht._soloed.get(this.context).has(this)}_noSolos(){return!ht._soloed.has(this.context)||ht._soloed.has(this.context)&&ht._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),ht._allSolos.get(this.context).delete(this),this._removeSolo(),this}}ht._allSolos=new Map;ht._soloed=new Map;class X0 extends se{constructor(){const e=J(X0.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new $0({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new js({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Pe(this,["pan","volume"])}static getDefaults(){return Object.assign(se.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Ba extends se{constructor(){const e=J(Ba.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new ht({solo:e.solo,context:this.context}),this._panVol=this.output=new X0({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Pe(this,["pan","volume"])}static getDefaults(){return Object.assign(se.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return Ba.buses.has(e)||Ba.buses.set(e,new Re({context:this.context})),Ba.buses.get(e)}send(e,n=0){const s=this._getBus(e),i=new Re({context:this.context,units:"decibels",gain:n});return this.connect(i),i.connect(s),i}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Ba.buses=new Map;function Kn(){return Kt().now()}Kt().transport;function nn(){return Kt().transport}Kt().destination;Kt().destination;Kt().listener;Kt().draw;Kt();class yU{constructor(){de(this,"synth",null);de(this,"volume",null);de(this,"filter",null);de(this,"chorus",null);de(this,"reverb",null);de(this,"started",!1);de(this,"currentPresetIndex",0);de(this,"effectParams",{reverbWet:0,chorusDepth:0,filterCutoff:18e3,filterResonance:1})}async start(){this.started||(await X8(),this.volume=new js(xk).toDestination(),this.reverb=new K0({decay:2.5,wet:0}),this.chorus=new Y0({frequency:1.5,delayTime:3.5,depth:0,wet:0}).start(),this.filter=new ia({frequency:18e3,type:"lowpass",Q:1}),this.filter.connect(this.chorus),this.chorus.connect(this.reverb),this.reverb.connect(this.volume),this.createSynth(Jn[0]),this.started=!0)}createSynth(e){this.synth&&(this.synth.releaseAll(),this.synth.dispose()),this.synth=new jc(li,{maxPolyphony:u0,oscillator:e.oscillator,envelope:e.envelope}),this.synth.connect(this.filter)}noteOn(e,n){if(!this.synth||!this.started)return;const s=ir(e);this.synth.triggerAttack(s,Kn(),n)}noteOff(e){if(!this.synth||!this.started)return;const n=ir(e);this.synth.triggerRelease(n,Kn())}releaseAll(){var e;(e=this.synth)==null||e.releaseAll()}setVolume(e){this.volume&&(this.volume.volume.value=e)}setPreset(e){e<0||e>=Jn.length||(this.currentPresetIndex=e,this.started&&this.createSynth(Jn[e]))}setReverbWet(e){this.reverb&&(this.reverb.wet.value=e,this.effectParams.reverbWet=e)}setChorusDepth(e){this.chorus&&(this.chorus.depth=e,this.chorus.wet.value=e>0?.5:0,this.effectParams.chorusDepth=e)}setFilterCutoff(e){this.filter&&(this.filter.frequency.value=e,this.effectParams.filterCutoff=e)}setFilterResonance(e){this.filter&&(this.filter.Q.value=e,this.effectParams.filterResonance=e)}getEffectParams(){return{...this.effectParams}}getPresetIndex(){return this.currentPresetIndex}isStarted(){return this.started}dispose(){var e,n,s,i,r,a;(e=this.synth)==null||e.releaseAll(),(n=this.synth)==null||n.dispose(),(s=this.filter)==null||s.dispose(),(i=this.chorus)==null||i.dispose(),(r=this.reverb)==null||r.dispose(),(a=this.volume)==null||a.dispose(),this.synth=null,this.filter=null,this.chorus=null,this.reverb=null,this.volume=null,this.started=!1}}const Ot=new yU;function vU({effectParams:t,onEffectChange:e}){const n=(s,i)=>{switch(s){case"reverbWet":Ot.setReverbWet(i);break;case"chorusDepth":Ot.setChorusDepth(i);break;case"filterCutoff":Ot.setFilterCutoff(i);break;case"filterResonance":Ot.setFilterResonance(i);break}e(Ot.getEffectParams())};return p.jsxs(AV,{className:"flex flex-row items-center gap-6 border-border bg-card/60 backdrop-blur-sm px-4 py-2",children:[p.jsx(fu,{label:"Reverb",value:t.reverbWet,min:0,max:1,step:.01,displayValue:`${Math.round(t.reverbWet*100)}%`,onChange:s=>n("reverbWet",s)}),p.jsx(fu,{label:"Chorus",value:t.chorusDepth,min:0,max:1,step:.01,displayValue:`${Math.round(t.chorusDepth*100)}%`,onChange:s=>n("chorusDepth",s)}),p.jsx(fu,{label:"Filter",value:t.filterCutoff,min:60,max:18e3,step:1,displayValue:t.filterCutoff>=1e3?`${(t.filterCutoff/1e3).toFixed(1)}k`:`${Math.round(t.filterCutoff)}`,onChange:s=>n("filterCutoff",s)}),p.jsx(fu,{label:"Resonance",value:t.filterResonance,min:0,max:20,step:.1,displayValue:t.filterResonance.toFixed(1),onChange:s=>n("filterResonance",s)})]})}function fu({label:t,value:e,min:n,max:s,step:i,displayValue:r,onChange:a}){return p.jsxs("div",{className:"flex flex-1 items-center gap-2",children:[p.jsx("span",{className:"w-16 text-[11px] font-semibold uppercase tracking-wider text-muted-foreground",children:t}),p.jsx(Dh,{min:n,max:s,step:i,value:[e],onValueChange:([o])=>a(o),className:"flex-1"}),p.jsx(jd,{variant:"secondary",className:"w-12 justify-center font-mono text-[10px]",children:r})]})}function bU({className:t,size:e="default",...n}){return p.jsx(lL,{"data-slot":"switch","data-size":e,className:ye("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 group/switch inline-flex shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-[1.15rem] data-[size=default]:w-8 data-[size=sm]:h-3.5 data-[size=sm]:w-6",t),...n,children:p.jsx(cL,{"data-slot":"switch-thumb",className:ye("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block rounded-full ring-0 transition-transform group-data-[size=default]/switch:size-4 group-data-[size=sm]/switch:size-3 data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function Xd({className:t,...e}){return p.jsx(sI,{"data-slot":"label",className:ye("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}function xU(t){const e=Math.floor(t/4)+1,n=Math.floor(t%4)+1;return`${e}:${n}`}function _U({state:t,bpm:e,metronomeOn:n,positionBeats:s,recordDisabled:i,onRecord:r,onStopRecording:a,onPlay:o,onStop:l,onBpmChange:c,onMetronomeToggle:u}){const d=t==="recording",h=t==="playing";return p.jsxs("div",{className:"flex items-center gap-4 border-b border-border bg-card/60 backdrop-blur-sm px-4 py-2",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(Ee,{variant:d?"destructive":"ghost",size:"sm",className:ye("h-8 w-8 p-0",d&&"animate-rec-pulse"),onClick:d?a:r,disabled:!d&&i,children:p.jsx(o4,{className:ye("h-4 w-4",d?"fill-current":"")})}),p.jsx(Ee,{variant:h?"default":"ghost",size:"sm",className:"h-8 w-8 p-0",style:h?{backgroundColor:"oklch(0.65 0.20 155)",boxShadow:"0 0 12px 2px oklch(0.65 0.20 155 / 0.35)"}:void 0,onClick:o,disabled:d,children:p.jsx($y,{className:ye("h-4 w-4",h&&"fill-current")})}),p.jsx(Ee,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:d?a:l,disabled:t==="stopped",children:p.jsx(Yy,{className:"h-4 w-4"})})]}),p.jsx(jd,{variant:"secondary",className:"min-w-[52px] justify-center font-mono text-xs",style:{backgroundColor:"oklch(0.14 0.01 270)",border:"1px solid oklch(0.30 0.02 270)",boxShadow:"inset 0 1px 3px oklch(0 0 0 / 0.3)"},children:xU(s)}),d&&p.jsx(jd,{variant:"destructive",className:"text-[10px]",children:"REC"}),p.jsx("div",{className:"h-4 w-px bg-border/60"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Xd,{className:"text-[11px] font-semibold text-muted-foreground",children:"BPM"}),p.jsx(Dh,{min:mV,max:gV,step:1,value:[e],onValueChange:([f])=>c(f),className:"w-20"}),p.jsx("span",{className:"w-7 text-center font-mono text-xs text-primary",children:e})]}),p.jsx("div",{className:"h-4 w-px bg-border/60"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Xd,{htmlFor:"metronome",className:"text-[11px] font-semibold text-muted-foreground",children:"Metro"}),p.jsx(bU,{id:"metronome",checked:n,onCheckedChange:u})]})]})}function sf({activePads:t,onHit:e,compact:n,highlightedPads:s}){return p.jsx("div",{className:ye("grid grid-cols-4 grid-rows-2",n?"gap-1":"gap-2"),children:Oh.map(i=>p.jsx(SU,{id:i.id,name:i.name,shortName:i.shortName,color:i.color,isActive:t.has(i.id),isHighlighted:(s==null?void 0:s.has(i.id))??!1,onHit:e,compact:n},i.id))})}function SU({id:t,name:e,shortName:n,color:s,isActive:i,isHighlighted:r,onHit:a,compact:o}){const[l,c]=x.useState(!1),u=x.useCallback(d=>{d.preventDefault(),c(!0),a(t,.8),setTimeout(()=>c(!1),120)},[t,a]);return p.jsxs("button",{className:ye("flex flex-col items-center justify-center rounded-xl border border-border/50","select-none transition-all duration-75",o?"h-10":"h-16",l&&"animate-pad-hit",!i&&"hover:brightness-110"),style:{backgroundColor:i?s:`color-mix(in oklch, ${s} 20%, var(--secondary))`,boxShadow:i?`0 0 16px 3px ${s}`:r?`0 0 12px 2px ${s}, inset 0 2px 4px rgba(0,0,0,0.3)`:"inset 0 2px 4px rgba(0,0,0,0.3)",outline:r&&!i?`2px solid ${s}`:void 0,outlineOffset:"1px"},onPointerDown:u,children:[p.jsx("span",{className:ye("font-bold text-foreground",o?"text-[10px]":"text-xs"),children:n}),!o&&p.jsx("span",{className:"text-[9px] text-muted-foreground",children:e})]})}function X1({midiNote:t,isActive:e,isHighlighted:n,onNoteOn:s,onNoteOff:i,showLabel:r,compact:a}){const o=x.useRef(!1),l=ql(t),c=ir(t),u=x.useCallback(f=>{f.preventDefault(),f.target.setPointerCapture(f.pointerId),o.current=!0,s(t,.7)},[t,s]),d=x.useCallback(f=>{f.preventDefault(),o.current&&(o.current=!1,i(t))},[t,i]),h=x.useCallback(f=>{o.current&&(o.current=!1,i(t))},[t,i]);return p.jsx("button",{className:ye("relative flex flex-col items-center justify-end select-none transition-colors duration-75",l?ye("z-10 rounded-b-md border border-border/50",a?"h-[60px] w-[24px]":"h-[100px] w-[30px]",e?"shadow-[0_0_12px_2px] shadow-primary/40":n?"ring-1 ring-primary/40":"hover:brightness-125"):ye("rounded-b-lg border border-border/30",a?"h-[100px] w-[32px]":"h-[160px] w-[40px]",e?"shadow-[0_0_12px_2px] shadow-primary/30":n?"ring-1 ring-primary/30":"")),style:{backgroundColor:l?e?"var(--primary)":n?"oklch(0.20 0.04 265)":"oklch(0.15 0.02 270)":e?"oklch(0.75 0.12 265)":n?"oklch(0.85 0.03 265)":"oklch(0.90 0.008 270)"},onPointerDown:u,onPointerUp:d,onPointerLeave:h,children:r&&!l&&p.jsx("span",{className:ye("mb-2 font-mono text-[10px] font-medium",e?"text-primary-foreground":"text-muted-foreground"),children:c})})}function mr({activeNotes:t,onNoteOn:e,onNoteOff:n,highlightedNotes:s,compact:i}){const r=x.useMemo(()=>{const h=[];for(let f=Wl;f<=uV;f++)h.push(f);return h},[]),a=r.filter(h=>!ql(h)),o=r.filter(h=>ql(h)),l=i?32:40,c=1,u=l+c,d=i?12:15;return p.jsxs("div",{className:ye("flex flex-col items-center justify-end",i?"pb-2":"flex-1 pb-6"),children:[p.jsx("div",{className:"relative mb-2 flex",children:p.jsx("div",{className:"flex",style:{gap:`${c}px`},children:a.map(h=>p.jsx("div",{className:"flex items-center justify-center",style:{width:l},children:h%12===0&&p.jsx("span",{className:"font-mono text-[10px] font-medium text-muted-foreground",children:ir(h)})},h))})}),p.jsxs("div",{className:"relative flex",style:{gap:`${c}px`},children:[a.map(h=>p.jsx(X1,{midiNote:h,isActive:t.has(h),isHighlighted:s?s.has(h%12):!1,onNoteOn:e,onNoteOff:n,showLabel:!i,compact:i},h)),o.map(h=>{const m=a.filter(g=>g<h).length*u-d;return p.jsx("div",{className:"absolute top-0",style:{left:`${m}px`},children:p.jsx(X1,{midiNote:h,isActive:t.has(h),isHighlighted:s?s.has(h%12):!1,onNoteOn:e,onNoteOff:n,showLabel:!1,compact:i})},h)})]})]})}function wU({activeNotes:t,onNoteOn:e,onNoteOff:n,highlightedNotes:s,activePads:i,onDrumHit:r}){return p.jsxs("div",{className:"flex h-[140px] shrink-0 items-end gap-3 border-t px-3 py-2",style:{backgroundColor:"oklch(0.15 0.012 270 / 0.6)",backdropFilter:"blur(12px)",borderColor:"oklch(0.28 0.02 270)"},children:[p.jsx("div",{className:"w-[200px] shrink-0",children:p.jsx(sf,{activePads:i,onHit:r,compact:!0})}),p.jsx("div",{className:"flex-1 overflow-x-auto overflow-y-hidden",children:p.jsx(mr,{activeNotes:t,onNoteOn:e,onNoteOff:n,highlightedNotes:s,compact:!0})})]})}const CU={.25:"1/16",.5:"1/8",1:"1/4",2:"1/2",4:"Bar"};function TU({snapValue:t,pxPerBeat:e,canUndo:n,canRedo:s,onSnapChange:i,onZoomChange:r,onAddSynthTrack:a,onAddDrumTrack:o,onUndo:l,onRedo:c,onExport:u,tool:d,onToolChange:h}){return p.jsxs("div",{className:"flex items-center gap-3 border-b border-border bg-card/60 backdrop-blur-sm px-3 py-1.5",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsxs(Ee,{variant:"outline",size:"sm",className:"h-6 gap-1 px-2 text-[11px] font-semibold",style:{borderColor:"var(--primary)",color:"var(--primary)"},onClick:a,children:[p.jsx(Hx,{className:"h-3 w-3"})," Synth"]}),p.jsxs(Ee,{variant:"outline",size:"sm",className:"h-6 gap-1 px-2 text-[11px] font-semibold",onClick:o,children:[p.jsx(Hx,{className:"h-3 w-3"})," Drums"]})]}),p.jsx("div",{className:"h-4 w-px bg-border/60"}),p.jsxs("div",{className:"flex items-center gap-0.5",children:[p.jsx(Ee,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",disabled:!n,onClick:l,title:"Undo (Ctrl+Z)",children:p.jsx(uE,{className:"h-3.5 w-3.5"})}),p.jsx(Ee,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",disabled:!s,onClick:c,title:"Redo (Ctrl+Shift+Z)",children:p.jsx(aE,{className:"h-3.5 w-3.5"})})]}),p.jsx("div",{className:"h-4 w-px bg-border/60"}),p.jsxs("div",{className:"flex items-center gap-0.5",children:[p.jsx(Ee,{variant:d==="pointer"?"default":"ghost",size:"sm",className:`h-6 w-6 p-0 ${d==="pointer"?"ring-1 ring-primary/50 shadow-sm shadow-primary/30":""}`,onClick:()=>h("pointer"),title:"Pointer (V)",children:p.jsx(sE,{className:"h-3.5 w-3.5"})}),p.jsx(Ee,{variant:d==="cut"?"default":"ghost",size:"sm",className:`h-6 w-6 p-0 ${d==="cut"?"ring-1 ring-primary/50 shadow-sm shadow-primary/30":""}`,onClick:()=>h("cut"),title:"Cut (C)",children:p.jsx(P4,{className:"h-3.5 w-3.5"})})]}),p.jsx("div",{className:"h-4 w-px bg-border/60"}),p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx(Xd,{className:"text-[11px] font-semibold text-muted-foreground",children:"Snap"}),p.jsxs(mc,{value:String(t),onValueChange:f=>i(Number(f)),children:[p.jsx(yc,{className:"h-6 w-16 border-0 bg-transparent text-[11px]",children:p.jsx(gc,{})}),p.jsx(vc,{children:wk.map(f=>p.jsx(qr,{value:String(f),children:CU[f]},f))})]})]}),p.jsx("div",{className:"h-4 w-px bg-border/60"}),p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(Ee,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>r(Math.max(d0,e-10)),children:p.jsx(J4,{className:"h-3 w-3"})}),p.jsx("span",{className:"w-6 text-center font-mono text-[10px] text-muted-foreground",children:e}),p.jsx(Ee,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>r(Math.min(h0,e+10)),children:p.jsx(Q4,{className:"h-3 w-3"})})]}),p.jsx("div",{className:"flex-1"}),p.jsxs(Ee,{variant:"outline",size:"sm",className:"h-6 gap-1 px-2 text-[11px] font-semibold",onClick:u,children:[p.jsx(d4,{className:"h-3 w-3"})," Export"]})]})}function bn(t,e){return t*e}function dg(t,e){return t/e}function rl(t,e){return e<=0?t:Math.round(t/e)*e}function EU({lengthBeats:t,pxPerBeat:e,snapValue:n,onSeek:s}){const i=bn(t,e),r=[];for(let o=0;o<=t;o++)o%4===0?r.push({beat:o,isBar:!0,label:`${o/4+1}`}):e>=20&&r.push({beat:o,isBar:!1,label:""});const a=o=>{const l=o.currentTarget.getBoundingClientRect(),c=o.clientX-l.left,u=rl(dg(c,e),n);s(Math.max(0,u))};return p.jsx("div",{className:"relative h-6 cursor-pointer border-b border-border bg-card/80",style:{width:i},onClick:a,children:r.map(o=>p.jsxs("div",{className:"absolute top-0",style:{left:bn(o.beat,e)},children:[p.jsx("div",{className:`w-px ${o.isBar?"h-6 bg-border":"h-3 bg-border/50"}`}),o.isBar&&p.jsx("span",{className:"absolute left-1 top-0 select-none font-mono text-[10px] text-muted-foreground",children:o.label})]},o.beat))})}function AU({track:t,isArmed:e,isRecording:n,onMuteToggle:s,onSoloToggle:i,onVolumeChange:r,onInstrumentChange:a,onDelete:o,onArmToggle:l}){return p.jsxs("div",{className:"flex h-16 shrink-0 flex-col justify-center border-b border-border px-2",style:{borderLeft:`3px solid ${t.color}`,boxShadow:`inset 4px 0 12px -4px ${t.color}33`},children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("button",{className:ye("h-4 w-4 rounded-full border-2 transition-colors",n?"border-red-500 bg-red-500 animate-pulse":e?"border-red-500 bg-red-500":"border-muted-foreground/50 bg-transparent"),onClick:l,title:e?"Disarm track":"Arm track for recording"}),p.jsxs(mc,{value:`${t.instrument.type}-${t.instrument.presetIndex}`,onValueChange:c=>{const[u,d]=c.split("-");a({type:u,presetIndex:Number(d)})},children:[p.jsx(yc,{className:"h-5 flex-1 border-0 bg-transparent px-1 text-[11px] font-semibold",children:p.jsx(gc,{})}),p.jsxs(vc,{children:[Jn.map((c,u)=>p.jsx(qr,{value:`synth-${u}`,children:c.name},`synth-${u}`)),p.jsx(qr,{value:"drums-0",children:"Drums"})]})]}),p.jsx(Ee,{variant:"ghost",size:"sm",className:"h-5 w-5 p-0",onClick:o,children:p.jsx(F4,{className:"h-3 w-3 text-muted-foreground"})})]}),p.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[p.jsx(Ee,{variant:"ghost",size:"sm",className:ye("h-5 w-5 p-0",t.muted&&"text-red-500"),onClick:s,title:"Mute",children:t.muted?p.jsx(hE,{className:"h-3 w-3"}):p.jsx(dE,{className:"h-3 w-3"})}),p.jsx(Ee,{variant:"ghost",size:"sm",className:ye("h-5 w-5 p-0 text-[10px] font-bold",t.solo&&"text-yellow-500"),onClick:i,title:"Solo",children:"S"}),p.jsx(Dh,{min:eg,max:_k,step:1,value:[t.volume],onValueChange:([c])=>r(c),className:"w-16"})]})]})}function kU({notes:t,lengthBeats:e,isDrum:n}){if(t.length===0)return null;const s=n?36:Math.min(...t.map(a=>a.note),Wl),i=n?43:Math.max(...t.map(a=>a.note),Wl+12),r=Math.max(i-s+1,4);return p.jsx("div",{className:"absolute inset-0.5 overflow-hidden",children:t.map((a,o)=>{const l=`${a.startBeat/e*100}%`,c=`${Math.max(a.durationBeats/e*100,1)}%`,u=`${(a.note-s)/r*100}%`,d=`${Math.max(100/r,4)}%`;return p.jsx("div",{className:"absolute rounded-[1px] bg-white/60",style:{left:l,width:c,bottom:u,height:Math.max(2,parseFloat(d))}},o)})})}function NU({region:t,trackColor:e,pxPerBeat:n,snapValue:s,selected:i,onMove:r,onResize:a,onCut:o,onSelect:l,onContextMenu:c,onDoubleClick:u,tool:d}){const[h,f]=x.useState(null),m=x.useRef({x:0,startBeat:0,lengthBeats:0}),g=bn(t.startBeat,n),b=bn(t.lengthBeats,n),y=t.color||e,v=t.notes.some(C=>C.isDrum),_=6,S=C=>{const N=C.currentTarget.getBoundingClientRect(),A=C.clientX-N.left;return A<_&&a?"resize-left":A>N.width-_&&a?"resize-right":"move"},w=x.useCallback(C=>{if(C.button!==0)return;if(C.stopPropagation(),d==="cut"&&o){const A=C.currentTarget.getBoundingClientRect(),k=C.clientX-A.left,O=dg(k,n),P=rl(O,s),j=t.startBeat+P;o(t.id,j);return}l==null||l(t.id,C.shiftKey),C.currentTarget.setPointerCapture(C.pointerId);const N=S(C);m.current={x:C.clientX,startBeat:t.startBeat,lengthBeats:t.lengthBeats},f(N)},[t.startBeat,t.lengthBeats,a,d,o,l,n,s]),E=x.useCallback(C=>{if(!h){const k=C.currentTarget;if(d==="cut")k.style.cursor="crosshair";else{const O=S(C);O==="resize-left"||O==="resize-right"?k.style.cursor="col-resize":k.style.cursor="grab"}return}const N=C.clientX-m.current.x,A=dg(N,n);if(h==="move"){const k=rl(m.current.startBeat+A,s);r(t.id,Math.max(0,k))}else if(h==="resize-right"&&a){const k=rl(m.current.lengthBeats+A,s);a(t.id,t.startBeat,Math.max(s||.25,k))}else if(h==="resize-left"&&a){const k=rl(m.current.startBeat+A,s),O=Math.max(0,k),P=m.current.startBeat-O,j=m.current.lengthBeats+P;j>=(s||.25)&&a(t.id,O,j)}},[h,n,s,r,a,t.id,t.startBeat]),T=x.useCallback(()=>{f(null)},[]);return p.jsxs("div",{className:"absolute top-0.5 bottom-0.5 select-none rounded-md transition-[filter] hover:brightness-110",style:{left:g,width:Math.max(b,4),background:`linear-gradient(to bottom, ${y}, color-mix(in oklch, ${y} 80%, black))`,opacity:h?.7:1,border:i?"2px solid white":"1px solid rgba(255,255,255,0.2)",boxShadow:i?"0 0 8px rgba(255,255,255,0.3)":void 0},onPointerDown:w,onPointerMove:E,onPointerUp:T,onDoubleClick:()=>u==null?void 0:u(t.id),onContextMenu:C=>{C.preventDefault(),c(C,t.id)},children:[t.name&&p.jsx("span",{className:"absolute left-1 top-0 truncate text-[9px] font-medium text-white/80",children:t.name}),p.jsx(kU,{notes:t.notes,lengthBeats:t.lengthBeats,isDrum:v})]})}function MU({notes:t,lengthBeats:e,isDrum:n}){if(t.length===0)return null;const s=n?36:Math.min(...t.map(a=>a.note),Wl),i=n?43:Math.max(...t.map(a=>a.note),Wl+12),r=Math.max(i-s+1,4);return p.jsx("div",{className:"absolute inset-0.5 overflow-hidden",children:t.map((a,o)=>{const l=`${a.startBeat/e*100}%`,c=`${Math.max(a.durationBeats/e*100,1)}%`,u=`${(a.note-s)/r*100}%`,d=`${Math.max(100/r,4)}%`;return p.jsx("div",{className:"absolute rounded-[1px] bg-white/70",style:{left:l,width:c,bottom:u,height:Math.max(2,parseFloat(d))}},o)})})}function RU({region:t,trackColor:e,pxPerBeat:n}){const s=bn(t.startBeat,n),i=bn(t.lengthBeats,n),r=t.color||e,a=t.notes.some(o=>o.isDrum);return p.jsxs("div",{className:"absolute top-0.5 bottom-0.5 select-none rounded-sm border border-white/30",style:{left:s,width:Math.max(i,4),backgroundColor:r,opacity:.75,boxShadow:`0 0 8px 1px ${r}80`},children:[p.jsx("span",{className:"absolute left-1 top-0 truncate text-[9px] font-medium text-white/90",children:"REC"}),p.jsx(MU,{notes:t.notes,lengthBeats:t.lengthBeats,isDrum:a})]})}function DU({track:t,lengthBeats:e,pxPerBeat:n,snapValue:s,selectedRegionIds:i,liveRegion:r,onMoveRegion:a,onResizeRegion:o,onSplitRegion:l,onSelectRegion:c,onRegionContextMenu:u,onEditRegion:d,tool:h}){const f=bn(e,n),m=[];for(let g=0;g<=e;g++)g%4===0&&m.push(g);return p.jsxs("div",{className:"relative h-16 border-b border-border bg-background/50",style:{width:f},children:[m.map(g=>p.jsx("div",{className:"absolute top-0 h-full w-px bg-border/30",style:{left:bn(g,n)}},g)),t.regions.map(g=>p.jsx(NU,{region:g,trackColor:t.color,pxPerBeat:n,snapValue:s,tool:h,selected:(i==null?void 0:i.has(g.id))??!1,onMove:(b,y)=>a(t.id,b,y),onResize:o?(b,y,v)=>o(t.id,b,y,v):void 0,onCut:(b,y)=>l(t.id,b,y),onSelect:c?(b,y)=>c(t.id,b,y):void 0,onContextMenu:(b,y)=>u(b,t.id,y),onDoubleClick:d?b=>d(t.id,b):void 0},g.id)),r&&p.jsx(RU,{region:r,trackColor:t.color,pxPerBeat:n})]})}function OU({position:t,pxPerBeat:e,height:n}){const s=bn(t,e);return p.jsx("div",{className:"pointer-events-none absolute top-0 z-30 w-px bg-red-500",style:{left:s,height:n,boxShadow:"0 0 6px 2px oklch(0.58 0.22 25 / 0.30)"},children:p.jsx("div",{className:"absolute -left-1 -top-0.5 h-2 w-2 rotate-45 bg-red-500"})})}function jU({x:t,y:e,onSplit:n,onDuplicate:s,onDelete:i,onClose:r,onCopy:a,onPaste:o,canPaste:l}){const c=x.useRef(null);x.useEffect(()=>{const d=f=>{c.current&&!c.current.contains(f.target)&&r()},h=f=>{f.key==="Escape"&&r()};return window.addEventListener("mousedown",d),window.addEventListener("keydown",h),()=>{window.removeEventListener("mousedown",d),window.removeEventListener("keydown",h)}},[r]);const u=[{label:"Split at playhead",action:n},{label:"Duplicate",action:s},...a?[{label:"Copy",action:a}]:[],...o&&l?[{label:"Paste",action:o}]:[],{label:"Delete",action:i,destructive:!0}];return p.jsx("div",{ref:c,className:"fixed z-50 min-w-[140px] rounded-md border border-border bg-popover py-1 shadow-lg",style:{left:t,top:e},children:u.map(d=>p.jsx("button",{className:`w-full px-3 py-1.5 text-left text-xs hover:bg-accent ${d.destructive?"text-red-500":"text-popover-foreground"}`,onClick:()=>{d.action(),r()},children:d.label},d.label))})}const Q1=50;class PU{constructor(){de(this,"undoStack",[]);de(this,"redoStack",[]);de(this,"callbacks",[]);de(this,"groupLabel",null);de(this,"groupSnapshot",null)}pushUndo(e,n){if(this.groupLabel!==null){this.groupSnapshot===null&&(this.groupSnapshot=n);return}this.undoStack.push({label:e,snapshot:n}),this.undoStack.length>Q1&&this.undoStack.shift(),this.redoStack=[],this.emit()}beginUndoGroup(e,n){this.groupLabel=e,this.groupSnapshot=n}endUndoGroup(){this.groupLabel!==null&&this.groupSnapshot!==null&&(this.undoStack.push({label:this.groupLabel,snapshot:this.groupSnapshot}),this.undoStack.length>Q1&&this.undoStack.shift(),this.redoStack=[],this.emit()),this.groupLabel=null,this.groupSnapshot=null}undo(){const e=this.undoStack.pop();return e?e.snapshot:null}redo(){const e=this.redoStack.pop();return e?e.snapshot:null}pushRedo(e,n){this.redoStack.push({label:e,snapshot:n}),this.emit()}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}undoLabel(){var e;return(e=this.undoStack[this.undoStack.length-1])==null?void 0:e.label}redoLabel(){var e;return(e=this.redoStack[this.redoStack.length-1])==null?void 0:e.label}clear(){this.undoStack=[],this.redoStack=[],this.groupLabel=null,this.groupSnapshot=null,this.emit()}onStateChange(e){return this.callbacks.push(e),()=>{this.callbacks=this.callbacks.filter(n=>n!==e)}}emit(){for(const e of this.callbacks)e()}}const Mn=new PU;class BU{constructor(){de(this,"arrangement");de(this,"transportState","stopped");de(this,"trackAudio",new Map);de(this,"stateCallbacks",[]);de(this,"positionCallbacks",[]);de(this,"positionRAF",0);de(this,"metronomeSynth",null);de(this,"metronomeLoop",null);de(this,"metronomeEnabled",!1);de(this,"armedTrackId",null);de(this,"recordingTrackId",null);de(this,"recordingStartBeat",0);de(this,"recordingOpenNotes",new Map);de(this,"capturedNotes",[]);de(this,"colorIndex",0);de(this,"clipboard",null);this.arrangement=this.createDefaultArrangement()}createDefaultArrangement(){return{id:crypto.randomUUID(),name:"Untitled",bpm:Sk,lengthBeats:S1,tracks:[]}}getArrangement(){return this.arrangement}getTracks(){return this.arrangement.tracks}getState(){return this.transportState}getBpm(){return this.arrangement.bpm}getPosition(){return this.transportState==="stopped"?0:nn().seconds*(this.arrangement.bpm/60)}isMetronomeEnabled(){return this.metronomeEnabled}getArmedTrackId(){return this.armedTrackId}getRecordingTrackId(){return this.recordingTrackId}getLiveRegion(){if(this.transportState!=="recording"||!this.recordingTrackId)return null;const n=nn().seconds*(this.arrangement.bpm/60),s=Math.max(.25,n-this.recordingStartBeat),i=[...this.capturedNotes];for(const[a,o]of this.recordingOpenNotes)i.push({note:a,velocity:o.velocity,startBeat:o.startBeat,durationBeats:Math.max(.125,n-this.recordingStartBeat-o.startBeat),isDrum:o.isDrum});const r=this.findTrack(this.recordingTrackId);return{id:"__live__",startBeat:this.recordingStartBeat,lengthBeats:s,notes:i,color:r==null?void 0:r.color}}addTrack(e="synth",n=0){var r;this.pushUndoSnapshot("Add Track");const s=_1[this.colorIndex%_1.length];this.colorIndex++;const i={id:crypto.randomUUID(),name:e==="drums"?"Drums":((r=Jn[n])==null?void 0:r.name)??"Synth",instrument:{type:e,presetIndex:n},regions:[],volume:-6,muted:!1,solo:!1,color:s};return this.arrangement.tracks.push(i),this.createTrackAudio(i),this.emitStateChange(),i}removeTrack(e){this.pushUndoSnapshot("Remove Track"),this.disposeTrackAudio(e),this.arrangement.tracks=this.arrangement.tracks.filter(n=>n.id!==e),this.armedTrackId===e&&(this.armedTrackId=null),this.emitStateChange()}setTrackInstrument(e,n){var i;this.pushUndoSnapshot("Change Instrument");const s=this.findTrack(e);s&&(s.instrument=n,s.name=n.type==="drums"?"Drums":((i=Jn[n.presetIndex])==null?void 0:i.name)??"Synth",this.disposeTrackAudio(e),this.createTrackAudio(s),this.emitStateChange())}setTrackVolume(e,n){const s=this.findTrack(e);if(!s)return;s.volume=n;const i=this.trackAudio.get(e);i&&(i.volume.volume.value=n),this.emitStateChange()}setTrackMute(e,n){const s=this.findTrack(e);if(!s)return;s.muted=n;const i=this.trackAudio.get(e);i&&(i.volume.mute=n),this.emitStateChange()}setTrackSolo(e,n){const s=this.findTrack(e);s&&(s.solo=n,this.updateSoloState(),this.emitStateChange())}addRegion(e,n){this.pushUndoSnapshot("Add Region");const s=this.findTrack(e);s&&(s.regions.push(n),this.autoExtendLength(),this.emitStateChange())}removeRegion(e,n){this.pushUndoSnapshot("Remove Region");const s=this.findTrack(e);s&&(s.regions=s.regions.filter(i=>i.id!==n),this.emitStateChange())}moveRegion(e,n,s){this.pushUndoSnapshot("Move Region");const i=this.findTrack(e);if(!i)return;const r=i.regions.find(a=>a.id===n);r&&(r.startBeat=Math.max(0,s),this.autoExtendLength(),this.emitStateChange())}moveRegionToTrack(e,n,s){this.pushUndoSnapshot("Move Region to Track");const i=this.findTrack(e),r=this.findTrack(n);if(!i||!r)return;const a=i.regions.findIndex(l=>l.id===s);if(a===-1)return;const[o]=i.regions.splice(a,1);r.regions.push(o),this.emitStateChange()}splitRegion(e,n,s){this.pushUndoSnapshot("Split Region");const i=this.findTrack(e);if(!i)return;const r=i.regions.find(u=>u.id===n);if(!r)return;const a=s-r.startBeat;if(a<=0||a>=r.lengthBeats)return;const o=[],l=[];for(const u of r.notes)u.startBeat+u.durationBeats<=a?o.push(u):u.startBeat>=a?l.push({...u,startBeat:u.startBeat-a}):(o.push({...u,durationBeats:a-u.startBeat}),l.push({...u,startBeat:0,durationBeats:u.startBeat+u.durationBeats-a}));const c={id:crypto.randomUUID(),startBeat:s,lengthBeats:r.lengthBeats-a,notes:l,color:r.color,name:r.name?`${r.name} (R)`:void 0};r.lengthBeats=a,r.notes=o,r.name&&(r.name=`${r.name} (L)`),i.regions.push(c),this.emitStateChange()}duplicateRegion(e,n){this.pushUndoSnapshot("Duplicate Region");const s=this.findTrack(e);if(!s)return;const i=s.regions.find(a=>a.id===n);if(!i)return;const r={...i,id:crypto.randomUUID(),startBeat:i.startBeat+i.lengthBeats,notes:i.notes.map(a=>({...a})),name:i.name?`${i.name} (copy)`:void 0};s.regions.push(r),this.autoExtendLength(),this.emitStateChange()}armTrackForRecording(e){this.armedTrackId=e,this.emitStateChange()}startRecordingToTrack(e){const n=e??this.armedTrackId;if(!n&&this.arrangement.tracks.length===0){const r=this.addTrack("synth");return this.armedTrackId=r.id,this.startRecordingToTrack(r.id)}if(!n||!this.findTrack(n)||this.transportState!=="stopped")return;this.recordingTrackId=n,this.recordingOpenNotes.clear(),this.capturedNotes=[],this.transportState="recording";const i=nn();i.stop(),i.position=0,i.bpm.value=this.arrangement.bpm,this.metronomeEnabled&&this.startMetronome(),this.recordingStartBeat=0,i.start(),this.startPositionUpdates(),this.emitStateChange()}stopRecordingToTrack(){if(this.transportState!=="recording"||!this.recordingTrackId)return null;this.pushUndoSnapshot("Record");const n=nn().seconds*(this.arrangement.bpm/60);for(const[a,o]of this.recordingOpenNotes)this.capturedNotes.push({note:a,velocity:o.velocity,startBeat:o.startBeat,durationBeats:Math.max(.125,n-o.startBeat),isDrum:o.isDrum});const s=this.findTrack(this.recordingTrackId);if(this.stopTransport(),!s||this.capturedNotes.length===0)return this.capturedNotes=[],this.recordingTrackId=null,this.recordingOpenNotes.clear(),this.emitStateChange(),null;const i=Math.max(1,Math.ceil(n)),r={id:crypto.randomUUID(),startBeat:this.recordingStartBeat,lengthBeats:i,notes:[...this.capturedNotes],color:s.color};return s.regions.push(r),this.autoExtendLength(),this.capturedNotes=[],this.recordingTrackId=null,this.recordingOpenNotes.clear(),this.emitStateChange(),r}captureNoteOn(e,n,s){if(this.transportState!=="recording")return;const r=nn().seconds*(this.arrangement.bpm/60);s?this.capturedNotes.push({note:e,velocity:n,startBeat:r-this.recordingStartBeat,durationBeats:.25,isDrum:!0}):this.recordingOpenNotes.set(e,{startBeat:r-this.recordingStartBeat,velocity:n,isDrum:!1})}captureNoteOff(e){if(this.transportState!=="recording")return;const n=this.recordingOpenNotes.get(e);if(!n)return;const i=nn().seconds*(this.arrangement.bpm/60);this.capturedNotes.push({note:e,velocity:n.velocity,startBeat:n.startBeat,durationBeats:Math.max(.125,i-this.recordingStartBeat-n.startBeat),isDrum:!1}),this.recordingOpenNotes.delete(e)}play(){if(this.transportState!=="stopped")return;this.transportState="playing";const e=nn();e.stop(),e.position=0,e.bpm.value=this.arrangement.bpm,this.scheduleAllTracks(),this.metronomeEnabled&&this.startMetronome(),e.start(),this.startPositionUpdates(),this.emitStateChange()}stop(){if(this.transportState==="recording"){this.stopRecordingToTrack();return}this.stopTransport(),this.emitStateChange()}stopTransport(){const e=nn();e.stop(),e.cancel(),e.position=0;for(const n of this.trackAudio.values())n.part&&(n.part.stop(),n.part.dispose(),n.part=null);this.stopMetronome(),this.stopPositionUpdates(),this.transportState="stopped"}setPosition(e){const n=nn();n.seconds=e/this.arrangement.bpm*60}setBpm(e){this.arrangement.bpm=e,nn().bpm.value=e,this.emitStateChange()}setMetronomeEnabled(e){this.metronomeEnabled=e,e?this.transportState!=="stopped"&&this.startMetronome():this.stopMetronome()}startMetronome(){if(this.metronomeLoop)return;this.metronomeSynth||(this.metronomeSynth=new li({oscillator:{type:"sine"},envelope:{attack:.001,decay:.05,sustain:0,release:.01},volume:-6}).toDestination());let e=0;this.metronomeLoop=new ef(n=>{const s=e%4===0?"C6":"G5";this.metronomeSynth.triggerAttackRelease(s,"32n",n),e++},"4n"),this.metronomeLoop.start(0)}stopMetronome(){this.metronomeLoop&&(this.metronomeLoop.stop(),this.metronomeLoop.dispose(),this.metronomeLoop=null)}createTrackAudio(e){const n=new js(e.volume).toDestination();e.muted&&(n.mute=!0);const s={synth:null,drumSynths:null,drumFilter:null,volume:n,part:null};if(e.instrument.type==="synth"){const i=Jn[e.instrument.presetIndex]||Jn[0];s.synth=new jc(li,{maxPolyphony:u0,oscillator:i.oscillator,envelope:i.envelope}),s.synth.connect(n)}else{s.drumSynths=new Map,s.drumFilter=new ia({frequency:8e3,type:"highpass"}),s.drumFilter.connect(n);const i=new Un({pitchDecay:.05,octaves:6,oscillator:{type:"sine"},envelope:{attack:.001,decay:.3,sustain:0,release:.1}});i.connect(n),s.drumSynths.set(36,i);const r=new Vt({noise:{type:"white"},envelope:{attack:.001,decay:.15,sustain:0,release:.05}});r.connect(n),s.drumSynths.set(37,r);const a=new Vt({noise:{type:"white"},envelope:{attack:.001,decay:.05,sustain:0,release:.01}});a.connect(s.drumFilter),s.drumSynths.set(38,a);const o=new Vt({noise:{type:"white"},envelope:{attack:.001,decay:.3,sustain:0,release:.1}});o.connect(s.drumFilter),s.drumSynths.set(39,o);const l=new Vt({noise:{type:"pink"},envelope:{attack:.001,decay:.12,sustain:0,release:.05}});l.connect(n),s.drumSynths.set(40,l);const c=new Un({pitchDecay:.03,octaves:4,oscillator:{type:"sine"},envelope:{attack:.001,decay:.2,sustain:0,release:.1}});c.connect(n),s.drumSynths.set(41,c);const u=new Ss({frequency:300,envelope:{attack:.001,decay:1.2,release:.3},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5});u.connect(n),s.drumSynths.set(42,u);const d=new Ss({frequency:400,envelope:{attack:.001,decay:.4,release:.1},harmonicity:5.1,modulationIndex:16,resonance:5e3,octaves:1});d.connect(n),s.drumSynths.set(43,d)}this.trackAudio.set(e.id,s)}disposeTrackAudio(e){var s,i,r;const n=this.trackAudio.get(e);if(n){if(n.part&&(n.part.stop(),n.part.dispose()),(s=n.synth)==null||s.releaseAll(),(i=n.synth)==null||i.dispose(),n.drumSynths)for(const a of n.drumSynths.values())a.dispose();(r=n.drumFilter)==null||r.dispose(),n.volume.dispose(),this.trackAudio.delete(e)}}scheduleAllTracks(){const e=this.arrangement.tracks.some(n=>n.solo);for(const n of this.arrangement.tracks){const s=this.trackAudio.get(n.id);if(!s||!(e?n.solo:!n.muted))continue;const r=[];for(const a of n.regions)for(const o of a.notes){const l=a.startBeat+o.startBeat;r.push({time:l*(60/this.arrangement.bpm),note:o})}r.length!==0&&(s.part=new Xl((a,o)=>{const{note:l}=o;if(n.instrument.type==="drums")this.playDrumNote(s,l.note,l.velocity,a);else if(s.synth){const c=ir(l.note),u=l.durationBeats*60/this.arrangement.bpm;s.synth.triggerAttackRelease(c,u,a,l.velocity)}},r.map(a=>({time:a.time,note:a.note}))),s.part.start(0))}}playDrumNote(e,n,s,i){if(!e.drumSynths)return;const r=e.drumSynths.get(n);if(!r)return;const a=s*.8+.2;if(r instanceof Un){const o=n===36?"C1":"G1";r.triggerAttackRelease(o,"8n",i,a)}else if(r instanceof Vt){const o=n===38?"16n":n===39?"8n":"16n";r.triggerAttackRelease(o,i,a)}else if(r instanceof Ss){const o=n===42?"16n":"32n";r.triggerAttackRelease(o,i,a)}}updateSoloState(){const e=this.arrangement.tracks.some(n=>n.solo);for(const n of this.arrangement.tracks){const s=this.trackAudio.get(n.id);s&&(e?s.volume.mute=!n.solo:s.volume.mute=n.muted)}}startPositionUpdates(){const e=()=>{if(this.transportState==="stopped")return;const n=this.getPosition();for(const s of this.positionCallbacks)s(n);if(this.transportState==="playing"&&n>=this.arrangement.lengthBeats){this.stop();return}this.positionRAF=requestAnimationFrame(e)};this.positionRAF=requestAnimationFrame(e)}stopPositionUpdates(){cancelAnimationFrame(this.positionRAF);for(const e of this.positionCallbacks)e(0)}autoExtendLength(){let e=S1;for(const n of this.arrangement.tracks)for(const s of n.regions)e=Math.max(e,s.startBeat+s.lengthBeats+4);this.arrangement.lengthBeats=Math.ceil(e/4)*4}onStateChange(e){return this.stateCallbacks.push(e),()=>{this.stateCallbacks=this.stateCallbacks.filter(n=>n!==e)}}onPositionChange(e){return this.positionCallbacks.push(e),()=>{this.positionCallbacks=this.positionCallbacks.filter(n=>n!==e)}}emitStateChange(){for(const e of this.stateCallbacks)e()}saveToLocalStorage(){try{localStorage.setItem(x1,JSON.stringify(this.arrangement))}catch{}}loadFromLocalStorage(){try{const e=localStorage.getItem(x1);if(!e)return!1;const n=JSON.parse(e);this.arrangement=n;for(const s of this.arrangement.tracks)this.createTrackAudio(s);return this.emitStateChange(),!0}catch{return!1}}pushUndoSnapshot(e){Mn.pushUndo(e,structuredClone(this.arrangement))}beginUndoGroup(e){Mn.beginUndoGroup(e,structuredClone(this.arrangement))}endUndoGroup(){Mn.endUndoGroup()}restoreFromSnapshot(e){for(const n of this.trackAudio.keys())this.disposeTrackAudio(n);this.arrangement=structuredClone(e);for(const n of this.arrangement.tracks)this.createTrackAudio(n);this.emitStateChange()}performUndo(){const e=Mn.undo();e&&(Mn.pushRedo("Undo",structuredClone(this.arrangement)),this.restoreFromSnapshot(e))}performRedo(){const e=Mn.redo();e&&(Mn.pushUndo("Redo",structuredClone(this.arrangement)),this.restoreFromSnapshot(e))}updateRegionNotes(e,n,s){this.pushUndoSnapshot("Edit Notes");const i=this.findTrack(e);if(!i)return;const r=i.regions.find(a=>a.id===n);r&&(r.notes=s,this.emitStateChange())}resizeRegion(e,n,s,i){this.pushUndoSnapshot("Trim Region");const r=this.findTrack(e);if(!r)return;const a=r.regions.find(o=>o.id===n);if(a){if(s!==void 0){const o=Math.max(0,s),l=o-a.startBeat;l!==0&&(a.notes=a.notes.map(c=>({...c,startBeat:c.startBeat-l})).filter(c=>c.startBeat+c.durationBeats>0).map(c=>c.startBeat<0?{...c,durationBeats:c.durationBeats+c.startBeat,startBeat:0}:c),a.startBeat=o)}if(i!==void 0){const o=Math.max(.25,i);a.notes=a.notes.filter(l=>l.startBeat<o).map(l=>l.startBeat+l.durationBeats>o?{...l,durationBeats:o-l.startBeat}:l),a.lengthBeats=o}this.autoExtendLength(),this.emitStateChange()}}copyRegion(e,n){const s=this.findTrack(e);if(!s)return;const i=s.regions.find(r=>r.id===n);i&&(this.clipboard={region:structuredClone(i),trackId:e})}pasteRegion(e,n){if(!this.clipboard)return;this.pushUndoSnapshot("Paste Region");const s=this.findTrack(e);if(!s)return;const i={...structuredClone(this.clipboard.region),id:crypto.randomUUID(),startBeat:n};s.regions.push(i),this.autoExtendLength(),this.emitStateChange()}hasClipboard(){return this.clipboard!==null}findTrack(e){return this.arrangement.tracks.find(n=>n.id===e)}dispose(){var e;this.stopTransport();for(const n of this.trackAudio.keys())this.disposeTrackAudio(n);(e=this.metronomeSynth)==null||e.dispose(),this.metronomeSynth=null,this.stateCallbacks=[],this.positionCallbacks=[]}}const ce=new BU;function IU({tracks:t,transportState:e,position:n,lengthBeats:s,recordingTrackId:i,armedTrackId:r,liveRegion:a,onAddTrack:o,onRemoveTrack:l,onSetTrackInstrument:c,onSetTrackVolume:u,onSetTrackMute:d,onSetTrackSolo:h,onMoveRegion:f,onResizeRegion:m,onRemoveRegion:g,onSplitRegion:b,onDuplicateRegion:y,onArmTrack:v,canUndo:_,canRedo:S,onUndo:w,onRedo:E,onEditRegion:T,onCopyRegion:C,onPasteRegion:N,hasClipboard:A,onExport:k}){const[O,P]=x.useState(yV),[j,I]=x.useState(1),[R,D]=x.useState("pointer"),[M,B]=x.useState(new Set),[z,$]=x.useState(null),ne=x.useRef(null),re=x.useRef(null),ie=200,K=x.useRef(new Map),[ee,L]=x.useState(null),V=x.useRef(null),le=x.useRef(!1),fe=x.useCallback((G,W,ae)=>{B(Te=>{const Ye=new Set(Te);return ae?Ye.has(W)?(Ye.delete(W),K.current.delete(W)):(Ye.add(W),K.current.set(W,G)):(Ye.clear(),K.current.clear(),Ye.add(W),K.current.set(W,G)),Ye})},[]),he=x.useCallback(()=>{B(new Set),K.current.clear()},[]);x.useEffect(()=>{if(e!=="playing"&&e!=="recording")return;const G=ne.current;if(!G)return;const W=bn(n,O),ae=G.scrollLeft,Te=G.clientWidth;(W>ae+Te-50||W<ae)&&(G.scrollLeft=W-100)},[n,O,e]),x.useEffect(()=>{const G=ne.current;if(!G)return;const W=ae=>{if(!ae.ctrlKey&&!ae.metaKey)return;ae.preventDefault();const Te=G.getBoundingClientRect(),kn=(ae.clientX-Te.left+G.scrollLeft)/O,fi=-ae.deltaY*.5,gr=Math.round(Math.max(d0,Math.min(h0,O+fi)));if(gr!==O){P(gr);const ra=kn*gr;G.scrollLeft=ra-(ae.clientX-Te.left)}};return G.addEventListener("wheel",W,{passive:!1}),()=>G.removeEventListener("wheel",W)},[O]),x.useEffect(()=>{const G=W=>{if(!(W.target instanceof HTMLInputElement||W.target instanceof HTMLTextAreaElement)){if((W.metaKey||W.ctrlKey)&&W.key==="a"){W.preventDefault();const ae=new Set;K.current.clear();for(const Te of t)for(const Ye of Te.regions)ae.add(Ye.id),K.current.set(Ye.id,Te.id);B(ae);return}if(!(W.metaKey||W.ctrlKey||W.altKey)){if(W.key==="Delete"||W.key==="Backspace"){if(M.size>0){for(const ae of M){const Te=K.current.get(ae);Te&&g(Te,ae)}he();return}z&&(g(z.trackId,z.regionId),$(null));return}if(W.key==="Escape"){he();return}if(W.key==="v"||W.key==="V"){D("pointer");return}if(W.key==="c"||W.key==="C"){D("cut");return}}}};return window.addEventListener("keydown",G),()=>window.removeEventListener("keydown",G)},[z,g,M,he,t]);const me=x.useCallback((G,W,ae)=>{$({x:G.clientX,y:G.clientY,trackId:W,regionId:ae})},[]),Mt=x.useCallback(G=>{if(G.button!==0||!re.current)return;const W=re.current.getBoundingClientRect(),ae=G.clientX-W.left,Te=G.clientY-W.top;V.current={x:ae,y:Te,clientX:G.clientX,clientY:G.clientY},le.current=!1,G.currentTarget.setPointerCapture(G.pointerId)},[]),Zt=x.useCallback(G=>{if(!V.current||!re.current)return;const W=G.clientX-V.current.clientX,ae=G.clientY-V.current.clientY;if(!le.current&&(Math.abs(W)>3||Math.abs(ae)>3)&&(le.current=!0),le.current){const Te=re.current.getBoundingClientRect(),Ye=G.clientX-Te.left,kn=G.clientY-Te.top;L({startX:V.current.x,startY:V.current.y,currentX:Ye,currentY:kn})}},[]),Y=x.useCallback(G=>{if(V.current){if(le.current&&ee){const W=Math.min(ee.startX,ee.currentX),ae=Math.max(ee.startX,ee.currentX),Te=Math.min(ee.startY,ee.currentY),Ye=Math.max(ee.startY,ee.currentY),kn=new Set(G.shiftKey?M:[]);G.shiftKey||K.current.clear(),t.forEach((fi,gr)=>{const ra=gr*te;ra+te<=Te||ra>=Ye||fi.regions.forEach(Fo=>{const WN=bn(Fo.startBeat,O);bn(Fo.startBeat+Fo.lengthBeats,O)>W&&WN<ae&&(kn.add(Fo.id),K.current.set(Fo.id,fi.id))})}),B(kn)}else G.shiftKey||he();L(null),V.current=null,le.current=!1}},[ee,M,t,O,he]),te=64,He=t.length*te;return p.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[p.jsx(TU,{snapValue:j,pxPerBeat:O,canUndo:_,canRedo:S,tool:R,onSnapChange:I,onZoomChange:P,onAddSynthTrack:()=>o("synth"),onAddDrumTrack:()=>o("drums"),onUndo:w,onRedo:E,onExport:k,onToolChange:D}),p.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[p.jsxs("div",{className:"shrink-0 overflow-y-auto border-r border-border",style:{width:ie},children:[p.jsx("div",{className:"h-6 border-b border-border"}),t.map(G=>p.jsx(AU,{track:G,isArmed:r===G.id,isRecording:i===G.id,onMuteToggle:()=>d(G.id,!G.muted),onSoloToggle:()=>h(G.id,!G.solo),onVolumeChange:W=>u(G.id,W),onInstrumentChange:W=>c(G.id,W),onDelete:()=>l(G.id),onArmToggle:()=>v(r===G.id?null:G.id)},G.id)),t.length===0&&p.jsx("div",{className:"flex h-32 items-center justify-center text-xs text-muted-foreground",children:"Add a track to begin"})]}),p.jsx("div",{ref:ne,className:"flex-1 overflow-auto",onClick:he,children:p.jsxs("div",{className:"relative",style:{width:bn(s,O)},children:[p.jsx(EU,{lengthBeats:s,pxPerBeat:O,snapValue:j,onSeek:G=>ce.setPosition(G)}),p.jsxs("div",{ref:re,className:"relative",onClick:G=>G.stopPropagation(),onPointerDown:Mt,onPointerMove:Zt,onPointerUp:Y,children:[t.map(G=>p.jsx(DU,{track:G,lengthBeats:s,pxPerBeat:O,snapValue:j,tool:R,selectedRegionIds:M,liveRegion:i===G.id?a:null,onMoveRegion:f,onResizeRegion:m?(W,ae,Te,Ye)=>m(W,ae,Te,Ye):void 0,onSplitRegion:b,onSelectRegion:fe,onRegionContextMenu:me,onEditRegion:T},G.id)),ee&&p.jsx("div",{className:"absolute pointer-events-none rounded-sm border border-primary/60 z-20",style:{left:Math.min(ee.startX,ee.currentX),top:Math.min(ee.startY,ee.currentY),width:Math.abs(ee.currentX-ee.startX),height:Math.abs(ee.currentY-ee.startY),backgroundColor:"oklch(0.60 0.15 265 / 0.15)"}})]}),(e==="playing"||e==="recording")&&p.jsx(OU,{position:n,pxPerBeat:O,height:24+He})]})})]}),z&&p.jsx(jU,{x:z.x,y:z.y,onSplit:()=>b(z.trackId,z.regionId,n),onDuplicate:()=>y(z.trackId,z.regionId),onDelete:()=>g(z.trackId,z.regionId),onClose:()=>$(null),onCopy:C?()=>C(z.trackId,z.regionId):void 0,onPaste:N?()=>N(z.trackId,n):void 0,canPaste:A})]})}const LU={.25:"1/16",.5:"1/8",1:"1/4",2:"1/2",4:"Bar"},VU=[{id:"pointer",icon:sE,label:"Pointer (V)"},{id:"draw",icon:A4,label:"Draw (D)"},{id:"eraser",icon:p4,label:"Eraser (E)"}];function zU({tool:t,snapValue:e,regionName:n,onToolChange:s,onSnapChange:i,onBack:r,onToolPointerDown:a,onToolPointerUp:o}){return p.jsxs("div",{className:"flex items-center gap-3 border-b border-border bg-card/60 backdrop-blur-sm px-3 py-1.5",children:[p.jsxs(Ee,{variant:"ghost",size:"sm",className:"h-6 gap-1 px-2 text-[11px]",onClick:r,children:[p.jsx(oo,{className:"h-3 w-3"}),"Back"]}),n&&p.jsx("span",{className:"text-xs font-medium text-muted-foreground truncate max-w-[120px]",children:n}),p.jsx("div",{className:"h-4 w-px bg-border/60"}),p.jsx("div",{className:"flex items-center gap-0.5",children:VU.map(({id:l,icon:c,label:u})=>p.jsx(Ee,{variant:"ghost",size:"sm",className:ye("h-6 w-6 p-0",t===l&&"bg-primary/20 text-primary ring-1 ring-primary/40 hover:bg-primary/30"),title:u,onClick:()=>s(l),onPointerDown:d=>{d.button===0&&a&&a(l)},onPointerUp:()=>{o&&o()},children:p.jsx(c,{className:"h-3.5 w-3.5"})},l))}),p.jsx("div",{className:"h-4 w-px bg-border/60"}),p.jsxs("div",{className:"flex items-center gap-1.5",children:[p.jsx(Xd,{className:"text-[11px] font-semibold text-muted-foreground",children:"Snap"}),p.jsxs(mc,{value:String(e),onValueChange:l=>i(Number(l)),children:[p.jsx(yc,{className:"h-6 w-16 border-0 bg-transparent text-[11px]",children:p.jsx(gc,{})}),p.jsx(vc,{children:wk.map(l=>p.jsx(qr,{value:String(l),children:LU[l]},l))})]})]})]})}const Qd=24,Zn=96,go=Oh.map(t=>({midiNote:t.midiNote,name:t.shortName,color:t.color}));go.length;const FU=.8,Z1=1,J1=.25;function Ci(t,e){return t*e}function xp(t,e){return t/e}function e_(t,e){return(Zn-t-1)*e}function HU(t,e){return Zn-Math.floor(t/e)-1}function t_(t,e){return t*e}function UU(t,e){return Math.floor(t/e)}function GU(t){var e;return((e=go[t])==null?void 0:e.midiNote)??36}function n_(t){return go.findIndex(e=>e.midiNote===t)}function Qo(t,e){return e<=0?t:Math.round(t/e)*e}function qU({rowHeight:t,scrollTop:e,visibleHeight:n}){const s=[],i=Math.max(Qd,Zn-Math.floor((e+n)/t)-2),r=Math.min(Zn,Zn-Math.floor(e/t)+2);for(let a=r-1;a>=i;a--){const o=ql(a),l=ir(a),c=(Zn-a-1)*t,u=a%12===0;s.push(p.jsx("div",{className:"absolute right-0 left-0 flex items-center justify-end border-b px-1.5 select-none",style:{top:c,height:t,backgroundColor:o?"oklch(0.18 0.01 270)":"oklch(0.22 0.005 270)",borderColor:"oklch(0.30 0.01 270)"},children:p.jsx("span",{className:"font-mono text-[9px]",style:{color:u?"oklch(0.75 0.08 265)":"oklch(0.55 0.02 270)",fontWeight:u?600:400},children:l})},a))}return p.jsx("div",{className:"relative",style:{height:(Zn-Qd)*t},children:s})}function WU({rowHeight:t}){return p.jsx("div",{className:"relative",style:{height:go.length*t},children:go.map((e,n)=>p.jsx("div",{className:"absolute right-0 left-0 flex items-center justify-end border-b px-1.5 select-none",style:{top:n*t,height:t,backgroundColor:n%2===0?"oklch(0.20 0.01 270)":"oklch(0.18 0.01 270)",borderColor:"oklch(0.30 0.01 270)"},children:p.jsx("span",{className:"font-mono text-[9px] font-semibold",style:{color:e.color},children:e.name})},e.midiNote))})}const $U=x.memo(function({x:e,y:n,width:s,height:i,color:r,selected:a,velocity:o}){const l=.5+o*.5;return p.jsx("div",{className:"absolute rounded-[2px] border pointer-events-none",style:{left:e,top:n+1,width:Math.max(s,3),height:i-2,backgroundColor:r,opacity:l,borderColor:a?"white":"rgba(255,255,255,0.25)",borderWidth:a?2:1,boxShadow:a?"0 0 6px rgba(255,255,255,0.3)":void 0},children:p.jsx("div",{className:"absolute top-0 right-0 bottom-0 pointer-events-auto cursor-col-resize",style:{width:6}})})});function YU({notes:t,selectedIndices:e,regionLengthBeats:n,pxPerBeat:s,rowHeight:i,snapValue:r,tool:a,isDrum:o,trackColor:l,onNotesChange:c,onSelectionChange:u}){const d=x.useRef(null),[h,f]=x.useState(null),m=o?go.length:Zn-Qd,g=Ci(n,s),b=m*i,y=x.useCallback((A,k)=>{if(!d.current)return{beat:0,note:0,row:0};const O=d.current.getBoundingClientRect(),P=A-O.left+d.current.scrollLeft,j=k-O.top+d.current.scrollTop,I=xp(P,s);if(o){const R=UU(j,i);return{beat:I,note:GU(R),row:R}}return{beat:I,note:HU(j,i),row:0}},[s,i,o]),v=x.useCallback((A,k)=>{const{beat:O,note:P}=y(A,k);for(let j=t.length-1;j>=0;j--){const I=t[j];if(I.note===P&&O>=I.startBeat&&O<=I.startBeat+I.durationBeats){if(!d.current)return{index:j,edge:"body"};const R=d.current.getBoundingClientRect(),D=A-R.left+d.current.scrollLeft,M=Ci(I.startBeat,s),B=Ci(I.startBeat+I.durationBeats,s);return B-D<6&&B-D>=0?{index:j,edge:"right"}:D-M<6&&D-M>=0?{index:j,edge:"left"}:{index:j,edge:"body"}}}return null},[t,y,o,s]),_=x.useCallback(A=>{if(A.button!==0)return;A.preventDefault(),A.currentTarget.setPointerCapture(A.pointerId);const{beat:k,note:O}=y(A.clientX,A.clientY),P=v(A.clientX,A.clientY);if(a==="eraser"){if(P){const j=t.filter((I,R)=>R!==P.index);c(j),u(new Set)}return}if(a==="draw"){if(P&&P.edge==="body"){const j=t.filter((I,R)=>R!==P.index);c(j),u(new Set)}else if(P&&(P.edge==="left"||P.edge==="right")&&!o){const j=new Set([P.index]);u(j);const I=P.edge==="right"?"resize-right":"resize-left";f({type:I,startX:A.clientX,startY:A.clientY,originBeat:k,originNote:O,initialDurations:[t[P.index].durationBeats],initialPositions:[{startBeat:t[P.index].startBeat,note:t[P.index].note}]})}else if(!P){const j=Qo(k,r),I=o?J1:r||Z1,R={note:O,velocity:FU,startBeat:Math.max(0,j),durationBeats:I,isDrum:o},D=[...t,R],M=D.length-1;c(D),u(new Set([M])),f({type:"draw-extend",startX:A.clientX,startY:A.clientY,originBeat:j,originNote:O,drawNoteIndex:M})}return}if(P){const j=A.shiftKey;let I;j?(I=new Set(e),I.has(P.index)?I.delete(P.index):I.add(P.index)):e.has(P.index)?I=e:I=new Set([P.index]),u(I);const R=Array.from(I);(P.edge==="right"||P.edge==="left")&&!o?f({type:P.edge==="right"?"resize-right":"resize-left",startX:A.clientX,startY:A.clientY,originBeat:k,originNote:O,initialDurations:R.map(D=>t[D].durationBeats),initialPositions:R.map(D=>({startBeat:t[D].startBeat,note:t[D].note}))}):f({type:"move",startX:A.clientX,startY:A.clientY,originBeat:k,originNote:O,initialPositions:R.map(D=>({startBeat:t[D].startBeat,note:t[D].note}))})}else A.shiftKey||u(new Set),f({type:"rubber-band",startX:A.clientX,startY:A.clientY,originBeat:k,originNote:O,currentX:A.clientX,currentY:A.clientY})},[a,t,e,y,v,c,u,r,o]),S=x.useCallback(A=>{if(!h){if(a==="pointer"&&d.current){const j=v(A.clientX,A.clientY);((j==null?void 0:j.edge)==="right"||(j==null?void 0:j.edge)==="left")&&!o?d.current.style.cursor="col-resize":j?d.current.style.cursor="grab":d.current.style.cursor="crosshair"}return}const{beat:k,note:O}=y(A.clientX,A.clientY),P=Array.from(e);if(h.type==="move"&&h.initialPositions){const j=Qo(k-h.originBeat,r),I=o?0:O-h.originNote,R=[...t];P.forEach((D,M)=>{const B=h.initialPositions[M];R[D]={...R[D],startBeat:Math.max(0,B.startBeat+j),note:o?R[D].note:Math.max(Qd,Math.min(Zn-1,B.note+I))}}),c(R)}else if(h.type==="resize-right"&&h.initialDurations){const j=Qo(k-h.originBeat,r),I=[...t];P.forEach((R,D)=>{const M=Math.max(r||.125,h.initialDurations[D]+j);I[R]={...I[R],durationBeats:M}}),c(I)}else if(h.type==="resize-left"&&h.initialDurations&&h.initialPositions){const j=Qo(k-h.originBeat,r),I=[...t];P.forEach((R,D)=>{const M=h.initialPositions[D].startBeat,B=h.initialDurations[D],z=Math.max(0,M+j),$=B-(z-M);$>=(r||.125)&&(I[R]={...I[R],startBeat:z,durationBeats:$})}),c(I)}else if(h.type==="draw-extend"&&h.drawNoteIndex!==void 0){const j=Qo(k,r),I=h.originBeat,R=o?J1:r||Z1,D=Math.max(0,Math.min(I,j)),M=Math.max(I+R,j+R),B=h.drawNoteIndex;if(B<t.length){const z=[...t];z[B]={...z[B],startBeat:D,durationBeats:M-D},c(z)}}else h.type==="rubber-band"&&f(j=>j&&{...j,currentX:A.clientX,currentY:A.clientY})},[h,t,e,y,v,a,r,o,c]),w=x.useCallback(A=>{if((h==null?void 0:h.type)==="rubber-band"&&d.current){const k=d.current.getBoundingClientRect(),O=Math.min(h.startX,A.clientX)-k.left,P=Math.max(h.startX,A.clientX)-k.left,j=Math.min(h.startY,A.clientY)-k.top,I=Math.max(h.startY,A.clientY)-k.top,R=xp(O,s),D=xp(P,s),M=new Set(A.shiftKey?e:[]);t.forEach((B,z)=>{const $=B.startBeat+B.durationBeats;if(B.startBeat<D&&$>R){let ne;if(o){const re=n_(B.note);ne=t_(re,i)+i/2}else ne=e_(B.note,i)+i/2;ne>=j&&ne<=I&&M.add(z)}}),u(M)}f(null)},[h,t,e,s,i,o,u]);x.useEffect(()=>{const A=k=>{if(!(k.target instanceof HTMLInputElement||k.target instanceof HTMLTextAreaElement)){if((k.key==="Delete"||k.key==="Backspace")&&e.size>0){k.preventDefault();const O=t.filter((P,j)=>!e.has(j));c(O),u(new Set);return}if((k.metaKey||k.ctrlKey)&&k.key==="a"){k.preventDefault(),u(new Set(t.map((O,P)=>P)));return}(k.key==="v"||k.key==="V")&&u(e)}};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[t,e,c,u]);const E=x.useMemo(()=>{const A=[];for(let k=0;k<=m;k++){const O=k*i;let P;if(o)P=k%2===0?"rgba(255,255,255,0.02)":"transparent";else{const j=Zn-k-1;P=ql(j)?"rgba(255,255,255,0.03)":"transparent"}A.push(p.jsx("div",{className:"absolute w-full border-b",style:{top:O,height:i,backgroundColor:P,borderColor:"oklch(0.25 0.005 270)"}},`row-${k}`))}for(let k=0;k<=n;k+=r||.25){const O=Ci(k,s),P=k%4===0,j=k%1===0;A.push(p.jsx("div",{className:"absolute top-0 h-full",style:{left:O,width:1,backgroundColor:P?"oklch(0.35 0.01 270)":j?"oklch(0.28 0.005 270)":"oklch(0.22 0.003 270)"}},`vline-${k}`))}return A},[m,i,n,s,r,o]),T=x.useMemo(()=>t.map((A,k)=>{const O=Ci(A.startBeat,s),P=Ci(A.durationBeats,s);let j;if(o){const I=n_(A.note);j=t_(I>=0?I:0,i)}else j=e_(A.note,i);return p.jsx($U,{x:O,y:j,width:P,height:i,color:l,selected:e.has(k),velocity:A.velocity},k)}),[t,s,i,o,l,e]),C=x.useMemo(()=>{if(!h||h.type!=="rubber-band"||!h.currentX||!h.currentY||!d.current)return null;const A=d.current.getBoundingClientRect(),k=Math.min(h.startX,h.currentX)-A.left,O=Math.min(h.startY,h.currentY)-A.top,P=Math.abs(h.currentX-h.startX),j=Math.abs(h.currentY-h.startY);return p.jsx("div",{className:"absolute pointer-events-none rounded-sm border border-primary/60",style:{left:k,top:O,width:P,height:j,backgroundColor:"oklch(0.60 0.15 265 / 0.15)"}})},[h]),N=a==="draw"?"cursor-crosshair":a==="eraser"?"cursor-pointer":"cursor-default";return p.jsxs("div",{ref:d,className:`relative overflow-hidden ${N}`,style:{width:g,height:b},onPointerDown:_,onPointerMove:S,onPointerUp:w,children:[E,T,C]})}function KU({notes:t,selectedIndices:e,pxPerBeat:n,color:s,height:i,onVelocityChange:r}){const a=x.useRef(null),o=x.useRef(null),[l,c]=x.useState(null),u=x.useCallback(m=>{if(!o.current)return .8;const g=o.current.getBoundingClientRect(),b=m-g.top;return Math.max(.05,Math.min(1,1-b/g.height))},[]),d=x.useCallback((m,g)=>{m.stopPropagation(),m.target.setPointerCapture(m.pointerId),a.current=g;const b=u(m.clientY);r(g,b),c({index:g,value:b,x:m.clientX})},[r,u]),h=x.useCallback(m=>{if(a.current!==null){const g=u(m.clientY);r(a.current,g),c({index:a.current,value:g,x:m.clientX})}},[r,u]),f=x.useCallback(()=>{a.current=null,c(null)},[]);return p.jsxs("div",{ref:o,className:"relative border-t border-border bg-background/30 select-none",style:{height:i},onPointerMove:h,onPointerUp:f,children:[p.jsx("span",{className:"absolute top-1 left-1.5 text-[9px] font-medium text-muted-foreground/50 pointer-events-none z-10",children:"Vel"}),p.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[{pct:"25%",label:"75%"},{pct:"50%",label:"50%"},{pct:"75%",label:"25%"}].map(({pct:m,label:g})=>p.jsxs("div",{className:"absolute w-full",style:{top:m},children:[p.jsx("div",{className:"w-full border-b border-dashed border-border/30"}),p.jsx("span",{className:"absolute right-1.5 -top-2.5 text-[8px] text-muted-foreground/40",children:g})]},m))}),t.map((m,g)=>{const b=Ci(m.startBeat,n),y=Math.max(Ci(m.durationBeats,n),3),v=m.velocity*i,_=e.has(g);return l==null||l.index,p.jsx("div",{className:"absolute bottom-0 cursor-ns-resize rounded-t-sm",style:{left:b,width:Math.min(y,12),height:v,background:_?"linear-gradient(to top, rgba(255,255,255,0.7), rgba(255,255,255,0.95))":`linear-gradient(to top, ${s}B3, ${s}F0)`,opacity:_?.9:.7},onPointerDown:S=>d(S,g),children:p.jsx("div",{className:"absolute top-0 left-0 right-0 h-px rounded-t-sm",style:{backgroundColor:_?"rgba(255,255,255,0.5)":"rgba(255,255,255,0.2)"}})},g)}),l&&o.current&&(()=>{const m=o.current.getBoundingClientRect(),g=l.x-m.left,b=(1-l.value)*i-18;return p.jsx("div",{className:"absolute pointer-events-none z-20 bg-popover text-popover-foreground text-[9px] font-mono px-1.5 py-0.5 rounded shadow-sm border border-border/60 whitespace-nowrap",style:{left:g,top:Math.max(0,b),transform:"translateX(-50%)"},children:l.value.toFixed(2)})})()]})}const XU=40,QU=60,ZU=60,JU=200;function eG({trackId:t,regionId:e,arrangement:n,onClose:s,onUpdateNotes:i,onResizeRegion:r}){const[a,o]=x.useState("pointer"),[l,c]=x.useState(.25),[u,d]=x.useState(new Set),[h,f]=x.useState(XU),m=x.useRef(null),g=x.useRef(null),[b,y]=x.useState(0),[v,_]=x.useState(400),S=x.useRef(null),w=x.useRef(null),E=x.useRef(!1),T=x.useMemo(()=>n.tracks.find(D=>D.id===t),[n,t]),C=x.useMemo(()=>T==null?void 0:T.regions.find(D=>D.id===e),[T,e]),N=(T==null?void 0:T.instrument.type)==="drums",A=N?28:14,k=(C==null?void 0:C.notes)??[],O=x.useCallback(()=>{!m.current||!g.current||(g.current.scrollTop=m.current.scrollTop,y(m.current.scrollTop))},[]);x.useEffect(()=>{if(!m.current||N)return;const M=(Zn-60)*A-m.current.clientHeight/2;m.current.scrollTop=Math.max(0,M),_(m.current.clientHeight)},[A,N]),x.useEffect(()=>{if(!m.current)return;const D=new ResizeObserver(()=>{m.current&&_(m.current.clientHeight)});return D.observe(m.current),()=>D.disconnect()},[]);const P=x.useCallback(D=>{i(t,e,D)},[t,e,i]),j=x.useCallback((D,M)=>{const B=[...k];B[D]={...B[D],velocity:M},i(t,e,B)},[k,t,e,i]),I=x.useCallback(D=>{o(M=>M===D?M:(S.current=M,E.current=!1,w.current!==null&&clearTimeout(w.current),w.current=setTimeout(()=>{w.current=null,E.current=!0;const B=()=>{S.current!==null&&(o(S.current),S.current=null),E.current=!1,window.removeEventListener("pointerup",B)};window.addEventListener("pointerup",B)},JU),D))},[]),R=x.useCallback(()=>{w.current!==null&&(clearTimeout(w.current),w.current=null,S.current=null,E.current=!1)},[]);return x.useEffect(()=>{const D=M=>{if(!(M.target instanceof HTMLInputElement||M.target instanceof HTMLTextAreaElement)&&!(M.metaKey||M.ctrlKey||M.altKey))switch(M.key){case"v":case"V":o("pointer");break;case"d":case"D":o("draw");break;case"e":case"E":o("eraser");break}};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[]),x.useEffect(()=>{const D=m.current;if(!D)return;const M=B=>{if(!B.ctrlKey&&!B.metaKey)return;B.preventDefault();const z=D.getBoundingClientRect(),ne=(B.clientX-z.left+D.scrollLeft)/h,re=-B.deltaY*.5,ie=Math.round(Math.max(d0,Math.min(h0,h+re)));if(ie!==h){f(ie);const K=ne*ie;D.scrollLeft=K-(B.clientX-z.left)}};return D.addEventListener("wheel",M,{passive:!1}),()=>D.removeEventListener("wheel",M)},[h]),x.useEffect(()=>()=>{w.current!==null&&clearTimeout(w.current)},[]),!T||!C?p.jsxs("div",{className:"flex flex-1 items-center justify-center text-muted-foreground text-sm",children:["Region not found.",p.jsx("button",{className:"ml-2 underline",onClick:s,children:"Go back"})]}):p.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[p.jsx(zU,{tool:a,snapValue:l,regionName:C.name,onToolChange:o,onSnapChange:c,onBack:s,onToolPointerDown:I,onToolPointerUp:R}),p.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[p.jsx("div",{ref:g,className:"shrink-0 overflow-hidden border-r border-border bg-card/60",style:{width:QU},children:N?p.jsx(WU,{rowHeight:A}):p.jsx(qU,{rowHeight:A,scrollTop:b,visibleHeight:v})}),p.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[p.jsx("div",{ref:m,className:"flex-1 overflow-auto",onScroll:O,children:p.jsx(YU,{notes:k,selectedIndices:u,regionLengthBeats:C.lengthBeats,pxPerBeat:h,rowHeight:A,snapValue:l,tool:a,isDrum:N,trackColor:T.color,onNotesChange:P,onSelectionChange:d})}),p.jsx(KU,{notes:k,selectedIndices:u,pxPerBeat:h,color:T.color,height:ZU,onVelocityChange:j})]})]})]})}const tG="modulepreload",nG=function(t){return"/"+t},s_={},sG=function(e,n,s){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=nG(l),l in s_)return;s_[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":tG,c||(d.as="script"),d.crossOrigin="",d.href=l,o&&d.setAttribute("nonce",o),document.head.appendChild(d),c)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&r(o.reason);return e().catch(r)})};function iG(t){const e=t.numberOfChannels,n=t.sampleRate,s=16,i=s/8,r=e*i,a=t.length,o=a*r,l=44,c=new ArrayBuffer(l+o),u=new DataView(c);pu(u,0,"RIFF"),u.setUint32(4,36+o,!0),pu(u,8,"WAVE"),pu(u,12,"fmt "),u.setUint32(16,16,!0),u.setUint16(20,1,!0),u.setUint16(22,e,!0),u.setUint32(24,n,!0),u.setUint32(28,n*r,!0),u.setUint16(32,r,!0),u.setUint16(34,s,!0),pu(u,36,"data"),u.setUint32(40,o,!0);const d=[];for(let f=0;f<e;f++)d.push(t.getChannelData(f));let h=l;for(let f=0;f<a;f++)for(let m=0;m<e;m++){const g=Math.max(-1,Math.min(1,d[m][f])),b=g<0?g*32768:g*32767;u.setInt16(h,b,!0),h+=2}return new Blob([c],{type:"audio/wav"})}function pu(t,e,n){for(let s=0;s<n.length;s++)t.setUint8(e+s,n.charCodeAt(s))}function rG(t,e){const n=new js(t.volume);if(n.connect(e),t.muted&&(n.mute=!0),t.instrument.type==="synth"){const f=Jn[t.instrument.presetIndex]||Jn[0],m=new jc(li,{maxPolyphony:u0,oscillator:f.oscillator,envelope:f.envelope});return m.connect(n),{synth:m,drumSynths:null,drumFilter:null,volume:n}}const s=new Map,i=new ia({frequency:8e3,type:"highpass"});i.connect(n);const r=new Un({pitchDecay:.05,octaves:6,oscillator:{type:"sine"},envelope:{attack:.001,decay:.3,sustain:0,release:.1}});r.connect(n),s.set(36,r);const a=new Vt({noise:{type:"white"},envelope:{attack:.001,decay:.15,sustain:0,release:.05}});a.connect(n),s.set(37,a);const o=new Vt({noise:{type:"white"},envelope:{attack:.001,decay:.05,sustain:0,release:.01}});o.connect(i),s.set(38,o);const l=new Vt({noise:{type:"white"},envelope:{attack:.001,decay:.3,sustain:0,release:.1}});l.connect(i),s.set(39,l);const c=new Vt({noise:{type:"pink"},envelope:{attack:.001,decay:.12,sustain:0,release:.05}});c.connect(n),s.set(40,c);const u=new Un({pitchDecay:.03,octaves:4,oscillator:{type:"sine"},envelope:{attack:.001,decay:.2,sustain:0,release:.1}});u.connect(n),s.set(41,u);const d=new Ss({frequency:300,envelope:{attack:.001,decay:1.2,release:.3},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1.5});d.connect(n),s.set(42,d);const h=new Ss({frequency:400,envelope:{attack:.001,decay:.4,release:.1},harmonicity:5.1,modulationIndex:16,resonance:5e3,octaves:1});return h.connect(n),s.set(43,h),{synth:null,drumSynths:s,drumFilter:i,volume:n}}function aG(t,e,n,s){const i=t.get(e);if(!i)return;const r=n*.8+.2;if(i instanceof Un){const a=e===36?"C1":"G1";i.triggerAttackRelease(a,"8n",s,r)}else if(i instanceof Vt){const a=e===38?"16n":e===39?"8n":"16n";i.triggerAttackRelease(a,s,r)}else if(i instanceof Ss){const a=e===42?"16n":"32n";i.triggerAttackRelease(a,s,r)}}function oG(t){let e=0;for(const n of t.tracks)if(!n.muted)for(const s of n.regions)for(const i of s.notes){const r=s.startBeat+i.startBeat+i.durationBeats;e=Math.max(e,r)}return e}async function lG(t){const e=oG(t);if(e<=0)throw new Error("Nothing to export");const n=e/t.bpm*60+1,s=await iU(({destination:i})=>{const r=nn();r.bpm.value=t.bpm;for(const a of t.tracks){if(a.muted)continue;const o=rG(a,i),l=[];for(const u of a.regions)for(const d of u.notes){const h=u.startBeat+d.startBeat;l.push({time:h*(60/t.bpm),note:d})}if(l.length===0)continue;new Xl((u,d)=>{const{note:h}=d;if(a.instrument.type==="drums"&&o.drumSynths)aG(o.drumSynths,h.note,h.velocity,u);else if(o.synth){const f=ir(h.note),m=h.durationBeats*60/t.bpm;o.synth.triggerAttackRelease(f,m,u,h.velocity)}},l.map(u=>({time:u.time,note:u.note}))).start(0)}r.start(0)},n);return iG(s)}async function cG(t){const e=await sG(()=>import("./index-C2p3UbBo.js").then(l=>l.i),[]),n=[];for(const l of t.tracks){if(l.muted)continue;const c=new e.Track;c.setTempo(t.bpm),c.addTrackName(l.name);const u=l.instrument.type==="drums"?10:1,d=[];for(const h of l.regions)for(const f of h.notes)d.push({absoluteBeat:h.startBeat+f.startBeat,note:f});d.sort((h,f)=>h.absoluteBeat-f.absoluteBeat);for(const{absoluteBeat:h,note:f}of d){const m=Math.round(h*128),g=Math.max(1,Math.round(f.durationBeats*128));c.addEvent(new e.NoteEvent({pitch:[f.note],duration:`T${g}`,velocity:Math.round(f.velocity*100),startTick:m,channel:u}))}n.push(c)}if(n.length===0)throw new Error("Nothing to export");const r=new e.Writer(n).dataUri().split(",")[1],a=atob(r),o=new Uint8Array(a.length);for(let l=0;l<a.length;l++)o[l]=a.charCodeAt(l);return new Blob([o],{type:"audio/midi"})}function i_(t,e){const n=URL.createObjectURL(t),s=document.createElement("a");s.href=n,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n)}function uG({onClose:t}){const[e,n]=x.useState(null),[s,i]=x.useState(null),r=x.useCallback(async()=>{n("wav"),i(null);try{const o=ce.getArrangement(),l=await lG(o),c=o.name||"untitled";i_(l,`${c}.wav`)}catch(o){i(o instanceof Error?o.message:"Export failed")}finally{n(null)}},[]),a=x.useCallback(async()=>{n("midi"),i(null);try{const o=ce.getArrangement(),l=await cG(o),c=o.name||"untitled";i_(l,`${c}.mid`)}catch(o){i(o instanceof Error?o.message:"Export failed")}finally{n(null)}},[]);return p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:p.jsxs("div",{className:"relative w-80 rounded-lg border border-border bg-card p-5 shadow-2xl",children:[p.jsx("button",{className:"absolute right-3 top-3 text-muted-foreground hover:text-foreground",onClick:t,children:p.jsx(pE,{className:"h-4 w-4"})}),p.jsx("h2",{className:"mb-4 text-sm font-bold",children:"Export"}),p.jsxs("div",{className:"flex flex-col gap-2",children:[p.jsxs(Ee,{variant:"outline",className:"h-12 justify-start gap-3",onClick:r,disabled:e!==null,children:[e==="wav"?p.jsx(Fx,{className:"h-5 w-5 animate-spin"}):p.jsx(g4,{className:"h-5 w-5 text-primary"}),p.jsxs("div",{className:"text-left",children:[p.jsx("div",{className:"text-xs font-semibold",children:"WAV Audio"}),p.jsx("div",{className:"text-[10px] text-muted-foreground",children:"16-bit PCM, lossless"})]})]}),p.jsxs(Ee,{variant:"outline",className:"h-12 justify-start gap-3",onClick:a,disabled:e!==null,children:[e==="midi"?p.jsx(Fx,{className:"h-5 w-5 animate-spin"}):p.jsx(rE,{className:"h-5 w-5 text-primary"}),p.jsxs("div",{className:"text-left",children:[p.jsx("div",{className:"text-xs font-semibold",children:"MIDI"}),p.jsx("div",{className:"text-[10px] text-muted-foreground",children:"Standard MIDI file"})]})]})]}),s&&p.jsx("p",{className:"mt-3 text-xs text-red-500",children:s})]})})}class mu extends x.Component{constructor(){super(...arguments);de(this,"state",{hasError:!1,error:null});de(this,"handleReset",()=>{var n,s;this.setState({hasError:!1,error:null}),(s=(n=this.props).onReset)==null||s.call(n)})}static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,s){console.error(`[ErrorBoundary:${this.props.zoneName}]`,n,s.componentStack)}render(){var s;if(!this.state.hasError)return this.props.children;const n=((s=this.state.error)==null?void 0:s.message)||"Unknown error";return this.props.fallbackVariant==="inline"?p.jsxs("div",{className:"flex items-center gap-2 border-b border-border bg-card/60 px-4 py-2 text-sm text-muted-foreground",children:[p.jsx(Ux,{className:"size-4 shrink-0 text-destructive"}),p.jsxs("span",{className:"truncate font-mono text-xs",children:[this.props.zoneName," encountered an error: ",n]}),p.jsx(Ee,{variant:"ghost",size:"xs",onClick:this.handleReset,className:"ml-auto shrink-0",children:"Retry"})]}):p.jsx("div",{className:"flex flex-1 items-center justify-center p-8",children:p.jsxs("div",{className:"flex max-w-md flex-col items-center gap-4 rounded-lg border border-border bg-card/60 p-8 text-center backdrop-blur-sm",children:[p.jsx(Ux,{className:"size-8 text-destructive"}),p.jsxs("div",{children:[p.jsxs("p",{className:"text-sm font-medium text-foreground",children:[this.props.zoneName," encountered an error"]}),p.jsx("p",{className:"mt-1 font-mono text-xs text-muted-foreground",children:n})]}),p.jsx(Ee,{variant:"outline",size:"sm",onClick:this.handleReset,children:"Try Again"})]})})}}function dG({icon:t,label:e,isActive:n,onClick:s}){return p.jsxs("button",{onClick:s,className:ye("group/item relative flex w-full items-center gap-3 px-3 py-2.5","transition-colors duration-150",n?"text-foreground":"text-muted-foreground hover:text-foreground"),title:e,children:[n&&p.jsx("div",{className:"absolute left-0 top-1/2 h-5 w-[3px] -translate-y-1/2 rounded-r-full",style:{backgroundColor:"oklch(0.65 0.25 270)"}}),p.jsx(t,{className:"h-5 w-5 shrink-0"}),p.jsx("span",{className:"truncate text-xs font-medium opacity-0 transition-opacity duration-200 group-hover/sidebar:opacity-100",children:e})]})}const hG=[{mode:"daw",icon:rE,label:"DAW"},{mode:"learn",icon:nE,label:"Learn"},{mode:"practice",icon:lE,label:"Practice"}];function fG({mode:t,onModeChange:e}){return p.jsxs("div",{className:"group/sidebar flex h-full w-12 shrink-0 flex-col overflow-hidden border-r border-border/50 transition-[width] duration-200 hover:w-[160px]",style:{backgroundColor:"oklch(0.10 0.01 270)",WebkitAppRegion:"drag"},children:[p.jsx("div",{className:"h-[38px] shrink-0"}),p.jsx("nav",{className:"flex flex-col gap-1",style:{WebkitAppRegion:"no-drag"},children:hG.map(n=>p.jsx(dG,{icon:n.icon,label:n.label,isActive:t===n.mode,onClick:()=>e(n.mode)},n.mode))})]})}const pG=[{value:null,label:"All"},{value:"piano",label:"Piano"},{value:"drums",label:"Drums"},{value:"theory",label:"Theory"}];function mG({selected:t,onChange:e}){return p.jsx("div",{className:"flex gap-1",children:pG.map(n=>p.jsx("button",{onClick:()=>e(n.value),className:ye("rounded-md px-3 py-1.5 text-xs font-medium transition-colors",t===n.value?"bg-primary text-primary-foreground":"bg-secondary text-muted-foreground hover:text-foreground"),children:n.label},n.label))})}const gG={piano:Wy,drums:qy,theory:J3},yG={beginner:"bg-green-500/20 text-green-400",intermediate:"bg-yellow-500/20 text-yellow-400",advanced:"bg-red-500/20 text-red-400"};function vG({lesson:t,isCompleted:e,onClick:n}){const s=gG[t.category];return p.jsxs("button",{onClick:n,className:ye("group flex flex-col gap-3 rounded-xl border border-border/50 p-4 text-left","transition-all duration-150 hover:border-border hover:bg-card/60",e&&"border-green-500/30"),style:{backgroundColor:"oklch(0.14 0.01 270)"},children:[p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg",style:{backgroundColor:"oklch(0.20 0.02 270)"},children:p.jsx(s,{className:"h-4.5 w-4.5 text-muted-foreground"})}),e&&p.jsx(tE,{className:"h-5 w-5 text-green-400"})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-semibold text-foreground",children:t.title}),p.jsx("p",{className:"mt-1 text-xs text-muted-foreground line-clamp-2",children:t.description})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:ye("rounded-md px-2 py-0.5 text-[10px] font-medium",yG[t.difficulty]),children:t.difficulty}),p.jsxs("span",{className:"flex items-center gap-1 text-[10px] text-muted-foreground",children:[p.jsx(c4,{className:"h-3 w-3"}),t.estimatedMinutes,"m"]})]})]})}function bG({current:t,total:e}){const n=e>0?(t+1)/e*100:0;return p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("span",{className:"text-xs text-muted-foreground",children:["Step ",t+1," / ",e]}),p.jsx("div",{className:"h-1.5 flex-1 rounded-full bg-secondary",children:p.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${n}%`,backgroundColor:"oklch(0.65 0.25 270)"}})})]})}function xG({step:t}){return p.jsx("div",{className:"flex flex-col gap-4",children:p.jsx("p",{className:"whitespace-pre-line text-sm leading-relaxed text-foreground/90",children:t.description})})}function _G({step:t,activeNotes:e,onNoteOn:n,onNoteOff:s,completed:i}){const r=new Set((t.expectedNotes??[]).map(a=>a.midi%12));return p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx("p",{className:"text-sm text-foreground/90",children:t.description}),t.expectedNotes&&p.jsx("div",{className:"flex flex-wrap gap-2",children:t.expectedNotes.map(a=>{const o=e.has(a.midi);return p.jsx("span",{className:"rounded-md px-2.5 py-1 text-xs font-medium transition-colors",style:{backgroundColor:o?"oklch(0.65 0.25 150 / 0.3)":"oklch(0.20 0.02 270)",color:o?"oklch(0.85 0.15 150)":void 0},children:a.label??`Note ${a.midi}`},a.midi)})}),t.hint&&!i&&p.jsx("p",{className:"text-xs text-muted-foreground italic",children:t.hint}),p.jsx("div",{className:"overflow-x-auto",children:p.jsx(mr,{activeNotes:e,onNoteOn:n,onNoteOff:s,highlightedNotes:r,compact:!0})})]})}function SG({step:t,activeNotes:e,onNoteOn:n,onNoteOff:s,detectedChord:i,completed:r}){return p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx("p",{className:"text-sm text-foreground/90",children:t.description}),t.expectedChord&&p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"text-xs text-muted-foreground",children:"Target:"}),p.jsx("span",{className:"rounded-lg px-3 py-1.5 text-lg font-bold",style:{backgroundColor:"oklch(0.20 0.02 270)"},children:t.expectedChord.display}),i&&p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"text-xs text-muted-foreground",children:"Playing:"}),p.jsx("span",{className:"rounded-lg px-3 py-1.5 text-lg font-bold",style:{backgroundColor:r?"oklch(0.65 0.25 150 / 0.2)":"oklch(0.20 0.02 270)",color:r?"oklch(0.85 0.15 150)":void 0},children:i.display})]})]}),t.hint&&!r&&p.jsx("p",{className:"text-xs text-muted-foreground italic",children:t.hint}),p.jsx("div",{className:"overflow-x-auto",children:p.jsx(mr,{activeNotes:e,onNoteOn:n,onNoteOff:s,compact:!0})})]})}function wG({step:t,activeNotes:e,onNoteOn:n,onNoteOff:s,completed:i}){var a;const r=new Set(((a=t.expectedScale)==null?void 0:a.notes)??[]);return p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx("p",{className:"text-sm text-foreground/90",children:t.description}),t.expectedScale&&p.jsxs("p",{className:"text-xs text-muted-foreground",children:["Play the notes in order: ",t.expectedScale.notes.map(o=>["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][o]).join("  ")]}),t.hint&&!i&&p.jsx("p",{className:"text-xs text-muted-foreground italic",children:t.hint}),p.jsx("div",{className:"overflow-x-auto",children:p.jsx(mr,{activeNotes:e,onNoteOn:n,onNoteOff:s,highlightedNotes:r,compact:!0})})]})}function CG({step:t,activePads:e,onDrumHit:n,completed:s}){var r;const i=new Set(((r=t.expectedDrumPattern)==null?void 0:r.pads)??[]);return p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx("p",{className:"text-sm text-foreground/90",children:t.description}),t.hint&&!s&&p.jsx("p",{className:"text-xs text-muted-foreground italic",children:t.hint}),p.jsx("div",{className:"w-[280px]",children:p.jsx(sf,{activePads:e,onHit:n,highlightedPads:i})})]})}function TG({step:t,completed:e,onAnswer:n}){var c,u,d;const[s,i]=x.useState(null),[r,a]=x.useState(!1),o=h=>{var m,g;if(e||r)return;i(h),a(!0);const f=((g=(m=t.quizOptions)==null?void 0:m[h])==null?void 0:g.correct)??!1;n(f)},l=()=>{i(null),a(!1)};return p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsx("p",{className:"text-sm font-medium text-foreground",children:t.description}),p.jsx("div",{className:"flex flex-col gap-2",children:(c=t.quizOptions)==null?void 0:c.map((h,f)=>{const m=s===f,g=h.correct;let b="oklch(0.18 0.01 270)";return r&&m?b=g?"oklch(0.30 0.15 150)":"oklch(0.30 0.15 25)":r&&g&&(b="oklch(0.25 0.10 150)"),p.jsx("button",{onClick:()=>o(f),disabled:r,className:ye("rounded-lg px-4 py-2.5 text-left text-sm transition-colors",!r&&"hover:brightness-125"),style:{backgroundColor:b},children:h.label},f)})}),r&&s!==null&&!((d=(u=t.quizOptions)==null?void 0:u[s])!=null&&d.correct)&&p.jsx("button",{onClick:l,className:"self-start rounded-md px-3 py-1.5 text-xs text-muted-foreground hover:text-foreground",style:{backgroundColor:"oklch(0.20 0.02 270)"},children:"Try again"})]})}function EG({step:t,completed:e,activeNotes:n,onNoteOn:s,onNoteOff:i,activePads:r,onDrumHit:a,detectedChord:o,onQuizAnswer:l}){switch(t.type){case"info":return p.jsx(xG,{step:t});case"play-notes":return p.jsx(_G,{step:t,activeNotes:n,onNoteOn:s,onNoteOff:i,completed:e});case"play-chord":return p.jsx(SG,{step:t,activeNotes:n,onNoteOn:s,onNoteOff:i,detectedChord:o,completed:e});case"play-scale":return p.jsx(wG,{step:t,activeNotes:n,onNoteOn:s,onNoteOff:i,completed:e});case"play-drums":return p.jsx(CG,{step:t,activePads:r,onDrumHit:a,completed:e});case"quiz":return p.jsx(TG,{step:t,completed:e,onAnswer:l});default:return p.jsx("p",{className:"text-sm text-muted-foreground",children:"Unknown step type"})}}function AG({lesson:t,currentStep:e,currentStepIndex:n,totalSteps:s,stepCompleted:i,activeNotes:r,onNoteOn:a,onNoteOff:o,activePads:l,onDrumHit:c,detectedChord:u,onNext:d,onPrev:h,onExit:f,onQuizAnswer:m}){const g=n===s-1;return p.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[p.jsxs("div",{className:"flex items-center justify-between border-b border-border/50 px-6 py-3",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(Ee,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:f,title:"Exit lesson",children:p.jsx(pE,{className:"h-4 w-4"})}),p.jsx("h2",{className:"text-sm font-semibold",children:t.title})]}),p.jsx("div",{className:"w-48",children:p.jsx(bG,{current:n,total:s})})]}),p.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:p.jsxs("div",{className:"mx-auto max-w-2xl",children:[p.jsx("h3",{className:"mb-4 text-lg font-bold",children:e.title}),p.jsx(EG,{step:e,completed:i,activeNotes:r,onNoteOn:a,onNoteOff:o,activePads:l,onDrumHit:c,detectedChord:u,onQuizAnswer:m}),i&&e.type!=="info"&&p.jsxs("div",{className:"mt-4 flex items-center gap-2 text-sm",style:{color:"oklch(0.75 0.20 150)"},children:[p.jsx(tE,{className:"h-4 w-4"}),p.jsx("span",{children:"Step completed!"})]})]})}),p.jsxs("div",{className:"flex items-center justify-between border-t border-border/50 px-6 py-3",children:[p.jsxs(Ee,{variant:"ghost",size:"sm",onClick:h,disabled:n===0,children:[p.jsx(oo,{className:"mr-1 h-3.5 w-3.5"}),"Back"]}),p.jsxs(Ee,{size:"sm",onClick:d,disabled:!i,children:[g?"Finish":"Next",!g&&p.jsx(Q3,{className:"ml-1 h-3.5 w-3.5"})]})]})]})}const r_=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],kG=[[[0,4,7],"maj"],[[0,3,7],"m"],[[0,3,6],"dim"],[[0,4,8],"aug"],[[0,2,7],"sus2"],[[0,5,7],"sus4"],[[0,7],"5"],[[0,4,7,10],"7"],[[0,3,7,10],"m7"],[[0,4,7,11],"maj7"],[[0,3,6,9],"dim7"],[[0,3,6,10],"m7b5"]];function jN(t){if(t.length<2)return null;const e=[...new Set(t.map(n=>n%12))].sort((n,s)=>n-s);if(e.length<2)return null;for(const n of e){const s=e.map(i=>(i-n+12)%12).sort((i,r)=>i-r);for(const[i,r]of kG)if(NG(s,i))return{root:r_[n],quality:r,display:`${r_[n]}${r==="maj"?"":r}`}}return null}function NG(t,e){return t.length!==e.length?!1:t.every((n,s)=>n===e[s])}const PN="micro-daw-lesson-progress";function MG(){try{const t=localStorage.getItem(PN);if(t)return JSON.parse(t)}catch{}return{lessons:{}}}function a_(t){localStorage.setItem(PN,JSON.stringify(t))}function RG(){const[t,e]=x.useState(MG),n=x.useCallback(a=>t.lessons[a],[t]),s=x.useCallback(a=>{var o;return((o=t.lessons[a])==null?void 0:o.completed)??!1},[t]),i=x.useCallback((a,o)=>{e(l=>{const c=l.lessons[a]??{lessonId:a,completedSteps:[],completed:!1,lastStepIndex:0},u=c.completedSteps.includes(o)?c.completedSteps:[...c.completedSteps,o],d={...l,lessons:{...l.lessons,[a]:{...c,completedSteps:u,lastStepIndex:o}}};return a_(d),d})},[]),r=x.useCallback(a=>{e(o=>{const l=o.lessons[a]??{lessonId:a,completedSteps:[],completed:!1,lastStepIndex:0},c={...o,lessons:{...o.lessons,[a]:{...l,completed:!0}}};return a_(c),c})},[]);return{progress:t,getLessonProgress:n,isLessonCompleted:s,markStepCompleted:i,markLessonCompleted:r}}function DG(t,e){const[n,s]=x.useState(null),[i,r]=x.useState(0),[a,o]=x.useState(!1),l=x.useRef([]),c=x.useRef(new Set),{markStepCompleted:u,markLessonCompleted:d,isLessonCompleted:h,getLessonProgress:f}=RG(),m=(n==null?void 0:n.steps[i])??null,g=x.useCallback(S=>{s(S);const w=f(S.id);r((w==null?void 0:w.lastStepIndex)??0),o((w==null?void 0:w.completedSteps.includes((w==null?void 0:w.lastStepIndex)??0))??!1),l.current=[]},[f]),b=x.useCallback(()=>{s(null),r(0),o(!1),l.current=[]},[]),y=x.useCallback(()=>{n&&(i<n.steps.length-1?(r(S=>S+1),o(!1),l.current=[]):(d(n.id),b()))},[n,i,d,b]),v=x.useCallback(()=>{i>0&&(r(S=>S-1),o(!1),l.current=[])},[i]);x.useEffect(()=>{if(!n||!m||a)return;const S=new Set(t.keys());for(const E of S)c.current.has(E)||l.current.push(E%12);c.current=S;let w=!1;switch(m.type){case"play-notes":{if(!m.expectedNotes)break;w=m.expectedNotes.every(E=>t.has(E.midi));break}case"play-chord":{if(!m.expectedChord)break;const E=jN(Array.from(t.keys()));E&&(w=E.root===m.expectedChord.root&&E.quality===m.expectedChord.quality);break}case"play-scale":{if(!m.expectedScale)break;const E=m.expectedScale.notes,T=l.current;if(T.length>=E.length){const C=T.slice(-E.length);w=E.every((N,A)=>C[A]===N)}break}case"play-drums":{if(!m.expectedDrumPattern)break;const E=m.expectedDrumPattern.pads,T=new Set;for(const C of t.keys()){const N=Od.get(C);N!==void 0&&T.add(N)}for(const C of e)T.add(C);w=E.every(C=>T.has(C));break}}w&&(o(!0),u(n.id,i))},[t,e,n,m,i,a,u]);const _=x.useCallback(S=>{S&&n&&(o(!0),u(n.id,i))},[n,i,u]);return x.useEffect(()=>{(m==null?void 0:m.type)==="info"&&!a&&(o(!0),n&&u(n.id,i))},[m,a,n,i,u]),{activeLesson:n,currentStep:m,currentStepIndex:i,stepCompleted:a,totalSteps:(n==null?void 0:n.steps.length)??0,startLesson:g,exitLesson:b,nextStep:y,prevStep:v,completeQuiz:_,isLessonCompleted:h}}const OG="piano-c-major-scale",jG="C Major Scale",PG="piano",BG="beginner",IG=5,LG="Learn to play the C major scale  the foundation of Western music.",VG=[{type:"info",title:"Welcome to C Major!",description:"The C major scale uses only the white keys on the piano: C, D, E, F, G, A, B. It's the most fundamental scale in Western music and the perfect place to start learning."},{type:"play-notes",title:"Find Middle C",description:"Press the C key on the piano. Middle C is MIDI note 60.",expectedNotes:[{midi:60,label:"C4"}],hint:"Look for the white key just left of the group of two black keys."},{type:"play-notes",title:"Play C and E",description:"Now play both C and E together.",expectedNotes:[{midi:60,label:"C4"},{midi:64,label:"E4"}],hint:"E is two white keys to the right of C."},{type:"play-scale",title:"Play the C Major Scale",description:"Play all 8 notes of the C major scale ascending: C, D, E, F, G, A, B, C.",expectedScale:{root:0,name:"Major",notes:[0,2,4,5,7,9,11]},hint:"Play the white keys from C to the next C, one at a time."},{type:"play-chord",title:"Play a C Major Chord",description:"Play C, E, and G together to form the C major chord.",expectedChord:{root:"C",quality:"maj",display:"C"},hint:"Press C (60), E (64), and G (67) at the same time."},{type:"quiz",title:"Quick Quiz",description:"How many notes are in a major scale?",quizOptions:[{label:"5",correct:!1},{label:"7",correct:!0},{label:"8",correct:!1},{label:"12",correct:!1}]}],zG={id:OG,title:jG,category:PG,difficulty:BG,estimatedMinutes:IG,description:LG,steps:VG},FG="piano-finding-notes",HG="Finding Notes on the Piano",UG="piano",GG="beginner",qG=5,WG="Learn to navigate the piano keyboard  find white keys, black keys, sharps, and octaves.",$G=[{type:"info",title:"The Piano Layout",description:"The piano keyboard has a repeating pattern of white and black keys. Black keys come in groups of 2 and 3. The note C is always just to the left of a group of 2 black keys. Once you can find C, you can find every other note!"},{type:"play-notes",title:"Find Middle C",description:"Press Middle C (C4). It's just to the left of the group of two black keys in the middle of the keyboard.",expectedNotes:[{midi:60,label:"C4"}],hint:"C4 is MIDI note 60."},{type:"play-notes",title:"Find D",description:"D is the white key between the two black keys. Press D4.",expectedNotes:[{midi:62,label:"D4"}],hint:"D4 is one whole step (2 keys) above C4."},{type:"play-notes",title:"Find E",description:"E is the white key just to the right of the two black keys. Press E4.",expectedNotes:[{midi:64,label:"E4"}],hint:"E4 is MIDI note 64."},{type:"play-notes",title:"Find a Sharp  C#",description:"Sharps are the black keys. C# is the first black key in the group of two. Press C#4.",expectedNotes:[{midi:61,label:"C#4"}],hint:"C#4 is the black key directly to the right of C4."},{type:"play-notes",title:"Play C in Two Octaves",description:"An octave is the distance from one note to the next note with the same name. Play C4 and C5 together.",expectedNotes:[{midi:60,label:"C4"},{midi:72,label:"C5"}],hint:"C5 is 12 keys higher than C4 (MIDI 72)."},{type:"quiz",title:"Keyboard Quiz",description:"Where do you find the note C on the piano?",quizOptions:[{label:"Left of 2 black keys",correct:!0},{label:"Right of 2 black keys",correct:!1},{label:"Left of 3 black keys",correct:!1},{label:"Between 2 black keys",correct:!1}]}],YG={id:FG,title:HG,category:UG,difficulty:GG,estimatedMinutes:qG,description:WG,steps:$G},KG="piano-two-hand-notes",XG="Playing Two Notes Together",QG="piano",ZG="beginner",JG=5,eq="Practice holding two notes at the same time  the first step toward playing chords.",tq=[{type:"info",title:"Why Two Notes?",description:"Playing two notes simultaneously is the foundation of harmony. When you combine notes, they create intervals  the building blocks of all chords. Let's practice pressing and holding two keys at once."},{type:"play-notes",title:"C and D Together",description:"Hold C4 and D4 at the same time. These adjacent notes create a Major 2nd interval.",expectedNotes:[{midi:60,label:"C4"},{midi:62,label:"D4"}],hint:"Press both keys and hold them simultaneously."},{type:"play-notes",title:"C and E Together",description:"Now hold C4 and E4. This wider interval (Major 3rd) sounds brighter.",expectedNotes:[{midi:60,label:"C4"},{midi:64,label:"E4"}],hint:"E4 is two white keys above C4."},{type:"play-notes",title:"C and G Together",description:"Hold C4 and G4 together. This is a Perfect 5th  a very stable, open sound.",expectedNotes:[{midi:60,label:"C4"},{midi:67,label:"G4"}],hint:"G4 is MIDI note 67."},{type:"play-notes",title:"E and A Together",description:"Now try E4 and A4  a Perfect 4th interval.",expectedNotes:[{midi:64,label:"E4"},{midi:69,label:"A4"}],hint:"A4 is MIDI note 69."},{type:"play-notes",title:"D and B Together",description:"Hold D4 and B4  a Major 6th. This wide interval has a sweet, warm quality.",expectedNotes:[{midi:62,label:"D4"},{midi:71,label:"B4"}],hint:"B4 is MIDI note 71."},{type:"quiz",title:"Interval Quiz",description:"When you play C and G together, what interval is that?",quizOptions:[{label:"Major 3rd",correct:!1},{label:"Perfect 4th",correct:!1},{label:"Perfect 5th",correct:!0},{label:"Octave",correct:!1}]}],nq={id:KG,title:XG,category:QG,difficulty:ZG,estimatedMinutes:JG,description:eq,steps:tq},sq="piano-major-chords",iq="Major Chords",rq="piano",aq="beginner",oq=7,lq="Learn to play C, F, and G major chords  the three most important chords in the key of C.",cq=[{type:"info",title:"What is a Major Chord?",description:"A major chord is made of three notes: the root, the major 3rd (4 semitones up), and the perfect 5th (7 semitones up). Major chords sound bright and happy. The three chords C, F, and G are the primary chords in the key of C major."},{type:"play-chord",title:"Play C Major",description:"Play C, E, and G together to form a C major chord.",expectedChord:{root:"C",quality:"maj",display:"C"},hint:"C (60) + E (64) + G (67)"},{type:"play-chord",title:"Play F Major",description:"Play F, A, and C together to form an F major chord.",expectedChord:{root:"F",quality:"maj",display:"F"},hint:"F (65) + A (69) + C (72)"},{type:"play-chord",title:"Play G Major",description:"Play G, B, and D together to form a G major chord.",expectedChord:{root:"G",quality:"maj",display:"G"},hint:"G (67) + B (71) + D (74)"},{type:"info",title:"The I-IV-V Progression",description:"C, F, and G are the I, IV, and V chords in the key of C. This I-IV-V pattern is the backbone of countless songs in rock, pop, blues, and country music. Try playing them in order: C  F  G  C."},{type:"play-chord",title:"Back to C Major",description:"Play the C major chord one more time. Notice how it feels like 'coming home' after playing F and G.",expectedChord:{root:"C",quality:"maj",display:"C"},hint:"C (60) + E (64) + G (67)"},{type:"quiz",title:"Major Chord Quiz",description:"What three notes make up a major chord?",quizOptions:[{label:"Root, Major 3rd, Perfect 5th",correct:!0},{label:"Root, Minor 3rd, Perfect 5th",correct:!1},{label:"Root, Perfect 4th, Perfect 5th",correct:!1},{label:"Root, Major 2nd, Perfect 5th",correct:!1}]}],uq={id:sq,title:iq,category:rq,difficulty:aq,estimatedMinutes:oq,description:lq,steps:cq},dq="piano-minor-chords",hq="Minor Chords",fq="piano",pq="beginner",mq=7,gq="Learn to play minor chords and hear the difference between major and minor sounds.",yq=[{type:"info",title:"Major vs Minor",description:"Minor chords are built like major chords, but the middle note (the 3rd) is lowered by one semitone. This small change gives minor chords a sad, dark, or moody quality. Compare: C major = C-E-G, C minor = C-Eb-G."},{type:"play-chord",title:"Play C Minor",description:"Play C, Eb, and G together. Notice how it sounds darker than C major.",expectedChord:{root:"C",quality:"m",display:"Cm"},hint:"C (60) + Eb (63) + G (67). Eb is the black key between D and E."},{type:"play-chord",title:"Play A Minor",description:"A minor uses only white keys: A, C, E. It's one of the easiest minor chords to play.",expectedChord:{root:"A",quality:"m",display:"Am"},hint:"A (69) + C (72) + E (76)"},{type:"play-chord",title:"Play D Minor",description:"Play D, F, and A together to form a D minor chord.",expectedChord:{root:"D",quality:"m",display:"Dm"},hint:"D (62) + F (65) + A (69)"},{type:"play-chord",title:"Play E Minor",description:"E minor uses E, G, B  all white keys. It's very common in pop and rock music.",expectedChord:{root:"E",quality:"m",display:"Em"},hint:"E (64) + G (67) + B (71)"},{type:"play-chord",title:"Compare: Play C Major",description:"Now play C major (C-E-G) again. Listen to the contrast with the minor chords you just played.",expectedChord:{root:"C",quality:"maj",display:"C"},hint:"C (60) + E (64) + G (67)"},{type:"quiz",title:"Minor Chord Quiz",description:"How does a minor chord differ from a major chord?",quizOptions:[{label:"The 3rd is lowered by 1 semitone",correct:!0},{label:"The 5th is lowered by 1 semitone",correct:!1},{label:"The root is raised by 1 semitone",correct:!1},{label:"An extra note is added",correct:!1}]}],vq={id:dq,title:hq,category:fq,difficulty:pq,estimatedMinutes:mq,description:gq,steps:yq},bq="piano-g-major-scale",xq="G Major Scale",_q="piano",Sq="beginner",wq=5,Cq="Learn the G major scale  your first scale with a sharp note (F#).",Tq=[{type:"info",title:"G Major  One Sharp",description:"The G major scale follows the same whole-whole-half-whole-whole-whole-half pattern as C major, but it starts on G. This means one note changes: F becomes F# (F sharp). The notes are G, A, B, C, D, E, F#."},{type:"play-notes",title:"Find G",description:"Press G4 to start. G is the white key between the first and second keys of the group of three black keys.",expectedNotes:[{midi:67,label:"G4"}],hint:"G4 is MIDI note 67."},{type:"play-notes",title:"Find F# (F Sharp)",description:"F# is the black key between F and G. This is the one sharp in the G major scale.",expectedNotes:[{midi:78,label:"F#5"}],hint:"F#5 is MIDI note 78. It's the black key just below G5."},{type:"play-scale",title:"Play the G Major Scale",description:"Play all 7 notes ascending: G, A, B, C, D, E, F#. Remember  F is replaced by F#!",expectedScale:{root:7,name:"Major",notes:[7,9,11,0,2,4,6]},hint:"All white keys from G to F#, except F becomes F# (the black key)."},{type:"play-chord",title:"Play G Major Chord",description:"Play the G major chord: G, B, D.",expectedChord:{root:"G",quality:"maj",display:"G"},hint:"G (67) + B (71) + D (74)"},{type:"quiz",title:"G Major Quiz",description:"Which note is sharp in the G major scale?",quizOptions:[{label:"C#",correct:!1},{label:"F#",correct:!0},{label:"G#",correct:!1},{label:"B",correct:!1}]}],Eq={id:bq,title:xq,category:_q,difficulty:Sq,estimatedMinutes:wq,description:Cq,steps:Tq},Aq="piano-d-major-scale",kq="D Major Scale",Nq="piano",Mq="intermediate",Rq=6,Dq="Learn the D major scale with two sharps  F# and C#.",Oq=[{type:"info",title:"D Major  Two Sharps",description:"The D major scale has two sharps: F# and C#. The notes are D, E, F#, G, A, B, C#. Each new major scale in the 'sharp direction' adds one more sharp. G major had F#; D major adds C#."},{type:"play-notes",title:"Find D",description:"Press D4. D is the white key between the two black keys.",expectedNotes:[{midi:62,label:"D4"}],hint:"D4 is MIDI note 62."},{type:"play-notes",title:"Find C# and F#",description:"Press C#4 and F#4 together  the two sharps in D major.",expectedNotes:[{midi:61,label:"C#4"},{midi:66,label:"F#4"}],hint:"C#4 is MIDI 61 (black key right of C), F#4 is MIDI 66 (black key right of F)."},{type:"play-scale",title:"Play the D Major Scale",description:"Play all 7 notes ascending: D, E, F#, G, A, B, C#.",expectedScale:{root:2,name:"Major",notes:[2,4,6,7,9,11,1]},hint:"Start on D, play white keys but use F# and C# (the black keys) instead of F and C."},{type:"play-chord",title:"Play D Major Chord",description:"Play D, F#, and A together to form the D major chord.",expectedChord:{root:"D",quality:"maj",display:"D"},hint:"D (62) + F# (66) + A (69)"},{type:"quiz",title:"D Major Quiz",description:"How many sharps does the D major scale have?",quizOptions:[{label:"1",correct:!1},{label:"2",correct:!0},{label:"3",correct:!1},{label:"4",correct:!1}]}],jq={id:Aq,title:kq,category:Nq,difficulty:Mq,estimatedMinutes:Rq,description:Dq,steps:Oq},Pq="piano-natural-minor-scale",Bq="Natural Minor Scale",Iq="piano",Lq="intermediate",Vq=6,zq="Learn the A natural minor scale and its characteristic dark sound.",Fq=[{type:"info",title:"The Natural Minor Scale",description:"The natural minor scale has a darker, sadder sound than the major scale. The formula is: W-H-W-W-H-W-W (whole, half, whole, whole, half, whole, whole). A minor is the simplest  it uses only white keys: A, B, C, D, E, F, G."},{type:"play-notes",title:"Find A",description:"Press A4 to start the A natural minor scale.",expectedNotes:[{midi:69,label:"A4"}],hint:"A4 is MIDI note 69."},{type:"play-scale",title:"Play A Natural Minor",description:"Play all 7 notes ascending: A, B, C, D, E, F, G. All white keys!",expectedScale:{root:9,name:"Natural Minor",notes:[9,11,0,2,4,5,7]},hint:"Start on A and play all white keys up to G."},{type:"play-chord",title:"Play A Minor Chord",description:"Play the A minor chord: A, C, E.",expectedChord:{root:"A",quality:"m",display:"Am"},hint:"A (69) + C (72) + E (76)"},{type:"play-chord",title:"Play D Minor Chord",description:"D minor (D, F, A) is the iv chord in A minor. Play it now.",expectedChord:{root:"D",quality:"m",display:"Dm"},hint:"D (62) + F (65) + A (69)"},{type:"play-chord",title:"Play E Minor Chord",description:"E minor (E, G, B) is the v chord in A minor.",expectedChord:{root:"E",quality:"m",display:"Em"},hint:"E (64) + G (67) + B (71)"},{type:"quiz",title:"Minor Scale Quiz",description:"What is the step pattern of the natural minor scale?",quizOptions:[{label:"W-W-H-W-W-W-H",correct:!1},{label:"W-H-W-W-H-W-W",correct:!0},{label:"H-W-W-H-W-W-W",correct:!1},{label:"W-W-W-H-W-W-H",correct:!1}]}],Hq={id:Pq,title:Bq,category:Iq,difficulty:Lq,estimatedMinutes:Vq,description:zq,steps:Fq},Uq="piano-pentatonic-scales",Gq="Pentatonic Scales",qq="piano",Wq="intermediate",$q=7,Yq="Learn major and minor pentatonic scales  the most widely used scales in popular music.",Kq=[{type:"info",title:"What is Pentatonic?",description:"'Penta' means five. Pentatonic scales use only 5 notes instead of 7. By removing the two 'tension' notes from a major or minor scale, you get a scale that sounds good no matter what order you play the notes. That's why pentatonic scales are used in rock, blues, pop, country, and folk music worldwide."},{type:"play-scale",title:"C Major Pentatonic",description:"Play the C major pentatonic scale: C, D, E, G, A. Notice that F and B are removed  these are the notes that create the most tension in the major scale.",expectedScale:{root:0,name:"Pentatonic Major",notes:[0,2,4,7,9]},hint:"C (60), D (62), E (64), G (67), A (69)  skip F and B."},{type:"play-scale",title:"A Minor Pentatonic",description:"Play the A minor pentatonic scale: A, C, D, E, G. This is the most popular scale for guitar and keyboard solos!",expectedScale:{root:9,name:"Pentatonic Minor",notes:[9,0,2,4,7]},hint:"A (69), C (72), D (74), E (76), G (79)"},{type:"info",title:"A Secret Connection",description:"C major pentatonic and A minor pentatonic contain the exact same notes! C-D-E-G-A = A-C-D-E-G. They're called 'relative' scales. The difference is which note feels like 'home'  C for major, A for minor."},{type:"play-scale",title:"G Major Pentatonic",description:"Play the G major pentatonic: G, A, B, D, E.",expectedScale:{root:7,name:"Pentatonic Major",notes:[7,9,11,2,4]},hint:"G (67), A (69), B (71), D (74), E (76)"},{type:"quiz",title:"Pentatonic Quiz",description:"How many notes are in a pentatonic scale?",quizOptions:[{label:"4",correct:!1},{label:"5",correct:!0},{label:"6",correct:!1},{label:"7",correct:!1}]}],Xq={id:Uq,title:Gq,category:qq,difficulty:Wq,estimatedMinutes:$q,description:Yq,steps:Kq},Qq="piano-blues-scale",Zq="The Blues Scale",Jq="piano",e9="intermediate",t9=6,n9="Learn the blues scale and its signature 'blue note' that gives blues music its distinctive sound.",s9=[{type:"info",title:"The Blue Note",description:"The blues scale is a minor pentatonic scale with one extra note added: the 'blue note' (a diminished 5th / augmented 4th). This note creates the characteristic tension and expressiveness of blues music. In A blues: A, C, D, Eb, E, G."},{type:"play-scale",title:"Play A Blues Scale",description:"Play the A blues scale: A, C, D, Eb, E, G. Listen for the tension when you hit Eb (the blue note) and how it resolves up to E.",expectedScale:{root:9,name:"Blues",notes:[9,0,2,3,4,7]},hint:"A (69), C (72), D (74), Eb (75), E (76), G (79). Eb is the black key between D and E."},{type:"play-notes",title:"Feel the Blue Note",description:"Play D and Eb together. This dissonant half-step is the heart of the blues sound.",expectedNotes:[{midi:74,label:"D5"},{midi:75,label:"Eb5"}],hint:"D5 (74) and Eb5 (75) are right next to each other."},{type:"play-scale",title:"Play C Blues Scale",description:"Now try the C blues scale: C, Eb, F, Gb, G, Bb.",expectedScale:{root:0,name:"Blues",notes:[0,3,5,6,7,10]},hint:"C (60), Eb (63), F (65), Gb (66), G (67), Bb (70)"},{type:"play-chord",title:"Blues Tonic Chord",description:"Play A minor  the home chord for the A blues scale.",expectedChord:{root:"A",quality:"m",display:"Am"},hint:"A (69) + C (72) + E (76)"},{type:"quiz",title:"Blues Quiz",description:"What is the 'blue note' in the A blues scale?",quizOptions:[{label:"C",correct:!1},{label:"D",correct:!1},{label:"Eb",correct:!0},{label:"G",correct:!1}]}],i9={id:Qq,title:Zq,category:Jq,difficulty:e9,estimatedMinutes:t9,description:n9,steps:s9},r9="piano-seventh-chords",a9="Seventh Chords",o9="piano",l9="intermediate",c9=8,u9="Learn dominant 7th, major 7th, and minor 7th chords  adding richness and color to your harmony.",d9=[{type:"info",title:"Adding the 7th",description:`Seventh chords add a fourth note on top of a triad. There are three main types:

 Dominant 7th (C7): major triad + minor 7th  bluesy, wants to resolve
 Major 7th (Cmaj7): major triad + major 7th  smooth, jazzy
 Minor 7th (Cm7): minor triad + minor 7th  warm, mellow`},{type:"play-chord",title:"Play C7 (Dominant 7th)",description:"Play C, E, G, Bb. The dominant 7th has a strong 'pull'  it wants to resolve to the I chord (F major).",expectedChord:{root:"C",quality:"7",display:"C7"},hint:"C (60) + E (64) + G (67) + Bb (70)"},{type:"play-chord",title:"Play Cmaj7 (Major 7th)",description:"Play C, E, G, B. The major 7th sounds dreamy and sophisticated.",expectedChord:{root:"C",quality:"maj7",display:"Cmaj7"},hint:"C (60) + E (64) + G (67) + B (71). Note: B natural, not Bb!"},{type:"play-chord",title:"Play Cm7 (Minor 7th)",description:"Play C, Eb, G, Bb. Minor 7th chords have a warm, soulful quality.",expectedChord:{root:"C",quality:"m7",display:"Cm7"},hint:"C (60) + Eb (63) + G (67) + Bb (70)"},{type:"play-chord",title:"Play G7 (Dominant 7th)",description:"G7 is the most important dominant chord in the key of C. Play G, B, D, F.",expectedChord:{root:"G",quality:"7",display:"G7"},hint:"G (67) + B (71) + D (74) + F (77)"},{type:"info",title:"Dominant Resolution",description:"The dominant 7th chord (V7) creates tension that resolves beautifully to the I chord. Try playing G7  C major. This V7  I movement is the strongest resolution in music and ends almost every classical piece."},{type:"quiz",title:"Seventh Chord Quiz",description:"What type of 7th chord is built with a major triad and a minor 7th?",quizOptions:[{label:"Major 7th",correct:!1},{label:"Minor 7th",correct:!1},{label:"Dominant 7th",correct:!0},{label:"Diminished 7th",correct:!1}]}],h9={id:r9,title:a9,category:o9,difficulty:l9,estimatedMinutes:c9,description:u9,steps:d9},f9="piano-sus-and-dim-chords",p9="Sus & Diminished Chords",m9="piano",g9="intermediate",y9=7,v9="Learn suspended and diminished chords  tension-building chords that add drama to your music.",b9=[{type:"info",title:"Beyond Major and Minor",description:`Suspended (sus) chords replace the 3rd with another note, creating an 'unresolved' tension:

 Sus4: the 3rd moves up to the 4th
 Sus2: the 3rd moves down to the 2nd

Diminished chords stack two minor 3rds, creating an unstable, tense sound that wants to resolve.`},{type:"play-chord",title:"Play Csus4",description:"Play C, F, G. The sus4 chord feels 'suspended'  it wants to fall back to C major.",expectedChord:{root:"C",quality:"sus4",display:"Csus4"},hint:"C (60) + F (65) + G (67). F replaces E."},{type:"play-chord",title:"Resolve to C Major",description:"Now play C major (C, E, G). Hear how the tension of sus4 resolves when the F drops down to E.",expectedChord:{root:"C",quality:"maj",display:"C"},hint:"C (60) + E (64) + G (67)"},{type:"play-chord",title:"Play Csus2",description:"Play C, D, G. The sus2 has an open, airy quality  common in rock and pop.",expectedChord:{root:"C",quality:"sus2",display:"Csus2"},hint:"C (60) + D (62) + G (67). D replaces E."},{type:"play-chord",title:"Play B Diminished",description:"Play B, D, F  a diminished triad. It sounds tense and unstable, like something dramatic is about to happen.",expectedChord:{root:"B",quality:"dim",display:"Bdim"},hint:"B (71) + D (74) + F (77). Each interval is a minor 3rd (3 semitones)."},{type:"play-chord",title:"Resolve Diminished to C",description:"Play C major to resolve the tension of B diminished. In the key of C, Bdim naturally leads to C.",expectedChord:{root:"C",quality:"maj",display:"C"},hint:"C (60) + E (64) + G (67)"},{type:"quiz",title:"Sus & Dim Quiz",description:"In a sus4 chord, what replaces the 3rd?",quizOptions:[{label:"The 2nd",correct:!1},{label:"The 4th",correct:!0},{label:"The 5th",correct:!1},{label:"The 7th",correct:!1}]}],x9={id:f9,title:p9,category:m9,difficulty:g9,estimatedMinutes:y9,description:v9,steps:b9},_9="piano-chord-progressions",S9="Chord Progressions",w9="piano",C9="intermediate",T9=8,E9="Learn the most popular chord progressions in music  I-V-vi-IV and I-vi-IV-V.",A9=[{type:"info",title:"What is a Chord Progression?",description:`A chord progression is a sequence of chords played in order. In the key of C major, the chords are numbered with Roman numerals:

 I = C (major)
 ii = Dm (minor)
 iii = Em (minor)
 IV = F (major)
 V = G (major)
 vi = Am (minor)
 vii = Bdim

Most pop songs use just 3-4 of these chords!`},{type:"info",title:"The 'Four Chord Song'",description:"The I-V-vi-IV progression (C-G-Am-F) is the most used chord progression in pop music. Songs like 'Let It Be', 'No Woman No Cry', 'With or Without You', and hundreds more use this exact sequence."},{type:"play-chord",title:"Step 1: Play C (I)",description:"Start the progression with C major  the 'home' chord.",expectedChord:{root:"C",quality:"maj",display:"C"},hint:"C (60) + E (64) + G (67)"},{type:"play-chord",title:"Step 2: Play G (V)",description:"Move to G major  the dominant chord.",expectedChord:{root:"G",quality:"maj",display:"G"},hint:"G (67) + B (71) + D (74)"},{type:"play-chord",title:"Step 3: Play Am (vi)",description:"Now A minor  the relative minor. This gives the progression its emotional contrast.",expectedChord:{root:"A",quality:"m",display:"Am"},hint:"A (69) + C (72) + E (76)"},{type:"play-chord",title:"Step 4: Play F (IV)",description:"Finish with F major  the subdominant. Then the progression loops back to C.",expectedChord:{root:"F",quality:"maj",display:"F"},hint:"F (65) + A (69) + C (72)"},{type:"info",title:"The '50s Progression'",description:"The I-vi-IV-V progression (C-Am-F-G) is another classic. It was hugely popular in the 1950s and 60s ('Stand By Me', 'Earth Angel'). It starts the same but puts the minor chord second, creating a different emotional arc."},{type:"quiz",title:"Progression Quiz",description:"In the key of C, what is the vi chord?",quizOptions:[{label:"F major",correct:!1},{label:"G major",correct:!1},{label:"A minor",correct:!0},{label:"D minor",correct:!1}]}],k9={id:_9,title:S9,category:w9,difficulty:C9,estimatedMinutes:T9,description:E9,steps:A9},N9="drums-basic-rock-beat",M9="Basic Rock Beat",R9="drums",D9="beginner",O9=5,j9="Learn the foundational rock drum pattern using kick, snare, and hi-hat.",P9=[{type:"info",title:"The Rock Beat",description:"The basic rock beat is the most common drum pattern in popular music. It uses three sounds: Kick drum (the low thump), Snare drum (the sharp crack), and Hi-hat (the ticking cymbal)."},{type:"play-drums",title:"Hit the Kick",description:"Find and hit the Kick drum pad (KCK).",expectedDrumPattern:{pads:[0]},hint:"The Kick drum is the red pad labeled KCK."},{type:"play-drums",title:"Hit the Snare",description:"Now hit the Snare drum pad (SNR).",expectedDrumPattern:{pads:[1]},hint:"The Snare is the orange pad labeled SNR."},{type:"play-drums",title:"Hit the Hi-Hat",description:"Hit the Closed Hi-hat pad (CHH).",expectedDrumPattern:{pads:[2]},hint:"The Closed Hi-hat is the green pad labeled CHH."},{type:"play-drums",title:"Kick + Hi-Hat Together",description:"Play the Kick and Closed Hi-hat at the same time. This is beat 1 of the rock pattern.",expectedDrumPattern:{pads:[0,2]},hint:"Hit both KCK and CHH simultaneously."},{type:"play-drums",title:"Snare + Hi-Hat Together",description:"Play the Snare and Closed Hi-hat together. This is beats 2 and 4 of the rock pattern.",expectedDrumPattern:{pads:[1,2]},hint:"Hit both SNR and CHH simultaneously."},{type:"quiz",title:"Quick Quiz",description:"In a basic rock beat, the snare typically falls on which beats?",quizOptions:[{label:"1 and 3",correct:!1},{label:"2 and 4",correct:!0},{label:"1 and 2",correct:!1},{label:"Every beat",correct:!1}]}],B9={id:N9,title:M9,category:R9,difficulty:D9,estimatedMinutes:O9,description:j9,steps:P9},I9="drums-know-your-kit",L9="Know Your Kit",V9="drums",z9="beginner",F9=5,H9="Explore all 8 drum pads and learn what each percussion sound is used for.",U9=[{type:"info",title:"Your Drum Kit",description:`A standard drum kit has several key pieces. In Micro DAW, you have 8 pads:

 KCK (Kick)  the deep bass drum, played with a foot pedal
 SNR (Snare)  the sharp crack that drives the beat
 CHH (Closed Hi-hat)  tight, ticking cymbal for rhythm
 OHH (Open Hi-hat)  looser, ringing cymbal
 CLP (Clap)  a hand clap accent
 TOM (Tom)  mid-pitched drum for fills
 CRS (Crash)  loud cymbal for accents
 RDE (Ride)  steady cymbal for keeping time`},{type:"play-drums",title:"Hit the Kick",description:"The kick drum is the foundation of every beat. Hit the KCK pad.",expectedDrumPattern:{pads:[0]},hint:"KCK is pad 0  the red pad."},{type:"play-drums",title:"Hit the Snare",description:"The snare drum provides the 'crack' on beats 2 and 4. Hit the SNR pad.",expectedDrumPattern:{pads:[1]},hint:"SNR is pad 1  the orange pad."},{type:"play-drums",title:"Hit the Closed Hi-hat",description:"The closed hi-hat keeps the pulse going with a tight 'tick' sound. Hit CHH.",expectedDrumPattern:{pads:[2]},hint:"CHH is pad 2."},{type:"play-drums",title:"Hit the Open Hi-hat",description:"The open hi-hat has a longer, ringing sound. It adds variety to hi-hat patterns. Hit OHH.",expectedDrumPattern:{pads:[3]},hint:"OHH is pad 3."},{type:"play-drums",title:"Hit the Clap",description:"Claps are used in pop, hip-hop, and electronic music  often layered with or replacing the snare. Hit CLP.",expectedDrumPattern:{pads:[4]},hint:"CLP is pad 4."},{type:"play-drums",title:"Hit the Tom",description:"Toms are used for drum fills  the exciting transitions between sections. Hit TOM.",expectedDrumPattern:{pads:[5]},hint:"TOM is pad 5."},{type:"play-drums",title:"Hit the Crash",description:"Crash cymbals mark the beginning of new sections with a loud, explosive sound. Hit CRS.",expectedDrumPattern:{pads:[6]},hint:"CRS is pad 6."},{type:"play-drums",title:"Hit the Ride",description:"The ride cymbal provides a steady, shimmering pulse. It's often used instead of hi-hats. Hit RDE.",expectedDrumPattern:{pads:[7]},hint:"RDE is pad 7."},{type:"quiz",title:"Kit Quiz",description:"Which drum provides the deep, low foundation of a beat?",quizOptions:[{label:"Snare",correct:!1},{label:"Kick",correct:!0},{label:"Tom",correct:!1},{label:"Ride",correct:!1}]}],G9={id:I9,title:L9,category:V9,difficulty:z9,estimatedMinutes:F9,description:H9,steps:U9},q9="drums-kick-snare-patterns",W9="Kick & Snare Patterns",$9="drums",Y9="beginner",K9=6,X9="Learn different kick and snare combinations  the backbone of every drum beat.",Q9=[{type:"info",title:"The Core of Every Beat",description:"The kick and snare are the two most important drums. The kick provides the low-end pulse, while the snare gives the sharp 'crack'. Together, they define the feel and groove of a beat. Let's explore different ways to combine them."},{type:"play-drums",title:"Kick Alone",description:"Start with just the kick drum. In most beats, the kick falls on beat 1.",expectedDrumPattern:{pads:[0]},hint:"Hit the KCK pad."},{type:"play-drums",title:"Snare Alone",description:"Now just the snare. The snare typically falls on beats 2 and 4 (the 'backbeat').",expectedDrumPattern:{pads:[1]},hint:"Hit the SNR pad."},{type:"play-drums",title:"Kick + Snare Together",description:"Play kick and snare at the same time. This powerful combination is used at the climax of fills and transitions.",expectedDrumPattern:{pads:[0,1]},hint:"Hit KCK and SNR simultaneously."},{type:"play-drums",title:"Kick + Clap Combo",description:"In many pop and hip-hop beats, the clap layers with or replaces the snare. Play kick and clap together.",expectedDrumPattern:{pads:[0,4]},hint:"Hit KCK and CLP simultaneously."},{type:"play-drums",title:"Snare + Clap Layer",description:"Layering snare and clap creates a thicker, more powerful backbeat. Play them together.",expectedDrumPattern:{pads:[1,4]},hint:"Hit SNR and CLP simultaneously."},{type:"quiz",title:"Backbeat Quiz",description:"On which beats does the snare typically fall in a standard 4/4 beat?",quizOptions:[{label:"1 and 3",correct:!1},{label:"2 and 4",correct:!0},{label:"1 and 2",correct:!1},{label:"3 and 4",correct:!1}]}],Z9={id:q9,title:W9,category:$9,difficulty:Y9,estimatedMinutes:K9,description:X9,steps:Q9},J9="drums-hi-hat-variations",eW="Hi-Hat Variations",tW="drums",nW="beginner",sW=5,iW="Explore closed and open hi-hat sounds and learn to combine them with kick and snare.",rW=[{type:"info",title:"Closed vs Open Hi-Hat",description:"The hi-hat is a pair of cymbals on a stand. When pressed together (closed), it makes a tight 'tick'. When released (open), it rings out with a 'tsss' sound. Switching between closed and open hi-hat adds movement and energy to a beat."},{type:"play-drums",title:"Closed Hi-Hat",description:"Hit the closed hi-hat (CHH). This tight, short sound is the most common hi-hat pattern.",expectedDrumPattern:{pads:[2]},hint:"CHH is pad 2."},{type:"play-drums",title:"Open Hi-Hat",description:"Now hit the open hi-hat (OHH). Notice how it rings out much longer.",expectedDrumPattern:{pads:[3]},hint:"OHH is pad 3."},{type:"play-drums",title:"Kick + Closed Hi-Hat",description:"This is the most basic beat 1 pattern: kick with closed hi-hat.",expectedDrumPattern:{pads:[0,2]},hint:"Hit KCK and CHH at the same time."},{type:"play-drums",title:"Snare + Closed Hi-Hat",description:"Beats 2 and 4 in rock: snare with closed hi-hat.",expectedDrumPattern:{pads:[1,2]},hint:"Hit SNR and CHH at the same time."},{type:"play-drums",title:"Kick + Open Hi-Hat",description:"Kick with open hi-hat creates a more energetic, driving feel. Common before a snare hit.",expectedDrumPattern:{pads:[0,3]},hint:"Hit KCK and OHH at the same time."},{type:"quiz",title:"Hi-Hat Quiz",description:"What's the difference between closed and open hi-hat?",quizOptions:[{label:"Closed is tight/short, open rings out",correct:!0},{label:"Closed is louder than open",correct:!1},{label:"Open is played with a stick, closed by foot",correct:!1},{label:"They sound the same",correct:!1}]}],aW={id:J9,title:eW,category:tW,difficulty:nW,estimatedMinutes:sW,description:iW,steps:rW},oW="drums-ride-cymbal",lW="The Ride Cymbal",cW="drums",uW="beginner",dW=5,hW="Learn to use the ride cymbal as a timekeeper and combine it with kick and snare.",fW=[{type:"info",title:"The Ride Cymbal",description:"The ride cymbal is a large cymbal used for keeping time, similar to the hi-hat but with a more open, shimmering sound. It's commonly used in jazz, ballads, and the quieter sections of rock songs. Switching from hi-hat to ride changes the entire feel of a beat."},{type:"play-drums",title:"Hit the Ride",description:"Hit the ride cymbal (RDE). Listen to its sustained, shimmering tone.",expectedDrumPattern:{pads:[7]},hint:"RDE is pad 7."},{type:"play-drums",title:"Ride + Kick",description:"Play the ride and kick together. This is the foundation of a jazz-style beat.",expectedDrumPattern:{pads:[0,7]},hint:"Hit KCK and RDE simultaneously."},{type:"play-drums",title:"Ride + Snare",description:"Play the ride and snare together for the backbeat with ride.",expectedDrumPattern:{pads:[1,7]},hint:"Hit SNR and RDE simultaneously."},{type:"play-drums",title:"Ride + Kick + Snare",description:"All three together  ride keeping time with both kick and snare. This is a full beat pattern.",expectedDrumPattern:{pads:[0,1,7]},hint:"Hit KCK, SNR, and RDE all at the same time."},{type:"quiz",title:"Ride Quiz",description:"In which genre is the ride cymbal most commonly used for timekeeping?",quizOptions:[{label:"Heavy metal",correct:!1},{label:"Jazz",correct:!0},{label:"Punk rock",correct:!1},{label:"EDM",correct:!1}]}],pW={id:oW,title:lW,category:cW,difficulty:uW,estimatedMinutes:dW,description:hW,steps:fW},mW="drums-crash-accents",gW="Crash Accents",yW="drums",vW="beginner",bW=5,xW="Learn to use crash cymbals to mark section changes and add dramatic accents.",_W=[{type:"info",title:"The Crash Cymbal",description:"The crash cymbal is the loudest, most dramatic sound in the drum kit. It's used to mark important moments: the start of a chorus, the end of a fill, or the first beat of a new section. A well-placed crash makes the music feel bigger and more exciting."},{type:"play-drums",title:"Hit the Crash",description:"Hit the crash cymbal (CRS). Feel its explosive energy!",expectedDrumPattern:{pads:[6]},hint:"CRS is pad 6."},{type:"play-drums",title:"Crash + Kick",description:"The most common crash pattern: crash and kick together on beat 1 of a new section. This combo is powerful and definitive.",expectedDrumPattern:{pads:[0,6]},hint:"Hit KCK and CRS simultaneously."},{type:"play-drums",title:"Crash + Kick + Snare",description:"For maximum impact, add the snare too. This triple hit is used at the biggest moments in a song.",expectedDrumPattern:{pads:[0,1,6]},hint:"Hit KCK, SNR, and CRS all at once."},{type:"play-drums",title:"Crash + Ride (Cymbal Wash)",description:"Crash and ride together create a 'cymbal wash' effect  a wall of shimmering sound.",expectedDrumPattern:{pads:[6,7]},hint:"Hit CRS and RDE simultaneously."},{type:"quiz",title:"Crash Quiz",description:"When is the crash cymbal most commonly used?",quizOptions:[{label:"On every beat",correct:!1},{label:"Only during quiet sections",correct:!1},{label:"At the start of new sections",correct:!0},{label:"Only at the end of songs",correct:!1}]}],SW={id:mW,title:gW,category:yW,difficulty:vW,estimatedMinutes:bW,description:xW,steps:_W},wW="drums-tom-fills",CW="Tom Fills",TW="drums",EW="intermediate",AW=6,kW="Learn to create drum fills using toms  the exciting transitions between sections.",NW=[{type:"info",title:"What is a Fill?",description:"A drum fill is a short break from the main beat, usually lasting 1-2 beats. Fills use toms, snare, and crash to create excitement and signal transitions. Think of fills as punctuation marks in your drumming  they tell the listener 'something new is coming!'"},{type:"play-drums",title:"Tom Alone",description:"Hit the tom. Toms have a melodic, resonant quality between the snare and kick.",expectedDrumPattern:{pads:[5]},hint:"TOM is pad 5."},{type:"play-drums",title:"Snare to Tom",description:"A classic fill move: snare then tom. Play them together here to practice the combination.",expectedDrumPattern:{pads:[1,5]},hint:"Hit SNR and TOM simultaneously."},{type:"play-drums",title:"Tom + Kick",description:"Tom with kick adds weight to the fill. This is often used at the bottom of a descending fill.",expectedDrumPattern:{pads:[0,5]},hint:"Hit KCK and TOM simultaneously."},{type:"play-drums",title:"Fill Ending: Tom + Crash",description:"A fill often ends with a crash on beat 1 of the next section. Play tom and crash together.",expectedDrumPattern:{pads:[5,6]},hint:"Hit TOM and CRS simultaneously."},{type:"play-drums",title:"Big Fill Ending",description:"The ultimate fill ending: kick + crash together. This marks the transition point from fill back to the groove.",expectedDrumPattern:{pads:[0,6]},hint:"Hit KCK and CRS simultaneously."},{type:"quiz",title:"Fill Quiz",description:"What is the purpose of a drum fill?",quizOptions:[{label:"To keep the beat steady",correct:!1},{label:"To signal transitions between sections",correct:!0},{label:"To make the song quieter",correct:!1},{label:"To replace the bass guitar",correct:!1}]}],MW={id:wW,title:CW,category:TW,difficulty:EW,estimatedMinutes:AW,description:kW,steps:NW},RW="drums-pop-beat",DW="Pop Beat",OW="drums",jW="intermediate",PW=6,BW="Learn clap-based pop drum patterns used in modern pop and electronic music.",IW=[{type:"info",title:"The Pop Beat",description:"Modern pop music often uses claps instead of (or layered with) snares for the backbeat. The hi-hat patterns tend to be simpler, and the kick patterns are more syncopated. Let's build a typical pop beat step by step."},{type:"play-drums",title:"Clap Backbeat",description:"In pop, the clap often replaces the snare. Hit the clap pad.",expectedDrumPattern:{pads:[4]},hint:"CLP is pad 4."},{type:"play-drums",title:"Kick + Clap",description:"The core of a pop beat: kick and clap together. This thick combo drives the groove.",expectedDrumPattern:{pads:[0,4]},hint:"Hit KCK and CLP simultaneously."},{type:"play-drums",title:"Clap + Closed Hi-Hat",description:"Add the hi-hat to the clap for the backbeat rhythm.",expectedDrumPattern:{pads:[2,4]},hint:"Hit CHH and CLP simultaneously."},{type:"play-drums",title:"Snare + Clap Layer",description:"For an even bigger backbeat, layer the snare under the clap.",expectedDrumPattern:{pads:[1,4]},hint:"Hit SNR and CLP at the same time."},{type:"play-drums",title:"Full Pop Hit: Kick + Clap + Hi-Hat",description:"The full pop beat accent: kick, clap, and hi-hat together.",expectedDrumPattern:{pads:[0,2,4]},hint:"Hit KCK, CHH, and CLP all at once."},{type:"quiz",title:"Pop Beat Quiz",description:"In modern pop, what often replaces the snare for the backbeat?",quizOptions:[{label:"Tom",correct:!1},{label:"Crash",correct:!1},{label:"Clap",correct:!0},{label:"Ride",correct:!1}]}],LW={id:RW,title:DW,category:OW,difficulty:jW,estimatedMinutes:PW,description:BW,steps:IW},VW="drums-three-piece-combos",zW="Three-Piece Combos",FW="drums",HW="intermediate",UW=6,GW="Practice hitting 3-4 pads simultaneously for powerful drum combinations.",qW=[{type:"info",title:"Multi-Pad Hits",description:"As you get more comfortable with the drum kit, you'll want to play more pads at once. Real drummers use both hands and both feet simultaneously. Let's practice hitting 3 and 4 pads together for powerful, full-sounding drum hits."},{type:"play-drums",title:"Kick + Snare + Hi-Hat",description:"The classic full rock hit. This combination on beat 1 is powerful and driving.",expectedDrumPattern:{pads:[0,1,2]},hint:"Hit KCK, SNR, and CHH all at once."},{type:"play-drums",title:"Kick + Snare + Crash",description:"The big section starter  kick, snare, and crash together for maximum impact.",expectedDrumPattern:{pads:[0,1,6]},hint:"Hit KCK, SNR, and CRS all at once."},{type:"play-drums",title:"Kick + Clap + Open Hi-Hat",description:"A modern pop/electronic combination. The open hi-hat adds energy.",expectedDrumPattern:{pads:[0,3,4]},hint:"Hit KCK, OHH, and CLP all at once."},{type:"play-drums",title:"Snare + Tom + Crash",description:"A fill-ending combo. Snare and tom lead into the crash.",expectedDrumPattern:{pads:[1,5,6]},hint:"Hit SNR, TOM, and CRS all at once."},{type:"play-drums",title:"Kick + Snare + Crash + Hi-Hat",description:"The ultimate 4-way hit  used at the biggest moments. This requires coordination!",expectedDrumPattern:{pads:[0,1,2,6]},hint:"Hit KCK, SNR, CHH, and CRS all at the same time."},{type:"quiz",title:"Combo Quiz",description:"Which combination creates the biggest impact at the start of a chorus?",quizOptions:[{label:"Hi-hat alone",correct:!1},{label:"Kick + Ride",correct:!1},{label:"Kick + Snare + Crash",correct:!0},{label:"Tom + Clap",correct:!1}]}],WW={id:VW,title:zW,category:FW,difficulty:HW,estimatedMinutes:UW,description:GW,steps:qW},$W="drums-genre-beats",YW="Genre Beats",KW="drums",XW="intermediate",QW=8,ZW="Explore the signature drum feels of rock, hip-hop, jazz, and electronic music.",JW=[{type:"info",title:"Drums Define the Genre",description:"Different music genres have distinctive drum patterns. By changing which pads you emphasize and how you combine them, you can shift between rock, hip-hop, jazz, and electronic feels. Let's explore the key combinations for each genre."},{type:"info",title:"Rock: Power and Drive",description:"Rock uses kick, snare, and hi-hat as the core. The kick is strong on 1 and 3, the snare punches on 2 and 4, and the hi-hat keeps a steady pulse. Crashes mark transitions."},{type:"play-drums",title:"Rock Feel: Kick + Hi-Hat",description:"Beat 1 of a rock pattern: kick with closed hi-hat.",expectedDrumPattern:{pads:[0,2]},hint:"Hit KCK and CHH together."},{type:"info",title:"Hip-Hop: Boom-Clap",description:"Hip-hop emphasizes the kick and clap/snare. Patterns are often sparser, with a heavy kick and sharp clap. Open hi-hats add swing."},{type:"play-drums",title:"Hip-Hop Feel: Kick + Clap + Open HH",description:"A hip-hop accent: kick, clap, and open hi-hat together.",expectedDrumPattern:{pads:[0,3,4]},hint:"Hit KCK, OHH, and CLP together."},{type:"info",title:"Jazz: Ride and Swing",description:"Jazz features the ride cymbal as the primary timekeeper. The kick is soft and 'feathered'. Cross-stick snare patterns and brush strokes create a smooth, swinging feel."},{type:"play-drums",title:"Jazz Feel: Kick + Ride",description:"The jazz foundation: a light kick with the ride cymbal.",expectedDrumPattern:{pads:[0,7]},hint:"Hit KCK and RDE together."},{type:"info",title:"Electronic: Layers and Energy",description:"Electronic music layers many sounds together. Kick and clap are core, with both closed and open hi-hats, and crash cymbals for builds."},{type:"play-drums",title:"Electronic Feel: Kick + Clap + CHH",description:"A typical electronic beat accent.",expectedDrumPattern:{pads:[0,2,4]},hint:"Hit KCK, CHH, and CLP together."},{type:"quiz",title:"Genre Quiz",description:"Which cymbal is the primary timekeeper in jazz drumming?",quizOptions:[{label:"Closed Hi-hat",correct:!1},{label:"Crash",correct:!1},{label:"Ride",correct:!0},{label:"Open Hi-hat",correct:!1}]}],e$={id:$W,title:YW,category:KW,difficulty:XW,estimatedMinutes:QW,description:ZW,steps:JW},t$="drums-dynamics-and-layers",n$="Dynamics & Layers",s$="drums",i$="intermediate",r$=7,a$="Learn to build drum patterns from sparse to dense, creating energy and dynamics.",o$=[{type:"info",title:"Building Dynamics",description:"Great drumming isn't just about playing the right notes  it's about dynamics. Starting sparse and gradually adding more elements creates excitement and forward motion. Think of it like building a wall: start with the foundation and add bricks one layer at a time."},{type:"play-drums",title:"Layer 1: Kick Only",description:"Start with just the kick  the sparse foundation. This is the quietest, most minimal beat.",expectedDrumPattern:{pads:[0]},hint:"Just the KCK pad."},{type:"play-drums",title:"Layer 2: Add Hi-Hat",description:"Add the closed hi-hat to the kick. Now there's a pulse and a rhythm.",expectedDrumPattern:{pads:[0,2]},hint:"KCK and CHH together."},{type:"play-drums",title:"Layer 3: Add Snare",description:"Add the snare on top. Now you have a full basic beat: kick, hi-hat, and snare.",expectedDrumPattern:{pads:[0,1,2]},hint:"KCK, SNR, and CHH together."},{type:"play-drums",title:"Layer 4: Add Open Hi-Hat",description:"Swap in the open hi-hat for more energy. Kick, snare, and open hat.",expectedDrumPattern:{pads:[0,1,3]},hint:"KCK, SNR, and OHH together."},{type:"play-drums",title:"Layer 5: Full Energy",description:"Maximum energy: kick, snare, open hi-hat, and crash. This is the climactic moment!",expectedDrumPattern:{pads:[0,1,3,6]},hint:"Hit KCK, SNR, OHH, and CRS all at once."},{type:"play-drums",title:"Strip Back: Minimal Again",description:"After the climax, strip back to just the ride for contrast. Dynamics are about contrast!",expectedDrumPattern:{pads:[7]},hint:"Just the RDE pad  quiet and shimmering."},{type:"quiz",title:"Dynamics Quiz",description:"What is the best way to build energy in a drum pattern?",quizOptions:[{label:"Play the same pattern louder",correct:!1},{label:"Gradually add more elements/layers",correct:!0},{label:"Speed up the tempo",correct:!1},{label:"Only use crash cymbals",correct:!1}]}],l$={id:t$,title:n$,category:s$,difficulty:i$,estimatedMinutes:r$,description:a$,steps:o$},c$="theory-intervals",u$="Musical Intervals",d$="theory",h$="beginner",f$=5,p$="Learn about the distances between notes  the building blocks of chords and melodies.",m$=[{type:"info",title:"What are Intervals?",description:"An interval is the distance between two notes, measured in semitones (half-steps). A semitone is the smallest step on a piano  from any key to the very next key (including black keys). Understanding intervals is key to understanding chords, scales, and harmony."},{type:"info",title:"Common Intervals",description:`Here are the most important intervals:

 Unison (0 semitones)  same note
 Minor 2nd (1)  tension, dissonance
 Major 2nd (2)  a whole step
 Minor 3rd (3)  sad, dark feeling
 Major 3rd (4)  happy, bright feeling
 Perfect 4th (5)  open, strong
 Perfect 5th (7)  very stable, powerful
 Octave (12)  same note, higher pitch`},{type:"play-notes",title:"Play a Major 3rd",description:"Play C and E together. This is a Major 3rd  4 semitones apart. It sounds bright and happy.",expectedNotes:[{midi:60,label:"C4"},{midi:64,label:"E4"}],hint:"C is MIDI 60, E is MIDI 64. They are 4 semitones apart."},{type:"play-notes",title:"Play a Perfect 5th",description:"Play C and G together. This is a Perfect 5th  7 semitones apart. It sounds open and powerful.",expectedNotes:[{midi:60,label:"C4"},{midi:67,label:"G4"}],hint:"C is MIDI 60, G is MIDI 67."},{type:"quiz",title:"Interval Quiz",description:"How many semitones are in a Perfect 5th?",quizOptions:[{label:"5",correct:!1},{label:"6",correct:!1},{label:"7",correct:!0},{label:"8",correct:!1}]},{type:"quiz",title:"Major vs Minor 3rd",description:"A Major 3rd has how many semitones?",quizOptions:[{label:"2",correct:!1},{label:"3",correct:!1},{label:"4",correct:!0},{label:"5",correct:!1}]}],g$={id:c$,title:u$,category:d$,difficulty:h$,estimatedMinutes:f$,description:p$,steps:m$},y$="theory-semitones-and-tones",v$="Semitones & Tones",b$="theory",x$="beginner",_$=5,S$="Understand half steps and whole steps  the smallest building blocks of music.",w$=[{type:"info",title:"The Smallest Step",description:"A semitone (half step) is the smallest distance between two notes on a piano. It's the distance from any key to the very next key  including black keys. A tone (whole step) equals two semitones. These are the building blocks of every scale and melody."},{type:"play-notes",title:"A Semitone: C to C#",description:"Play C and C# together. This is one semitone  the smallest possible interval.",expectedNotes:[{midi:60,label:"C4"},{midi:61,label:"C#4"}],hint:"C (60) and C# (61) are right next to each other."},{type:"play-notes",title:"A Semitone: E to F",description:"E to F is also a semitone  but between two white keys! There's no black key between E and F.",expectedNotes:[{midi:64,label:"E4"},{midi:65,label:"F4"}],hint:"E and F are adjacent white keys with no black key between them."},{type:"play-notes",title:"A Whole Tone: C to D",description:"Play C and D together. This is a whole tone (2 semitones). Notice the black key (C#) in between.",expectedNotes:[{midi:60,label:"C4"},{midi:62,label:"D4"}],hint:"C (60) and D (62) have C# between them."},{type:"info",title:"Natural Half Steps",description:`On the piano, there are two places where white keys are only a semitone apart (no black key between them):

 E to F
 B to C

All other adjacent white keys are a whole tone apart. This is why the piano keyboard has its distinctive pattern of black key groups!`},{type:"play-notes",title:"The Other Natural Half Step: B to C",description:"Play B and C together  the other natural semitone. B to C has no black key between them.",expectedNotes:[{midi:71,label:"B4"},{midi:72,label:"C5"}],hint:"B4 (71) and C5 (72) are adjacent white keys."},{type:"quiz",title:"Step Quiz",description:"How many semitones are in a whole tone?",quizOptions:[{label:"1",correct:!1},{label:"2",correct:!0},{label:"3",correct:!1},{label:"4",correct:!1}]}],C$={id:y$,title:v$,category:b$,difficulty:x$,estimatedMinutes:_$,description:S$,steps:w$},T$="theory-major-scale-formula",E$="Major Scale Formula",A$="theory",k$="beginner",N$=6,M$="Learn the W-W-H-W-W-W-H pattern that builds every major scale.",R$=[{type:"info",title:"One Formula, Every Key",description:`Every major scale follows the same pattern of whole steps (W) and half steps (H):

W - W - H - W - W - W - H

This formula works from any starting note. If you apply this pattern starting on C, you get all white keys. Starting on G, you get one sharp (F#). The pattern never changes  only the starting note does!`},{type:"play-scale",title:"C Major: The Template",description:"Play C major: C-D-E-F-G-A-B. Follow along: CD (W), DE (W), EF (H), FG (W), GA (W), AB (W), BC (H).",expectedScale:{root:0,name:"Major",notes:[0,2,4,5,7,9,11]},hint:"All white keys from C to B."},{type:"info",title:"Breaking Down the Formula",description:`Let's trace the formula on C:

 C + W = D (skip C#)
 D + W = E (skip D#)
 E + H = F (E to F is naturally a half step!)
 F + W = G (skip F#)
 G + W = A (skip G#)
 A + W = B (skip A#)
 B + H = C (B to C is naturally a half step!)

The two half steps align perfectly with the natural half steps of the keyboard.`},{type:"play-scale",title:"G Major: Apply the Formula",description:"Apply W-W-H-W-W-W-H starting on G: G-A-B-C-D-E-F#. The formula forces F to become F#!",expectedScale:{root:7,name:"Major",notes:[7,9,11,0,2,4,6]},hint:"G to F# using the major scale formula. F becomes F# because AB is W, not ABF."},{type:"play-scale",title:"F Major: Apply the Formula",description:"Apply the formula starting on F: F-G-A-Bb-C-D-E. Here, B becomes Bb!",expectedScale:{root:5,name:"Major",notes:[5,7,9,10,0,2,4]},hint:"F (65), G (67), A (69), Bb (70), C (72), D (74), E (76)"},{type:"quiz",title:"Formula Quiz",description:"What is the major scale formula?",quizOptions:[{label:"W-W-H-W-W-W-H",correct:!0},{label:"W-H-W-W-H-W-W",correct:!1},{label:"H-W-W-H-W-W-W",correct:!1},{label:"W-W-W-H-W-W-H",correct:!1}]}],D$={id:T$,title:E$,category:A$,difficulty:k$,estimatedMinutes:N$,description:M$,steps:R$},O$="theory-minor-scale-formula",j$="Minor Scale Formula",P$="theory",B$="beginner",I$=6,L$="Learn the W-H-W-W-H-W-W pattern that builds every natural minor scale.",V$=[{type:"info",title:"The Minor Scale Pattern",description:`The natural minor scale has its own formula:

W - H - W - W - H - W - W

Compared to the major scale (W-W-H-W-W-W-H), the 3rd, 6th, and 7th notes are lowered by a half step. This gives the minor scale its characteristic dark, sad, or moody sound.`},{type:"play-scale",title:"A Natural Minor",description:"Play A natural minor: A-B-C-D-E-F-G. Like C major, it uses only white keys  but starting on A gives it a minor feel.",expectedScale:{root:9,name:"Natural Minor",notes:[9,11,0,2,4,5,7]},hint:"All white keys from A to G."},{type:"info",title:"Tracing the Formula",description:`Let's trace W-H-W-W-H-W-W on A:

 A + W = B
 B + H = C (natural half step)
 C + W = D
 D + W = E
 E + H = F (natural half step)
 F + W = G
 G + W = A

The formula aligns with the white keys when starting on A.`},{type:"play-scale",title:"D Natural Minor",description:"Apply the formula on D: D-E-F-G-A-Bb-C. One flat: Bb.",expectedScale:{root:2,name:"Natural Minor",notes:[2,4,5,7,9,10,0]},hint:"D (62), E (64), F (65), G (67), A (69), Bb (70), C (72)"},{type:"play-scale",title:"E Natural Minor",description:"Play E natural minor: E-F#-G-A-B-C-D. One sharp: F#.",expectedScale:{root:4,name:"Natural Minor",notes:[4,6,7,9,11,0,2]},hint:"E (64), F# (66), G (67), A (69), B (71), C (72), D (74)"},{type:"quiz",title:"Minor Formula Quiz",description:"What is the natural minor scale formula?",quizOptions:[{label:"W-W-H-W-W-W-H",correct:!1},{label:"W-H-W-W-H-W-W",correct:!0},{label:"H-W-W-W-H-W-W",correct:!1},{label:"W-H-W-H-W-W-W",correct:!1}]}],z$={id:O$,title:j$,category:P$,difficulty:B$,estimatedMinutes:I$,description:L$,steps:V$},F$="theory-chord-construction",H$="Chord Construction",U$="theory",G$="beginner",q$=7,W$="Learn how triads are built from intervals  major, minor, diminished, and augmented.",$$=[{type:"info",title:"Building Blocks of Chords",description:`A triad is a three-note chord built by stacking two intervals of a 3rd:

 Major triad: Major 3rd + Minor 3rd (4 + 3 semitones)
 Minor triad: Minor 3rd + Major 3rd (3 + 4 semitones)
 Diminished triad: Minor 3rd + Minor 3rd (3 + 3 semitones)
 Augmented triad: Major 3rd + Major 3rd (4 + 4 semitones)`},{type:"play-chord",title:"Build C Major (4+3)",description:"C major = C + E (4 semitones) + G (3 more semitones). Major 3rd on bottom, minor 3rd on top.",expectedChord:{root:"C",quality:"maj",display:"C"},hint:"C (60) + E (64) + G (67)"},{type:"play-chord",title:"Build C Minor (3+4)",description:"C minor = C + Eb (3 semitones) + G (4 more semitones). The intervals are reversed from major!",expectedChord:{root:"C",quality:"m",display:"Cm"},hint:"C (60) + Eb (63) + G (67)"},{type:"play-chord",title:"Build B Diminished (3+3)",description:"B diminished = B + D (3 semitones) + F (3 more semitones). Two minor 3rds stacked. Tense and unstable.",expectedChord:{root:"B",quality:"dim",display:"Bdim"},hint:"B (71) + D (74) + F (77)"},{type:"play-chord",title:"Build C Augmented (4+4)",description:"C augmented = C + E (4 semitones) + G# (4 more semitones). Two major 3rds. Mysterious and dreamy.",expectedChord:{root:"C",quality:"aug",display:"Caug"},hint:"C (60) + E (64) + G# (68)"},{type:"info",title:"A Simple Way to Remember",description:`Think of it as stacking 3rds:

 Major: big + small (happy)
 Minor: small + big (sad)
 Diminished: small + small (tense)
 Augmented: big + big (dreamy)

The total size of the chord (root to 5th) tells you the quality: 7 semitones = perfect, 6 = diminished, 8 = augmented.`},{type:"quiz",title:"Construction Quiz",description:"A minor triad is built with which intervals?",quizOptions:[{label:"Major 3rd + Minor 3rd",correct:!1},{label:"Minor 3rd + Major 3rd",correct:!0},{label:"Minor 3rd + Minor 3rd",correct:!1},{label:"Major 3rd + Major 3rd",correct:!1}]}],Y$={id:F$,title:H$,category:U$,difficulty:G$,estimatedMinutes:q$,description:W$,steps:$$},K$="theory-key-signatures",X$="Key Signatures",Q$="theory",Z$="intermediate",J$=7,eY="Understand key signatures and the circle of fifths for sharp keys.",tY=[{type:"info",title:"What is a Key Signature?",description:"A key signature tells you which notes are sharp or flat throughout a piece of music. Instead of writing a sharp or flat on every note, the key signature puts them at the beginning. For example, the key of G has one sharp (F#), so every F in the piece is played as F#."},{type:"info",title:"The Circle of Fifths (Sharp Keys)",description:`Starting from C (no sharps), each step up by a perfect 5th adds one sharp:

 C major: 0 sharps
 G major: 1 sharp (F#)
 D major: 2 sharps (F#, C#)
 A major: 3 sharps (F#, C#, G#)
 E major: 4 sharps (F#, C#, G#, D#)

The sharps always appear in the same order: F#, C#, G#, D#, A#, E#, B#`},{type:"play-scale",title:"C Major: No Sharps",description:"Play C major  the key with no sharps or flats. All white keys.",expectedScale:{root:0,name:"Major",notes:[0,2,4,5,7,9,11]},hint:"C-D-E-F-G-A-B, all white keys."},{type:"play-scale",title:"G Major: 1 Sharp",description:"Play G major  one sharp (F#). Going up a 5th from C gives us G.",expectedScale:{root:7,name:"Major",notes:[7,9,11,0,2,4,6]},hint:"G-A-B-C-D-E-F#"},{type:"play-scale",title:"D Major: 2 Sharps",description:"Play D major  two sharps (F# and C#). Another 5th up from G.",expectedScale:{root:2,name:"Major",notes:[2,4,6,7,9,11,1]},hint:"D-E-F#-G-A-B-C#"},{type:"quiz",title:"Key Signature Quiz",description:"How many sharps does D major have?",quizOptions:[{label:"0",correct:!1},{label:"1",correct:!1},{label:"2",correct:!0},{label:"3",correct:!1}]},{type:"quiz",title:"Circle of Fifths Quiz",description:"In the circle of fifths, what order do sharps appear?",quizOptions:[{label:"C#, F#, G#, D#",correct:!1},{label:"F#, C#, G#, D#",correct:!0},{label:"G#, D#, A#, F#",correct:!1},{label:"B#, E#, A#, D#",correct:!1}]}],nY={id:K$,title:X$,category:Q$,difficulty:Z$,estimatedMinutes:J$,description:eY,steps:tY},sY="theory-relative-major-minor",iY="Relative Major & Minor",rY="theory",aY="intermediate",oY=6,lY="Discover the relationship between major and minor keys that share the same notes.",cY=[{type:"info",title:"Relative Keys",description:"Every major key has a 'relative minor' that uses the exact same notes  just starting from a different place. The relative minor starts on the 6th note of the major scale. For C major, the 6th note is A, so A minor is C major's relative minor."},{type:"play-scale",title:"Play C Major",description:"Play the C major scale: C-D-E-F-G-A-B.",expectedScale:{root:0,name:"Major",notes:[0,2,4,5,7,9,11]},hint:"All white keys from C to B."},{type:"play-scale",title:"Play A Natural Minor",description:"Now play A natural minor: A-B-C-D-E-F-G. Same notes as C major, different starting point!",expectedScale:{root:9,name:"Natural Minor",notes:[9,11,0,2,4,5,7]},hint:"All white keys from A to G  same notes as C major!"},{type:"info",title:"Finding the Relative Minor",description:`To find any major key's relative minor, go down 3 semitones (or up to the 6th note):

 C major  A minor
 G major  E minor
 D major  B minor
 F major  D minor

They share the same key signature  same sharps and flats!`},{type:"play-chord",title:"C Major (Home of the Major Key)",description:"Play C major  this is the 'home' chord in C major.",expectedChord:{root:"C",quality:"maj",display:"C"},hint:"C (60) + E (64) + G (67)"},{type:"play-chord",title:"A Minor (Home of the Relative Minor)",description:"Play A minor  the 'home' chord in A minor. Same notes available, different emotional center.",expectedChord:{root:"A",quality:"m",display:"Am"},hint:"A (69) + C (72) + E (76)"},{type:"quiz",title:"Relative Key Quiz",description:"What is the relative minor of G major?",quizOptions:[{label:"A minor",correct:!1},{label:"D minor",correct:!1},{label:"E minor",correct:!0},{label:"B minor",correct:!1}]}],uY={id:sY,title:iY,category:rY,difficulty:aY,estimatedMinutes:oY,description:lY,steps:cY},dY="theory-diatonic-chords",hY="Diatonic Chords",fY="theory",pY="intermediate",mY=8,gY="Learn all 7 chords built from the C major scale  the foundation of harmonic analysis.",yY=[{type:"info",title:"Chords from the Scale",description:`Every major scale produces 7 chords when you stack 3rds from each note. In C major:

 I = C (major)
 ii = Dm (minor)
 iii = Em (minor)
 IV = F (major)
 V = G (major)
 vi = Am (minor)
 vii = Bdim (diminished)

Uppercase = major, lowercase = minor. This pattern is the same in every major key!`},{type:"play-chord",title:"I  C Major",description:"The tonic chord. This is 'home'  the most stable, resolved-sounding chord.",expectedChord:{root:"C",quality:"maj",display:"C"},hint:"C (60) + E (64) + G (67)"},{type:"play-chord",title:"ii  D Minor",description:"The supertonic. Often leads to the V chord. Very common in pop progressions.",expectedChord:{root:"D",quality:"m",display:"Dm"},hint:"D (62) + F (65) + A (69)"},{type:"play-chord",title:"iii  E Minor",description:"The mediant. Can substitute for the I chord and adds a subtle sadness.",expectedChord:{root:"E",quality:"m",display:"Em"},hint:"E (64) + G (67) + B (71)"},{type:"play-chord",title:"IV  F Major",description:"The subdominant. Feels like moving away from home. One of the three primary chords.",expectedChord:{root:"F",quality:"maj",display:"F"},hint:"F (65) + A (69) + C (72)"},{type:"play-chord",title:"V  G Major",description:"The dominant. Creates the strongest pull back to the I chord. Essential for cadences.",expectedChord:{root:"G",quality:"maj",display:"G"},hint:"G (67) + B (71) + D (74)"},{type:"play-chord",title:"vi  A Minor",description:"The submediant. The relative minor chord. Used heavily in pop (I-V-vi-IV).",expectedChord:{root:"A",quality:"m",display:"Am"},hint:"A (69) + C (72) + E (76)"},{type:"play-chord",title:"vii  B Diminished",description:"The leading tone chord. Tense and rare, but it leads strongly to C major.",expectedChord:{root:"B",quality:"dim",display:"Bdim"},hint:"B (71) + D (74) + F (77)"},{type:"quiz",title:"Diatonic Quiz",description:"In a major key, which chords are minor?",quizOptions:[{label:"I, IV, V",correct:!1},{label:"ii, iii, vi",correct:!0},{label:"ii, IV, vi",correct:!1},{label:"iii, V, vii",correct:!1}]}],vY={id:dY,title:hY,category:fY,difficulty:pY,estimatedMinutes:mY,description:gY,steps:yY},bY="theory-rhythm-basics",xY="Rhythm Basics",_Y="theory",SY="beginner",wY=5,CY="Learn about beats, measures, and 4/4 time  the rhythmic foundation of most music.",TY=[{type:"info",title:"What is Rhythm?",description:"Rhythm is the pattern of sounds in time. The most basic element is the beat  a steady pulse, like a heartbeat. Beats are grouped into measures (bars). Most popular music uses 4/4 time: 4 beats per measure."},{type:"info",title:"4/4 Time",description:`4/4 means:
 Top number (4): 4 beats per measure
 Bottom number (4): a quarter note gets one beat

Count along: 1-2-3-4, 1-2-3-4. The '1' is always the strongest beat. '3' is slightly strong. '2' and '4' are the weak beats (where the snare goes in rock music).`},{type:"play-drums",title:"Beat 1: The Downbeat",description:"The kick drum typically marks beat 1  the strongest beat in the measure. Hit the kick.",expectedDrumPattern:{pads:[0]},hint:"KCK is pad 0."},{type:"play-drums",title:"The Backbeat (2 & 4)",description:"The snare on beats 2 and 4 is called the 'backbeat'. It's the heart of rock and pop rhythm.",expectedDrumPattern:{pads:[1]},hint:"SNR is pad 1."},{type:"play-drums",title:"The Pulse",description:"The hi-hat plays on every beat (or every half-beat) to keep the pulse steady. It's like a clock.",expectedDrumPattern:{pads:[2]},hint:"CHH is pad 2."},{type:"play-drums",title:"Full 4/4 Beat",description:"Now combine them: kick, snare, and hi-hat together. This is the core of a 4/4 beat.",expectedDrumPattern:{pads:[0,1,2]},hint:"Hit KCK, SNR, and CHH together."},{type:"quiz",title:"Rhythm Quiz",description:"In 4/4 time, how many beats are in one measure?",quizOptions:[{label:"2",correct:!1},{label:"3",correct:!1},{label:"4",correct:!0},{label:"6",correct:!1}]}],EY={id:bY,title:xY,category:_Y,difficulty:SY,estimatedMinutes:wY,description:CY,steps:TY},AY="theory-octaves-and-pitch",kY="Octaves & Pitch",NY="theory",MY="beginner",RY=5,DY="Understand octaves, pitch, and how notes relate across the keyboard.",OY=[{type:"info",title:"What is Pitch?",description:"Pitch is how high or low a note sounds. It's determined by the frequency of vibration  faster vibrations = higher pitch. On the piano, notes get higher as you move right and lower as you move left. The distance of 12 semitones (all the keys in one group) is called an octave."},{type:"play-notes",title:"Low C",description:"Play C3  a low C. Listen to its deep, warm tone.",expectedNotes:[{midi:48,label:"C3"}],hint:"C3 is MIDI note 48."},{type:"play-notes",title:"Middle C",description:"Now play C4 (middle C). It's one octave higher  same note name, but brighter.",expectedNotes:[{midi:60,label:"C4"}],hint:"C4 is MIDI note 60."},{type:"play-notes",title:"High C",description:"Play C5  two octaves above C3. Notice how it sounds distinctly higher but still 'C'.",expectedNotes:[{midi:72,label:"C5"}],hint:"C5 is MIDI note 72."},{type:"play-notes",title:"Two Octaves Together",description:"Play C3 and C5 together. Even though they're 24 semitones apart, they blend perfectly because they're the same note in different octaves.",expectedNotes:[{midi:48,label:"C3"},{midi:72,label:"C5"}],hint:"C3 (48) and C5 (72)  two octaves apart."},{type:"info",title:"Why Do Octaves Sound 'Same'?",description:"When you go up one octave, the frequency exactly doubles. C4 vibrates at ~262 Hz, C5 at ~523 Hz. This 2:1 ratio is the simplest in music, which is why octaves sound so perfectly matched  our brains perceive them as the 'same' note at different heights."},{type:"play-notes",title:"Octave E's",description:"Play E3 and E4 together  an octave of E.",expectedNotes:[{midi:52,label:"E3"},{midi:64,label:"E4"}],hint:"E3 (52) and E4 (64)."},{type:"quiz",title:"Octave Quiz",description:"How many semitones are in one octave?",quizOptions:[{label:"7",correct:!1},{label:"8",correct:!1},{label:"10",correct:!1},{label:"12",correct:!0}]}],jY={id:AY,title:kY,category:NY,difficulty:MY,estimatedMinutes:RY,description:DY,steps:OY},PY="theory-harmonic-minor-modes",BY="Modes & Harmonic Minor",IY="theory",LY="intermediate",VY=8,zY="Explore Dorian, Mixolydian, and the harmonic minor scale  expanding your musical palette.",FY=[{type:"info",title:"What are Modes?",description:`Modes are scales built by starting on different notes of the major scale. Each mode has a unique flavor:

 Dorian: starts on the 2nd note  minor but brighter (jazz, funk)
 Mixolydian: starts on the 5th note  major but bluesy (rock, blues)

Think of it as seeing the same 7 notes from a different perspective.`},{type:"play-scale",title:"D Dorian",description:"Play D Dorian: D-E-F-G-A-B-C. Same notes as C major, but starting on D. It sounds minor but with a brighter 6th note (B instead of Bb).",expectedScale:{root:2,name:"Dorian",notes:[2,4,5,7,9,11,0]},hint:"All white keys from D to C."},{type:"play-chord",title:"Dorian Home Chord: D Minor",description:"The Dorian mode is based on a minor chord. Play Dm.",expectedChord:{root:"D",quality:"m",display:"Dm"},hint:"D (62) + F (65) + A (69)"},{type:"play-scale",title:"G Mixolydian",description:"Play G Mixolydian: G-A-B-C-D-E-F. Same notes as C major, but starting on G. It sounds major but with a flat 7th (F instead of F#).",expectedScale:{root:7,name:"Mixolydian",notes:[7,9,11,0,2,4,5]},hint:"All white keys from G to F."},{type:"play-chord",title:"Mixolydian Home Chord: G Major",description:"Mixolydian is based on a major chord. Play G major.",expectedChord:{root:"G",quality:"maj",display:"G"},hint:"G (67) + B (71) + D (74)"},{type:"info",title:"The Harmonic Minor Scale",description:"The harmonic minor scale takes the natural minor and raises the 7th note by one semitone. In A: A-B-C-D-E-F-G#. That raised 7th (G#) creates a dramatic 1.5-step gap between F and G#  giving it a distinctive, exotic sound used in classical, metal, and Middle Eastern music."},{type:"play-scale",title:"A Harmonic Minor",description:"Play A harmonic minor: A-B-C-D-E-F-G#. Notice the exotic leap from F to G#!",expectedScale:{root:9,name:"Harmonic Minor",notes:[9,11,0,2,4,5,8]},hint:"A (69), B (71), C (72), D (74), E (76), F (77), G# (80)"},{type:"quiz",title:"Modes Quiz",description:"D Dorian uses the same notes as which major scale?",quizOptions:[{label:"D major",correct:!1},{label:"C major",correct:!0},{label:"G major",correct:!1},{label:"A major",correct:!1}]}],HY={id:PY,title:BY,category:IY,difficulty:LY,estimatedMinutes:VY,description:zY,steps:FY},o_=[zG,YG,nq,uq,vq,Eq,jq,Hq,Xq,i9,h9,x9,k9,B9,G9,Z9,aW,pW,SW,MW,LW,WW,e$,l$,g$,C$,D$,z$,Y$,EY,jY,nY,uY,vY,HY];function UY(t){return t?o_.filter(e=>e.category===t):o_}function GY({activeNotes:t,onNoteOn:e,onNoteOff:n,activePads:s,onDrumHit:i,detectedChord:r}){const[a,o]=x.useState(null),l=DG(t,s),c=UY(a??void 0);return l.activeLesson&&l.currentStep?p.jsx(AG,{lesson:l.activeLesson,currentStep:l.currentStep,currentStepIndex:l.currentStepIndex,totalSteps:l.totalSteps,stepCompleted:l.stepCompleted,activeNotes:t,onNoteOn:e,onNoteOff:n,activePads:s,onDrumHit:i,detectedChord:r,onNext:l.nextStep,onPrev:l.prevStep,onExit:l.exitLesson,onQuizAnswer:l.completeQuiz}):p.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[p.jsxs("div",{className:"border-b border-border/50 px-6 py-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(nE,{className:"h-5 w-5 text-muted-foreground"}),p.jsx("h1",{className:"text-lg font-bold",children:"Learn"})]}),p.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Structured lessons to learn piano, drums, and music theory"}),p.jsx("div",{className:"mt-3",children:p.jsx(mG,{selected:a,onChange:o})})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:[p.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3",children:c.map(u=>p.jsx(vG,{lesson:u,isCompleted:l.isLessonCompleted(u.id),onClick:()=>l.startLesson(u)},u.id))}),c.length===0&&p.jsx("p",{className:"mt-8 text-center text-sm text-muted-foreground",children:"No lessons in this category yet."})]})]})}function qY({icon:t,title:e,description:n,color:s,onClick:i}){return p.jsxs("button",{onClick:i,className:"flex flex-col gap-3 rounded-xl border border-border/50 p-5 text-left transition-all duration-150 hover:border-border hover:bg-card/60",style:{backgroundColor:"oklch(0.14 0.01 270)"},children:[p.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg",style:{backgroundColor:`color-mix(in oklch, ${s} 20%, transparent)`},children:p.jsx(t,{className:"h-5 w-5",style:{color:s}})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-semibold text-foreground",children:e}),p.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:n})]})]})}const WY=[{value:null,label:"All"},{value:"piano-basics",label:"Piano Basics"},{value:"scales",label:"Scales"},{value:"chords",label:"Chords"},{value:"rhythm",label:"Rhythm"},{value:"drum-patterns",label:"Drum Patterns"}];function $Y({selected:t,onChange:e}){return p.jsx("div",{className:"flex flex-wrap gap-1",children:WY.map(n=>p.jsx("button",{onClick:()=>e(n.value),className:ye("rounded-md px-3 py-1.5 text-xs font-medium transition-colors",t===n.value?"bg-primary text-primary-foreground":"bg-secondary text-muted-foreground hover:text-foreground"),children:n.label},n.label))})}const YY={"piano-basics":Wy,scales:fE,chords:iE,rhythm:cE,"drum-patterns":qy},KY={beginner:"bg-green-500/20 text-green-400",intermediate:"bg-yellow-500/20 text-yellow-400"};function XY({stars:t}){return p.jsx("div",{className:"flex gap-0.5",children:[1,2,3].map(e=>p.jsx(oE,{className:ye("h-3.5 w-3.5",e<=t?"fill-yellow-400 text-yellow-400":"text-muted-foreground/30")},e))})}function QY({exercise:t,score:e,onClick:n}){const s=YY[t.category];return p.jsxs("button",{onClick:n,className:ye("group flex flex-col gap-3 rounded-xl border border-border/50 p-4 text-left","transition-all duration-150 hover:border-border hover:bg-card/60",e&&e.bestStars>0&&"border-yellow-500/20"),style:{backgroundColor:"oklch(0.14 0.01 270)"},children:[p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg",style:{backgroundColor:"oklch(0.20 0.02 270)"},children:p.jsx(s,{className:"h-4.5 w-4.5 text-muted-foreground"})}),e&&e.bestStars>0&&p.jsx(XY,{stars:e.bestStars})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-semibold text-foreground",children:t.title}),p.jsx("p",{className:"mt-1 text-xs text-muted-foreground line-clamp-1",children:t.description})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:ye("rounded-md px-2 py-0.5 text-[10px] font-medium",KY[t.difficulty]),children:t.difficulty}),e&&e.attempts>0&&p.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[e.attempts," attempt",e.attempts!==1?"s":""]})]})]})}const Q0=[{name:"Major",intervals:[0,2,4,5,7,9,11]},{name:"Natural Minor",intervals:[0,2,3,5,7,8,10]},{name:"Harmonic Minor",intervals:[0,2,3,5,7,8,11]},{name:"Dorian",intervals:[0,2,3,5,7,9,10]},{name:"Mixolydian",intervals:[0,2,4,5,7,9,10]},{name:"Pentatonic Major",intervals:[0,2,4,7,9]},{name:"Pentatonic Minor",intervals:[0,3,5,7,10]},{name:"Blues",intervals:[0,3,5,6,7,10]},{name:"Chromatic",intervals:[0,1,2,3,4,5,6,7,8,9,10,11]},{name:"Melodic Minor",intervals:[0,2,3,5,7,9,11]}],ZY=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function JY(t,e){return new Set(e.intervals.map(n=>(t+n)%12))}function eK(){return ZY.map((t,e)=>({value:e,label:t}))}function tK(){return Q0.map(t=>({value:t.name,label:t.name}))}function BN({activeNotes:t,onNoteOn:e,onNoteOff:n,highlightedNotes:s,selectedRoot:i,setSelectedRoot:r,selectedScale:a,setSelectedScale:o,exercise:l,onNoteHit:c,onSequenceComplete:u}){var T;const d=eK(),h=tK(),f=!!l,m=l==null?void 0:l.config.targetNotes;x.useEffect(()=>{l&&(l.config.scaleRoot!==void 0&&r(l.config.scaleRoot),l.config.scaleName&&o(l.config.scaleName))},[l,r,o]);const[g,b]=x.useState(0);x.useRef(new Set);const y=x.useMemo(()=>m?new Set(m.map(C=>C.midi)):s,[m,s]),v=m==null?void 0:m[g],_=x.useCallback((C,N)=>{if(e(C,N),m&&v){const A=C===v.midi;if(c==null||c(C,A),A){const k=g+1;k>=m.length?(b(k),u==null||u()):b(k)}}else if(f&&(l!=null&&l.config.scaleName)){const A=y,k=A.has(C%12)||A.has(C);c==null||c(C,k)}},[e,m,v,g,c,u,f,l,y]);x.useEffect(()=>{b(0)},[l==null?void 0:l.id]);const S=m?y:s,w=(l==null?void 0:l.config.scaleRoot)??i,E=(l==null?void 0:l.config.scaleName)??a;return p.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-sm font-semibold text-muted-foreground",children:f?l.title:"Scale Practice"}),p.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:(l==null?void 0:l.config.instructions)??"Select a root note and scale  highlighted keys show the scale tones"})]}),!f&&p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("label",{className:"text-xs text-muted-foreground",children:"Root:"}),p.jsx("select",{className:"rounded-md bg-secondary px-2 py-1 text-xs",value:i,onChange:C=>r(Number(C.target.value)),children:d.map(C=>p.jsx("option",{value:C.value,children:C.label},C.value))})]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("label",{className:"text-xs text-muted-foreground",children:"Scale:"}),p.jsxs("select",{className:"rounded-md bg-secondary px-2 py-1 text-xs",value:a??"",onChange:C=>o(C.target.value||null),children:[p.jsx("option",{value:"",children:"None"}),h.map(C=>p.jsx("option",{value:C.value,children:C.label},C.value))]})]})]}),m&&p.jsx("div",{className:"flex flex-wrap items-center gap-1.5",children:m.map((C,N)=>p.jsx("span",{className:"rounded-md px-2 py-1 text-xs font-medium transition-colors",style:{backgroundColor:N<g?"oklch(0.30 0.15 150)":N===g?"oklch(0.30 0.12 270)":"oklch(0.18 0.01 270)",color:N<=g?"white":"oklch(0.55 0.01 270)"},children:C.label},N))}),!m&&E&&p.jsxs("div",{className:"text-xs text-muted-foreground",children:["Notes: ",(T=Q0.find(C=>C.name===E))==null?void 0:T.intervals.map(C=>["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][(w+C)%12]).join(", ")]}),p.jsx("div",{className:"overflow-x-auto",children:p.jsx(mr,{activeNotes:t,onNoteOn:_,onNoteOff:n,highlightedNotes:S,compact:!0})})]})}function IN({activeNotes:t,onNoteOn:e,onNoteOff:n,detectedChord:s,exercise:i,onChordMatch:r,onSequenceComplete:a}){const o=!!i,l=i==null?void 0:i.config.targetChords,[c,u]=x.useState(0),d=x.useRef(null),h=x.useRef(!0),f=l==null?void 0:l[c];return x.useEffect(()=>{u(0),d.current=null,h.current=!0},[i==null?void 0:i.id]),x.useEffect(()=>{if(!l||!f||!s||c>=l.length)return;if(t.size===0){h.current=!0;return}if(!h.current)return;const m=`${s.root}-${s.quality}`;if(m===d.current)return;d.current=m;const g=s.root===f.root&&s.quality===f.quality;if(r==null||r(g),h.current=!1,g){const b=c+1;b>=l.length?(u(b),a==null||a()):u(b)}},[s,t.size,l,f,c,r,a]),p.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-sm font-semibold text-muted-foreground",children:o?i.title:"Detected Chord"}),(i==null?void 0:i.config.instructions)&&p.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:i.config.instructions}),p.jsx("div",{className:"mt-2 flex h-24 items-center justify-center rounded-xl",style:{backgroundColor:"oklch(0.14 0.01 270)"},children:s?p.jsx("span",{className:"text-4xl font-bold",children:s.display}):p.jsx("span",{className:"text-lg text-muted-foreground",children:"Play a chord..."})}),s&&p.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[p.jsxs("span",{className:"text-xs text-muted-foreground",children:["Root: ",s.root]}),p.jsxs("span",{className:"text-xs text-muted-foreground",children:["Quality: ",s.quality]}),p.jsxs("span",{className:"text-xs text-muted-foreground",children:["Notes: ",Array.from(t.keys()).sort((m,g)=>m-g).map(m=>["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][m%12]).join(", ")]})]})]}),l&&p.jsx("div",{className:"flex flex-wrap items-center gap-1.5",children:l.map((m,g)=>p.jsx("span",{className:"rounded-md px-3 py-1.5 text-xs font-medium transition-colors",style:{backgroundColor:g<c?"oklch(0.30 0.15 150)":g===c?"oklch(0.30 0.12 270)":"oklch(0.18 0.01 270)",color:g<=c?"white":"oklch(0.55 0.01 270)"},children:m.display},g))}),p.jsx("div",{className:"overflow-x-auto",children:p.jsx(mr,{activeNotes:t,onNoteOn:e,onNoteOff:n,compact:!0})})]})}function LN({currentBeat:t,isRunning:e}){const n=t%4;return p.jsx("div",{className:"flex items-center gap-2",children:[0,1,2,3].map(s=>p.jsx("div",{className:"h-4 w-4 rounded-full transition-all duration-100",style:{backgroundColor:e&&n===s?s===0?"oklch(0.75 0.25 25)":"oklch(0.70 0.20 270)":"oklch(0.20 0.02 270)",boxShadow:e&&n===s?`0 0 8px ${s===0?"oklch(0.75 0.25 25)":"oklch(0.70 0.20 270)"}`:"none",transform:e&&n===s?"scale(1.3)":"scale(1)"}},s))})}function VN({accuracy:t}){const e=Math.round(t*100),n=t*120;return p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:"text-xs text-muted-foreground",children:"Accuracy"}),p.jsx("div",{className:"h-2 w-24 rounded-full bg-secondary",children:p.jsx("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${e}%`,backgroundColor:`oklch(0.65 0.20 ${n})`}})}),p.jsxs("span",{className:"text-xs font-medium",style:{color:`oklch(0.75 0.18 ${n})`},children:[e,"%"]})]})}const nK=30,sK=80,iK=150;function zN(t=120){const e=typeof t=="number"?{bpm:t}:t,n=e.bpm??120,s=e.totalBeats,i=e.subdivision??"4n",r=e.onComplete,[a,o]=x.useState(!1),[l,c]=x.useState(0),[u,d]=x.useState([]),h=x.useRef([]),f=x.useRef(null),m=x.useRef(0),g=x.useRef(!1),b=x.useRef([]),y=x.useCallback(()=>{var E,T;(E=f.current)==null||E.stop(),(T=f.current)==null||T.dispose(),f.current=null,nn().stop(),o(!1)},[]),v=x.useCallback(()=>{nn().bpm.value=n,h.current=[],b.current=[],d([]),c(0),m.current=0,g.current=!1;const E=new ef(T=>{h.current.push(T*1e3),m.current+=1;const C=m.current;c(C),s&&C>=s&&setTimeout(()=>{if(!g.current){g.current=!0,y();const N=b.current,A=N.length>0?N.filter(k=>k.timing==="perfect"||k.timing==="good").length/N.length:0;r==null||r(A,N)}},200)},i);f.current=E,E.start(0),nn().start(),o(!0)},[n,s,i,r,y]),_=x.useCallback(()=>{y()},[y]),S=x.useCallback(()=>{if(!a||h.current.length===0)return null;const E=Kn()*1e3;let T=0,C=1/0;for(let R=0;R<h.current.length;R++){const D=Math.abs(E-h.current[R]);D<C&&(C=D,T=R)}const N=60/n*1e3,k=h.current[h.current.length-1]+N,O=Math.abs(E-k);O<C&&(C=O);const P=E-h.current[T];let j;C<=nK?j="perfect":C<=sK?j="good":C<=iK?j=P<0?"early":"late":j="miss";const I={beat:T,timing:j,offsetMs:P};return b.current=[...b.current,I],d(b.current),I},[a,n]);x.useEffect(()=>()=>{var E,T;(E=f.current)==null||E.stop(),(T=f.current)==null||T.dispose()},[]);const w=u.length>0?u.filter(E=>E.timing==="perfect"||E.timing==="good").length/u.length:0;return{isRunning:a,currentBeat:l,feedbackHistory:u,accuracy:w,start:v,stop:_,recordHit:S}}function FN({activeNotes:t,onNoteOn:e,onNoteOff:n,bpm:s=120,totalBeats:i,subdivision:r="4n",onComplete:a}){const o=zN({bpm:s,totalBeats:i,subdivision:r,onComplete:a}),l=x.useCallback((u,d)=>{e(u,d),o.isRunning&&o.recordHit()},[e,o]),c=o.feedbackHistory[o.feedbackHistory.length-1];return p.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-sm font-semibold text-muted-foreground",children:"Rhythm Training"}),p.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:["Play notes on the beat. The metronome shows you the tempo  try to match it!",i&&` (${i} beats at ${s} BPM)`]})]}),p.jsxs("div",{className:"flex items-center gap-6",children:[p.jsx(Ee,{size:"sm",variant:o.isRunning?"destructive":"default",onClick:o.isRunning?o.stop:o.start,children:o.isRunning?p.jsxs(p.Fragment,{children:[p.jsx(Yy,{className:"mr-1 h-3.5 w-3.5"})," Stop"]}):p.jsxs(p.Fragment,{children:[p.jsx($y,{className:"mr-1 h-3.5 w-3.5"})," Start"]})}),p.jsx(LN,{currentBeat:o.currentBeat,isRunning:o.isRunning}),i&&p.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.min(o.currentBeat,i)," / ",i]}),o.feedbackHistory.length>0&&p.jsx(VN,{accuracy:o.accuracy})]}),c&&p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"rounded-md px-2 py-1 text-xs font-medium",style:{backgroundColor:c.timing==="perfect"?"oklch(0.30 0.15 150)":c.timing==="good"?"oklch(0.30 0.12 90)":c.timing==="early"?"oklch(0.30 0.12 270)":c.timing==="late"?"oklch(0.30 0.12 40)":"oklch(0.30 0.12 25)"},children:c.timing.toUpperCase()}),p.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.abs(Math.round(c.offsetMs)),"ms ",c.offsetMs<0?"early":"late"]})]}),p.jsx("div",{className:"overflow-x-auto",children:p.jsx(mr,{activeNotes:t,onNoteOn:l,onNoteOff:n,compact:!0})})]})}const rK=["KCK","SNR","CHH","OHH","CLP","TOM","CRS","RDE"],aK=[[0,2],[1,2],[0,2],[1,2]];function HN({activePads:t,onDrumHit:e,pattern:n=aK,bpm:s=100,totalBeats:i,patternName:r="Rock Beat",onComplete:a}){const o=zN({bpm:s,totalBeats:i,onComplete:a}),l=o.currentBeat%n.length,c=new Set(n[l]??[]),u=x.useCallback((d,h)=>{e(d,h),o.isRunning&&o.recordHit()},[e,o]);return p.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-sm font-semibold text-muted-foreground",children:"Drum Pattern Practice"}),p.jsxs("p",{className:"mt-1 text-xs text-muted-foreground",children:["Follow the highlighted drum pads. Hit them in time with the metronome!",i&&` (${i} beats at ${s} BPM)`]})]}),p.jsxs("div",{className:"flex items-center gap-6",children:[p.jsx(Ee,{size:"sm",variant:o.isRunning?"destructive":"default",onClick:o.isRunning?o.stop:o.start,children:o.isRunning?p.jsxs(p.Fragment,{children:[p.jsx(Yy,{className:"mr-1 h-3.5 w-3.5"})," Stop"]}):p.jsxs(p.Fragment,{children:[p.jsx($y,{className:"mr-1 h-3.5 w-3.5"})," Start"]})}),p.jsx(LN,{currentBeat:o.currentBeat,isRunning:o.isRunning}),i&&p.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.min(o.currentBeat,i)," / ",i]}),o.feedbackHistory.length>0&&p.jsx(VN,{accuracy:o.accuracy})]}),p.jsxs("div",{className:"rounded-lg p-3",style:{backgroundColor:"oklch(0.14 0.01 270)"},children:[p.jsxs("p",{className:"mb-2 text-xs font-medium text-muted-foreground",children:[r," Pattern:"]}),p.jsx("div",{className:"grid gap-2 text-center text-xs",style:{gridTemplateColumns:`repeat(${n.length}, 1fr)`},children:n.map((d,h)=>p.jsxs("div",{className:"rounded-md py-1 transition-colors",style:{backgroundColor:o.isRunning&&l===h?"oklch(0.25 0.10 270)":"oklch(0.18 0.01 270)"},children:[p.jsxs("div",{className:"font-medium",children:["Beat ",h+1]}),p.jsx("div",{className:"text-muted-foreground",children:d.map(f=>rK[f]).join(" + ")})]},h))})]}),p.jsx("div",{className:"w-[320px]",children:p.jsx(sf,{activePads:t,onHit:u,highlightedPads:o.isRunning?c:void 0})})]})}const oK={3:"Excellent! Perfect score!",2:"Great job! Keep practicing!",1:"Good start! Try again for more stars!",0:"Keep trying! You can do it!"};function lK({accuracy:t,stars:e,onRetry:n,onBack:s}){return p.jsxs("div",{className:"flex flex-col items-center gap-6 p-8",children:[p.jsx("h2",{className:"text-lg font-bold",children:"Exercise Complete!"}),p.jsx("div",{className:"flex gap-2",children:[1,2,3].map(i=>p.jsx(oE,{className:ye("h-10 w-10 transition-all",i<=e?"fill-yellow-400 text-yellow-400 drop-shadow-[0_0_8px_oklch(0.80_0.18_90)]":"text-muted-foreground/20")},i))}),p.jsxs("div",{className:"text-center",children:[p.jsxs("div",{className:"text-3xl font-bold",children:[Math.round(t*100),"%"]}),p.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:oK[e]})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsxs(Ee,{variant:"outline",size:"sm",onClick:n,children:[p.jsx(O4,{className:"mr-1 h-3.5 w-3.5"}),"Try Again"]}),p.jsxs(Ee,{variant:"default",size:"sm",onClick:s,children:[p.jsx(oo,{className:"mr-1 h-3.5 w-3.5"}),"Back to Exercises"]})]})]})}function cK(t){const[e,n]=x.useState(!1),[s,i]=x.useState(null),r=x.useRef(0),a=x.useRef(0),o=x.useCallback(d=>{a.current+=1,d&&(r.current+=1)},[]),l=x.useCallback(d=>d>=t.threeStars?3:d>=t.twoStars?2:a.current>0?1:0,[t.threeStars,t.twoStars]),c=x.useCallback(d=>{const h=d??(a.current>0?r.current/a.current:0),f=l(h),m={accuracy:h,stars:f};return i(m),n(!0),m},[l]),u=x.useCallback(()=>{r.current=0,a.current=0,n(!1),i(null)},[]);return{finished:e,result:s,recordEvent:o,finish:c,reset:u}}function uK({exercise:t,onExit:e,onSaveScore:n,activeNotes:s,onNoteOn:i,onNoteOff:r,activePads:a,onDrumHit:o,detectedChord:l,highlightedNotes:c,selectedRoot:u,setSelectedRoot:d,selectedScale:h,setSelectedScale:f}){const m=cK(t.scoring),g=x.useCallback((S,w)=>{m.recordEvent(w)},[m]),b=x.useCallback(S=>{m.recordEvent(S)},[m]),y=x.useCallback(()=>{const S=m.finish();n(t.id,S.stars,S.accuracy)},[m,t.id,n]),v=x.useCallback((S,w)=>{const E=m.finish(S);n(t.id,E.stars,E.accuracy)},[m,t.id,n]),_=x.useCallback(()=>{m.reset()},[m]);return m.finished&&m.result?p.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[p.jsxs("div",{className:"flex items-center gap-3 border-b border-border/50 px-6 py-3",children:[p.jsx(Ee,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:e,title:"Back to exercises",children:p.jsx(oo,{className:"h-4 w-4"})}),p.jsx("h2",{className:"text-sm font-semibold",children:t.title})]}),p.jsx("div",{className:"flex flex-1 items-center justify-center",children:p.jsx(lK,{accuracy:m.result.accuracy,stars:m.result.stars,onRetry:_,onBack:e})})]}):p.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[p.jsxs("div",{className:"flex items-center gap-3 border-b border-border/50 px-6 py-3",children:[p.jsx(Ee,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:e,title:"Back to exercises",children:p.jsx(oo,{className:"h-4 w-4"})}),p.jsx("h2",{className:"text-sm font-semibold",children:t.title})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto",children:[t.activity==="scale-practice"&&p.jsx(BN,{activeNotes:s,onNoteOn:i,onNoteOff:r,highlightedNotes:c,selectedRoot:u,setSelectedRoot:d,selectedScale:h,setSelectedScale:f,exercise:t,onNoteHit:g,onSequenceComplete:y}),t.activity==="chord-detection"&&p.jsx(IN,{activeNotes:s,onNoteOn:i,onNoteOff:r,detectedChord:l,exercise:t,onChordMatch:b,onSequenceComplete:y}),t.activity==="rhythm-training"&&p.jsx(FN,{activeNotes:s,onNoteOn:i,onNoteOff:r,bpm:t.config.bpm,totalBeats:t.config.totalBeats,subdivision:t.config.subdivision,onComplete:v}),t.activity==="drum-patterns"&&p.jsx(HN,{activePads:a,onDrumHit:o,pattern:t.config.pattern,bpm:t.config.bpm,totalBeats:t.config.totalBeats,patternName:t.config.patternName,onComplete:v})]})]})}function dK({activeNotes:t,onNoteOn:e,onNoteOff:n,activePads:s,onDrumHit:i,detectedChord:r}){return p.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-6",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-sm font-semibold text-muted-foreground",children:"Free Play"}),p.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Play freely with piano and drums. Chords are detected automatically."})]}),p.jsx("div",{className:"flex h-16 items-center justify-center rounded-xl",style:{backgroundColor:"oklch(0.14 0.01 270)"},children:r?p.jsx("span",{className:"text-3xl font-bold",children:r.display}):p.jsx("span",{className:"text-sm text-muted-foreground",children:"Play notes to detect chords"})}),p.jsxs("div",{className:"flex gap-4",children:[p.jsx("div",{className:"w-[220px] shrink-0",children:p.jsx(sf,{activePads:s,onHit:i})}),p.jsx("div",{className:"flex-1 overflow-x-auto",children:p.jsx(mr,{activeNotes:t,onNoteOn:e,onNoteOff:n,compact:!0})})]})]})}function hK(){const[t,e]=x.useState(null),[n,s]=x.useState(null),i=x.useCallback(o=>{s(null),e({activity:o})},[]),r=x.useCallback(o=>{e(null),s(o)},[]),a=x.useCallback(()=>{e(null),s(null)},[]);return{config:t,activeExercise:n,startActivity:i,startExercise:r,exitActivity:a}}const UN="micro-daw-practice-progress";function fK(){try{const t=localStorage.getItem(UN);if(t)return JSON.parse(t)}catch{}return{}}function pK(t){localStorage.setItem(UN,JSON.stringify(t))}function mK(){const[t,e]=x.useState(fK),n=x.useCallback(i=>t[i],[t]),s=x.useCallback((i,r,a)=>{e(o=>{const l=o[i],c={...o,[i]:{bestStars:l?Math.max(l.bestStars,r):r,bestAccuracy:l?Math.max(l.bestAccuracy,a):a,attempts:((l==null?void 0:l.attempts)??0)+1}};return pK(c),c})},[]);return{scores:t,getScore:n,saveScore:s}}const gK=[{id:"piano-find-c",title:"Find Middle C",description:"Press the Middle C key (C4)",category:"piano-basics",difficulty:"beginner",activity:"scale-practice",config:{targetNotes:[{midi:60,label:"C4"}],requiredCount:1,instructions:"Find and press the Middle C key (C4) on the piano."},scoring:{type:"note-sequence",threeStars:.9,twoStars:.7}},{id:"piano-white-keys-cg",title:"White Keys: C to G",description:"Play C-D-E-F-G in order",category:"piano-basics",difficulty:"beginner",activity:"scale-practice",config:{targetNotes:[{midi:60,label:"C4"},{midi:62,label:"D4"},{midi:64,label:"E4"},{midi:65,label:"F4"},{midi:67,label:"G4"}],requiredCount:1,instructions:"Play the white keys from C to G in order."},scoring:{type:"note-sequence",threeStars:.9,twoStars:.7}},{id:"piano-cde-pattern",title:"C-D-E Repeating",description:"Play C-D-E pattern 3 times",category:"piano-basics",difficulty:"beginner",activity:"scale-practice",config:{targetNotes:[{midi:60,label:"C4"},{midi:62,label:"D4"},{midi:64,label:"E4"},{midi:60,label:"C4"},{midi:62,label:"D4"},{midi:64,label:"E4"},{midi:60,label:"C4"},{midi:62,label:"D4"},{midi:64,label:"E4"}],requiredCount:1,instructions:"Play the C-D-E pattern three times in a row."},scoring:{type:"note-sequence",threeStars:.9,twoStars:.7}},{id:"piano-fgab-pattern",title:"F-G-A-B Pattern",description:"Play F-G-A-B pattern 3 times",category:"piano-basics",difficulty:"beginner",activity:"scale-practice",config:{targetNotes:[{midi:65,label:"F4"},{midi:67,label:"G4"},{midi:69,label:"A4"},{midi:71,label:"B4"},{midi:65,label:"F4"},{midi:67,label:"G4"},{midi:69,label:"A4"},{midi:71,label:"B4"},{midi:65,label:"F4"},{midi:67,label:"G4"},{midi:69,label:"A4"},{midi:71,label:"B4"}],requiredCount:1,instructions:"Play the F-G-A-B pattern three times in a row."},scoring:{type:"note-sequence",threeStars:.9,twoStars:.7}},{id:"piano-full-octave",title:"Full Octave: C4-C5",description:"Play all white keys from C4 to C5",category:"piano-basics",difficulty:"beginner",activity:"scale-practice",config:{targetNotes:[{midi:60,label:"C4"},{midi:62,label:"D4"},{midi:64,label:"E4"},{midi:65,label:"F4"},{midi:67,label:"G4"},{midi:69,label:"A4"},{midi:71,label:"B4"},{midi:72,label:"C5"}],requiredCount:1,instructions:"Play all the white keys from C4 up to C5."},scoring:{type:"note-sequence",threeStars:.9,twoStars:.7}},{id:"piano-octave-jump",title:"Octave Jumps",description:"Alternate between C4 and C5",category:"piano-basics",difficulty:"beginner",activity:"scale-practice",config:{targetNotes:[{midi:60,label:"C4"},{midi:72,label:"C5"},{midi:60,label:"C4"},{midi:72,label:"C5"},{midi:60,label:"C4"},{midi:72,label:"C5"}],requiredCount:1,instructions:"Alternate between C4 and C5 three times."},scoring:{type:"note-sequence",threeStars:.9,twoStars:.7}}],yK=[{id:"scale-c-major",title:"C Major Scale",description:"Play the C Major scale ascending",category:"scales",difficulty:"beginner",activity:"scale-practice",config:{scaleRoot:0,scaleName:"Major",instructions:"Play the C Major scale up one octave. Highlighted keys show the scale tones."},scoring:{type:"note-accuracy",threeStars:.9,twoStars:.7}},{id:"scale-g-major",title:"G Major Scale",description:"Play the G Major scale ascending",category:"scales",difficulty:"beginner",activity:"scale-practice",config:{scaleRoot:7,scaleName:"Major",instructions:"Play the G Major scale up one octave. Watch for the F#!"},scoring:{type:"note-accuracy",threeStars:.9,twoStars:.7}},{id:"scale-d-major",title:"D Major Scale",description:"Play the D Major scale ascending",category:"scales",difficulty:"beginner",activity:"scale-practice",config:{scaleRoot:2,scaleName:"Major",instructions:"Play the D Major scale. This scale has F# and C#."},scoring:{type:"note-accuracy",threeStars:.9,twoStars:.7}},{id:"scale-f-major",title:"F Major Scale",description:"Play the F Major scale ascending",category:"scales",difficulty:"beginner",activity:"scale-practice",config:{scaleRoot:5,scaleName:"Major",instructions:"Play the F Major scale. This scale has one flat: Bb."},scoring:{type:"note-accuracy",threeStars:.9,twoStars:.7}},{id:"scale-a-minor",title:"A Natural Minor",description:"Play the A Natural Minor scale",category:"scales",difficulty:"intermediate",activity:"scale-practice",config:{scaleRoot:9,scaleName:"Natural Minor",instructions:"Play the A Natural Minor scale. All white keys from A to A!"},scoring:{type:"note-accuracy",threeStars:.9,twoStars:.7}},{id:"scale-e-minor",title:"E Natural Minor",description:"Play the E Natural Minor scale",category:"scales",difficulty:"intermediate",activity:"scale-practice",config:{scaleRoot:4,scaleName:"Natural Minor",instructions:"Play the E Natural Minor scale. This has one sharp: F#."},scoring:{type:"note-accuracy",threeStars:.9,twoStars:.7}},{id:"scale-c-penta-major",title:"C Pentatonic Major",description:"Play the C Pentatonic Major scale",category:"scales",difficulty:"intermediate",activity:"scale-practice",config:{scaleRoot:0,scaleName:"Pentatonic Major",instructions:"Play the C Pentatonic Major scale  5 notes per octave. Great for improvisation!"},scoring:{type:"note-accuracy",threeStars:.9,twoStars:.7}},{id:"scale-a-penta-minor",title:"A Pentatonic Minor",description:"Play the A Pentatonic Minor scale",category:"scales",difficulty:"intermediate",activity:"scale-practice",config:{scaleRoot:9,scaleName:"Pentatonic Minor",instructions:"Play the A Pentatonic Minor scale  the most popular scale for blues and rock solos!"},scoring:{type:"note-accuracy",threeStars:.9,twoStars:.7}}],vK=[{id:"chord-c-major",title:"C Major Chord",description:"Play the C Major chord 3 times",category:"chords",difficulty:"beginner",activity:"chord-detection",config:{targetChords:[{root:"C",quality:"maj",display:"Cmaj"},{root:"C",quality:"maj",display:"Cmaj"},{root:"C",quality:"maj",display:"Cmaj"}],instructions:"Play the C Major chord (C-E-G) three times."},scoring:{type:"chord-sequence",threeStars:.9,twoStars:.7}},{id:"chord-g-major",title:"G Major Chord",description:"Play the G Major chord 3 times",category:"chords",difficulty:"beginner",activity:"chord-detection",config:{targetChords:[{root:"G",quality:"maj",display:"Gmaj"},{root:"G",quality:"maj",display:"Gmaj"},{root:"G",quality:"maj",display:"Gmaj"}],instructions:"Play the G Major chord (G-B-D) three times."},scoring:{type:"chord-sequence",threeStars:.9,twoStars:.7}},{id:"chord-f-major",title:"F Major Chord",description:"Play the F Major chord 3 times",category:"chords",difficulty:"beginner",activity:"chord-detection",config:{targetChords:[{root:"F",quality:"maj",display:"Fmaj"},{root:"F",quality:"maj",display:"Fmaj"},{root:"F",quality:"maj",display:"Fmaj"}],instructions:"Play the F Major chord (F-A-C) three times."},scoring:{type:"chord-sequence",threeStars:.9,twoStars:.7}},{id:"chord-a-minor",title:"A Minor Chord",description:"Play the A Minor chord 3 times",category:"chords",difficulty:"beginner",activity:"chord-detection",config:{targetChords:[{root:"A",quality:"m",display:"Am"},{root:"A",quality:"m",display:"Am"},{root:"A",quality:"m",display:"Am"}],instructions:"Play the A Minor chord (A-C-E) three times."},scoring:{type:"chord-sequence",threeStars:.9,twoStars:.7}},{id:"chord-d-minor",title:"D Minor Chord",description:"Play the D Minor chord 3 times",category:"chords",difficulty:"beginner",activity:"chord-detection",config:{targetChords:[{root:"D",quality:"m",display:"Dm"},{root:"D",quality:"m",display:"Dm"},{root:"D",quality:"m",display:"Dm"}],instructions:"Play the D Minor chord (D-F-A) three times."},scoring:{type:"chord-sequence",threeStars:.9,twoStars:.7}},{id:"chord-e-minor",title:"E Minor Chord",description:"Play the E Minor chord 3 times",category:"chords",difficulty:"beginner",activity:"chord-detection",config:{targetChords:[{root:"E",quality:"m",display:"Em"},{root:"E",quality:"m",display:"Em"},{root:"E",quality:"m",display:"Em"}],instructions:"Play the E Minor chord (E-G-B) three times."},scoring:{type:"chord-sequence",threeStars:.9,twoStars:.7}},{id:"chord-prog-cgamf",title:"I-V-vi-IV Progression",description:"Play C - G - Am - F chord progression",category:"chords",difficulty:"intermediate",activity:"chord-detection",config:{targetChords:[{root:"C",quality:"maj",display:"Cmaj"},{root:"G",quality:"maj",display:"Gmaj"},{root:"A",quality:"m",display:"Am"},{root:"F",quality:"maj",display:"Fmaj"}],instructions:"Play the famous I-V-vi-IV progression: C  G  Am  F"},scoring:{type:"chord-sequence",threeStars:.9,twoStars:.7}},{id:"chord-prog-amfcg",title:"vi-IV-I-V Progression",description:"Play Am - F - C - G chord progression",category:"chords",difficulty:"intermediate",activity:"chord-detection",config:{targetChords:[{root:"A",quality:"m",display:"Am"},{root:"F",quality:"maj",display:"Fmaj"},{root:"C",quality:"maj",display:"Cmaj"},{root:"G",quality:"maj",display:"Gmaj"}],instructions:"Play the vi-IV-I-V progression: Am  F  C  G"},scoring:{type:"chord-sequence",threeStars:.9,twoStars:.7}}],bK=[{id:"rhythm-slow",title:"Slow Quarter Notes",description:"Play on the beat at 80 BPM",category:"rhythm",difficulty:"beginner",activity:"rhythm-training",config:{bpm:80,totalBeats:16,subdivision:"4n",instructions:"Press any key on each beat. 16 beats at a relaxed 80 BPM."},scoring:{type:"rhythm-accuracy",threeStars:.85,twoStars:.6}},{id:"rhythm-medium",title:"Medium Quarter Notes",description:"Play on the beat at 100 BPM",category:"rhythm",difficulty:"beginner",activity:"rhythm-training",config:{bpm:100,totalBeats:16,subdivision:"4n",instructions:"Press any key on each beat. 16 beats at 100 BPM."},scoring:{type:"rhythm-accuracy",threeStars:.85,twoStars:.6}},{id:"rhythm-standard",title:"Standard Tempo",description:"Play on the beat at 120 BPM",category:"rhythm",difficulty:"beginner",activity:"rhythm-training",config:{bpm:120,totalBeats:16,subdivision:"4n",instructions:"Press any key on each beat. 16 beats at the standard 120 BPM."},scoring:{type:"rhythm-accuracy",threeStars:.85,twoStars:.6}},{id:"rhythm-fast",title:"Fast Quarter Notes",description:"Play on the beat at 140 BPM",category:"rhythm",difficulty:"intermediate",activity:"rhythm-training",config:{bpm:140,totalBeats:16,subdivision:"4n",instructions:"Press any key on each beat. 16 beats at a brisk 140 BPM!"},scoring:{type:"rhythm-accuracy",threeStars:.85,twoStars:.6}},{id:"rhythm-eighths",title:"Eighth Notes (90 BPM)",description:"Play eighth notes at 90 BPM",category:"rhythm",difficulty:"intermediate",activity:"rhythm-training",config:{bpm:90,totalBeats:16,subdivision:"8n",instructions:"Play twice per beat (eighth notes). 16 hits at 90 BPM."},scoring:{type:"rhythm-accuracy",threeStars:.85,twoStars:.6}}],xK=[{id:"drums-kick-only",title:"Four on the Floor",description:"Kick drum on every beat",category:"drum-patterns",difficulty:"beginner",activity:"drum-patterns",config:{bpm:90,totalBeats:16,pattern:[[0],[0],[0],[0]],patternName:"Four on the Floor",instructions:"Hit the kick drum on every beat. Keep it steady!"},scoring:{type:"pattern-accuracy",threeStars:.85,twoStars:.6}},{id:"drums-kick-snare",title:"Kick-Snare Alternating",description:"Alternate kick and snare",category:"drum-patterns",difficulty:"beginner",activity:"drum-patterns",config:{bpm:90,totalBeats:16,pattern:[[0],[1],[0],[1]],patternName:"Kick-Snare",instructions:"Alternate between kick and snare on each beat."},scoring:{type:"pattern-accuracy",threeStars:.85,twoStars:.6}},{id:"drums-basic-rock",title:"Basic Rock Beat",description:"Classic rock pattern with kick, snare, and hi-hat",category:"drum-patterns",difficulty:"beginner",activity:"drum-patterns",config:{bpm:100,totalBeats:16,pattern:[[0,2],[1,2],[0,2],[1,2]],patternName:"Basic Rock Beat",instructions:"Play the classic rock beat: kick+hi-hat, snare+hi-hat, kick+hi-hat, snare+hi-hat."},scoring:{type:"pattern-accuracy",threeStars:.85,twoStars:.6}},{id:"drums-hihat-groove",title:"Hi-Hat Groove",description:"Kick and snare with steady hi-hat",category:"drum-patterns",difficulty:"intermediate",activity:"drum-patterns",config:{bpm:95,totalBeats:16,pattern:[[0,2],[2],[1,2],[2]],patternName:"Hi-Hat Groove",instructions:"Keep the hi-hat going while placing kick on 1 and snare on 3."},scoring:{type:"pattern-accuracy",threeStars:.85,twoStars:.6}},{id:"drums-pop-beat",title:"Pop Beat",description:"Standard pop rhythm pattern",category:"drum-patterns",difficulty:"intermediate",activity:"drum-patterns",config:{bpm:110,totalBeats:16,pattern:[[0,2],[1,2],[2],[1,2]],patternName:"Pop Beat",instructions:"Play the pop beat: kick+HH, snare+HH, HH only, snare+HH."},scoring:{type:"pattern-accuracy",threeStars:.85,twoStars:.6}},{id:"drums-open-hh",title:"Open Hi-Hat Pattern",description:"Mix closed and open hi-hat",category:"drum-patterns",difficulty:"intermediate",activity:"drum-patterns",config:{bpm:95,totalBeats:16,pattern:[[0,2],[1,3],[0,2],[1,3]],patternName:"Open Hi-Hat",instructions:"Alternate between closed hi-hat (CHH) and open hi-hat (OHH) on beats 2 and 4."},scoring:{type:"pattern-accuracy",threeStars:.85,twoStars:.6}},{id:"drums-crash-intro",title:"Crash on Beat 1",description:"Accent beat 1 with a crash cymbal",category:"drum-patterns",difficulty:"intermediate",activity:"drum-patterns",config:{bpm:100,totalBeats:16,pattern:[[0,6],[1,2],[0,2],[1,2]],patternName:"Crash Intro",instructions:"Hit crash+kick on beat 1, then play a standard rock pattern for beats 2-4."},scoring:{type:"pattern-accuracy",threeStars:.85,twoStars:.6}}],l_=[...gK,...yK,...vK,...bK,...xK];function _K(t){return t?l_.filter(e=>e.category===t):l_}const c_=[{id:"free-play",icon:iE,title:"Free Play",description:"Play freely with chord detection",color:"oklch(0.70 0.20 270)"},{id:"chord-detection",icon:Wy,title:"Chord Detection",description:"Identify chords in real-time",color:"oklch(0.70 0.20 150)"},{id:"scale-practice",icon:fE,title:"Scale Practice",description:"Explore scales freely",color:"oklch(0.70 0.20 90)"},{id:"rhythm-training",icon:cE,title:"Rhythm Training",description:"Free rhythm practice",color:"oklch(0.70 0.20 25)"},{id:"drum-patterns",icon:qy,title:"Drum Patterns",description:"Free drum practice",color:"oklch(0.70 0.20 310)"}];function SK({activeNotes:t,onNoteOn:e,onNoteOff:n,activePads:s,onDrumHit:i,detectedChord:r,highlightedNotes:a,selectedRoot:o,setSelectedRoot:l,selectedScale:c,setSelectedScale:u}){var w;const{config:d,activeExercise:h,startActivity:f,startExercise:m,exitActivity:g}=hK(),{getScore:b,saveScore:y}=mK(),[v,_]=x.useState(null),S=_K(v);return h?p.jsx(uK,{exercise:h,onExit:g,onSaveScore:y,activeNotes:t,onNoteOn:e,onNoteOff:n,activePads:s,onDrumHit:i,detectedChord:r,highlightedNotes:a,selectedRoot:o,setSelectedRoot:l,selectedScale:c,setSelectedScale:u}):d?p.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[p.jsxs("div",{className:"flex items-center gap-3 border-b border-border/50 px-6 py-3",children:[p.jsx(Ee,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0",onClick:g,title:"Back to activities",children:p.jsx(oo,{className:"h-4 w-4"})}),p.jsx("h2",{className:"text-sm font-semibold",children:(w=c_.find(E=>E.id===d.activity))==null?void 0:w.title})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto",children:[d.activity==="free-play"&&p.jsx(dK,{activeNotes:t,onNoteOn:e,onNoteOff:n,activePads:s,onDrumHit:i,detectedChord:r}),d.activity==="chord-detection"&&p.jsx(IN,{activeNotes:t,onNoteOn:e,onNoteOff:n,detectedChord:r}),d.activity==="scale-practice"&&p.jsx(BN,{activeNotes:t,onNoteOn:e,onNoteOff:n,highlightedNotes:a,selectedRoot:o,setSelectedRoot:l,selectedScale:c,setSelectedScale:u}),d.activity==="rhythm-training"&&p.jsx(FN,{activeNotes:t,onNoteOn:e,onNoteOff:n}),d.activity==="drum-patterns"&&p.jsx(HN,{activePads:s,onDrumHit:i})]})]}):p.jsxs("div",{className:"flex flex-1 flex-col overflow-hidden",children:[p.jsxs("div",{className:"border-b border-border/50 px-6 py-4",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(lE,{className:"h-5 w-5 text-muted-foreground"}),p.jsx("h1",{className:"text-lg font-bold",children:"Practice"})]}),p.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Free-play activities and scored exercises with star ratings"})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4",children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("h2",{className:"mb-3 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Free Activities"}),p.jsx("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-3 lg:grid-cols-5",children:c_.map(E=>p.jsx(qY,{icon:E.icon,title:E.title,description:E.description,color:E.color,onClick:()=>f(E.id)},E.id))})]}),p.jsxs("div",{children:[p.jsx("h2",{className:"mb-3 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Exercises"}),p.jsx("div",{className:"mb-4",children:p.jsx($Y,{selected:v,onChange:_})}),p.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3",children:S.map(E=>p.jsx(QY,{exercise:E,score:b(E.id),onClick:()=>m(E)},E.id))})]})]})]})}function wK(){const[t,e]=x.useState("daw"),n=x.useCallback(s=>{e(s)},[]);return{mode:t,switchMode:n}}function CK(){const[t,e]=x.useState(!1),[n,s]=x.useState(xk),[i,r]=x.useState(0),a=x.useCallback(async()=>{await Ot.start(),e(!0)},[]),o=x.useCallback(c=>{Ot.setVolume(c),s(c)},[]),l=x.useCallback(c=>{Ot.setPreset(c),r(c)},[]);return{started:t,volume:n,presetIndex:i,start:a,changeVolume:o,changePreset:l}}class ts{constructor(e=!1){this.eventMap={},this.eventsSuspended=e==!0}addListener(e,n,s={}){if(typeof e=="string"&&e.length<1||e instanceof String&&e.length<1||typeof e!="string"&&!(e instanceof String)&&e!==ts.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(typeof n!="function")throw new TypeError("The callback must be a function.");const i=new u_(e,this,n,s);return this.eventMap[e]||(this.eventMap[e]=[]),s.prepend?this.eventMap[e].unshift(i):this.eventMap[e].push(i),i}addOneTimeListener(e,n,s={}){s.remaining=1,this.addListener(e,n,s)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(e,n){return e===void 0?this.eventMap[ts.ANY_EVENT]&&this.eventMap[ts.ANY_EVENT].length>0?!0:Object.entries(this.eventMap).some(([,s])=>s.length>0):this.eventMap[e]&&this.eventMap[e].length>0?n instanceof u_?this.eventMap[e].filter(i=>i===n).length>0:typeof n=="function"?this.eventMap[e].filter(i=>i.callback===n).length>0:n==null:!1}get eventNames(){return Object.keys(this.eventMap)}getListeners(e){return this.eventMap[e]||[]}suspendEvent(e){this.getListeners(e).forEach(n=>{n.suspended=!0})}unsuspendEvent(e){this.getListeners(e).forEach(n=>{n.suspended=!1})}getListenerCount(e){return this.getListeners(e).length}emit(e,...n){if(typeof e!="string"&&!(e instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let s=[],i=this.eventMap[ts.ANY_EVENT]||[];return this.eventMap[e]&&(i=i.concat(this.eventMap[e])),i.forEach(r=>{if(r.suspended)return;let a=[...n];Array.isArray(r.arguments)&&(a=a.concat(r.arguments)),r.remaining>0&&(s.push(r.callback.apply(r.context,a)),r.count++),--r.remaining<1&&r.remove()}),s}removeListener(e,n,s={}){if(e===void 0){this.eventMap={};return}else if(!this.eventMap[e])return;let i=this.eventMap[e].filter(r=>n&&r.callback!==n||s.remaining&&s.remaining!==r.remaining||s.context&&s.context!==r.context);i.length?this.eventMap[e]=i:delete this.eventMap[e]}async waitFor(e,n={}){return n.duration=parseInt(n.duration),(isNaN(n.duration)||n.duration<=0)&&(n.duration=1/0),new Promise((s,i)=>{let r,a=this.addListener(e,()=>{clearTimeout(r),s()},{remaining:1});n.duration!==1/0&&(r=setTimeout(()=>{a.remove(),i("The duration expired before the event was emitted.")},n.duration))})}get eventCount(){return Object.keys(this.eventMap).length}}class u_{constructor(e,n,s,i={}){if(typeof e!="string"&&!(e instanceof String)&&e!==ts.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!n)throw new ReferenceError("The 'target' parameter is mandatory.");if(typeof s!="function")throw new TypeError("The 'callback' must be a function.");i.arguments!==void 0&&!Array.isArray(i.arguments)&&(i.arguments=[i.arguments]),i=Object.assign({context:n,remaining:1/0,arguments:void 0,duration:1/0},i),i.duration!==1/0&&setTimeout(()=>this.remove(),i.duration),this.arguments=i.arguments,this.callback=s,this.context=i.context,this.count=0,this.event=e,this.remaining=parseInt(i.remaining)>=1?parseInt(i.remaining):1/0,this.suspended=!1,this.target=n}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}/**
 * The `Enumerations` class contains enumerations and arrays of elements used throughout the
 * library. All its properties are static and should be referenced using the class name. For
 * example: `Enumerations.CHANNEL_MESSAGES`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class F{static get MIDI_CHANNEL_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MESSAGES enum instead."),F.CHANNEL_MESSAGES}static get CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_NUMBERS(){return this.validation&&console.warn("The MIDI_CHANNEL_NUMBERS array has been deprecated. Use the Enumerations.CHANNEL_NUMBERS array instead."),[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been deprecated. Use the Enumerations.CHANNEL_MODE_MESSAGES enum instead."),F.CHANNEL_MODE_MESSAGES}static get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been deprecated. Use the Enumerations.CONTROL_CHANGE_MESSAGES array instead."),{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get CONTROL_CHANGE_MESSAGES(){return[{number:0,name:"bankselectcoarse",description:"Bank Select (Coarse)",position:"msb"},{number:1,name:"modulationwheelcoarse",description:"Modulation Wheel (Coarse)",position:"msb"},{number:2,name:"breathcontrollercoarse",description:"Breath Controller (Coarse)",position:"msb"},{number:3,name:"controller3",description:"Undefined",position:"msb"},{number:4,name:"footcontrollercoarse",description:"Foot Controller (Coarse)",position:"msb"},{number:5,name:"portamentotimecoarse",description:"Portamento Time (Coarse)",position:"msb"},{number:6,name:"dataentrycoarse",description:"Data Entry (Coarse)",position:"msb"},{number:7,name:"volumecoarse",description:"Channel Volume (Coarse)",position:"msb"},{number:8,name:"balancecoarse",description:"Balance (Coarse)",position:"msb"},{number:9,name:"controller9",description:"Controller 9 (Coarse)",position:"msb"},{number:10,name:"pancoarse",description:"Pan (Coarse)",position:"msb"},{number:11,name:"expressioncoarse",description:"Expression Controller (Coarse)",position:"msb"},{number:12,name:"effectcontrol1coarse",description:"Effect Control 1 (Coarse)",position:"msb"},{number:13,name:"effectcontrol2coarse",description:"Effect Control 2 (Coarse)",position:"msb"},{number:14,name:"controller14",description:"Undefined",position:"msb"},{number:15,name:"controller15",description:"Undefined",position:"msb"},{number:16,name:"generalpurposecontroller1",description:"General Purpose Controller 1 (Coarse)",position:"msb"},{number:17,name:"generalpurposecontroller2",description:"General Purpose Controller 2 (Coarse)",position:"msb"},{number:18,name:"generalpurposecontroller3",description:"General Purpose Controller 3 (Coarse)",position:"msb"},{number:19,name:"generalpurposecontroller4",description:"General Purpose Controller 4 (Coarse)",position:"msb"},{number:20,name:"controller20",description:"Undefined",position:"msb"},{number:21,name:"controller21",description:"Undefined",position:"msb"},{number:22,name:"controller22",description:"Undefined",position:"msb"},{number:23,name:"controller23",description:"Undefined",position:"msb"},{number:24,name:"controller24",description:"Undefined",position:"msb"},{number:25,name:"controller25",description:"Undefined",position:"msb"},{number:26,name:"controller26",description:"Undefined",position:"msb"},{number:27,name:"controller27",description:"Undefined",position:"msb"},{number:28,name:"controller28",description:"Undefined",position:"msb"},{number:29,name:"controller29",description:"Undefined",position:"msb"},{number:30,name:"controller30",description:"Undefined",position:"msb"},{number:31,name:"controller31",description:"Undefined",position:"msb"},{number:32,name:"bankselectfine",description:"Bank Select (Fine)",position:"lsb"},{number:33,name:"modulationwheelfine",description:"Modulation Wheel (Fine)",position:"lsb"},{number:34,name:"breathcontrollerfine",description:"Breath Controller (Fine)",position:"lsb"},{number:35,name:"controller35",description:"Undefined",position:"lsb"},{number:36,name:"footcontrollerfine",description:"Foot Controller (Fine)",position:"lsb"},{number:37,name:"portamentotimefine",description:"Portamento Time (Fine)",position:"lsb"},{number:38,name:"dataentryfine",description:"Data Entry (Fine)",position:"lsb"},{number:39,name:"channelvolumefine",description:"Channel Volume (Fine)",position:"lsb"},{number:40,name:"balancefine",description:"Balance (Fine)",position:"lsb"},{number:41,name:"controller41",description:"Undefined",position:"lsb"},{number:42,name:"panfine",description:"Pan (Fine)",position:"lsb"},{number:43,name:"expressionfine",description:"Expression Controller (Fine)",position:"lsb"},{number:44,name:"effectcontrol1fine",description:"Effect control 1 (Fine)",position:"lsb"},{number:45,name:"effectcontrol2fine",description:"Effect control 2 (Fine)",position:"lsb"},{number:46,name:"controller46",description:"Undefined",position:"lsb"},{number:47,name:"controller47",description:"Undefined",position:"lsb"},{number:48,name:"controller48",description:"General Purpose Controller 1 (Fine)",position:"lsb"},{number:49,name:"controller49",description:"General Purpose Controller 2 (Fine)",position:"lsb"},{number:50,name:"controller50",description:"General Purpose Controller 3 (Fine)",position:"lsb"},{number:51,name:"controller51",description:"General Purpose Controller 4 (Fine)",position:"lsb"},{number:52,name:"controller52",description:"Undefined",position:"lsb"},{number:53,name:"controller53",description:"Undefined",position:"lsb"},{number:54,name:"controller54",description:"Undefined",position:"lsb"},{number:55,name:"controller55",description:"Undefined",position:"lsb"},{number:56,name:"controller56",description:"Undefined",position:"lsb"},{number:57,name:"controller57",description:"Undefined",position:"lsb"},{number:58,name:"controller58",description:"Undefined",position:"lsb"},{number:59,name:"controller59",description:"Undefined",position:"lsb"},{number:60,name:"controller60",description:"Undefined",position:"lsb"},{number:61,name:"controller61",description:"Undefined",position:"lsb"},{number:62,name:"controller62",description:"Undefined",position:"lsb"},{number:63,name:"controller63",description:"Undefined",position:"lsb"},{number:64,name:"damperpedal",description:"Damper Pedal On/Off"},{number:65,name:"portamento",description:"Portamento On/Off"},{number:66,name:"sostenuto",description:"Sostenuto On/Off"},{number:67,name:"softpedal",description:"Soft Pedal On/Off"},{number:68,name:"legatopedal",description:"Legato Pedal On/Off"},{number:69,name:"hold2",description:"Hold 2 On/Off"},{number:70,name:"soundvariation",description:"Sound Variation",position:"lsb"},{number:71,name:"resonance",description:"Resonance",position:"lsb"},{number:72,name:"releasetime",description:"Release Time",position:"lsb"},{number:73,name:"attacktime",description:"Attack Time",position:"lsb"},{number:74,name:"brightness",description:"Brightness",position:"lsb"},{number:75,name:"decaytime",description:"Decay Time",position:"lsb"},{number:76,name:"vibratorate",description:"Vibrato Rate",position:"lsb"},{number:77,name:"vibratodepth",description:"Vibrato Depth",position:"lsb"},{number:78,name:"vibratodelay",description:"Vibrato Delay",position:"lsb"},{number:79,name:"controller79",description:"Undefined",position:"lsb"},{number:80,name:"generalpurposecontroller5",description:"General Purpose Controller 5",position:"lsb"},{number:81,name:"generalpurposecontroller6",description:"General Purpose Controller 6",position:"lsb"},{number:82,name:"generalpurposecontroller7",description:"General Purpose Controller 7",position:"lsb"},{number:83,name:"generalpurposecontroller8",description:"General Purpose Controller 8",position:"lsb"},{number:84,name:"portamentocontrol",description:"Portamento Control",position:"lsb"},{number:85,name:"controller85",description:"Undefined"},{number:86,name:"controller86",description:"Undefined"},{number:87,name:"controller87",description:"Undefined"},{number:88,name:"highresolutionvelocityprefix",description:"High Resolution Velocity Prefix",position:"lsb"},{number:89,name:"controller89",description:"Undefined"},{number:90,name:"controller90",description:"Undefined"},{number:91,name:"effect1depth",description:"Effects 1 Depth (Reverb Send Level)"},{number:92,name:"effect2depth",description:"Effects 2 Depth"},{number:93,name:"effect3depth",description:"Effects 3 Depth (Chorus Send Level)"},{number:94,name:"effect4depth",description:"Effects 4 Depth"},{number:95,name:"effect5depth",description:"Effects 5 Depth"},{number:96,name:"dataincrement",description:"Data Increment"},{number:97,name:"datadecrement",description:"Data Decrement"},{number:98,name:"nonregisteredparameterfine",description:"Non-Registered Parameter Number (Fine)",position:"lsb"},{number:99,name:"nonregisteredparametercoarse",description:"Non-Registered Parameter Number (Coarse)",position:"msb"},{number:100,name:"registeredparameterfine",description:"Registered Parameter Number (Fine)",position:"lsb"},{number:101,name:"registeredparametercoarse",description:"Registered Parameter Number (Coarse)",position:"msb"},{number:102,name:"controller102",description:"Undefined"},{number:103,name:"controller103",description:"Undefined"},{number:104,name:"controller104",description:"Undefined"},{number:105,name:"controller105",description:"Undefined"},{number:106,name:"controller106",description:"Undefined"},{number:107,name:"controller107",description:"Undefined"},{number:108,name:"controller108",description:"Undefined"},{number:109,name:"controller109",description:"Undefined"},{number:110,name:"controller110",description:"Undefined"},{number:111,name:"controller111",description:"Undefined"},{number:112,name:"controller112",description:"Undefined"},{number:113,name:"controller113",description:"Undefined"},{number:114,name:"controller114",description:"Undefined"},{number:115,name:"controller115",description:"Undefined"},{number:116,name:"controller116",description:"Undefined"},{number:117,name:"controller117",description:"Undefined"},{number:118,name:"controller118",description:"Undefined"},{number:119,name:"controller119",description:"Undefined"},{number:120,name:"allsoundoff",description:"All Sound Off"},{number:121,name:"resetallcontrollers",description:"Reset All Controllers"},{number:122,name:"localcontrol",description:"Local Control On/Off"},{number:123,name:"allnotesoff",description:"All Notes Off"},{number:124,name:"omnimodeoff",description:"Omni Mode Off"},{number:125,name:"omnimodeon",description:"Omni Mode On"},{number:126,name:"monomodeon",description:"Mono Mode On"},{number:127,name:"polymodeon",description:"Poly Mode On"}]}static get REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_REGISTERED_PARAMETERS(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETERS enum has been deprecated. Use the Enumerations.REGISTERED_PARAMETERS enum instead."),F.MIDI_REGISTERED_PARAMETERS}static get SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been deprecated. Use the Enumerations.SYSTEM_MESSAGES enum instead."),F.SYSTEM_MESSAGES}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-dataincrement","nrpn-datadecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-dataincrement","rpn-datadecrement","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn-databuttonincrement","rpn-databuttondecrement"]}}/**
 * The `Note` class represents a single musical note such as `"D3"`, `"G#4"`, `"F-1"`, `"Gb7"`, etc.
 *
 * `Note` objects can be played back on a single channel by calling
 * [`OutputChannel.playNote()`]{@link OutputChannel#playNote} or, on multiple channels of the same
 * output, by calling [`Output.playNote()`]{@link Output#playNote}.
 *
 * The note has [`attack`](#attack) and [`release`](#release) velocities set at `0.5` by default.
 * These can be changed by passing in the appropriate option. It is also possible to set a
 * system-wide default for attack and release velocities by using the
 * [`WebMidi.defaults`](WebMidi#defaults) property.
 *
 * If you prefer to work with raw MIDI values (`0` to `127`), you can use [`rawAttack`](#rawAttack) and
 * [`rawRelease`](#rawRelease) to both get and set the values.
 *
 * The note may have a [`duration`](#duration). If it does, playback will be automatically stopped
 * when the duration has elapsed by sending a `"noteoff"` event. By default, the duration is set to
 * `Infinity`. In this case, it will never stop playing unless explicitly stopped by calling a
 * method such as [`OutputChannel.stopNote()`]{@link OutputChannel#stopNote},
 * [`Output.stopNote()`]{@link Output#stopNote} or similar.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class Ia{constructor(e,n={}){this.duration=U.defaults.note.duration,this.attack=U.defaults.note.attack,this.release=U.defaults.note.release,n.duration!=null&&(this.duration=n.duration),n.attack!=null&&(this.attack=n.attack),n.rawAttack!=null&&(this.attack=q.from7bitToFloat(n.rawAttack)),n.release!=null&&(this.release=n.release),n.rawRelease!=null&&(this.release=q.from7bitToFloat(n.rawRelease)),Number.isInteger(e)?this.identifier=q.toNoteIdentifier(e):this.identifier=e}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(e){const n=q.getNoteDetails(e);if(U.validation&&!e)throw new Error("Invalid note identifier");this._name=n.name,this._accidental=n.accidental,this._octave=n.octave}get name(){return this._name}set name(e){if(U.validation&&(e=e.toUpperCase(),!["C","D","E","F","G","A","B"].includes(e)))throw new Error("Invalid name value");this._name=e}get accidental(){return this._accidental}set accidental(e){if(U.validation&&(e=e.toLowerCase(),!["#","##","b","bb"].includes(e)))throw new Error("Invalid accidental value");this._accidental=e}get octave(){return this._octave}set octave(e){if(U.validation&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid octave value");this._octave=e}get duration(){return this._duration}set duration(e){if(U.validation&&(e=parseFloat(e),isNaN(e)||e===null||e<0))throw new RangeError("Invalid duration value.");this._duration=e}get attack(){return this._attack}set attack(e){if(U.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid attack value.");this._attack=e}get release(){return this._release}set release(e){if(U.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid release value.");this._release=e}get rawAttack(){return q.fromFloatTo7Bit(this._attack)}set rawAttack(e){this._attack=q.from7bitToFloat(e)}get rawRelease(){return q.fromFloatTo7Bit(this._release)}set rawRelease(e){this._release=q.from7bitToFloat(e)}get number(){return q.toNoteNumber(this.identifier)}getOffsetNumber(e=0,n=0){return U.validation&&(e=parseInt(e)||0,n=parseInt(n)||0),Math.min(Math.max(this.number+e*12+n,0),127)}}/**
 * The `Utilities` class contains general-purpose utility methods. All methods are static and
 * should be called using the class name. For example: `Utilities.getNoteDetails("C4")`.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class q{static toNoteNumber(e,n=0){if(n=n==null?0:parseInt(n),isNaN(n))throw new RangeError("Invalid 'octaveOffset' value");typeof e!="string"&&(e="");const s=this.getNoteDetails(e);if(!s)throw new TypeError("Invalid note identifier");const i={C:0,D:2,E:4,F:5,G:7,A:9,B:11};let r=(s.octave+1+n)*12;if(r+=i[s.name],s.accidental&&(s.accidental.startsWith("b")?r-=s.accidental.length:r+=s.accidental.length),r<0||r>127)throw new RangeError("Invalid octaveOffset value");return r}static getNoteDetails(e){Number.isInteger(e)&&(e=this.toNoteIdentifier(e));const n=e.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!n)throw new TypeError("Invalid note identifier");const s=n[1].toUpperCase(),i=parseInt(n[3]);let r=n[2].toLowerCase();return r=r===""?void 0:r,{accidental:r,identifier:s+(r||"")+i,name:s,octave:i}}static sanitizeChannels(e){let n;if(U.validation){if(e==="all")n=["all"];else if(e==="none")return[]}return Array.isArray(e)?n=e:n=[e],n.indexOf("all")>-1&&(n=F.MIDI_CHANNEL_NUMBERS),n.map(function(s){return parseInt(s)}).filter(function(s){return s>=1&&s<=16})}static toTimestamp(e){let n=!1;const s=parseFloat(e);return isNaN(s)?!1:(typeof e=="string"&&e.substring(0,1)==="+"?s>=0&&(n=U.time+s):s>=0&&(n=s),n)}static guessNoteNumber(e,n){n=parseInt(n)||0;let s=!1;if(Number.isInteger(e)&&e>=0&&e<=127)s=parseInt(e);else if(parseInt(e)>=0&&parseInt(e)<=127)s=parseInt(e);else if(typeof e=="string"||e instanceof String)try{s=this.toNoteNumber(e.trim(),n)}catch{return!1}return s}static toNoteIdentifier(e,n){if(e=parseInt(e),isNaN(e)||e<0||e>127)throw new RangeError("Invalid note number");if(n=n==null?0:parseInt(n),isNaN(n))throw new RangeError("Invalid octaveOffset value");const s=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],i=Math.floor(e/12-1)+n;return s[e%12]+i.toString()}static buildNote(e,n={}){if(n.octaveOffset=parseInt(n.octaveOffset)||0,e instanceof Ia)return e;let s=this.guessNoteNumber(e,n.octaveOffset);if(s===!1)throw new TypeError(`The input could not be parsed as a note (${e})`);return n.octaveOffset=void 0,new Ia(s,n)}static buildNoteArray(e,n={}){let s=[];return Array.isArray(e)||(e=[e]),e.forEach(i=>{s.push(this.buildNote(i,n))}),s}static from7bitToFloat(e){return e===1/0&&(e=127),e=parseInt(e)||0,Math.min(Math.max(e/127,0),1)}static fromFloatTo7Bit(e){return e===1/0&&(e=1),e=parseFloat(e)||0,Math.min(Math.max(Math.round(e*127),0),127)}static fromMsbLsbToFloat(e,n=0){U.validation&&(e=Math.min(Math.max(parseInt(e)||0,0),127),n=Math.min(Math.max(parseInt(n)||0,0),127));const s=((e<<7)+n)/16383;return Math.min(Math.max(s,0),1)}static fromFloatToMsbLsb(e){U.validation&&(e=Math.min(Math.max(parseFloat(e)||0,0),1));const n=Math.round(e*16383);return{msb:n>>7,lsb:n&127}}static offsetNumber(e,n=0,s=0){if(U.validation){if(e=parseInt(e),isNaN(e))throw new Error("Invalid note number");n=parseInt(n)||0,s=parseInt(s)||0}return Math.min(Math.max(e+n*12+s,0),127)}static getPropertyByValue(e,n){return Object.keys(e).find(s=>e[s]===n)}static getCcNameByNumber(e){if(!(U.validation&&(e=parseInt(e),!(e>=0&&e<=127))))return F.CONTROL_CHANGE_MESSAGES[e].name}static getCcNumberByName(e){let n=F.CONTROL_CHANGE_MESSAGES.find(s=>s.name===e);return n?n.number:F.MIDI_CONTROL_CHANGE_MESSAGES[e]}static getChannelModeByNumber(e){if(!(e>=120&&e<=127))return!1;for(let n in F.CHANNEL_MODE_MESSAGES)if(F.CHANNEL_MODE_MESSAGES.hasOwnProperty(n)&&e===F.CHANNEL_MODE_MESSAGES[n])return n;return!1}static get isNode(){return typeof process<"u"&&process.versions!=null&&process.versions.node!=null}static get isBrowser(){return typeof window<"u"&&typeof window.document<"u"}}/**
 * The `OutputChannel` class represents a single output MIDI channel. `OutputChannel` objects are
 * provided by an [`Output`](Output) port which, itself, is made available by a device. The
 * `OutputChannel` object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `OutputChannel` objects can be found inside the parent output's
 * [`channels`]{@link Output#channels} property.
 *
 * @param {Output} output The [`Output`](Output) this channel belongs to.
 * @param {number} number The MIDI channel number (`1` - `16`).
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class TK extends ts{constructor(e,n){super(),this._output=e,this._number=n,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(e,n={time:0}){return this.output.send(e,n),this}sendKeyAftertouch(e,n,s={}){if(U.validation){if(s.useRawValue&&(s.rawValue=s.useRawValue),isNaN(parseFloat(n)))throw new RangeError("Invalid key aftertouch value.");if(s.rawValue){if(!(n>=0&&n<=127&&Number.isInteger(n)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(n>=0&&n<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}s.rawValue||(n=q.fromFloatTo7Bit(n));const i=U.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(e)||(e=[e]),q.buildNoteArray(e).forEach(r=>{this.send([(F.CHANNEL_MESSAGES.keyaftertouch<<4)+(this.number-1),r.getOffsetNumber(i),n],{time:q.toTimestamp(s.time)})}),this}sendControlChange(e,n,s={}){if(typeof e=="string"&&(e=q.getCcNumberByName(e)),Array.isArray(n)||(n=[n]),U.validation){if(e===void 0)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if(n=n.map(i=>{const r=Math.min(Math.max(parseInt(i),0),127);if(isNaN(r))throw new TypeError("Values must be integers between 0 and 127");return r}),n.length===2&&e>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return n.forEach((i,r)=>{this.send([(F.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e+r*32,n[r]],{time:q.toTimestamp(s.time)})}),this}_selectNonRegisteredParameter(e,n={}){return this.sendControlChange(99,e[0],n),this.sendControlChange(98,e[1],n),this}_deselectRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_deselectNonRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_selectRegisteredParameter(e,n={}){return this.sendControlChange(101,e[0],n),this.sendControlChange(100,e[1],n),this}_setCurrentParameter(e,n={}){return e=[].concat(e),this.sendControlChange(6,e[0],n),e.length<2?this:(this.sendControlChange(38,e[1],n),this)}sendRpnDecrement(e,n={}){if(Array.isArray(e)||(e=F.REGISTERED_PARAMETERS[e]),U.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let s=!1;if(Object.getOwnPropertyNames(F.REGISTERED_PARAMETERS).forEach(i=>{F.REGISTERED_PARAMETERS[i][0]===e[0]&&F.REGISTERED_PARAMETERS[i][1]===e[1]&&(s=!0)}),!s)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,n),this.sendControlChange(97,0,n),this._deselectRegisteredParameter(n),this}sendRpnIncrement(e,n={}){if(Array.isArray(e)||(e=F.REGISTERED_PARAMETERS[e]),U.validation){if(e===void 0)throw new TypeError("The specified registered parameter is invalid.");let s=!1;if(Object.getOwnPropertyNames(F.REGISTERED_PARAMETERS).forEach(i=>{F.REGISTERED_PARAMETERS[i][0]===e[0]&&F.REGISTERED_PARAMETERS[i][1]===e[1]&&(s=!0)}),!s)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,n),this.sendControlChange(96,0,n),this._deselectRegisteredParameter(n),this}playNote(e,n={}){this.sendNoteOn(e,n);const s=Array.isArray(e)?e:[e];for(let i of s)if(parseInt(i.duration)>0){const r={time:(q.toTimestamp(n.time)||U.time)+parseInt(i.duration),release:i.release,rawRelease:i.rawRelease};this.sendNoteOff(i,r)}else if(parseInt(n.duration)>0){const r={time:(q.toTimestamp(n.time)||U.time)+parseInt(n.duration),release:n.release,rawRelease:n.rawRelease};this.sendNoteOff(i,r)}return this}sendNoteOff(e,n={}){if(U.validation){if(n.rawRelease!=null&&!(n.rawRelease>=0&&n.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(n.release!=null&&!(n.release>=0&&n.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");n.rawVelocity&&(n.rawRelease=n.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),n.velocity&&(n.release=n.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let s=64;n.rawRelease!=null?s=n.rawRelease:isNaN(n.release)||(s=Math.round(n.release*127));const i=U.octaveOffset+this.output.octaveOffset+this.octaveOffset;return q.buildNoteArray(e,{rawRelease:parseInt(s)}).forEach(r=>{this.send([(F.CHANNEL_MESSAGES.noteoff<<4)+(this.number-1),r.getOffsetNumber(i),r.rawRelease],{time:q.toTimestamp(n.time)})}),this}stopNote(e,n={}){return this.sendNoteOff(e,n)}sendNoteOn(e,n={}){if(U.validation){if(n.rawAttack!=null&&!(n.rawAttack>=0&&n.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(n.attack!=null&&!(n.attack>=0&&n.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");n.rawVelocity&&(n.rawAttack=n.velocity,n.rawRelease=n.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),n.velocity&&(n.attack=n.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let s=64;n.rawAttack!=null?s=n.rawAttack:isNaN(n.attack)||(s=Math.round(n.attack*127));const i=U.octaveOffset+this.output.octaveOffset+this.octaveOffset;return q.buildNoteArray(e,{rawAttack:s}).forEach(r=>{this.send([(F.CHANNEL_MESSAGES.noteon<<4)+(this.number-1),r.getOffsetNumber(i),r.rawAttack],{time:q.toTimestamp(n.time)})}),this}sendChannelMode(e,n=0,s={}){if(typeof e=="string"&&(e=F.CHANNEL_MODE_MESSAGES[e]),U.validation){if(e===void 0)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(e)||!(e>=120&&e<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(n))||n<0||n>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([(F.CHANNEL_MESSAGES.controlchange<<4)+(this.number-1),e,n],{time:q.toTimestamp(s.time)}),this}sendOmniMode(e,n={}){return e===void 0||e?this.sendChannelMode("omnimodeon",0,n):this.sendChannelMode("omnimodeoff",0,n),this}sendChannelAftertouch(e,n={}){if(U.validation){if(isNaN(parseFloat(e)))throw new RangeError("Invalid channel aftertouch value.");if(n.rawValue){if(!(e>=0&&e<=127&&Number.isInteger(e)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(e>=0&&e<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return n.rawValue||(e=q.fromFloatTo7Bit(e)),this.send([(F.CHANNEL_MESSAGES.channelaftertouch<<4)+(this.number-1),Math.round(e)],{time:q.toTimestamp(n.time)}),this}sendMasterTuning(e,n={}){if(e=parseFloat(e)||0,U.validation&&!(e>-65&&e<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let s=Math.floor(e)+64,i=e-Math.floor(e);i=Math.round((i+1)/2*16383);let r=i>>7&127,a=i&127;return this.sendRpnValue("channelcoarsetuning",s,n),this.sendRpnValue("channelfinetuning",[r,a],n),this}sendModulationRange(e,n,s={}){if(U.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(n!=null&&(!Number.isInteger(n)||!(n>=0&&n<=127)))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return n>=0&&n<=127||(n=0),this.sendRpnValue("modulationrange",[e,n],s),this}sendNrpnValue(e,n,s={}){if(n=[].concat(n),U.validation){if(!Array.isArray(e)||!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");n.forEach(i=>{if(!(i>=0&&i<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(e,s),this._setCurrentParameter(n,s),this._deselectNonRegisteredParameter(s),this}sendPitchBend(e,n={}){if(U.validation)if(n.rawValue&&Array.isArray(e)){if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(n.rawValue&&!Array.isArray(e)){if(!(e>=0&&e<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(e)||e===null)throw new RangeError("Invalid pitch bend value.");if(!(e>=-1&&e<=1))throw new RangeError("The pitch bend value must be a float between -1 and 1.")}let s=0,i=0;if(n.rawValue&&Array.isArray(e))s=e[0],i=e[1];else if(n.rawValue&&!Array.isArray(e))s=e;else{const r=q.fromFloatToMsbLsb((e+1)/2);s=r.msb,i=r.lsb}return this.send([(F.CHANNEL_MESSAGES.pitchbend<<4)+(this.number-1),i,s],{time:q.toTimestamp(n.time)}),this}sendPitchBendRange(e,n,s={}){if(U.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(n)||!(n>=0&&n<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[e,n],s),this}sendProgramChange(e,n={}){if(e=parseInt(e)||0,U.validation&&!(e>=0&&e<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([(F.CHANNEL_MESSAGES.programchange<<4)+(this.number-1),e],{time:q.toTimestamp(n.time)}),this}sendRpnValue(e,n,s={}){if(Array.isArray(e)||(e=F.REGISTERED_PARAMETERS[e]),U.validation){if(!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(n).forEach(i=>{if(!(i>=0&&i<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(e,s),this._setCurrentParameter(n,s),this._deselectRegisteredParameter(s),this}sendTuningBank(e,n={}){if(U.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",e,n),this}sendTuningProgram(e,n={}){if(U.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",e,n),this}sendLocalControl(e,n={}){return e?this.sendChannelMode("localcontrol",127,n):this.sendChannelMode("localcontrol",0,n)}sendAllNotesOff(e={}){return this.sendChannelMode("allnotesoff",0,e)}sendAllSoundOff(e={}){return this.sendChannelMode("allsoundoff",0,e)}sendResetAllControllers(e={}){return this.sendChannelMode("resetallcontrollers",0,e)}sendPolyphonicMode(e,n={}){return e==="mono"?this.sendChannelMode("monomodeon",0,n):this.sendChannelMode("polymodeon",0,n)}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get output(){return this._output}get number(){return this._number}}/**
 * The `Output` class represents a single MIDI output port (not to be confused with a MIDI channel).
 * A port is made available by a MIDI device. A MIDI device can advertise several input and output
 * ports. Each port has 16 MIDI channels which can be accessed via the [`channels`](#channels)
 * property.
 *
 * The `Output` object is automatically instantiated by the library according to the host's MIDI
 * subsystem and should not be directly instantiated.
 *
 * You can access all available `Output` objects by referring to the
 * [`WebMidi.outputs`](WebMidi#outputs) array or by using methods such as
 * [`WebMidi.getOutputByName()`](WebMidi#getOutputByName) or
 * [`WebMidi.getOutputById()`](WebMidi#getOutputById).
 *
 * @fires Output#opened
 * @fires Output#disconnected
 * @fires Output#closed
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class hg extends ts{constructor(e){super(),this._midiOutput=e,this._octaveOffset=0,this.channels=[];for(let n=1;n<=16;n++)this.channels[n]=new TK(this,n);this._midiOutput.onstatechange=this._onStateChange.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._midiOutput&&(this._midiOutput.onstatechange=null),await this.close(),this._midiOutput=null}_onStateChange(e){let n={timestamp:U.time};e.port.connection==="open"?(n.type="opened",n.target=this,n.port=n.target,this.emit("opened",n)):e.port.connection==="closed"&&e.port.state==="connected"?(n.type="closed",n.target=this,n.port=n.target,this.emit("closed",n)):e.port.connection==="closed"&&e.port.state==="disconnected"?(n.type="disconnected",n.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",n)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught:",e.port.connection,e.port.state)}async open(){try{return await this._midiOutput.open(),Promise.resolve(this)}catch(e){return Promise.reject(e)}}async close(){this._midiOutput?await this._midiOutput.close():await Promise.resolve()}send(e,n={time:0},s=0){if(e instanceof GN&&(e=q.isNode?e.data:e.rawData),e instanceof Uint8Array&&q.isNode&&(e=Array.from(e)),U.validation){if(!Array.isArray(e)&&!(e instanceof Uint8Array)&&(e=[e],Array.isArray(n)&&(e=e.concat(n)),n=isNaN(s)?{time:0}:{time:s}),!(parseInt(e[0])>=128&&parseInt(e[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");e.slice(1).forEach(i=>{if(i=parseInt(i),!(i>=0&&i<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),n||(n={time:0})}return this._midiOutput.send(e,q.toTimestamp(n.time)),this}sendSysex(e,n=[],s={}){if(e=[].concat(e),n instanceof Uint8Array){const i=new Uint8Array(1+e.length+n.length+1);i[0]=F.SYSTEM_MESSAGES.sysex,i.set(Uint8Array.from(e),1),i.set(n,1+e.length),i[i.length-1]=F.SYSTEM_MESSAGES.sysexend,this.send(i,{time:s.time})}else{const i=e.concat(n,F.SYSTEM_MESSAGES.sysexend);this.send([F.SYSTEM_MESSAGES.sysex].concat(i),{time:s.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():U.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(e,n={}){if(U.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([F.SYSTEM_MESSAGES.timecode,e],{time:n.time}),this}sendSongPosition(e=0,n={}){e=Math.floor(e)||0;var s=e>>7&127,i=e&127;return this.send([F.SYSTEM_MESSAGES.songposition,s,i],{time:n.time}),this}sendSongSelect(e=0,n={}){if(U.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([F.SYSTEM_MESSAGES.songselect,e],{time:n.time}),this}sendTuneRequest(e={}){return this.send([F.SYSTEM_MESSAGES.tunerequest],{time:e.time}),this}sendClock(e={}){return this.send([F.SYSTEM_MESSAGES.clock],{time:e.time}),this}sendStart(e={}){return this.send([F.SYSTEM_MESSAGES.start],{time:e.time}),this}sendContinue(e={}){return this.send([F.SYSTEM_MESSAGES.continue],{time:e.time}),this}sendStop(e={}){return this.send([F.SYSTEM_MESSAGES.stop],{time:e.time}),this}sendActiveSensing(e={}){return this.send([F.SYSTEM_MESSAGES.activesensing],{time:e.time}),this}sendReset(e={}){return this.send([F.SYSTEM_MESSAGES.reset],{time:e.time}),this}sendTuningRequest(e={}){return U.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(e)}sendKeyAftertouch(e,n,s={}){return s.channels==null&&(s.channels=F.MIDI_CHANNEL_NUMBERS),q.sanitizeChannels(s.channels).forEach(i=>{this.channels[i].sendKeyAftertouch(e,n,s)}),this}sendControlChange(e,n,s={},i={}){if(U.validation&&(Array.isArray(s)||Number.isInteger(s)||s==="all")){const r=s;s=i,s.channels=r,s.channels==="all"&&(s.channels=F.MIDI_CHANNEL_NUMBERS)}return s.channels==null&&(s.channels=F.MIDI_CHANNEL_NUMBERS),q.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendControlChange(e,n,s)}),this}sendPitchBendRange(e=0,n=0,s={}){return s.channels==null&&(s.channels=F.MIDI_CHANNEL_NUMBERS),q.sanitizeChannels(s.channels).forEach(i=>{this.channels[i].sendPitchBendRange(e,n,s)}),this}setPitchBendRange(e=0,n=0,s="all",i={}){return U.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),i.channels=s,i.channels==="all"&&(i.channels=F.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(e,n,i)}sendRpnValue(e,n,s={}){return s.channels==null&&(s.channels=F.MIDI_CHANNEL_NUMBERS),q.sanitizeChannels(s.channels).forEach(i=>{this.channels[i].sendRpnValue(e,n,s)}),this}setRegisteredParameter(e,n=[],s="all",i={}){return U.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),i.channels=s,i.channels==="all"&&(i.channels=F.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(e,n,i)}sendChannelAftertouch(e,n={},s={}){if(U.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=s,n.channels=i,n.channels==="all"&&(n.channels=F.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),q.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendChannelAftertouch(e,n)}),this}sendPitchBend(e,n={},s={}){if(U.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=s,n.channels=i,n.channels==="all"&&(n.channels=F.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),q.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendPitchBend(e,n)}),this}sendProgramChange(e=0,n={},s={}){if(U.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=s,n.channels=i,n.channels==="all"&&(n.channels=F.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),q.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendProgramChange(e,n)}),this}sendModulationRange(e,n,s={}){return s.channels==null&&(s.channels=F.MIDI_CHANNEL_NUMBERS),q.sanitizeChannels(s.channels).forEach(i=>{this.channels[i].sendModulationRange(e,n,s)}),this}setModulationRange(e=0,n=0,s="all",i={}){return U.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),i.channels=s,i.channels==="all"&&(i.channels=F.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(e,n,i)}sendMasterTuning(e,n={}){return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),q.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendMasterTuning(e,n)}),this}setMasterTuning(e,n={},s={}){return U.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),s.channels=n,s.channels==="all"&&(s.channels=F.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(e,s)}sendTuningProgram(e,n={}){return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),q.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendTuningProgram(e,n)}),this}setTuningProgram(e,n="all",s={}){return U.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),s.channels=n,s.channels==="all"&&(s.channels=F.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(e,s)}sendTuningBank(e=0,n={}){return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),q.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendTuningBank(e,n)}),this}setTuningBank(e,n="all",s={}){return U.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),s.channels=n,s.channels==="all"&&(s.channels=F.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(e,s)}sendChannelMode(e,n=0,s={},i={}){if(U.validation&&(Array.isArray(s)||Number.isInteger(s)||s==="all")){const r=s;s=i,s.channels=r,s.channels==="all"&&(s.channels=F.MIDI_CHANNEL_NUMBERS)}return s.channels==null&&(s.channels=F.MIDI_CHANNEL_NUMBERS),q.sanitizeChannels(s.channels).forEach(r=>{this.channels[r].sendChannelMode(e,n,s)}),this}sendAllSoundOff(e={}){return e.channels==null&&(e.channels=F.MIDI_CHANNEL_NUMBERS),q.sanitizeChannels(e.channels).forEach(n=>{this.channels[n].sendAllSoundOff(e)}),this}sendAllNotesOff(e={}){return e.channels==null&&(e.channels=F.MIDI_CHANNEL_NUMBERS),q.sanitizeChannels(e.channels).forEach(n=>{this.channels[n].sendAllNotesOff(e)}),this}sendResetAllControllers(e={},n={}){if(U.validation&&(Array.isArray(e)||Number.isInteger(e)||e==="all")){const s=e;e=n,e.channels=s,e.channels==="all"&&(e.channels=F.MIDI_CHANNEL_NUMBERS)}return e.channels==null&&(e.channels=F.MIDI_CHANNEL_NUMBERS),q.sanitizeChannels(e.channels).forEach(s=>{this.channels[s].sendResetAllControllers(e)}),this}sendPolyphonicMode(e,n={},s={}){if(U.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=s,n.channels=i,n.channels==="all"&&(n.channels=F.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),q.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendPolyphonicMode(e,n)}),this}sendLocalControl(e,n={},s={}){if(U.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=s,n.channels=i,n.channels==="all"&&(n.channels=F.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),q.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendLocalControl(e,n)}),this}sendOmniMode(e,n={},s={}){if(U.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=s,n.channels=i,n.channels==="all"&&(n.channels=F.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),q.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendOmniMode(e,n)}),this}sendNrpnValue(e,n,s={}){return s.channels==null&&(s.channels=F.MIDI_CHANNEL_NUMBERS),q.sanitizeChannels(s.channels).forEach(i=>{this.channels[i].sendNrpnValue(e,n,s)}),this}setNonRegisteredParameter(e,n=[],s="all",i={}){return U.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),i.channels=s,i.channels==="all"&&(i.channels=F.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(e,n,i)}sendRpnIncrement(e,n={}){return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),q.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendRpnIncrement(e,n)}),this}incrementRegisteredParameter(e,n="all",s={}){return U.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),s.channels=n,s.channels==="all"&&(s.channels=F.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(e,s)}sendRpnDecrement(e,n={}){return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),q.sanitizeChannels(n.channels).forEach(s=>{this.channels[s].sendRpnDecrement(e,n)}),this}decrementRegisteredParameter(e,n="all",s={}){return U.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),s.channels=n,s.channels==="all"&&(s.channels=F.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(e,s)}sendNoteOff(e,n={},s={}){if(U.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=s,n.channels=i,n.channels==="all"&&(n.channels=F.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),q.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendNoteOff(e,n)}),this}stopNote(e,n){return this.sendNoteOff(e,n)}playNote(e,n={},s={}){if(U.validation&&(n.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),n.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=s,n.channels=i,n.channels==="all"&&(n.channels=F.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),q.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].playNote(e,n)}),this}sendNoteOn(e,n={},s={}){if(U.validation&&(Array.isArray(n)||Number.isInteger(n)||n==="all")){const i=n;n=s,n.channels=i,n.channels==="all"&&(n.channels=F.MIDI_CHANNEL_NUMBERS)}return n.channels==null&&(n.channels=F.MIDI_CHANNEL_NUMBERS),q.sanitizeChannels(n.channels).forEach(i=>{this.channels[i].sendNoteOn(e,n)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}}/**
 * The `Forwarder` class allows the forwarding of MIDI messages to predetermined outputs. When you
 * call its [`forward()`](#forward) method, it will send the specified [`Message`](Message) object
 * to all the outputs listed in its [`destinations`](#destinations) property.
 *
 * If specific channels or message types have been defined in the [`channels`](#channels) or
 * [`types`](#types) properties, only messages matching the channels/types will be forwarded.
 *
 * While it can be manually instantiated, you are more likely to come across a `Forwarder` object as
 * the return value of the [`Input.addForwarder()`](Input#addForwarder) method.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class d_{constructor(e=[],n={}){this.destinations=[],this.types=[...Object.keys(F.SYSTEM_MESSAGES),...Object.keys(F.CHANNEL_MESSAGES)],this.channels=F.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(e)||(e=[e]),n.types&&!Array.isArray(n.types)&&(n.types=[n.types]),n.channels&&!Array.isArray(n.channels)&&(n.channels=[n.channels]),U.validation&&(e.forEach(s=>{if(!(s instanceof hg))throw new TypeError("Destinations must be of type 'Output'.")}),n.types!==void 0&&n.types.forEach(s=>{if(!F.SYSTEM_MESSAGES.hasOwnProperty(s)&&!F.CHANNEL_MESSAGES.hasOwnProperty(s))throw new TypeError("Type must be a valid message type.")}),n.channels!==void 0&&n.channels.forEach(s=>{if(!F.MIDI_CHANNEL_NUMBERS.includes(s))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=e,n.types&&(this.types=n.types),n.channels&&(this.channels=n.channels)}forward(e){this.suspended||this.types.includes(e.type)&&(e.channel&&!this.channels.includes(e.channel)||this.destinations.forEach(n=>{U.validation&&!(n instanceof hg)||n.send(e)}))}}/**
 * The `InputChannel` class represents a single MIDI input channel (1-16) from a single input
 * device. This object is derived from the host's MIDI subsystem and should not be instantiated
 * directly.
 *
 * All 16 `InputChannel` objects can be found inside the input's [`channels`](Input#channels)
 * property.
 *
 * @fires InputChannel#midimessage
 * @fires InputChannel#unknownmessage
 *
 * @fires InputChannel#noteoff
 * @fires InputChannel#noteon
 * @fires InputChannel#keyaftertouch
 * @fires InputChannel#programchange
 * @fires InputChannel#channelaftertouch
 * @fires InputChannel#pitchbend
 *
 * @fires InputChannel#allnotesoff
 * @fires InputChannel#allsoundoff
 * @fires InputChannel#localcontrol
 * @fires InputChannel#monomode
 * @fires InputChannel#omnimode
 * @fires InputChannel#resetallcontrollers
 *
 * @fires InputChannel#event:nrpn
 * @fires InputChannel#event:nrpn-dataentrycoarse
 * @fires InputChannel#event:nrpn-dataentryfine
 * @fires InputChannel#event:nrpn-dataincrement
 * @fires InputChannel#event:nrpn-datadecrement
 * @fires InputChannel#event:rpn
 * @fires InputChannel#event:rpn-dataentrycoarse
 * @fires InputChannel#event:rpn-dataentryfine
 * @fires InputChannel#event:rpn-dataincrement
 * @fires InputChannel#event:rpn-datadecrement
 *
 * @fires InputChannel#controlchange
 * @fires InputChannel#event:controlchange-controllerxxx
 * @fires InputChannel#event:controlchange-bankselectcoarse
 * @fires InputChannel#event:controlchange-modulationwheelcoarse
 * @fires InputChannel#event:controlchange-breathcontrollercoarse
 * @fires InputChannel#event:controlchange-footcontrollercoarse
 * @fires InputChannel#event:controlchange-portamentotimecoarse
 * @fires InputChannel#event:controlchange-dataentrycoarse
 * @fires InputChannel#event:controlchange-volumecoarse
 * @fires InputChannel#event:controlchange-balancecoarse
 * @fires InputChannel#event:controlchange-pancoarse
 * @fires InputChannel#event:controlchange-expressioncoarse
 * @fires InputChannel#event:controlchange-effectcontrol1coarse
 * @fires InputChannel#event:controlchange-effectcontrol2coarse
 * @fires InputChannel#event:controlchange-generalpurposecontroller1
 * @fires InputChannel#event:controlchange-generalpurposecontroller2
 * @fires InputChannel#event:controlchange-generalpurposecontroller3
 * @fires InputChannel#event:controlchange-generalpurposecontroller4
 * @fires InputChannel#event:controlchange-bankselectfine
 * @fires InputChannel#event:controlchange-modulationwheelfine
 * @fires InputChannel#event:controlchange-breathcontrollerfine
 * @fires InputChannel#event:controlchange-footcontrollerfine
 * @fires InputChannel#event:controlchange-portamentotimefine
 * @fires InputChannel#event:controlchange-dataentryfine
 * @fires InputChannel#event:controlchange-channelvolumefine
 * @fires InputChannel#event:controlchange-balancefine
 * @fires InputChannel#event:controlchange-panfine
 * @fires InputChannel#event:controlchange-expressionfine
 * @fires InputChannel#event:controlchange-effectcontrol1fine
 * @fires InputChannel#event:controlchange-effectcontrol2fine
 * @fires InputChannel#event:controlchange-damperpedal
 * @fires InputChannel#event:controlchange-portamento
 * @fires InputChannel#event:controlchange-sostenuto
 * @fires InputChannel#event:controlchange-softpedal
 * @fires InputChannel#event:controlchange-legatopedal
 * @fires InputChannel#event:controlchange-hold2
 * @fires InputChannel#event:controlchange-soundvariation
 * @fires InputChannel#event:controlchange-resonance
 * @fires InputChannel#event:controlchange-releasetime
 * @fires InputChannel#event:controlchange-attacktime
 * @fires InputChannel#event:controlchange-brightness
 * @fires InputChannel#event:controlchange-decaytime
 * @fires InputChannel#event:controlchange-vibratorate
 * @fires InputChannel#event:controlchange-vibratodepth
 * @fires InputChannel#event:controlchange-vibratodelay
 * @fires InputChannel#event:controlchange-generalpurposecontroller5
 * @fires InputChannel#event:controlchange-generalpurposecontroller6
 * @fires InputChannel#event:controlchange-generalpurposecontroller7
 * @fires InputChannel#event:controlchange-generalpurposecontroller8
 * @fires InputChannel#event:controlchange-portamentocontrol
 * @fires InputChannel#event:controlchange-highresolutionvelocityprefix
 * @fires InputChannel#event:controlchange-effect1depth
 * @fires InputChannel#event:controlchange-effect2depth
 * @fires InputChannel#event:controlchange-effect3depth
 * @fires InputChannel#event:controlchange-effect4depth
 * @fires InputChannel#event:controlchange-effect5depth
 * @fires InputChannel#event:controlchange-dataincrement
 * @fires InputChannel#event:controlchange-datadecrement
 * @fires InputChannel#event:controlchange-nonregisteredparameterfine
 * @fires InputChannel#event:controlchange-nonregisteredparametercoarse
 * @fires InputChannel#event:controlchange-registeredparameterfine
 * @fires InputChannel#event:controlchange-registeredparametercoarse
 * @fires InputChannel#event:controlchange-allsoundoff
 * @fires InputChannel#event:controlchange-resetallcontrollers
 * @fires InputChannel#event:controlchange-localcontrol
 * @fires InputChannel#event:controlchange-allnotesoff
 * @fires InputChannel#event:controlchange-omnimodeoff
 * @fires InputChannel#event:controlchange-omnimodeon
 * @fires InputChannel#event:controlchange-monomodeon
 * @fires InputChannel#event:controlchange-polymodeon
 * @fires InputChannel#event:
 *
 * @extends EventEmitter
 * @license Apache-2.0
 * @since 3.0.0
 */class EK extends ts{constructor(e,n){super(),this._input=e,this._number=n,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(e){const n=Object.assign({},e);n.port=this.input,n.target=this,n.type="midimessage",this.emit(n.type,n),this._parseEventForStandardMessages(n)}_parseEventForStandardMessages(e){const n=Object.assign({},e);n.type=n.message.type||"unknownmessage";const s=e.message.dataBytes[0],i=e.message.dataBytes[1];if(n.type==="noteoff"||n.type==="noteon"&&i===0)this.notesState[s]=!1,n.type="noteoff",n.note=new Ia(q.offsetNumber(s,this.octaveOffset+this.input.octaveOffset+U.octaveOffset),{rawAttack:0,rawRelease:i}),n.value=q.from7bitToFloat(i),n.rawValue=i,n.velocity=n.note.release,n.rawVelocity=n.note.rawRelease;else if(n.type==="noteon")this.notesState[s]=!0,n.note=new Ia(q.offsetNumber(s,this.octaveOffset+this.input.octaveOffset+U.octaveOffset),{rawAttack:i}),n.value=q.from7bitToFloat(i),n.rawValue=i,n.velocity=n.note.attack,n.rawVelocity=n.note.rawAttack;else if(n.type==="keyaftertouch")n.note=new Ia(q.offsetNumber(s,this.octaveOffset+this.input.octaveOffset+U.octaveOffset)),n.value=q.from7bitToFloat(i),n.rawValue=i,n.identifier=n.note.identifier,n.key=n.note.number,n.rawKey=s;else if(n.type==="controlchange"){n.controller={number:s,name:F.CONTROL_CHANGE_MESSAGES[s].name,description:F.CONTROL_CHANGE_MESSAGES[s].description,position:F.CONTROL_CHANGE_MESSAGES[s].position},n.subtype=n.controller.name||"controller"+s,n.value=q.from7bitToFloat(i),n.rawValue=i;const r=Object.assign({},n);r.type=`${n.type}-controller${s}`,delete r.subtype,this.emit(r.type,r);const a=Object.assign({},n);a.type=`${n.type}-`+F.CONTROL_CHANGE_MESSAGES[s].name,delete a.subtype,a.type.indexOf("controller")!==0&&this.emit(a.type,a),n.message.dataBytes[0]>=120&&this._parseChannelModeMessage(n),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(n.message.dataBytes[0])&&this._parseEventForParameterNumber(n)}else n.type==="programchange"?(n.value=s,n.rawValue=n.value):n.type==="channelaftertouch"?(n.value=q.from7bitToFloat(s),n.rawValue=s):n.type==="pitchbend"?(n.value=((i<<7)+s-8192)/8192,n.rawValue=(i<<7)+s):n.type="unknownmessage";this.emit(n.type,n)}_parseChannelModeMessage(e){const n=Object.assign({},e);n.type=n.controller.name,n.type==="localcontrol"&&(n.value=n.message.data[2]===127,n.rawValue=n.message.data[2]),n.type==="omnimodeon"?(n.type="omnimode",n.value=!0,n.rawValue=n.message.data[2]):n.type==="omnimodeoff"&&(n.type="omnimode",n.value=!1,n.rawValue=n.message.data[2]),n.type==="monomodeon"?(n.type="monomode",n.value=!0,n.rawValue=n.message.data[2]):n.type==="polymodeon"&&(n.type="monomode",n.value=!1,n.rawValue=n.message.data[2]),this.emit(n.type,n)}_parseEventForParameterNumber(e){const n=e.message.dataBytes[0],s=e.message.dataBytes[1];n===99||n===101?(this._nrpnBuffer=[],this._rpnBuffer=[],n===99?this._nrpnBuffer=[e.message]:s!==127&&(this._rpnBuffer=[e.message])):n===98||n===100?n===98?(this._rpnBuffer=[],this._nrpnBuffer.length===1?this._nrpnBuffer.push(e.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],this._rpnBuffer.length===1&&s!==127?this._rpnBuffer.push(e.message):this._rpnBuffer=[]):(n===6||n===38||n===96||n===97)&&(this._rpnBuffer.length===2?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],e):this._nrpnBuffer.length===2?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],e):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(e){return e===6||e===38||e===96||e===97||e===98||e===99||e===100||e===101}_dispatchParameterNumberEvent(e,n,s,i){e=e==="nrpn"?"nrpn":"rpn";const r={target:i.target,timestamp:i.timestamp,message:i.message,parameterMsb:n,parameterLsb:s,value:q.from7bitToFloat(i.message.dataBytes[1]),rawValue:i.message.dataBytes[1]};e==="rpn"?r.parameter=Object.keys(F.REGISTERED_PARAMETERS).find(l=>F.REGISTERED_PARAMETERS[l][0]===n&&F.REGISTERED_PARAMETERS[l][1]===s):r.parameter=(n<<7)+s;const a=F.CONTROL_CHANGE_MESSAGES[i.message.dataBytes[0]].name;r.type=`${e}-${a}`,this.emit(r.type,r);const o=Object.assign({},r);o.type==="nrpn-dataincrement"?o.type="nrpn-databuttonincrement":o.type==="nrpn-datadecrement"?o.type="nrpn-databuttondecrement":o.type==="rpn-dataincrement"?o.type="rpn-databuttonincrement":o.type==="rpn-datadecrement"&&(o.type="rpn-databuttondecrement"),this.emit(o.type,o),r.type=e,r.subtype=a,this.emit(r.type,r)}getChannelModeByNumber(e){return U.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),e=Math.floor(e)),q.getChannelModeByNumber(e)}getCcNameByNumber(e){if(U.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),e=parseInt(e),!(e>=0&&e<=127)))throw new RangeError("Invalid control change number.");return q.getCcNameByNumber(e)}getNoteState(e){e instanceof Ia&&(e=e.identifier);const n=q.guessNoteNumber(e,U.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[n]}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(e){this.validation&&(e=!!e),this.parameterNumberEventsEnabled=e}}/**
 * The `Message` class represents a single MIDI message. It has several properties that make it
 * easy to make sense of the binary data it contains.
 *
 * @license Apache-2.0
 * @since 3.0.0
 */class GN{constructor(e){this.rawData=e,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=(this.statusByte&15)+1):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=q.getPropertyByValue(F.CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=q.getPropertyByValue(F.SYSTEM_MESSAGES,this.command)),this.statusByte===F.SYSTEM_MESSAGES.sysex&&(this.dataBytes[0]===0?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}/**
 * The `Input` class represents a single MIDI input port. This object is automatically instantiated
 * by the library according to the host's MIDI subsystem and does not need to be directly
 * instantiated. Instead, you can access all `Input` objects by referring to the
 * [`WebMidi.inputs`](WebMidi#inputs) array. You can also retrieve inputs by using methods such as
 * [`WebMidi.getInputByName()`](WebMidi#getInputByName) and
 * [`WebMidi.getInputById()`](WebMidi#getInputById).
 *
 * Note that a single MIDI device may expose several inputs and/or outputs.
 *
 * **Important**: the `Input` class does not directly fire channel-specific MIDI messages
 * (such as [`noteon`](InputChannel#event:noteon) or
 * [`controlchange`](InputChannel#event:controlchange), etc.). The [`InputChannel`](InputChannel)
 * object does that. However, you can still use the
 * [`Input.addListener()`](#addListener) method to listen to channel-specific events on multiple
 * [`InputChannel`](InputChannel) objects at once.
 *
 * @fires Input#opened
 * @fires Input#disconnected
 * @fires Input#closed
 * @fires Input#midimessage
 *
 * @fires Input#sysex
 * @fires Input#timecode
 * @fires Input#songposition
 * @fires Input#songselect
 * @fires Input#tunerequest
 * @fires Input#clock
 * @fires Input#start
 * @fires Input#continue
 * @fires Input#stop
 * @fires Input#activesensing
 * @fires Input#reset
 *
 * @fires Input#unknownmidimessage
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class AK extends ts{constructor(e){super(),this._midiInput=e,this._octaveOffset=0,this.channels=[];for(let n=1;n<=16;n++)this.channels[n]=new EK(this,n);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}async destroy(){this.removeListener(),this.channels.forEach(e=>e.destroy()),this.channels=[],this._forwarders=[],this._midiInput&&(this._midiInput.onstatechange=null,this._midiInput.onmidimessage=null),await this.close(),this._midiInput=null}_onStateChange(e){let n={timestamp:U.time,target:this,port:this};e.port.connection==="open"?(n.type="opened",this.emit("opened",n)):e.port.connection==="closed"&&e.port.state==="connected"?(n.type="closed",this.emit("closed",n)):e.port.connection==="closed"&&e.port.state==="disconnected"?(n.type="disconnected",n.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",n)):e.port.connection==="pending"&&e.port.state==="disconnected"||console.warn("This statechange event was not caught: ",e.port.connection,e.port.state)}_onMidiMessage(e){const n=new GN(e.data),s={port:this,target:this,message:n,timestamp:e.timeStamp,type:"midimessage",data:n.data,rawData:n.data,statusByte:n.data[0],dataBytes:n.dataBytes};this.emit("midimessage",s),n.isSystemMessage?this._parseEvent(s):n.isChannelMessage&&this.channels[n.channel]._processMidiMessageEvent(s),this._forwarders.forEach(i=>i.forward(n))}_parseEvent(e){const n=Object.assign({},e);n.type=n.message.type||"unknownmidimessage",n.type==="songselect"&&(n.song=e.data[1]+1,n.value=e.data[1],n.rawValue=n.value),this.emit(n.type,n)}async open(){try{await this._midiInput.open()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}async close(){if(!this._midiInput)return Promise.resolve(this);try{await this._midiInput.close()}catch(e){return Promise.reject(e)}return Promise.resolve(this)}getChannelModeByNumber(){U.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(e,n,s={}){if(U.validation&&typeof s=="function"){let i=n!=null?[].concat(n):void 0;n=s,s={channels:i}}if(F.CHANNEL_EVENTS.includes(e)){s.channels===void 0&&(s.channels=F.MIDI_CHANNEL_NUMBERS);let i=[];return q.sanitizeChannels(s.channels).forEach(r=>{i.push(this.channels[r].addListener(e,n,s))}),i}else return super.addListener(e,n,s)}addOneTimeListener(e,n,s={}){return s.remaining=1,this.addListener(e,n,s)}on(e,n,s,i){return this.addListener(e,n,s,i)}hasListener(e,n,s={}){if(U.validation&&typeof s=="function"){let i=[].concat(n);n=s,s={channels:i}}return F.CHANNEL_EVENTS.includes(e)?(s.channels===void 0&&(s.channels=F.MIDI_CHANNEL_NUMBERS),q.sanitizeChannels(s.channels).every(i=>this.channels[i].hasListener(e,n))):super.hasListener(e,n)}removeListener(e,n,s={}){if(U.validation&&typeof s=="function"){let i=[].concat(n);n=s,s={channels:i}}if(s.channels===void 0&&(s.channels=F.MIDI_CHANNEL_NUMBERS),e==null)return q.sanitizeChannels(s.channels).forEach(i=>{this.channels[i]&&this.channels[i].removeListener()}),super.removeListener();F.CHANNEL_EVENTS.includes(e)?q.sanitizeChannels(s.channels).forEach(i=>{this.channels[i].removeListener(e,n,s)}):super.removeListener(e,n,s)}addForwarder(e,n={}){let s;return e instanceof d_?s=e:s=new d_(e,n),this._forwarders.push(s),s}removeForwarder(e){this._forwarders=this._forwarders.filter(n=>n!==e)}hasForwarder(e){return this._forwarders.includes(e)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return U.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}/**
 * The `WebMidi` object makes it easier to work with the low-level Web MIDI API. Basically, it
 * simplifies sending outgoing MIDI messages and reacting to incoming MIDI messages.
 *
 * When using the WebMidi.js library, you should know that the `WebMidi` class has already been
 * instantiated. You cannot instantiate it yourself. If you use the **IIFE** version, you should
 * simply use the global object called `WebMidi`. If you use the **CJS** (CommonJS) or **ESM** (ES6
 * module) version, you get an already-instantiated object when you import the module.
 *
 * @fires WebMidi#connected
 * @fires WebMidi#disabled
 * @fires WebMidi#disconnected
 * @fires WebMidi#enabled
 * @fires WebMidi#error
 * @fires WebMidi#midiaccessgranted
 * @fires WebMidi#portschanged
 *
 * @extends EventEmitter
 * @license Apache-2.0
 */class kK extends ts{constructor(){super(),this.defaults={note:{attack:q.from7bitToFloat(64),release:q.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}async enable(e={},n=!1){if(q.isNode){try{window.navigator}catch{let o=await Object.getPrototypeOf(async function(){}).constructor(`
        let jzz = await import("jzz");
        return jzz.default;
        `)();global.navigator||(global.navigator={}),Object.assign(global.navigator,o)}try{}catch{global.performance=await Object.getPrototypeOf(async function(){}).constructor(`
        let perf_hooks = await import("perf_hooks");
        return perf_hooks.performance;
        `)()}}if(this.validation=e.validation!==!1,this.validation&&(typeof e=="function"&&(e={callback:e,sysex:n}),n&&(e.sysex=!0)),this.enabled)return typeof e.callback=="function"&&e.callback(),Promise.resolve();const s={timestamp:this.time,target:this,type:"error",error:void 0},i={timestamp:this.time,target:this,type:"midiaccessgranted"},r={timestamp:this.time,target:this,type:"enabled"};try{typeof e.requestMIDIAccessFunction=="function"?this.interface=await e.requestMIDIAccessFunction({sysex:e.sysex,software:e.software}):this.interface=await navigator.requestMIDIAccess({sysex:e.sysex,software:e.software})}catch(a){return s.error=a,this.emit("error",s),typeof e.callback=="function"&&e.callback(a),Promise.reject(a)}this.emit("midiaccessgranted",i),this.interface.onstatechange=this._onInterfaceStateChange.bind(this);try{await this._updateInputsAndOutputs()}catch(a){return s.error=a,this.emit("error",s),typeof e.callback=="function"&&e.callback(a),Promise.reject(a)}return this.emit("enabled",r),typeof e.callback=="function"&&e.callback(),Promise.resolve(this)}async disable(){return this.interface&&(this.interface.onstatechange=void 0),this._destroyInputsAndOutputs().then(()=>{navigator&&typeof navigator.close=="function"&&navigator.close(),this.interface=null;let e={timestamp:this.time,target:this,type:"disabled"};this.emit("disabled",e),this.removeListener()})}getInputById(e,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(n.disconnected){for(let s=0;s<this._disconnectedInputs.length;s++)if(this._disconnectedInputs[s]._midiInput&&this._disconnectedInputs[s].id===e.toString())return this._disconnectedInputs[s]}else for(let s=0;s<this.inputs.length;s++)if(this.inputs[s]._midiInput&&this.inputs[s].id===e.toString())return this.inputs[s]}getInputByName(e,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(n.disconnected){for(let s=0;s<this._disconnectedInputs.length;s++)if(~this._disconnectedInputs[s].name.indexOf(e))return this._disconnectedInputs[s]}else for(let s=0;s<this.inputs.length;s++)if(~this.inputs[s].name.indexOf(e))return this.inputs[s]}getOutputByName(e,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return;e=e.toString()}if(n.disconnected){for(let s=0;s<this._disconnectedOutputs.length;s++)if(~this._disconnectedOutputs[s].name.indexOf(e))return this._disconnectedOutputs[s]}else for(let s=0;s<this.outputs.length;s++)if(~this.outputs[s].name.indexOf(e))return this.outputs[s]}getOutputById(e,n={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!e)return}if(n.disconnected){for(let s=0;s<this._disconnectedOutputs.length;s++)if(this._disconnectedOutputs[s]._midiOutput&&this._disconnectedOutputs[s].id===e.toString())return this._disconnectedOutputs[s]}else for(let s=0;s<this.outputs.length;s++)if(this.outputs[s]._midiOutput&&this.outputs[s].id===e.toString())return this.outputs[s]}noteNameToNumber(e){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),q.toNoteNumber(e,this.octaveOffset)}getOctave(e){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),e=parseInt(e)),!isNaN(e)&&e>=0&&e<=127?q.getNoteDetails(q.offsetNumber(e,this.octaveOffset)).octave:!1}sanitizeChannels(e){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),q.sanitizeChannels(e)}toMIDIChannels(e){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),q.sanitizeChannels(e)}guessNoteNumber(e){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),q.guessNoteNumber(e,this.octaveOffset)}getValidNoteArray(e,n={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),q.buildNoteArray(e,n)}convertToTimestamp(e){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),q.toTimestamp(e)}async _destroyInputsAndOutputs(){let e=[];return this.inputs.forEach(n=>e.push(n.destroy())),this.outputs.forEach(n=>e.push(n.destroy())),Promise.all(e).then(()=>{this._inputs=[],this._outputs=[]})}_onInterfaceStateChange(e){this._updateInputsAndOutputs();let n={timestamp:e.timeStamp,type:e.port.state,target:this};if(e.port.state==="connected"&&e.port.connection==="open"){e.port.type==="output"?n.port=this.getOutputById(e.port.id):e.port.type==="input"&&(n.port=this.getInputById(e.port.id)),this.emit(e.port.state,n);const s=Object.assign({},n);s.type="portschanged",this.emit(s.type,s)}else if(e.port.state==="disconnected"&&e.port.connection==="pending"){e.port.type==="input"?n.port=this.getInputById(e.port.id,{disconnected:!0}):e.port.type==="output"&&(n.port=this.getOutputById(e.port.id,{disconnected:!0})),this.emit(e.port.state,n);const s=Object.assign({},n);s.type="portschanged",this.emit(s.type,s)}}async _updateInputsAndOutputs(){return Promise.all([this._updateInputs(),this._updateOutputs()])}async _updateInputs(){if(!this.interface)return;for(let n=this._inputs.length-1;n>=0;n--){const s=this._inputs[n];Array.from(this.interface.inputs.values()).find(r=>r===s._midiInput)||(this._disconnectedInputs.push(s),this._inputs.splice(n,1))}let e=[];return this.interface.inputs.forEach(n=>{if(!this._inputs.find(s=>s._midiInput===n)){let s=this._disconnectedInputs.find(i=>i._midiInput===n);s||(s=new AK(n)),this._inputs.push(s),e.push(s.open())}}),Promise.all(e)}async _updateOutputs(){if(!this.interface)return;for(let n=this._outputs.length-1;n>=0;n--){const s=this._outputs[n];Array.from(this.interface.outputs.values()).find(r=>r===s._midiOutput)||(this._disconnectedOutputs.push(s),this._outputs.splice(n,1))}let e=[];return this.interface.outputs.forEach(n=>{if(!this._outputs.find(s=>s._midiOutput===n)){let s=this._disconnectedOutputs.find(i=>i._midiOutput===n);s||(s=new hg(n)),this._outputs.push(s),e.push(s.open())}}),Promise.all(e)}get enabled(){return this.interface!==null}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),q.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),q.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&!!navigator.requestMIDIAccess}get sysexEnabled(){return!!(this.interface&&this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.1.14"}get flavour(){return"esm"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),F.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.SYSTEM_MESSAGES."),F.SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.CHANNEL_MODE_MESSAGES."),F.CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been replaced by the Enumerations.CONTROL_CHANGE_MESSAGES array."),F.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.REGISTERED_PARAMETERS."),F.REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}}const U=new kK;U.constructor=null;class NK{constructor(){de(this,"enabled",!1);de(this,"activeInput",null);de(this,"callbacks",null);de(this,"deviceChangeCallbacks",[])}async enable(){this.enabled||(await U.enable(),this.enabled=!0,U.addListener("connected",()=>this.handleDeviceChange()),U.addListener("disconnected",()=>this.handleDeviceChange()),this.autoSelectDevice())}getDevices(){return this.enabled?U.inputs.map(e=>({id:e.id,name:e.name,manufacturer:e.manufacturer,connected:!0})):[]}selectDevice(e){this.detachListeners();const n=U.inputs.find(s=>s.id===e);n&&(this.activeInput=n,this.attachListeners())}getActiveDeviceId(){var e;return((e=this.activeInput)==null?void 0:e.id)??null}setCallbacks(e){this.callbacks=e}onDeviceChange(e){return this.deviceChangeCallbacks.push(e),()=>{this.deviceChangeCallbacks=this.deviceChangeCallbacks.filter(n=>n!==e)}}autoSelectDevice(){const e=U.inputs.find(n=>dV.test(n.name));e?this.selectDevice(e.id):U.inputs.length>0&&this.selectDevice(U.inputs[0].id)}handleDeviceChange(){const e=this.getDevices();this.activeInput&&!U.inputs.find(n=>n.id===this.activeInput.id)&&(this.activeInput=null,this.autoSelectDevice()),this.deviceChangeCallbacks.forEach(n=>n(e))}attachListeners(){this.activeInput&&(this.activeInput.addListener("noteon",e=>{var s;const n=lV(e.note.rawAttack);(s=this.callbacks)==null||s.onNoteOn(e.note.number,n,e.message.channel)}),this.activeInput.addListener("noteoff",e=>{var n;(n=this.callbacks)==null||n.onNoteOff(e.note.number,e.message.channel)}),this.activeInput.addListener("controlchange",e=>{var n;e.controller.number!==void 0&&e.rawValue!==void 0&&((n=this.callbacks)==null||n.onControlChange(e.controller.number,e.rawValue))}))}detachListeners(){this.activeInput&&(this.activeInput.removeListener("noteon"),this.activeInput.removeListener("noteoff"),this.activeInput.removeListener("controlchange"))}isEnabled(){return this.enabled}dispose(){this.detachListeners(),this.activeInput=null,this.callbacks=null,this.deviceChangeCallbacks=[],this.enabled&&(U.disable(),this.enabled=!1)}}const xr=new NK;function MK(t){const[e,n]=x.useState([]),[s,i]=x.useState(null),[r,a]=x.useState(!1),o=x.useCallback(async()=>{await xr.enable(),a(!0),n(xr.getDevices()),i(xr.getActiveDeviceId())},[]);x.useEffect(()=>{xr.setCallbacks(t)},[t]),x.useEffect(()=>r?xr.onDeviceChange(u=>{n(u),i(xr.getActiveDeviceId())}):void 0,[r]);const l=x.useCallback(c=>{xr.selectDevice(c),i(c)},[]);return{devices:e,activeDeviceId:s,enabled:r,enable:o,selectDevice:l}}class RK{constructor(){de(this,"volume",null);de(this,"started",!1);de(this,"kick",null);de(this,"snare",null);de(this,"closedHH",null);de(this,"openHH",null);de(this,"clap",null);de(this,"tom",null);de(this,"crash",null);de(this,"ride",null);de(this,"hhFilter",null)}async start(){this.started||(this.volume=new js(-6).toDestination(),this.hhFilter=new ia({frequency:8e3,type:"highpass"}),this.hhFilter.connect(this.volume),this.kick=new Un({pitchDecay:.05,octaves:6,oscillator:{type:"sine"},envelope:{attack:.001,decay:.3,sustain:0,release:.1}}),this.kick.connect(this.volume),this.snare=new Vt({noise:{type:"white"},envelope:{attack:.001,decay:.15,sustain:0,release:.05}}),this.snare.connect(this.volume),this.closedHH=new Vt({noise:{type:"white"},envelope:{attack:.001,decay:.05,sustain:0,release:.01}}),this.closedHH.connect(this.hhFilter),this.openHH=new Vt({noise:{type:"white"},envelope:{attack:.001,decay:.3,sustain:0,release:.1}}),this.openHH.connect(this.hhFilter),this.clap=new Vt({noise:{type:"pink"},envelope:{attack:.001,decay:.12,sustain:0,release:.05}}),this.clap.connect(this.volume),this.tom=new Un({pitchDecay:.03,octaves:4,oscillator:{type:"sine"},envelope:{attack:.001,decay:.2,sustain:0,release:.1}}),this.tom.connect(this.volume),this.crash=new Ss({frequency:300,envelope:{attack:.001,decay:1.4,release:.4},harmonicity:5.1,modulationIndex:20,resonance:800,octaves:1.5}),this.crash.connect(this.volume),this.ride=new Ss({frequency:400,envelope:{attack:.001,decay:.5,release:.15},harmonicity:5.1,modulationIndex:14,resonance:1200,octaves:1}),this.ride.connect(this.volume),this.started=!0)}hit(e,n){var i,r,a,o,l,c,u,d;if(!this.started)return;const s=n*.8+.2;switch(e){case 0:(i=this.kick)==null||i.triggerAttackRelease("C1","8n",Kn(),s);break;case 1:(r=this.snare)==null||r.triggerAttackRelease("8n",Kn(),s);break;case 2:(a=this.closedHH)==null||a.triggerAttackRelease("16n",Kn(),s);break;case 3:(o=this.openHH)==null||o.triggerAttackRelease("8n",Kn(),s);break;case 4:(l=this.clap)==null||l.triggerAttackRelease("16n",Kn(),s);break;case 5:(c=this.tom)==null||c.triggerAttackRelease("G1","8n",Kn(),s);break;case 6:(u=this.crash)==null||u.triggerAttackRelease(300,"16n",Kn(),s);break;case 7:(d=this.ride)==null||d.triggerAttackRelease(400,"32n",Kn(),s);break}}hitByMidiNote(e,n){const s=Od.get(e);return s===void 0?!1:(this.hit(s,n),!0)}setVolume(e){this.volume&&(this.volume.volume.value=e)}isStarted(){return this.started}dispose(){var e,n,s,i,r,a,o,l,c,u;(e=this.kick)==null||e.dispose(),(n=this.snare)==null||n.dispose(),(s=this.closedHH)==null||s.dispose(),(i=this.openHH)==null||i.dispose(),(r=this.clap)==null||r.dispose(),(a=this.tom)==null||a.dispose(),(o=this.crash)==null||o.dispose(),(l=this.ride)==null||l.dispose(),(c=this.hhFilter)==null||c.dispose(),(u=this.volume)==null||u.dispose(),this.kick=null,this.snare=null,this.closedHH=null,this.openHH=null,this.clap=null,this.tom=null,this.crash=null,this.ride=null,this.hhFilter=null,this.volume=null,this.started=!1}}const qN=new RK;function DK(t={}){const{onVolumeChange:e,onEffectChange:n,onDrumFlash:s}=t,[i,r]=x.useState(new Map),[a,o]=x.useState({reverbWet:0,chorusDepth:0,filterCutoff:18e3,filterResonance:1}),[l,c]=x.useState("auto"),u=x.useRef("auto"),d=x.useCallback(S=>{u.current=S,c(S)},[]),h=x.useCallback((S,w)=>u.current==="keys"?!1:w===pV?!0:Od.has(S),[]),f=x.useCallback((S,w,E=1)=>{if(h(S,E)){const T=Od.get(S);T!==void 0&&(qN.hit(T,w),s==null||s(T)),ce.getState()==="recording"&&ce.captureNoteOn(S,w,!0)}else Ot.noteOn(S,w),ce.getState()==="recording"&&ce.captureNoteOn(S,w,!1),r(T=>{const C=new Map(T);return C.set(S,{note:S,velocity:w}),C})},[h,s]),m=x.useCallback((S,w=1)=>{h(S,w)?ce.getState()==="recording"&&ce.captureNoteOff(S):(Ot.noteOff(S),ce.getState()==="recording"&&ce.captureNoteOff(S),r(E=>{const T=new Map(E);return T.delete(S),T}))},[h]),g=x.useRef(new Map),b=x.useCallback((S,w)=>{switch(S){case"reverbWet":return w.reverbWet;case"chorusDepth":return w.chorusDepth;case"filterCutoff":return Math.log(w.filterCutoff/60)/Math.log(18e3/60);case"filterResonance":return w.filterResonance/20}},[]),y=x.useCallback((S,w,E)=>{const T=w/127,C=g.current.get(S);if(C!=null&&C.pickedUp)return!0;const N=b(E,Ot.getEffectParams()),A=.05;if(!C){const P=Math.abs(T-N)<A;return g.current.set(S,{lastRaw:w,pickedUp:P}),P}const k=C.lastRaw/127,O=k<=N&&T>=N||k>=N&&T<=N||Math.abs(T-N)<A;return C.lastRaw=w,O&&(C.pickedUp=!0),O},[b]),v=x.useCallback((S,w)=>{if(fV.includes(S)){const T=Math.round(-40+w/127*40);Ot.setVolume(T),e==null||e(T);return}const E=hV.find(T=>T.cc===S);if(E){if(!y(S,w,E.effect))return;const T=w/127;switch(E.effect){case"reverbWet":Ot.setReverbWet(T);break;case"chorusDepth":Ot.setChorusDepth(T);break;case"filterCutoff":{const N=60*Math.pow(300,T);Ot.setFilterCutoff(N);break}case"filterResonance":Ot.setFilterResonance(T*20);break}const C=Ot.getEffectParams();o(C),n==null||n(C)}},[e,n,y]),_=x.useMemo(()=>({onNoteOn:(S,w,E)=>f(S,w,E),onNoteOff:(S,w)=>m(S,w),onControlChange:v}),[f,m,v]);return{activeNotes:i,noteOn:f,noteOff:m,callbacks:_,effectParams:a,setEffectParams:o,routingMode:l,setRoutingMode:d}}function OK(){const[t,e]=x.useState(new Set),n=x.useRef(new Map),s=x.useCallback(i=>{e(o=>{const l=new Set(o);return l.add(i),l});const r=n.current.get(i);r&&clearTimeout(r);const a=setTimeout(()=>{e(o=>{const l=new Set(o);return l.delete(i),l}),n.current.delete(i)},150);n.current.set(i,a)},[]);return{activePads:t,flashPad:s}}function jK(t){const[e,n]=x.useState(0),[s,i]=x.useState(null),r=x.useMemo(()=>{if(!s)return new Set;const o=Q0.find(l=>l.name===s);return o?JY(e,o):new Set},[e,s]),a=x.useMemo(()=>{const o=Array.from(t.keys());return jN(o)},[t]);return{selectedRoot:e,setSelectedRoot:n,selectedScale:s,setSelectedScale:i,highlightedNotes:r,detectedChord:a}}function PK(){const[t,e]=x.useState([]),[n,s]=x.useState("stopped"),[i,r]=x.useState(0),[a,o]=x.useState(Sk),[l,c]=x.useState(!1),[u,d]=x.useState(null),[h,f]=x.useState(null),[m,g]=x.useState(null),[b,y]=x.useState(64),v=x.useRef(!1),_=x.useCallback(()=>{const L=ce.getArrangement();e([...L.tracks]),s(ce.getState()),o(L.bpm),y(L.lengthBeats),d(ce.getArmedTrackId()),f(ce.getRecordingTrackId())},[]);x.useEffect(()=>{v.current||(ce.loadFromLocalStorage(),_(),v.current=!0);const L=ce.onStateChange(_),V=ce.onPositionChange(le=>{r(le),g(ce.getLiveRegion())});return()=>{L(),V()}},[_]),x.useEffect(()=>{v.current&&ce.saveToLocalStorage()},[t,a]);const S=x.useCallback((L="synth",V=0)=>{ce.addTrack(L,V)},[]),w=x.useCallback(L=>{ce.removeTrack(L)},[]),E=x.useCallback((L,V)=>{ce.setTrackInstrument(L,V)},[]),T=x.useCallback((L,V)=>{ce.setTrackVolume(L,V)},[]),C=x.useCallback((L,V)=>{ce.setTrackMute(L,V)},[]),N=x.useCallback((L,V)=>{ce.setTrackSolo(L,V)},[]),A=x.useCallback((L,V)=>{ce.addRegion(L,V)},[]),k=x.useCallback((L,V)=>{ce.removeRegion(L,V)},[]),O=x.useCallback((L,V,le)=>{ce.moveRegion(L,V,le)},[]),P=x.useCallback((L,V,le)=>{ce.moveRegionToTrack(L,V,le)},[]),j=x.useCallback((L,V,le)=>{ce.splitRegion(L,V,le)},[]),I=x.useCallback((L,V)=>{ce.duplicateRegion(L,V)},[]),R=x.useCallback(()=>{ce.play()},[]),D=x.useCallback(()=>{ce.stop()},[]),M=x.useCallback(L=>{ce.setBpm(L)},[]),B=x.useCallback(()=>{const L=!ce.isMetronomeEnabled();ce.setMetronomeEnabled(L),c(L)},[]),z=x.useCallback(L=>{ce.armTrackForRecording(L)},[]),$=x.useCallback(()=>{ce.startRecordingToTrack()},[]),ne=x.useCallback(()=>{ce.stopRecordingToTrack()},[]),re=x.useCallback((L,V,le)=>{ce.updateRegionNotes(L,V,le)},[]),ie=x.useCallback((L,V,le,fe)=>{ce.resizeRegion(L,V,le,fe)},[]),K=x.useCallback((L,V)=>{ce.copyRegion(L,V)},[]),ee=x.useCallback((L,V)=>{ce.pasteRegion(L,V)},[]);return{tracks:t,transportState:n,position:i,bpm:a,metronomeOn:l,armedTrackId:u,recordingTrackId:h,liveRegion:m,lengthBeats:b,addTrack:S,removeTrack:w,setTrackInstrument:E,setTrackVolume:T,setTrackMute:C,setTrackSolo:N,addRegion:A,removeRegion:k,moveRegion:O,moveRegionToTrack:P,splitRegion:j,duplicateRegion:I,play:R,stop:D,setBpm:M,toggleMetronome:B,armTrack:z,startRecording:$,stopRecording:ne,updateRegionNotes:re,resizeRegion:ie,copyRegion:K,pasteRegion:ee}}function BK(){const[t,e]=x.useState(!1),[n,s]=x.useState(!1),[i,r]=x.useState(),[a,o]=x.useState();x.useEffect(()=>{const u=()=>{e(Mn.canUndo()),s(Mn.canRedo()),r(Mn.undoLabel()),o(Mn.redoLabel())};return u(),Mn.onStateChange(u)},[]);const l=x.useCallback(()=>{ce.performUndo()},[]),c=x.useCallback(()=>{ce.performRedo()},[]);return{canUndo:t,canRedo:n,undoLabel:i,redoLabel:a,undo:l,redo:c}}function IK(){const{mode:t,switchMode:e}=wK(),n=CK(),s=OK(),i=PK(),r=BK(),[a,o]=x.useState(null),[l,c]=x.useState(!1),{activeNotes:u,noteOn:d,noteOff:h,callbacks:f,effectParams:m,setEffectParams:g,routingMode:b,setRoutingMode:y}=DK({onVolumeChange:n.changeVolume,onDrumFlash:s.flashPad}),v=MK(f),_=jK(u),S=x.useCallback(async()=>{await n.start(),await qN.start(),await v.enable()},[n,v]);if(x.useEffect(()=>{if(!n.started)return;const E=T=>{if(T.target instanceof HTMLInputElement||T.target instanceof HTMLTextAreaElement)return;const C=T.metaKey||T.ctrlKey;if(C&&T.code==="Digit1"){T.preventDefault(),e("daw");return}if(C&&T.code==="Digit2"){T.preventDefault(),e("learn");return}if(C&&T.code==="Digit3"){T.preventDefault(),e("practice");return}if(C&&T.code==="KeyZ"){T.preventDefault(),T.shiftKey?r.redo():r.undo();return}if(C&&T.code==="KeyE"){T.preventDefault(),c(N=>!N);return}if(t==="daw"){if(T.code==="Escape"&&a){T.preventDefault(),o(null);return}switch(T.code){case"Space":T.preventDefault(),i.transportState==="playing"||i.transportState==="recording"?i.stop():i.play();break;case"KeyR":T.preventDefault(),i.transportState==="recording"?i.stopRecording():i.transportState==="stopped"&&i.startRecording();break;case"KeyM":T.preventDefault(),i.toggleMetronome();break}}};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[n.started,i,r,a,t,e]),!n.started)return p.jsx(U3,{onStart:S});const w=(E,T)=>{d(Oh[E].midiNote,T)};return p.jsxs("div",{className:"flex h-full",children:[p.jsx(fG,{mode:t,onModeChange:e}),p.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[t==="daw"&&p.jsxs(p.Fragment,{children:[p.jsx(mu,{zoneName:"Controls",fallbackVariant:"inline",children:p.jsx(EV,{devices:v.devices,activeDeviceId:v.activeDeviceId,onSelectDevice:v.selectDevice,activeNotes:u,volume:n.volume,onVolumeChange:n.changeVolume,presetIndex:n.presetIndex,onPresetChange:n.changePreset,detectedChord:_.detectedChord,routingMode:b,onRoutingModeChange:y,canUndo:r.canUndo,canRedo:r.canRedo,onUndo:r.undo,onRedo:r.redo})}),p.jsxs(mu,{zoneName:"Transport",fallbackVariant:"inline",children:[p.jsx(vU,{effectParams:m,onEffectChange:g}),p.jsx(_U,{state:i.transportState==="recording"?"recording":i.transportState,bpm:i.bpm,metronomeOn:i.metronomeOn,positionBeats:i.position,recordDisabled:!i.armedTrackId,onRecord:i.startRecording,onStopRecording:i.stopRecording,onPlay:i.play,onStop:i.stop,onBpmChange:i.setBpm,onMetronomeToggle:i.toggleMetronome})]}),a?p.jsx(mu,{zoneName:"Piano Roll",fallbackVariant:"panel",onReset:()=>o(null),children:p.jsx(eG,{trackId:a.trackId,regionId:a.regionId,arrangement:ce.getArrangement(),onClose:()=>o(null),onUpdateNotes:i.updateRegionNotes,onResizeRegion:i.resizeRegion})}):p.jsxs(mu,{zoneName:"Arrangement",fallbackVariant:"panel",children:[p.jsx(IU,{tracks:i.tracks,transportState:i.transportState,position:i.position,lengthBeats:i.lengthBeats,recordingTrackId:i.recordingTrackId,armedTrackId:i.armedTrackId,liveRegion:i.liveRegion,onAddTrack:i.addTrack,onRemoveTrack:i.removeTrack,onSetTrackInstrument:i.setTrackInstrument,onSetTrackVolume:i.setTrackVolume,onSetTrackMute:i.setTrackMute,onSetTrackSolo:i.setTrackSolo,onMoveRegion:i.moveRegion,onResizeRegion:i.resizeRegion,onRemoveRegion:i.removeRegion,onSplitRegion:i.splitRegion,onDuplicateRegion:i.duplicateRegion,onArmTrack:i.armTrack,canUndo:r.canUndo,canRedo:r.canRedo,onUndo:r.undo,onRedo:r.redo,onEditRegion:(E,T)=>o({trackId:E,regionId:T}),onCopyRegion:i.copyRegion,onPasteRegion:i.pasteRegion,hasClipboard:ce.hasClipboard(),onExport:()=>c(!0)}),p.jsx(wU,{activeNotes:u,onNoteOn:d,onNoteOff:h,highlightedNotes:_.highlightedNotes,activePads:s.activePads,onDrumHit:w})]}),l&&p.jsx(uG,{onClose:()=>c(!1)})]}),t==="learn"&&p.jsx(GY,{activeNotes:u,onNoteOn:d,onNoteOff:h,activePads:s.activePads,onDrumHit:w,detectedChord:_.detectedChord}),t==="practice"&&p.jsx(SK,{activeNotes:u,onNoteOn:d,onNoteOff:h,activePads:s.activePads,onDrumHit:w,detectedChord:_.detectedChord,highlightedNotes:_.highlightedNotes,selectedRoot:_.selectedRoot,setSelectedRoot:_.setSelectedRoot,selectedScale:_.selectedScale,setSelectedScale:_.setSelectedScale})]})]})}const LK=GR.createRoot(document.getElementById("root"));LK.render(x.createElement(IK));export{h_ as g};
